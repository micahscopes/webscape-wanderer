const st=Symbol("Comlink.proxy"),Pt=Symbol("Comlink.endpoint"),St=Symbol("Comlink.releaseProxy"),He=Symbol("Comlink.thrown"),ot=e=>typeof e=="object"&&e!==null||typeof e=="function",Tt={canHandle:e=>ot(e)&&e[st],serialize(e){const{port1:t,port2:n}=new MessageChannel;return Be(e,t),[n,[n]]},deserialize(e){return e.start(),Rt(e)}},It={canHandle:e=>ot(e)&&He in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},ut=new Map([["proxy",Tt],["throw",It]]);function Be(e,t=self){t.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:s,type:a,path:u}=Object.assign({path:[]},r.data),h=(r.data.argumentList||[]).map(oe);let y;try{const M=u.slice(0,-1).reduce((l,f)=>l[f],e),x=u.reduce((l,f)=>l[f],e);switch(a){case"GET":y=x;break;case"SET":M[u.slice(-1)[0]]=oe(r.data.value),y=!0;break;case"APPLY":y=x.apply(M,h);break;case"CONSTRUCT":{const l=new x(...h);y=qt(l)}break;case"ENDPOINT":{const{port1:l,port2:f}=new MessageChannel;Be(e,f),y=se(l,[l])}break;case"RELEASE":y=void 0;break;default:return}}catch(M){y={value:M,[He]:0}}Promise.resolve(y).catch(M=>({value:M,[He]:0})).then(M=>{const[x,l]=We(M);t.postMessage(Object.assign(Object.assign({},x),{id:s}),l),a==="RELEASE"&&(t.removeEventListener("message",n),ft(t))})}),t.start&&t.start()}function Ft(e){return e.constructor.name==="MessagePort"}function ft(e){Ft(e)&&e.close()}function Rt(e,t){return Le(e,[],t)}function be(e){if(e)throw new Error("Proxy has been released and is not useable")}function Le(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(a,u){if(be(r),u===St)return()=>le(e,{type:"RELEASE",path:t.map(h=>h.toString())}).then(()=>{ft(e),r=!0});if(u==="then"){if(t.length===0)return{then:()=>s};const h=le(e,{type:"GET",path:t.map(y=>y.toString())}).then(oe);return h.then.bind(h)}return Le(e,[...t,u])},set(a,u,h){be(r);const[y,M]=We(h);return le(e,{type:"SET",path:[...t,u].map(x=>x.toString()),value:y},M).then(oe)},apply(a,u,h){be(r);const y=t[t.length-1];if(y===Pt)return le(e,{type:"ENDPOINT"}).then(oe);if(y==="bind")return Le(e,t.slice(0,-1));const[M,x]=Ge(h);return le(e,{type:"APPLY",path:t.map(l=>l.toString()),argumentList:M},x).then(oe)},construct(a,u){be(r);const[h,y]=Ge(u);return le(e,{type:"CONSTRUCT",path:t.map(M=>M.toString()),argumentList:h},y).then(oe)}});return s}function Kt(e){return Array.prototype.concat.apply([],e)}function Ge(e){const t=e.map(We);return[t.map(n=>n[0]),Kt(t.map(n=>n[1]))]}const ct=new WeakMap;function se(e,t){return ct.set(e,t),e}function qt(e){return Object.assign(e,{[st]:!0})}function We(e){for(const[t,n]of ut)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},s]}return[{type:"RAW",value:e},ct.get(e)||[]]}function oe(e){switch(e.type){case"HANDLER":return ut.get(e.name).deserialize(e.value);case"RAW":return e.value}}function le(e,t,n){return new Promise(r=>{const s=kt();e.addEventListener("message",function a(u){!u.data||!u.data.id||u.data.id!==s||(e.removeEventListener("message",a),r(u.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)})}function kt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Dt=jt;function jt(e,t,n){var r=t[0],s=t[1],a=t[2],u=n[3]*r+n[7]*s+n[11]*a+n[15];return u=u||1,e[0]=(n[0]*r+n[4]*s+n[8]*a+n[12])/u,e[1]=(n[1]*r+n[5]*s+n[9]*a+n[13])/u,e[2]=(n[2]*r+n[6]*s+n[10]*a+n[14])/u,e}var Nt=Yt;function Yt(e,t,n,r){var s=n[0],a=n[2],u=t[0]-s,h=t[2]-a,y=Math.sin(r),M=Math.cos(r);return e[0]=s+h*y+u*M,e[1]=t[1],e[2]=a+h*M-u*y,e}var Ht=Lt;function Lt(e,t,n,r){var s=n[1],a=n[2],u=t[1]-s,h=t[2]-a,y=Math.sin(r),M=Math.cos(r);return e[0]=t[0],e[1]=s+u*M-h*y,e[2]=a+u*y+h*M,e}var Ut=1e-6,Xt=Zt,Ke=Ut;function Zt(e,t){var n=e[0],r=e[1],s=e[2],a=t[0],u=t[1],h=t[2];return Math.abs(n-a)<=Ke*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=Ke*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-h)<=Ke*Math.max(1,Math.abs(s),Math.abs(h))}var Bt=Wt;function Wt(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}var $t=Gt;function Gt(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}var Vt=Qt;function Qt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}var Jt=er;function er(e,t){var n=t[0],r=t[1],s=t[2],a=n*n+r*r+s*s;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}var lt=tr;function tr(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var rr=nr;function nr(e,t){var n=t[0],r=t[1],s=t[2],a=t[3],u=t[4],h=t[5],y=t[6],M=t[7],x=t[8],l=t[9],f=t[10],m=t[11],O=t[12],z=t[13],P=t[14],T=t[15],F=n*h-r*u,S=n*y-s*u,Y=n*M-a*u,H=r*y-s*h,L=r*M-a*h,K=s*M-a*y,W=x*z-l*O,D=x*P-f*O,$=x*T-m*O,_=l*P-f*z,E=l*T-m*z,c=f*T-m*P,d=F*c-S*E+Y*_+H*$-L*D+K*W;return d?(d=1/d,e[0]=(h*c-y*E+M*_)*d,e[1]=(s*E-r*c-a*_)*d,e[2]=(z*K-P*L+T*H)*d,e[3]=(f*L-l*K-m*H)*d,e[4]=(y*$-u*c-M*D)*d,e[5]=(n*c-s*$+a*D)*d,e[6]=(P*Y-O*K-T*S)*d,e[7]=(x*K-f*Y+m*S)*d,e[8]=(u*E-h*$+M*W)*d,e[9]=(r*$-n*E-a*W)*d,e[10]=(O*L-z*Y+T*F)*d,e[11]=(l*Y-x*L-m*F)*d,e[12]=(h*D-u*_-y*W)*d,e[13]=(n*_-r*D+s*W)*d,e[14]=(z*S-O*H-P*F)*d,e[15]=(x*H-l*S+f*F)*d,e):null}var ir=ar;function ar(e,t,n){var r=n[0],s=n[1],a=n[2],u,h,y,M,x,l,f,m,O,z,P,T;return t===e?(e[12]=t[0]*r+t[4]*s+t[8]*a+t[12],e[13]=t[1]*r+t[5]*s+t[9]*a+t[13],e[14]=t[2]*r+t[6]*s+t[10]*a+t[14],e[15]=t[3]*r+t[7]*s+t[11]*a+t[15]):(u=t[0],h=t[1],y=t[2],M=t[3],x=t[4],l=t[5],f=t[6],m=t[7],O=t[8],z=t[9],P=t[10],T=t[11],e[0]=u,e[1]=h,e[2]=y,e[3]=M,e[4]=x,e[5]=l,e[6]=f,e[7]=m,e[8]=O,e[9]=z,e[10]=P,e[11]=T,e[12]=u*r+x*s+O*a+t[12],e[13]=h*r+l*s+z*a+t[13],e[14]=y*r+f*s+P*a+t[14],e[15]=M*r+m*s+T*a+t[15]),e}var sr=or;function or(e,t,n){var r=n[0],s=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var ur=lt,fr=cr;function cr(e,t,n,r){var s,a,u,h,y,M,x,l,f,m,O=t[0],z=t[1],P=t[2],T=r[0],F=r[1],S=r[2],Y=n[0],H=n[1],L=n[2];return Math.abs(O-Y)<1e-6&&Math.abs(z-H)<1e-6&&Math.abs(P-L)<1e-6?ur(e):(x=O-Y,l=z-H,f=P-L,m=1/Math.sqrt(x*x+l*l+f*f),x*=m,l*=m,f*=m,s=F*f-S*l,a=S*x-T*f,u=T*l-F*x,m=Math.sqrt(s*s+a*a+u*u),m?(m=1/m,s*=m,a*=m,u*=m):(s=0,a=0,u=0),h=l*u-f*a,y=f*s-x*u,M=x*a-l*s,m=Math.sqrt(h*h+y*y+M*M),m?(m=1/m,h*=m,y*=m,M*=m):(h=0,y=0,M=0),e[0]=s,e[1]=h,e[2]=x,e[3]=0,e[4]=a,e[5]=y,e[6]=l,e[7]=0,e[8]=u,e[9]=M,e[10]=f,e[11]=0,e[12]=-(s*O+a*z+u*P),e[13]=-(h*O+y*z+M*P),e[14]=-(x*O+l*z+f*P),e[15]=1,e)}var lr=hr;function hr(e,t,n,r,s){var a=1/Math.tan(t/2),u=1/(r-s);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+r)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*r*u,e[15]=0,e}var qe=Dt,ke=Nt,Ve=Ht,Qe=Xt,dr=Bt,De=$t,je=Vt,Ne=Jt,pr=lt,vr=rr,Je=ir,yr=sr,gr=fr,mr=lr,et=Math.PI*.5-1e-4,tt=-Math.PI*.5+1e-4,ht=function(t){t=t||{};var n=!0,r={aspectRatio:t.aspectRatio?t.aspectRatio:1,zoomAboutCursor:t.zoomAboutCursor===void 0?!0:t.zoomAboutCursor,distance:t.distance===void 0?10:t.distance,phi:t.phi===void 0?0:t.phi,theta:t.theta===void 0?0:t.theta,fovY:t.fovY===void 0?Math.PI/4:t.fovY,near:t.near===void 0?.1:t.near,far:t.far===void 0?100:t.far,panDecayTime:t.panDecayTime||100,zoomDecayTime:t.zoomDecayTime||100,rotationDecayTime:t.rotationDecayTime||100,dirty:!0,up:t.up||new Float32Array([0,1,0]),center:t.center||new Float32Array(3),rotationCenter:t.rotationCenter||t.center&&t.center.slice()||new Float32Array(3),zoom:0,panX:0,panY:0,panZ:0,pitch:0,yaw:0,dTheta:0,dPhi:0,mouseX:0,mouseY:0},s=null,a={tick:function(c){if(K.zoom&&(r.zoom=K.zoom),K.dTheta&&(r.dTheta=K.dTheta),K.dPhi&&(r.dPhi=K.dPhi),K.panX&&(r.panX=K.panX),K.panY&&(r.panY=K.panY),K.panZ&&(r.panZ=K.panZ),K.yaw&&(r.yaw=K.yaw),K.pitch&&(r.pitch=K.pitch),H(K),c){var d=r.dPhi,w=r.dTheta,R=r.zoom,b=r.panX,k=r.panY,N=r.panZ,U=r.pitch,G=r.yaw;Object.assign(r,c),c.dPhi!==void 0&&(r.dPhi+=d),c.dTheta!==void 0&&(r.dTheta+=w),c.zoom!==void 0&&(r.zoom+=R),c.panX!==void 0&&(r.panX+=b),c.panY!==void 0&&(r.panY+=k),c.panZ!==void 0&&(r.panZ+=N),c.pitch!==void 0&&(r.pitch+=U),c.yaw!==void 0&&(r.yaw+=G)}O()&&P(),Y()?E(r):H(r);var Z=Date.now();s!==null&&L(Z-s),s=Z,a.state.dirty=n,n=!1,m()},taint:F,resize:S,params:r,rotate:_,pivot:$,pan:W,zoom:D};a.state={},a.state.projection=new Float32Array(16),a.state.viewInv=new Float32Array(16),a.state.view=new Float32Array(16),a.state.width=null,a.state.height=null,a.state.eye=new Float32Array(3);var u=new Float32Array(3),h=new Float32Array(3),y=new Float32Array(3),M=new Float32Array(3),x=new Float32Array(3),l=new Float32Array(16),f={up:new Float32Array(3),center:new Float32Array(3)};m();function m(){je(f.up,r.up),je(f.center,r.center),f.near=r.near,f.far=r.far,f.distance=r.distance,f.phi=r.phi,f.theta=r.theta,f.fovY=r.fovY}function O(){return!Qe(r.up,f.up)||!Qe(r.center,f.center)||r.near!==f.near||r.far!==f.far||r.phi!==f.phi||r.theta!==f.theta||r.distance!==f.distance||r.fovY!==f.fovY}var z={};function P(){z.dPhi=r.phi-f.phi,z.dTheta=r.theta-f.theta,z.zoom=r.distance/f.distance-1,r.theta=f.theta,r.distance=f.distance,r.phi=f.phi,z.yaw=0,z.pitch=0,z.panX=0,z.panY=0,z.panZ=0,z.mouseX=0,z.mouseY=0,E(z)}function T(){a.state.eye[0]=0,a.state.eye[1]=0,a.state.eye[2]=r.distance,Ve(a.state.eye,a.state.eye,x,-r.phi),ke(a.state.eye,a.state.eye,x,r.theta),dr(a.state.eye,a.state.eye,r.center),gr(a.state.view,a.state.eye,r.center,r.up),mr(a.state.projection,r.fovY,a.params.aspectRatio,r.near,r.far),vr(a.state.viewInv,a.state.view)}function F(){n=!0}function S(c){a.params.aspectRatio=c,T(),F()}function Y(){if(Math.abs(r.zoom)>1e-4||Math.abs(r.panX)>1e-4||Math.abs(r.panY)>1e-4||Math.abs(r.panZ)>1e-4||Math.abs(r.dTheta)>1e-4||Math.abs(r.dPhi)>1e-4||Math.abs(r.yaw)>1e-4||Math.abs(r.pitch)>1e-4)return!0}function H(c){c.zoom=0,c.dTheta=0,c.dPhi=0,c.panX=0,c.panY=0,c.panZ=0,c.yaw=0,c.pitch=0}function L(c){var d=r.panDecayTime?Math.exp(-c/r.panDecayTime/Math.LN2):0,w=r.zoomDecayTime?Math.exp(-c/r.zoomDecayTime/Math.LN2):0,R=r.rotationDecayTime?Math.exp(-c/r.rotationDecayTime/Math.LN2):0;r.zoom*=w,r.panX*=d,r.panY*=d,r.panZ*=d,r.dTheta*=R,r.dPhi*=R,r.yaw*=R,r.pitch*=R}var K={};H(K);function W(c,d){var w=a.params.distance*Math.tan(a.params.fovY*.5)*2;return K.panX+=c*r.aspectRatio*w,K.panY+=d*w,a}function D(c,d,w){return K.zoom+=w,r.mouseX=c,r.mouseY=d,a}function $(c,d){var w=a.params.fovY;K.yaw+=c*w*r.aspectRatio,K.pitch+=d*w}function _(c,d){K.dTheta+=c,K.dPhi+=d}function E(c){var d;pr(l),r.zoomAboutCursor&&(d=r.distance*Math.tan(r.fovY*.5),u[0]=c.mouseX*r.aspectRatio*d,u[1]=c.mouseY*d,u[2]=0,Je(l,l,u)),u[0]=1+c.zoom,u[1]=1+c.zoom,u[2]=1,yr(l,l,u),r.zoomAboutCursor&&(d=r.distance*Math.tan(r.fovY*.5),u[0]=-c.mouseX*r.aspectRatio*d,u[1]=-c.mouseY*d,u[2]=0,Je(l,l,u)),l[12]-=c.panX*.5,l[13]-=c.panY*.5,qe(r.center,r.center,a.state.view),qe(r.center,r.center,l),qe(r.center,r.center,a.state.viewInv),r.rotateAboutCenter&&je(r.rotationCenter,r.center),r.distance*=1+c.zoom;var w=r.phi;r.phi+=c.dPhi,r.phi=Math.min(et,Math.max(tt,r.phi));var R=r.phi-w,b=r.theta;r.theta+=c.dTheta;var k=r.theta-b;if(ke(r.center,r.center,r.rotationCenter,k-r.theta),Ve(r.center,r.center,r.rotationCenter,-R),ke(r.center,r.center,r.rotationCenter,r.theta),c.yaw!==0||c.pitch!==0){y[0]=a.state.view[0],y[1]=a.state.view[4],y[2]=a.state.view[8],Ne(y,y),h[0]=a.state.view[1],h[1]=a.state.view[5],h[2]=a.state.view[9],Ne(h,h),M[0]=a.state.view[2],M[1]=a.state.view[6],M[2]=a.state.view[10],Ne(M,M);var N=Math.min(et,Math.max(tt,r.phi+c.pitch*.5)),U=N-r.phi;De(r.center,r.center,y,-Math.sin(c.yaw*.5)*r.distance),De(r.center,r.center,h,-Math.sin(U)*r.distance),De(r.center,r.center,M,(2-Math.cos(c.yaw*.5)-Math.cos(U))*r.distance),r.phi=N,r.theta+=c.yaw*.5}T(),F()}return S(a.params.aspectRatio),a},Ue={},Cr={get exports(){return Ue},set exports(e){Ue=e}},Te={},_r={get exports(){return Te},set exports(e){Te=e}},rt;function Ar(){return rt||(rt=1,function(e,t){(function(n,r){e.exports=r()})(Ae,function(){var n={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},r=Array.prototype.slice;function s(l){var f=l.length;return f?f===1?[l[0]]:f===2?[l[0],l[1]]:f===3?[l[0],l[1],l[2]]:r.call(l,0):[]}function a(l){var f={};for(var m in l)n[m]||(f[m]=l[m]);return f}function u(l){return typeof l=="function"&&l.isMemoized}function h(l,f){return l===f||l!==l&&f!==f}function y(l,f){var m={};for(var O in l)m[O]=l[O];for(var O in f)m[O]=f[O];return m}var M=function(){function l(f){this.keys=[],this.values=[],this.options=f;var m=typeof f.isMatchingKey=="function";m?this.getKeyIndex=this._getKeyIndexFromMatchingKey:f.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey=typeof f.transformKey=="function",this.shouldCloneArguments=this.canTransformKey||m,this.shouldUpdateOnAdd=typeof f.onCacheAdd=="function",this.shouldUpdateOnChange=typeof f.onCacheChange=="function",this.shouldUpdateOnHit=typeof f.onCacheHit=="function"}return Object.defineProperty(l.prototype,"size",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"snapshot",{get:function(){return{keys:s(this.keys),size:this.size,values:s(this.values)}},enumerable:!1,configurable:!0}),l.prototype._getKeyIndexFromMatchingKey=function(f){var m=this.options,O=m.isMatchingKey,z=m.maxSize,P=this.keys,T=P.length;if(!T)return-1;if(O(P[0],f))return 0;if(z>1){for(var F=1;F<T;F++)if(O(P[F],f))return F}return-1},l.prototype._getKeyIndexForMany=function(f){var m=this.options.isEqual,O=this.keys,z=O.length;if(!z)return-1;if(z===1)return this._getKeyIndexForSingle(f);var P=f.length,T,F;if(P>1){for(var S=0;S<z;S++)if(T=O[S],T.length===P){for(F=0;F<P&&m(T[F],f[F]);F++);if(F===P)return S}}else for(var S=0;S<z;S++)if(T=O[S],T.length===P&&m(T[0],f[0]))return S;return-1},l.prototype._getKeyIndexForSingle=function(f){var m=this.keys;if(!m.length)return-1;var O=m[0],z=O.length;if(f.length!==z)return-1;var P=this.options.isEqual;if(z>1){for(var T=0;T<z;T++)if(!P(O[T],f[T]))return-1;return 0}return P(O[0],f[0])?0:-1},l.prototype.orderByLru=function(f,m,O){for(var z=this.keys,P=this.values,T=z.length,F=O;F--;)z[F+1]=z[F],P[F+1]=P[F];z[0]=f,P[0]=m;var S=this.options.maxSize;T===S&&O===T?(z.pop(),P.pop()):O>=S&&(z.length=P.length=S)},l.prototype.updateAsyncCache=function(f){var m=this,O=this.options,z=O.onCacheChange,P=O.onCacheHit,T=this.keys[0],F=this.values[0];this.values[0]=F.then(function(S){return m.shouldUpdateOnHit&&P(m,m.options,f),m.shouldUpdateOnChange&&z(m,m.options,f),S},function(S){var Y=m.getKeyIndex(T);throw Y!==-1&&(m.keys.splice(Y,1),m.values.splice(Y,1)),S})},l}();function x(l,f){if(f===void 0&&(f={}),u(l))return x(l.fn,y(l.options,f));if(typeof l!="function")throw new TypeError("You must pass a function to `memoize`.");var m=f.isEqual,O=m===void 0?h:m,z=f.isMatchingKey,P=f.isPromise,T=P===void 0?!1:P,F=f.maxSize,S=F===void 0?1:F,Y=f.onCacheAdd,H=f.onCacheChange,L=f.onCacheHit,K=f.transformKey,W=y({isEqual:O,isMatchingKey:z,isPromise:T,maxSize:S,onCacheAdd:Y,onCacheChange:H,onCacheHit:L,transformKey:K},a(f)),D=new M(W),$=D.keys,_=D.values,E=D.canTransformKey,c=D.shouldCloneArguments,d=D.shouldUpdateOnAdd,w=D.shouldUpdateOnChange,R=D.shouldUpdateOnHit,b=function(){var k=c?s(arguments):arguments;E&&(k=K(k));var N=$.length?D.getKeyIndex(k):-1;if(N!==-1)R&&L(D,W,b),N&&(D.orderByLru($[N],_[N],N),w&&H(D,W,b));else{var U=l.apply(this,arguments),G=c?k:s(arguments);D.orderByLru(G,U,$.length),T&&D.updateAsyncCache(b),d&&Y(D,W,b),w&&H(D,W,b)}return _[0]};return b.cache=D,b.fn=l,b.isMemoized=!0,b.options=W,b}return x})}(_r)),Te}var me={},wr={get exports(){return me},set exports(e){me=e}},nt;function Mr(){return nt||(nt=1,function(e,t){(function(n,r){r(t)})(Ae,function(n){var r=typeof WeakMap=="function",s=Object.keys;function a(_,E){return _===E||_!==_&&E!==E}function u(_){return _.constructor===Object||_.constructor==null}function h(_){return!!_&&typeof _.then=="function"}function y(_){return!!(_&&_.$$typeof)}function M(){var _=[];return{delete:function(E){for(var c=0;c<_.length;++c)if(_[c][0]===E){_.splice(c,1);return}},get:function(E){for(var c=0;c<_.length;++c)if(_[c][0]===E)return _[c][1]},set:function(E,c){for(var d=0;d<_.length;++d)if(_[d][0]===E){_[d][1]=c;return}_.push([E,c])}}}var x=function(_){return _?function(){return new WeakMap}:M}(r);function l(_){return function(c){var d=_||c;return function(R,b,k,N,U,G,Z){Z===void 0&&(Z=x());var ie=!!R&&typeof R=="object",we=!!b&&typeof b=="object";if(ie!==we)return!1;if(!ie&&!we)return d(R,b,Z);var Me=Z.get(R);if(Me&&Z.get(b))return Me===b;Z.set(R,b),Z.set(b,R);var Ie=d(R,b,Z);return Z.delete(R),Z.delete(b),Ie}}}function f(_,E,c,d){var w=_.length;if(E.length!==w)return!1;for(;w-- >0;)if(!c(_[w],E[w],w,w,_,E,d))return!1;return!0}function m(_,E,c,d){var w=_.size===E.size;if(w&&_.size){var R={},b=0;_.forEach(function(k,N){if(w){var U=!1,G=0;E.forEach(function(Z,ie){!U&&!R[G]&&(U=c(N,ie,b,G,_,E,d)&&c(k,Z,N,ie,_,E,d),U&&(R[G]=!0)),G++}),b++,w=U}})}return w}var O="_owner",z=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function P(_,E,c,d){var w=s(_),R=w.length;if(s(E).length!==R)return!1;if(R)for(var b=void 0;R-- >0;){if(b=w[R],b===O){var k=y(_),N=y(E);if((k||N)&&k!==N)return!1}if(!z(E,b)||!c(_[b],E[b],b,b,_,E,d))return!1}return!0}var T=function(){return/foo/g.flags==="g"?function(E,c){return E.source===c.source&&E.flags===c.flags}:function(E,c){return E.source===c.source&&E.global===c.global&&E.ignoreCase===c.ignoreCase&&E.multiline===c.multiline&&E.unicode===c.unicode&&E.sticky===c.sticky&&E.lastIndex===c.lastIndex}}();function F(_,E,c,d){var w=_.size===E.size;if(w&&_.size){var R={};_.forEach(function(b,k){if(w){var N=!1,U=0;E.forEach(function(G,Z){!N&&!R[U]&&(N=c(b,G,k,Z,_,E,d),N&&(R[U]=!0)),U++}),w=N}})}return w}var S=typeof Map=="function",Y=typeof Set=="function",H=Object.prototype.valueOf;function L(_){var E=typeof _=="function"?_(c):function(d,w,R,b,k,N,U){return c(d,w,U)};function c(d,w,R){if(d===w)return!0;if(d&&w&&typeof d=="object"&&typeof w=="object"){if(u(d)&&u(w))return P(d,w,E,R);var b=Array.isArray(d),k=Array.isArray(w);return b||k?b===k&&f(d,w,E,R):(b=d instanceof Date,k=w instanceof Date,b||k?b===k&&a(d.getTime(),w.getTime()):(b=d instanceof RegExp,k=w instanceof RegExp,b||k?b===k&&T(d,w):h(d)||h(w)?d===w:S&&(b=d instanceof Map,k=w instanceof Map,b||k)?b===k&&m(d,w,E,R):Y&&(b=d instanceof Set,k=w instanceof Set,b||k)?b===k&&F(d,w,E,R):d.valueOf!==H||w.valueOf!==H?a(d.valueOf(),w.valueOf()):P(d,w,E,R)))}return d!==d&&w!==w}return c}var K=L(),W=L(function(){return a}),D=L(l()),$=L(l(a));n.circularDeepEqual=D,n.circularShallowEqual=$,n.createCustomEqual=L,n.deepEqual=K,n.sameValueZeroEqual=a,n.shallowEqual=W,Object.defineProperty(n,"__esModule",{value:!0})})}(wr,me)),me}(function(e,t){(function(n,r){e.exports=r(Ar(),Mr())})(Ae,function(n,r){function s(){return s=Object.assign?Object.assign.bind():function(i){for(var o=1;o<arguments.length;o++){var g=arguments[o];for(var p in g)Object.prototype.hasOwnProperty.call(g,p)&&(i[p]=g[p])}return i},s.apply(this,arguments)}function a(i,o){if(i==null)return{};var g={},p=Object.keys(i),C,v;for(v=0;v<p.length;v++)C=p[v],!(o.indexOf(C)>=0)&&(g[C]=i[C]);return g}var u={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function h(){for(var i=arguments.length,o=new Array(i),g=0;g<i;g++)o[g]=arguments[g];return o.reduce(function(p,C){if(typeof p=="function")return typeof C=="function"?function(){p.apply(this,arguments),C.apply(this,arguments)}:p;if(typeof C=="function")return C})}function y(){for(var i=arguments.length,o=new Array(i),g=0;g<i;g++)o[g]=arguments[g];return o.reduce(function(p,C){if(typeof p=="function")return typeof C=="function"?function(){return p(C.apply(this,arguments))}:p;if(typeof C=="function")return C})}function M(i,o){for(var g=0;g<i.length;g++)if(i[g].key===o)return g;return-1}function x(i,o){var g=typeof o=="function"?o:function(p,C){for(var v=0;v<C.length;v++)if(!i(p[v],C[v]))return!1;return!0};return function(p,C){for(var v=0;v<p.length;v++)if(p[v].length===C.length&&g(p[v],C))return v;return-1}}function l(i,o){return!o||o===u?i:s({},i,o,{onCacheAdd:h(i.onCacheAdd,o.onCacheAdd),onCacheChange:h(i.onCacheChange,o.onCacheChange),onCacheHit:h(i.onCacheHit,o.onCacheHit),transformArgs:y(i.transformArgs,o.transformArgs)})}function f(i){return typeof i=="function"&&i.isMoized}function m(i,o,g){try{var p=g||o||"anonymous";Object.defineProperty(i,"name",{configurable:!0,enumerable:!1,value:"moized("+p+")",writable:!0})}catch{}}function O(i,o,g){var p=M(i,o);p!==-1&&(clearTimeout(i[p].timeoutId),g&&i.splice(p,1))}function z(i,o){var g=setTimeout(i,o);return typeof g.unref=="function"&&g.unref(),g}function P(i,o,g,p){var C=o.maxAge;return function v(A,q,X){var j=A.keys[0];if(M(i,j)===-1){var B=function(){var Q=x(g,p),ee=Q(A.keys,j),fe=A.values[ee];~ee&&(A.keys.splice(ee,1),A.values.splice(ee,1),typeof o.onCacheChange=="function"&&o.onCacheChange(A,q,X)),O(i,j,!0),typeof o.onExpire=="function"&&o.onExpire(j)===!1&&(A.keys.unshift(j),A.values.unshift(fe),v(A,q,X),typeof o.onCacheChange=="function"&&o.onCacheChange(A,q,X))};i.push({expirationMethod:B,key:j,timeoutId:z(B,C)})}}}function T(i,o){return function(p){var C=p.keys[0],v=M(i,C);~v&&(O(i,C,!1),i[v].timeoutId=z(i[v].expirationMethod,o.maxAge))}}function F(i,o,g,p){var C=typeof o.maxAge=="number"&&isFinite(o.maxAge)?P(i,o,g,p):void 0;return{onCacheAdd:C,onCacheHit:C&&o.updateExpire?T(i,o):void 0}}var S={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},Y=!1;function H(i){i?delete S.profiles[i]:S.profiles={}}function L(i){i===void 0&&(i=!0),S.isCollectingStats=i}function K(i){var o=i.profileName;return function(){o&&!S.profiles[o]&&(S.profiles[o]={calls:0,hits:0}),S.profiles[o].calls++}}function W(i){return function(){var o=S.profiles,g=i.profileName;o[g]||(o[g]={calls:0,hits:0}),o[g].calls++,o[g].hits++}}function D(i){return i.displayName||i.name||"Anonymous "+S.anonymousProfileNameCounter++}function $(i,o){return i?(o/i*100).toFixed(4)+"%":"0.0000%"}function _(i){!S.isCollectingStats&&!Y&&(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),Y=!0);var o=S.profiles;if(i){if(!o[i])return{calls:0,hits:0,usage:"0.0000%"};var g=o[i];return s({},g,{usage:$(g.calls,g.hits)})}var p=Object.keys(S.profiles).reduce(function(C,v){return C.calls+=o[v].calls,C.hits+=o[v].hits,C},{calls:0,hits:0});return s({},p,{profiles:Object.keys(o).reduce(function(C,v){return C[v]=_(v),C},{}),usage:$(p.calls,p.hits)})}function E(i){return S.isCollectingStats?{onCacheAdd:K(i),onCacheHit:W(i)}:{}}var c={arguments:!0,callee:!0,caller:!0,constructor:!0,length:!0,name:!0,prototype:!0};function d(i,o,g){g===void 0&&(g=[]),Object.getOwnPropertyNames(i).forEach(function(p){if(!c[p]&&g.indexOf(p)===-1){var C=Object.getOwnPropertyDescriptor(i,p);C.get||C.set?Object.defineProperty(o,p,C):o[p]=i[p]}})}function w(i,o){var g=o.expirations,p=i.options,C=x(p.isEqual,p.isMatchingKey),v=i;v.clear=function(){var A=v._microMemoizeOptions.onCacheChange,q=v.cache;return q.keys.length=0,q.values.length=0,A&&A(q,v.options,v),!0},v.clearStats=function(){H(v.options.profileName)},v.get=function(A){var q=v._microMemoizeOptions.transformKey,X=v.cache,j=q?q(A):A,B=C(X.keys,j);return B!==-1?v.apply(this,A):void 0},v.getStats=function(){return _(v.options.profileName)},v.has=function(A){var q=v._microMemoizeOptions.transformKey,X=q?q(A):A;return C(v.cache.keys,X)!==-1},v.keys=function(){return v.cacheSnapshot.keys},v.remove=function(A){var q=v._microMemoizeOptions,X=q.onCacheChange,j=q.transformKey,B=v.cache,V=C(B.keys,j?j(A):A);if(V===-1)return!1;var Q=B.keys[V];return B.keys.splice(V,1),B.values.splice(V,1),X&&X(B,v.options,v),O(g,Q,!0),!0},v.set=function(A,q){var X=v._microMemoizeOptions,j=v.cache,B=v.options,V=X.onCacheAdd,Q=X.onCacheChange,ee=X.transformKey,fe=ee?ee(A):A,re=C(j.keys,fe);if(re===-1){var ce=B.maxSize-1;j.size>ce&&(j.keys.length=ce,j.values.length=ce),j.keys.unshift(fe),j.values.unshift(q),B.isPromise&&j.updateAsyncCache(v),V&&V(j,B,v),Q&&Q(j,B,v)}else{var Ee=j.keys[re];j.values[re]=q,re>0&&j.orderByLru(Ee,q,re),B.isPromise&&j.updateAsyncCache(v),typeof Q=="function"&&Q(j,B,v)}},v.values=function(){return v.cacheSnapshot.values}}function R(i,o){var g=o.expirations,p=o.options,C=o.originalFunction,v=i.options;Object.defineProperties(i,{_microMemoizeOptions:{configurable:!0,get:function(){return v}},cacheSnapshot:{configurable:!0,get:function(){var X=i.cache;return{keys:X.keys.slice(0),size:X.size,values:X.values.slice(0)}}},expirations:{configurable:!0,get:function(){return g}},expirationsSnapshot:{configurable:!0,get:function(){return g.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return p}},originalFunction:{configurable:!0,get:function(){return C}}});var A=i;d(C,A)}function b(i,o){return w(i,o),R(i,o),i}var k=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function N(i,o,g){var p=i(s({maxArgs:2,isShallowEqual:!0},g,{isReact:!1}));o.displayName||(o.displayName=o.name||"Component");function C(v,A,q){this.props=v,this.context=A,this.updater=q,this.MoizedComponent=p(o)}return C.prototype.isReactComponent={},C.prototype.render=function(){return{$$typeof:k,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},d(o,C,["contextType","contextTypes"]),C.displayName="Moized("+(o.displayName||o.name||"Component")+")",m(C,o.name,g.profileName),C}function U(i){return function(o){if(i>=o.length)return o;if(i===0)return[];if(i===1)return[o[0]];if(i===2)return[o[0],o[1]];if(i===3)return[o[0],o[1],o[2]];for(var g=[],p=0;p<i;p++)g[p]=o[p];return g}}function G(i,o){for(var g=i.length,p=0;p<g;++p)if(i[p]===o)return p+1;return 0}function Z(){var i=[],o=[];return function(p,C){var v=typeof C;if(v==="function"||v==="symbol")return C.toString();if(typeof C=="object"){if(i.length){var A=G(i,this);A===0?i[i.length]=this:(i.splice(A),o.splice(A)),o[o.length]=p;var q=G(i,C);if(q!==0)return"[ref="+(o.slice(0,q).join(".")||".")+"]"}else i[0]=C,o[0]=p;return C}return""+C}}function ie(i){var o=typeof i;return i&&(o==="object"||o==="function")?JSON.stringify(i,Z()):i}function we(i){for(var o="|",g=0;g<i.length;g++)o+=ie(i[g])+"|";return[o]}function Me(i){return typeof i.serializer=="function"?i.serializer:we}function Ie(i,o){return i[0]===o[0]}function Fe(i){if(typeof i=="function")return function(o,g,p){return i(p.cache,p.options,p)}}function gt(i){return i.matchesArg||i.isDeepEqual&&r.deepEqual||i.isShallowEqual&&r.shallowEqual||r.sameValueZeroEqual}function mt(i){return i.matchesKey||i.isSerialized&&Ie||void 0}function Ct(i){return y(i.isSerialized&&Me(i),typeof i.transformArgs=="function"&&i.transformArgs,typeof i.maxArgs=="number"&&U(i.maxArgs))}function _t(i){var o=i.options.updateCacheForKey,g=function(){for(var C=arguments.length,v=new Array(C),A=0;A<C;A++)v[A]=arguments[A];if(!o(v))return i.apply(this,v);var q=i.fn.apply(this,v);return i.set(v,q),q};return d(i,g),g}var At=["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"],I=function i(o,g){var p=g||u;if(f(o)){var C=o.originalFunction,v=l(o.options,p);return i(C,v)}if(typeof o=="object")return function(Re,bt){if(typeof Re=="function"){var xt=l(o,bt);return i(Re,xt)}var Ot=l(o,Re);return i(Ot)};if(p.isReact)return N(i,o,p);var A=s({},u,p,{maxAge:typeof p.maxAge=="number"&&p.maxAge>=0?p.maxAge:u.maxAge,maxArgs:typeof p.maxArgs=="number"&&p.maxArgs>=0?p.maxArgs:u.maxArgs,maxSize:typeof p.maxSize=="number"&&p.maxSize>=0?p.maxSize:u.maxSize,profileName:p.profileName||D(o)}),q=[];A.matchesArg,A.isDeepEqual;var X=A.isPromise;A.isReact,A.isSerialized,A.isShallowEqual,A.matchesKey,A.maxAge,A.maxArgs;var j=A.maxSize,B=A.onCacheAdd,V=A.onCacheChange,Q=A.onCacheHit;A.onExpire,A.profileName,A.serializer;var ee=A.updateCacheForKey;A.transformArgs,A.updateExpire;var fe=a(A,At),re=gt(A),ce=mt(A),Ee=F(q,A,re,ce),$e=E(A),Mt=Ct(A),Et=s({},fe,{isEqual:re,isMatchingKey:ce,isPromise:X,maxSize:j,onCacheAdd:Fe(h(B,Ee.onCacheAdd,$e.onCacheAdd)),onCacheChange:Fe(V),onCacheHit:Fe(h(Q,Ee.onCacheHit,$e.onCacheHit)),transformKey:Mt}),zt=n(o,Et),ze=b(zt,{expirations:q,options:A,originalFunction:o});return ee&&(ze=_t(ze)),m(ze,o.name,p.profileName),ze};I.clearStats=H,I.collectStats=L,I.compose=function(){return y.apply(void 0,arguments)||I},I.deep=I({isDeepEqual:!0}),I.getStats=_,I.infinite=I({maxSize:1/0}),I.isCollectingStats=function(){return S.isCollectingStats},I.isMoized=function(o){return typeof o=="function"&&!!o.isMoized},I.matchesArg=function(i){return I({matchesArg:i})},I.matchesKey=function(i){return I({matchesKey:i})};function wt(i,o){if(o===!0)return I({maxAge:i,updateExpire:o});if(typeof o=="object"){var g=o.onExpire,p=o.updateExpire;return I({maxAge:i,onExpire:g,updateExpire:p})}return I(typeof o=="function"?{maxAge:i,onExpire:o,updateExpire:!0}:{maxAge:i})}return I.maxAge=wt,I.maxArgs=function(i){return I({maxArgs:i})},I.maxSize=function(i){return I({maxSize:i})},I.profile=function(i){return I({profileName:i})},I.promise=I({isPromise:!0,updateExpire:!0}),I.react=I({isReact:!0}),I.serialize=I({isSerialized:!0}),I.serializeWith=function(i){return I({isSerialized:!0,serializer:i})},I.shallow=I({isShallowEqual:!0}),I.transformArgs=function(i){return I({transformArgs:i})},I.updateCacheForKey=function(i){return I({updateCacheForKey:i})},Object.defineProperty(I,"default",{configurable:!1,enumerable:!1,value:I,writable:!1}),I})})(Cr);var dt=Ue,ue=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return this.None(e)},Out:function(e){return this.None(e)},InOut:function(e){return this.None(e)}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var t=1.70158;return e===1?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return e===0?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-ue.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?ue.Bounce.In(e*2)*.5:ue.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(t*2,e)/2:(1-Math.pow(2-t*2,e))/2+.5}}}}),ye;typeof self>"u"&&typeof process<"u"&&process.hrtime?ye=function(){var e=process.hrtime();return e[0]*1e3+e[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?ye=self.performance.now.bind(self.performance):Date.now!==void 0?ye=Date.now:ye=function(){return new Date().getTime()};var ge=ye,Er=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var t=this;return Object.keys(this._tweens).map(function(n){return t._tweens[n]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},e.prototype.remove=function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},e.prototype.update=function(t,n){t===void 0&&(t=ge()),n===void 0&&(n=!1);var r=Object.keys(this._tweens);if(r.length===0)return!1;for(;r.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<r.length;s++){var a=this._tweens[r[s]],u=!n;a&&a.update(t,u)===!1&&!n&&delete this._tweens[r[s]]}r=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),he={Linear:function(e,t){var n=e.length-1,r=n*t,s=Math.floor(r),a=he.Utils.Linear;return t<0?a(e[0],e[1],r):t>1?a(e[n],e[n-1],n-r):a(e[s],e[s+1>n?n:s+1],r-s)},Bezier:function(e,t){for(var n=0,r=e.length-1,s=Math.pow,a=he.Utils.Bernstein,u=0;u<=r;u++)n+=s(1-t,r-u)*s(t,u)*e[u]*a(r,u);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,s=Math.floor(r),a=he.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(s=Math.floor(r=n*(1+t))),a(e[(s-1+n)%n],e[s],e[(s+1)%n],e[(s+2)%n],r-s)):t<0?e[0]-(a(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(a(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):a(e[s?s-1:0],e[s],e[n<s+1?n:s+1],e[n<s+2?n:s+2],r-s)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=he.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n=1;if(e[t])return e[t];for(var r=t;r>1;r--)n*=r;return e[t]=n,n}}(),CatmullRom:function(e,t,n,r,s){var a=(n-e)*.5,u=(r-t)*.5,h=s*s,y=s*h;return(2*t-2*n+a+u)*y+(-3*t+3*n-2*a-u)*h+a*s+t}}},zr=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),Xe=new Er,pt=function(){function e(t,n){n===void 0&&(n=Xe),this._object=t,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ue.Linear.None,this._interpolationFunction=he.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=zr.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.to=function(t,n){return this._valuesEnd=Object.create(t),n!==void 0&&(this._duration=n),this},e.prototype.duration=function(t){return t===void 0&&(t=1e3),this._duration=t,this},e.prototype.start=function(t,n){if(t===void 0&&(t=ge()),n===void 0&&(n=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var r in this._valuesStartRepeat)this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=t,this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,n),this},e.prototype.startFromCurrentValues=function(t){return this.start(t,!0)},e.prototype._setupProperties=function(t,n,r,s,a){for(var u in r){var h=t[u],y=Array.isArray(h),M=y?"array":typeof h,x=!y&&Array.isArray(r[u]);if(!(M==="undefined"||M==="function")){if(x){var l=r[u];if(l.length===0)continue;l=l.map(this._handleRelativeValue.bind(this,h)),n[u]===void 0&&(r[u]=[h].concat(l))}if((M==="object"||y)&&h&&!x){n[u]=y?[]:{};for(var f in h)n[u][f]=h[f];s[u]=y?[]:{},this._setupProperties(h,n[u],r[u],s[u],a)}else(typeof n[u]>"u"||a)&&(n[u]=h),y||(n[u]*=1),x?s[u]=r[u].slice().reverse():s[u]=n[u]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(t){return t===void 0&&(t=ge()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=t,this._group&&this._group.remove(this),this)},e.prototype.resume=function(t){return t===void 0&&(t=ge()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=t-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},e.prototype.stopChainedTweens=function(){for(var t=0,n=this._chainedTweens.length;t<n;t++)this._chainedTweens[t].stop();return this},e.prototype.group=function(t){return t===void 0&&(t=Xe),this._group=t,this},e.prototype.delay=function(t){return t===void 0&&(t=0),this._delayTime=t,this},e.prototype.repeat=function(t){return t===void 0&&(t=0),this._initialRepeat=t,this._repeat=t,this},e.prototype.repeatDelay=function(t){return this._repeatDelayTime=t,this},e.prototype.yoyo=function(t){return t===void 0&&(t=!1),this._yoyo=t,this},e.prototype.easing=function(t){return t===void 0&&(t=ue.Linear.None),this._easingFunction=t,this},e.prototype.interpolation=function(t){return t===void 0&&(t=he.Linear),this._interpolationFunction=t,this},e.prototype.chain=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this._chainedTweens=t,this},e.prototype.onStart=function(t){return this._onStartCallback=t,this},e.prototype.onEveryStart=function(t){return this._onEveryStartCallback=t,this},e.prototype.onUpdate=function(t){return this._onUpdateCallback=t,this},e.prototype.onRepeat=function(t){return this._onRepeatCallback=t,this},e.prototype.onComplete=function(t){return this._onCompleteCallback=t,this},e.prototype.onStop=function(t){return this._onStopCallback=t,this},e.prototype.update=function(t,n){if(t===void 0&&(t=ge()),n===void 0&&(n=!0),this._isPaused)return!0;var r,s,a=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(t>a)return!1;n&&this.start(t,!0)}if(this._goToEnd=!1,t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0),s=(t-this._startTime)/this._duration,s=this._duration===0||s>1?1:s;var u=this._easingFunction(s);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,u),this._onUpdateCallback&&this._onUpdateCallback(this._object,s),s===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(r in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[r]=="string"&&(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var h=0,y=this._chainedTweens.length;h<y;h++)this._chainedTweens[h].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(t,n,r,s){for(var a in r)if(n[a]!==void 0){var u=n[a]||0,h=r[a],y=Array.isArray(t[a]),M=Array.isArray(h),x=!y&&M;x?t[a]=this._interpolationFunction(h,s):typeof h=="object"&&h?this._updateProperties(t[a],u,h,s):(h=this._handleRelativeValue(u,h),typeof h=="number"&&(t[a]=u+(h-u)*s))}},e.prototype._handleRelativeValue=function(t,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?t+parseFloat(n):parseFloat(n)},e.prototype._swapEndStartRepeatValues=function(t){var n=this._valuesStartRepeat[t],r=this._valuesEnd[t];typeof r=="string"?this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(r):this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=n},e}(),J=Xe;J.getAll.bind(J);J.removeAll.bind(J);J.add.bind(J);J.remove.bind(J);var br=J.update.bind(J),Ce={},xr={get exports(){return Ce},set exports(e){Ce=e}},Ze={},xe={get exports(){return Ze},set exports(e){Ze=e}};(function(){var e,t,n,r,s,a;typeof performance<"u"&&performance!==null&&performance.now?xe.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(xe.exports=function(){return(e()-s)/1e6},t=process.hrtime,e=function(){var u;return u=t(),u[0]*1e9+u[1]},r=e(),a=process.uptime()*1e9,s=r-a):Date.now?(xe.exports=function(){return Date.now()-n},n=Date.now()):(xe.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(Ae);var Or=Ze,te=typeof window>"u"?Ae:window,Oe=["moz","webkit"],de="AnimationFrame",pe=te["request"+de],_e=te["cancel"+de]||te["cancelRequest"+de];for(var ve=0;!pe&&ve<Oe.length;ve++)pe=te[Oe[ve]+"Request"+de],_e=te[Oe[ve]+"Cancel"+de]||te[Oe[ve]+"CancelRequest"+de];if(!pe||!_e){var Ye=0,it=0,ae=[],Pr=1e3/60;pe=function(e){if(ae.length===0){var t=Or(),n=Math.max(0,Pr-(t-Ye));Ye=n+t,setTimeout(function(){var r=ae.slice(0);ae.length=0;for(var s=0;s<r.length;s++)if(!r[s].cancelled)try{r[s].callback(Ye)}catch(a){setTimeout(function(){throw a},0)}},Math.round(n))}return ae.push({handle:++it,callback:e,cancelled:!1}),it},_e=function(e){for(var t=0;t<ae.length;t++)ae[t].handle===e&&(ae[t].cancelled=!0)}}xr.exports=function(e){return pe.call(te,e)};Ce.cancel=function(){_e.apply(te,arguments)};Ce.polyfill=function(e){e||(e=te),e.requestAnimationFrame=pe,e.cancelAnimationFrame=_e};const vt=dt.infinite(()=>ht({panDecayTime:200,zoomDecayTime:200,rotationDecayTime:500,distance:2e3})),at=dt.infinite(e=>ht({phi:Math.PI/4,theta:Math.PI/4,distance:200,center:[0,0,0],fovY:.013888888888888888*(Math.PI/2),near:2,far:400})),ne=vt(),Sr=(e,t,n)=>{const r=vt(),s={near:r.params.distance*.1,far:r.params.distance*5e4};r.resize(t/n),r.tick({fovY:Math.PI/3,...s});const a=at("zoomed");a.params.distance=r.params.distance,a.resize(t/n),a.tick(s);const u=at("fixed");u.resize(t/n),u.tick({near:u.params.distance*.1,far:u.params.distance*1e4});const h=new Float32Array(r.state.projection),y=new Float32Array(r.state.view),M=new Float32Array(a.state.projection),x=new Float32Array(a.state.view),l=new Float32Array(u.state.projection),f=new Float32Array(u.state.view);e(se(h,[h.buffer]),se(y,[y.buffer]),se(M,[M.buffer]),se(x,[x.buffer]),se(l,[l.buffer]),se(f,[f.buffer]))};let Pe,Se;const Tr=(e,t=3e3)=>{Pe?.stop(),Pe=new pt(ne.params.center).to(e,t).easing(ue.Cubic.InOut),Pe.start(),ne.params.rotationCenter=e},Ir=(e,t=5e3)=>{Se?.stop(),Se=new pt(ne.params).to({distance:e},t).easing(ue.Cubic.InOut),Se.start()},yt=()=>{Ce(yt),br()};yt();const Fr=()=>{Pe?.stop()},Rr=()=>{},Kr=()=>{Se?.stop()},qr=()=>{},kr=(e,t,n)=>{(ne.params.distance>25||n>0)&&ne.zoom(e,t,n)},Dr=(...e)=>{ne.pan(...e)},jr=()=>ne.params;Be({startPanning:Fr,stopPanning:Rr,startZooming:Kr,stopZooming:qr,globalCamera:ne,getGlobalCameraParams:jr,updateCameras:Sr,setCameraCenter:Tr,setCameraDistance:Ir,zoomGlobalCamera:kr,panGlobalCamera:Dr});
