function _mergeNamespaces(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(o){if(o!=="default"&&!(o in t)){var d=Object.getOwnPropertyDescriptor(n,o);Object.defineProperty(t,o,d.get?d:{enumerable:!0,get:function(){return n[o]}})}})}),Object.freeze(t)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...e){const n=e.reduce((o,d)=>Object.assign(o,d),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,n){super(e||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code.length;i$1<len;++i$1)lookup$1[i$1]=code[i$1],revLookup[code.charCodeAt(i$1)]=i$1;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var o=n===e?0:4-n%4;return[n,o]}function byteLength(t){var e=getLens(t),n=e[0],o=e[1];return(n+o)*3/4-o}function _byteLength(t,e,n){return(e+n)*3/4-n}function toByteArray(t){var e,n=getLens(t),o=n[0],d=n[1],h=new Arr(_byteLength(t,o,d)),l=0,u=d>0?o-4:o,p;for(p=0;p<u;p+=4)e=revLookup[t.charCodeAt(p)]<<18|revLookup[t.charCodeAt(p+1)]<<12|revLookup[t.charCodeAt(p+2)]<<6|revLookup[t.charCodeAt(p+3)],h[l++]=e>>16&255,h[l++]=e>>8&255,h[l++]=e&255;return d===2&&(e=revLookup[t.charCodeAt(p)]<<2|revLookup[t.charCodeAt(p+1)]>>4,h[l++]=e&255),d===1&&(e=revLookup[t.charCodeAt(p)]<<10|revLookup[t.charCodeAt(p+1)]<<4|revLookup[t.charCodeAt(p+2)]>>2,h[l++]=e>>8&255,h[l++]=e&255),h}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,e,n){for(var o,d=[],h=e;h<n;h+=3)o=(t[h]<<16&16711680)+(t[h+1]<<8&65280)+(t[h+2]&255),d.push(tripletToBase64(o));return d.join("")}function fromByteArray(t){for(var e,n=t.length,o=n%3,d=[],h=16383,l=0,u=n-o;l<u;l+=h)d.push(encodeChunk(t,l,l+h>u?u:l+h));return o===1?(e=t[n-1],d.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):o===2&&(e=(t[n-2]<<8)+t[n-1],d.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),d.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(t,e,n,o,d){var h,l,u=d*8-o-1,p=(1<<u)-1,g=p>>1,v=-7,b=n?d-1:0,_=n?-1:1,S=t[e+b];for(b+=_,h=S&(1<<-v)-1,S>>=-v,v+=u;v>0;h=h*256+t[e+b],b+=_,v-=8);for(l=h&(1<<-v)-1,h>>=-v,v+=o;v>0;l=l*256+t[e+b],b+=_,v-=8);if(h===0)h=1-g;else{if(h===p)return l?NaN:(S?-1:1)*(1/0);l=l+Math.pow(2,o),h=h-g}return(S?-1:1)*l*Math.pow(2,h-o)};ieee754.write=function(t,e,n,o,d,h){var l,u,p,g=h*8-d-1,v=(1<<g)-1,b=v>>1,_=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,S=o?0:h-1,T=o?1:-1,I=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=v):(l=Math.floor(Math.log(e)/Math.LN2),e*(p=Math.pow(2,-l))<1&&(l--,p*=2),l+b>=1?e+=_/p:e+=_*Math.pow(2,1-b),e*p>=2&&(l++,p/=2),l+b>=v?(u=0,l=v):l+b>=1?(u=(e*p-1)*Math.pow(2,d),l=l+b):(u=e*Math.pow(2,b-1)*Math.pow(2,d),l=0));d>=8;t[n+S]=u&255,S+=T,u/=256,d-=8);for(l=l<<d|u,g+=d;g>0;t[n+S]=l&255,S+=T,l/=256,g-=8);t[n+S-T]|=I*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=base64Js,n=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=L,t.INSPECT_MAX_BYTES=50;const d=2147483647;t.kMaxLength=d,u.TYPED_ARRAY_SUPPORT=h(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const j=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(j,w),j.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(j){if(j>d)throw new RangeError('The value "'+j+'" is invalid for option "size"');const w=new Uint8Array(j);return Object.setPrototypeOf(w,u.prototype),w}function u(j,w,E){if(typeof j=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(j)}return p(j,w,E)}u.poolSize=8192;function p(j,w,E){if(typeof j=="string")return _(j,w);if(ArrayBuffer.isView(j))return T(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(de(j,ArrayBuffer)||j&&de(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(j,SharedArrayBuffer)||j&&de(j.buffer,SharedArrayBuffer)))return I(j,w,E);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=j.valueOf&&j.valueOf();if(D!=null&&D!==j)return u.from(D,w,E);const V=P(j);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return u.from(j[Symbol.toPrimitive]("string"),w,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}u.from=function(j,w,E){return p(j,w,E)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function g(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function v(j,w,E){return g(j),j<=0?l(j):w!==void 0?typeof E=="string"?l(j).fill(w,E):l(j).fill(w):l(j)}u.alloc=function(j,w,E){return v(j,w,E)};function b(j){return g(j),l(j<0?0:B(j)|0)}u.allocUnsafe=function(j){return b(j)},u.allocUnsafeSlow=function(j){return b(j)};function _(j,w){if((typeof w!="string"||w==="")&&(w="utf8"),!u.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const E=C(j,w)|0;let D=l(E);const V=D.write(j,w);return V!==E&&(D=D.slice(0,V)),D}function S(j){const w=j.length<0?0:B(j.length)|0,E=l(w);for(let D=0;D<w;D+=1)E[D]=j[D]&255;return E}function T(j){if(de(j,Uint8Array)){const w=new Uint8Array(j);return I(w.buffer,w.byteOffset,w.byteLength)}return S(j)}function I(j,w,E){if(w<0||j.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<w+(E||0))throw new RangeError('"length" is outside of buffer bounds');let D;return w===void 0&&E===void 0?D=new Uint8Array(j):E===void 0?D=new Uint8Array(j,w):D=new Uint8Array(j,w,E),Object.setPrototypeOf(D,u.prototype),D}function P(j){if(u.isBuffer(j)){const w=B(j.length)|0,E=l(w);return E.length===0||j.copy(E,0,0,w),E}if(j.length!==void 0)return typeof j.length!="number"||pe(j.length)?l(0):S(j);if(j.type==="Buffer"&&Array.isArray(j.data))return S(j.data)}function B(j){if(j>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return j|0}function L(j){return+j!=j&&(j=0),u.alloc(+j)}u.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==u.prototype},u.compare=function(w,E){if(de(w,Uint8Array)&&(w=u.from(w,w.offset,w.byteLength)),de(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(w)||!u.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===E)return 0;let D=w.length,V=E.length;for(let Z=0,ce=Math.min(D,V);Z<ce;++Z)if(w[Z]!==E[Z]){D=w[Z],V=E[Z];break}return D<V?-1:V<D?1:0},u.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(w,E){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return u.alloc(0);let D;if(E===void 0)for(E=0,D=0;D<w.length;++D)E+=w[D].length;const V=u.allocUnsafe(E);let Z=0;for(D=0;D<w.length;++D){let ce=w[D];if(de(ce,Uint8Array))Z+ce.length>V.length?(u.isBuffer(ce)||(ce=u.from(ce)),ce.copy(V,Z)):Uint8Array.prototype.set.call(V,ce,Z);else if(u.isBuffer(ce))ce.copy(V,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=ce.length}return V};function C(j,w){if(u.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||de(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const E=j.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&E===0)return 0;let V=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return ie(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return ne(j).length;default:if(V)return D?-1:ie(j).length;w=(""+w).toLowerCase(),V=!0}}u.byteLength=C;function O(j,w,E){let D=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,w>>>=0,E<=w))return"";for(j||(j="utf8");;)switch(j){case"hex":return me(this,w,E);case"utf8":case"utf-8":return $(this,w,E);case"ascii":return ee(this,w,E);case"latin1":case"binary":return ge(this,w,E);case"base64":return F(this,w,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,w,E);default:if(D)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),D=!0}}u.prototype._isBuffer=!0;function N(j,w,E){const D=j[w];j[w]=j[E],j[E]=D}u.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<w;E+=2)N(this,E,E+1);return this},u.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<w;E+=4)N(this,E,E+3),N(this,E+1,E+2);return this},u.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<w;E+=8)N(this,E,E+7),N(this,E+1,E+6),N(this,E+2,E+5),N(this,E+3,E+4);return this},u.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?$(this,0,w):O.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(w){if(!u.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:u.compare(this,w)===0},u.prototype.inspect=function(){let w="";const E=t.INSPECT_MAX_BYTES;return w=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(w+=" ... "),"<Buffer "+w+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(w,E,D,V,Z){if(de(w,Uint8Array)&&(w=u.from(w,w.offset,w.byteLength)),!u.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(E===void 0&&(E=0),D===void 0&&(D=w?w.length:0),V===void 0&&(V=0),Z===void 0&&(Z=this.length),E<0||D>w.length||V<0||Z>this.length)throw new RangeError("out of range index");if(V>=Z&&E>=D)return 0;if(V>=Z)return-1;if(E>=D)return 1;if(E>>>=0,D>>>=0,V>>>=0,Z>>>=0,this===w)return 0;let ce=Z-V,Ae=D-E;const ke=Math.min(ce,Ae),Be=this.slice(V,Z),De=w.slice(E,D);for(let Ce=0;Ce<ke;++Ce)if(Be[Ce]!==De[Ce]){ce=Be[Ce],Ae=De[Ce];break}return ce<Ae?-1:Ae<ce?1:0};function M(j,w,E,D,V){if(j.length===0)return-1;if(typeof E=="string"?(D=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,pe(E)&&(E=V?0:j.length-1),E<0&&(E=j.length+E),E>=j.length){if(V)return-1;E=j.length-1}else if(E<0)if(V)E=0;else return-1;if(typeof w=="string"&&(w=u.from(w,D)),u.isBuffer(w))return w.length===0?-1:k(j,w,E,D,V);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(j,w,E):Uint8Array.prototype.lastIndexOf.call(j,w,E):k(j,[w],E,D,V);throw new TypeError("val must be string, number or Buffer")}function k(j,w,E,D,V){let Z=1,ce=j.length,Ae=w.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(j.length<2||w.length<2)return-1;Z=2,ce/=2,Ae/=2,E/=2}function ke(De,Ce){return Z===1?De[Ce]:De.readUInt16BE(Ce*Z)}let Be;if(V){let De=-1;for(Be=E;Be<ce;Be++)if(ke(j,Be)===ke(w,De===-1?0:Be-De)){if(De===-1&&(De=Be),Be-De+1===Ae)return De*Z}else De!==-1&&(Be-=Be-De),De=-1}else for(E+Ae>ce&&(E=ce-Ae),Be=E;Be>=0;Be--){let De=!0;for(let Ce=0;Ce<Ae;Ce++)if(ke(j,Be+Ce)!==ke(w,Ce)){De=!1;break}if(De)return Be}return-1}u.prototype.includes=function(w,E,D){return this.indexOf(w,E,D)!==-1},u.prototype.indexOf=function(w,E,D){return M(this,w,E,D,!0)},u.prototype.lastIndexOf=function(w,E,D){return M(this,w,E,D,!1)};function W(j,w,E,D){E=Number(E)||0;const V=j.length-E;D?(D=Number(D),D>V&&(D=V)):D=V;const Z=w.length;D>Z/2&&(D=Z/2);let ce;for(ce=0;ce<D;++ce){const Ae=parseInt(w.substr(ce*2,2),16);if(pe(Ae))return ce;j[E+ce]=Ae}return ce}function ae(j,w,E,D){return ue(ie(w,j.length-E),j,E,D)}function X(j,w,E,D){return ue(se(w),j,E,D)}function G(j,w,E,D){return ue(ne(w),j,E,D)}function re(j,w,E,D){return ue(le(w,j.length-E),j,E,D)}u.prototype.write=function(w,E,D,V){if(E===void 0)V="utf8",D=this.length,E=0;else if(D===void 0&&typeof E=="string")V=E,D=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(D)?(D=D>>>0,V===void 0&&(V="utf8")):(V=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-E;if((D===void 0||D>Z)&&(D=Z),w.length>0&&(D<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");let ce=!1;for(;;)switch(V){case"hex":return W(this,w,E,D);case"utf8":case"utf-8":return ae(this,w,E,D);case"ascii":case"latin1":case"binary":return X(this,w,E,D);case"base64":return G(this,w,E,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,w,E,D);default:if(ce)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),ce=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(j,w,E){return w===0&&E===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(w,E))}function $(j,w,E){E=Math.min(j.length,E);const D=[];let V=w;for(;V<E;){const Z=j[V];let ce=null,Ae=Z>239?4:Z>223?3:Z>191?2:1;if(V+Ae<=E){let ke,Be,De,Ce;switch(Ae){case 1:Z<128&&(ce=Z);break;case 2:ke=j[V+1],(ke&192)===128&&(Ce=(Z&31)<<6|ke&63,Ce>127&&(ce=Ce));break;case 3:ke=j[V+1],Be=j[V+2],(ke&192)===128&&(Be&192)===128&&(Ce=(Z&15)<<12|(ke&63)<<6|Be&63,Ce>2047&&(Ce<55296||Ce>57343)&&(ce=Ce));break;case 4:ke=j[V+1],Be=j[V+2],De=j[V+3],(ke&192)===128&&(Be&192)===128&&(De&192)===128&&(Ce=(Z&15)<<18|(ke&63)<<12|(Be&63)<<6|De&63,Ce>65535&&Ce<1114112&&(ce=Ce))}}ce===null?(ce=65533,Ae=1):ce>65535&&(ce-=65536,D.push(ce>>>10&1023|55296),ce=56320|ce&1023),D.push(ce),V+=Ae}return H(D)}const U=4096;function H(j){const w=j.length;if(w<=U)return String.fromCharCode.apply(String,j);let E="",D=0;for(;D<w;)E+=String.fromCharCode.apply(String,j.slice(D,D+=U));return E}function ee(j,w,E){let D="";E=Math.min(j.length,E);for(let V=w;V<E;++V)D+=String.fromCharCode(j[V]&127);return D}function ge(j,w,E){let D="";E=Math.min(j.length,E);for(let V=w;V<E;++V)D+=String.fromCharCode(j[V]);return D}function me(j,w,E){const D=j.length;(!w||w<0)&&(w=0),(!E||E<0||E>D)&&(E=D);let V="";for(let Z=w;Z<E;++Z)V+=be[j[Z]];return V}function fe(j,w,E){const D=j.slice(w,E);let V="";for(let Z=0;Z<D.length-1;Z+=2)V+=String.fromCharCode(D[Z]+D[Z+1]*256);return V}u.prototype.slice=function(w,E){const D=this.length;w=~~w,E=E===void 0?D:~~E,w<0?(w+=D,w<0&&(w=0)):w>D&&(w=D),E<0?(E+=D,E<0&&(E=0)):E>D&&(E=D),E<w&&(E=w);const V=this.subarray(w,E);return Object.setPrototypeOf(V,u.prototype),V};function he(j,w,E){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+w>E)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=this[w],Z=1,ce=0;for(;++ce<E&&(Z*=256);)V+=this[w+ce]*Z;return V},u.prototype.readUintBE=u.prototype.readUIntBE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=this[w+--E],Z=1;for(;E>0&&(Z*=256);)V+=this[w+--E]*Z;return V},u.prototype.readUint8=u.prototype.readUInt8=function(w,E){return w=w>>>0,E||he(w,1,this.length),this[w]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(w,E){return w=w>>>0,E||he(w,2,this.length),this[w]|this[w+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(w,E){return w=w>>>0,E||he(w,2,this.length),this[w]<<8|this[w+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(w,E){return w=w>>>0,E||he(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(w,E){return w=w>>>0,E||he(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},u.prototype.readBigUInt64LE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=E+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,Z=this[++w]+this[++w]*2**8+this[++w]*2**16+D*2**24;return BigInt(V)+(BigInt(Z)<<BigInt(32))}),u.prototype.readBigUInt64BE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=E*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],Z=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D;return(BigInt(V)<<BigInt(32))+BigInt(Z)}),u.prototype.readIntLE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=this[w],Z=1,ce=0;for(;++ce<E&&(Z*=256);)V+=this[w+ce]*Z;return Z*=128,V>=Z&&(V-=Math.pow(2,8*E)),V},u.prototype.readIntBE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=E,Z=1,ce=this[w+--V];for(;V>0&&(Z*=256);)ce+=this[w+--V]*Z;return Z*=128,ce>=Z&&(ce-=Math.pow(2,8*E)),ce},u.prototype.readInt8=function(w,E){return w=w>>>0,E||he(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},u.prototype.readInt16LE=function(w,E){w=w>>>0,E||he(w,2,this.length);const D=this[w]|this[w+1]<<8;return D&32768?D|4294901760:D},u.prototype.readInt16BE=function(w,E){w=w>>>0,E||he(w,2,this.length);const D=this[w+1]|this[w]<<8;return D&32768?D|4294901760:D},u.prototype.readInt32LE=function(w,E){return w=w>>>0,E||he(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},u.prototype.readInt32BE=function(w,E){return w=w>>>0,E||he(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},u.prototype.readBigInt64LE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(D<<24);return(BigInt(V)<<BigInt(32))+BigInt(E+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),u.prototype.readBigInt64BE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=(E<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(V)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D)}),u.prototype.readFloatLE=function(w,E){return w=w>>>0,E||he(w,4,this.length),n.read(this,w,!0,23,4)},u.prototype.readFloatBE=function(w,E){return w=w>>>0,E||he(w,4,this.length),n.read(this,w,!1,23,4)},u.prototype.readDoubleLE=function(w,E){return w=w>>>0,E||he(w,8,this.length),n.read(this,w,!0,52,8)},u.prototype.readDoubleBE=function(w,E){return w=w>>>0,E||he(w,8,this.length),n.read(this,w,!1,52,8)};function _e(j,w,E,D,V,Z){if(!u.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>V||w<Z)throw new RangeError('"value" argument is out of bounds');if(E+D>j.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(w,E,D,V){if(w=+w,E=E>>>0,D=D>>>0,!V){const Ae=Math.pow(2,8*D)-1;_e(this,w,E,D,Ae,0)}let Z=1,ce=0;for(this[E]=w&255;++ce<D&&(Z*=256);)this[E+ce]=w/Z&255;return E+D},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(w,E,D,V){if(w=+w,E=E>>>0,D=D>>>0,!V){const Ae=Math.pow(2,8*D)-1;_e(this,w,E,D,Ae,0)}let Z=D-1,ce=1;for(this[E+Z]=w&255;--Z>=0&&(ce*=256);)this[E+Z]=w/ce&255;return E+D},u.prototype.writeUint8=u.prototype.writeUInt8=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,1,255,0),this[E]=w&255,E+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,65535,0),this[E]=w&255,this[E+1]=w>>>8,E+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,65535,0),this[E]=w>>>8,this[E+1]=w&255,E+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,4294967295,0),this[E+3]=w>>>24,this[E+2]=w>>>16,this[E+1]=w>>>8,this[E]=w&255,E+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,4294967295,0),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4};function xe(j,w,E,D,V){$e(w,D,V,j,E,7);let Z=Number(w&BigInt(4294967295));j[E++]=Z,Z=Z>>8,j[E++]=Z,Z=Z>>8,j[E++]=Z,Z=Z>>8,j[E++]=Z;let ce=Number(w>>BigInt(32)&BigInt(4294967295));return j[E++]=ce,ce=ce>>8,j[E++]=ce,ce=ce>>8,j[E++]=ce,ce=ce>>8,j[E++]=ce,E}function Ne(j,w,E,D,V){$e(w,D,V,j,E,7);let Z=Number(w&BigInt(4294967295));j[E+7]=Z,Z=Z>>8,j[E+6]=Z,Z=Z>>8,j[E+5]=Z,Z=Z>>8,j[E+4]=Z;let ce=Number(w>>BigInt(32)&BigInt(4294967295));return j[E+3]=ce,ce=ce>>8,j[E+2]=ce,ce=ce>>8,j[E+1]=ce,ce=ce>>8,j[E]=ce,E+8}u.prototype.writeBigUInt64LE=we(function(w,E=0){return xe(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=we(function(w,E=0){return Ne(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(w,E,D,V){if(w=+w,E=E>>>0,!V){const ke=Math.pow(2,8*D-1);_e(this,w,E,D,ke-1,-ke)}let Z=0,ce=1,Ae=0;for(this[E]=w&255;++Z<D&&(ce*=256);)w<0&&Ae===0&&this[E+Z-1]!==0&&(Ae=1),this[E+Z]=(w/ce>>0)-Ae&255;return E+D},u.prototype.writeIntBE=function(w,E,D,V){if(w=+w,E=E>>>0,!V){const ke=Math.pow(2,8*D-1);_e(this,w,E,D,ke-1,-ke)}let Z=D-1,ce=1,Ae=0;for(this[E+Z]=w&255;--Z>=0&&(ce*=256);)w<0&&Ae===0&&this[E+Z+1]!==0&&(Ae=1),this[E+Z]=(w/ce>>0)-Ae&255;return E+D},u.prototype.writeInt8=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,1,127,-128),w<0&&(w=255+w+1),this[E]=w&255,E+1},u.prototype.writeInt16LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,32767,-32768),this[E]=w&255,this[E+1]=w>>>8,E+2},u.prototype.writeInt16BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,32767,-32768),this[E]=w>>>8,this[E+1]=w&255,E+2},u.prototype.writeInt32LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,2147483647,-2147483648),this[E]=w&255,this[E+1]=w>>>8,this[E+2]=w>>>16,this[E+3]=w>>>24,E+4},u.prototype.writeInt32BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4},u.prototype.writeBigInt64LE=we(function(w,E=0){return xe(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=we(function(w,E=0){return Ne(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(j,w,E,D,V,Z){if(E+D>j.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Pe(j,w,E,D,V){return w=+w,E=E>>>0,V||Ie(j,w,E,4),n.write(j,w,E,D,23,4),E+4}u.prototype.writeFloatLE=function(w,E,D){return Pe(this,w,E,!0,D)},u.prototype.writeFloatBE=function(w,E,D){return Pe(this,w,E,!1,D)};function ve(j,w,E,D,V){return w=+w,E=E>>>0,V||Ie(j,w,E,8),n.write(j,w,E,D,52,8),E+8}u.prototype.writeDoubleLE=function(w,E,D){return ve(this,w,E,!0,D)},u.prototype.writeDoubleBE=function(w,E,D){return ve(this,w,E,!1,D)},u.prototype.copy=function(w,E,D,V){if(!u.isBuffer(w))throw new TypeError("argument should be a Buffer");if(D||(D=0),!V&&V!==0&&(V=this.length),E>=w.length&&(E=w.length),E||(E=0),V>0&&V<D&&(V=D),V===D||w.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),w.length-E<V-D&&(V=w.length-E+D);const Z=V-D;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,D,V):Uint8Array.prototype.set.call(w,this.subarray(D,V),E),Z},u.prototype.fill=function(w,E,D,V){if(typeof w=="string"){if(typeof E=="string"?(V=E,E=0,D=this.length):typeof D=="string"&&(V=D,D=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!u.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(w.length===1){const ce=w.charCodeAt(0);(V==="utf8"&&ce<128||V==="latin1")&&(w=ce)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(E<0||this.length<E||this.length<D)throw new RangeError("Out of range index");if(D<=E)return this;E=E>>>0,D=D===void 0?this.length:D>>>0,w||(w=0);let Z;if(typeof w=="number")for(Z=E;Z<D;++Z)this[Z]=w;else{const ce=u.isBuffer(w)?w:u.from(w,V),Ae=ce.length;if(Ae===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(Z=0;Z<D-E;++Z)this[Z+E]=ce[Z%Ae]}return this};const Le={};function Fe(j,w,E){Le[j]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}Fe("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Fe("ERR_INVALID_ARG_TYPE",function(j,w){return`The "${j}" argument must be of type number. Received type ${typeof w}`},TypeError),Fe("ERR_OUT_OF_RANGE",function(j,w,E){let D=`The value of "${j}" is out of range.`,V=E;return Number.isInteger(E)&&Math.abs(E)>2**32?V=Ue(String(E)):typeof E=="bigint"&&(V=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(V=Ue(V)),V+="n"),D+=` It must be ${w}. Received ${V}`,D},RangeError);function Ue(j){let w="",E=j.length;const D=j[0]==="-"?1:0;for(;E>=D+4;E-=3)w=`_${j.slice(E-3,E)}${w}`;return`${j.slice(0,E)}${w}`}function Me(j,w,E){q(w,"offset"),(j[w]===void 0||j[w+E]===void 0)&&oe(w,j.length-(E+1))}function $e(j,w,E,D,V,Z){if(j>E||j<w){const ce=typeof w=="bigint"?"n":"";let Ae;throw Z>3?w===0||w===BigInt(0)?Ae=`>= 0${ce} and < 2${ce} ** ${(Z+1)*8}${ce}`:Ae=`>= -(2${ce} ** ${(Z+1)*8-1}${ce}) and < 2 ** ${(Z+1)*8-1}${ce}`:Ae=`>= ${w}${ce} and <= ${E}${ce}`,new Le.ERR_OUT_OF_RANGE("value",Ae,j)}Me(D,V,Z)}function q(j,w){if(typeof j!="number")throw new Le.ERR_INVALID_ARG_TYPE(w,"number",j)}function oe(j,w,E){throw Math.floor(j)!==j?(q(j,E),new Le.ERR_OUT_OF_RANGE(E||"offset","an integer",j)):w<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${w}`,j)}const Q=/[^+/0-9A-Za-z-_]/g;function Y(j){if(j=j.split("=")[0],j=j.trim().replace(Q,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function ie(j,w){w=w||1/0;let E;const D=j.length;let V=null;const Z=[];for(let ce=0;ce<D;++ce){if(E=j.charCodeAt(ce),E>55295&&E<57344){if(!V){if(E>56319){(w-=3)>-1&&Z.push(239,191,189);continue}else if(ce+1===D){(w-=3)>-1&&Z.push(239,191,189);continue}V=E;continue}if(E<56320){(w-=3)>-1&&Z.push(239,191,189),V=E;continue}E=(V-55296<<10|E-56320)+65536}else V&&(w-=3)>-1&&Z.push(239,191,189);if(V=null,E<128){if((w-=1)<0)break;Z.push(E)}else if(E<2048){if((w-=2)<0)break;Z.push(E>>6|192,E&63|128)}else if(E<65536){if((w-=3)<0)break;Z.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((w-=4)<0)break;Z.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return Z}function se(j){const w=[];for(let E=0;E<j.length;++E)w.push(j.charCodeAt(E)&255);return w}function le(j,w){let E,D,V;const Z=[];for(let ce=0;ce<j.length&&!((w-=2)<0);++ce)E=j.charCodeAt(ce),D=E>>8,V=E%256,Z.push(V),Z.push(D);return Z}function ne(j){return e.toByteArray(Y(j))}function ue(j,w,E,D){let V;for(V=0;V<D&&!(V+E>=w.length||V>=j.length);++V)w[V+E]=j[V];return V}function de(j,w){return j instanceof w||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===w.name}function pe(j){return j!==j}const be=function(){const j="0123456789abcdef",w=new Array(256);for(let E=0;E<16;++E){const D=E*16;for(let V=0;V<16;++V)w[D+V]=j[E]+j[V]}return w}();function we(j){return typeof BigInt>"u"?Se:j}function Se(){throw new Error("BigInt not supported")}})(buffer$1);let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$1}=buffer$1||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const n=this.encode(e);return Buffer$1.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:n}=textEndec();return new ViewFormat$2({encode:o=>e.encode(this.encode(o)),decode:o=>this.decode(n.decode(o)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer}=buffer$1||{Buffer:{isBuffer:()=>!1}},{textEncoder,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$3=t=>t;encodings$1.utf8=new UTF8Format$1({encode:function(t){return Buffer.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?textDecoder.decode(t):String(t)},decode:identity$3,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder.encode(t)},decode:function(t){return textDecoder.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer.from(t.buffer,t.byteOffset,t.byteLength):Buffer.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer.from(t.buffer,t.byteOffset,t.byteLength):Buffer.from(String(t),"utf8")},decode:identity$3,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:Buffer.from(String(t),"utf8")},decode:function(t){return Buffer.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder.encode(t)},decode:identity$3,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer.from(t.buffer,t.byteOffset,t.byteLength):Buffer.from(String(t),"utf8")},decode:identity$3,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:Buffer.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(t){return Buffer.isBuffer(t)?t:Buffer.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every(n=>validFormats.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const n in encodings)try{this.encoding(n)}catch(o){if(o.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw o}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let n=this[kEncodings].get(e);if(n===void 0){if(typeof e=="string"&&e!==""){if(n=lookup[e],!n)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");n=from(e)}const{name:o,format:d}=n;if(!this[kFormats].has(d))if(this[kFormats].has("view"))n=n.createViewTranscoder();else if(this[kFormats].has("buffer"))n=n.createBufferTranscoder();else if(this[kFormats].has("utf8"))n=n.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${o}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const h of[e,o,n.name,n.commonName])this[kEncodings].set(h,n)}return n}};levelTranscoder.Transcoder=Transcoder$1;function from(t){if(t instanceof Encoding)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,n=t.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(t)){case"view":return new ViewFormat({...t,name:n});case"utf8":return new UTF8Format({...t,name:n});case"buffer":return new BufferFormat({...t,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup={...encodings,...aliases};let anonymousCount=0;var eventsExports={},events={get exports(){return eventsExports},set exports(t){eventsExports=t}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,n,o){return Function.prototype.apply.call(e,n,o)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;eventsExports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:t._maxListeners}EventEmitter$1.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function(e){for(var n=[],o=1;o<arguments.length;o++)n.push(arguments[o]);var d=e==="error",h=this._events;if(h!==void 0)d=d&&h.error===void 0;else if(!d)return!1;if(d){var l;if(n.length>0&&(l=n[0]),l instanceof Error)throw l;var u=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw u.context=l,u}var p=h[e];if(p===void 0)return!1;if(typeof p=="function")ReflectApply(p,this,n);else for(var g=p.length,v=arrayClone(p,g),o=0;o<g;++o)ReflectApply(v[o],this,n);return!0};function _addListener(t,e,n,o){var d,h,l;if(checkListener(n),h=t._events,h===void 0?(h=t._events=Object.create(null),t._eventsCount=0):(h.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),h=t._events),l=h[e]),l===void 0)l=h[e]=n,++t._eventsCount;else if(typeof l=="function"?l=h[e]=o?[n,l]:[l,n]:o?l.unshift(n):l.push(n),d=_getMaxListeners(t),d>0&&l.length>d&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,ProcessEmitWarning(u)}return t}EventEmitter$1.prototype.addListener=function(e,n){return _addListener(this,e,n,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,n){var o={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},d=onceWrapper.bind(o);return d.listener=n,o.wrapFn=d,d}EventEmitter$1.prototype.once=function(e,n){return checkListener(n),this.on(e,_onceWrap(this,e,n)),this};EventEmitter$1.prototype.prependOnceListener=function(e,n){return checkListener(n),this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter$1.prototype.removeListener=function(e,n){var o,d,h,l,u;if(checkListener(n),d=this._events,d===void 0)return this;if(o=d[e],o===void 0)return this;if(o===n||o.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete d[e],d.removeListener&&this.emit("removeListener",e,o.listener||n));else if(typeof o!="function"){for(h=-1,l=o.length-1;l>=0;l--)if(o[l]===n||o[l].listener===n){u=o[l].listener,h=l;break}if(h<0)return this;h===0?o.shift():spliceOne(o,h),o.length===1&&(d[e]=o[0]),d.removeListener!==void 0&&this.emit("removeListener",e,u||n)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function(e){var n,o,d;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){var h=Object.keys(o),l;for(d=0;d<h.length;++d)l=h[d],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=o[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(d=n.length-1;d>=0;d--)this.removeListener(e,n[d]);return this};function _listeners(t,e,n){var o=t._events;if(o===void 0)return[];var d=o[e];return d===void 0?[]:typeof d=="function"?n?[d.listener||d]:[d]:n?unwrapListeners(d):arrayClone(d,d.length)}EventEmitter$1.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount.call(t,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter$1.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var n=new Array(e),o=0;o<e;++o)n[o]=t[o];return n}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function once(t,e){return new Promise(function(n,o){function d(l){t.removeListener(e,h),o(l)}function h(){typeof t.removeListener=="function"&&t.removeListener("error",d),n([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,h,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,d,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,n){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,n)}function eventTargetAgnosticAddListener(t,e,n,o){if(typeof t.on=="function")o.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function d(h){o.once&&t.removeEventListener(e,d),n(h)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),nextTick=nextTickBrowser$1;catering.fromCallback=function(t,e){if(t===void 0){var n=new Promise(function(o,d){t=function(h,l){h?d(h):o(l)}});t[e!==void 0?e:"promise"]=n}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};catering.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(n){nextTick(()=>e(null,n))}).catch(function(n){nextTick(()=>e(n))})};var abstractIterator={},common$6={};common$6.getCallback=function(t,e){return typeof t=="function"?t:e};common$6.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:fromCallback$2}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$6,kPromise$2=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions=Object.freeze({}),noop$3=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,n,o){if(typeof e!="object"||e===null){const d=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${d}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=n[kKeyEncoding$1],this[kValueEncoding$1]=n[kValueEncoding$1],this[kLegacy]=o,this[kLimit]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!n.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let n;if(e===void 0)n=new Promise((o,d)=>{e=(h,l,u)=>{h?d(h):this[kLegacy]?l===void 0&&u===void 0?o():o([l,u]):o(l)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),n}_next(e){this.nextTick(e)}nextv(e,n,o){return o=getCallback$2(n,o),o=fromCallback$2(o,kPromise$2),n=getOptions$2(n,emptyOptions),Number.isInteger(e)?(this[kClosing]?this.nextTick(o,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(o,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=o,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,n,this[kHandleMany$1])),o[kPromise$2]):(this.nextTick(o,new TypeError("The first argument 'size' must be an integer")),o[kPromise$2])}_nextv(e,n,o){const d=[],h=(l,u,p)=>{if(l)return o(l);if(this[kLegacy]?u===void 0&&p===void 0:u===void 0)return o(null,d);d.push(this[kLegacy]?[u,p]:u),d.length===e?o(null,d):this._next(h)};this._next(h)}all(e,n){return n=getCallback$2(e,n),n=fromCallback$2(n,kPromise$2),e=getOptions$2(e,emptyOptions),this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=n,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),n[kPromise$2]}_all(e,n){let o=this[kCount];const d=[],h=()=>{const u=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-o):1e3;u<=0?this.nextTick(n,null,d):this._nextv(u,emptyOptions,l)},l=(u,p)=>{u?n(u):p.length===0?n(null,d):(d.push.apply(d,p),o+=p.length,h())};h()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$3:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,n,o){this[kAutoClose]?this.close(e.bind(null,n,o)):e(n,o)}seek(e,n){if(n=getOptions$2(n,emptyOptions),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const o=this.db.keyEncoding(n.keyEncoding||this[kKeyEncoding$1]),d=o.format;n.keyEncoding!==d&&(n={...n,keyEncoding:d});const h=this.db.prefixKey(o.encode(e),d);this._seek(h,n)}}}_seek(e,n){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$2(e,kPromise$2),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$2]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const n of e)n()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,n){super(e,n,!0),this[kKeys]=n.keys!==!1,this[kValues]=n.values!==!1}[kHandleOne$1](e,n,o){const d=this[kFinishWork]();if(e)return d(e);try{n=this[kKeys]&&n!==void 0?this[kKeyEncoding$1].decode(n):void 0,o=this[kValues]&&o!==void 0?this[kValueEncoding$1].decode(o):void 0}catch(h){return d(new IteratorDecodeError("entry",h))}n===void 0&&o===void 0||this[kCount]++,d(null,n,o)}[kHandleMany$1](e,n){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(const d of n){const h=d[0],l=d[1];d[0]=this[kKeys]&&h!==void 0?this[kKeyEncoding$1].decode(h):void 0,d[1]=this[kValues]&&l!==void 0?this[kValueEncoding$1].decode(l):void 0}}catch(d){return this[kReturnMany](o,new IteratorDecodeError("entries",d))}this[kCount]+=n.length,this[kReturnMany](o,null,n)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$3=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const o=this[kFinishWork]();if(e)return o(e);try{n=n!==void 0?this[kKeyEncoding$1].decode(n):void 0}catch(d){return o(new IteratorDecodeError("key",d))}n!==void 0&&this[kCount]++,o(null,n)}[kHandleMany$1](e,n){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(let d=0;d<n.length;d++){const h=n[d];n[d]=h!==void 0?this[kKeyEncoding$1].decode(h):void 0}}catch(d){return this[kReturnMany](o,new IteratorDecodeError("keys",d))}this[kCount]+=n.length,this[kReturnMany](o,null,n)}},AbstractValueIterator$3=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const o=this[kFinishWork]();if(e)return o(e);try{n=n!==void 0?this[kValueEncoding$1].decode(n):void 0}catch(d){return o(new IteratorDecodeError("value",d))}n!==void 0&&this[kCount]++,o(null,n)}[kHandleMany$1](e,n){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(let d=0;d<n.length;d++){const h=n[d];n[d]=h!==void 0?this[kValueEncoding$1].decode(h):void 0}}catch(d){return this[kReturnMany](o,new IteratorDecodeError("values",d))}this[kCount]+=n.length,this[kReturnMany](o,null,n)}};class IteratorDecodeError extends ModuleError$6{constructor(e,n){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:n})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,t.split(" ")[0],{get(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$3;abstractIterator.AbstractValueIterator=AbstractValueIterator$3;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$2,AbstractValueIterator:AbstractValueIterator$2}=abstractIterator,kIterator$1=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$2{constructor(e,n){super(e,n),this[kIterator$1]=e.iterator({...n,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$2{constructor(e,n){super(e,n),this[kIterator$1]=e.iterator({...n,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=t===DefaultKeyIterator$1,n=e?o=>o[0]:o=>o[1];t.prototype._next=function(o){this[kCallback]=o,this[kIterator$1].next(this[kHandleOne])},t.prototype[kHandleOne]=function(o,d,h){const l=this[kCallback];o?l(o):l(null,e?d:h)},t.prototype._nextv=function(o,d,h){this[kCallback]=h,this[kIterator$1].nextv(o,d,this[kHandleMany])},t.prototype._all=function(o,d){this[kCallback]=d,this[kIterator$1].all(o,this[kHandleMany])},t.prototype[kHandleMany]=function(o,d){const h=this[kCallback];o?h(o):h(null,d.map(n))},t.prototype._seek=function(o,d){this[kIterator$1].seek(o,d)},t.prototype._close=function(o){this[kIterator$1].close(o)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.iterator(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.keys(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator$1{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.values(n),this.db.defer(()=>this[kUndefer$1]())}};for(const t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},t.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,n,o){this[kNut]!==null?this[kNut].nextv(e,n,o):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,n,o)):this.nextTick(o,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,n){this[kNut]!==null?this[kNut].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(e,n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,n){this[kNut]!==null?this[kNut]._seek(e,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,n))},t.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$1}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$6,kPromise$1=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const n=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,n,o){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const d=this.db._checkKey(e)||this.db._checkValue(n);if(d)throw d;const h=o&&o.sublevel!=null?o.sublevel:this.db,l=o,u=h.keyEncoding(o&&o.keyEncoding),p=h.valueEncoding(o&&o.valueEncoding),g=u.format;o={...o,keyEncoding:g,valueEncoding:p.format},h!==this.db&&(o.sublevel=null);const v=h.prefixKey(u.encode(e),g),b=p.encode(n);return this._put(v,b,o),this[kOperations$1].push({...l,type:"put",key:e,value:n}),this}_put(e,n,o){}del(e,n){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e);if(o)throw o;const d=n&&n.sublevel!=null?n.sublevel:this.db,h=n,l=d.keyEncoding(n&&n.keyEncoding),u=l.format;return n={...n,keyEncoding:u},d!==this.db&&(n.sublevel=null),this._del(d.prefixKey(l.encode(e),u),n),this[kOperations$1].push({...h,type:"del",key:e}),this}_del(e,n){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,n){return n=getCallback$1(e,n),n=fromCallback$1(n,kPromise$1),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(n,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[kStatus$1]="writing",this._write(e,o=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>n(o)),o||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),n[kPromise$1]}_write(e,n){}close(e){return e=fromCallback$1(e,kPromise$1),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$1]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const n of e)n()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,n,o){this[kEncoded].push({...o,type:"put",key:e,value:n})}_del(e,n){this[kEncoded].push({...n,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,n){this.db.status==="opening"?this.db.defer(()=>this._write(e,n)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(n):this.db._batch(this[kEncoded],e,n):this.nextTick(n,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty$1=Object.prototype.hasOwnProperty,rangeOptions$2=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(t,e){const n={};for(const o in t)if(hasOwnProperty$1.call(t,o)&&!(o==="keyEncoding"||o==="valueEncoding")){if(o==="start"||o==="end")throw new ModuleError$2(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if(o==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$2.has(o)?n[o]=e.encode(t[o]):n[o]=t[o]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var queueMicrotask_1,hasRequiredQueueMicrotask;function requireQueueMicrotask(){if(hasRequiredQueueMicrotask)return queueMicrotask_1;hasRequiredQueueMicrotask=1;let t;return queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):e=>(t||(t=Promise.resolve())).then(e).catch(n=>setTimeout(()=>{throw n},0)),queueMicrotask_1}var nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const t=requireQueueMicrotask();return nextTickBrowser=function(e,...n){n.length===0?t(e):t(()=>e(...n))},nextTickBrowser}var buffer={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(t){const e=base64Js,n=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=L,t.INSPECT_MAX_BYTES=50;const d=2147483647;t.kMaxLength=d,u.TYPED_ARRAY_SUPPORT=h(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function h(){try{const j=new Uint8Array(1),w={foo:function(){return 42}};return Object.setPrototypeOf(w,Uint8Array.prototype),Object.setPrototypeOf(j,w),j.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(j){if(j>d)throw new RangeError('The value "'+j+'" is invalid for option "size"');const w=new Uint8Array(j);return Object.setPrototypeOf(w,u.prototype),w}function u(j,w,E){if(typeof j=="number"){if(typeof w=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(j)}return p(j,w,E)}u.poolSize=8192;function p(j,w,E){if(typeof j=="string")return _(j,w);if(ArrayBuffer.isView(j))return T(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(de(j,ArrayBuffer)||j&&de(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(de(j,SharedArrayBuffer)||j&&de(j.buffer,SharedArrayBuffer)))return I(j,w,E);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const D=j.valueOf&&j.valueOf();if(D!=null&&D!==j)return u.from(D,w,E);const V=P(j);if(V)return V;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return u.from(j[Symbol.toPrimitive]("string"),w,E);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}u.from=function(j,w,E){return p(j,w,E)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function g(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function v(j,w,E){return g(j),j<=0?l(j):w!==void 0?typeof E=="string"?l(j).fill(w,E):l(j).fill(w):l(j)}u.alloc=function(j,w,E){return v(j,w,E)};function b(j){return g(j),l(j<0?0:B(j)|0)}u.allocUnsafe=function(j){return b(j)},u.allocUnsafeSlow=function(j){return b(j)};function _(j,w){if((typeof w!="string"||w==="")&&(w="utf8"),!u.isEncoding(w))throw new TypeError("Unknown encoding: "+w);const E=C(j,w)|0;let D=l(E);const V=D.write(j,w);return V!==E&&(D=D.slice(0,V)),D}function S(j){const w=j.length<0?0:B(j.length)|0,E=l(w);for(let D=0;D<w;D+=1)E[D]=j[D]&255;return E}function T(j){if(de(j,Uint8Array)){const w=new Uint8Array(j);return I(w.buffer,w.byteOffset,w.byteLength)}return S(j)}function I(j,w,E){if(w<0||j.byteLength<w)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<w+(E||0))throw new RangeError('"length" is outside of buffer bounds');let D;return w===void 0&&E===void 0?D=new Uint8Array(j):E===void 0?D=new Uint8Array(j,w):D=new Uint8Array(j,w,E),Object.setPrototypeOf(D,u.prototype),D}function P(j){if(u.isBuffer(j)){const w=B(j.length)|0,E=l(w);return E.length===0||j.copy(E,0,0,w),E}if(j.length!==void 0)return typeof j.length!="number"||pe(j.length)?l(0):S(j);if(j.type==="Buffer"&&Array.isArray(j.data))return S(j.data)}function B(j){if(j>=d)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+d.toString(16)+" bytes");return j|0}function L(j){return+j!=j&&(j=0),u.alloc(+j)}u.isBuffer=function(w){return w!=null&&w._isBuffer===!0&&w!==u.prototype},u.compare=function(w,E){if(de(w,Uint8Array)&&(w=u.from(w,w.offset,w.byteLength)),de(E,Uint8Array)&&(E=u.from(E,E.offset,E.byteLength)),!u.isBuffer(w)||!u.isBuffer(E))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(w===E)return 0;let D=w.length,V=E.length;for(let Z=0,ce=Math.min(D,V);Z<ce;++Z)if(w[Z]!==E[Z]){D=w[Z],V=E[Z];break}return D<V?-1:V<D?1:0},u.isEncoding=function(w){switch(String(w).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(w,E){if(!Array.isArray(w))throw new TypeError('"list" argument must be an Array of Buffers');if(w.length===0)return u.alloc(0);let D;if(E===void 0)for(E=0,D=0;D<w.length;++D)E+=w[D].length;const V=u.allocUnsafe(E);let Z=0;for(D=0;D<w.length;++D){let ce=w[D];if(de(ce,Uint8Array))Z+ce.length>V.length?(u.isBuffer(ce)||(ce=u.from(ce)),ce.copy(V,Z)):Uint8Array.prototype.set.call(V,ce,Z);else if(u.isBuffer(ce))ce.copy(V,Z);else throw new TypeError('"list" argument must be an Array of Buffers');Z+=ce.length}return V};function C(j,w){if(u.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||de(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);const E=j.length,D=arguments.length>2&&arguments[2]===!0;if(!D&&E===0)return 0;let V=!1;for(;;)switch(w){case"ascii":case"latin1":case"binary":return E;case"utf8":case"utf-8":return ie(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E*2;case"hex":return E>>>1;case"base64":return ne(j).length;default:if(V)return D?-1:ie(j).length;w=(""+w).toLowerCase(),V=!0}}u.byteLength=C;function O(j,w,E){let D=!1;if((w===void 0||w<0)&&(w=0),w>this.length||((E===void 0||E>this.length)&&(E=this.length),E<=0)||(E>>>=0,w>>>=0,E<=w))return"";for(j||(j="utf8");;)switch(j){case"hex":return me(this,w,E);case"utf8":case"utf-8":return $(this,w,E);case"ascii":return ee(this,w,E);case"latin1":case"binary":return ge(this,w,E);case"base64":return F(this,w,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,w,E);default:if(D)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),D=!0}}u.prototype._isBuffer=!0;function N(j,w,E){const D=j[w];j[w]=j[E],j[E]=D}u.prototype.swap16=function(){const w=this.length;if(w%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let E=0;E<w;E+=2)N(this,E,E+1);return this},u.prototype.swap32=function(){const w=this.length;if(w%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let E=0;E<w;E+=4)N(this,E,E+3),N(this,E+1,E+2);return this},u.prototype.swap64=function(){const w=this.length;if(w%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let E=0;E<w;E+=8)N(this,E,E+7),N(this,E+1,E+6),N(this,E+2,E+5),N(this,E+3,E+4);return this},u.prototype.toString=function(){const w=this.length;return w===0?"":arguments.length===0?$(this,0,w):O.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(w){if(!u.isBuffer(w))throw new TypeError("Argument must be a Buffer");return this===w?!0:u.compare(this,w)===0},u.prototype.inspect=function(){let w="";const E=t.INSPECT_MAX_BYTES;return w=this.toString("hex",0,E).replace(/(.{2})/g,"$1 ").trim(),this.length>E&&(w+=" ... "),"<Buffer "+w+">"},o&&(u.prototype[o]=u.prototype.inspect),u.prototype.compare=function(w,E,D,V,Z){if(de(w,Uint8Array)&&(w=u.from(w,w.offset,w.byteLength)),!u.isBuffer(w))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof w);if(E===void 0&&(E=0),D===void 0&&(D=w?w.length:0),V===void 0&&(V=0),Z===void 0&&(Z=this.length),E<0||D>w.length||V<0||Z>this.length)throw new RangeError("out of range index");if(V>=Z&&E>=D)return 0;if(V>=Z)return-1;if(E>=D)return 1;if(E>>>=0,D>>>=0,V>>>=0,Z>>>=0,this===w)return 0;let ce=Z-V,Ae=D-E;const ke=Math.min(ce,Ae),Be=this.slice(V,Z),De=w.slice(E,D);for(let Ce=0;Ce<ke;++Ce)if(Be[Ce]!==De[Ce]){ce=Be[Ce],Ae=De[Ce];break}return ce<Ae?-1:Ae<ce?1:0};function M(j,w,E,D,V){if(j.length===0)return-1;if(typeof E=="string"?(D=E,E=0):E>2147483647?E=2147483647:E<-2147483648&&(E=-2147483648),E=+E,pe(E)&&(E=V?0:j.length-1),E<0&&(E=j.length+E),E>=j.length){if(V)return-1;E=j.length-1}else if(E<0)if(V)E=0;else return-1;if(typeof w=="string"&&(w=u.from(w,D)),u.isBuffer(w))return w.length===0?-1:k(j,w,E,D,V);if(typeof w=="number")return w=w&255,typeof Uint8Array.prototype.indexOf=="function"?V?Uint8Array.prototype.indexOf.call(j,w,E):Uint8Array.prototype.lastIndexOf.call(j,w,E):k(j,[w],E,D,V);throw new TypeError("val must be string, number or Buffer")}function k(j,w,E,D,V){let Z=1,ce=j.length,Ae=w.length;if(D!==void 0&&(D=String(D).toLowerCase(),D==="ucs2"||D==="ucs-2"||D==="utf16le"||D==="utf-16le")){if(j.length<2||w.length<2)return-1;Z=2,ce/=2,Ae/=2,E/=2}function ke(De,Ce){return Z===1?De[Ce]:De.readUInt16BE(Ce*Z)}let Be;if(V){let De=-1;for(Be=E;Be<ce;Be++)if(ke(j,Be)===ke(w,De===-1?0:Be-De)){if(De===-1&&(De=Be),Be-De+1===Ae)return De*Z}else De!==-1&&(Be-=Be-De),De=-1}else for(E+Ae>ce&&(E=ce-Ae),Be=E;Be>=0;Be--){let De=!0;for(let Ce=0;Ce<Ae;Ce++)if(ke(j,Be+Ce)!==ke(w,Ce)){De=!1;break}if(De)return Be}return-1}u.prototype.includes=function(w,E,D){return this.indexOf(w,E,D)!==-1},u.prototype.indexOf=function(w,E,D){return M(this,w,E,D,!0)},u.prototype.lastIndexOf=function(w,E,D){return M(this,w,E,D,!1)};function W(j,w,E,D){E=Number(E)||0;const V=j.length-E;D?(D=Number(D),D>V&&(D=V)):D=V;const Z=w.length;D>Z/2&&(D=Z/2);let ce;for(ce=0;ce<D;++ce){const Ae=parseInt(w.substr(ce*2,2),16);if(pe(Ae))return ce;j[E+ce]=Ae}return ce}function ae(j,w,E,D){return ue(ie(w,j.length-E),j,E,D)}function X(j,w,E,D){return ue(se(w),j,E,D)}function G(j,w,E,D){return ue(ne(w),j,E,D)}function re(j,w,E,D){return ue(le(w,j.length-E),j,E,D)}u.prototype.write=function(w,E,D,V){if(E===void 0)V="utf8",D=this.length,E=0;else if(D===void 0&&typeof E=="string")V=E,D=this.length,E=0;else if(isFinite(E))E=E>>>0,isFinite(D)?(D=D>>>0,V===void 0&&(V="utf8")):(V=D,D=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Z=this.length-E;if((D===void 0||D>Z)&&(D=Z),w.length>0&&(D<0||E<0)||E>this.length)throw new RangeError("Attempt to write outside buffer bounds");V||(V="utf8");let ce=!1;for(;;)switch(V){case"hex":return W(this,w,E,D);case"utf8":case"utf-8":return ae(this,w,E,D);case"ascii":case"latin1":case"binary":return X(this,w,E,D);case"base64":return G(this,w,E,D);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,w,E,D);default:if(ce)throw new TypeError("Unknown encoding: "+V);V=(""+V).toLowerCase(),ce=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function F(j,w,E){return w===0&&E===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(w,E))}function $(j,w,E){E=Math.min(j.length,E);const D=[];let V=w;for(;V<E;){const Z=j[V];let ce=null,Ae=Z>239?4:Z>223?3:Z>191?2:1;if(V+Ae<=E){let ke,Be,De,Ce;switch(Ae){case 1:Z<128&&(ce=Z);break;case 2:ke=j[V+1],(ke&192)===128&&(Ce=(Z&31)<<6|ke&63,Ce>127&&(ce=Ce));break;case 3:ke=j[V+1],Be=j[V+2],(ke&192)===128&&(Be&192)===128&&(Ce=(Z&15)<<12|(ke&63)<<6|Be&63,Ce>2047&&(Ce<55296||Ce>57343)&&(ce=Ce));break;case 4:ke=j[V+1],Be=j[V+2],De=j[V+3],(ke&192)===128&&(Be&192)===128&&(De&192)===128&&(Ce=(Z&15)<<18|(ke&63)<<12|(Be&63)<<6|De&63,Ce>65535&&Ce<1114112&&(ce=Ce))}}ce===null?(ce=65533,Ae=1):ce>65535&&(ce-=65536,D.push(ce>>>10&1023|55296),ce=56320|ce&1023),D.push(ce),V+=Ae}return H(D)}const U=4096;function H(j){const w=j.length;if(w<=U)return String.fromCharCode.apply(String,j);let E="",D=0;for(;D<w;)E+=String.fromCharCode.apply(String,j.slice(D,D+=U));return E}function ee(j,w,E){let D="";E=Math.min(j.length,E);for(let V=w;V<E;++V)D+=String.fromCharCode(j[V]&127);return D}function ge(j,w,E){let D="";E=Math.min(j.length,E);for(let V=w;V<E;++V)D+=String.fromCharCode(j[V]);return D}function me(j,w,E){const D=j.length;(!w||w<0)&&(w=0),(!E||E<0||E>D)&&(E=D);let V="";for(let Z=w;Z<E;++Z)V+=be[j[Z]];return V}function fe(j,w,E){const D=j.slice(w,E);let V="";for(let Z=0;Z<D.length-1;Z+=2)V+=String.fromCharCode(D[Z]+D[Z+1]*256);return V}u.prototype.slice=function(w,E){const D=this.length;w=~~w,E=E===void 0?D:~~E,w<0?(w+=D,w<0&&(w=0)):w>D&&(w=D),E<0?(E+=D,E<0&&(E=0)):E>D&&(E=D),E<w&&(E=w);const V=this.subarray(w,E);return Object.setPrototypeOf(V,u.prototype),V};function he(j,w,E){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+w>E)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=this[w],Z=1,ce=0;for(;++ce<E&&(Z*=256);)V+=this[w+ce]*Z;return V},u.prototype.readUintBE=u.prototype.readUIntBE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=this[w+--E],Z=1;for(;E>0&&(Z*=256);)V+=this[w+--E]*Z;return V},u.prototype.readUint8=u.prototype.readUInt8=function(w,E){return w=w>>>0,E||he(w,1,this.length),this[w]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(w,E){return w=w>>>0,E||he(w,2,this.length),this[w]|this[w+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(w,E){return w=w>>>0,E||he(w,2,this.length),this[w]<<8|this[w+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(w,E){return w=w>>>0,E||he(w,4,this.length),(this[w]|this[w+1]<<8|this[w+2]<<16)+this[w+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(w,E){return w=w>>>0,E||he(w,4,this.length),this[w]*16777216+(this[w+1]<<16|this[w+2]<<8|this[w+3])},u.prototype.readBigUInt64LE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=E+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24,Z=this[++w]+this[++w]*2**8+this[++w]*2**16+D*2**24;return BigInt(V)+(BigInt(Z)<<BigInt(32))}),u.prototype.readBigUInt64BE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=E*2**24+this[++w]*2**16+this[++w]*2**8+this[++w],Z=this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D;return(BigInt(V)<<BigInt(32))+BigInt(Z)}),u.prototype.readIntLE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=this[w],Z=1,ce=0;for(;++ce<E&&(Z*=256);)V+=this[w+ce]*Z;return Z*=128,V>=Z&&(V-=Math.pow(2,8*E)),V},u.prototype.readIntBE=function(w,E,D){w=w>>>0,E=E>>>0,D||he(w,E,this.length);let V=E,Z=1,ce=this[w+--V];for(;V>0&&(Z*=256);)ce+=this[w+--V]*Z;return Z*=128,ce>=Z&&(ce-=Math.pow(2,8*E)),ce},u.prototype.readInt8=function(w,E){return w=w>>>0,E||he(w,1,this.length),this[w]&128?(255-this[w]+1)*-1:this[w]},u.prototype.readInt16LE=function(w,E){w=w>>>0,E||he(w,2,this.length);const D=this[w]|this[w+1]<<8;return D&32768?D|4294901760:D},u.prototype.readInt16BE=function(w,E){w=w>>>0,E||he(w,2,this.length);const D=this[w+1]|this[w]<<8;return D&32768?D|4294901760:D},u.prototype.readInt32LE=function(w,E){return w=w>>>0,E||he(w,4,this.length),this[w]|this[w+1]<<8|this[w+2]<<16|this[w+3]<<24},u.prototype.readInt32BE=function(w,E){return w=w>>>0,E||he(w,4,this.length),this[w]<<24|this[w+1]<<16|this[w+2]<<8|this[w+3]},u.prototype.readBigInt64LE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=this[w+4]+this[w+5]*2**8+this[w+6]*2**16+(D<<24);return(BigInt(V)<<BigInt(32))+BigInt(E+this[++w]*2**8+this[++w]*2**16+this[++w]*2**24)}),u.prototype.readBigInt64BE=we(function(w){w=w>>>0,q(w,"offset");const E=this[w],D=this[w+7];(E===void 0||D===void 0)&&oe(w,this.length-8);const V=(E<<24)+this[++w]*2**16+this[++w]*2**8+this[++w];return(BigInt(V)<<BigInt(32))+BigInt(this[++w]*2**24+this[++w]*2**16+this[++w]*2**8+D)}),u.prototype.readFloatLE=function(w,E){return w=w>>>0,E||he(w,4,this.length),n.read(this,w,!0,23,4)},u.prototype.readFloatBE=function(w,E){return w=w>>>0,E||he(w,4,this.length),n.read(this,w,!1,23,4)},u.prototype.readDoubleLE=function(w,E){return w=w>>>0,E||he(w,8,this.length),n.read(this,w,!0,52,8)},u.prototype.readDoubleBE=function(w,E){return w=w>>>0,E||he(w,8,this.length),n.read(this,w,!1,52,8)};function _e(j,w,E,D,V,Z){if(!u.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(w>V||w<Z)throw new RangeError('"value" argument is out of bounds');if(E+D>j.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(w,E,D,V){if(w=+w,E=E>>>0,D=D>>>0,!V){const Ae=Math.pow(2,8*D)-1;_e(this,w,E,D,Ae,0)}let Z=1,ce=0;for(this[E]=w&255;++ce<D&&(Z*=256);)this[E+ce]=w/Z&255;return E+D},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(w,E,D,V){if(w=+w,E=E>>>0,D=D>>>0,!V){const Ae=Math.pow(2,8*D)-1;_e(this,w,E,D,Ae,0)}let Z=D-1,ce=1;for(this[E+Z]=w&255;--Z>=0&&(ce*=256);)this[E+Z]=w/ce&255;return E+D},u.prototype.writeUint8=u.prototype.writeUInt8=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,1,255,0),this[E]=w&255,E+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,65535,0),this[E]=w&255,this[E+1]=w>>>8,E+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,65535,0),this[E]=w>>>8,this[E+1]=w&255,E+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,4294967295,0),this[E+3]=w>>>24,this[E+2]=w>>>16,this[E+1]=w>>>8,this[E]=w&255,E+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,4294967295,0),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4};function xe(j,w,E,D,V){$e(w,D,V,j,E,7);let Z=Number(w&BigInt(4294967295));j[E++]=Z,Z=Z>>8,j[E++]=Z,Z=Z>>8,j[E++]=Z,Z=Z>>8,j[E++]=Z;let ce=Number(w>>BigInt(32)&BigInt(4294967295));return j[E++]=ce,ce=ce>>8,j[E++]=ce,ce=ce>>8,j[E++]=ce,ce=ce>>8,j[E++]=ce,E}function Ne(j,w,E,D,V){$e(w,D,V,j,E,7);let Z=Number(w&BigInt(4294967295));j[E+7]=Z,Z=Z>>8,j[E+6]=Z,Z=Z>>8,j[E+5]=Z,Z=Z>>8,j[E+4]=Z;let ce=Number(w>>BigInt(32)&BigInt(4294967295));return j[E+3]=ce,ce=ce>>8,j[E+2]=ce,ce=ce>>8,j[E+1]=ce,ce=ce>>8,j[E]=ce,E+8}u.prototype.writeBigUInt64LE=we(function(w,E=0){return xe(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=we(function(w,E=0){return Ne(this,w,E,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(w,E,D,V){if(w=+w,E=E>>>0,!V){const ke=Math.pow(2,8*D-1);_e(this,w,E,D,ke-1,-ke)}let Z=0,ce=1,Ae=0;for(this[E]=w&255;++Z<D&&(ce*=256);)w<0&&Ae===0&&this[E+Z-1]!==0&&(Ae=1),this[E+Z]=(w/ce>>0)-Ae&255;return E+D},u.prototype.writeIntBE=function(w,E,D,V){if(w=+w,E=E>>>0,!V){const ke=Math.pow(2,8*D-1);_e(this,w,E,D,ke-1,-ke)}let Z=D-1,ce=1,Ae=0;for(this[E+Z]=w&255;--Z>=0&&(ce*=256);)w<0&&Ae===0&&this[E+Z+1]!==0&&(Ae=1),this[E+Z]=(w/ce>>0)-Ae&255;return E+D},u.prototype.writeInt8=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,1,127,-128),w<0&&(w=255+w+1),this[E]=w&255,E+1},u.prototype.writeInt16LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,32767,-32768),this[E]=w&255,this[E+1]=w>>>8,E+2},u.prototype.writeInt16BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,2,32767,-32768),this[E]=w>>>8,this[E+1]=w&255,E+2},u.prototype.writeInt32LE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,2147483647,-2147483648),this[E]=w&255,this[E+1]=w>>>8,this[E+2]=w>>>16,this[E+3]=w>>>24,E+4},u.prototype.writeInt32BE=function(w,E,D){return w=+w,E=E>>>0,D||_e(this,w,E,4,2147483647,-2147483648),w<0&&(w=4294967295+w+1),this[E]=w>>>24,this[E+1]=w>>>16,this[E+2]=w>>>8,this[E+3]=w&255,E+4},u.prototype.writeBigInt64LE=we(function(w,E=0){return xe(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=we(function(w,E=0){return Ne(this,w,E,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(j,w,E,D,V,Z){if(E+D>j.length)throw new RangeError("Index out of range");if(E<0)throw new RangeError("Index out of range")}function Pe(j,w,E,D,V){return w=+w,E=E>>>0,V||Ie(j,w,E,4),n.write(j,w,E,D,23,4),E+4}u.prototype.writeFloatLE=function(w,E,D){return Pe(this,w,E,!0,D)},u.prototype.writeFloatBE=function(w,E,D){return Pe(this,w,E,!1,D)};function ve(j,w,E,D,V){return w=+w,E=E>>>0,V||Ie(j,w,E,8),n.write(j,w,E,D,52,8),E+8}u.prototype.writeDoubleLE=function(w,E,D){return ve(this,w,E,!0,D)},u.prototype.writeDoubleBE=function(w,E,D){return ve(this,w,E,!1,D)},u.prototype.copy=function(w,E,D,V){if(!u.isBuffer(w))throw new TypeError("argument should be a Buffer");if(D||(D=0),!V&&V!==0&&(V=this.length),E>=w.length&&(E=w.length),E||(E=0),V>0&&V<D&&(V=D),V===D||w.length===0||this.length===0)return 0;if(E<0)throw new RangeError("targetStart out of bounds");if(D<0||D>=this.length)throw new RangeError("Index out of range");if(V<0)throw new RangeError("sourceEnd out of bounds");V>this.length&&(V=this.length),w.length-E<V-D&&(V=w.length-E+D);const Z=V-D;return this===w&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(E,D,V):Uint8Array.prototype.set.call(w,this.subarray(D,V),E),Z},u.prototype.fill=function(w,E,D,V){if(typeof w=="string"){if(typeof E=="string"?(V=E,E=0,D=this.length):typeof D=="string"&&(V=D,D=this.length),V!==void 0&&typeof V!="string")throw new TypeError("encoding must be a string");if(typeof V=="string"&&!u.isEncoding(V))throw new TypeError("Unknown encoding: "+V);if(w.length===1){const ce=w.charCodeAt(0);(V==="utf8"&&ce<128||V==="latin1")&&(w=ce)}}else typeof w=="number"?w=w&255:typeof w=="boolean"&&(w=Number(w));if(E<0||this.length<E||this.length<D)throw new RangeError("Out of range index");if(D<=E)return this;E=E>>>0,D=D===void 0?this.length:D>>>0,w||(w=0);let Z;if(typeof w=="number")for(Z=E;Z<D;++Z)this[Z]=w;else{const ce=u.isBuffer(w)?w:u.from(w,V),Ae=ce.length;if(Ae===0)throw new TypeError('The value "'+w+'" is invalid for argument "value"');for(Z=0;Z<D-E;++Z)this[Z+E]=ce[Z%Ae]}return this};const Le={};function Fe(j,w,E){Le[j]=class extends E{constructor(){super(),Object.defineProperty(this,"message",{value:w.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${j}]`,this.stack,delete this.name}get code(){return j}set code(V){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:V,writable:!0})}toString(){return`${this.name} [${j}]: ${this.message}`}}}Fe("ERR_BUFFER_OUT_OF_BOUNDS",function(j){return j?`${j} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Fe("ERR_INVALID_ARG_TYPE",function(j,w){return`The "${j}" argument must be of type number. Received type ${typeof w}`},TypeError),Fe("ERR_OUT_OF_RANGE",function(j,w,E){let D=`The value of "${j}" is out of range.`,V=E;return Number.isInteger(E)&&Math.abs(E)>2**32?V=Ue(String(E)):typeof E=="bigint"&&(V=String(E),(E>BigInt(2)**BigInt(32)||E<-(BigInt(2)**BigInt(32)))&&(V=Ue(V)),V+="n"),D+=` It must be ${w}. Received ${V}`,D},RangeError);function Ue(j){let w="",E=j.length;const D=j[0]==="-"?1:0;for(;E>=D+4;E-=3)w=`_${j.slice(E-3,E)}${w}`;return`${j.slice(0,E)}${w}`}function Me(j,w,E){q(w,"offset"),(j[w]===void 0||j[w+E]===void 0)&&oe(w,j.length-(E+1))}function $e(j,w,E,D,V,Z){if(j>E||j<w){const ce=typeof w=="bigint"?"n":"";let Ae;throw Z>3?w===0||w===BigInt(0)?Ae=`>= 0${ce} and < 2${ce} ** ${(Z+1)*8}${ce}`:Ae=`>= -(2${ce} ** ${(Z+1)*8-1}${ce}) and < 2 ** ${(Z+1)*8-1}${ce}`:Ae=`>= ${w}${ce} and <= ${E}${ce}`,new Le.ERR_OUT_OF_RANGE("value",Ae,j)}Me(D,V,Z)}function q(j,w){if(typeof j!="number")throw new Le.ERR_INVALID_ARG_TYPE(w,"number",j)}function oe(j,w,E){throw Math.floor(j)!==j?(q(j,E),new Le.ERR_OUT_OF_RANGE(E||"offset","an integer",j)):w<0?new Le.ERR_BUFFER_OUT_OF_BOUNDS:new Le.ERR_OUT_OF_RANGE(E||"offset",`>= ${E?1:0} and <= ${w}`,j)}const Q=/[^+/0-9A-Za-z-_]/g;function Y(j){if(j=j.split("=")[0],j=j.trim().replace(Q,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function ie(j,w){w=w||1/0;let E;const D=j.length;let V=null;const Z=[];for(let ce=0;ce<D;++ce){if(E=j.charCodeAt(ce),E>55295&&E<57344){if(!V){if(E>56319){(w-=3)>-1&&Z.push(239,191,189);continue}else if(ce+1===D){(w-=3)>-1&&Z.push(239,191,189);continue}V=E;continue}if(E<56320){(w-=3)>-1&&Z.push(239,191,189),V=E;continue}E=(V-55296<<10|E-56320)+65536}else V&&(w-=3)>-1&&Z.push(239,191,189);if(V=null,E<128){if((w-=1)<0)break;Z.push(E)}else if(E<2048){if((w-=2)<0)break;Z.push(E>>6|192,E&63|128)}else if(E<65536){if((w-=3)<0)break;Z.push(E>>12|224,E>>6&63|128,E&63|128)}else if(E<1114112){if((w-=4)<0)break;Z.push(E>>18|240,E>>12&63|128,E>>6&63|128,E&63|128)}else throw new Error("Invalid code point")}return Z}function se(j){const w=[];for(let E=0;E<j.length;++E)w.push(j.charCodeAt(E)&255);return w}function le(j,w){let E,D,V;const Z=[];for(let ce=0;ce<j.length&&!((w-=2)<0);++ce)E=j.charCodeAt(ce),D=E>>8,V=E%256,Z.push(V),Z.push(D);return Z}function ne(j){return e.toByteArray(Y(j))}function ue(j,w,E,D){let V;for(V=0;V<D&&!(V+E>=w.length||V>=j.length);++V)w[V+E]=j[V];return V}function de(j,w){return j instanceof w||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===w.name}function pe(j){return j!==j}const be=function(){const j="0123456789abcdef",w=new Array(256);for(let E=0;E<16;++E){const D=E*16;for(let V=0;V<16;++V)w[D+V]=j[E]+j[V]}return w}();function we(j){return typeof BigInt>"u"?Se:j}function Se(){throw new Error("BigInt not supported")}}(buffer)),buffer}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:n}=abstractIterator,o=Symbol("unfix"),d=Symbol("iterator"),h=Symbol("handleOne"),l=Symbol("handleMany"),u=Symbol("callback");class p extends t{constructor(_,S,T,I){super(_,S),this[d]=T,this[o]=I,this[h]=this[h].bind(this),this[l]=this[l].bind(this),this[u]=null}[h](_,S,T){const I=this[u];if(_)return I(_);S!==void 0&&(S=this[o](S)),I(_,S,T)}[l](_,S){const T=this[u];if(_)return T(_);for(const I of S){const P=I[0];P!==void 0&&(I[0]=this[o](P))}T(_,S)}}class g extends e{constructor(_,S,T,I){super(_,S),this[d]=T,this[o]=I,this[h]=this[h].bind(this),this[l]=this[l].bind(this),this[u]=null}[h](_,S){const T=this[u];if(_)return T(_);S!==void 0&&(S=this[o](S)),T(_,S)}[l](_,S){const T=this[u];if(_)return T(_);for(let I=0;I<S.length;I++){const P=S[I];P!==void 0&&(S[I]=this[o](P))}T(_,S)}}class v extends n{constructor(_,S,T){super(_,S),this[d]=T}}for(const b of[p,g])b.prototype._next=function(_){this[u]=_,this[d].next(this[h])},b.prototype._nextv=function(_,S,T){this[u]=T,this[d].nextv(_,S,this[l])},b.prototype._all=function(_,S){this[u]=S,this[d].all(_,this[l])};for(const b of[v])b.prototype._next=function(_){this[d].next(_)},b.prototype._nextv=function(_,S,T){this[d].nextv(_,S,T)},b.prototype._all=function(_,S){this[d].all(_,S)};for(const b of[p,g,v])b.prototype._seek=function(_,S){this[d].seek(_,S)},b.prototype._close=function(_){this[d].close(_)};return abstractSublevelIterator.AbstractSublevelIterator=p,abstractSublevelIterator.AbstractSublevelKeyIterator=g,abstractSublevelIterator.AbstractSublevelValueIterator=v,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const t=moduleError,{Buffer:e}=requireBuffer()||{},{AbstractSublevelIterator:n,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:d}=requireAbstractSublevelIterator(),h=Symbol("prefix"),l=Symbol("upperBound"),u=Symbol("prefixRange"),p=Symbol("parent"),g=Symbol("unfix"),v=new TextEncoder,b={separator:"!"};abstractSublevel=function({AbstractLevel:B}){class L extends B{static defaults(O){if(typeof O=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(O&&O.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return O==null?b:O.separator?O:{...O,separator:"!"}}constructor(O,N,M){const{separator:k,manifest:W,...ae}=L.defaults(M);N=P(N,k);const X=k.charCodeAt(0)+1,G=O[p]||O;if(!v.encode(N).every($=>$>X&&$<127))throw new t(`Prefix must use bytes > ${X} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(_(G,W),ae);const re=(O.prefix||"")+k+N+k,F=re.slice(0,-1)+String.fromCharCode(X);this[p]=G,this[h]=new T(re),this[l]=new T(F),this[g]=new I,this.nextTick=G.nextTick}prefixKey(O,N){if(N==="utf8")return this[h].utf8+O;if(O.byteLength===0)return this[h][N];if(N==="view"){const M=this[h].view,k=new Uint8Array(M.byteLength+O.byteLength);return k.set(M,0),k.set(O,M.byteLength),k}else{const M=this[h].buffer;return e.concat([M,O],M.byteLength+O.byteLength)}}[u](O,N){O.gte!==void 0?O.gte=this.prefixKey(O.gte,N):O.gt!==void 0?O.gt=this.prefixKey(O.gt,N):O.gte=this[h][N],O.lte!==void 0?O.lte=this.prefixKey(O.lte,N):O.lt!==void 0?O.lt=this.prefixKey(O.lt,N):O.lte=this[l][N]}get prefix(){return this[h].utf8}get db(){return this[p]}_open(O,N){this[p].open({passive:!0},N)}_put(O,N,M,k){this[p].put(O,N,M,k)}_get(O,N,M){this[p].get(O,N,M)}_getMany(O,N,M){this[p].getMany(O,N,M)}_del(O,N,M){this[p].del(O,N,M)}_batch(O,N,M){this[p].batch(O,N,M)}_clear(O,N){this[u](O,O.keyEncoding),this[p].clear(O,N)}_iterator(O){this[u](O,O.keyEncoding);const N=this[p].iterator(O),M=this[g].get(this[h].utf8.length,O.keyEncoding);return new n(this,O,N,M)}_keys(O){this[u](O,O.keyEncoding);const N=this[p].keys(O),M=this[g].get(this[h].utf8.length,O.keyEncoding);return new o(this,O,N,M)}_values(O){this[u](O,O.keyEncoding);const N=this[p].values(O);return new d(this,O,N)}}return{AbstractSublevel:L}};const _=function(B,L){return{...B.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...L,encodings:{utf8:S(B,"utf8"),buffer:S(B,"buffer"),view:S(B,"view")}}},S=function(B,L){return B.supports.encodings[L]?B.keyEncoding(L).name===L:!1};class T{constructor(L){this.utf8=L,this.view=v.encode(L),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class I{constructor(){this.cache=new Map}get(L,C){let O=this.cache.get(C);return O===void 0&&(C==="view"?O=function(N,M){return M.subarray(N)}.bind(null,L):O=function(N,M){return M.slice(N)}.bind(null,L),this.cache.set(C,O)),O}}const P=function(B,L){let C=0,O=B.length;for(;C<O&&B[C]===L;)C++;for(;O>C&&B[O-1]===L;)O--;return B.slice(C,O)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=eventsExports,{fromCallback}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$6,rangeOptions$1=rangeOptions_1,kPromise=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop$2=()=>{};let AbstractLevel$1=class extends EventEmitter{constructor(e,n){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");n=getOptions(n);const{keyEncoding:o,valueEncoding:d,passive:h,...l}=n;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=l,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(o||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(d||"utf8");for(const u of this[kTranscoder].encodings())this.supports.encodings[u.commonName]||(this.supports.encodings[u.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop$2)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,n){n=getCallback(e,n),n=fromCallback(n,kPromise),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const o=d=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,d?()=>o(d):o):this[kStatus]!=="open"?n(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:d})):n()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,o):this.nextTick(o):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,d=>{if(d){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),o(d)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),o()})):this[kStatus]==="open"?this.nextTick(o):this.once(kLanded,()=>this.open(e,n)),n[kPromise]}_open(e,n){this.nextTick(n)}close(e){e=fromCallback(e,kPromise);const n=o=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,o?n(o):n):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:o})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const o=d=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),n(d)};this[kCloseResources](()=>{this._close(d=>{if(d)return o(d);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),n()})})}else this[kStatus]==="closed"?this.nextTick(n):this.once(kLanded,()=>this.close(e));return e[kPromise]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let n=this[kResources].size,o=!0;const d=()=>{--n===0&&(o?this.nextTick(e):e())};for(const h of this[kResources])h.close(d);o=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,n,o){if(o=getCallback(n,o),o=fromCallback(o,kPromise),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,n,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];const d=this._checkKey(e);if(d)return this.nextTick(o,d),o[kPromise];const h=this.keyEncoding(n.keyEncoding),l=this.valueEncoding(n.valueEncoding),u=h.format,p=l.format;return(n.keyEncoding!==u||n.valueEncoding!==p)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:p})),this._get(this.prefixKey(h.encode(e),u),n,(g,v)=>{if(g)return(g.code==="LEVEL_NOT_FOUND"||g.notFound||/NotFound/i.test(g))&&(g.code||(g.code="LEVEL_NOT_FOUND"),g.notFound||(g.notFound=!0),g.status||(g.status=404)),o(g);try{v=l.decode(v)}catch(b){return o(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:b}))}o(null,v)}),o[kPromise]}_get(e,n,o){this.nextTick(o,new Error("NotFound"))}getMany(e,n,o){if(o=getCallback(n,o),o=fromCallback(o,kPromise),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,n,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];if(!Array.isArray(e))return this.nextTick(o,new TypeError("The first argument 'keys' must be an array")),o[kPromise];if(e.length===0)return this.nextTick(o,null,[]),o[kPromise];const d=this.keyEncoding(n.keyEncoding),h=this.valueEncoding(n.valueEncoding),l=d.format,u=h.format;(n.keyEncoding!==l||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:u}));const p=new Array(e.length);for(let g=0;g<e.length;g++){const v=e[g],b=this._checkKey(v);if(b)return this.nextTick(o,b),o[kPromise];p[g]=this.prefixKey(d.encode(v),l)}return this._getMany(p,n,(g,v)=>{if(g)return o(g);try{for(let b=0;b<v.length;b++)v[b]!==void 0&&(v[b]=h.decode(v[b]))}catch(b){return o(new ModuleError$1(`Could not decode one or more of ${v.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:b}))}o(null,v)}),o[kPromise]}_getMany(e,n,o){this.nextTick(o,null,new Array(e.length).fill(void 0))}put(e,n,o,d){if(d=getCallback(o,d),d=fromCallback(d,kPromise),o=getOptions(o,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,n,o,d)),d[kPromise];if(maybeError(this,d))return d[kPromise];const h=this._checkKey(e)||this._checkValue(n);if(h)return this.nextTick(d,h),d[kPromise];const l=this.keyEncoding(o.keyEncoding),u=this.valueEncoding(o.valueEncoding),p=l.format,g=u.format;(o.keyEncoding!==p||o.valueEncoding!==g)&&(o=Object.assign({},o,{keyEncoding:p,valueEncoding:g}));const v=this.prefixKey(l.encode(e),p),b=u.encode(n);return this._put(v,b,o,_=>{if(_)return d(_);this.emit("put",e,n),d()}),d[kPromise]}_put(e,n,o,d){this.nextTick(d)}del(e,n,o){if(o=getCallback(n,o),o=fromCallback(o,kPromise),n=getOptions(n,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,n,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];const d=this._checkKey(e);if(d)return this.nextTick(o,d),o[kPromise];const h=this.keyEncoding(n.keyEncoding),l=h.format;return n.keyEncoding!==l&&(n=Object.assign({},n,{keyEncoding:l})),this._del(this.prefixKey(h.encode(e),l),n,u=>{if(u)return o(u);this.emit("del",e),o()}),o[kPromise]}_del(e,n,o){this.nextTick(o)}batch(e,n,o){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?o=e:o=getCallback(n,o),o=fromCallback(o,kPromise),n=getOptions(n,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,n,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];if(!Array.isArray(e))return this.nextTick(o,new TypeError("The first argument 'operations' must be an array")),o[kPromise];if(e.length===0)return this.nextTick(o),o[kPromise];const d=new Array(e.length),{keyEncoding:h,valueEncoding:l,...u}=n;for(let p=0;p<e.length;p++){if(typeof e[p]!="object"||e[p]===null)return this.nextTick(o,new TypeError("A batch operation must be an object")),o[kPromise];const g=Object.assign({},e[p]);if(g.type!=="put"&&g.type!=="del")return this.nextTick(o,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),o[kPromise];const v=this._checkKey(g.key);if(v)return this.nextTick(o,v),o[kPromise];const b=g.sublevel!=null?g.sublevel:this,_=b.keyEncoding(g.keyEncoding||h),S=_.format;if(g.key=b.prefixKey(_.encode(g.key),S),g.keyEncoding=S,g.type==="put"){const T=this._checkValue(g.value);if(T)return this.nextTick(o,T),o[kPromise];const I=b.valueEncoding(g.valueEncoding||l);g.value=I.encode(g.value),g.valueEncoding=I.format}b!==this&&(g.sublevel=null),d[p]=g}return this._batch(d,u,p=>{if(p)return o(p);this.emit("batch",e),o()}),o[kPromise]}_batch(e,n,o){this.nextTick(o)}sublevel(e,n){return this._sublevel(e,AbstractSublevel.defaults(n))}_sublevel(e,n){return new AbstractSublevel(this,e,n)}prefixKey(e,n){return e}clear(e,n){if(n=getCallback(e,n),n=fromCallback(n,kPromise),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,n)),n[kPromise];if(maybeError(this,n))return n[kPromise];const o=e,d=this.keyEncoding(e.keyEncoding);return e=rangeOptions$1(e,d),e.keyEncoding=d.format,e.limit===0?this.nextTick(n):this._clear(e,h=>{if(h)return n(h);this.emit("clear",o),n()}),n[kPromise]}_clear(e,n){this.nextTick(n)}iterator(e){const n=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,n),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=n.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const n=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=n.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const n=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=n.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const n of e)n()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(t,e){return t[kStatus]!=="open"?(t.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;var rbtree=createRBTree,RED=0,BLACK=1;function RBNode(t,e,n,o,d,h){this._color=t,this.key=e,this.value=n,this.left=o,this.right=d,this._count=h}function cloneNode(t){return new RBNode(t._color,t.key,t.value,t.left,t.right,t._count)}function repaint(t,e){return new RBNode(t,e.key,e.value,e.left,e.right,e._count)}function recount(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function RedBlackTree(t,e){this._compare=t,this.root=e}var proto=RedBlackTree.prototype;Object.defineProperty(proto,"keys",{get:function(){var t=[];return this.forEach(function(e,n){t.push(e)}),t}});Object.defineProperty(proto,"values",{get:function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t}});Object.defineProperty(proto,"length",{get:function(){return this.root?this.root._count:0}});proto.insert=function(t,e){for(var n=this._compare,o=this.root,d=[],h=[];o;){var l=n(t,o.key);d.push(o),h.push(l),l<=0?o=o.left:o=o.right}d.push(new RBNode(RED,t,e,null,null,1));for(var u=d.length-2;u>=0;--u){var o=d[u];h[u]<=0?d[u]=new RBNode(o._color,o.key,o.value,d[u+1],o.right,o._count+1):d[u]=new RBNode(o._color,o.key,o.value,o.left,d[u+1],o._count+1)}for(var u=d.length-1;u>1;--u){var p=d[u-1],o=d[u];if(p._color===BLACK||o._color===BLACK)break;var g=d[u-2];if(g.left===p)if(p.left===o){var v=g.right;if(v&&v._color===RED)p._color=BLACK,g.right=repaint(BLACK,v),g._color=RED,u-=1;else{if(g._color=RED,g.left=p.right,p._color=BLACK,p.right=g,d[u-2]=p,d[u-1]=o,recount(g),recount(p),u>=3){var b=d[u-3];b.left===g?b.left=p:b.right=p}break}}else{var v=g.right;if(v&&v._color===RED)p._color=BLACK,g.right=repaint(BLACK,v),g._color=RED,u-=1;else{if(p.right=o.left,g._color=RED,g.left=o.right,o._color=BLACK,o.left=p,o.right=g,d[u-2]=o,d[u-1]=p,recount(g),recount(p),recount(o),u>=3){var b=d[u-3];b.left===g?b.left=o:b.right=o}break}}else if(p.right===o){var v=g.left;if(v&&v._color===RED)p._color=BLACK,g.left=repaint(BLACK,v),g._color=RED,u-=1;else{if(g._color=RED,g.right=p.left,p._color=BLACK,p.left=g,d[u-2]=p,d[u-1]=o,recount(g),recount(p),u>=3){var b=d[u-3];b.right===g?b.right=p:b.left=p}break}}else{var v=g.left;if(v&&v._color===RED)p._color=BLACK,g.left=repaint(BLACK,v),g._color=RED,u-=1;else{if(p.left=o.right,g._color=RED,g.right=o.left,o._color=BLACK,o.right=p,o.left=g,d[u-2]=o,d[u-1]=p,recount(g),recount(p),recount(o),u>=3){var b=d[u-3];b.right===g?b.right=o:b.left=o}break}}}return d[0]._color=BLACK,new RedBlackTree(n,d[0])};function doVisitFull(t,e){if(e.left){var n=doVisitFull(t,e.left);if(n)return n}var n=t(e.key,e.value);if(n)return n;if(e.right)return doVisitFull(t,e.right)}function doVisitHalf(t,e,n,o){var d=e(t,o.key);if(d<=0){if(o.left){var h=doVisitHalf(t,e,n,o.left);if(h)return h}var h=n(o.key,o.value);if(h)return h}if(o.right)return doVisitHalf(t,e,n,o.right)}function doVisit(t,e,n,o,d){var h=n(t,d.key),l=n(e,d.key),u;if(h<=0&&(d.left&&(u=doVisit(t,e,n,o,d.left),u)||l>0&&(u=o(d.key,d.value),u)))return u;if(l>0&&d.right)return doVisit(t,e,n,o,d.right)}proto.forEach=function(e,n,o){if(this.root)switch(arguments.length){case 1:return doVisitFull(e,this.root);case 2:return doVisitHalf(n,this._compare,e,this.root);case 3:return this._compare(n,o)>=0?void 0:doVisit(n,o,this._compare,e,this.root)}};Object.defineProperty(proto,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new RedBlackTreeIterator(this,t)}});Object.defineProperty(proto,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new RedBlackTreeIterator(this,t)}});proto.at=function(t){if(t<0)return new RedBlackTreeIterator(this,[]);for(var e=this.root,n=[];;){if(n.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new RedBlackTreeIterator(this,n);if(t-=1,e.right){if(t>=e.right._count)break;e=e.right}else break}return new RedBlackTreeIterator(this,[])};proto.ge=function(t){for(var e=this._compare,n=this.root,o=[],d=0;n;){var h=e(t,n.key);o.push(n),h<=0&&(d=o.length),h<=0?n=n.left:n=n.right}return o.length=d,new RedBlackTreeIterator(this,o)};proto.gt=function(t){for(var e=this._compare,n=this.root,o=[],d=0;n;){var h=e(t,n.key);o.push(n),h<0&&(d=o.length),h<0?n=n.left:n=n.right}return o.length=d,new RedBlackTreeIterator(this,o)};proto.lt=function(t){for(var e=this._compare,n=this.root,o=[],d=0;n;){var h=e(t,n.key);o.push(n),h>0&&(d=o.length),h<=0?n=n.left:n=n.right}return o.length=d,new RedBlackTreeIterator(this,o)};proto.le=function(t){for(var e=this._compare,n=this.root,o=[],d=0;n;){var h=e(t,n.key);o.push(n),h>=0&&(d=o.length),h<0?n=n.left:n=n.right}return o.length=d,new RedBlackTreeIterator(this,o)};proto.find=function(t){for(var e=this._compare,n=this.root,o=[];n;){var d=e(t,n.key);if(o.push(n),d===0)return new RedBlackTreeIterator(this,o);d<=0?n=n.left:n=n.right}return new RedBlackTreeIterator(this,[])};proto.remove=function(t){var e=this.find(t);return e?e.remove():this};proto.get=function(t){for(var e=this._compare,n=this.root;n;){var o=e(t,n.key);if(o===0)return n.value;o<=0?n=n.left:n=n.right}};function RedBlackTreeIterator(t,e){this.tree=t,this._stack=e}var iproto=RedBlackTreeIterator.prototype;Object.defineProperty(iproto,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(iproto,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});iproto.clone=function(){return new RedBlackTreeIterator(this.tree,this._stack.slice())};function swapNode(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function fixDoubleBlack(t){for(var e,n,o,d,h=t.length-1;h>=0;--h){if(e=t[h],h===0){e._color=BLACK;return}if(n=t[h-1],n.left===e){if(o=n.right,o.right&&o.right._color===RED){if(o=n.right=cloneNode(o),d=o.right=cloneNode(o.right),n.right=o.left,o.left=n,o.right=d,o._color=n._color,e._color=BLACK,n._color=BLACK,d._color=BLACK,recount(n),recount(o),h>1){var l=t[h-2];l.left===n?l.left=o:l.right=o}t[h-1]=o;return}else if(o.left&&o.left._color===RED){if(o=n.right=cloneNode(o),d=o.left=cloneNode(o.left),n.right=d.left,o.left=d.right,d.left=n,d.right=o,d._color=n._color,n._color=BLACK,o._color=BLACK,e._color=BLACK,recount(n),recount(o),recount(d),h>1){var l=t[h-2];l.left===n?l.left=d:l.right=d}t[h-1]=d;return}if(o._color===BLACK)if(n._color===RED){n._color=BLACK,n.right=repaint(RED,o);return}else{n.right=repaint(RED,o);continue}else{if(o=cloneNode(o),n.right=o.left,o.left=n,o._color=n._color,n._color=RED,recount(n),recount(o),h>1){var l=t[h-2];l.left===n?l.left=o:l.right=o}t[h-1]=o,t[h]=n,h+1<t.length?t[h+1]=e:t.push(e),h=h+2}}else{if(o=n.left,o.left&&o.left._color===RED){if(o=n.left=cloneNode(o),d=o.left=cloneNode(o.left),n.left=o.right,o.right=n,o.left=d,o._color=n._color,e._color=BLACK,n._color=BLACK,d._color=BLACK,recount(n),recount(o),h>1){var l=t[h-2];l.right===n?l.right=o:l.left=o}t[h-1]=o;return}else if(o.right&&o.right._color===RED){if(o=n.left=cloneNode(o),d=o.right=cloneNode(o.right),n.left=d.right,o.right=d.left,d.right=n,d.left=o,d._color=n._color,n._color=BLACK,o._color=BLACK,e._color=BLACK,recount(n),recount(o),recount(d),h>1){var l=t[h-2];l.right===n?l.right=d:l.left=d}t[h-1]=d;return}if(o._color===BLACK)if(n._color===RED){n._color=BLACK,n.left=repaint(RED,o);return}else{n.left=repaint(RED,o);continue}else{if(o=cloneNode(o),n.left=o.right,o.right=n,o._color=n._color,n._color=RED,recount(n),recount(o),h>1){var l=t[h-2];l.right===n?l.right=o:l.left=o}t[h-1]=o,t[h]=n,h+1<t.length?t[h+1]=e:t.push(e),h=h+2}}}}iproto.remove=function(){var t=this._stack;if(t.length===0)return this.tree;var e=new Array(t.length),n=t[t.length-1];e[e.length-1]=new RBNode(n._color,n.key,n.value,n.left,n.right,n._count);for(var o=t.length-2;o>=0;--o){var n=t[o];n.left===t[o+1]?e[o]=new RBNode(n._color,n.key,n.value,e[o+1],n.right,n._count):e[o]=new RBNode(n._color,n.key,n.value,n.left,e[o+1],n._count)}if(n=e[e.length-1],n.left&&n.right){var d=e.length;for(n=n.left;n.right;)e.push(n),n=n.right;var h=e[d-1];e.push(new RBNode(n._color,h.key,h.value,n.left,n.right,n._count)),e[d-1].key=n.key,e[d-1].value=n.value;for(var o=e.length-2;o>=d;--o)n=e[o],e[o]=new RBNode(n._color,n.key,n.value,n.left,e[o+1],n._count);e[d-1].left=e[d]}if(n=e[e.length-1],n._color===RED){var l=e[e.length-2];l.left===n?l.left=null:l.right===n&&(l.right=null),e.pop();for(var o=0;o<e.length;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}else if(n.left||n.right){n.left?swapNode(n,n.left):n.right&&swapNode(n,n.right),n._color=BLACK;for(var o=0;o<e.length-1;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}else{if(e.length===1)return new RedBlackTree(this.tree._compare,null);for(var o=0;o<e.length;++o)e[o]._count--;var u=e[e.length-2];fixDoubleBlack(e),u.left===n?u.left=null:u.right=null}return new RedBlackTree(this.tree._compare,e[0])};Object.defineProperty(iproto,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(iproto,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(iproto,"index",{get:function(){var t=0,e=this._stack;if(e.length===0){var n=this.tree.root;return n?n._count:0}else e[e.length-1].left&&(t=e[e.length-1].left._count);for(var o=e.length-2;o>=0;--o)e[o+1]===e[o].right&&(++t,e[o].left&&(t+=e[o].left._count));return t},enumerable:!0});iproto.next=function(){var t=this._stack;if(t.length!==0){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}};Object.defineProperty(iproto,"hasNext",{get:function(){var t=this._stack;if(t.length===0)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}});iproto.update=function(t){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var n=new Array(e.length),o=e[e.length-1];n[n.length-1]=new RBNode(o._color,o.key,t,o.left,o.right,o._count);for(var d=e.length-2;d>=0;--d)o=e[d],o.left===e[d+1]?n[d]=new RBNode(o._color,o.key,o.value,n[d+1],o.right,o._count):n[d]=new RBNode(o._color,o.key,o.value,o.left,n[d+1],o._count);return new RedBlackTree(this.tree._compare,n[0])};iproto.prev=function(){var t=this._stack;if(t.length!==0){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}};Object.defineProperty(iproto,"hasPrev",{get:function(){var t=this._stack;if(t.length===0)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}});function defaultCompare(t,e){return t<e?-1:t>e?1:0}function createRBTree(t){return new RedBlackTree(t||defaultCompare,null)}const{AbstractLevel,AbstractIterator,AbstractKeyIterator,AbstractValueIterator}=abstractLevel$1,ModuleError=moduleError,createRBT=rbtree,rangeOptions=new Set(["gt","gte","lt","lte"]),kNone=Symbol("none"),kTree=Symbol("tree"),kIterator=Symbol("iterator"),kLowerBound=Symbol("lowerBound"),kUpperBound=Symbol("upperBound"),kOutOfRange=Symbol("outOfRange"),kReverse=Symbol("reverse"),kOptions=Symbol("options"),kTest=Symbol("test"),kAdvance=Symbol("advance"),kInit=Symbol("init");function compare(t,e){if(typeof t=="string")return t<e?-1:t>e?1:0;const n=Math.min(t.byteLength,e.byteLength);for(let o=0;o<n;o++){const d=t[o]-e[o];if(d!==0)return d}return t.byteLength-e.byteLength}function gt(t){return compare(t,this[kUpperBound])>0}function gte(t){return compare(t,this[kUpperBound])>=0}function lt(t){return compare(t,this[kUpperBound])<0}function lte(t){return compare(t,this[kUpperBound])<=0}class MemoryIterator extends AbstractIterator{constructor(e,n){super(e,n),this[kInit](e[kTree],n)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const n=this[kIterator].key,o=this[kIterator].value;if(!this[kTest](n))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,n,o)}_nextv(e,n,o){const d=this[kIterator],h=[];for(;d.valid&&h.length<e&&this[kTest](d.key);)h.push([d.key,d.value]),d[this[kAdvance]]();this.nextTick(o,null,h)}_all(e,n){const o=this.limit-this.count,d=this[kIterator],h=[];for(;d.valid&&h.length<o&&this[kTest](d.key);)h.push([d.key,d.value]),d[this[kAdvance]]();this.nextTick(n,null,h)}}class MemoryKeyIterator extends AbstractKeyIterator{constructor(e,n){super(e,n),this[kInit](e[kTree],n)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const n=this[kIterator].key;if(!this[kTest](n))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,n)}_nextv(e,n,o){const d=this[kIterator],h=[];for(;d.valid&&h.length<e&&this[kTest](d.key);)h.push(d.key),d[this[kAdvance]]();this.nextTick(o,null,h)}_all(e,n){const o=this.limit-this.count,d=this[kIterator],h=[];for(;d.valid&&h.length<o&&this[kTest](d.key);)h.push(d.key),d[this[kAdvance]]();this.nextTick(n,null,h)}}class MemoryValueIterator extends AbstractValueIterator{constructor(e,n){super(e,n),this[kInit](e[kTree],n)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const n=this[kIterator].key,o=this[kIterator].value;if(!this[kTest](n))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,o)}_nextv(e,n,o){const d=this[kIterator],h=[];for(;d.valid&&h.length<e&&this[kTest](d.key);)h.push(d.value),d[this[kAdvance]]();this.nextTick(o,null,h)}_all(e,n){const o=this.limit-this.count,d=this[kIterator],h=[];for(;d.valid&&h.length<o&&this[kTest](d.key);)h.push(d.value),d[this[kAdvance]]();this.nextTick(n,null,h)}}for(const t of[MemoryIterator,MemoryKeyIterator,MemoryValueIterator])t.prototype[kInit]=function(e,n){this[kReverse]=n.reverse,this[kOptions]=n,this[kReverse]?(this[kAdvance]="prev",this[kLowerBound]="lte"in n?n.lte:"lt"in n?n.lt:kNone,this[kUpperBound]="gte"in n?n.gte:"gt"in n?n.gt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.end:"lte"in n?this[kIterator]=e.le(this[kLowerBound]):this[kIterator]=e.lt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="gte"in n?gte:gt)):(this[kAdvance]="next",this[kLowerBound]="gte"in n?n.gte:"gt"in n?n.gt:kNone,this[kUpperBound]="lte"in n?n.lte:"lt"in n?n.lt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.begin:"gte"in n?this[kIterator]=e.ge(this[kLowerBound]):this[kIterator]=e.gt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="lte"in n?lte:lt))},t.prototype[kTest]=function(){return!0},t.prototype[kOutOfRange]=function(e){return this[kTest](e)?this[kLowerBound]===kNone?!1:this[kReverse]?"lte"in this[kOptions]?compare(e,this[kLowerBound])>0:compare(e,this[kLowerBound])>=0:"gte"in this[kOptions]?compare(e,this[kLowerBound])<0:compare(e,this[kLowerBound])<=0:!0},t.prototype._seek=function(e,n){this[kOutOfRange](e)?(this[kIterator]=this[kIterator].tree.end,this[kIterator].next()):this[kReverse]?this[kIterator]=this[kIterator].tree.le(e):this[kIterator]=this[kIterator].tree.ge(e)};class MemoryLevel extends AbstractLevel{constructor(e,n,o){if(typeof e=="object"&&e!==null&&(n=e),typeof e=="function"||typeof n=="function"||typeof o=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{storeEncoding:d,...h}=n||{};if(d=d||"buffer",!["buffer","view","utf8"].includes(d))throw new ModuleError("The storeEncoding option must be 'buffer', 'view' or 'utf8'",{code:"LEVEL_ENCODING_NOT_SUPPORTED"});super({seek:!0,permanence:!1,createIfMissing:!1,errorIfExists:!1,encodings:{[d]:!0}},h),this[kTree]=createRBT(compare)}_put(e,n,o,d){const h=this[kTree].find(e);h.valid?this[kTree]=h.update(n):this[kTree]=this[kTree].insert(e,n),this.nextTick(d)}_get(e,n,o){const d=this[kTree].get(e);if(typeof d>"u")return this.nextTick(o,new Error("NotFound"));this.nextTick(o,null,d)}_getMany(e,n,o){this.nextTick(o,null,e.map(d=>this[kTree].get(d)))}_del(e,n,o){this[kTree]=this[kTree].remove(e),this.nextTick(o)}_batch(e,n,o){let d=this[kTree];for(const h of e){const l=h.key,u=d.find(l);h.type==="put"?d=u.valid?u.update(h.value):d.insert(l,h.value):d=u.remove()}this[kTree]=d,this.nextTick(o)}_clear(e,n){if(e.limit===-1&&!Object.keys(e).some(isRangeOption))return this[kTree]=createRBT(compare),this.nextTick(n);const o=this._keys({...e}),d=o.limit;let h=0;const l=()=>{for(let u=0;u<500;u++){if(++h>d||!o[kIterator].valid||!o[kTest](o[kIterator].key))return n();this[kTree]=this[kTree].remove(o[kIterator].key),o[kIterator][o[kAdvance]]()}this.nextTick(l)};this.nextTick(l)}_iterator(e){return new MemoryIterator(this,e)}_keys(e){return new MemoryKeyIterator(this,e)}_values(e){return new MemoryValueIterator(this,e)}}var MemoryLevel_1=MemoryLevel;if(typeof process<"u"&&!process.browser&&typeof commonjsGlobal<"u"&&typeof commonjsGlobal.setImmediate=="function"){const t=commonjsGlobal.setImmediate;MemoryLevel.prototype.nextTick=function(e,...n){n.length===0?t(e):t(()=>e(...n))}}function isRangeOption(t){return rangeOptions.has(t)}var rdfDataFactory={},BlankNode$1={};Object.defineProperty(BlankNode$1,"__esModule",{value:!0});BlankNode$1.BlankNode=void 0;class BlankNode{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}BlankNode$1.BlankNode=BlankNode;var DataFactory$2={},DefaultGraph$1={};Object.defineProperty(DefaultGraph$1,"__esModule",{value:!0});DefaultGraph$1.DefaultGraph=void 0;class DefaultGraph{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}}DefaultGraph$1.DefaultGraph=DefaultGraph;DefaultGraph.INSTANCE=new DefaultGraph;var Literal$1={},NamedNode$1={};Object.defineProperty(NamedNode$1,"__esModule",{value:!0});NamedNode$1.NamedNode=void 0;class NamedNode{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}}NamedNode$1.NamedNode=NamedNode;Object.defineProperty(Literal$1,"__esModule",{value:!0});Literal$1.Literal=void 0;const NamedNode_1$1=NamedNode$1;class Literal{constructor(e,n){this.termType="Literal",this.value=e,typeof n=="string"?(this.language=n,this.datatype=Literal.RDF_LANGUAGE_STRING):n?(this.language="",this.datatype=n):(this.language="",this.datatype=Literal.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}Literal$1.Literal=Literal;Literal.RDF_LANGUAGE_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Literal.XSD_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/2001/XMLSchema#string");var Quad$2={};Object.defineProperty(Quad$2,"__esModule",{value:!0});Quad$2.Quad=void 0;let Quad$1=class{constructor(e,n,o,d){this.termType="Quad",this.value="",this.subject=e,this.predicate=n,this.object=o,this.graph=d}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};Quad$2.Quad=Quad$1;var Variable$1={};Object.defineProperty(Variable$1,"__esModule",{value:!0});Variable$1.Variable=void 0;class Variable{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}}Variable$1.Variable=Variable;Object.defineProperty(DataFactory$2,"__esModule",{value:!0});DataFactory$2.DataFactory=void 0;const BlankNode_1=BlankNode$1,DefaultGraph_1=DefaultGraph$1,Literal_1=Literal$1,NamedNode_1=NamedNode$1,Quad_1=Quad$2,Variable_1=Variable$1;let dataFactoryCounter=0,DataFactory$1=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${dataFactoryCounter++}_`}namedNode(e){return new NamedNode_1.NamedNode(e)}blankNode(e){return new BlankNode_1.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,n){return new Literal_1.Literal(e,n)}variable(e){return new Variable_1.Variable(e)}defaultGraph(){return DefaultGraph_1.DefaultGraph.INSTANCE}quad(e,n,o,d){return new Quad_1.Quad(e,n,o,d||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(Literal_1.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};DataFactory$2.DataFactory=DataFactory$1;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,d,h,l){l===void 0&&(l=h),Object.defineProperty(o,l,{enumerable:!0,get:function(){return d[h]}})}:function(o,d,h,l){l===void 0&&(l=h),o[l]=d[h]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,d){for(var h in o)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,o,h)};Object.defineProperty(t,"__esModule",{value:!0}),n(BlankNode$1,t),n(DataFactory$2,t),n(DefaultGraph$1,t),n(Literal$1,t),n(NamedNode$1,t),n(Quad$2,t),n(Variable$1,t)})(rdfDataFactory);var ResultType;(function(t){t.VOID="void",t.QUADS="quads",t.APPROXIMATE_SIZE="approximate_size"})(ResultType||(ResultType={}));class LinkedList{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}get empty(){return this._head===null}push(e){const n={value:e,next:null};this._tail===null?this._head=this._tail=n:this._tail.next=this._tail=n,this._length++}shift(){if(this._head===null)return;const{value:e,next:n}=this._head;return this._head=n,n===null&&(this._tail=null),this._length--,e}clear(){this._length=0,this._head=this._tail=null}}const resolved=Promise.resolve(void 0);function createTaskScheduler(){const t=typeof queueMicrotask=="function"?queueMicrotask:d=>resolved.then(d),e=typeof setImmediate=="function"?setImmediate:d=>setTimeout(d,0);let n=0,o=null;return d=>{o!==null?o.push(d):++n<100?t(d):(o=[d],e(()=>{for(const h of o)t(h);o=null,n=0}))}}let taskScheduler=createTaskScheduler();function scheduleTask(t){taskScheduler(t)}function getTaskScheduler(){return taskScheduler}function setTaskScheduler(t){taskScheduler=t}const INIT=1<<0,OPEN=1<<1,CLOSING=1<<2,CLOSED=1<<3,ENDED=1<<4,DESTROYED=1<<5;class AsyncIterator extends eventsExports.EventEmitter{constructor(e=OPEN){super(),this._readable=!1,this._state=e,this.on("newListener",waitForDataListener)}_changeState(e,n=!1){const o=e>this._state&&this._state<ENDED;return o&&(this._state=e,e===ENDED&&(n?taskScheduler(()=>this.emit("end")):this.emit("end"))),o}read(){return null}forEach(e,n){this.on("data",bind(e,n))}close(){this._changeState(CLOSED)&&this._endAsync()}destroy(e){this.done||this._destroy(e,n=>{e=e||n,e&&this.emit("error",e),this._end(!0)})}_destroy(e,n){n()}_end(e=!1){this._changeState(e?DESTROYED:ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){taskScheduler(()=>this._end())}get readable(){return this._readable}set readable(e){e=!!e&&!this.done,this._readable!==e&&(this._readable=e,e&&taskScheduler(()=>this.emit("readable")))}get closed(){return this._state>=CLOSING}get ended(){return this._state===ENDED}get destroyed(){return this._state===DESTROYED}get done(){return this._state>=ENDED}toString(){const e=this._toStringDetails();return`[${this.constructor.name}${e?` ${e}`:""}]`}_toStringDetails(){return""}toArray(e){const n=[],o=typeof e?.limit=="number"?e.limit:1/0;return this.ended||o<=0?Promise.resolve(n):new Promise((d,h)=>{const l=()=>d(n),u=p=>{n.push(p),n.length>=o&&(this.removeListener("error",h),this.removeListener("data",u),this.removeListener("end",l),d(n))};this.on("error",h),this.on("data",u),this.on("end",l)})}getProperty(e,n){const o=this._properties;if(!n)return o&&o[e];if(o&&e in o)taskScheduler(()=>n(o[e]));else{let d;(d=this._propertyCallbacks)||(this._propertyCallbacks=d=Object.create(null)),e in d?d[e].push(n):d[e]=[n]}}setProperty(e,n){const o=this._properties||(this._properties=Object.create(null));o[e]=n;const d=this._propertyCallbacks||{},h=d[e];if(h){delete d[e],taskScheduler(()=>{for(const l of h)l(n)});for(e in d)return;delete this._propertyCallbacks}}getProperties(){const e=this._properties,n={};for(const o in e)n[o]=e[o];return n}setProperties(e){for(const n in e)this.setProperty(n,e[n])}copyProperties(e,n){for(const o of n)e.getProperty(o,d=>this.setProperty(o,d))}transform(e){return new SimpleTransformIterator(this,e)}map(e,n){return new MappingIterator(this,bind(e,n))}filter(e,n){return this.map(function(o){return e.call(n||this,o)?o:null})}uniq(e=identity$2){const n=new Set;return this.filter(function(o){const d=e.call(this,o);return n.has(d)?!1:(n.add(d),!0)})}prepend(e){return this.transform({prepend:e})}append(e){return this.transform({append:e})}surround(e,n){return this.transform({prepend:e,append:n})}skip(e){return this.map(n=>e-- >0?null:n)}take(e){return this.transform({limit:e})}range(e,n){return this.transform({offset:e,limit:Math.max(n-e+1,0)})}clone(){return new ClonedIterator(this)}}function waitForDataListener(t){t==="data"&&(this.removeListener("newListener",waitForDataListener),addSingleListener(this,"readable",emitData),this.readable&&taskScheduler(()=>emitData.call(this)))}function emitData(){let t;for(;this.listenerCount("data")!==0&&(t=this.read())!==null;)this.emit("data",t);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",emitData),addSingleListener(this,"newListener",waitForDataListener))}function addSingleListener(t,e,n){t.listeners(e).includes(n)||t.on(e,n)}class EmptyIterator extends AsyncIterator{constructor(){super(),this._changeState(ENDED,!0)}}class SingletonIterator extends AsyncIterator{constructor(e){super(),this._item=e,e===null?this.close():this.readable=!0}read(){const e=this._item;return this._item=null,this.close(),e}_toStringDetails(){return this._item===null?"":`(${this._item})`}}class ArrayIterator extends AsyncIterator{constructor(e=[],{autoStart:n=!0,preserve:o=!0}={}){super();const d=o||!Array.isArray(e)?[...e]:e;this._index=0,this._sourceStarted=n!==!1,this._truncateThreshold=o?-1:64,this._sourceStarted&&d.length===0?this.close():this._buffer=d,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let e=null;return this._buffer&&(this._index<this._buffer.length&&(e=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),e}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(e,n){delete this._buffer,n()}toArray(e={}){if(!this._buffer)return Promise.resolve([]);const{length:n}=this._buffer,o=this._index,d=typeof e.limit!="number"?n:o+e.limit,h=this._buffer.slice(o,d);return this._index=d,d>=n&&this.close(),Promise.resolve(h)}}class IntegerIterator extends AsyncIterator{constructor({start:e=0,step:n=1,end:o}={}){super(),Number.isFinite(e)&&(e=Math.trunc(e)),this._next=e,Number.isFinite(n)&&(n=Math.trunc(n)),this._step=n;const d=n>=0,h=d?1/0:-1/0;Number.isFinite(o)?o=Math.trunc(o):o!==-h&&(o=h),this._last=o,!Number.isFinite(e)||(d?e>o:e<o)?this.close():this.readable=!0}read(){if(this.closed)return null;const e=this._next,n=this._step,o=this._last,d=this._next+=n;return(n>=0?d>o:d<o)&&this.close(),e}_toStringDetails(){return`(${this._next}...${this._last})`}}function identity$2(t){return t}const DESTINATION=Symbol("destination");class MappingIterator extends AsyncIterator{constructor(e,n=identity$2,o={}){super(),this._map=n,this._source=ensureSourceAvailable(e),this._destroySource=o.destroySource!==!1,e.done?this.close():(this._source[DESTINATION]=this,this._source.on("end",destinationClose),this._source.on("error",destinationEmitError),this._source.on("readable",destinationSetReadable),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let e,n;for(;(e=this._source.read())!==null;)if((n=this._map(e))!==null)return n}this.readable=!1,this._source.done&&this.close()}return null}_end(e){this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&this._source.destroy(),super._end(e)}}function ensureSourceAvailable(t,e=!1){if(!t||!isFunction(t.read)||!isFunction(t.on))throw new TypeError(`Invalid source: ${t}`);if(!e&&t[DESTINATION])throw new Error("The source already has a destination");return t}class BufferedIterator extends AsyncIterator{constructor({maxBufferSize:e=4,autoStart:n=!0}={}){super(INIT),this._buffer=new LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=e,taskScheduler(()=>this._init(n)),this._sourceStarted=n!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(e){e!==1/0&&(e=Number.isFinite(e)?Math.max(Math.trunc(e),1):4),this._maxBufferSize!==e&&(this._maxBufferSize=e,this._state===OPEN&&this._fillBuffer())}_init(e){let n=!1;this._reading=!0,this._begin(()=>{if(n)throw new Error("done callback called multiple times");n=!0,this._reading=!1,this._changeState(OPEN),e?this._fillBufferAsync():this.readable=!0})}_begin(e){e()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const e=this._buffer;let n;return e.empty?(n=null,this.readable=!1):n=e.shift(),!this._reading&&e.length<this._maxBufferSize&&(this.closed?e.empty&&this._endAsync():this._fillBufferAsync()),n}_read(e,n){n()}_push(e){this.done||(this._pushedCount++,this._buffer.push(e),this.readable=!0)}_fillBuffer(){let e;this._reading||(this.closed?this._completeClose():(e=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(e,()=>{if(!e)throw new Error("done callback called multiple times");e=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,taskScheduler(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(CLOSING):this._completeClose()}_completeClose(){this._changeState(CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(e,n){this._buffer.clear(),n()}_flush(e){e()}_toStringDetails(){const e=this._buffer;return`{${e.empty?"":`next: ${e.first}, `}buffer: ${e.length}}`}}class TransformIterator extends BufferedIterator{constructor(e,n=e||{}){super(n),this._boundPush=o=>this._push(o),isSourceExpression(e)||(e=n.source),isEventEmitter(e)?this.source=e:e&&(this._createSource=isPromise(e)?()=>e:e,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!n.optional,this._destroySource=n.destroySource!==!1}get source(){return isFunction(this._createSource)&&this._loadSourceAsync(),this._source}set source(e){const n=this._source=this._validateSource(e);n[DESTINATION]=this,this.done?this._destroySource&&n.destroy():n.done?this.close():(n.on("end",destinationCloseWhenDone),n.on("readable",destinationFillBuffer),n.on("error",destinationEmitError))}_loadSourceAsync(){isFunction(this._createSource)&&(Promise.resolve(this._createSource()).then(e=>{delete this._createSource,this.source=e,this._fillBuffer()},e=>this.emit("error",e)),this._createSource=null)}_validateSource(e,n=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return ensureSourceAvailable(e,n)}_read(e,n){const o=()=>{this._pushedCount<e&&!this.closed?taskScheduler(()=>this._readAndTransform(o,n)):n()};this._readAndTransform(o,n)}_readAndTransform(e,n){let o;const d=this.source;!d||d.done||(o=d.read())===null?n():this._optional?this._optionalTransform(o,e):this._transform(o,e,this._boundPush)}_optionalTransform(e,n){const o=this._pushedCount;this._transform(e,()=>{o===this._pushedCount&&this._push(e),n()},this._boundPush)}_transform(e,n,o){o(e),n()}_closeWhenDone(){this.close()}_end(e){const n=this._source;n&&(n.removeListener("end",destinationCloseWhenDone),n.removeListener("error",destinationEmitError),n.removeListener("readable",destinationFillBuffer),delete n[DESTINATION],this._destroySource&&n.destroy()),super._end(e)}}function destinationSetReadable(){this[DESTINATION].readable=!0}function destinationEmitError(t){this[DESTINATION].emit("error",t)}function destinationClose(){this[DESTINATION].close()}function destinationCloseWhenDone(){this[DESTINATION]._closeWhenDone()}function destinationFillBuffer(){this[DESTINATION]._sourceStarted!==!1&&this[DESTINATION]._fillBuffer()}class SimpleTransformIterator extends TransformIterator{constructor(e,n){if(super(e,n),this._offset=0,this._limit=1/0,this._filter=o=>!0,n=n||(isSourceExpression(e)?null:e),n){const o=isFunction(n)?n:n.transform,{limit:d,offset:h,filter:l,map:u,prepend:p,append:g}=n;h===1/0||d===-1/0?this._limit=0:(Number.isFinite(h)&&(this._offset=Math.max(Math.trunc(h),0)),Number.isFinite(d)&&(this._limit=Math.max(Math.trunc(d),0)),isFunction(l)&&(this._filter=l),isFunction(u)&&(this._map=u),this._transform=isFunction(o)?o:null),p&&(this._prepender=isEventEmitter(p)?p:fromArray(p)),g&&(this._appender=isEventEmitter(g)?g:fromArray(g))}}_read(e,n){const o=()=>this._readAndTransformSimple(e,d,n);this._readAndTransformSimple(e,d,n);function d(){taskScheduler(o)}}_readAndTransformSimple(e,n,o){let d;const{source:h}=this;if(!h||h.done){o();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<e&&(d=h.read())!==null;){if(!this._filter(d)||this._offset!==0&&this._offset--)continue;const l=typeof this._map>"u"?d:this._map(d);if(l===null)this._optional&&this._push(d);else if(!isFunction(this._transform))this._push(l);else{this._optional?this._optionalTransform(l,n):this._transform(l,n,this._boundPush);return}--this._limit===0&&this.close()}o()}_begin(e){this._insert(this._prepender,e),delete this._prepender}_flush(e){this._insert(this._appender,e),delete this._appender}_insert(e,n){const o=h=>this._push(h);!e||e.done?n():(e.on("data",o),e.on("end",d));function d(){e.removeListener("data",o),e.removeListener("end",d),n()}}}class MultiTransformIterator extends TransformIterator{constructor(e,n){if(super(e,n),this._transformerQueue=[],n){const o=isFunction(n)?n:n.multiTransform;o&&(this._createTransformer=o)}}_read(e,n){const o=this._transformerQueue,d=this._optional;let h,l;for(;(h=o[0])&&h.transformer.done;){d&&h.item!==null&&(e--,this._push(h.item)),o.shift();const{transformer:p}=h;p.removeListener("end",destinationFillBuffer),p.removeListener("readable",destinationFillBuffer),p.removeListener("error",destinationEmitError)}const{source:u}=this;for(;u&&!u.done&&o.length<this.maxBufferSize&&(l=u.read(),l!==null);){const p=this._createTransformer(l)||new EmptyIterator;p[DESTINATION]=this,p.on("end",destinationFillBuffer),p.on("readable",destinationFillBuffer),p.on("error",destinationEmitError),o.push({transformer:p,item:l})}if(h=o[0],h){const{transformer:p}=h;for(;e-- >0&&(l=p.read())!==null;)this._push(l),d&&(h.item=null)}else u&&u.done&&this.close();n()}_createTransformer(e){return new SingletonIterator(e)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(e){if(super._end(e),this._destroySource)for(const n of this._transformerQueue)n.transformer.destroy()}}class UnionIterator extends BufferedIterator{constructor(e,n={}){super(n),this._sources=[],this._currentSource=-1;const o=n.autoStart!==!1;if(isEventEmitter(e))e.on("error",d=>this.emit("error",d)),this._pending={loading:!1,sources:e},o&&this._loadSources();else if(Array.isArray(e)&&e.length>0)for(const d of e)this._addSource(d);else o&&this.close();this._destroySources=n.destroySources!==!1}_loadSources(){const e=this._pending.sources;this._pending.loading=!0,e.done?(delete this._pending,this.close()):(e.on("data",n=>{this._addSource(n),this._fillBufferAsync()}),e.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(e){isPromise(e)&&(e=wrap$1(e)),e.done||(this._sources.push(e),e[DESTINATION]=this,e.on("error",destinationEmitError),e.on("readable",destinationFillBuffer),e.on("end",destinationRemoveEmptySources))}_removeEmptySources(){this._sources=this._sources.filter((e,n)=>(e.done&&n<=this._currentSource&&this._currentSource--,!e.done)),this._fillBuffer()}_read(e,n){var o;((o=this._pending)===null||o===void 0?void 0:o.loading)===!1&&this._loadSources();let d=0,h;for(;d!==(d=e);)for(let l=0;l<this._sources.length&&e>0;l++)this._currentSource=(this._currentSource+1)%this._sources.length,(h=this._sources[this._currentSource].read())!==null&&(e--,this._push(h));!this._pending&&this._sources.length===0&&this.close(),n()}_end(e=!1){if(super._end(e),this._destroySources){for(const n of this._sources)n.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}function destinationRemoveEmptySources(){this[DESTINATION]._removeEmptySources()}class ClonedIterator extends TransformIterator{constructor(e){super(e,{autoStart:!1}),this._readPosition=0,this._reading=!1}_init(){}close(){AsyncIterator.prototype.close.call(this)}get source(){return super.source}set source(e){const n=this._source=this._validateSource(e),o=n&&n[DESTINATION]||(n[DESTINATION]=new HistoryReader(n));this.done?this._destroySource&&n.destroy():o.endsAt(0)?this.close():(o.register(this),(n._sourceStarted===!1||o.readAt(0)!==null)&&(this.readable=!0));const d=this._propertyCallbacks;for(const h in d){const l=d[h];for(const u of l)this._getSourceProperty(h,u)}}_validateSource(e,n=!1){const o=e&&e[DESTINATION];return super._validateSource(e,!o||o instanceof HistoryReader)}getProperty(e,n){const{source:o}=this,d=this._properties,h=d&&e in d;if(!n)return h?d&&d[e]:o&&o.getProperty(e);super.getProperty(e,n),o&&!h&&this._getSourceProperty(e,n)}_getSourceProperty(e,n){this.source.getProperty(e,o=>{(!this._properties||!(e in this._properties))&&n(o)})}getProperties(){const e=this.source?this.source.getProperties():{},n=this._properties;for(const o in n)e[o]=n[o];return e}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const e=this.source;let n=null;if(!this.done&&e){const o=e[DESTINATION];(n=o.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,o.endsAt(this._readPosition)&&this.close()}return n}_end(e){const n=this.source,o=n?.[DESTINATION];o&&o.unregister(this),BufferedIterator.prototype._end.call(this,e)}}class HistoryReader{constructor(e){if(this._history=[],this._trackers=new Set,this._source=e,!e.done){const n=()=>{for(const h of this._trackers)h.readable=!0},o=h=>{for(const l of this._trackers)l.emit("error",h)},d=()=>{for(const h of this._trackers)h._sourceStarted!==!1&&h._readPosition===this._history.length&&h.close();this._trackers.clear(),e.removeListener("end",d),e.removeListener("error",o),e.removeListener("readable",n)};e.on("end",d),e.on("error",o),e.on("readable",n)}}register(e){this._source.done||this._trackers.add(e)}unregister(e){this._trackers.delete(e)}readAt(e){let n=null;return e<this._history.length?n=this._history[e]:!this._source.done&&(n=this._source.read())!==null&&(this._history[e]=n),n}endsAt(e){return this._source.done&&this._history.length===e}}class WrappingIterator extends AsyncIterator{constructor(e,n){super(),this._source=null,this._destroySource=n?.destroySource!==!1,isPromise(e)?(this._source=new AsyncIterator,e.then(o=>{this._source=null,this.source=o}).catch(o=>this.emit("error",o))):e&&(this.source=e)}set source(e){let n=e;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(isIterable(n)&&(n=n[Symbol.iterator]()),isIterator(n)){let o=n;n=new eventsExports.EventEmitter,n.read=()=>{if(o!==null){let d;for(;!(d=o.next()).done;)if(d.value!==null)return d.value;o=null,this.close()}return null}}else n=ensureSourceAvailable(n);if(this.done){this._destroySource&&isFunction(n.destroy)&&n.destroy();return}n[DESTINATION]=this,n.on("end",destinationClose),n.on("error",destinationEmitError),n.on("readable",destinationSetReadable),this._source=n,this.readable=n.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const e=this._source.read();if(e!==null)return e;this.readable=!1}return null}_end(e=!1){this._source!==null&&(this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&isFunction(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(e)}}function wrap$1(t,e){if(e&&("autoStart"in e||"optional"in e||"source"in e||"maxBufferSize"in e))return t&&!isEventEmitter(t)&&(t=new WrappingIterator(t)),new TransformIterator(t,e);if(!t)return empty();if(isPromise(t))return new WrappingIterator(t,e);if(t instanceof AsyncIterator)return t;if(Array.isArray(t))return fromArray(t);if(isIterable(t)||isIterator(t)||isEventEmitter(t))return new WrappingIterator(t,e);throw new TypeError(`Invalid source: ${t}`)}function empty(){return new EmptyIterator}function single(t){return new SingletonIterator(t)}function fromArray(t){return new ArrayIterator(t)}function fromIterator(t){return new WrappingIterator(t)}function fromIterable(t){return new WrappingIterator(t)}function union(t){return new UnionIterator(t)}function range(t,e,n){return new IntegerIterator({start:t,end:e,step:n})}function bind(t,e){return e?t.bind(e):t}function isFunction(t){return typeof t=="function"}function isEventEmitter(t){return isFunction(t?.on)}function isPromise(t){return isFunction(t?.then)}function isSourceExpression(t){return t&&(isEventEmitter(t)||isPromise(t)||isFunction(t))}function isIterable(t){return t&&Symbol.iterator in t}function isIterator(t){return isFunction(t?.next)}var __QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__=Object.freeze({__proto__:null,ArrayIterator,AsyncIterator,BufferedIterator,CLOSED,CLOSING,ClonedIterator,DESTINATION,DESTROYED,ENDED,EmptyIterator,INIT,IntegerIterator,LinkedList,MappingIterator,MultiTransformIterator,OPEN,SimpleTransformIterator,SingletonIterator,TransformIterator,UnionIterator,WrappingIterator,empty,fromArray,fromIterable,fromIterator,getTaskScheduler,identity:identity$2,isEventEmitter,isFunction,isIterable,isIterator,isPromise,isSourceExpression,range,scheduleTask,setTaskScheduler,single,union,wrap:wrap$1});const isObject$2=t=>typeof t=="object"&&t!==null,isAbstractLevel=t=>isObject$2(t)&&typeof t.open=="function"&&typeof t.batch=="function",ensureAbstractLevel=(t,e)=>{if(!isAbstractLevel(t))throw new Error(`${e} is not an AbstractLevel instance`)},streamToArray=t=>new Promise((e,n)=>{const o=[],d=p=>{o.push(p)},h=()=>{t.removeListener("data",d),t.removeListener("error",u),t.destroy()},l=()=>{h(),e(o)},u=p=>{h(),n(p)};t.on("error",u),t.on("end",l),t.on("data",d)}),arrStartsWith=(t,e)=>{for(let n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0},RESOLVED=Promise.resolve(),emptyObject={},boundary="",separator="\0\0",defaultIndexes=[["subject","predicate","object","graph"],["object","graph","subject","predicate"],["graph","subject","predicate","object"],["subject","object","predicate","graph"],["predicate","object","graph","subject"],["graph","predicate","object","subject"]],levelPutOpts={keyEncoding:"utf8",valueEncoding:"view"},levelDelOpts={keyEncoding:"utf8"},emptyValue=new Uint8Array(0),consumeOneByOne=async(t,e)=>new Promise((n,o)=>{let d,h=!1,l=!1;const u=()=>{if(l=!0,(d=t.read())!==null){Promise.resolve(e(d)).then(u).catch(p);return}l=!1,h&&n()},p=_=>{o(_),b()},g=()=>{h=!0,l||n(),b()},v=()=>{l||u()},b=()=>{t.removeListener("end",g),t.removeListener("error",p),t.removeListener("readable",v),typeof t.destroy=="function"&&t.destroy()};t.on("end",g),t.on("error",p),t.on("readable",v),t.readable!==!1&&u()}),consumeInBatches=async(t,e,n)=>new Promise((o,d)=>{let h=0,l=!1,u=!1,p=new Array(e);const g=()=>{if(I(),h>0){Promise.resolve(n(p.slice(0,h))).then(o).catch(b);return}o()},v=()=>{u=!0,l||g()},b=P=>{I(),d(P)},_=()=>{l||T()};let S=null;const T=()=>{if(l=!0,u){g();return}for(;h<e&&(S=t.read())!==null;)p[h++]=S;if(S===null){l=!1;return}h===e&&(Promise.resolve(n(p.slice())).then(T).catch(b),h=0)},I=()=>{t.removeListener("end",v),t.removeListener("error",b),t.removeListener("readable",_),typeof t.destroy=="function"&&t.destroy()};t.on("end",v),t.on("error",b),t.on("readable",_),t.readable!==!1&&T()});let IDX=256;const HEX=[];for(;IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);const createUid=t=>{t=t||16;let e="",n=0;return()=>{if(!e||n===256){for(e="",n=(1+t)/2|0;n--;)e+=HEX[256*Math.random()|0];e=e.substring(n=0,t-2)}return e+HEX[n++]}},uid=createUid(11);class LevelIterator extends BufferedIterator{level;mapFn;levelEnded;constructor(e,n){super({maxBufferSize:64}),this.mapFn=n,this.level=e,this.levelEnded=!1}_read(e,n){const o={remaining:e};o.next=this._onNextValue.bind(this,o,n),this.level.next(o.next)}_onNextValue(e,n,o,d,h){if(o){n(o);return}if(d===void 0&&h===void 0){this.close(),this.levelEnded=!0,n();return}if(this._push(this.mapFn(d,h)),e.remaining-=1,e.remaining===0){n();return}this.level.next(e.next)}_endLevel(e){if(this.levelEnded){e();return}this.level.close(n=>{n||(this.levelEnded=!0),e(n)})}_end(e){this.ended||(super._end(e),this._endLevel(n=>{n&&this.emit("error",n)}))}_destroy(e,n){if(this.destroyed){n();return}this._endLevel(o=>{if(o){n(o);return}super._destroy(e,n)})}}const xsd="http://www.w3.org/2001/XMLSchema#",string=`${xsd}string`,dateTime=`${xsd}dateTime`,integer=`${xsd}integer`,decimal=`${xsd}decimal`,double=`${xsd}double`,nonPositiveInteger=`${xsd}nonPositiveInteger`,negativeInteger=`${xsd}negativeInteger`,long=`${xsd}long`,int=`${xsd}int`,short=`${xsd}short`,byte=`${xsd}byte`,nonNegativeInteger=`${xsd}nonNegativeInteger`,unsignedLong=`${xsd}unsignedLong`,unsignedInt=`${xsd}unsignedInt`,unsignedShort=`${xsd}unsignedShort`,unsignedByte=`${xsd}unsignedByte`,positiveInteger=`${xsd}positiveInteger`,sliceString=(t,e,n)=>t.slice(e,e+n),padNumStart=t=>{if(t<10)return"000"+t;if(t<100)return"00"+t;if(t<1e3)return"0"+t;if(t<1e4)return""+t;throw new Error("too long: "+t)},join=(t,e,n)=>{let o=""+t;return e<10?o+="00"+e:e<100?o+="0"+e:o+=e,o+=n.toFixed(17),o},ZERO=join(3,0,0),NEG_INF=join(0,0,0),POS_INF=join(6,0,0),encode=t=>{let e=typeof t!="number"?parseFloat(t):t;if(Number.isNaN(e))throw new Error("Cannot serialize NaN");if(e===-1/0)return NEG_INF;if(e===1/0)return POS_INF;if(e===0)return ZERO;let n=0,o=0;for(e<0&&(o=1,e*=-1);e>10;)e/=10,n+=1;for(;e<1;)e*=10,n-=1;return o===1?n>=0?join(1,999-n,10-e):join(2,n*-1,10-e):n<0?join(4,999+n,e):join(5,n,e)},namedNodeWriter={write(t,e,n){const o=n.compactIri(t.value);e.lengths=padNumStart(o.length),e.value=o}},namedNodeReader={read(t,e,n,o){const{keyOffset:d,lengthsOffset:h}=e,l=parseInt(sliceString(t,h,4));return e.lengthsOffset+=4,e.keyOffset+=l,n.namedNode(o.expandTerm(sliceString(t,d,l)))}},blankNodeWriter={write(t,e){e.lengths=padNumStart(t.value.length),e.value=t.value}},blankNodeReader={read(t,e,n){const{keyOffset:o,lengthsOffset:d}=e,h=parseInt(sliceString(t,d,4));return e.lengthsOffset+=4,e.keyOffset+=h,n.blankNode(sliceString(t,o,h))}},genericLiteralWriter={write(t,e){e.lengths=padNumStart(t.value.length)+padNumStart(t.datatype.value.length),e.value=t.datatype.value+separator+t.value}},genericLiteralReader={read(t,e,n,o){const{keyOffset:d,lengthsOffset:h}=e,l=parseInt(sliceString(t,h,4)),u=parseInt(sliceString(t,h+4,4));return e.lengthsOffset+=8,e.keyOffset+=l+u+separator.length,n.literal(sliceString(t,d+u+separator.length,l),n.namedNode(sliceString(t,d,u)))}},stringLiteralWriter={write(t,e){e.lengths=padNumStart(t.value.length),e.value=t.value}},stringLiteralReader={read(t,e,n){const{keyOffset:o,lengthsOffset:d}=e,h=parseInt(sliceString(t,d,4));return e.lengthsOffset+=4,e.keyOffset+=h,n.literal(sliceString(t,o,h))}},langStringLiteralWriter={write(t,e){e.lengths=padNumStart(t.value.length)+padNumStart(t.language.length),e.value=t.language+separator+t.value}},langStringLiteralReader={read(t,e,n,o){const{keyOffset:d,lengthsOffset:h}=e,l=parseInt(sliceString(t,h,4)),u=parseInt(sliceString(t,h+4,4));return e.lengthsOffset+=8,e.keyOffset+=l+u+separator.length,n.literal(sliceString(t,d+u+separator.length,l),sliceString(t,d,u))}},numericLiteralWriter={write(t,e,n,o,d){e.lengths=padNumStart(t.value.length)+padNumStart(t.datatype.value.length)+padNumStart(d.length),o?e.value=d:e.value=d+separator+t.datatype.value+separator+t.value}},numericLiteralReader={read(t,e,n,o){const{keyOffset:d,lengthsOffset:h}=e,l=parseInt(sliceString(t,h,4)),u=parseInt(sliceString(t,h+4,4)),p=parseInt(sliceString(t,h+8,4));return e.lengthsOffset+=12,e.keyOffset+=p+u+l+separator.length*2,n.literal(sliceString(t,d+p+separator.length+u+separator.length,l),n.namedNode(sliceString(t,d+p+separator.length,u)))}},defaultGraphWriter={write(t,e){e.value="dg",e.lengths="2"}},defaultGraphReader={read(t,e,n,o){return e.keyOffset+=2,e.lengthsOffset+=1,n.defaultGraph()}},termWriter={write(t,e,n){switch(t.termType){case"NamedNode":e.type="0",namedNodeWriter.write(t,e,n);break;case"BlankNode":e.type="1",blankNodeWriter.write(t,e,n);break;case"DefaultGraph":e.type="6",defaultGraphWriter.write(t,e,n);break;case"Literal":if(t.language)e.type="4",langStringLiteralWriter.write(t,e,n);else if(t.datatype)switch(t.datatype.value){case string:e.type="3",stringLiteralWriter.write(t,e,n);break;case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:e.type="5",numericLiteralWriter.write(t,e,n,!1,encode(t.value));break;case dateTime:e.type="7",numericLiteralWriter.write(t,e,n,!1,encode(new Date(t.value).valueOf()));break;default:e.type="2",genericLiteralWriter.write(t,e,n)}else e.type="3",stringLiteralWriter.write(t,e,n)}}},termReader={read(t,e,n,o){let d;const h=t.charAt(e.lengthsOffset);switch(e.lengthsOffset+=1,h){case"0":d=namedNodeReader.read(t,e,n,o);break;case"1":d=blankNodeReader.read(t,e,n,o);break;case"2":d=genericLiteralReader.read(t,e,n,o);break;case"3":d=stringLiteralReader.read(t,e,n,o);break;case"4":d=langStringLiteralReader.read(t,e,n,o);break;case"5":d=numericLiteralReader.read(t,e,n,o);break;case"6":d=defaultGraphReader.read(t,e,n,o);break;case"7":d=numericLiteralReader.read(t,e,n,o);break;default:throw new Error(`Unexpected encoded term type "${h}"`)}return d}},twoStepsQuadWriter={subject:{type:"",value:"",lengths:""},predicate:{type:"",value:"",lengths:""},object:{type:"",value:"",lengths:""},graph:{type:"",value:"",lengths:""},ingest(t,e){return termWriter.write(t.subject,this.subject,e),termWriter.write(t.predicate,this.predicate,e),termWriter.write(t.object,this.object,e),termWriter.write(t.graph,this.graph,e),this},write(t,e){let n=t,o="";for(let d=0,h;d<e.length;d+=1)h=this[e[d]],n+=h.value+separator,o+=h.type+h.lengths;return n+o+padNumStart(o.length)}},quadReader={subject:null,predicate:null,object:null,graph:null,keyOffset:0,lengthsOffset:0,read(t,e,n,o,d){this.lengthsOffset=t.length-parseInt(t.slice(-4))-4,this.keyOffset=e;for(let h=0,l;h<n.length;h+=1)l=n[h],this[l]=termReader.read(t,this,o,d),this.keyOffset+=separator.length;return o.quad(this.subject,this.predicate,this.object,this.graph)}},serialized={type:"",value:"",lengths:""},patternLiteralWriter={write(t,e){if(t.language){langStringLiteralWriter.write(t,serialized,e);return}if(t.datatype)switch(t.datatype.value){case string:stringLiteralWriter.write(t,serialized,e);return;case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:numericLiteralWriter.write(t,serialized,e,!0,encode(t.value));return;case dateTime:numericLiteralWriter.write(t,serialized,e,!0,encode(new Date(t.value).valueOf()));return;default:genericLiteralWriter.write(t,serialized,e);return}stringLiteralWriter.write(t,serialized,e)}},writePattern=(t,e,n)=>{let o=e.prefix,d=e.prefix,h=!0,l=!0,u=!1,p=!1,g=Object.entries(t).filter(([b,_])=>_).length;if(g===0)return d+=boundary,{gt:o,lt:d,gte:h,lte:l,order:e.terms,index:e};let v=0;for(;v<e.terms.length&&g>0;v+=1){const b=t[e.terms[v]];if(!b||u||p)return null;switch(b.termType){case"Range":u=!0,b.gt?(patternLiteralWriter.write(b.gt,n),o+=serialized.value,h=!1):b.gte&&(patternLiteralWriter.write(b.gte,n),o+=serialized.value,h=!0),b.lt?(patternLiteralWriter.write(b.lt,n),d+=serialized.value,l=!1):b.lte&&(patternLiteralWriter.write(b.lte,n),d+=serialized.value,l=!0);break;case"Literal":p=!0,patternLiteralWriter.write(b,n),o+=serialized.value,h=!0,patternLiteralWriter.write(b,n),d+=serialized.value,l=!0;break;case"NamedNode":namedNodeWriter.write(b,serialized,n),o+=serialized.value,h=!0,namedNodeWriter.write(b,serialized,n),d+=serialized.value,l=!0;break;case"BlankNode":blankNodeWriter.write(b,serialized,n),o+=serialized.value,h=!0,blankNodeWriter.write(b,serialized,n),d+=serialized.value,l=!0;break;case"DefaultGraph":defaultGraphWriter.write(b,serialized,n),o+=serialized.value,h=!0,defaultGraphWriter.write(b,serialized,n),d+=serialized.value,l=!0;break}g-=1,g>0&&v<e.terms.length-1&&(o+=separator,d+=separator)}return l?u||p?d+=boundary:d+=separator+boundary:d+=separator,h?!u&&!p&&(o+=separator):u||p?o+=boundary:o+=separator+boundary,{gt:o,lt:d,gte:h,lte:l,order:e.terms.slice(u?v-1:1),index:e}};var sortedSetExports={},sortedSet={get exports(){return sortedSetExports},set exports(t){sortedSetExports=t}};(function(t,e){(function(n,o){t.exports=o()})(commonjsGlobal,function(){class n{constructor($){if($?.strategy==null)throw"Must pass options.strategy, a strategy";if($?.comparator==null)throw"Must pass options.comparator, a comparator";if($?.onInsertConflict==null)throw"Must pass options.onInsertConflict, a function";this.priv=new $.strategy($),this.length=0}insert($){return this.priv.insert($),this.length+=1,this}remove($){return this.priv.remove($),this.length-=1,this}clear(){return this.priv.clear(),this.length=0,this}contains($){return this.priv.contains($)}toArray(){return this.priv.toArray()}forEach($,U){return this.priv.forEachImpl($,this,U),this}map($,U){const H=[];return this.forEach(function(ee,ge,me){return H.push($.call(U,ee,ge,me))}),H}filter($,U){const H=[];return this.forEach(function(ee,ge,me){if($.call(U,ee,ge,me))return H.push(ee)}),H}every($,U){let H=!0;return this.forEach(function(ee,ge,me){H&&!$.call(U,ee,ge,me)&&(H=!1)}),H}some($,U){let H=!1;return this.forEach(function(ee,ge,me){!H&&$.call(U,ee,ge,me)&&(H=!0)}),H}findIterator($){return this.priv.findIterator($)}beginIterator(){return this.priv.beginIterator()}endIterator(){return this.priv.endIterator()}}class o{constructor($,U){this.priv=$,this.index=U,this.data=this.priv.data}hasNext(){return this.index<this.data.length}hasPrevious(){return this.index>0}value(){return this.index<this.data.length?this.data[this.index]:null}setValue($){if(!this.priv.options.allowSetValue)throw"Must set options.allowSetValue";if(!this.hasNext())throw"Cannot set value at end of set";return this.data[this.index]=$}next(){return this.index>=this.data.length?null:new o(this.priv,this.index+1)}previous(){return this.index<=0?null:new o(this.priv,this.index-1)}}const d=(F,$,U)=>{let H=0,ee=F.length;for(;H<ee;){const ge=H+ee>>>1;U(F[ge],$)<0?H=ge+1:ee=ge}return H};class h{constructor($){this.options=$,this.onInsertConflict=this.options.onInsertConflict,this.comparator=this.options.comparator,this.data=[]}toArray(){return this.data}insert($){const U=d(this.data,$,this.comparator);return this.data[U]!==void 0&&this.comparator(this.data[U],$)===0?this.data.splice(U,1,this.onInsertConflict(this.data[U],$)):this.data.splice(U,0,$)}remove($){const U=d(this.data,$,this.comparator);if(this.comparator(this.data[U],$)!==0)throw"Value not in set";return this.data.splice(U,1)}clear(){return this.data.length=0}contains($){const U=d(this.data,$,this.comparator);return this.index!==this.data.length&&this.comparator(this.data[U],$)===0}forEachImpl($,U,H){const ee=this.data,ge=ee.length;for(let me=0;me<ge;me++)$.call(H,ee[me],me,U)}findIterator($){const U=d(this.data,$,this.comparator);return new o(this,U)}beginIterator(){return new o(this,0)}endIterator(){return new o(this,this.data.length)}}const l=(F,$)=>{for(;$[F]!==null;){const U=$;$=$[F],$._iteratorParentNode=U}return $},u=(F,$)=>{let U,H;if($[F]!==null)U=$,$=$[F],$._iteratorParentNode=U,H=F==="left"?"right":"left",$=l(H,$);else{for(;(U=$._iteratorParentNode)!==null&&U[F]===$;)$=U;$=U}return $};class p{constructor($,U){this.tree=$,this.node=U}next(){if(this.node===null)return null;{const $=u("right",this.node);return new p(this.tree,$)}}previous(){if(this.node===null){if(this.tree.root===null)return null;{this.tree.root._iteratorParentNode=null;const $=l("right",this.tree.root);return new p(this.tree,$)}}else{const $=u("left",this.node);return $===null?null:new p(this.tree,$)}}hasNext(){return this.node!==null}hasPrevious(){return this.previous()!==null}value(){return this.node===null?null:this.node.value}setValue($){if(!this.tree.options.allowSetValue)throw"Must set options.allowSetValue";if(!this.hasNext())throw"Cannot set value at end of set";return this.node.value=$}}p.find=function(F,$,U){const H=F.root;H!=null&&(H._iteratorParentNode=null);let ee=H,ge=null;for(;ee!==null;){const me=U($,ee.value);if(me===0)break;if(me<0){if(ee.left===null)break;ge=ee,ee.left._iteratorParentNode=ee,ee=ee.left}else if(ee.right!==null)ee.right._iteratorParentNode=ee,ee=ee.right;else{ee=ge;break}}return new p(F,ee)},p.left=F=>{if(F.root===null)return new p(F,null);{F.root._iteratorParentNode=null;const $=l("left",F.root);return new p(F,$)}},p.right=F=>new p(F,null);const g=(F,$)=>{F!==null&&(g(F.left,$),$(F.value),g(F.right,$))};class v{toArray(){const $=[];return g(this.root,function(U){return $.push(U)}),$}clear(){return this.root=null}forEachImpl($,U,H){let ee=0;g(this.root,function(ge){$.call(H,ge,ee,U),ee+=1})}contains($){const U=this.comparator;let H=this.root;for(;H!==null;){const ee=U($,H.value);if(ee===0)break;ee<0?H=H.left:H=H.right}return H!==null&&U(H.value,$)===0}findIterator($){return p.find(this,$,this.comparator)}beginIterator(){return p.left(this)}endIterator(){return p.right(this)}}class b{constructor($){this.value=$,this.left=null,this.right=null}}const _=(F,$)=>{for(;F[$]!==null;)F=F[$];return F},S=(F,$,U)=>{if(F===null)throw"Value not in set";const H=U($,F.value);if(H<0)F.left=S(F.left,$,U);else if(H>0)F.right=S(F.right,$,U);else if(F.left===null&&F.right===null)F=null;else if(F.right===null)F=F.left;else if(F.left===null)F=F.right;else{const ee=_(F.right,"left");F.value=ee.value,F.right=S(F.right,ee.value,U)}return F};class T extends v{constructor($){super(),this.options=$,this.comparator=this.options.comparator,this.onInsertConflict=this.options.onInsertConflict,this.root=null}insert($){const U=this.comparator;if(this.root!==null){let H=this.root,ee=null;for(;;){const ge=U($,H.value);if(ge===0){H.value=this.onInsertConflict(H.value,$);return}else{if(ee=ge<0?"left":"right",H[ee]===null)break;H=H[ee]}}return H[ee]=new b($)}else return this.root=new b($)}remove($){return this.root=S(this.root,$,this.comparator)}}class I{constructor($){this.value=$,this.left=null,this.right=null,this.isRed=!0}}const P=F=>{const $=F.right;return F.right=$.left,$.left=F,$.isRed=F.isRed,F.isRed=!0,$},B=F=>{const $=F.left;return F.left=$.right,$.right=F,$.isRed=F.isRed,F.isRed=!0,$},L=F=>{F.isRed=!F.isRed,F.left.isRed=!F.left.isRed,F.right.isRed=!F.right.isRed},C=F=>(L(F),F.right!==null&&F.right.left!==null&&F.right.left.isRed&&(F.right=B(F.right),F=P(F),L(F)),F),O=F=>(L(F),F.left!==null&&F.left.left!==null&&F.left.left.isRed&&(F=B(F),L(F)),F),N=(F,$,U,H)=>{if(F===null)return new I($);const ee=U($,F.value);return ee===0?F.value=H(F.value,$):ee<0?F.left=N(F.left,$,U,H):F.right=N(F.right,$,U,H),F.right!==null&&F.right.isRed&&!(F.left!==null&&F.left.isRed)&&(F=P(F)),F.left!==null&&F.left.isRed&&F.left.left!==null&&F.left.left.isRed&&(F=B(F)),F.left!==null&&F.left.isRed&&F.right!==null&&F.right.isRed&&L(F),F},M=F=>{for(;F.left!==null;)F=F.left;return F},k=F=>(F.right!==null&&F.right.isRed&&(F=P(F)),F.left!==null&&F.left.isRed&&F.left.left!==null&&F.left.left.isRed&&(F=B(F)),F.left!==null&&F.left.isRed&&F.right!==null&&F.right.isRed&&L(F),F),W=F=>F.left===null?null:(!F.left.isRed&&!(F.left.left!==null&&F.left.left.isRed)&&(F=C(F)),F.left=W(F.left),k(F)),ae=(F,$,U)=>{if(F===null)throw"Value not in set";if(U($,F.value)<0){if(F.left===null)throw"Value not in set";!F.left.isRed&&!(F.left.left!==null&&F.left.left.isRed)&&(F=C(F)),F.left=ae(F.left,$,U)}else{if(F.left!==null&&F.left.isRed&&(F=B(F)),F.right===null){if(U($,F.value)===0)return null;throw"Value not in set"}!F.right.isRed&&!(F.right.left!==null&&F.right.left.isRed)&&(F=O(F)),U($,F.value)===0?(F.value=M(F.right).value,F.right=W(F.right)):F.right=ae(F.right,$,U)}return F!==null&&(F=k(F)),F};class X extends v{constructor($){super(),this.options=$,this.comparator=this.options.comparator,this.onInsertConflict=this.options.onInsertConflict,this.root=null}insert($){this.root=N(this.root,$,this.comparator,this.onInsertConflict),this.root.isRed=!1}remove($){this.root=ae(this.root,$,this.comparator),this.root!==null&&(this.root.isRed=!1)}}const G={OnInsertConflictThrow:(F,$)=>{throw new Error("Value already in set")},OnInsertConflictReplace:(F,$)=>$,OnInsertConflictIgnore:(F,$)=>F};class re extends n{constructor($){$||($={}),$.strategy||($.strategy=X),$.comparator||($.comparator=function(U,H){return(U||0)-(H||0)}),$.onInsertConflict||($.onInsertConflict=G.OnInsertConflictThrow),super($)}}return re.ArrayStrategy=h,re.BinaryTreeStrategy=T,re.RedBlackTreeStrategy=X,Object.assign(re,G),re})})(sortedSet);class SortingIterator extends AsyncIterator{constructor(e,n,o,d){super();let h;const l=()=>{const u=new sortedSetExports({comparator:n}),p=()=>{e.removeListener("data",g),e.removeListener("error",v),e.removeListener("end",b),e.destroy()},g=_=>{u.insert(o(_))},v=_=>{p(),this.emit("error",_)},b=()=>{p(),h=u.beginIterator(),this.readable=!0};e.on("data",g),e.on("error",v),e.on("end",b)};this.read=()=>{if(h){const u=h.value();return u===null?(this.close(),null):(h=h.next(),d(u))}return this.readable=!1,null},RESOLVED.then(l).catch(u=>{RESOLVED.then(()=>this.emit("error",u))})}}const SORTING_KEY=Symbol(),compareSortableQuadsReverse=(t,e)=>t[SORTING_KEY]>e[SORTING_KEY]?-1:1,compareSortableQuads=(t,e)=>t[SORTING_KEY]>e[SORTING_KEY]?1:-1,emitSortableQuad=t=>t,getLevelQueryForIndex=(t,e,n,o)=>{const d=writePattern(t,e,n);if(d===null)return null;const h={[d.gte?"gte":"gt"]:d.gt,[d.lte?"lte":"lt"]:d.lt,keys:!0,values:!1,keyEncoding:"utf8"};return typeof o.limit=="number"&&(h.limit=o.limit),typeof o.reverse=="boolean"&&(h.reverse=o.reverse),{level:h,order:d.order,index:d.index}},getLevelQuery=(t,e,n,o)=>{for(let d=0,h;d<e.length;d+=1){h=e[d];const l=getLevelQueryForIndex(t,h,n,o);if(l!==null&&(!o.order||arrStartsWith(l.order,o.order)))return l}return null},getStream=async(t,e,n)=>{const{dataFactory:o,prefixes:d,indexes:h}=t,l=getLevelQuery(e,h,d,n);if(l!==null){const{index:p,level:g,order:v}=l;let b=new LevelIterator(t.db.iterator(g),_=>quadReader.read(_,p.prefix.length,p.terms,o,d));return{type:ResultType.QUADS,order:v,iterator:b,index:p.terms,resorted:!1}}const u=getLevelQuery(e,h,d,emptyObject);if(u!==null){const{index:p,level:g,order:v}=u;let b=new LevelIterator(t.db.iterator(g),_=>quadReader.read(_,p.prefix.length,p.terms,o,d));if(typeof n.order<"u"&&!arrStartsWith(n.order,v)){const _=T=>(T[SORTING_KEY]=twoStepsQuadWriter.ingest(T,d).write("",n.order)+separator,T),S=n.reverse===!0?compareSortableQuadsReverse:compareSortableQuads;if(b=new SortingIterator(b,S,_,emitSortableQuad),typeof n.limit<"u"){const T=function(){this.removeListener("end",T),this.removeListener("error",T),this.destroy()};b=b.take(n.limit).on("end",T).on("error",T)}}return{type:ResultType.QUADS,order:n.order||v,iterator:b,index:p.terms,resorted:!0}}throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(n)}`)},getApproximateSize=async(t,e,n)=>{if(!t.db.approximateSize)return{type:ResultType.APPROXIMATE_SIZE,approximateSize:1/0};const{indexes:o,prefixes:d}=t,h=getLevelQuery(e,o,d,n);if(h===null)throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(n)}`);const{level:l}=h,u=l.gte||l.gt,p=l.lte||l.lt;return new Promise((g,v)=>{t.db.approximateSize(u,p,(b,_)=>{if(b){v(b);return}g({type:ResultType.APPROXIMATE_SIZE,approximateSize:Math.max(1,_)})})})};class Scope{id;blankNodes;factory;static async init(e){return new Scope(e.dataFactory,uid(),new Map)}static async load(e,n){const o=Scope.getLevelIteratorOpts(!1,!0,n),d=new LevelIterator(e.db.iterator(o),(u,p)=>p),h=new Map,{dataFactory:l}=e;return await consumeOneByOne(d,u=>{const{originalLabel:p,randomLabel:g}=JSON.parse(u);h.set(p,l.blankNode(g))}),new Scope(l,n,h)}static async delete(e,n){const o=e.db.batch(),d=Scope.getLevelIteratorOpts(!0,!1,n),h=new LevelIterator(e.db.iterator(d),(l,u)=>l);await consumeOneByOne(h,l=>{o.del(l)}),await o.write()}static getLevelIteratorOpts(e,n,o){const d=o?`SCOPE${separator}${o}${separator}`:`SCOPE${separator}`;return{keys:e,values:n,keyEncoding:"utf8",valueEncoding:"utf8",gte:d,lte:`${d}${boundary}`}}static addMappingToLevelBatch(e,n,o,d){n.put(`SCOPE${separator}${e}${separator}${o}`,JSON.stringify({originalLabel:o,randomLabel:d}))}constructor(e,n,o){this.blankNodes=o,this.factory=e,this.id=n}parseBlankNode(e,n){let o=this.blankNodes.get(e.value);return o||(o=this.factory.blankNode(uid()),this.blankNodes.set(e.value,o),Scope.addMappingToLevelBatch(this.id,n,e.value,o.value)),o}parseSubject(e,n){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,n);default:return e}}parseObject(e,n){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,n);default:return e}}parseGraph(e,n){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,n);default:return e}}parseQuad(e,n){return this.factory.quad(this.parseSubject(e.subject,n),e.predicate,this.parseObject(e.object,n),this.parseGraph(e.graph,n))}}class Quadstore{db;indexes;id;prefixes;dataFactory;constructor(e){ensureAbstractLevel(e.backend,'"opts.backend"'),this.dataFactory=e.dataFactory,this.db=e.backend,this.indexes=[],this.id=uid(),(e.indexes||defaultIndexes).forEach(n=>this._addIndex(n)),this.prefixes=e.prefixes||{expandTerm:n=>n,compactIri:n=>n}}ensureReady(){if(this.db.status!=="open")throw new Error(`Store is not ready (status: "${this.db.status}"). Did you call store.open()?`)}async open(){this.db.status!=="open"&&await this.db.open()}async close(){this.db.status!=="closed"&&await this.db.close()}toString(){return this.toJSON()}toJSON(){return`[object ${this.constructor.name}::${this.id}]`}_addIndex(e){const n=e.map(o=>o.charAt(0).toUpperCase()).join("");this.indexes.push({terms:e,prefix:n+separator})}async clear(){if(typeof this.db.clear=="function")return new Promise((e,n)=>{this.db.clear(o=>{o?n(o):e()})});await this.delStream((await this.getStream({})).iterator,{batchSize:20})}match(e,n,o,d,h=emptyObject){if(e&&e.termType==="Literal")return new EmptyIterator;const l={subject:e,predicate:n,object:o,graph:d};return wrap$1(this.getStream(l,h).then(u=>u.iterator))}async countQuads(e,n,o,d,h=emptyObject){if(e&&e.termType==="Literal")return 0;const l={subject:e,predicate:n,object:o,graph:d};return(await this.getApproximateSize(l,h)).approximateSize}import(e){const n=new eventsExports.EventEmitter;return this.putStream(e,{}).then(()=>{n.emit("end")}).catch(o=>{n.emit("error",o)}),n}remove(e){const n=new eventsExports.EventEmitter;return this.delStream(e,{}).then(()=>n.emit("end")).catch(o=>n.emit("error",o)),n}removeMatches(e,n,o,d,h=emptyObject){const l=this.match(e,n,o,d,h);return this.remove(l)}deleteGraph(e){return this.removeMatches(void 0,void 0,void 0,e)}async getApproximateSize(e,n=emptyObject){return await this.ensureReady(),await getApproximateSize(this,e,n)}_batchPut(e,n){const{indexes:o,prefixes:d}=this;twoStepsQuadWriter.ingest(e,d);for(let h=0,l=o.length,u;h<l;h+=1){u=o[h];const p=twoStepsQuadWriter.write(u.prefix,u.terms);n=n.put(p,emptyValue,levelPutOpts)}return n}async put(e,n=emptyObject){this.ensureReady();const{indexes:o,db:d}=this;let h=d.batch();return n.scope&&(e=n.scope.parseQuad(e,h)),this._batchPut(e,h),await this.writeBatch(h,n),{type:ResultType.VOID}}async multiPut(e,n=emptyObject){this.ensureReady();const{indexes:o,db:d}=this;let h=d.batch();for(let l=0,u=e.length,p;l<u;l+=1)p=e[l],n.scope&&(p=n.scope.parseQuad(p,h)),this._batchPut(p,h);return await this.writeBatch(h,n),{type:ResultType.VOID}}_batchDel(e,n){const{indexes:o,prefixes:d}=this;twoStepsQuadWriter.ingest(e,d);for(let h=0,l=o.length,u;h<l;h+=1){u=o[h];const p=twoStepsQuadWriter.write(u.prefix,u.terms);n=n.del(p,levelDelOpts)}return n}async del(e,n=emptyObject){this.ensureReady();const o=this.db.batch();return this._batchDel(e,o),await this.writeBatch(o,n),{type:ResultType.VOID}}async multiDel(e,n=emptyObject){this.ensureReady();const o=this.db.batch();for(let d=0,h=e.length,l;d<h;d+=1)l=e[d],this._batchDel(l,o);return await this.writeBatch(o,n),{type:ResultType.VOID}}async patch(e,n,o=emptyObject){this.ensureReady();const{indexes:d,db:h}=this,l=h.batch();return this._batchDel(e,l),this._batchPut(n,l),await this.writeBatch(l,o),{type:ResultType.VOID}}async multiPatch(e,n,o=emptyObject){this.ensureReady();const{indexes:d,db:h}=this;let l=h.batch();for(let u=0,p=e.length,g;u<p;u+=1)g=e[u],this._batchDel(g,l);for(let u=0,p=n.length,g;u<p;u+=1)g=n[u],this._batchPut(g,l);return await this.writeBatch(l,o),{type:ResultType.VOID}}async writeBatch(e,n){n.preWrite&&await n.preWrite(e),await e.write()}async get(e,n=emptyObject){this.ensureReady();const o=await this.getStream(e,n);return{items:await streamToArray(o.iterator),type:o.type,order:o.order,index:o.index,resorted:o.resorted}}async getStream(e,n=emptyObject){return this.ensureReady(),await getStream(this,e,n)}async putStream(e,n=emptyObject){this.ensureReady();const o=n.batchSize||1;return o===1?await consumeOneByOne(e,d=>this.put(d,n)):await consumeInBatches(e,o,d=>this.multiPut(d,n)),{type:ResultType.VOID}}async delStream(e,n=emptyObject){this.ensureReady();const o=n.batchSize||1;return o===1?await consumeOneByOne(e,d=>this.del(d)):await consumeInBatches(e,o,d=>this.multiDel(d)),{type:ResultType.VOID}}async initScope(){return await this.ensureReady(),await Scope.init(this)}async loadScope(e){return await this.ensureReady(),await Scope.load(this,e)}async deleteScope(e){await this.ensureReady(),await Scope.delete(this,e)}async deleteAllScopes(){await this.ensureReady(),await Scope.delete(this)}}var sparqlalgebrajs={},sparqlAlgebra={},es6=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var o,d,h;if(Array.isArray(e)){if(o=e.length,o!=n.length)return!1;for(d=o;d--!==0;)if(!t(e[d],n[d]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(d of e.entries())if(!n.has(d[0]))return!1;for(d of e.entries())if(!t(d[1],n.get(d[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(d of e.entries())if(!n.has(d[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(o=e.length,o!=n.length)return!1;for(d=o;d--!==0;)if(e[d]!==n[d])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(h=Object.keys(e),o=h.length,o!==Object.keys(n).length)return!1;for(d=o;d--!==0;)if(!Object.prototype.hasOwnProperty.call(n,h[d]))return!1;for(d=o;d--!==0;){var l=h[d];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n},rdfString={},TermUtil$1={};Object.defineProperty(TermUtil$1,"__esModule",{value:!0});TermUtil$1.stringQuadToQuad=TermUtil$1.quadToStringQuad=TermUtil$1.stringToTerm=TermUtil$1.getLiteralLanguage=TermUtil$1.getLiteralType=TermUtil$1.getLiteralValue=TermUtil$1.termToString=void 0;const rdf_data_factory_1$2=rdfDataFactory,FACTORY=new rdf_data_factory_1$2.DataFactory;function termToString(t){if(t)switch(t.termType){case"NamedNode":return t.value;case"BlankNode":return"_:"+t.value;case"Literal":const e=t;return'"'+e.value+'"'+(e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+e.datatype.value:"")+(e.language?"@"+e.language:"");case"Quad":return`<<${termToString(t.subject)} ${termToString(t.predicate)} ${termToString(t.object)}${t.graph.termType==="DefaultGraph"?"":" "+termToString(t.graph)}>>`;case"Variable":return"?"+t.value;case"DefaultGraph":return t.value}}TermUtil$1.termToString=termToString;function getLiteralValue(t){const e=/^"([^]*)"/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]}TermUtil$1.getLiteralValue=getLiteralValue;function getLiteralType(t){const e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}TermUtil$1.getLiteralType=getLiteralType;function getLiteralLanguage(t){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(t);if(!e)throw new Error(t+" is not a literal");return e[1]?e[1].toLowerCase():""}TermUtil$1.getLiteralLanguage=getLiteralLanguage;function stringToTerm(t,e){if(e=e||FACTORY,!t||!t.length)return e.defaultGraph();switch(t[0]){case"_":return e.blankNode(t.substr(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(t.substr(1));case'"':const n=getLiteralLanguage(t),o=e.namedNode(getLiteralType(t));return e.literal(getLiteralValue(t),n||o);case"<":default:if(t.startsWith("<<")&&t.endsWith(">>")){const d=t.slice(2,-2).trim();let h=[],l=0,u=0,p=!1;for(let g=0;g<d.length;g++){const v=d[g];if(v==="<"&&l++,v===">"){if(l===0)throw new Error("Found closing tag without opening tag in "+t);l--}if(v==='"'){let b=!1,_=g;for(;_-- >0&&d[_]==="\\";)b=!b;b||(p=!p)}if(v===" "&&!p&&l===0){for(h.push(d.slice(u,g));d[g+1]===" ";)g+=1;u=g+1}}if(l!==0)throw new Error("Found opening tag without closing tag in "+t);if(h.push(d.slice(u,d.length)),h.length!==3&&h.length!==4)throw new Error("Nested quad syntax error "+t);return h=h.map(g=>g.startsWith("<")&&!g.includes(" ")?g.slice(1,-1):g),e.quad(stringToTerm(h[0]),stringToTerm(h[1]),stringToTerm(h[2]),h[3]?stringToTerm(h[3]):void 0)}return e.namedNode(t)}}TermUtil$1.stringToTerm=stringToTerm;function quadToStringQuad(t){return{subject:termToString(t.subject),predicate:termToString(t.predicate),object:termToString(t.object),graph:termToString(t.graph)}}TermUtil$1.quadToStringQuad=quadToStringQuad;function stringQuadToQuad(t,e){return e=e||FACTORY,e.quad(stringToTerm(t.subject,e),stringToTerm(t.predicate,e),stringToTerm(t.object,e),stringToTerm(t.graph,e))}TermUtil$1.stringQuadToQuad=stringQuadToQuad;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.termToString=t.stringToTerm=t.stringQuadToQuad=t.quadToStringQuad=t.getLiteralValue=t.getLiteralType=t.getLiteralLanguage=void 0;const e=TermUtil$1;Object.defineProperty(t,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(t,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(t,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(t,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(t,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(t,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(t,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(rdfString);var algebra={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.expressionTypes=t.types=void 0,function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"}(t.types||(t.types={})),function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"}(t.expressionTypes||(t.expressionTypes={}))})(algebra);var factory$2={},Wildcard$2={};let Wildcard$1=class{constructor(){return WILDCARD||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(Wildcard$1.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(Wildcard$1.prototype,"termType",{enumerable:!0,value:"Wildcard"});var WILDCARD=new Wildcard$1;Wildcard$2.Wildcard=Wildcard$1;var SparqlParser=function(){var t=function(Oe,Te,je,Re){for(je=je||{},Re=Oe.length;Re--;je[Oe[Re]]=Te);return je},e=[6,12,13,15,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],n=[2,211],o=[107,117,120,122,123,132,133,138,322,323,324,325,326],d=[2,389],h=[1,22],l=[1,31],u=[13,16,35,195,219,224,312],p=[6,90],g=[45,46,58],v=[45,58],b=[1,62],_=[1,64],S=[1,60],T=[1,63],I=[1,69],P=[1,70],B=[26,34,35],L=[13,16,35,195,219,312],C=[13,16,312],O=[119,141,320,327],N=[13,16,119,141,312],M=[1,96],k=[1,100],W=[1,102],ae=[119,141,320,321,327],X=[13,16,119,141,312,321],G=[1,108],re=[2,253],F=[1,107],$=[13,16,34,35,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],U=[6,45,46,58,68,75,78,86,88,90],H=[6,13,16,34,45,46,58,68,75,78,86,88,90,312],ee=[6,13,16,26,34,35,37,38,45,46,48,58,68,75,78,86,87,88,90,93,100,116,119,132,133,135,140,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,330,331,333,334,335,336,337,338,339],ge=[34,35,45,46,58],me=[1,139],fe=[1,140],he=[1,151],_e=[1,131],xe=[1,125],Ne=[1,130],Ie=[1,132],Pe=[1,142],ve=[1,143],Le=[1,144],Fe=[1,145],Ue=[1,147],Me=[1,148],$e=[2,461],q=[1,157],oe=[1,158],Q=[1,159],Y=[1,152],ie=[1,153],se=[1,156],le=[1,166],ne=[1,167],ue=[1,168],de=[1,169],pe=[1,170],be=[1,171],we=[1,172],Se=[1,173],j=[1,174],w=[1,175],E=[1,165],D=[1,160],V=[1,161],Z=[1,162],ce=[1,163],Ae=[1,164],ke=[6,13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Be=[2,312],De=[1,199],Ce=[1,197],Ke=[6,191],We=[2,329],zt=[2,317],yt=[45,135],ye=[6,48,78,86,88,90],Ee=[2,257],qe=[1,213],Xe=[1,215],Ye=[6,48,75,78,86,88,90],qt=[2,255],Xt=[1,221],ht=[1,233],nr=[1,231],rt=[1,239],ir=[1,232],nt=[1,237],it=[1,238],qr=[6,68,75,78,86,88,90],hr=[37,38,191,250,278],Kt=[37,38,191,250,254,278],Jt=[37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,334,335,336,337,338,339],at=[26,37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,331,334,335,336,337,338,339],Xr=[1,267],Kr=[1,266],st=[6,13,16,26,34,35,37,38,46,48,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],Jr=[1,275],Wr=[1,274],ct=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],ar=[35,93],pr=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],Yr=[13,16,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Zr=[48,93],en=[34,38],Bt=[6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331],bt=[6,13,16,26,34,35,38,87,93,226,231,245,246,271,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331,333],tn=[1,299],rn=[1,300],nn=[6,116,191],Dt=[48,119],Ir=[6,48,86,88,90],an=[2,341],Tt=[2,333],xt=[1,340],It=[1,342],sr=[48,119,328],_t=[13,16,34,195,312],Mt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],tt=[13,16,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],Nr=[1,374],Pr=[1,375],sn=[13,16,26,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],Rr=[1,398],Ft=[1,399],on=[13,16,38,195,224,312],un=[1,416],Nt=[6,48,90],cn=[6,13,16,35,48,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],Cr=[6,13,16,34,35,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,226,231,245,246,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,339,340,341,342,343,344],kt=[46,48,90,119,167,168,170,173,174],or=[1,435],ur=[1,436],ln=[1,442],dn=[1,441],$t=[48,119,191,227,328],mr=[13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],yr=[13,16,34,35,38,48,87,93,119,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],gr=[13,16,38,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Lr=[35,48],fn=[2,332],hn=[1,497],pn=[1,494],mn=[1,495],yn=[6,13,16,26,34,35,37,38,46,48,68,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,329,331,334,335,336,337,338,339,340,341,342,343,344],Br=[1,515],br=[46,48,90,119,167,168,170,173,174,328],gn=[13,16,34,35,195,219,224,312],Ut=[6,13,16,34,35,48,75,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],bn=[13,16,34,35,38,48,87,93,119,191,195,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Wt=[6,13,16,34,35,48,81,83,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],_n=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],vn=[13,16,34,312],Ot=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],St=[2,344],_r=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],wn=[13,16,34,35,37,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],At=[2,339],En=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Tn=[13,16,38,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],cr=[46,48,90,119,167,168,170,173,174,191,227,328],On=[13,16,34,38,48,87,100,195,231,235,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Sn=[13,16,34,35,48,87,93,119,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],An=[2,327],Dr={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClauseWildcard:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifierNoGroup:21,SelectClauseVars:22,SelectQuery_repetition1:23,SolutionModifier:24,SelectClauseBase:25,"*":26,SelectClauseVars_repetition_plus0:27,SELECT:28,SelectClauseBase_option0:29,SubSelect:30,SubSelect_option0:31,SubSelect_option1:32,SelectClauseItem:33,VAR:34,"(":35,Expression:36,AS:37,")":38,VarTriple:39,ConstructQuery:40,CONSTRUCT:41,ConstructTemplate:42,ConstructQuery_repetition0:43,ConstructQuery_repetition1:44,WHERE:45,"{":46,ConstructQuery_option0:47,"}":48,DescribeQuery:49,DESCRIBE:50,DescribeQuery_group0:51,DescribeQuery_repetition0:52,DescribeQuery_option0:53,AskQuery:54,ASK:55,AskQuery_repetition0:56,DatasetClause:57,FROM:58,DatasetClause_option0:59,iri:60,WhereClause_option0:61,GroupGraphPattern:62,SolutionModifier_option0:63,SolutionModifierNoGroup_option0:64,SolutionModifierNoGroup_option1:65,SolutionModifierNoGroup_option2:66,GroupClause:67,GROUP:68,BY:69,GroupClause_repetition_plus0:70,GroupCondition:71,BuiltInCall:72,FunctionCall:73,HavingClause:74,HAVING:75,HavingClause_repetition_plus0:76,OrderClause:77,ORDER:78,OrderClause_repetition_plus0:79,OrderCondition:80,ASC:81,BrackettedExpression:82,DESC:83,Constraint:84,LimitOffsetClauses:85,LIMIT:86,INTEGER:87,OFFSET:88,ValuesClause:89,VALUES:90,InlineData:91,InlineData_repetition0:92,NIL:93,InlineData_repetition1:94,InlineData_repetition_plus2:95,InlineData_repetition3:96,DataBlockValue:97,Literal:98,ConstTriple:99,UNDEF:100,DataBlockValueList:101,DataBlockValueList_repetition_plus0:102,Update:103,Update_repetition0:104,Update1:105,Update_option0:106,LOAD:107,Update1_option0:108,Update1_option1:109,Update1_group0:110,Update1_option2:111,GraphRefAll:112,Update1_group1:113,Update1_option3:114,GraphOrDefault:115,TO:116,CREATE:117,Update1_option4:118,GRAPH:119,INSERTDATA:120,QuadPattern:121,DELETEDATA:122,DELETEWHERE:123,Update1_option5:124,InsertClause:125,Update1_option6:126,Update1_repetition0:127,Update1_option7:128,DeleteClause:129,Update1_option8:130,Update1_repetition1:131,DELETE:132,INSERT:133,UsingClause:134,USING:135,UsingClause_option0:136,WithClause:137,WITH:138,IntoGraphClause:139,INTO:140,DEFAULT:141,GraphOrDefault_option0:142,GraphRefAll_group0:143,QuadPattern_option0:144,QuadPattern_repetition0:145,QuadsNotTriples:146,QuadsNotTriples_group0:147,QuadsNotTriples_option0:148,QuadsNotTriples_option1:149,QuadsNotTriples_option2:150,TriplesTemplate:151,TriplesTemplate_repetition0:152,TriplesSameSubject:153,TriplesTemplate_option0:154,GroupGraphPatternSub:155,GroupGraphPatternSub_option0:156,GroupGraphPatternSub_repetition0:157,GroupGraphPatternSubTail:158,GraphPatternNotTriples:159,GroupGraphPatternSubTail_option0:160,GroupGraphPatternSubTail_option1:161,TriplesBlock:162,TriplesBlock_repetition0:163,TriplesSameSubjectPath:164,TriplesBlock_option0:165,GraphPatternNotTriples_repetition0:166,OPTIONAL:167,MINUS:168,GraphPatternNotTriples_group0:169,SERVICE:170,GraphPatternNotTriples_option0:171,GraphPatternNotTriples_group1:172,FILTER:173,BIND:174,FunctionCall_option0:175,FunctionCall_repetition0:176,ExpressionList:177,ExpressionList_repetition0:178,ConstructTemplate_option0:179,ConstructTriples:180,ConstructTriples_repetition0:181,ConstructTriples_option0:182,TriplesSameSubject_group0:183,PropertyListNotEmpty:184,TriplesNode:185,PropertyList:186,PropertyList_option0:187,VerbObjectList:188,PropertyListNotEmpty_repetition0:189,SemiOptionalVerbObjectList:190,";":191,SemiOptionalVerbObjectList_option0:192,Verb:193,ObjectList:194,a:195,ObjectList_repetition0:196,GraphNode:197,ObjectListPath:198,ObjectListPath_repetition0:199,GraphNodePath:200,TriplesSameSubjectPath_group0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,PropertyListPathNotEmpty_group0:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmpty_repetition1:207,PropertyListPathNotEmptyTail:208,PropertyListPathNotEmptyTail_group0:209,Path:210,Path_repetition0:211,PathSequence:212,PathSequence_repetition0:213,PathEltOrInverse:214,PathElt:215,PathPrimary:216,PathElt_option0:217,PathEltOrInverse_option0:218,"!":219,PathNegatedPropertySet:220,PathOneInPropertySet:221,PathNegatedPropertySet_repetition0:222,PathNegatedPropertySet_option0:223,"^":224,TriplesNode_repetition_plus0:225,"[":226,"]":227,TriplesNodePath_repetition_plus0:228,GraphNode_group0:229,GraphNodePath_group0:230,"<<":231,VarTriple_group0:232,VarTriple_group1:233,VarTriple_group2:234,">>":235,VarTriple_group3:236,VarTriple_group4:237,ConstTriple_group0:238,ConstTriple_group1:239,ConstTriple_group2:240,ConstTriple_group3:241,ConstTriple_group4:242,VarOrTerm:243,Term:244,BLANK_NODE_LABEL:245,ANON:246,ConditionalAndExpression:247,Expression_repetition0:248,ExpressionTail:249,"||":250,RelationalExpression:251,ConditionalAndExpression_repetition0:252,ConditionalAndExpressionTail:253,"&&":254,AdditiveExpression:255,RelationalExpression_group0:256,RelationalExpression_option0:257,IN:258,MultiplicativeExpression:259,AdditiveExpression_repetition0:260,AdditiveExpressionTail:261,AdditiveExpressionTail_group0:262,NumericLiteralPositive:263,AdditiveExpressionTail_repetition0:264,NumericLiteralNegative:265,AdditiveExpressionTail_repetition1:266,UnaryExpression:267,MultiplicativeExpression_repetition0:268,MultiplicativeExpressionTail:269,MultiplicativeExpressionTail_group0:270,"+":271,PrimaryExpression:272,"-":273,Aggregate:274,FUNC_ARITY0:275,FUNC_ARITY1:276,FUNC_ARITY2:277,",":278,IF:279,BuiltInCall_group0:280,BOUND:281,BNODE:282,BuiltInCall_option0:283,EXISTS:284,COUNT:285,Aggregate_option0:286,Aggregate_group0:287,FUNC_AGGREGATE:288,Aggregate_option1:289,GROUP_CONCAT:290,Aggregate_option2:291,Aggregate_option3:292,GroupConcatSeparator:293,SEPARATOR:294,"=":295,String:296,LANGTAG:297,"^^":298,DECIMAL:299,DOUBLE:300,BOOLEAN:301,STRING_LITERAL1:302,STRING_LITERAL2:303,STRING_LITERAL_LONG1:304,STRING_LITERAL_LONG2:305,INTEGER_POSITIVE:306,DECIMAL_POSITIVE:307,DOUBLE_POSITIVE:308,INTEGER_NEGATIVE:309,DECIMAL_NEGATIVE:310,DOUBLE_NEGATIVE:311,PNAME_LN:312,QueryOrUpdate_group0_option0:313,Prologue_repetition0_group0:314,SelectClauseBase_option0_group0:315,DISTINCT:316,REDUCED:317,DescribeQuery_group0_repetition_plus0_group0:318,DescribeQuery_group0_repetition_plus0:319,NAMED:320,SILENT:321,CLEAR:322,DROP:323,ADD:324,MOVE:325,COPY:326,ALL:327,".":328,UNION:329,"|":330,"/":331,PathElt_option0_group0:332,"?":333,"!=":334,"<":335,">":336,"<=":337,">=":338,NOT:339,CONCAT:340,COALESCE:341,SUBSTR:342,REGEX:343,REPLACE:344,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",26:"*",28:"SELECT",34:"VAR",35:"(",37:"AS",38:")",41:"CONSTRUCT",45:"WHERE",46:"{",48:"}",50:"DESCRIBE",55:"ASK",58:"FROM",68:"GROUP",69:"BY",75:"HAVING",78:"ORDER",81:"ASC",83:"DESC",86:"LIMIT",87:"INTEGER",88:"OFFSET",90:"VALUES",93:"NIL",100:"UNDEF",107:"LOAD",116:"TO",117:"CREATE",119:"GRAPH",120:"INSERTDATA",122:"DELETEDATA",123:"DELETEWHERE",132:"DELETE",133:"INSERT",135:"USING",138:"WITH",140:"INTO",141:"DEFAULT",167:"OPTIONAL",168:"MINUS",170:"SERVICE",173:"FILTER",174:"BIND",191:";",195:"a",219:"!",224:"^",226:"[",227:"]",231:"<<",235:">>",245:"BLANK_NODE_LABEL",246:"ANON",250:"||",254:"&&",258:"IN",271:"+",273:"-",275:"FUNC_ARITY0",276:"FUNC_ARITY1",277:"FUNC_ARITY2",278:",",279:"IF",281:"BOUND",282:"BNODE",284:"EXISTS",285:"COUNT",288:"FUNC_AGGREGATE",290:"GROUP_CONCAT",294:"SEPARATOR",295:"=",297:"LANGTAG",298:"^^",299:"DECIMAL",300:"DOUBLE",301:"BOOLEAN",302:"STRING_LITERAL1",303:"STRING_LITERAL2",304:"STRING_LITERAL_LONG1",305:"STRING_LITERAL_LONG2",306:"INTEGER_POSITIVE",307:"DECIMAL_POSITIVE",308:"DOUBLE_POSITIVE",309:"INTEGER_NEGATIVE",310:"DECIMAL_NEGATIVE",311:"DOUBLE_NEGATIVE",312:"PNAME_LN",316:"DISTINCT",317:"REDUCED",320:"NAMED",321:"SILENT",322:"CLEAR",323:"DROP",324:"ADD",325:"MOVE",326:"COPY",327:"ALL",328:".",329:"UNION",330:"|",331:"/",333:"?",334:"!=",335:"<",336:">",337:"<=",338:">=",339:"NOT",340:"CONCAT",341:"COALESCE",342:"SUBSTR",343:"REGEX",344:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[17,4],[18,2],[22,2],[25,2],[30,4],[30,4],[33,1],[33,5],[33,5],[40,5],[40,7],[49,5],[54,4],[57,3],[20,2],[24,2],[21,3],[67,3],[71,1],[71,1],[71,3],[71,5],[71,1],[74,2],[77,3],[80,2],[80,2],[80,1],[80,1],[85,2],[85,2],[85,4],[85,4],[89,2],[91,4],[91,4],[91,6],[97,1],[97,1],[97,1],[97,1],[101,3],[103,3],[105,4],[105,3],[105,5],[105,4],[105,2],[105,2],[105,2],[105,6],[105,6],[129,2],[125,2],[134,3],[137,2],[139,3],[115,1],[115,2],[112,2],[112,1],[121,4],[146,7],[151,3],[62,3],[62,3],[155,2],[158,3],[162,3],[159,2],[159,2],[159,2],[159,3],[159,4],[159,2],[159,6],[159,6],[159,1],[84,1],[84,1],[84,1],[73,2],[73,6],[177,1],[177,4],[42,3],[180,3],[153,2],[153,2],[186,1],[184,2],[190,2],[188,2],[193,1],[193,1],[193,1],[194,2],[198,2],[164,2],[164,2],[202,4],[208,1],[208,3],[210,2],[212,2],[215,2],[214,2],[216,1],[216,1],[216,2],[216,3],[220,1],[220,1],[220,4],[221,1],[221,1],[221,2],[221,2],[185,3],[185,3],[203,3],[203,3],[197,1],[197,1],[200,1],[200,1],[39,9],[39,5],[99,9],[99,5],[243,1],[243,1],[244,1],[244,1],[244,1],[244,1],[244,1],[36,2],[249,2],[247,2],[253,2],[251,1],[251,3],[251,4],[255,2],[261,2],[261,2],[261,2],[259,2],[269,2],[267,2],[267,2],[267,2],[267,1],[272,1],[272,1],[272,1],[272,1],[272,1],[272,1],[82,3],[72,1],[72,2],[72,4],[72,6],[72,8],[72,2],[72,4],[72,2],[72,4],[72,3],[274,5],[274,5],[274,6],[293,4],[98,1],[98,2],[98,3],[98,1],[98,1],[98,1],[98,1],[98,1],[98,1],[296,1],[296,1],[296,1],[296,1],[263,1],[263,1],[263,1],[265,1],[265,1],[265,1],[60,1],[60,1],[60,1],[313,0],[313,1],[5,1],[5,1],[5,1],[314,1],[314,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,2],[27,1],[27,2],[315,1],[315,1],[29,0],[29,1],[31,0],[31,1],[32,0],[32,1],[43,0],[43,2],[44,0],[44,2],[47,0],[47,1],[318,1],[318,1],[319,1],[319,2],[51,1],[51,1],[52,0],[52,2],[53,0],[53,1],[56,0],[56,2],[59,0],[59,1],[61,0],[61,1],[63,0],[63,1],[64,0],[64,1],[65,0],[65,1],[66,0],[66,1],[70,1],[70,2],[76,1],[76,2],[79,1],[79,2],[92,0],[92,2],[94,0],[94,2],[95,1],[95,2],[96,0],[96,2],[102,1],[102,2],[104,0],[104,4],[106,0],[106,2],[108,0],[108,1],[109,0],[109,1],[110,1],[110,1],[111,0],[111,1],[113,1],[113,1],[113,1],[114,0],[114,1],[118,0],[118,1],[124,0],[124,1],[126,0],[126,1],[127,0],[127,2],[128,0],[128,1],[130,0],[130,1],[131,0],[131,2],[136,0],[136,1],[142,0],[142,1],[143,1],[143,1],[143,1],[144,0],[144,1],[145,0],[145,2],[147,1],[147,1],[148,0],[148,1],[149,0],[149,1],[150,0],[150,1],[152,0],[152,3],[154,0],[154,1],[156,0],[156,1],[157,0],[157,2],[160,0],[160,1],[161,0],[161,1],[163,0],[163,3],[165,0],[165,1],[166,0],[166,3],[169,1],[169,1],[171,0],[171,1],[172,1],[172,1],[175,0],[175,1],[176,0],[176,3],[178,0],[178,3],[179,0],[179,1],[181,0],[181,3],[182,0],[182,1],[183,1],[183,1],[187,0],[187,1],[189,0],[189,2],[192,0],[192,1],[196,0],[196,3],[199,0],[199,3],[201,1],[201,1],[204,0],[204,1],[205,1],[205,1],[206,0],[206,3],[207,0],[207,2],[209,1],[209,1],[211,0],[211,3],[213,0],[213,3],[332,1],[332,1],[332,1],[217,0],[217,1],[218,0],[218,1],[222,0],[222,3],[223,0],[223,1],[225,1],[225,2],[228,1],[228,2],[229,1],[229,1],[230,1],[230,1],[232,1],[232,1],[233,1],[233,1],[234,1],[234,1],[236,1],[236,1],[237,1],[237,1],[238,1],[238,1],[239,1],[239,1],[240,1],[240,1],[241,1],[241,1],[242,1],[242,1],[248,0],[248,2],[252,0],[252,2],[256,1],[256,1],[256,1],[256,1],[256,1],[256,1],[257,0],[257,1],[260,0],[260,2],[262,1],[262,1],[264,0],[264,2],[266,0],[266,2],[268,0],[268,2],[270,1],[270,1],[280,1],[280,1],[280,1],[280,1],[280,1],[283,0],[283,1],[286,0],[286,1],[287,1],[287,1],[289,0],[289,1],[291,0],[291,1],[292,0],[292,1]],performAction:function(Te,je,Re,Ve,Qe,J,mt){var te=J.length-1;switch(Qe){case 1:if(J[te-1]=J[te-1]||{},He.base&&(J[te-1].base=He.base),He.base="",J[te-1].prefixes=He.prefixes,He.prefixes=null,He.pathOnly){if(J[te-1].type==="path"||"termType"in J[te-1])return J[te-1];throw new Error("Received full SPARQL query in path only mode")}else if(J[te-1].type==="path"||"termType"in J[te-1])throw new Error("Received only path in full SPARQL mode");if(J[te-1].type==="update"){const ze={};for(const Je of J[te-1].updates)if(Je.updateType==="insert"){const Ge={};for(const ot of Je.insert)if(ot.type==="bgp"||ot.type==="graph")for(const ut of ot.triples)ut.subject.termType==="BlankNode"&&(Ge[ut.subject.value]=!0),ut.predicate.termType==="BlankNode"&&(Ge[ut.predicate.value]=!0),ut.object.termType==="BlankNode"&&(Ge[ut.object.value]=!0);for(const ot of Object.keys(Ge)){if(ze[ot])throw new Error("Detected reuse blank node across different INSERT DATA clauses");ze[ot]=!0}}}return J[te-1];case 3:this.$=Ze(J[te-1],J[te],{type:"query"});break;case 4:He.base=lr(J[te]);break;case 5:He.prefixes||(He.prefixes={}),J[te-1]=J[te-1].substr(0,J[te-1].length-1),J[te]=lr(J[te]),He.prefixes[J[te-1]]=J[te];break;case 6:this.$=Ze(J[te-3],Ct(J[te-2]),J[te-1],J[te]);break;case 7:if(!He.skipValidation&&(Vr(J[te-3].variables.map(Je=>Ur(Je.expression))).some(Je=>Je.aggregation==="count"&&!(Je.expression instanceof vr))||J[te].group)){for(const Je of J[te-3].variables)if(Je.termType==="Variable"){if(!J[te].group||!J[te].group.map(Ge=>er(Ge)).includes(er(Je)))throw Error("Projection of ungrouped variable (?"+er(Je)+")")}else if(Ur(Je.expression).length===0){const Ge=Xn(Je.expression);for(const ot of Ge)if(!J[te].group||!J[te].group.map||!J[te].group.map(ut=>er(ut)).includes(er(ot)))throw Error("Use of ungrouped variable in projection of operation (?"+er(ot)+")")}}const tr=J[te-1].where.filter(ze=>ze.type==="query");if(tr.length>0){const ze=J[te-3].variables.filter(Ge=>Ge.variable&&Ge.variable.value).map(Ge=>Ge.variable.value),Je=Vr(tr.map(Ge=>Ge.variables)).map(Ge=>Ge.value||Ge.variable.value);for(const Ge of ze)if(Je.indexOf(Ge)>=0)throw Error("Target id of 'AS' (?"+Ge+") already used in subquery")}this.$=Ze(J[te-3],Ct(J[te-2]),J[te-1],J[te]);break;case 8:this.$=Ze(J[te-1],{variables:[new vr]});break;case 9:const Hr=J[te].map(ze=>ze.value||ze.variable.value),Ar=Kn(Hr);if(Ar.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Ar[0]+")");this.$=Ze(J[te-1],{variables:J[te]});break;case 10:this.$=Ze({queryType:"SELECT"},J[te]&&(J[te-1]=pt(J[te]),J[te]={},J[te][J[te-1]]=!0,J[te]));break;case 11:case 12:this.$=Ze(J[te-3],J[te-2],J[te-1],J[te],{type:"query"});break;case 13:case 100:case 137:case 166:this.$=dt(J[te]);break;case 14:case 28:this.$=Rt(J[te-3],{variable:dt(J[te-1])});break;case 15:this.$=fr(Rt(J[te-3],{variable:dt(J[te-1])}));break;case 16:this.$=Ze({queryType:"CONSTRUCT",template:J[te-3]},Ct(J[te-2]),J[te-1],J[te]);break;case 17:this.$=Ze({queryType:"CONSTRUCT",template:J[te-2]=J[te-2]?J[te-2].triples:[]},Ct(J[te-5]),{where:[{type:"bgp",triples:Yt([],J[te-2])}]},J[te]);break;case 18:this.$=Ze({queryType:"DESCRIBE",variables:J[te-3]==="*"?[new vr]:J[te-3].map(dt)},Ct(J[te-2]),J[te-1],J[te]);break;case 19:this.$=Ze({queryType:"ASK"},Ct(J[te-2]),J[te-1],J[te]);break;case 20:case 61:this.$={iri:J[te],named:!!J[te-1]};break;case 21:this.$={where:J[te].patterns};break;case 22:this.$=Ze(J[te-1],J[te]);break;case 23:this.$=Ze(J[te-2],J[te-1],J[te]);break;case 24:this.$={group:J[te]};break;case 25:case 26:case 32:case 34:this.$=Rt(J[te]);break;case 27:this.$=Rt(J[te-1]);break;case 29:case 35:this.$=Rt(dt(J[te]));break;case 30:this.$={having:J[te]};break;case 31:this.$={order:J[te]};break;case 33:this.$=Rt(J[te],{descending:!0});break;case 36:this.$={limit:Zt(J[te])};break;case 37:this.$={offset:Zt(J[te])};break;case 38:this.$={limit:Zt(J[te-2]),offset:Zt(J[te])};break;case 39:this.$={limit:Zt(J[te]),offset:Zt(J[te-2])};break;case 40:this.$={type:"values",values:J[te]};break;case 41:this.$=J[te-1].map(function(ze){var Je={};return Je[J[te-3]]=ze,Je});break;case 42:this.$=J[te-1].map(function(){return{}});break;case 43:var Lt=J[te-4].length;J[te-4]=J[te-4].map(dt),this.$=J[te-1].map(function(ze){if(ze.length!==Lt)throw Error("Inconsistent VALUES length");for(var Je={},Ge=0;Ge<Lt;Ge++)Je["?"+J[te-4][Ge].value]=ze[Ge];return Je});break;case 46:this.$=fr(J[te]);break;case 47:this.$=void 0;break;case 48:case 92:case 117:case 167:this.$=J[te-1];break;case 49:this.$={type:"update",updates:Pt(J[te-2],J[te-1])};break;case 50:this.$=Ze({type:"load",silent:!!J[te-2],source:J[te-1]},J[te]&&{destination:J[te]});break;case 51:this.$={type:pt(J[te-2]),silent:!!J[te-1],graph:J[te]};break;case 52:this.$={type:pt(J[te-4]),silent:!!J[te-3],source:J[te-2],destination:J[te]};break;case 53:this.$={type:"create",silent:!!J[te-2],graph:{type:"graph",name:J[te]}};break;case 54:this.$={updateType:"insert",insert:Mn(J[te])};break;case 55:this.$={updateType:"delete",delete:Gr(Mn(J[te]))};break;case 56:this.$={updateType:"deletewhere",delete:Gr(J[te])};break;case 57:this.$=Ze({updateType:"insertdelete"},J[te-5],{insert:J[te-4]||[]},{delete:J[te-3]||[]},Ct(J[te-2],"using"),{where:J[te].patterns});break;case 58:this.$=Ze({updateType:"insertdelete"},J[te-5],{delete:J[te-4]||[]},{insert:J[te-3]||[]},Ct(J[te-2],"using"),{where:J[te].patterns});break;case 59:this.$=Gr(J[te]);break;case 60:case 63:case 160:case 181:this.$=J[te];break;case 62:this.$={graph:J[te]};break;case 64:this.$={type:"graph",default:!0};break;case 65:case 66:this.$={type:"graph",name:J[te]};break;case 67:this.$={},this.$[pt(J[te])]=!0;break;case 68:this.$=J[te-2]?vt(J[te-1],[J[te-2]]):vt(J[te-1]);break;case 69:var Tr=Ze(J[te-3]||{triples:[]},{type:"graph",name:dt(J[te-5])});this.$=J[te]?[Tr,J[te]]:[Tr];break;case 70:case 75:this.$={type:"bgp",triples:vt(J[te-2],[J[te-1]])};break;case 71:this.$={type:"group",patterns:[J[te-1]]};break;case 72:for(const ze of J[te-1].filter(Je=>Je.type==="bind")){const Je=J[te-1].indexOf(ze),Ge=new Set;for(const ot of J[te-1].slice(0,Je))(ot.type==="group"||ot.type==="bgp")&&Dn(ot).forEach(ut=>Ge.add(ut));if(Ge.has(ze.variable.value))throw Error("Variable used to bind is already bound (?"+ze.variable.value+")")}this.$={type:"group",patterns:J[te-1]};break;case 73:this.$=J[te-1]?vt([J[te-1]],J[te]):vt(J[te]);break;case 74:this.$=J[te]?[J[te-2],J[te]]:J[te-2];break;case 76:J[te-1].length?this.$={type:"union",patterns:vt(J[te-1].map(Fr),[Fr(J[te])])}:this.$=J[te];break;case 77:this.$=Ze(J[te],{type:"optional"});break;case 78:this.$=Ze(J[te],{type:"minus"});break;case 79:this.$=Ze(J[te],{type:"graph",name:dt(J[te-1])});break;case 80:this.$=Ze(J[te],{type:"service",name:dt(J[te-1]),silent:!!J[te-2]});break;case 81:this.$={type:"filter",expression:J[te]};break;case 82:this.$={type:"bind",variable:dt(J[te-1]),expression:J[te-3]};break;case 83:this.$=fr({type:"bind",variable:dt(J[te-1]),expression:J[te-3]});break;case 88:this.$={type:"functionCall",function:J[te-1],args:[]};break;case 89:this.$={type:"functionCall",function:J[te-5],args:Pt(J[te-2],J[te-1]),distinct:!!J[te-3]};break;case 90:case 108:case 119:case 211:case 219:case 221:case 233:case 235:case 245:case 249:case 269:case 271:case 275:case 279:case 302:case 308:case 319:case 329:case 335:case 341:case 345:case 355:case 357:case 361:case 369:case 373:case 375:case 383:case 385:case 389:case 391:case 400:case 432:case 434:case 444:case 448:case 450:case 452:this.$=[];break;case 91:this.$=Pt(J[te-2],J[te-1]);break;case 93:this.$=vt(J[te-2],[J[te-1]]);break;case 94:case 105:this.$=J[te].map(function(ze){return Ze(Gt(J[te-1]),ze)});break;case 95:this.$=Yt(J[te].map(function(ze){return Ze(Gt(J[te-1].entity),ze)}),J[te-1].triples);break;case 97:this.$=vt([J[te-1]],J[te]);break;case 98:this.$=vt(J[te]);break;case 99:this.$=$r(J[te-1],J[te]);break;case 102:case 115:case 122:this.$=He.factory.namedNode(jn);break;case 103:case 104:this.$=Pt(J[te-1],J[te]);break;case 106:this.$=J[te]?Yt(J[te].map(function(ze){return Ze(Gt(J[te-1].entity),ze)}),J[te-1].triples):J[te-1].triples;break;case 107:this.$=$r(dt(J[te-3]),Pt(J[te-2],J[te-1]),J[te]);break;case 109:this.$=$r(dt(J[te-1]),J[te]);break;case 110:this.$=J[te-1].length?Qt("|",Pt(J[te-1],J[te])):J[te];break;case 111:this.$=J[te-1].length?Qt("/",Pt(J[te-1],J[te])):J[te];break;case 112:this.$=J[te]?Qt(J[te],[J[te-1]]):J[te-1];break;case 113:this.$=J[te-1]?Qt(J[te-1],[J[te]]):J[te];break;case 116:case 123:this.$=Qt(J[te-1],[J[te]]);break;case 120:this.$=Qt("|",Pt(J[te-2],J[te-1]));break;case 124:this.$=Qt(J[te-1],[He.factory.namedNode(jn)]);break;case 125:case 127:this.$=zn(J[te-1]);break;case 126:case 128:this.$=qn(J[te-1]);break;case 129:this.$={entity:J[te],triples:[]};break;case 131:this.$={entity:J[te],triples:[]};break;case 133:case 135:this.$=fr(He.factory.quad(J[te-4],J[te-3],J[te-2],dt(J[te-6])));break;case 134:case 136:this.$=fr(He.factory.quad(J[te-3],J[te-2],J[te-1]));break;case 141:this.$=dr(J[te].replace(/^(_:)/,""));break;case 142:this.$=dr();break;case 143:this.$=He.factory.namedNode(xn);break;case 144:case 146:case 151:case 155:this.$=Mr(J[te-1],J[te]);break;case 145:this.$=["||",J[te]];break;case 147:this.$=["&&",J[te]];break;case 149:this.$=ft(J[te-1],[J[te-2],J[te]]);break;case 150:this.$=ft(J[te-2]?"notin":"in",[J[te-3],J[te]]);break;case 152:case 156:this.$=[J[te-1],J[te]];break;case 153:this.$=["+",Mr(J[te-1],J[te])];break;case 154:var Or=wt(J[te-1].value.replace("-",""),J[te-1].datatype);this.$=["-",Mr(Or,J[te])];break;case 157:this.$=ft("UPLUS",[J[te]]);break;case 158:this.$=ft(J[te-1],[J[te]]);break;case 159:this.$=ft("UMINUS",[J[te]]);break;case 169:this.$=ft(pt(J[te-1]));break;case 170:this.$=ft(pt(J[te-3]),[J[te-1]]);break;case 171:this.$=ft(pt(J[te-5]),[J[te-3],J[te-1]]);break;case 172:this.$=ft(pt(J[te-7]),[J[te-5],J[te-3],J[te-1]]);break;case 173:this.$=ft(pt(J[te-1]),J[te]);break;case 174:this.$=ft("bound",[dt(J[te-1])]);break;case 175:this.$=ft(J[te-1],[]);break;case 176:this.$=ft(J[te-3],[J[te-1]]);break;case 177:this.$=ft(J[te-2]?"notexists":"exists",[Fr(J[te])]);break;case 178:case 179:this.$=Rt(J[te-1],{type:"aggregate",aggregation:pt(J[te-4]),distinct:!!J[te-2]});break;case 180:this.$=Rt(J[te-2],{type:"aggregate",aggregation:pt(J[te-5]),distinct:!!J[te-3],separator:typeof J[te-1]=="string"?J[te-1]:" "});break;case 182:this.$=wt(J[te]);break;case 183:this.$=Vn(J[te-1],pt(J[te].substr(1)));break;case 184:this.$=wt(J[te-2],J[te]);break;case 185:case 198:this.$=wt(J[te],In);break;case 186:case 199:this.$=wt(J[te],Nn);break;case 187:case 200:this.$=wt(pt(J[te]),Pn);break;case 190:this.$=wt(J[te].toLowerCase(),Un);break;case 191:case 192:this.$=Bn(J[te],1);break;case 193:case 194:this.$=Bn(J[te],3);break;case 195:this.$=wt(J[te].substr(1),In);break;case 196:this.$=wt(J[te].substr(1),Nn);break;case 197:this.$=wt(J[te].substr(1).toLowerCase(),Pn);break;case 201:this.$=He.factory.namedNode(lr(J[te]));break;case 202:var Sr=J[te].indexOf(":"),et=J[te].substr(0,Sr),Et=He.prefixes[et];if(!Et)throw new Error("Unknown prefix: "+et);var Ht=lr(Et+J[te].substr(Sr+1));this.$=He.factory.namedNode(Ht);break;case 203:if(J[te]=J[te].substr(0,J[te].length-1),!(J[te]in He.prefixes))throw new Error("Unknown prefix: "+J[te]);var Ht=lr(He.prefixes[J[te]]);this.$=He.factory.namedNode(Ht);break;case 212:case 220:case 222:case 224:case 234:case 236:case 242:case 246:case 250:case 264:case 266:case 268:case 270:case 272:case 274:case 276:case 278:case 303:case 309:case 320:case 336:case 370:case 386:case 405:case 407:case 433:case 435:case 445:case 449:case 451:case 453:J[te-1].push(J[te]);break;case 223:case 241:case 263:case 265:case 267:case 273:case 277:case 404:case 406:this.$=[J[te]];break;case 280:J[te-3].push(J[te-2]);break;case 330:case 342:case 346:case 356:case 358:case 362:case 374:case 376:case 384:case 390:case 392:case 401:J[te-2].push(J[te-1]);break}},table:[t(e,n,{3:1,4:2,7:3}),{1:[3]},t(o,[2,279],{5:4,8:5,313:6,210:7,9:8,103:9,211:10,17:11,40:12,49:13,54:14,104:15,18:16,22:17,25:21,6:[2,204],13:d,16:d,35:d,195:d,219:d,224:d,312:d,28:h,41:[1,18],50:[1,19],55:[1,20]}),t([6,13,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],[2,2],{314:23,11:24,14:25,12:[1,26],15:[1,27]}),{6:[1,28]},{6:[2,206]},{6:[2,207]},{6:[2,208]},{6:[2,217],10:29,89:30,90:l},{6:[2,205]},t(u,[2,391],{212:32,213:33}),t(p,[2,213]),t(p,[2,214]),t(p,[2,215]),t(p,[2,216]),{105:34,107:[1,35],110:36,113:37,117:[1,38],120:[1,39],122:[1,40],123:[1,41],124:42,128:43,132:[2,304],133:[2,298],137:49,138:[1,50],322:[1,44],323:[1,45],324:[1,46],325:[1,47],326:[1,48]},t(g,[2,219],{19:51}),t(g,[2,221],{23:52}),t(v,[2,235],{42:53,44:54,46:[1,55]}),{13:b,16:_,26:[1,58],34:S,51:56,60:61,312:T,318:59,319:57},t(g,[2,249],{56:65}),{26:[1,66],27:67,33:68,34:I,35:P},t(B,[2,227],{29:71,315:72,316:[1,73],317:[1,74]}),t(e,[2,212]),t(e,[2,209]),t(e,[2,210]),{13:[1,75]},{16:[1,76]},{1:[2,1]},{6:[2,3]},{6:[2,218]},{34:[1,78],35:[1,80],91:77,93:[1,79]},t([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],[2,110],{330:[1,81]}),t(L,[2,398],{214:82,218:83,224:[1,84]}),{6:[2,281],106:85,191:[1,86]},t(C,[2,283],{108:87,321:[1,88]}),t(O,[2,289],{111:89,321:[1,90]}),t(N,[2,294],{114:91,321:[1,92]}),{118:93,119:[2,296],321:[1,94]},{46:M,121:95},{46:M,121:97},{46:M,121:98},{125:99,133:k},{129:101,132:W},t(ae,[2,287]),t(ae,[2,288]),t(X,[2,291]),t(X,[2,292]),t(X,[2,293]),{132:[2,305],133:[2,299]},{13:b,16:_,60:103,312:T},{20:104,45:G,46:re,57:105,58:F,61:106},{20:109,45:G,46:re,57:110,58:F,61:106},t(g,[2,233],{43:111}),{45:[1,112],57:113,58:F},t($,[2,361],{179:114,180:115,181:116,48:[2,359]}),t(U,[2,245],{52:117}),t(U,[2,243],{60:61,318:118,13:b,16:_,34:S,312:T}),t(U,[2,244]),t(H,[2,241]),t(H,[2,239]),t(H,[2,240]),t(ee,[2,201]),t(ee,[2,202]),t(ee,[2,203]),{20:119,45:G,46:re,57:120,58:F,61:106},t(g,[2,8]),t(g,[2,9],{33:121,34:I,35:P}),t(ge,[2,223]),t(ge,[2,13]),{13:b,16:_,34:me,35:fe,36:122,39:123,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,231:xe,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(B,[2,10]),t(B,[2,228]),t(B,[2,225]),t(B,[2,226]),t(e,[2,4]),{13:[1,176]},t(ke,[2,40]),{46:[1,177]},{46:[1,178]},{34:[1,180],95:179},t(u,[2,390]),t([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330],[2,111],{331:[1,181]}),{13:b,16:_,35:[1,187],60:184,195:[1,185],215:182,216:183,219:[1,186],312:T},t(L,[2,399]),{6:[2,49]},t(e,n,{7:3,4:188}),{13:b,16:_,60:189,312:T},t(C,[2,284]),{112:190,119:[1,191],141:[1,193],143:192,320:[1,194],327:[1,195]},t(O,[2,290]),t(C,Be,{115:196,142:198,119:De,141:Ce}),t(N,[2,295]),{119:[1,200]},{119:[2,297]},t(Ke,[2,54]),t($,We,{144:201,151:202,152:203,48:zt,119:zt}),t(Ke,[2,55]),t(Ke,[2,56]),t(yt,[2,300],{126:204,129:205,132:W}),{46:M,121:206},t(yt,[2,306],{130:207,125:208,133:k}),{46:M,121:209},t([132,133],[2,62]),t(ye,Ee,{21:210,64:211,74:212,75:qe}),t(g,[2,220]),{46:Xe,62:214},t(C,[2,251],{59:216,320:[1,217]}),{46:[2,254]},t(Ye,qt,{24:218,63:219,67:220,68:Xt}),t(g,[2,222]),{20:222,45:G,46:re,57:223,58:F,61:106},{46:[1,224]},t(v,[2,236]),{48:[1,225]},{48:[2,360]},{13:b,16:_,34:ht,35:nr,39:230,60:235,87:he,93:rt,98:236,153:226,183:227,185:228,226:ir,231:xe,243:229,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(qr,[2,247],{61:106,53:240,57:241,20:242,45:G,46:re,58:F}),t(H,[2,242]),t(Ye,qt,{63:219,67:220,24:243,68:Xt}),t(g,[2,250]),t(ge,[2,224]),{37:[1,244]},{37:[1,245]},t(hr,[2,432],{248:246}),{13:b,16:_,34:ht,39:249,60:235,87:he,93:rt,98:236,119:[1,247],231:xe,236:248,243:250,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(Kt,[2,434],{252:251}),t(Kt,[2,148],{256:252,257:253,258:[2,442],295:[1,254],334:[1,255],335:[1,256],336:[1,257],337:[1,258],338:[1,259],339:[1,260]}),t(Jt,[2,444],{260:261}),t(at,[2,452],{268:262}),{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,263:154,265:155,272:263,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,263:154,265:155,272:264,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,263:154,265:155,272:265,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(at,[2,160]),t(at,[2,161]),t(at,[2,162]),t(at,[2,163],{35:Xr,93:Kr}),t(at,[2,164]),t(at,[2,165]),t(at,[2,166]),{13:b,16:_,34:me,35:fe,36:268,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(st,[2,168]),{93:[1,269]},{35:[1,270]},{35:[1,271]},{35:[1,272]},{35:Jr,93:Wr,177:273},{35:[1,276]},{35:[1,278],93:[1,277]},{284:[1,279]},t(ct,[2,182],{297:[1,280],298:[1,281]}),t(ct,[2,185]),t(ct,[2,186]),t(ct,[2,187]),t(ct,[2,188]),t(ct,[2,189]),t(ct,[2,190]),{35:[1,282]},{35:[1,283]},{35:[1,284]},t(ar,[2,456]),t(ar,[2,457]),t(ar,[2,458]),t(ar,[2,459]),t(ar,[2,460]),{284:[2,462]},t(pr,[2,191]),t(pr,[2,192]),t(pr,[2,193]),t(pr,[2,194]),t(ct,[2,195]),t(ct,[2,196]),t(ct,[2,197]),t(ct,[2,198]),t(ct,[2,199]),t(ct,[2,200]),t(e,[2,5]),t(Yr,[2,269],{92:285}),t(Zr,[2,271],{94:286}),{34:[1,288],38:[1,287]},t(en,[2,273]),t(u,[2,392]),t(Bt,[2,113]),t(Bt,[2,396],{217:289,332:290,26:[1,292],271:[1,293],333:[1,291]}),t(bt,[2,114]),t(bt,[2,115]),{13:b,16:_,35:[1,297],60:298,93:[1,296],195:tn,220:294,221:295,224:rn,312:T},t(u,d,{211:10,210:301}),t(o,[2,280],{6:[2,282]}),t(Ke,[2,285],{109:302,139:303,140:[1,304]}),t(Ke,[2,51]),{13:b,16:_,60:305,312:T},t(Ke,[2,67]),t(Ke,[2,314]),t(Ke,[2,315]),t(Ke,[2,316]),{116:[1,306]},t(nn,[2,64]),{13:b,16:_,60:307,312:T},t(C,[2,313]),{13:b,16:_,60:308,312:T},t(Dt,[2,319],{145:309}),t(Dt,[2,318]),{13:b,16:_,34:ht,35:nr,39:230,60:235,87:he,93:rt,98:236,153:310,183:227,185:228,226:ir,231:xe,243:229,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(yt,[2,302],{127:311}),t(yt,[2,301]),t([45,132,135],[2,60]),t(yt,[2,308],{131:312}),t(yt,[2,307]),t([45,133,135],[2,59]),t(p,[2,6]),t(Ir,[2,259],{65:313,77:314,78:[1,315]}),t(ye,[2,258]),{13:b,16:_,35:fe,60:321,72:319,73:320,76:316,82:318,84:317,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t([6,48,68,75,78,86,88,90],[2,21]),t($,an,{25:21,30:322,155:323,18:324,22:325,156:326,162:327,163:328,28:h,46:Tt,48:Tt,90:Tt,119:Tt,167:Tt,168:Tt,170:Tt,173:Tt,174:Tt}),{13:b,16:_,60:329,312:T},t(C,[2,252]),t(p,[2,7]),t(ye,Ee,{64:211,74:212,21:330,75:qe}),t(Ye,[2,256]),{69:[1,331]},t(Ye,qt,{63:219,67:220,24:332,68:Xt}),t(g,[2,234]),t($,We,{152:203,47:333,151:334,48:[2,237]}),t(g,[2,92]),{48:[2,363],182:335,328:[1,336]},{13:b,16:_,34:xt,60:341,184:337,188:338,193:339,195:It,312:T},t(sr,[2,367],{188:338,193:339,60:341,186:343,187:344,184:345,13:b,16:_,34:xt,195:It,312:T}),t(_t,[2,365]),t(_t,[2,366]),{13:b,16:_,34:ht,35:nr,39:351,60:235,87:he,93:rt,98:236,185:349,197:347,225:346,226:ir,229:348,231:xe,243:350,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},{13:b,16:_,34:xt,60:341,184:352,188:338,193:339,195:It,312:T},t(Mt,[2,137]),t(Mt,[2,138]),t(Mt,[2,139]),t(Mt,[2,140]),t(Mt,[2,141]),t(Mt,[2,142]),t(Mt,[2,143]),t(Ye,qt,{63:219,67:220,24:353,68:Xt}),t(U,[2,246]),t(qr,[2,248]),t(p,[2,19]),{34:[1,354]},{34:[1,355]},t([37,38,191,278],[2,144],{249:356,250:[1,357]}),{13:b,16:_,34:[1,359],60:360,232:358,312:T},{13:b,16:_,34:xt,60:341,193:361,195:It,312:T},t(_t,[2,418]),t(_t,[2,419]),t(hr,[2,146],{253:362,254:[1,363]}),{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,255:364,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{258:[1,365]},t(tt,[2,436]),t(tt,[2,437]),t(tt,[2,438]),t(tt,[2,439]),t(tt,[2,440]),t(tt,[2,441]),{258:[2,443]},t([37,38,191,250,254,258,278,295,334,335,336,337,338,339],[2,151],{261:366,262:367,263:368,265:369,271:[1,370],273:[1,371],306:pe,307:be,308:we,309:Se,310:j,311:w}),t(Jt,[2,155],{269:372,270:373,26:Nr,331:Pr}),t(at,[2,157]),t(at,[2,158]),t(at,[2,159]),t(st,[2,88]),t(tt,[2,353],{175:376,316:[1,377]}),{38:[1,378]},t(st,[2,169]),{13:b,16:_,34:me,35:fe,36:379,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{13:b,16:_,34:me,35:fe,36:380,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{13:b,16:_,34:me,35:fe,36:381,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(st,[2,173]),t(st,[2,90]),t(tt,[2,357],{178:382}),{34:[1,383]},t(st,[2,175]),{13:b,16:_,34:me,35:fe,36:384,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{46:Xe,62:385},t(ct,[2,183]),{13:b,16:_,60:386,312:T},t(sn,[2,463],{286:387,316:[1,388]}),t(tt,[2,467],{289:389,316:[1,390]}),t(tt,[2,469],{291:391,316:[1,392]}),{13:b,16:_,48:[1,393],60:395,87:he,97:394,98:396,99:397,100:Rr,231:Ft,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},{48:[1,400],93:[1,401]},{46:[1,402]},t(en,[2,274]),t(Bt,[2,112]),t(Bt,[2,397]),t(Bt,[2,393]),t(Bt,[2,394]),t(Bt,[2,395]),t(bt,[2,116]),t(bt,[2,118]),t(bt,[2,119]),t(on,[2,400],{222:403}),t(bt,[2,121]),t(bt,[2,122]),{13:b,16:_,60:404,195:[1,405],312:T},{38:[1,406]},t(Ke,[2,50]),t(Ke,[2,286]),{119:[1,407]},t(Ke,[2,66]),t(C,Be,{142:198,115:408,119:De,141:Ce}),t(nn,[2,65]),t(Ke,[2,53]),{48:[1,409],119:[1,411],146:410},t(Dt,[2,331],{154:412,328:[1,413]}),{45:[1,414],134:415,135:un},{45:[1,417],134:418,135:un},t(Nt,[2,261],{66:419,85:420,86:[1,421],88:[1,422]}),t(Ir,[2,260]),{69:[1,423]},t(ye,[2,30],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:424,13:b,16:_,35:fe,275:Pe,276:ve,277:Le,279:Fe,281:Ue,282:Me,284:$e,285:q,288:oe,290:Q,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae}),t(cn,[2,265]),t(Cr,[2,85]),t(Cr,[2,86]),t(Cr,[2,87]),{35:Xr,93:Kr},{48:[1,425]},{48:[1,426]},{20:427,45:G,46:re,61:106},{20:428,45:G,46:re,61:106},t(kt,[2,335],{157:429}),t(kt,[2,334]),{13:b,16:_,34:ht,35:or,39:434,60:235,87:he,93:rt,98:236,164:430,201:431,203:432,226:ur,231:xe,243:433,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(U,[2,20]),t(Nt,[2,22]),{13:b,16:_,34:ln,35:dn,60:321,70:437,71:438,72:439,73:440,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(p,[2,16]),{48:[1,443]},{48:[2,238]},{48:[2,93]},t($,[2,362],{48:[2,364]}),t(sr,[2,94]),t($t,[2,369],{189:444}),t($,[2,373],{194:445,196:446}),t($,[2,100]),t($,[2,101]),t($,[2,102]),t(sr,[2,95]),t(sr,[2,96]),t(sr,[2,368]),{13:b,16:_,34:ht,35:nr,38:[1,447],39:351,60:235,87:he,93:rt,98:236,185:349,197:448,226:ir,229:348,231:xe,243:350,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(mr,[2,404]),t(yr,[2,129]),t(yr,[2,130]),t(yr,[2,408]),t(yr,[2,409]),{227:[1,449]},t(p,[2,18]),{38:[1,450]},{38:[1,451]},t(hr,[2,433]),{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:452,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{46:[1,453]},{46:[2,412]},{46:[2,413]},{13:b,16:_,34:ht,39:455,60:235,87:he,93:rt,98:236,231:xe,237:454,243:456,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(Kt,[2,435]),{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,251:457,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(Kt,[2,149]),{35:Jr,93:Wr,177:458},t(Jt,[2,445]),{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,259:459,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(at,[2,448],{264:460}),t(at,[2,450],{266:461}),t(tt,[2,446]),t(tt,[2,447]),t(at,[2,453]),{13:b,16:_,34:me,35:fe,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,263:154,265:155,267:462,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(tt,[2,454]),t(tt,[2,455]),t(tt,[2,355],{176:463}),t(tt,[2,354]),t([6,13,16,26,34,35,37,38,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],[2,167]),{38:[1,464]},{278:[1,465]},{278:[1,466]},{13:b,16:_,34:me,35:fe,36:467,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{38:[1,468]},{38:[1,469]},t(st,[2,177]),t(ct,[2,184]),{13:b,16:_,26:[1,471],34:me,35:fe,36:472,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,287:470,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(sn,[2,464]),{13:b,16:_,34:me,35:fe,36:473,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(tt,[2,468]),{13:b,16:_,34:me,35:fe,36:474,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(tt,[2,470]),t(ke,[2,41]),t(Yr,[2,270]),t(gr,[2,44]),t(gr,[2,45]),t(gr,[2,46]),t(gr,[2,47]),{13:b,16:_,60:235,87:he,93:rt,98:236,99:477,119:[1,475],231:Ft,241:476,244:478,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(ke,[2,42]),t(Zr,[2,272]),t(Lr,[2,275],{96:479}),{13:b,16:_,38:[2,402],60:298,195:tn,221:481,223:480,224:rn,312:T},t(bt,[2,123]),t(bt,[2,124]),t(bt,[2,117]),{13:b,16:_,60:482,312:T},t(Ke,[2,52]),t([6,45,132,133,135,191],[2,68]),t(Dt,[2,320]),{13:b,16:_,34:[1,484],60:485,147:483,312:T},t(Dt,[2,70]),t($,[2,330],{48:fn,119:fn}),{46:Xe,62:486},t(yt,[2,303]),t(C,[2,310],{136:487,320:[1,488]}),{46:Xe,62:489},t(yt,[2,309]),t(Nt,[2,23]),t(Nt,[2,262]),{87:[1,490]},{87:[1,491]},{13:b,16:_,34:hn,35:fe,60:321,72:319,73:320,79:492,80:493,81:pn,82:318,83:mn,84:496,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(cn,[2,266]),t(yn,[2,71]),t(yn,[2,72]),t(ye,Ee,{64:211,74:212,21:498,75:qe}),t(Ye,qt,{63:219,67:220,24:499,68:Xt}),{46:[2,345],48:[2,73],89:509,90:l,119:[1,505],158:500,159:501,166:502,167:[1,503],168:[1,504],170:[1,506],173:[1,507],174:[1,508]},t(kt,[2,343],{165:510,328:[1,511]}),t(u,d,{211:10,202:512,205:513,210:514,34:Br}),t(br,[2,379],{211:10,205:513,210:514,204:516,202:517,13:d,16:d,35:d,195:d,219:d,224:d,312:d,34:Br}),t(gn,[2,377]),t(gn,[2,378]),{13:b,16:_,34:ht,35:or,39:523,60:235,87:he,93:rt,98:236,200:519,203:521,226:ur,228:518,230:520,231:xe,243:522,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(u,d,{211:10,205:513,210:514,202:524,34:Br}),t(Ye,[2,24],{274:141,280:146,283:149,60:321,72:439,73:440,71:525,13:b,16:_,34:ln,35:dn,275:Pe,276:ve,277:Le,279:Fe,281:Ue,282:Me,284:$e,285:q,288:oe,290:Q,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae}),t(Ut,[2,263]),t(Ut,[2,25]),t(Ut,[2,26]),{13:b,16:_,34:me,35:fe,36:526,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(Ut,[2,29]),t(Ye,qt,{63:219,67:220,24:527,68:Xt}),t([48,119,227,328],[2,97],{190:528,191:[1,529]}),t($t,[2,99]),{13:b,16:_,34:ht,35:nr,39:351,60:235,87:he,93:rt,98:236,185:349,197:530,226:ir,229:348,231:xe,243:350,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(bn,[2,125]),t(mr,[2,405]),t(bn,[2,126]),t(ge,[2,14]),t(ge,[2,15]),t(hr,[2,145]),{13:b,16:_,34:ht,39:532,60:235,87:he,93:rt,98:236,231:xe,233:531,243:533,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},{235:[1,534]},{235:[2,420]},{235:[2,421]},t(Kt,[2,147]),t(Kt,[2,150]),t(Jt,[2,152]),t(Jt,[2,153],{270:373,269:535,26:Nr,331:Pr}),t(Jt,[2,154],{270:373,269:536,26:Nr,331:Pr}),t(at,[2,156]),{13:b,16:_,34:me,35:fe,36:537,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(st,[2,170]),{13:b,16:_,34:me,35:fe,36:538,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{13:b,16:_,34:me,35:fe,36:539,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{38:[1,540],278:[1,541]},t(st,[2,174]),t(st,[2,176]),{38:[1,542]},{38:[2,465]},{38:[2,466]},{38:[1,543]},{38:[2,471],191:[1,546],292:544,293:545},{13:b,16:_,34:[1,548],60:549,238:547,312:T},{13:b,16:_,34:xt,60:341,193:550,195:It,312:T},t(_t,[2,428]),t(_t,[2,429]),{35:[1,553],48:[1,551],101:552},{38:[1,554]},{38:[2,403],330:[1,555]},t(Ke,[2,63]),{46:[1,556]},{46:[2,321]},{46:[2,322]},t(Ke,[2,57]),{13:b,16:_,60:557,312:T},t(C,[2,311]),t(Ke,[2,58]),t(Nt,[2,36],{88:[1,558]}),t(Nt,[2,37],{86:[1,559]}),t(Ir,[2,31],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:496,80:560,13:b,16:_,34:hn,35:fe,81:pn,83:mn,275:Pe,276:ve,277:Le,279:Fe,281:Ue,282:Me,284:$e,285:q,288:oe,290:Q,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae}),t(Wt,[2,267]),{35:fe,82:561},{35:fe,82:562},t(Wt,[2,34]),t(Wt,[2,35]),{31:563,48:[2,229],89:564,90:l},{32:565,48:[2,231],89:566,90:l},t(kt,[2,336]),t(_n,[2,337],{160:567,328:[1,568]}),{46:Xe,62:569},{46:Xe,62:570},{46:Xe,62:571},{13:b,16:_,34:[1,573],60:574,169:572,312:T},t(vn,[2,349],{171:575,321:[1,576]}),{13:b,16:_,35:fe,60:321,72:319,73:320,82:318,84:577,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{35:[1,578]},t(Ot,[2,84]),t(kt,[2,75]),t($,[2,342],{46:St,48:St,90:St,119:St,167:St,168:St,170:St,173:St,174:St}),t(br,[2,105]),t($,[2,383],{206:579}),t($,[2,381]),t($,[2,382]),t(br,[2,106]),t(br,[2,380]),{13:b,16:_,34:ht,35:or,38:[1,580],39:523,60:235,87:he,93:rt,98:236,200:581,203:521,226:ur,230:520,231:xe,243:522,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(mr,[2,406]),t(_r,[2,131]),t(_r,[2,132]),t(_r,[2,410]),t(_r,[2,411]),{227:[1,582]},t(Ut,[2,264]),{37:[1,584],38:[1,583]},t(p,[2,17]),t($t,[2,370]),t($t,[2,371],{193:339,60:341,192:585,188:586,13:b,16:_,34:xt,195:It,312:T}),t($t,[2,103],{278:[1,587]}),{13:b,16:_,34:xt,60:341,193:588,195:It,312:T},t(_t,[2,414]),t(_t,[2,415]),t(wn,[2,134]),t(at,[2,449]),t(at,[2,451]),{38:[1,589],278:[1,590]},{38:[1,591]},{278:[1,592]},t(st,[2,91]),t(tt,[2,358]),t(st,[2,178]),t(st,[2,179]),{38:[1,593]},{38:[2,472]},{294:[1,594]},{46:[1,595]},{46:[2,422]},{46:[2,423]},{13:b,16:_,60:235,87:he,93:rt,98:236,99:597,231:Ft,242:596,244:598,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(ke,[2,43]),t(Lr,[2,276]),{13:b,16:_,60:395,87:he,97:600,98:396,99:397,100:Rr,102:599,231:Ft,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(bt,[2,120]),t(on,[2,401]),t($,We,{152:203,148:601,151:602,48:[2,323]}),t(yt,[2,61]),{87:[1,603]},{87:[1,604]},t(Wt,[2,268]),t(Wt,[2,32]),t(Wt,[2,33]),{48:[2,11]},{48:[2,230]},{48:[2,12]},{48:[2,232]},t($,an,{163:328,161:605,162:606,46:At,48:At,90:At,119:At,167:At,168:At,170:At,173:At,174:At}),t(_n,[2,338]),t(Ot,[2,76],{329:[1,607]}),t(Ot,[2,77]),t(Ot,[2,78]),{46:Xe,62:608},{46:[2,347]},{46:[2,348]},{13:b,16:_,34:[1,610],60:611,172:609,312:T},t(vn,[2,350]),t(Ot,[2,81]),{13:b,16:_,34:me,35:fe,36:612,39:613,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,231:xe,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},{13:b,16:_,34:ht,35:or,39:523,60:235,87:he,93:rt,98:236,200:614,203:521,226:ur,230:520,231:xe,243:522,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(En,[2,127]),t(mr,[2,407]),t(En,[2,128]),t(Ut,[2,27]),{34:[1,615]},t($t,[2,98]),t($t,[2,372]),t($,[2,374]),{13:b,16:_,34:ht,39:617,60:235,87:he,93:rt,98:236,231:xe,234:616,243:618,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(st,[2,89]),t(tt,[2,356]),t(st,[2,171]),{13:b,16:_,34:me,35:fe,36:619,60:136,72:135,73:137,82:134,87:he,98:138,219:_e,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ne,272:133,273:Ie,274:141,275:Pe,276:ve,277:Le,279:Fe,280:146,281:Ue,282:Me,283:149,284:$e,285:q,288:oe,290:Q,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T,339:E,340:D,341:V,342:Z,343:ce,344:Ae},t(st,[2,180]),{295:[1,620]},{13:b,16:_,60:235,87:he,93:rt,98:236,99:622,231:Ft,239:621,244:623,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},{235:[1,624]},{235:[2,430]},{235:[2,431]},{13:b,16:_,38:[1,625],60:395,87:he,97:626,98:396,99:397,100:Rr,231:Ft,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(Tn,[2,277]),{48:[1,627]},{48:[2,324]},t(Nt,[2,38]),t(Nt,[2,39]),t(kt,[2,74]),t(kt,[2,340]),{46:[2,346]},t(Ot,[2,79]),{46:Xe,62:628},{46:[2,351]},{46:[2,352]},{37:[1,629]},{37:[1,630]},t(cr,[2,385],{207:631,278:[1,632]}),{38:[1,633]},{48:[1,634]},{48:[2,416]},{48:[2,417]},{38:[1,635]},{296:636,302:le,303:ne,304:ue,305:de},{13:b,16:_,34:xt,60:341,193:637,195:It,312:T},t(_t,[2,424]),t(_t,[2,425]),t(On,[2,136]),t(Lr,[2,48]),t(Tn,[2,278]),t(Sn,[2,325],{149:638,328:[1,639]}),t(Ot,[2,80]),{34:[1,640]},{34:[1,641]},t([46,48,90,119,167,168,170,173,174,227,328],[2,107],{208:642,191:[1,643]}),t($,[2,384]),t(Ut,[2,28]),{235:[1,644]},t(st,[2,172]),{38:[2,181]},{13:b,16:_,60:235,87:he,93:rt,98:236,99:646,231:Ft,240:645,244:647,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t($,We,{152:203,150:648,151:649,48:An,119:An}),t(Sn,[2,326]),{38:[1,650]},{38:[1,651]},t(cr,[2,386]),t(cr,[2,108],{211:10,209:652,210:653,13:d,16:d,35:d,195:d,219:d,224:d,312:d,34:[1,654]}),t(wn,[2,133]),{48:[1,655]},{48:[2,426]},{48:[2,427]},t(Dt,[2,69]),t(Dt,[2,328]),t(Ot,[2,82]),t(Ot,[2,83]),t($,[2,375],{198:656,199:657}),t($,[2,387]),t($,[2,388]),{235:[1,658]},t(cr,[2,109]),{13:b,16:_,34:ht,35:or,39:523,60:235,87:he,93:rt,98:236,200:659,203:521,226:ur,230:520,231:xe,243:522,244:234,245:nt,246:it,263:154,265:155,296:150,299:Y,300:ie,301:se,302:le,303:ne,304:ue,305:de,306:pe,307:be,308:we,309:Se,310:j,311:w,312:T},t(On,[2,135]),t(cr,[2,104],{278:[1,660]}),t($,[2,376])],defaultActions:{5:[2,206],6:[2,207],7:[2,208],9:[2,205],28:[2,1],29:[2,3],30:[2,218],85:[2,49],94:[2,297],108:[2,254],115:[2,360],165:[2,462],260:[2,443],334:[2,238],335:[2,93],359:[2,412],360:[2,413],455:[2,420],456:[2,421],471:[2,465],472:[2,466],484:[2,321],485:[2,322],545:[2,472],548:[2,422],549:[2,423],563:[2,11],564:[2,230],565:[2,12],566:[2,232],573:[2,347],574:[2,348],597:[2,430],598:[2,431],602:[2,324],607:[2,346],610:[2,351],611:[2,352],617:[2,416],618:[2,417],636:[2,181],646:[2,426],647:[2,427]},parseError:function(Te,je){if(je.recoverable)this.trace(Te);else{var Re=new Error(Te);throw Re.hash=je,Re}},parse:function(Te){var je=this,Re=[0],Ve=[null],Qe=[],J=this.table,mt="",te=0,Lt=0,Tr=2,Or=1,Sr=Qe.slice.call(arguments,1),et=Object.create(this.lexer),Et={yy:{}};for(var Ht in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ht)&&(Et.yy[Ht]=this.yy[Ht]);et.setInput(Te,Et.yy),Et.yy.lexer=et,Et.yy.parser=this,typeof et.yylloc>"u"&&(et.yylloc={});var tr=et.yylloc;Qe.push(tr);var Hr=et.options&&et.options.ranges;typeof Et.yy.parseError=="function"?this.parseError=Et.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Ar=function(){var rr;return rr=et.lex()||Or,typeof rr!="number"&&(rr=je.symbols_[rr]||rr),rr},ze,Je,Ge,ot,ut={},jr,jt,Fn,xr;;){if(Je=Re[Re.length-1],this.defaultActions[Je]?Ge=this.defaultActions[Je]:((ze===null||typeof ze>"u")&&(ze=Ar()),Ge=J[Je]&&J[Je][ze]),typeof Ge>"u"||!Ge.length||!Ge[0]){var zr="";xr=[];for(jr in J[Je])this.terminals_[jr]&&jr>Tr&&xr.push("'"+this.terminals_[jr]+"'");et.showPosition?zr="Parse error on line "+(te+1)+`:
`+et.showPosition()+`
Expecting `+xr.join(", ")+", got '"+(this.terminals_[ze]||ze)+"'":zr="Parse error on line "+(te+1)+": Unexpected "+(ze==Or?"end of input":"'"+(this.terminals_[ze]||ze)+"'"),this.parseError(zr,{text:et.match,token:this.terminals_[ze]||ze,line:et.yylineno,loc:tr,expected:xr})}if(Ge[0]instanceof Array&&Ge.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Je+", token: "+ze);switch(Ge[0]){case 1:Re.push(ze),Ve.push(et.yytext),Qe.push(et.yylloc),Re.push(Ge[1]),ze=null,Lt=et.yyleng,mt=et.yytext,te=et.yylineno,tr=et.yylloc;break;case 2:if(jt=this.productions_[Ge[1]][1],ut.$=Ve[Ve.length-jt],ut._$={first_line:Qe[Qe.length-(jt||1)].first_line,last_line:Qe[Qe.length-1].last_line,first_column:Qe[Qe.length-(jt||1)].first_column,last_column:Qe[Qe.length-1].last_column},Hr&&(ut._$.range=[Qe[Qe.length-(jt||1)].range[0],Qe[Qe.length-1].range[1]]),ot=this.performAction.apply(ut,[mt,Lt,te,Et.yy,Ge[1],Ve,Qe].concat(Sr)),typeof ot<"u")return ot;jt&&(Re=Re.slice(0,-1*jt*2),Ve=Ve.slice(0,-1*jt),Qe=Qe.slice(0,-1*jt)),Re.push(this.productions_[Ge[1]][0]),Ve.push(ut.$),Qe.push(ut._$),Fn=J[Re[Re.length-2]][Re[Re.length-1]],Re.push(Fn);break;case 3:return!0}}return!0}},vr=Wildcard$2.Wildcard,wr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",jn=wr+"type",kn=wr+"first",$n=wr+"rest",xn=wr+"nil",Er="http://www.w3.org/2001/XMLSchema#",In=Er+"integer",Nn=Er+"decimal",Pn=Er+"double",Un=Er+"boolean",Vt="",Rn="",Cn="";function pt(Oe){return Oe.toLowerCase()}function Pt(Oe,Te){return Oe.push(Te),Oe}function Yt(Oe,Te){return Oe.push.apply(Oe,Te),Oe}function Ze(Oe){Oe||(Oe={});for(var Te=1,je=arguments.length,Re;Te<je&&(Re=arguments[Te]||{});Te++)for(var Ve in Re)Oe[Ve]=Re[Ve];return Oe}function vt(){for(var Oe=[],Te=0,je=arguments.length;Te<je;Te++)Oe=Oe.concat.apply(Oe,arguments[Te]);return Oe}function lr(Oe){if(Oe[0]==="<"&&(Oe=Oe.substring(1,Oe.length-1)),/^[a-z]+:/i.test(Oe))return Oe;if(!He.base)throw new Error("Cannot resolve relative IRI "+Oe+" because no base IRI was set.");switch(Vt!==He.base&&(Vt=He.base,Rn=Vt.replace(/[^\/:]*$/,""),Cn=Vt.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Oe[0]){case void 0:return Vt;case"#":return Vt+Oe;case"?":return Vt.replace(/(?:\?.*)?$/,Oe);case"/":return Cn+Oe;default:return Rn+Oe}}function dt(Oe){if(Oe){var Te=Oe[0];if(Te==="?"||Te==="$")return He.factory.variable(Oe.substr(1))}return Oe}function ft(Oe,Te){return{type:"operation",operator:Oe,args:Te||[]}}function Rt(Oe,Te){var je={expression:Oe==="*"?new vr:Oe};if(Te)for(var Re in Te)je[Re]=Te[Re];return je}function Qt(Oe,Te){return{type:"path",pathType:Oe,items:Te}}function Mr(Oe,Te){for(var je=0,Re=Te.length,Ve;je<Re&&(Ve=Te[je]);je++)Oe=ft(Ve[0],[Oe,Ve[1]]);return Oe}function Ct(Oe,Te){var je=[],Re=[],Ve=Oe.length,Qe,J={};if(!Ve)return null;for(var mt=0;mt<Ve&&(Qe=Oe[mt]);mt++)(Qe.named?Re:je).push(Qe.iri);return J[Te||"from"]={default:je,named:Re},J}function Zt(Oe){return parseInt(Oe,10)}function Fr(Oe){return Oe.type==="group"&&Oe.patterns.length===1?Oe.patterns[0]:Oe}function wt(Oe,Te){return Te&&Te.termType!=="NamedNode"&&(Te=He.factory.namedNode(Te)),He.factory.literal(Oe,Te)}function Vn(Oe,Te){return He.factory.literal(Oe,Te)}function Gt(Oe,Te,je){var Re={};return Oe!=null&&(Re.subject=Oe),Te!=null&&(Re.predicate=Te),je!=null&&(Re.object=je),Re}function dr(Oe){return typeof Oe=="string"?Oe.startsWith("e_")?He.factory.blankNode(Oe):He.factory.blankNode("e_"+Oe):He.factory.blankNode("g_"+Ln++)}var Ln=0;He._resetBlanks=function(){Ln=0};var Qn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Gn={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},Hn=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,kr=String.fromCharCode;function Bn(Oe,Te){Oe=Oe.substring(Te,Oe.length-Te);try{Oe=Oe.replace(Qn,function(je,Re,Ve,Qe){var J;if(Re){if(J=parseInt(Re,16),isNaN(J))throw new Error;return kr(J)}else if(Ve){if(J=parseInt(Ve,16),isNaN(J))throw new Error;return J<65535?kr(J):kr(55296+((J-=65536)>>10),56320+(J&1023))}else{var mt=Gn[Qe];if(!mt)throw new Error;return mt}})}catch{return""}if(Hn.exec(Oe))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Oe);return Oe}function zn(Oe){var Te=dr(),je=Te,Re=[],Ve,Qe=[];Oe.forEach(function(Lt){Re.push(Lt.entity),Yt(Qe,Lt.triples)});for(var J=0,mt=0,te=Re.length,Ve=Array(te*2);J<te;)Ve[mt++]=Gt(je,He.factory.namedNode(kn),Re[J]),Ve[mt++]=Gt(je,He.factory.namedNode($n),je=++J<te?dr():He.factory.namedNode(xn));return{entity:Te,triples:Yt(Ve,Qe)}}function qn(Oe){var Te=dr();return{entity:Te,triples:Oe.map(function(je){return Ze(Gt(Te),je)})}}function $r(Oe,Te,je){var Re=[],Ve=[];return Te.forEach(function(Qe){Re.push(Gt(null,Oe,Qe.entity)),Yt(Ve,Qe.triples)}),vt(Re,je||[],Ve)}function er(Oe){return Oe.variable?Oe.variable.value:Oe.value||Oe.expression.value}function Ur(Oe){if(!Oe)return[];if(Oe.type==="aggregate")return[Oe];if(Oe.type==="operation"){const Te=[];for(const je of Oe.args)Te.push(...Ur(je));return Te}return[]}function Xn(Oe){const Te=new Set,je=function(Re){Re&&(Re.termType==="Variable"?Te.add(Re):Re.type==="operation"&&Re.args.forEach(je))};return je(Oe),Te}function Vr(Oe,Te=1,je=[]){for(const Re of Oe)Te>0&&Re instanceof Array?Vr(Re,Te-1,je):je.push(Re);return je}function Qr(Oe){return Oe.termType==="Variable"}function Dn(Oe){if(Oe.triples){const Te=[];for(const je of Oe.triples)Qr(je.subject)&&Te.push(je.subject.value),Qr(je.predicate)&&Te.push(je.predicate.value),Qr(je.object)&&Te.push(je.object.value);return Te}else if(Oe.patterns){const Te=[];for(const je of Oe.patterns)Te.push(...Dn(je));return Te}return[]}function Kn(Oe){const Te=Oe.slice().sort(),je=[];for(let Re=0;Re<Te.length-1;Re++)Te[Re+1]==Te[Re]&&je.push(Te[Re]);return je}function fr(Oe){if(!He.sparqlStar)throw new Error("SPARQL* support is not enabled");return Oe}function Mn(Oe){for(const Te of Oe){if(Te.type==="graph"&&Te.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Te.type==="bgp"||Te.type==="graph"){for(const je of Te.triples)if(je.subject.termType==="Variable"||je.predicate.termType==="Variable"||je.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Oe}function Gr(Oe){for(const Te of Oe)if(Te.type==="bgp"){for(const je of Te.triples)if(je.subject.termType==="BlankNode"||je.predicate.termType==="BlankNode"||je.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Oe}var Jn=function(){var Oe={EOF:1,parseError:function(je,Re){if(this.yy.parser)this.yy.parser.parseError(je,Re);else throw new Error(je)},setInput:function(Te,je){return this.yy=je||this.yy||{},this._input=Te,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Te=this._input[0];this.yytext+=Te,this.yyleng++,this.offset++,this.match+=Te,this.matched+=Te;var je=Te.match(/(?:\r\n?|\n).*/g);return je?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Te},unput:function(Te){var je=Te.length,Re=Te.split(/(?:\r\n?|\n)/g);this._input=Te+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-je),this.offset-=je;var Ve=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Re.length-1&&(this.yylineno-=Re.length-1);var Qe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Re?(Re.length===Ve.length?this.yylloc.first_column:0)+Ve[Ve.length-Re.length].length-Re[0].length:this.yylloc.first_column-je},this.options.ranges&&(this.yylloc.range=[Qe[0],Qe[0]+this.yyleng-je]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Te){this.unput(this.match.slice(Te))},pastInput:function(){var Te=this.matched.substr(0,this.matched.length-this.match.length);return(Te.length>20?"...":"")+Te.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Te=this.match;return Te.length<20&&(Te+=this._input.substr(0,20-Te.length)),(Te.substr(0,20)+(Te.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Te=this.pastInput(),je=new Array(Te.length+1).join("-");return Te+this.upcomingInput()+`
`+je+"^"},test_match:function(Te,je){var Re,Ve,Qe;if(this.options.backtrack_lexer&&(Qe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Qe.yylloc.range=this.yylloc.range.slice(0))),Ve=Te[0].match(/(?:\r\n?|\n).*/g),Ve&&(this.yylineno+=Ve.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ve?Ve[Ve.length-1].length-Ve[Ve.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Te[0].length},this.yytext+=Te[0],this.match+=Te[0],this.matches=Te,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Te[0].length),this.matched+=Te[0],Re=this.performAction.call(this,this.yy,this,je,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Re)return Re;if(this._backtrack){for(var J in Qe)this[J]=Qe[J];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Te,je,Re,Ve;this._more||(this.yytext="",this.match="");for(var Qe=this._currentRules(),J=0;J<Qe.length;J++)if(Re=this._input.match(this.rules[Qe[J]]),Re&&(!je||Re[0].length>je[0].length)){if(je=Re,Ve=J,this.options.backtrack_lexer){if(Te=this.test_match(Re,Qe[J]),Te!==!1)return Te;if(this._backtrack){je=!1;continue}else return!1}else if(!this.options.flex)break}return je?(Te=this.test_match(je,Qe[Ve]),Te!==!1?Te:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var je=this.next();return je||this.lex()},begin:function(je){this.conditionStack.push(je)},popState:function(){var je=this.conditionStack.length-1;return je>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(je){return je=this.conditionStack.length-1-Math.abs(je||0),je>=0?this.conditionStack[je]:"INITIAL"},pushState:function(je){this.begin(je)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(je,Re,Ve,Qe){switch(Ve){case 0:break;case 1:return 12;case 2:return 15;case 3:return 28;case 4:return 316;case 5:return 317;case 6:return 35;case 7:return 37;case 8:return 38;case 9:return 26;case 10:return 41;case 11:return 45;case 12:return 46;case 13:return 48;case 14:return 50;case 15:return 55;case 16:return 58;case 17:return 320;case 18:return 68;case 19:return 69;case 20:return 75;case 21:return 78;case 22:return 81;case 23:return 83;case 24:return 86;case 25:return 88;case 26:return 90;case 27:return 191;case 28:return 107;case 29:return 321;case 30:return 140;case 31:return 322;case 32:return 323;case 33:return 117;case 34:return 324;case 35:return 116;case 36:return 325;case 37:return 326;case 38:return 120;case 39:return 122;case 40:return 123;case 41:return 138;case 42:return 132;case 43:return 133;case 44:return 135;case 45:return 141;case 46:return 119;case 47:return 327;case 48:return 328;case 49:return 167;case 50:return 170;case 51:return 174;case 52:return 100;case 53:return 168;case 54:return 329;case 55:return 173;case 56:return 231;case 57:return 235;case 58:return 278;case 59:return 195;case 60:return 330;case 61:return 331;case 62:return 224;case 63:return 333;case 64:return 271;case 65:return 219;case 66:return 226;case 67:return 227;case 68:return 250;case 69:return 254;case 70:return 295;case 71:return 334;case 72:return 335;case 73:return 336;case 74:return 337;case 75:return 338;case 76:return 258;case 77:return 339;case 78:return 273;case 79:return 281;case 80:return 282;case 81:return 275;case 82:return 276;case 83:return 277;case 84:return 340;case 85:return 341;case 86:return 279;case 87:return 343;case 88:return 342;case 89:return 344;case 90:return 284;case 91:return 285;case 92:return 288;case 93:return 290;case 94:return 294;case 95:return 298;case 96:return 301;case 97:return 13;case 98:return 16;case 99:return 312;case 100:return 245;case 101:return 34;case 102:return 297;case 103:return 87;case 104:return 299;case 105:return 300;case 106:return 306;case 107:return 307;case 108:return 308;case 109:return 309;case 110:return 310;case 111:return 311;case 112:return"EXPONENT";case 113:return 302;case 114:return 303;case 115:return 304;case 116:return 305;case 117:return 93;case 118:return 246;case 119:return 6;case 120:return"INVALID";case 121:console.log(Re.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121],inclusive:!0}}};return Oe}();Dr.lexer=Jn;function He(){this.yy={}}return He.prototype=Dr,Dr.Parser=He,new He}(),SparqlParser_1=SparqlParser,XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",XSD_STRING="http://www.w3.org/2001/XMLSchema#string";function Generator$1(t){this._options=t=t||{};var e=t.prefixes||{};this._prefixByIri={};var n=[];for(var o in e){var d=e[o];isString$1(d)&&(this._prefixByIri[d]=o,n.push(d))}var h=n.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+h+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=t.sparqlStar,this._indent=isString$1(t.indent)?t.indent:"  ",this._newline=isString$1(t.newline)?t.newline:`
`,this._explicitDatatype=!!t.explicitDatatype}Generator$1.prototype.toQuery=function(t){var e="";return t.queryType&&(e+=t.queryType.toUpperCase()+" "),t.reduced&&(e+="REDUCED "),t.distinct&&(e+="DISTINCT "),t.variables?e+=mapJoin(t.variables,void 0,function(n){return isTerm$1(n)?this.toEntity(n):"("+this.toExpression(n.expression)+" AS "+variableToString(n.variable)+")"},this)+" ":t.template&&(e+=this.group(t.template,!0)+this._newline),t.from&&(e+=this.graphs("FROM ",t.from.default)+this.graphs("FROM NAMED ",t.from.named)),t.where&&(e+="WHERE "+this.group(t.where,!0)+this._newline),t.updates&&(e+=mapJoin(t.updates,";"+this._newline,this.toUpdate,this)),t.group&&(e+="GROUP BY "+mapJoin(t.group,void 0,function(n){var o=isTerm$1(n.expression)?this.toEntity(n.expression):"("+this.toExpression(n.expression)+")";return n.variable?"("+o+" AS "+variableToString(n.variable)+")":o},this)+this._newline),t.having&&(e+="HAVING ("+mapJoin(t.having,void 0,this.toExpression,this)+")"+this._newline),t.order&&(e+="ORDER BY "+mapJoin(t.order,void 0,function(n){var o="("+this.toExpression(n.expression)+")";return n.descending?"DESC "+o:o},this)+this._newline),t.offset&&(e+="OFFSET "+t.offset+this._newline),t.limit&&(e+="LIMIT "+t.limit+this._newline),t.values&&(e+=this.values(t)),e=this.baseAndPrefixes(t)+e,e.trim()};Generator$1.prototype.baseAndPrefixes=function(t){var e=t.base?"BASE <"+t.base+">"+this._newline:"",n="";for(var o in t.prefixes)(this._options.allPrefixes||this._usedPrefixes[o])&&(n+="PREFIX "+o+": <"+t.prefixes[o]+">"+this._newline);return e+n};Generator$1.prototype.toPattern=function(t){var e=t.type||t instanceof Array&&"array"||(t.subject&&t.predicate&&t.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](t)};Generator$1.prototype.triple=function(t){return this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+"."};Generator$1.prototype.array=function(t){return mapJoin(t,this._newline,this.toPattern,this)};Generator$1.prototype.bgp=function(t){return this.encodeTriples(t.triples)};Generator$1.prototype.encodeTriples=function(t){if(!t.length)return"";for(var e=[],n=void 0,o=void 0,d=0;d<t.length;d++){var h=t[d];equalTerms(h.subject,n)?equalTerms(h.predicate,o)?e.push(","):(o=h.predicate,e.push(";"+this._newline,this._indent,this.toEntity(o))):(n&&e.push("."+this._newline),n=h.subject,o=h.predicate,e.push(this.toEntity(n)," ",this.toEntity(o))),e.push(" ",this.toEntity(h.object))}return e.push("."),e.join("")};Generator$1.prototype.graph=function(t){return"GRAPH "+this.toEntity(t.name)+" "+this.group(t)};Generator$1.prototype.graphs=function(t,e){return!e||e.length===0?"":mapJoin(e,"",function(n){return t+this.toEntity(n)+this._newline},this)};Generator$1.prototype.group=function(t,e){return t=e!==!0?this.array(t.patterns||t.triples):this.toPattern(t.type!=="group"?t:t.patterns),t.indexOf(this._newline)===-1?"{ "+t+" }":"{"+this._newline+this.indent(t)+this._newline+"}"};Generator$1.prototype.query=function(t){return this.toQuery(t)};Generator$1.prototype.filter=function(t){return"FILTER("+this.toExpression(t.expression)+")"};Generator$1.prototype.bind=function(t){return"BIND("+this.toExpression(t.expression)+" AS "+variableToString(t.variable)+")"};Generator$1.prototype.optional=function(t){return"OPTIONAL "+this.group(t)};Generator$1.prototype.union=function(t){return mapJoin(t.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Generator$1.prototype.minus=function(t){return"MINUS "+this.group(t)};Generator$1.prototype.values=function(t){var e=Object.keys(t.values.reduce(function(d,h){for(var l in h)d[l]=!0;return d},{})),n,o;return e.length===1?n=o="":(n="(",o=")"),"VALUES "+n+e.join(" ")+o+" {"+this._newline+mapJoin(t.values,this._newline,function(d){return"  "+n+mapJoin(e,void 0,function(h){return d[h]?this.toEntity(d[h]):"UNDEF"},this)+o},this)+this._newline+"}"};Generator$1.prototype.service=function(t){return"SERVICE "+(t.silent?"SILENT ":"")+this.toEntity(t.name)+" "+this.group(t)};Generator$1.prototype.toExpression=function(t){if(isTerm$1(t))return this.toEntity(t);switch(t.type.toLowerCase()){case"aggregate":return t.aggregation.toUpperCase()+"("+(t.distinct?"DISTINCT ":"")+this.toExpression(t.expression)+(typeof t.separator=="string"?'; SEPARATOR = "'+t.separator.replace(escape,escapeReplacer)+'"':"")+")";case"functioncall":return this.toEntity(t.function)+"("+mapJoin(t.args,", ",this.toExpression,this)+")";case"operation":var e=t.operator.toUpperCase(),n=t.args||[];switch(t.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(isTerm$1(n[0])?this.toEntity(n[0]):"("+this.toExpression(n[0])+")")+" "+e+" "+(isTerm$1(n[1])?this.toEntity(n[1]):"("+this.toExpression(n[1])+")");case"!":return"!("+this.toExpression(n[0])+")";case"uplus":return"+("+this.toExpression(n[0])+")";case"uminus":return"-("+this.toExpression(n[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(n[0])+" "+e+"("+(isString$1(n[1])?n[1]:mapJoin(n[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(n[0],!0);default:return e+"("+mapJoin(n,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+t.type)}};Generator$1.prototype.toEntity=function(t){if(isTerm$1(t))switch(t.termType){case"Wildcard":return"*";case"Variable":return variableToString(t);case"BlankNode":return"_:"+t.value;case"Literal":var e=t.value||"",n=t.language||"",o=t.datatype;if(t='"'+e.replace(escape,escapeReplacer)+'"',n)t+="@"+n;else if(o){if(!this._explicitDatatype)switch(o.value){case XSD_STRING:return t;case XSD_INTEGER:if(/^\d+$/.test(e))return e+" "}t+="^^"+this.encodeIRI(o.value)}return t;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return t.graph&&t.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(t.graph)+" { "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" }  >>":"<< "+this.toEntity(t.subject)+" "+this.toEntity(t.predicate)+" "+this.toEntity(t.object)+" >>";default:return this.encodeIRI(t.value)}else{var d=t.items.map(this.toEntity,this),h=t.pathType;switch(h){case"^":case"!":return h+d[0];case"*":case"+":case"?":return"("+d[0]+h+")";default:return"("+d.join(h)+")"}}};var escape=/["\\\t\n\r\b\f]/g,escapeReplacer=function(t){return escapeReplacements[t]},escapeReplacements={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Generator$1.prototype.encodeIRI=function(t){var e=this._prefixRegex.exec(t);if(e){var n=this._prefixByIri[e[1]];return this._usedPrefixes[n]=!0,n+":"+e[2]}return"<"+t+">"};Generator$1.prototype.toUpdate=function(t){switch(t.type||t.updateType){case"load":return"LOAD"+(t.source?" "+this.toEntity(t.source):"")+(t.destination?" INTO GRAPH "+this.toEntity(t.destination):"");case"insert":return"INSERT DATA "+this.group(t.insert,!0);case"delete":return"DELETE DATA "+this.group(t.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(t.delete,!0);case"insertdelete":return(t.graph?"WITH "+this.toEntity(t.graph)+this._newline:"")+(t.delete.length?"DELETE "+this.group(t.delete,!0)+this._newline:"")+(t.insert.length?"INSERT "+this.group(t.insert,!0)+this._newline:"")+(t.using?this.graphs("USING ",t.using.default):"")+(t.using?this.graphs("USING NAMED ",t.using.named):"")+"WHERE "+this.group(t.where,!0);case"add":case"copy":case"move":return t.type.toUpperCase()+" "+(t.silent?"SILENT ":"")+(t.source.default?"DEFAULT":this.toEntity(t.source.name))+" TO "+this.toEntity(t.destination.name);case"create":case"clear":case"drop":return t.type.toUpperCase()+(t.silent?" SILENT ":" ")+(t.graph.default?"DEFAULT":t.graph.named?"NAMED":t.graph.all?"ALL":"GRAPH "+this.toEntity(t.graph.name));default:throw new Error("Unknown update query type: "+t.type)}};Generator$1.prototype.indent=function(t){return t.replace(/^/gm,this._indent)};function variableToString(t){return"?"+t.value}function isString$1(t){return typeof t=="string"}function isTerm$1(t){return typeof t.termType=="string"}function equalTerms(t,e){if(!t||!isTerm$1(t)||!e||!isTerm$1(e)||t.termType!==e.termType)return!1;switch(t.termType){case"Literal":return t.value===e.value&&t.language===e.language&&equalTerms(t.datatype,e.datatype);case"Quad":return equalTerms(t.subject,e.subject)&&equalTerms(t.predicate,e.predicate)&&equalTerms(t.object,e.object)&&equalTerms(t.graph,e.graph);default:return t.value===e.value}}function mapJoin(t,e,n,o){return t.map(n,o).join(isString$1(e)?e:" ")}var SparqlGenerator=function(e={}){return{stringify:function(n){var o=Object.create(e);return o.prefixes=n.prefixes,new Generator$1(o).toQuery(n)},createGenerator:function(){return new Generator$1(e)}}},Parser$1=SparqlParser_1.Parser,Generator=SparqlGenerator,Wildcard=Wildcard$2.Wildcard,{DataFactory}=rdfDataFactory,sparql$1={Parser:function({prefixes:t,baseIRI:e,factory:n,sparqlStar:o,skipValidation:d,skipUngroupedVariableCheck:h,pathOnly:l}={}){var u={};for(var p in t||{})u[p]=t[p];var g=new Parser$1;return g.parse=function(){return Parser$1.base=e||"",Parser$1.prefixes=Object.create(u),Parser$1.factory=n||new DataFactory,Parser$1.sparqlStar=!!o,Parser$1.pathOnly=!!l,Parser$1.skipValidation=!!d||!!h,Parser$1.prototype.parse.apply(g,arguments)},g._resetBlanks=Parser$1._resetBlanks,g},Generator,Wildcard},__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__=_mergeNamespaces({__proto__:null,default:sparql$1},[sparql$1]),__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var d=Object.getOwnPropertyDescriptor(e,n);(!d||("get"in d?!e.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,d)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&__createBinding$2(e,t,n);return __setModuleDefault$2(e,t),e};Object.defineProperty(factory$2,"__esModule",{value:!0});const A=__importStar$2(algebra),rdf_data_factory_1$1=rdfDataFactory,rdf_string_1$4=rdfString,sparqljs_1$1=sparql$1;class Factory{constructor(e){this.dataFactory=e||new rdf_data_factory_1$1.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(e,n=!0){return this.flattenMulti({type:A.types.ALT,input:e},n)}createAsk(e){return{type:A.types.ASK,input:e}}createBoundAggregate(e,n,o,d,h){const l=this.createAggregateExpression(n,o,d,h);return l.variable=e,l}createBgp(e){return{type:A.types.BGP,patterns:e}}createConstruct(e,n){return{type:A.types.CONSTRUCT,input:e,template:n}}createDescribe(e,n){return{type:A.types.DESCRIBE,input:e,terms:n}}createDistinct(e){return{type:A.types.DISTINCT,input:e}}createExtend(e,n,o){return{type:A.types.EXTEND,input:e,variable:n,expression:o}}createFrom(e,n,o){return{type:A.types.FROM,input:e,default:n,named:o}}createFilter(e,n){return{type:A.types.FILTER,input:e,expression:n}}createGraph(e,n){return{type:A.types.GRAPH,input:e,name:n}}createGroup(e,n,o){return{type:A.types.GROUP,input:e,variables:n,aggregates:o}}createInv(e){return{type:A.types.INV,path:e}}createJoin(e,n=!0){return this.flattenMulti({type:A.types.JOIN,input:e},n)}createLeftJoin(e,n,o){return o?{type:A.types.LEFT_JOIN,input:[e,n],expression:o}:{type:A.types.LEFT_JOIN,input:[e,n]}}createLink(e){return{type:A.types.LINK,iri:e}}createMinus(e,n){return{type:A.types.MINUS,input:[e,n]}}createNop(){return{type:A.types.NOP}}createNps(e){return{type:A.types.NPS,iris:e}}createOneOrMorePath(e){return{type:A.types.ONE_OR_MORE_PATH,path:e}}createOrderBy(e,n){return{type:A.types.ORDER_BY,input:e,expressions:n}}createPath(e,n,o,d){return d?{type:A.types.PATH,subject:e,predicate:n,object:o,graph:d}:{type:A.types.PATH,subject:e,predicate:n,object:o,graph:this.dataFactory.defaultGraph()}}createPattern(e,n,o,d){const h=this.dataFactory.quad(e,n,o,d);return h.type=A.types.PATTERN,h}createProject(e,n){return{type:A.types.PROJECT,input:e,variables:n}}createReduced(e){return{type:A.types.REDUCED,input:e}}createSeq(e,n=!0){return this.flattenMulti({type:A.types.SEQ,input:e},n)}createService(e,n,o){return{type:A.types.SERVICE,input:e,name:n,silent:!!o}}createSlice(e,n,o){return n=n||0,o!==void 0?{type:A.types.SLICE,input:e,start:n,length:o}:{type:A.types.SLICE,input:e,start:n}}createUnion(e,n=!0){return this.flattenMulti({type:A.types.UNION,input:e},n)}createValues(e,n){return{type:A.types.VALUES,variables:e,bindings:n}}createZeroOrMorePath(e){return{type:A.types.ZERO_OR_MORE_PATH,path:e}}createZeroOrOnePath(e){return{type:A.types.ZERO_OR_ONE_PATH,path:e}}createAggregateExpression(e,n,o,d){return d?{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:n,separator:d,distinct:o}:{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:n,distinct:o}}createExistenceExpression(e,n){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.EXISTENCE,not:e,input:n}}createNamedExpression(e,n){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.NAMED,name:e,args:n}}createOperatorExpression(e,n){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.OPERATOR,operator:e,args:n}}createTermExpression(e){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.TERM,term:e}}createWildcardExpression(){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.WILDCARD,wildcard:new sparqljs_1$1.Wildcard}}createTerm(e){return(0,rdf_string_1$4.stringToTerm)(e,this.dataFactory)}createCompositeUpdate(e){return{type:A.types.COMPOSITE_UPDATE,updates:e}}createDeleteInsert(e,n,o){const d={type:A.types.DELETE_INSERT};return e&&(d.delete=e),n&&(d.insert=n),o&&(d.where=o),d}createLoad(e,n,o){const d={type:A.types.LOAD,source:e};return n&&(d.destination=n),this.addSilent(d,!!o)}createClear(e,n){return this.addSilent({type:A.types.CLEAR,source:e},!!n)}createCreate(e,n){return this.addSilent({type:A.types.CREATE,source:e},!!n)}createDrop(e,n){return this.addSilent({type:A.types.DROP,source:e},!!n)}createAdd(e,n,o){return this.addSilent({type:A.types.ADD,source:e,destination:n},!!o)}createMove(e,n,o){return this.addSilent({type:A.types.MOVE,source:e,destination:n},!!o)}createCopy(e,n,o){return this.addSilent({type:A.types.COPY,source:e,destination:n},!!o)}addSilent(e,n){return n&&(e.silent=n),e}flattenMulti(e,n){if(!n)return e;const o=e.type,d=e.input;let h=[];for(const l of d)l.type===o?h.push(...l.input):h.push(l);return e.input=h,e}}factory$2.default=Factory;var util={},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(util,"__esModule",{value:!0});const algebra_1=algebra,factory_1$2=__importDefault$2(factory$2);class Util{static flatten(e){return Array.prototype.concat(...e).filter(n=>n)}static objectify(e){if(e.termType){if(e.termType==="Quad")return{type:"pattern",termType:"Quad",subject:Util.objectify(e.subject),predicate:Util.objectify(e.predicate),object:Util.objectify(e.object),graph:Util.objectify(e.graph)};{let n={termType:e.termType,value:e.value};return e.language&&(n.language=e.language),e.datatype&&(n.datatype=Util.objectify(e.datatype)),n}}if(Array.isArray(e))return e.map(n=>Util.objectify(n));if(e===Object(e)){let n={};for(let o of Object.keys(e))n[o]=Util.objectify(e[o]);return n}return e}static inScopeVariables(e){const n=[];function o(h){n.find(l=>h.value===l.value)||n.push(h)}function d(h){h.subject.termType==="Variable"&&o(h.subject),h.predicate.termType==="Variable"&&o(h.predicate),h.object.termType==="Variable"&&o(h.object),h.graph.termType==="Variable"&&o(h.graph),h.subject.termType==="Quad"&&d(h.subject),h.predicate.termType==="Quad"&&d(h.predicate),h.object.termType==="Quad"&&d(h.object),h.graph.termType==="Quad"&&d(h.graph)}return Util.recurseOperation(e,{[algebra_1.types.EXPRESSION]:h=>(h.expressionType===algebra_1.expressionTypes.AGGREGATE&&h.variable&&o(h.variable),!0),[algebra_1.types.EXTEND]:h=>(o(h.variable),!0),[algebra_1.types.GRAPH]:h=>(h.name.termType==="Variable"&&o(h.name),!0),[algebra_1.types.GROUP]:h=>(h.variables.forEach(o),!0),[algebra_1.types.PATH]:h=>(h.subject.termType==="Variable"&&o(h.subject),h.object.termType==="Variable"&&o(h.object),h.graph.termType==="Variable"&&o(h.graph),h.subject.termType==="Quad"&&d(h.subject),h.object.termType==="Quad"&&d(h.object),h.graph.termType==="Quad"&&d(h.graph),!0),[algebra_1.types.PATTERN]:h=>(d(h),!0),[algebra_1.types.PROJECT]:h=>(h.variables.forEach(o),!1),[algebra_1.types.SERVICE]:h=>(h.name.termType==="Variable"&&o(h.name),!0),[algebra_1.types.VALUES]:h=>(h.variables.forEach(o),!0)}),n}static recurseOperation(e,n){let o=e,d=!0;const h=n[e.type];if(h&&(d=h(e)),!d)return;let l=u=>Util.recurseOperation(u,n);switch(o.type){case algebra_1.types.ALT:o.input.map(l);break;case algebra_1.types.ASK:l(o.input);break;case algebra_1.types.BGP:o.patterns.forEach(l);break;case algebra_1.types.CONSTRUCT:l(o.input),o.template.map(l);break;case algebra_1.types.DESCRIBE:l(o.input);break;case algebra_1.types.DISTINCT:l(o.input);break;case algebra_1.types.EXPRESSION:o.expressionType===algebra_1.expressionTypes.EXISTENCE&&l(o.input);break;case algebra_1.types.EXTEND:l(o.input),l(o.expression);break;case algebra_1.types.FILTER:l(o.input),l(o.expression);break;case algebra_1.types.FROM:l(o.input);break;case algebra_1.types.GRAPH:l(o.input);break;case algebra_1.types.GROUP:l(o.input),o.aggregates.forEach(l);break;case algebra_1.types.INV:l(o.path);break;case algebra_1.types.JOIN:o.input.map(l);break;case algebra_1.types.LEFT_JOIN:o.input.map(l),o.expression&&l(o.expression);break;case algebra_1.types.LINK:break;case algebra_1.types.MINUS:o.input.map(l);break;case algebra_1.types.NOP:break;case algebra_1.types.NPS:break;case algebra_1.types.ONE_OR_MORE_PATH:l(o.path);break;case algebra_1.types.ORDER_BY:l(o.input),o.expressions.forEach(l);break;case algebra_1.types.PATH:l(o.predicate);break;case algebra_1.types.PATTERN:break;case algebra_1.types.PROJECT:l(o.input);break;case algebra_1.types.REDUCED:l(o.input);break;case algebra_1.types.SEQ:o.input.map(l);break;case algebra_1.types.SERVICE:l(o.input);break;case algebra_1.types.SLICE:l(o.input);break;case algebra_1.types.UNION:o.input.map(l);break;case algebra_1.types.VALUES:break;case algebra_1.types.ZERO_OR_MORE_PATH:l(o.path);break;case algebra_1.types.ZERO_OR_ONE_PATH:l(o.path);break;case algebra_1.types.COMPOSITE_UPDATE:o.updates.forEach(u=>l(u));break;case algebra_1.types.DELETE_INSERT:o.delete&&o.delete.forEach(u=>l(u)),o.insert&&o.insert.forEach(u=>l(u)),o.where&&l(o.where);break;case algebra_1.types.LOAD:break;case algebra_1.types.CLEAR:break;case algebra_1.types.CREATE:break;case algebra_1.types.DROP:break;case algebra_1.types.ADD:break;case algebra_1.types.MOVE:break;case algebra_1.types.COPY:break;default:throw new Error(`Unknown Operation type ${o.type}`)}}static mapOperation(e,n,o){let d=e,h=!0;o=o||new factory_1$2.default;const l=n[e.type];if(l&&({result:d,recurse:h}=l(e,o)),!h)return d;let u=p=>Util.mapOperation(p,n,o);switch(d.type){case algebra_1.types.ALT:return o.createAlt(d.input.map(u));case algebra_1.types.ASK:return o.createAsk(u(d.input));case algebra_1.types.BGP:return o.createBgp(d.patterns.map(u));case algebra_1.types.CONSTRUCT:return o.createConstruct(u(d.input),d.template.map(u));case algebra_1.types.DESCRIBE:return o.createDescribe(u(d.input),d.terms);case algebra_1.types.DISTINCT:return o.createDistinct(u(d.input));case algebra_1.types.EXPRESSION:return Util.mapExpression(d,n,o);case algebra_1.types.EXTEND:return o.createExtend(u(d.input),d.variable,u(d.expression));case algebra_1.types.FILTER:return o.createFilter(u(d.input),u(d.expression));case algebra_1.types.FROM:return o.createFrom(u(d.input),[...d.default],[...d.named]);case algebra_1.types.GRAPH:return o.createGraph(u(d.input),d.name);case algebra_1.types.GROUP:return o.createGroup(u(d.input),[].concat(d.variables),d.aggregates.map(u));case algebra_1.types.INV:return o.createInv(u(d.path));case algebra_1.types.JOIN:return o.createJoin(d.input.map(u));case algebra_1.types.LEFT_JOIN:return o.createLeftJoin(u(d.input[0]),u(d.input[1]),d.expression?u(d.expression):void 0);case algebra_1.types.LINK:return o.createLink(d.iri);case algebra_1.types.MINUS:return o.createMinus(u(d.input[0]),u(d.input[1]));case algebra_1.types.NOP:return o.createNop();case algebra_1.types.NPS:return o.createNps([].concat(d.iris));case algebra_1.types.ONE_OR_MORE_PATH:return o.createOneOrMorePath(u(d.path));case algebra_1.types.ORDER_BY:return o.createOrderBy(u(d.input),d.expressions.map(u));case algebra_1.types.PATH:return o.createPath(d.subject,u(d.predicate),d.object,d.graph);case algebra_1.types.PATTERN:return o.createPattern(d.subject,d.predicate,d.object,d.graph);case algebra_1.types.PROJECT:return o.createProject(u(d.input),[...d.variables]);case algebra_1.types.REDUCED:return o.createReduced(u(d.input));case algebra_1.types.SEQ:return o.createSeq(d.input.map(u));case algebra_1.types.SERVICE:return o.createService(u(d.input),d.name,d.silent);case algebra_1.types.SLICE:return o.createSlice(u(d.input),d.start,d.length);case algebra_1.types.UNION:return o.createUnion(d.input.map(u));case algebra_1.types.VALUES:return o.createValues([].concat(d.variables),d.bindings.map(p=>Object.assign({},p)));case algebra_1.types.ZERO_OR_MORE_PATH:return o.createZeroOrMorePath(u(d.path));case algebra_1.types.ZERO_OR_ONE_PATH:return o.createZeroOrOnePath(u(d.path));case algebra_1.types.COMPOSITE_UPDATE:return o.createCompositeUpdate(d.updates.map(u));case algebra_1.types.DELETE_INSERT:return o.createDeleteInsert(d.delete?d.delete.map(u):void 0,d.insert?d.insert.map(u):void 0,d.where?u(d.where):void 0);case algebra_1.types.LOAD:return o.createLoad(d.source,d.destination,d.silent);case algebra_1.types.CLEAR:return o.createClear(d.source,d.silent);case algebra_1.types.CREATE:return o.createCreate(d.source,d.silent);case algebra_1.types.DROP:return o.createDrop(d.source,d.silent);case algebra_1.types.ADD:return o.createAdd(d.source,d.destination);case algebra_1.types.MOVE:return o.createMove(d.source,d.destination);case algebra_1.types.COPY:return o.createCopy(d.source,d.destination);default:throw new Error(`Unknown Operation type ${d.type}`)}}static mapExpression(e,n,o){let d=h=>Util.mapOperation(h,n,o);switch(e.expressionType){case algebra_1.expressionTypes.AGGREGATE:return e.variable?o.createBoundAggregate(e.variable,e.aggregator,d(e.expression),e.distinct,e.separator):o.createAggregateExpression(e.aggregator,d(e.expression),e.distinct,e.separator);case algebra_1.expressionTypes.EXISTENCE:return o.createExistenceExpression(e.not,d(e.input));case algebra_1.expressionTypes.NAMED:return o.createNamedExpression(e.name,e.args.map(d));case algebra_1.expressionTypes.OPERATOR:return o.createOperatorExpression(e.operator,e.args.map(d));case algebra_1.expressionTypes.TERM:return o.createTermExpression(e.term);case algebra_1.expressionTypes.WILDCARD:return o.createWildcardExpression();default:throw new Error(`Unknown Expression type ${e.expressionType}`)}}static createUniqueVariable(e,n,o){let d=0,h=e;for(;n[h];)h=`${e}${d++}`;return o.variable(h)}static isSimpleTerm(e){return e.termType!==void 0&&e.termType!=="Quad"&&e.termType!=="Wildcard"}static isQuad(e){return e.termType==="Quad"}static isWildcard(e){return e.termType==="Wildcard"}}util.default=Util;var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var d=Object.getOwnPropertyDescriptor(e,n);(!d||("get"in d?!e.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,d)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&__createBinding$1(e,t,n);return __setModuleDefault$1(e,t),e},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sparqlAlgebra,"__esModule",{value:!0});const equal=es6,rdf_string_1$3=rdfString,Algebra$1=__importStar$1(algebra),factory_1$1=__importDefault$1(factory$2),util_1$1=__importDefault$1(util),Parser=sparql$1.Parser,types$1=Algebra$1.types;let variables=new Set,varCount=0,useQuads=!1,factory$1;function translate$1(t,e){e=e||{},factory$1=new factory_1$1.default(e.dataFactory);let n;if(isString(t)){let o=new Parser(e);o._resetBlanks(),n=o.parse(t)}else n=t;return translateQuery(n,e.quads,e.blankToVariable)}sparqlAlgebra.default=translate$1;function translateQuery(t,e,n){if(variables=new Set,varCount=0,useQuads=!!e,!t.type)return factory$1.createNop();if(t.type!=="query"&&t.type!=="update")throw new Error("Translate only works on complete query or update objects.");let o;if(findAllVariables(t),t.type==="query"){const d={type:"group",patterns:t.where||[]};o=translateGroupGraphPattern(d),o=translateAggregates(t,o)}else t.type==="update"&&(o=translateUpdate(t));return n&&(o=translateBlankNodesToVariables(o)),o}function isString(t){return typeof t=="string"}function isTerm(t){return!!t?.termType}function isTriple(t){return t.subject&&t.predicate&&t.object}function isVariable(t){return t?.termType==="Variable"}function findAllVariables(t){if(isTerm(t))isVariable(t)&&variables.add(`?${t.value}`);else if(Array.isArray(t))for(const e of t)findAllVariables(e);else if(t&&typeof t=="object")for(let e of Object.keys(t))e.startsWith("?")&&variables.add(e),findAllVariables(t[e])}function inScopeVariables(t){let e={};if(isTriple(t)){const n=[inScopeVariables(t.subject),inScopeVariables(t.predicate),inScopeVariables(t.object),t.graph?inScopeVariables(t.graph):{}];Object.assign(e,...n)}else if(isTerm(t))isVariable(t)&&(e[t.value]=t);else if(t.type==="bgp"){const n=t.triples;Object.assign(e,...n.map(inScopeVariables))}else if(t.type==="path")Object.assign(e,...t.items.map(inScopeVariables));else if(t.type==="group"||t.type==="union"||t.type==="optional")Object.assign(e,...t.patterns.map(inScopeVariables));else if(t.type==="service"||t.type==="graph")Object.assign(e,inScopeVariables(t.name)),Object.assign(e,...t.patterns.map(inScopeVariables));else if(t.type==="bind")Object.assign(e,inScopeVariables(t.variable));else if(t.type==="values"){if(t.values.length>0){const n=Object.keys(t.values[0]).map(o=>factory$1.createTerm(o));Object.assign(e,...n.map(inScopeVariables))}}else if(t.type==="query"&&(t.queryType==="SELECT"||t.queryType==="DESCRIBE")){t.where&&t.variables.some(util_1$1.default.isWildcard)&&Object.assign(e,...t.where.map(inScopeVariables));for(const n of t.variables)isVariable(n)?Object.assign(e,inScopeVariables(n)):n.variable&&Object.assign(e,inScopeVariables(n.variable));if(t.queryType==="SELECT"){if(t.group)for(const n of t.group)n.variable&&Object.assign(e,inScopeVariables(n.variable));if(t.values){const n={type:"values",values:t.values};Object.assign(e,inScopeVariables(n))}}}return e}function translateGroupGraphPattern(t){let e=[],n=[];if("patterns"in t)for(let d of t.patterns)(d.type==="filter"?e:n).push(d);if(t.type==="bgp")return translateBgp$1(t);let o;if(t.type==="union")o=factory$1.createUnion(n.map(d=>(d.type!=="group"&&(d={type:"group",patterns:[d]}),translateGroupGraphPattern(d))));else{if(t.type==="graph")return translateGraph$1(t);if(t.type==="group")o=n.reduce(accumulateGroupGraphPattern,factory$1.createBgp([]));else if(t.type==="values")o=translateInlineData(t);else if(t.type==="query")o=translateQuery(t,useQuads,!1);else throw new Error(`Unexpected type: ${t.type}`)}if(e.length>0){let d=e.map(h=>translateExpression$1(h.expression));d.length>0&&(o=factory$1.createFilter(o,d.reduce((h,l)=>factory$1.createOperatorExpression("&&",[h,l]))))}return o}function translateExpression$1(t){if(util_1$1.default.isSimpleTerm(t)||util_1$1.default.isQuad(t))return factory$1.createTermExpression(t);if(util_1$1.default.isWildcard(t))return factory$1.createWildcardExpression();if("aggregation"in t)return factory$1.createAggregateExpression(t.aggregation,translateExpression$1(t.expression),!!t.distinct,t.separator);if("function"in t)return factory$1.createNamedExpression(t.function,t.args.map(translateExpression$1));if("operator"in t)return t.operator==="exists"||t.operator==="notexists"?factory$1.createExistenceExpression(t.operator==="notexists",translateGroupGraphPattern(t.args[0])):((t.operator==="in"||t.operator==="notin")&&(t.args=[t.args[0]].concat(t.args[1])),factory$1.createOperatorExpression(t.operator,t.args.map(translateExpression$1)));throw new Error(`Unknown expression: ${JSON.stringify(t)}`)}function translateBgp$1(t){let e=[],n=[];for(let o of t.triples)if("pathType"in o.predicate){let d=translatePath$1(o);for(let h of d)h.type===types$1.PATH?(e.length>0&&n.push(factory$1.createBgp(e)),e=[],n.push(h)):e.push(h)}else e.push(translateQuad(o));return e.length>0&&n.push(factory$1.createBgp(e)),n.length===1?n[0]:factory$1.createJoin(n)}function translatePath$1(t){let e=t.subject,n=translatePathPredicate(t.predicate),o=t.object;return simplifyPath(e,n,o)}function translatePathPredicate(t){if(util_1$1.default.isSimpleTerm(t)){if(t.termType==="NamedNode")return factory$1.createLink(t);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(t)}`)}if(t.pathType==="^")return factory$1.createInv(translatePathPredicate(t.items[0]));if(t.pathType==="!"){let e=[],n=[],o;"pathType"in t.items[0]&&t.items[0].pathType==="|"?o=t.items[0].items:o=t.items;for(let l of o)if(util_1$1.default.isSimpleTerm(l))e.push(l);else if(l.pathType==="^")n.push(l.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(l)}`);let d=factory$1.createNps(e),h=factory$1.createInv(factory$1.createNps(n));return n.length===0?d:e.length===0?h:factory$1.createAlt([d,h])}if(t.pathType==="/")return factory$1.createSeq(t.items.map(translatePathPredicate));if(t.pathType==="|")return factory$1.createAlt(t.items.map(translatePathPredicate));if(t.pathType==="*")return factory$1.createZeroOrMorePath(translatePathPredicate(t.items[0]));if(t.pathType==="+")return factory$1.createOneOrMorePath(translatePathPredicate(t.items[0]));if(t.pathType==="?")return factory$1.createZeroOrOnePath(translatePathPredicate(t.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(t)}`)}function simplifyPath(t,e,n){if(e.type===types$1.LINK)return[factory$1.createPattern(t,e.iri,n)];if(e.type===types$1.INV)return simplifyPath(n,e.path,t);if(e.type===types$1.SEQ){let o=t;return util_1$1.default.flatten(e.input.map((d,h)=>{const l=h===e.input.length-1?n:generateFreshVar(),u=simplifyPath(o,d,l);return l.termType==="Variable"&&(o=l),u}))}return[factory$1.createPath(t,e,n)]}function generateFreshVar(){let t=`?var${varCount++}`;return variables.has(t)?generateFreshVar():(variables.add(t),factory$1.createTerm(t))}function translateQuad(t){if("pathType"in t.predicate)throw new Error("Trying to translate property path to quad.");return factory$1.createPattern(t.subject,t.predicate,t.object,t.graph)}function translateGraph$1(t){const e={type:"group",patterns:t.patterns};let n=translateGroupGraphPattern(e);return useQuads?n=recurseGraph(n,t.name):n=factory$1.createGraph(n,t.name),n}let typeVals=Object.values(types$1);function recurseGraph(t,e,n){if(t.type===types$1.GRAPH){if(n)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");t=recurseGraph(t.input,t.name)}else if(t.type===types$1.BGP)t.patterns=t.patterns.map(o=>(n&&(o.subject.equals(e)&&(o.subject=n),o.predicate.equals(e)&&(o.predicate=n),o.object.equals(e)&&(o.object=n)),o.graph.termType==="DefaultGraph"&&(o.graph=e),o));else if(t.type===types$1.PATH)n&&(t.subject.equals(e)&&(t.subject=n),t.object.equals(e)&&(t.object=n)),t.graph.termType==="DefaultGraph"&&(t.graph=e);else if(t.type===types$1.PROJECT&&!n)t.variables.some(o=>o.equals(e))||(n=generateFreshVar()),t.input=recurseGraph(t.input,e,n);else if(t.type===types$1.EXTEND&&!n)t.variable.equals(e)&&(n=generateFreshVar()),t.input=recurseGraph(t.input,e,n);else for(let o of Object.keys(t))Array.isArray(t[o])?t[o]=t[o].map(d=>recurseGraph(d,e,n)):typeVals.indexOf(t[o].type)>=0?t[o]=recurseGraph(t[o],e,n):n&&isVariable(t[o])&&t[o].equals(e)&&(t[o]=n);return t}function accumulateGroupGraphPattern(t,e){if(e.type==="optional"){const n=translateGroupGraphPattern({type:"group",patterns:e.patterns});n.type===types$1.FILTER?t=factory$1.createLeftJoin(t,n.input,n.expression):t=factory$1.createLeftJoin(t,n)}else if(e.type==="minus"){const n=translateGroupGraphPattern({type:"group",patterns:e.patterns});t=factory$1.createMinus(t,n)}else if(e.type==="bind")t=factory$1.createExtend(t,e.variable,translateExpression$1(e.expression));else if(e.type==="service"){const n={type:"group",patterns:e.patterns},o=factory$1.createService(translateGroupGraphPattern(n),e.name,e.silent);t=simplifiedJoin(t,o)}else{const n=translateGroupGraphPattern(e);t=simplifiedJoin(t,n)}return t}function simplifiedJoin(t,e){return t.type===types$1.BGP&&e.type===types$1.BGP?t=factory$1.createBgp([...t.patterns,...e.patterns]):t.type===types$1.BGP&&t.patterns.length===0?t=e:e.type===types$1.BGP&&e.patterns.length===0||(t=factory$1.createJoin([t,e])),t}function translateInlineData(t){let e=(t.values.length===0?[]:Object.keys(t.values[0])).map(factory$1.createTerm.bind(factory$1)),n=t.values.map(o=>{let d=Object.keys(o);d=d.filter(l=>o[l]!==void 0);let h={};for(let l of d)h[l]=o[l];return h});return factory$1.createValues(e,n)}function translateAggregates(t,e){const n=t,o=[],d={};if(n.variables=n.variables&&n.variables.map(l=>mapAggregate(l,d)),n.having=n.having&&n.having.map(l=>mapAggregate(l,d)),n.order=n.order&&n.order.map(l=>mapAggregate(l,d)),n.group||Object.keys(d).length>0){const l=Object.keys(d).map(p=>translateBoundAggregate$1(d[p],factory$1.createTerm(p))),u=[];if(n.group)for(const p of n.group)if(util_1$1.default.isSimpleTerm(p.expression))u.push(p.expression);else{const g="variable"in p?p.variable:generateFreshVar();e=factory$1.createExtend(e,g,translateExpression$1(p.expression)),u.push(g)}e=factory$1.createGroup(e,u,l)}if(n.having)for(let l of n.having)e=factory$1.createFilter(e,translateExpression$1(l));t.values&&(e=factory$1.createJoin([e,translateInlineData(t)]));let h=[];if(t.queryType==="SELECT"||t.queryType==="DESCRIBE")if(t.variables.some(l=>l&&util_1$1.default.isWildcard(l)))h=Object.values(inScopeVariables(t)).sort((l,u)=>l.value.localeCompare(u.value));else for(let l of t.variables)isVariable(l)||!("variable"in l)?h.push(l):l.variable&&(h.push(l.variable),o.push(l));for(let l of o)e=factory$1.createExtend(e,l.variable,translateExpression$1(l.expression));return n.order&&(e=factory$1.createOrderBy(e,n.order.map(l=>{let u=translateExpression$1(l.expression);return l.descending&&(u=factory$1.createOperatorExpression("desc",[u])),u}))),t.queryType==="SELECT"&&(e=factory$1.createProject(e,h)),n.distinct&&(e=factory$1.createDistinct(e)),n.reduced&&(e=factory$1.createReduced(e)),t.queryType==="CONSTRUCT"?e=factory$1.createConstruct(e,(t.template||[]).map(translateQuad)):t.queryType==="ASK"?e=factory$1.createAsk(e):t.queryType==="DESCRIBE"&&(e=factory$1.createDescribe(e,h)),(n.offset||n.limit)&&(e=factory$1.createSlice(e,n.offset||0,n.limit)),n.from&&(e=factory$1.createFrom(e,n.from.default,n.from.named)),e}function mapAggregate(t,e){if("type"in t&&t.type==="aggregate"){let n=!1,o;for(let d of Object.keys(e))if(equal(e[d],t)){o=factory$1.createTerm(d),n=!0;break}return n||(o=generateFreshVar(),e[(0,rdf_string_1$3.termToString)(o)]=t),o}return"expression"in t&&t.expression?{...t,expression:mapAggregate(t.expression,e)}:"args"in t&&t.args?{...t,args:t.args.map(n=>mapAggregate(n,e))}:t}function translateBoundAggregate$1(t,e){if(t.type!=="aggregate"||!t.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(t)}`);const n=translateExpression$1(t);return n.variable=e,n}function translateUpdate(t){return t.updates.length===1?translateSingleUpdate(t.updates[0]):factory$1.createCompositeUpdate(t.updates.map(translateSingleUpdate))}function translateSingleUpdate(t){if("type"in t){if(t.type==="load")return translateUpdateGraphLoad(t);if(t.type==="clear"||t.type==="create"||t.type==="drop")return translateUpdateGraph(t);if(t.type==="add"||t.type==="copy"||t.type==="move")return translateUpdateGraphShortcut$1(t)}else if(t.updateType==="insertdelete"||t.updateType==="deletewhere"||t.updateType==="delete"||t.updateType==="insert")return translateInsertDelete(t);throw new Error(`Unknown update type ${JSON.stringify(t)}`)}function translateInsertDelete(t){if(!useQuads)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let e=[],n=[],o;if(t.delete&&(e=util_1$1.default.flatten(t.delete.map(d=>translateUpdateTriplesBlock(d,t.graph)))),t.insert&&(n=util_1$1.default.flatten(t.insert.map(d=>translateUpdateTriplesBlock(d,t.graph)))),t.where&&t.where.length>0){o=translateGroupGraphPattern({type:"group",patterns:t.where});const d=t.using;d?o=factory$1.createFrom(o,d.default,d.named):t.graph&&(o=recurseGraph(o,t.graph))}else t.updateType==="deletewhere"&&e.length>0&&(o=factory$1.createBgp(e));return factory$1.createDeleteInsert(e.length>0?e:void 0,n.length>0?n:void 0,o)}function translateUpdateTriplesBlock(t,e){let n=e;t.type==="graph"&&(n=t.name);let o=t.triples;return n&&(o=o.map(d=>Object.assign(d,{graph:n}))),o.map(translateQuad)}function translateUpdateGraph(t){let e;switch(util_1$1.default.isSimpleTerm(t.graph)?e=t.graph:t.graph.all?e="ALL":t.graph.default?e="DEFAULT":t.graph.named?e="NAMED":e=t.graph.name,t.type){case"clear":return factory$1.createClear(e,t.silent);case"create":return factory$1.createCreate(e,t.silent);case"drop":return factory$1.createDrop(e,t.silent)}}function translateUpdateGraphLoad(t){return factory$1.createLoad(t.source,t.destination,t.silent)}function translateUpdateGraphShortcut$1(t){const e=t.source.default?"DEFAULT":t.source.name,n=t.destination.default?"DEFAULT":t.destination.name;switch(t.type){case"copy":return factory$1.createCopy(e,n,t.silent);case"move":return factory$1.createMove(e,n,t.silent);case"add":return factory$1.createAdd(e,n,t.silent)}}function translateBlankNodesToVariables(t){const e={},n=Array.from(variables).reduce((d,h)=>(d[h]=!0,d),{});return util_1$1.default.mapOperation(t,{[Algebra$1.types.DELETE_INSERT]:d=>({result:d,recurse:!1}),[Algebra$1.types.PATH]:(d,h)=>({result:h.createPath(o(d.subject),d.predicate,o(d.object),o(d.graph)),recurse:!1}),[Algebra$1.types.PATTERN]:(d,h)=>({result:h.createPattern(o(d.subject),o(d.predicate),o(d.object),o(d.graph)),recurse:!1}),[Algebra$1.types.CONSTRUCT]:d=>({result:factory$1.createConstruct(translateBlankNodesToVariables(d.input),d.template),recurse:!1})});function o(d){if(d.termType==="BlankNode"){let h=e[d.value];return h||(h=util_1$1.default.createUniqueVariable(d.value,n,factory$1.dataFactory),n[h.value]=!0,e[d.value]=h),h}return d}}var sparql={},rdfIsomorphic={},RdfIsomorphic={},hash={},utils$9={},minimalisticAssert=assert$5;function assert$5(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$5.equal=function(e,n,o){if(e!=n)throw new Error(o||"Assertion failed: "+e+" != "+n)};var inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(t){inherits_browserExports=t}};typeof Object.create=="function"?inherits_browser.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,n){if(n){e.super_=n;var o=function(){};o.prototype=n.prototype,e.prototype=new o,e.prototype.constructor=e}};var assert$4=minimalisticAssert,inherits=inherits_browserExports;utils$9.inherits=inherits;function isSurrogatePair(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function toArray(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),d=0;d<t.length;d+=2)n.push(parseInt(t[d]+t[d+1],16))}else for(var o=0,d=0;d<t.length;d++){var h=t.charCodeAt(d);h<128?n[o++]=h:h<2048?(n[o++]=h>>6|192,n[o++]=h&63|128):isSurrogatePair(t,d)?(h=65536+((h&1023)<<10)+(t.charCodeAt(++d)&1023),n[o++]=h>>18|240,n[o++]=h>>12&63|128,n[o++]=h>>6&63|128,n[o++]=h&63|128):(n[o++]=h>>12|224,n[o++]=h>>6&63|128,n[o++]=h&63|128)}else for(d=0;d<t.length;d++)n[d]=t[d]|0;return n}utils$9.toArray=toArray;function toHex(t){for(var e="",n=0;n<t.length;n++)e+=zero2(t[n].toString(16));return e}utils$9.toHex=toHex;function htonl(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}utils$9.htonl=htonl;function toHex32(t,e){for(var n="",o=0;o<t.length;o++){var d=t[o];e==="little"&&(d=htonl(d)),n+=zero8(d.toString(16))}return n}utils$9.toHex32=toHex32;function zero2(t){return t.length===1?"0"+t:t}utils$9.zero2=zero2;function zero8(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}utils$9.zero8=zero8;function join32(t,e,n,o){var d=n-e;assert$4(d%4===0);for(var h=new Array(d/4),l=0,u=e;l<h.length;l++,u+=4){var p;o==="big"?p=t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:p=t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],h[l]=p>>>0}return h}utils$9.join32=join32;function split32(t,e){for(var n=new Array(t.length*4),o=0,d=0;o<t.length;o++,d+=4){var h=t[o];e==="big"?(n[d]=h>>>24,n[d+1]=h>>>16&255,n[d+2]=h>>>8&255,n[d+3]=h&255):(n[d+3]=h>>>24,n[d+2]=h>>>16&255,n[d+1]=h>>>8&255,n[d]=h&255)}return n}utils$9.split32=split32;function rotr32$1(t,e){return t>>>e|t<<32-e}utils$9.rotr32=rotr32$1;function rotl32$2(t,e){return t<<e|t>>>32-e}utils$9.rotl32=rotl32$2;function sum32$3(t,e){return t+e>>>0}utils$9.sum32=sum32$3;function sum32_3$1(t,e,n){return t+e+n>>>0}utils$9.sum32_3=sum32_3$1;function sum32_4$2(t,e,n,o){return t+e+n+o>>>0}utils$9.sum32_4=sum32_4$2;function sum32_5$2(t,e,n,o,d){return t+e+n+o+d>>>0}utils$9.sum32_5=sum32_5$2;function sum64$1(t,e,n,o){var d=t[e],h=t[e+1],l=o+h>>>0,u=(l<o?1:0)+n+d;t[e]=u>>>0,t[e+1]=l}utils$9.sum64=sum64$1;function sum64_hi$1(t,e,n,o){var d=e+o>>>0,h=(d<e?1:0)+t+n;return h>>>0}utils$9.sum64_hi=sum64_hi$1;function sum64_lo$1(t,e,n,o){var d=e+o;return d>>>0}utils$9.sum64_lo=sum64_lo$1;function sum64_4_hi$1(t,e,n,o,d,h,l,u){var p=0,g=e;g=g+o>>>0,p+=g<e?1:0,g=g+h>>>0,p+=g<h?1:0,g=g+u>>>0,p+=g<u?1:0;var v=t+n+d+l+p;return v>>>0}utils$9.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(t,e,n,o,d,h,l,u){var p=e+o+h+u;return p>>>0}utils$9.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(t,e,n,o,d,h,l,u,p,g){var v=0,b=e;b=b+o>>>0,v+=b<e?1:0,b=b+h>>>0,v+=b<h?1:0,b=b+u>>>0,v+=b<u?1:0,b=b+g>>>0,v+=b<g?1:0;var _=t+n+d+l+p+v;return _>>>0}utils$9.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(t,e,n,o,d,h,l,u,p,g){var v=e+o+h+u+g;return v>>>0}utils$9.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(t,e,n){var o=e<<32-n|t>>>n;return o>>>0}utils$9.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(t,e,n){var o=t<<32-n|e>>>n;return o>>>0}utils$9.rotr64_lo=rotr64_lo$1;function shr64_hi$1(t,e,n){return t>>>n}utils$9.shr64_hi=shr64_hi$1;function shr64_lo$1(t,e,n){var o=t<<32-n|e>>>n;return o>>>0}utils$9.shr64_lo=shr64_lo$1;var common$5={},utils$8=utils$9,assert$3=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,n){if(e=utils$8.toArray(e,n),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var o=e.length%this._delta8;this.pending=e.slice(e.length-o,e.length),this.pending.length===0&&(this.pending=null),e=utils$8.join32(e,0,e.length-o,this.endian);for(var d=0;d<e.length;d+=this._delta32)this._update(e,d,d+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$3(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,n=this._delta8,o=n-(e+this.padLength)%n,d=new Array(o+this.padLength);d[0]=128;for(var h=1;h<o;h++)d[h]=0;if(e<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)d[h++]=0;d[h++]=0,d[h++]=0,d[h++]=0,d[h++]=0,d[h++]=e>>>24&255,d[h++]=e>>>16&255,d[h++]=e>>>8&255,d[h++]=e&255}else for(d[h++]=e&255,d[h++]=e>>>8&255,d[h++]=e>>>16&255,d[h++]=e>>>24&255,d[h++]=0,d[h++]=0,d[h++]=0,d[h++]=0,l=8;l<this.padLength;l++)d[h++]=0;return d};var sha={},common$4={},utils$7=utils$9,rotr32=utils$7.rotr32;function ft_1$1(t,e,n,o){if(t===0)return ch32$1(e,n,o);if(t===1||t===3)return p32(e,n,o);if(t===2)return maj32$1(e,n,o)}common$4.ft_1=ft_1$1;function ch32$1(t,e,n){return t&e^~t&n}common$4.ch32=ch32$1;function maj32$1(t,e,n){return t&e^t&n^e&n}common$4.maj32=maj32$1;function p32(t,e,n){return t^e^n}common$4.p32=p32;function s0_256$1(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)}common$4.s0_256=s0_256$1;function s1_256$1(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)}common$4.s1_256=s1_256$1;function g0_256$1(t){return rotr32(t,7)^rotr32(t,18)^t>>>3}common$4.g0_256=g0_256$1;function g1_256$1(t){return rotr32(t,17)^rotr32(t,19)^t>>>10}common$4.g1_256=g1_256$1;var utils$6=utils$9,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$6.rotl32,sum32$2=utils$6.sum32,sum32_5$1=utils$6.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$6.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,n){for(var o=this.W,d=0;d<16;d++)o[d]=e[n+d];for(;d<o.length;d++)o[d]=rotl32$1(o[d-3]^o[d-8]^o[d-14]^o[d-16],1);var h=this.h[0],l=this.h[1],u=this.h[2],p=this.h[3],g=this.h[4];for(d=0;d<o.length;d++){var v=~~(d/20),b=sum32_5$1(rotl32$1(h,5),ft_1(v,l,u,p),g,o[d],sha1_K[v]);g=p,p=u,u=rotl32$1(l,30),l=h,h=b}this.h[0]=sum32$2(this.h[0],h),this.h[1]=sum32$2(this.h[1],l),this.h[2]=sum32$2(this.h[2],u),this.h[3]=sum32$2(this.h[3],p),this.h[4]=sum32$2(this.h[4],g)};SHA1.prototype._digest=function(e){return e==="hex"?utils$6.toHex32(this.h,"big"):utils$6.split32(this.h,"big")};var utils$5=utils$9,common$2=common$5,shaCommon=common$4,assert$2=minimalisticAssert,sum32$1=utils$5.sum32,sum32_4$1=utils$5.sum32_4,sum32_5=utils$5.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$5.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(e,n){for(var o=this.W,d=0;d<16;d++)o[d]=e[n+d];for(;d<o.length;d++)o[d]=sum32_4$1(g1_256(o[d-2]),o[d-7],g0_256(o[d-15]),o[d-16]);var h=this.h[0],l=this.h[1],u=this.h[2],p=this.h[3],g=this.h[4],v=this.h[5],b=this.h[6],_=this.h[7];for(assert$2(this.k.length===o.length),d=0;d<o.length;d++){var S=sum32_5(_,s1_256(g),ch32(g,v,b),this.k[d],o[d]),T=sum32$1(s0_256(h),maj32(h,l,u));_=b,b=v,v=g,g=sum32$1(p,S),p=u,u=l,l=h,h=sum32$1(S,T)}this.h[0]=sum32$1(this.h[0],h),this.h[1]=sum32$1(this.h[1],l),this.h[2]=sum32$1(this.h[2],u),this.h[3]=sum32$1(this.h[3],p),this.h[4]=sum32$1(this.h[4],g),this.h[5]=sum32$1(this.h[5],v),this.h[6]=sum32$1(this.h[6],b),this.h[7]=sum32$1(this.h[7],_)};SHA256$1.prototype._digest=function(e){return e==="hex"?utils$5.toHex32(this.h,"big"):utils$5.split32(this.h,"big")};var utils$4=utils$9,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$4.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(e){return e==="hex"?utils$4.toHex32(this.h.slice(0,7),"big"):utils$4.split32(this.h.slice(0,7),"big")};var utils$3=utils$9,common$1=common$5,assert$1=minimalisticAssert,rotr64_hi=utils$3.rotr64_hi,rotr64_lo=utils$3.rotr64_lo,shr64_hi=utils$3.shr64_hi,shr64_lo=utils$3.shr64_lo,sum64=utils$3.sum64,sum64_hi=utils$3.sum64_hi,sum64_lo=utils$3.sum64_lo,sum64_4_hi=utils$3.sum64_4_hi,sum64_4_lo=utils$3.sum64_4_lo,sum64_5_hi=utils$3.sum64_5_hi,sum64_5_lo=utils$3.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$3.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(e,n){for(var o=this.W,d=0;d<32;d++)o[d]=e[n+d];for(;d<o.length;d+=2){var h=g1_512_hi(o[d-4],o[d-3]),l=g1_512_lo(o[d-4],o[d-3]),u=o[d-14],p=o[d-13],g=g0_512_hi(o[d-30],o[d-29]),v=g0_512_lo(o[d-30],o[d-29]),b=o[d-32],_=o[d-31];o[d]=sum64_4_hi(h,l,u,p,g,v,b,_),o[d+1]=sum64_4_lo(h,l,u,p,g,v,b,_)}};SHA512$1.prototype._update=function(e,n){this._prepareBlock(e,n);var o=this.W,d=this.h[0],h=this.h[1],l=this.h[2],u=this.h[3],p=this.h[4],g=this.h[5],v=this.h[6],b=this.h[7],_=this.h[8],S=this.h[9],T=this.h[10],I=this.h[11],P=this.h[12],B=this.h[13],L=this.h[14],C=this.h[15];assert$1(this.k.length===o.length);for(var O=0;O<o.length;O+=2){var N=L,M=C,k=s1_512_hi(_,S),W=s1_512_lo(_,S),ae=ch64_hi(_,S,T,I,P),X=ch64_lo(_,S,T,I,P,B),G=this.k[O],re=this.k[O+1],F=o[O],$=o[O+1],U=sum64_5_hi(N,M,k,W,ae,X,G,re,F,$),H=sum64_5_lo(N,M,k,W,ae,X,G,re,F,$);N=s0_512_hi(d,h),M=s0_512_lo(d,h),k=maj64_hi(d,h,l,u,p),W=maj64_lo(d,h,l,u,p,g);var ee=sum64_hi(N,M,k,W),ge=sum64_lo(N,M,k,W);L=P,C=B,P=T,B=I,T=_,I=S,_=sum64_hi(v,b,U,H),S=sum64_lo(b,b,U,H),v=p,b=g,p=l,g=u,l=d,u=h,d=sum64_hi(U,H,ee,ge),h=sum64_lo(U,H,ee,ge)}sum64(this.h,0,d,h),sum64(this.h,2,l,u),sum64(this.h,4,p,g),sum64(this.h,6,v,b),sum64(this.h,8,_,S),sum64(this.h,10,T,I),sum64(this.h,12,P,B),sum64(this.h,14,L,C)};SHA512$1.prototype._digest=function(e){return e==="hex"?utils$3.toHex32(this.h,"big"):utils$3.split32(this.h,"big")};function ch64_hi(t,e,n,o,d){var h=t&n^~t&d;return h<0&&(h+=4294967296),h}function ch64_lo(t,e,n,o,d,h){var l=e&o^~e&h;return l<0&&(l+=4294967296),l}function maj64_hi(t,e,n,o,d){var h=t&n^t&d^n&d;return h<0&&(h+=4294967296),h}function maj64_lo(t,e,n,o,d,h){var l=e&o^e&h^o&h;return l<0&&(l+=4294967296),l}function s0_512_hi(t,e){var n=rotr64_hi(t,e,28),o=rotr64_hi(e,t,2),d=rotr64_hi(e,t,7),h=n^o^d;return h<0&&(h+=4294967296),h}function s0_512_lo(t,e){var n=rotr64_lo(t,e,28),o=rotr64_lo(e,t,2),d=rotr64_lo(e,t,7),h=n^o^d;return h<0&&(h+=4294967296),h}function s1_512_hi(t,e){var n=rotr64_hi(t,e,14),o=rotr64_hi(t,e,18),d=rotr64_hi(e,t,9),h=n^o^d;return h<0&&(h+=4294967296),h}function s1_512_lo(t,e){var n=rotr64_lo(t,e,14),o=rotr64_lo(t,e,18),d=rotr64_lo(e,t,9),h=n^o^d;return h<0&&(h+=4294967296),h}function g0_512_hi(t,e){var n=rotr64_hi(t,e,1),o=rotr64_hi(t,e,8),d=shr64_hi(t,e,7),h=n^o^d;return h<0&&(h+=4294967296),h}function g0_512_lo(t,e){var n=rotr64_lo(t,e,1),o=rotr64_lo(t,e,8),d=shr64_lo(t,e,7),h=n^o^d;return h<0&&(h+=4294967296),h}function g1_512_hi(t,e){var n=rotr64_hi(t,e,19),o=rotr64_hi(e,t,29),d=shr64_hi(t,e,6),h=n^o^d;return h<0&&(h+=4294967296),h}function g1_512_lo(t,e){var n=rotr64_lo(t,e,19),o=rotr64_lo(e,t,29),d=shr64_lo(t,e,6),h=n^o^d;return h<0&&(h+=4294967296),h}var utils$2=utils$9,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$2.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(e){return e==="hex"?utils$2.toHex32(this.h.slice(0,12),"big"):utils$2.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$1=utils$9,common=common$5,rotl32=utils$1.rotl32,sum32=utils$1.sum32,sum32_3=utils$1.sum32_3,sum32_4=utils$1.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$1.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,n){for(var o=this.h[0],d=this.h[1],h=this.h[2],l=this.h[3],u=this.h[4],p=o,g=d,v=h,b=l,_=u,S=0;S<80;S++){var T=sum32(rotl32(sum32_4(o,f(S,d,h,l),e[r[S]+n],K(S)),s[S]),u);o=u,u=l,l=rotl32(h,10),h=d,d=T,T=sum32(rotl32(sum32_4(p,f(79-S,g,v,b),e[rh[S]+n],Kh(S)),sh[S]),_),p=_,_=b,b=rotl32(v,10),v=g,g=T}T=sum32_3(this.h[1],h,b),this.h[1]=sum32_3(this.h[2],l,_),this.h[2]=sum32_3(this.h[3],u,p),this.h[3]=sum32_3(this.h[4],o,g),this.h[4]=sum32_3(this.h[0],d,v),this.h[0]=T};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$1.toHex32(this.h,"little"):utils$1.split32(this.h,"little")};function f(t,e,n,o){return t<=15?e^n^o:t<=31?e&n|~e&o:t<=47?(e|~n)^o:t<=63?e&o|n&~o:e^(n|~o)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils=utils$9,assert=minimalisticAssert;function Hmac(t,e,n){if(!(this instanceof Hmac))return new Hmac(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(e,n))}var hmac=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert(e.length<=this.blockSize);for(var n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new this.Hash().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,n){return this.inner.update(e,n),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=utils$9,e.common=common$5,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash);var rdfTerms={},QuadTermUtil={};Object.defineProperty(QuadTermUtil,"__esModule",{value:!0});QuadTermUtil.matchPatternMappings=QuadTermUtil.matchPatternComplete=QuadTermUtil.matchPattern=QuadTermUtil.matchTerm=QuadTermUtil.someTerms=QuadTermUtil.everyTerms=QuadTermUtil.reduceTerms=QuadTermUtil.mapTerms=QuadTermUtil.filterQuadTermNames=QuadTermUtil.filterTerms=QuadTermUtil.forEachTerms=QuadTermUtil.collectNamedTerms=QuadTermUtil.getNamedTerms=QuadTermUtil.getTermsNested=QuadTermUtil.getTerms=QuadTermUtil.TRIPLE_TERM_NAMES=QuadTermUtil.QUAD_TERM_NAMES=void 0;const rdf_data_factory_1=rdfDataFactory,DF=new rdf_data_factory_1.DataFactory;QuadTermUtil.QUAD_TERM_NAMES=["subject","predicate","object","graph"];QuadTermUtil.TRIPLE_TERM_NAMES=["subject","predicate","object"];function getTerms(t,e){return e&&t.graph.termType==="DefaultGraph"?[t.subject,t.predicate,t.object]:[t.subject,t.predicate,t.object,t.graph]}QuadTermUtil.getTerms=getTerms;function getTermsNested(t,e){const n=[];for(const o of getTerms(t,e))o.termType==="Quad"?getTermsNested(o,e).forEach(d=>n.push(d)):n.push(o);return n}QuadTermUtil.getTermsNested=getTermsNested;function getNamedTerms(t){return[{key:"subject",value:t.subject},{key:"predicate",value:t.predicate},{key:"object",value:t.object},{key:"graph",value:t.graph}]}QuadTermUtil.getNamedTerms=getNamedTerms;function collectNamedTerms(t,e,n){const o={};return t.forEach(d=>o[d.key]=d.value),e&&(o.subject=o.subject||e("subject"),o.predicate=o.predicate||e("predicate"),o.object=o.object||e("object"),o.graph=o.graph||e("graph")),(n||DF).quad(o.subject,o.predicate,o.object,o.graph)}QuadTermUtil.collectNamedTerms=collectNamedTerms;function forEachTerms(t,e){e(t.subject,"subject"),e(t.predicate,"predicate"),e(t.object,"object"),e(t.graph,"graph")}QuadTermUtil.forEachTerms=forEachTerms;function filterTerms(t,e){const n=[];return e(t.subject,"subject")&&n.push(t.subject),e(t.predicate,"predicate")&&n.push(t.predicate),e(t.object,"object")&&n.push(t.object),e(t.graph,"graph")&&n.push(t.graph),n}QuadTermUtil.filterTerms=filterTerms;function filterQuadTermNames(t,e){const n=[];return e(t.subject,"subject")&&n.push("subject"),e(t.predicate,"predicate")&&n.push("predicate"),e(t.object,"object")&&n.push("object"),e(t.graph,"graph")&&n.push("graph"),n}QuadTermUtil.filterQuadTermNames=filterQuadTermNames;function mapTerms(t,e,n){return(n||DF).quad(e(t.subject,"subject"),e(t.predicate,"predicate"),e(t.object,"object"),e(t.graph,"graph"))}QuadTermUtil.mapTerms=mapTerms;function reduceTerms(t,e,n){let o=n;return o=e(o,t.subject,"subject"),o=e(o,t.predicate,"predicate"),o=e(o,t.object,"object"),e(o,t.graph,"graph")}QuadTermUtil.reduceTerms=reduceTerms;function everyTerms(t,e){return e(t.subject,"subject")&&e(t.predicate,"predicate")&&e(t.object,"object")&&e(t.graph,"graph")}QuadTermUtil.everyTerms=everyTerms;function someTerms(t,e){return e(t.subject,"subject")||e(t.predicate,"predicate")||e(t.object,"object")||e(t.graph,"graph")}QuadTermUtil.someTerms=someTerms;function matchTerm(t,e){return!e||e.termType==="Variable"||e.termType==="Quad"&&t.termType==="Quad"&&matchPatternComplete(t,e)||e.equals(t)}QuadTermUtil.matchTerm=matchTerm;function matchPattern(t,e,n,o,d){return matchTerm(t.subject,e)&&matchTerm(t.predicate,n)&&matchTerm(t.object,o)&&matchTerm(t.graph,d)}QuadTermUtil.matchPattern=matchPattern;function matchPatternComplete(t,e){return matchPattern(t,e.subject,e.predicate,e.object,e.graph)}QuadTermUtil.matchPatternComplete=matchPatternComplete;function matchPatternMappings(t,e,n={}){const o={};function d(h,l){return everyTerms(h,(u,p)=>{var g,v;const b=l[p];switch(u.termType){case"Variable":return n.skipVarMapping&&b.termType==="Variable"||((v=(g=o[u.value])===null||g===void 0?void 0:g.equals(b))!==null&&v!==void 0?v:(o[u.value]=b,!0));case"Quad":return b.termType==="Quad"&&d(u,b);default:return u.equals(b)}})}return d(e,t)&&(n.returnMappings?o:!0)}QuadTermUtil.matchPatternMappings=matchPatternMappings;var TermUtil={};Object.defineProperty(TermUtil,"__esModule",{value:!0});TermUtil.getQuads=TermUtil.getDefaultGraphs=TermUtil.getVariables=TermUtil.getLiterals=TermUtil.getBlankNodes=TermUtil.getNamedNodes=TermUtil.getTermsOfType=TermUtil.uniqTerms=TermUtil.TERM_TYPES=void 0;const rdf_string_1$2=rdfString;TermUtil.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function uniqTerms(t){const e={};return t.filter(n=>{const o=rdf_string_1$2.termToString(n);return!(o in e)&&(e[o]=!0)})}TermUtil.uniqTerms=uniqTerms;function getTermsOfType(t,e){return t.filter(n=>n.termType===e)}TermUtil.getTermsOfType=getTermsOfType;function getNamedNodes(t){return getTermsOfType(t,"NamedNode")}TermUtil.getNamedNodes=getNamedNodes;function getBlankNodes(t){return getTermsOfType(t,"BlankNode")}TermUtil.getBlankNodes=getBlankNodes;function getLiterals(t){return getTermsOfType(t,"Literal")}TermUtil.getLiterals=getLiterals;function getVariables(t){return getTermsOfType(t,"Variable")}TermUtil.getVariables=getVariables;function getDefaultGraphs(t){return getTermsOfType(t,"DefaultGraph")}TermUtil.getDefaultGraphs=getDefaultGraphs;function getQuads(t){return getTermsOfType(t,"Quad")}TermUtil.getQuads=getQuads;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,d,h,l){l===void 0&&(l=h),Object.defineProperty(o,l,{enumerable:!0,get:function(){return d[h]}})}:function(o,d,h,l){l===void 0&&(l=h),o[l]=d[h]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,d){for(var h in o)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,o,h)};Object.defineProperty(t,"__esModule",{value:!0}),n(QuadTermUtil,t),n(TermUtil,t)})(rdfTerms);Object.defineProperty(RdfIsomorphic,"__esModule",{value:!0});RdfIsomorphic.isTermGrounded=RdfIsomorphic.termToSignature=RdfIsomorphic.quadToSignature=RdfIsomorphic.sha1hex=RdfIsomorphic.hashTerm=RdfIsomorphic.hashTerms=RdfIsomorphic.getGraphBlankNodes=RdfIsomorphic.uniqGraph=RdfIsomorphic.deindexGraph=RdfIsomorphic.indexGraph=RdfIsomorphic.getQuadsWithoutBlankNodes=RdfIsomorphic.getQuadsWithBlankNodes=RdfIsomorphic.hasValue=RdfIsomorphic.hashValues=RdfIsomorphic.getBijectionInner=RdfIsomorphic.getBijection=RdfIsomorphic.isomorphic=void 0;const hash_js_1=hash,rdf_string_1$1=rdfString,rdf_terms_1=rdfTerms;function isomorphic(t,e){return!!getBijection(t,e)}RdfIsomorphic.isomorphic=isomorphic;function getBijection(t,e){const n=indexGraph(getQuadsWithoutBlankNodes(t)),o=indexGraph(getQuadsWithoutBlankNodes(e));if(Object.keys(n).length!==Object.keys(o).length)return null;for(const p in n)if(n[p]!==o[p])return null;const d=uniqGraph(getQuadsWithBlankNodes(t)),h=uniqGraph(getQuadsWithBlankNodes(e)),l=getGraphBlankNodes(t),u=getGraphBlankNodes(e);return getBijectionInner(d,h,l,u)}RdfIsomorphic.getBijection=getBijection;function getBijectionInner(t,e,n,o,d,h){d||(d={}),h||(h={});const[l,u]=hashTerms(t,n,d),[p,g]=hashTerms(e,o,h);if(Object.keys(l).length!==Object.keys(p).length)return null;for(const b in l)if(!hasValue(p,l[b]))return null;let v={};for(const b of n){const _=rdf_string_1$1.termToString(b),S=u[_];for(const T in g)if(g[T]===S){v[_]=T,delete g[T];break}}if(!arraysEqual(Object.keys(v).sort(),n.map(rdf_string_1$1.termToString).sort())||!arraysEqual(hashValues(v).sort(),o.map(rdf_string_1$1.termToString).sort())){v=null;for(const b of n){const _=rdf_string_1$1.termToString(b);if(!l[_])for(const S of o){const T=rdf_string_1$1.termToString(S);if(!p[T]&&u[_]===g[T]){const I=sha1hex(_);v=getBijectionInner(t,e,n,o,Object.assign(Object.assign({},l),{[_]:I}),Object.assign(Object.assign({},p),{[T]:I}))}}}}return v}RdfIsomorphic.getBijectionInner=getBijectionInner;function arraysEqual(t,e){if(t.length!==e.length)return!1;for(let n=t.length;n--;)if(t[n]!==e[n])return!1;return!0}function hashValues(t){const e=[];for(const n in t)e.push(t[n]);return e}RdfIsomorphic.hashValues=hashValues;function hasValue(t,e){for(const n in t)if(t[n]===e)return!0;return!1}RdfIsomorphic.hasValue=hasValue;function getQuadsWithBlankNodes(t){return t.filter(e=>rdf_terms_1.someTerms(e,n=>n.termType==="BlankNode"||n.termType==="Quad"&&rdf_terms_1.getTermsNested(n).some(o=>o.termType==="BlankNode")))}RdfIsomorphic.getQuadsWithBlankNodes=getQuadsWithBlankNodes;function getQuadsWithoutBlankNodes(t){return t.filter(e=>rdf_terms_1.everyTerms(e,n=>n.termType!=="BlankNode"&&!(n.termType==="Quad"&&rdf_terms_1.getTermsNested(n).some(o=>o.termType==="BlankNode"))))}RdfIsomorphic.getQuadsWithoutBlankNodes=getQuadsWithoutBlankNodes;function indexGraph(t){const e={};for(const n of t)e[JSON.stringify(rdf_string_1$1.quadToStringQuad(n))]=!0;return e}RdfIsomorphic.indexGraph=indexGraph;function deindexGraph(t){return Object.keys(t).map(e=>rdf_string_1$1.stringQuadToQuad(JSON.parse(e)))}RdfIsomorphic.deindexGraph=deindexGraph;function uniqGraph(t){return deindexGraph(indexGraph(t))}RdfIsomorphic.uniqGraph=uniqGraph;function getGraphBlankNodes(t){return rdf_terms_1.uniqTerms(t.map(e=>rdf_terms_1.getBlankNodes(rdf_terms_1.getTermsNested(e))).reduce((e,n)=>e.concat(n),[]))}RdfIsomorphic.getGraphBlankNodes=getGraphBlankNodes;function hashTerms(t,e,n){const o=Object.assign({},n),d={};let h=!0;for(;h;){const l=Object.keys(o).length;for(const p of e){const g=rdf_string_1$1.termToString(p);if(!o[g]){const[v,b]=hashTerm(p,t,o);v&&(o[g]=b),d[g]=b}}const u={};for(const p in d){const g=d[p];u[g]===void 0?u[g]=p:u[g]=!1}for(const p in u){const g=u[p];g&&(o[g]=p)}h=l!==Object.keys(o).length}return[o,d]}RdfIsomorphic.hashTerms=hashTerms;function hashTerm(t,e,n){const o=[];let d=!0;for(const l of e){const u=rdf_terms_1.getTermsNested(l);if(u.some(p=>p.equals(t))){o.push(quadToSignature(l,n,t));for(const p of u)!isTermGrounded(p,n)&&!p.equals(t)&&(d=!1)}}const h=sha1hex(o.sort().join(""));return[d,h]}RdfIsomorphic.hashTerm=hashTerm;function sha1hex(t){return hash_js_1.sha1().update(t).digest("hex")}RdfIsomorphic.sha1hex=sha1hex;function quadToSignature(t,e,n){return rdf_terms_1.getTerms(t).map(o=>termToSignature(o,e,n)).join("|")}RdfIsomorphic.quadToSignature=quadToSignature;function termToSignature(t,e,n){return t.equals(n)?"@self":t.termType==="BlankNode"?e[rdf_string_1$1.termToString(t)]||"@blank":t.termType==="Quad"?`<${quadToSignature(t,e,n)}>`:rdf_string_1$1.termToString(t)}RdfIsomorphic.termToSignature=termToSignature;function isTermGrounded(t,e){return t.termType!=="BlankNode"&&!(t.termType==="Quad"&&rdf_terms_1.getTermsNested(t).some(n=>!isTermGrounded(n,e)))||!!e[rdf_string_1$1.termToString(t)]}RdfIsomorphic.isTermGrounded=isTermGrounded;(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,d,h,l){l===void 0&&(l=h),Object.defineProperty(o,l,{enumerable:!0,get:function(){return d[h]}})}:function(o,d,h,l){l===void 0&&(l=h),o[l]=d[h]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,d){for(var h in o)h!=="default"&&!Object.prototype.hasOwnProperty.call(d,h)&&e(d,o,h)};Object.defineProperty(t,"__esModule",{value:!0}),n(RdfIsomorphic,t)})(rdfIsomorphic);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(t,e,n,o){o===void 0&&(o=n);var d=Object.getOwnPropertyDescriptor(e,n);(!d||("get"in d?!e.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,o,d)}:function(t,e,n,o){o===void 0&&(o=n),t[o]=e[n]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&__createBinding(e,t,n);return __setModuleDefault(e,t),e},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(sparql,"__esModule",{value:!0});sparql.toSparqlJs=sparql.toSparql=void 0;const rdf_isomorphic_1=rdfIsomorphic,rdf_string_1=rdfString,sparqljs_1=sparql$1,Algebra=__importStar(algebra),factory_1=__importDefault(factory$2),util_1=__importDefault(util),types=Algebra.types,eTypes=Algebra.expressionTypes;let context;const factory=new factory_1.default;function toSparql(t,e={}){return new sparqljs_1.Generator(e).stringify(toSparqlJs(t))}sparql.toSparql=toSparql;function toSparqlJs(t){resetContext(),t=removeQuads(t);let e=translateOperation(t);return e.type==="group"?e.patterns[0]:e}sparql.toSparqlJs=toSparqlJs;function resetContext(){context={project:!1,extend:[],group:[],aggregates:[],order:[]}}function translateOperation(t){switch(t.type!==types.EXTEND&&t.type!==types.ORDER_BY&&t.type!==types.GRAPH&&(context.project=!1),t.type){case types.EXPRESSION:return translateExpression(t);case types.ASK:return translateProject(t,types.ASK);case types.BGP:return translateBgp(t);case types.CONSTRUCT:return translateConstruct(t);case types.DESCRIBE:return translateProject(t,types.DESCRIBE);case types.DISTINCT:return translateDistinct(t);case types.EXTEND:return translateExtend(t);case types.FROM:return translateFrom(t);case types.FILTER:return translateFilter(t);case types.GRAPH:return translateGraph(t);case types.GROUP:return translateGroup(t);case types.JOIN:return translateJoin(t);case types.LEFT_JOIN:return translateLeftJoin(t);case types.MINUS:return translateMinus(t);case types.NOP:return{};case types.ORDER_BY:return translateOrderBy(t);case types.PATH:return translatePath(t);case types.PATTERN:return translatePattern(t);case types.PROJECT:return translateProject(t,types.PROJECT);case types.REDUCED:return translateReduced(t);case types.SERVICE:return translateService(t);case types.SLICE:return translateSlice(t);case types.UNION:return translateUnion(t);case types.VALUES:return translateValues(t);case types.COMPOSITE_UPDATE:return translateCompositeUpdate(t);case types.DELETE_INSERT:return translateDeleteInsert(t);case types.LOAD:return translateLoad(t);case types.CLEAR:return translateClear(t);case types.CREATE:return translateCreate(t);case types.DROP:return translateDrop(t);case types.ADD:return translateAdd(t);case types.MOVE:return translateMove(t);case types.COPY:return translateCopy(t)}throw new Error(`Unknown Operation type ${t.type}`)}function translateExpression(t){switch(t.expressionType){case eTypes.AGGREGATE:return translateAggregateExpression(t);case eTypes.EXISTENCE:return translateExistenceExpression(t);case eTypes.NAMED:return translateNamedExpression(t);case eTypes.OPERATOR:return translateOperatorExpression(t);case eTypes.TERM:return translateTermExpression(t);case eTypes.WILDCARD:return translateWildcardExpression(t)}throw new Error(`Unknown Expression Operation type ${t.expressionType}`)}function translatePathComponent(t){switch(t.type){case types.ALT:return translateAlt(t);case types.INV:return translateInv(t);case types.LINK:return translateLink(t);case types.NPS:return translateNps(t);case types.ONE_OR_MORE_PATH:return translateOneOrMorePath(t);case types.SEQ:return translateSeq(t);case types.ZERO_OR_MORE_PATH:return translateZeroOrMorePath(t);case types.ZERO_OR_ONE_PATH:return translateZeroOrOnePath(t)}throw new Error(`Unknown Path type ${t.type}`)}function translateTerm(t){return(0,rdf_string_1.termToString)(t)}function translateAggregateExpression(t){const e={expression:translateExpression(t.expression),type:"aggregate",aggregation:t.aggregator,distinct:t.distinct};return t.separator&&(e.separator=t.separator),e}function translateExistenceExpression(t){return{type:"operation",operator:t.not?"notexists":"exists",args:util_1.default.flatten([translateOperation(t.input)])}}function translateNamedExpression(t){return{type:"functionCall",function:t.name,args:t.args.map(translateExpression)}}function translateOperatorExpression(t){if(t.operator==="desc"){const n={expression:translateExpression(t.args[0])};return n.descending=!0,n}const e={type:"operation",operator:t.operator,args:t.args.map(translateExpression)};return(e.operator==="in"||e.operator==="notin")&&(e.args=[e.args[0]].concat([e.args.slice(1)])),e}function translateTermExpression(t){return t.term}function translateWildcardExpression(t){return t.wildcard}function translateBoundAggregate(t){return t}function translateBgp(t){let e=t.patterns.map(translatePattern);return e.length===0?null:{type:"bgp",triples:e}}function translateConstruct(t){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:t.template.map(translatePattern),where:util_1.default.flatten([translateOperation(t.input)])}}function translateDistinct(t){let e=translateOperation(t.input);return e.patterns[0].distinct=!0,e}function translateExtend(t){return context.project?(context.extend.push(t),translateOperation(t.input)):util_1.default.flatten([translateOperation(t.input),{type:"bind",variable:t.variable,expression:translateExpression(t.expression)}])}function translateFrom(t){const e=translateOperation(t.input),n=e.patterns[0];return n.from={default:t.default,named:t.named},e}function translateFilter(t){return{type:"group",patterns:util_1.default.flatten([translateOperation(t.input),{type:"filter",expression:translateExpression(t.expression)}])}}function translateGraph(t){return{type:"graph",patterns:util_1.default.flatten([translateOperation(t.input)]),name:t.name}}function translateGroup(t){const e=translateOperation(t.input),n=t.aggregates.map(translateBoundAggregate);return context.aggregates.push(...n),context.group.push(...t.variables),e}function translateJoin(t){return util_1.default.flatten(t.input.map(translateOperation)).reduce((n,o)=>(o.type!=="bgp"||n.length==0||n[n.length-1].type!=="bgp"?n.push(o):n[n.length-1].triples.push(...o.triples),n),[])}function translateLeftJoin(t){const e={type:"optional",patterns:[translateOperation(t.input[1])]};return t.expression&&e.patterns.push({type:"filter",expression:translateExpression(t.expression)}),e.patterns=util_1.default.flatten(e.patterns),util_1.default.flatten([translateOperation(t.input[0]),e])}function translateMinus(t){let e=translateOperation(t.input[1]);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),util_1.default.flatten([translateOperation(t.input[0]),{type:"minus",patterns:e}])}function translateOrderBy(t){return context.order.push(...t.expressions),translateOperation(t.input)}function translatePath(t){return{type:"bgp",triples:[{subject:t.subject,predicate:translatePathComponent(t.predicate),object:t.object}]}}function translatePattern(t){return{subject:t.subject,predicate:t.predicate,object:t.object}}function replaceAggregatorVariables(t,e){let n=util_1.default.isSimpleTerm(t)?translateTerm(t):t;if(typeof n=="string"){if(e[n])return e[n]}else if(Array.isArray(t))t=t.map(o=>replaceAggregatorVariables(o,e));else for(let o of Object.keys(t))t[o]=replaceAggregatorVariables(t[o],e);return t}function translateProject(t,e){const n={type:"query",prefixes:{}},o=n;let d;e===types.PROJECT?(n.queryType="SELECT",d=t.variables):e===types.ASK?n.queryType="ASK":e===types.DESCRIBE&&(n.queryType="DESCRIBE",d=t.terms);const h=context.extend,l=context.group,u=context.aggregates,p=context.order;resetContext(),context.project=!0;let g=util_1.default.flatten([translateOperation(t.input)]);g.length===1&&g[0].type==="group"&&(g=g[0].patterns),n.where=g;let v={};for(let _ of context.aggregates)v[translateTerm(_.variable)]=translateExpression(_);let b={};for(let _=context.extend.length-1;_>=0;--_){let S=context.extend[_];b[translateTerm(S.variable)]=replaceAggregatorVariables(translateExpression(S.expression),v)}if(context.group.length>0&&(o.group=context.group.map(_=>{let S=translateTerm(_);if(b[S]){let T=b[S];return delete b[S],{variable:_,expression:T}}return{expression:_}})),context.order.length>0&&(o.order=context.order.map(translateOperation).map(_=>_.descending?_:{expression:_})),d&&(o.variables=d.map(_=>{let S=translateTerm(_);return b[S]?{variable:_,expression:b[S]}:_}),o.variables.length===0&&(o.variables=[new sparqljs_1.Wildcard])),n.where.length>0&&n.where[n.where.length-1].type==="filter"){const _=n.where[n.where.length-1];objectContainsValues(_,Object.keys(v))&&(o.having=util_1.default.flatten([replaceAggregatorVariables(_.expression,v)]),n.where.splice(-1))}return context.extend=h,context.group=l,context.aggregates=u,context.order=p,{type:"group",patterns:[o]}}function objectContainsValues(t,e){return util_1.default.isSimpleTerm(t)?e.indexOf(translateTerm(t))>=0:Array.isArray(t)?t.some(n=>objectContainsValues(n,e)):t===Object(t)?Object.keys(t).some(n=>objectContainsValues(t[n],e)):e.indexOf(t)>=0}function translateReduced(t){let e=translateOperation(t.input);return e.patterns[0].reduced=!0,e}function translateService(t){let e=translateOperation(t.input);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),{type:"service",name:t.name,silent:t.silent,patterns:e}}function translateSlice(t){let e=translateOperation(t.input),n=e;return e.type&&e.type==="group"&&(n=e.patterns[0]),t.start!==0&&(n.offset=t.start),t.length!==void 0&&(n.limit=t.length),e}function translateUnion(t){return{type:"union",patterns:util_1.default.flatten(t.input.map(translateOperation))}}function translateValues(t){return{type:"values",values:t.bindings.map(e=>{let n={};for(let o of t.variables){let d=`?${o.value}`;e[d]?n[d]=e[d]:n[d]=void 0}return n})}}function translateAlt(t){const e=t.input.map(translatePathComponent);return e.every(n=>"pathType"in n&&n.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:util_1.default.flatten(e.map(n=>n.items))}]}:{type:"path",pathType:"|",items:e}}function translateInv(t){if(t.path.type===types.NPS){const e=t.path.iris.map(n=>({type:"path",pathType:"^",items:[n]}));return e.length<=1?{type:"path",pathType:"!",items:e}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e}]}}return{type:"path",pathType:"^",items:[translatePathComponent(t.path)]}}function translateLink(t){return t.iri}function translateNps(t){return t.iris.length<=1?{type:"path",pathType:"!",items:t.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:t.iris}]}}function translateOneOrMorePath(t){return{type:"path",pathType:"+",items:[translatePathComponent(t.path)]}}function translateSeq(t){return{type:"path",pathType:"/",items:t.input.map(translatePathComponent)}}function translateZeroOrMorePath(t){return{type:"path",pathType:"*",items:[translatePathComponent(t.path)]}}function translateZeroOrOnePath(t){return{type:"path",pathType:"?",items:[translatePathComponent(t.path)]}}function translateCompositeUpdate(t){const e=t.updates.map(n=>translateOperation(n).updates[0]);return{prefixes:{},type:"update",updates:e}}function translateDeleteInsert(t){var e;let n=t.where,o;if(n&&n.type===types.FROM){let h=n;n=h.input,o={default:h.default,named:h.named}}const d=[{updateType:"insertdelete",delete:convertUpdatePatterns(t.delete||[]),insert:convertUpdatePatterns(t.insert||[])}];if(o&&(d[0].using=o),!n||n.type===types.BGP&&n.patterns.length===0)d[0].where=[];else{const h={};let l=translateOperation(removeQuadsRecursive(n,h));l.type==="group"?d[0].where=l.patterns:d[0].where=[l];const u=Object.keys(h);if(u.length>0){if(u.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");const p=(e=h[u[0]])===null||e===void 0?void 0:e.graph;p&&p.value!==""&&(d[0].where=[{type:"graph",patterns:d[0].where,name:p}])}}return!t.delete&&!t.where?(d[0].updateType="insert",delete d[0].delete,delete d[0].where):!t.insert&&!t.where?(delete d[0].insert,delete d[0].where,t.delete.some(h=>h.subject.termType==="Variable"||h.predicate.termType==="Variable"||h.object.termType==="Variable")?d[0].updateType="deletewhere":d[0].updateType="delete"):!t.insert&&t.where&&t.where.type==="bgp"&&(0,rdf_isomorphic_1.isomorphic)(t.delete,t.where.patterns)&&(delete d[0].where,d[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:d}}function translateLoad(t){const e=[{type:"load",silent:!!t.silent,source:t.source}];return t.destination&&(e[0].destination=t.destination),{prefixes:{},type:"update",updates:e}}function translateClear(t){return translateClearCreateDrop(t,"clear")}function translateCreate(t){return translateClearCreateDrop(t,"create")}function translateDrop(t){return translateClearCreateDrop(t,"drop")}function translateClearCreateDrop(t,e){const n=[{type:e,silent:!!t.silent}];return t.source==="DEFAULT"?n[0].graph={default:!0}:t.source==="NAMED"?n[0].graph={named:!0}:t.source==="ALL"?n[0].graph={all:!0}:n[0].graph={type:"graph",name:t.source},{prefixes:{},type:"update",updates:n}}function translateAdd(t){return translateUpdateGraphShortcut(t,"add")}function translateMove(t){return translateUpdateGraphShortcut(t,"move")}function translateCopy(t){return translateUpdateGraphShortcut(t,"copy")}function translateUpdateGraphShortcut(t,e){const n=[{type:e,silent:!!t.silent}];return n[0].source=t.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:t.source},n[0].destination=t.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:t.destination},{prefixes:{},type:"update",updates:n}}function convertUpdatePatterns(t){if(!t)return[];const e={};return t.forEach(n=>{const o=n.graph.value;e[o]||(e[o]=[]),e[o].push(n)}),Object.keys(e).map(n=>n===""?{type:"bgp",triples:e[n].map(translatePattern)}:{type:"graph",triples:e[n].map(translatePattern),name:e[n][0].graph})}function removeQuads(t){return removeQuadsRecursive(t,{})}function removeQuadsRecursive(t,e){if(Array.isArray(t))return t.map(l=>removeQuadsRecursive(l,e));if(!t.type||t.type===types.DELETE_INSERT)return t;if((t.type===types.PATTERN||t.type===types.PATH)&&t.graph)return e[t.graph.value]||(e[t.graph.value]={graph:t.graph,values:[]}),e[t.graph.value].values.push(t),t;const n={},o={},d={};for(let l of Object.keys(t)){const u={};n[l]=removeQuadsRecursive(t[l],u);const p=Object.keys(u);if(p.length>1){let g=potentialGraphFromPatterns(u[p[0]].values);for(let v=1;v<p.length;++v){const b=potentialGraphFromPatterns(u[p[v]].values);g=factory.createJoin([g,b])}return p.map(v=>delete u[v]),g}else if(p.length===1){const g=u[p[0]].graph;o[l]=g,d[g.value]=g}}const h=Object.keys(d);if(h.length>0)if(h.length===1&&t.type!==types.PROJECT)e[h[0]]={graph:d[h[0]],values:[n]};else for(let l of Object.keys(o))o[l].value.length>0&&(n[l]=factory.createGraph(n[l],o[l]));return n}function potentialGraphFromPatterns(t){const e=factory.createBgp(t),n=t[0].graph;return n.value.length===0?e:factory.createGraph(e,n)}(function(t){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(v,b,_,S){S===void 0&&(S=_);var T=Object.getOwnPropertyDescriptor(b,_);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(v,S,T)}:function(v,b,_,S){S===void 0&&(S=_),v[S]=b[_]}),n=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(v,b){Object.defineProperty(v,"default",{enumerable:!0,value:b})}:function(v,b){v.default=b}),o=commonjsGlobal&&commonjsGlobal.__importStar||function(v){if(v&&v.__esModule)return v;var b={};if(v!=null)for(var _ in v)_!=="default"&&Object.prototype.hasOwnProperty.call(v,_)&&e(b,v,_);return n(b,v),b},d=commonjsGlobal&&commonjsGlobal.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.toSparqlJs=t.toSparql=t.Factory=t.Algebra=t.translate=void 0;const h=d(sparqlAlgebra);t.translate=h.default;const l=o(algebra);t.Algebra=l;const u=d(factory$2);t.Factory=u.default;const p=sparql;Object.defineProperty(t,"toSparql",{enumerable:!0,get:function(){return p.toSparql}}),Object.defineProperty(t,"toSparqlJs",{enumerable:!0,get:function(){return p.toSparqlJs}});const g=d(util);t.Util=g.default})(sparqlalgebrajs);var index$1=getDefaultExportFromCjs(sparqlalgebrajs),__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__=_mergeNamespaces({__proto__:null,default:index$1},[sparqlalgebrajs]),__quadstore_comunica_modules__={"../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorAbstractPath=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("../node_modules/@comunica/context-entries/lib/index.js"),l=n("asynciterator"),u=n("../node_modules/rdf-data-factory/index.js"),p=n("../node_modules/rdf-string/index.js"),g=n("sparqlalgebrajs"),v=n("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),b=new u.DataFactory,_=new o.BindingsFactory;class S extends d.ActorQueryOperationTypedMediated{constructor(I,P){super(I,"path"),this.predicateType=P}async testOperation(I,P){if(I.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(I,P){return P?I&&(I.subject.value===P||I.object.value===P)?this.generateVariable(I,`${P}b`):b.variable(P):this.generateVariable(I,"b")}async isPathArbitraryLengthDistinct(I,P){return I.get(h.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(I=I.set(h.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:I,operation:void 0}):(I=I.set(h.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:I,operation:d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:S.FACTORY.createDistinct(P),context:I}))})}async predicateStarGraphVariable(I,P,B,L,C){const O=this.generateVariable(S.FACTORY.createPath(I,B,P,L)),N=S.FACTORY.createUnion([S.FACTORY.createPattern(I,O,P,L),S.FACTORY.createPattern(P,O,I,L)]),M=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:C,operation:N})),k=new Set;return{bindingsStream:new l.MultiTransformIterator(M.bindingsStream,{multiTransform:ae=>{const X=ae.get(L);return k.has(X.value)?new l.EmptyIterator:(k.add(X.value),new l.TransformIterator(async()=>{const G=new l.BufferedIterator;return await this.getObjectsPredicateStar(I,B,X,C,{},G,{count:0}),G.transform({transform(re,F,$){$(_.bindings([[P,re],[L,X]])),F()}})},{maxBufferSize:128}))},autoStart:!1}),metadata:M.metadata}}async getObjectsPredicateStarEval(I,P,B,L,C,O){if(L.termType==="Variable")return this.predicateStarGraphVariable(I,B,P,L,C);const N=new v.PathVariableObjectIterator(I,P,L,C,this.mediatorQueryOperation,O);return{bindingsStream:N.transform({autoStart:!1,transform(k,W,ae){ae(_.bindings([[B,k]])),W()}}),metadata:()=>new Promise(k=>N.getProperty("metadata",W=>k(W())))}}async getObjectsPredicateStar(I,P,B,L,C,O,N){const M=(0,p.termToString)(I);if(C[M])return;O._push(I),C[M]=I,N.count++;const k=this.generateVariable(),W=S.FACTORY.createPath(I,P,k,B),ae=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:W,context:L}));return ae.bindingsStream.on("data",async X=>{const G=X.get(k);await this.getObjectsPredicateStar(G,P,B,L,C,O,N)}),ae.bindingsStream.on("end",()=>{--N.count===0&&O.close()}),ae.metadata}async getSubjectAndObjectBindingsPredicateStar(I,P,B,L,C,O,N,M,k,W,ae){const X=(0,p.termToString)(L)+(0,p.termToString)(O);if(k[X])return;if(ae.count++,k[X]=!0,W._push(_.bindings([[I,B],[P,L]])),X in M){const re=await M[X];for(const F of re)await this.getSubjectAndObjectBindingsPredicateStar(I,P,B,F,C,O,N,M,k,W,ae);--ae.count===0&&W.close();return}const G=new Promise(async(re,F)=>{const $=[],U=this.generateVariable(),H=S.FACTORY.createPath(L,C,U,O),ee=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:H,context:N}));ee.bindingsStream.on("data",async ge=>{const me=ge.get(U);$.push(me),await this.getSubjectAndObjectBindingsPredicateStar(I,P,B,me,C,O,N,M,k,W,ae)}),ee.bindingsStream.on("error",F),ee.bindingsStream.on("end",()=>{--ae.count===0&&W.close(),re($)})});M[X]=G}}e.ActorAbstractPath=S,S.FACTORY=new g.Factory},"../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathVariableObjectIterator=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("asynciterator"),h=n("../node_modules/rdf-data-factory/index.js"),l=n("../node_modules/rdf-string/index.js"),u=n("sparqlalgebrajs"),p=new h.DataFactory,g=new u.Factory;class v extends d.BufferedIterator{constructor(_,S,T,I,P,B,L=16){super({autoStart:!0}),this.subject=_,this.predicate=S,this.graph=T,this.context=I,this.mediatorQueryOperation=P,this.maxRunningOperations=L,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this._push(this.subject,B)}_end(_){for(const S of this.runningOperations)S.destroy();super._end(_)}_push(_,S=!0){let T;if(S&&(T=(0,l.termToString)(_),this.termHashes.has(T)))return;const I=p.variable("b");this.pendingOperations.push({variable:I,operation:g.createPath(_,this.predicate,I,this.graph)}),T&&(this.termHashes.set(T,_),super._push(_))}_read(_,S){const T=this;(async function(){for(;T.runningOperations.length<T.maxRunningOperations&&T.pendingOperations.length!==0;){const B=T.pendingOperations.pop(),L=o.ActorQueryOperation.getSafeBindings(await T.mediatorQueryOperation.mediate({operation:B.operation,context:T.context})),C=L.bindingsStream.transform({autoStart:!1,transform(O,N,M){const k=O.get(B.variable);M(k),N()}});C.done||(T.runningOperations.push(C),C.on("error",O=>T.destroy(O)),C.on("readable",()=>{T.readable=!0,T._fillBufferAsync()}),C.on("end",()=>{T.runningOperations.splice(T.runningOperations.indexOf(C),1),T.readable=!0,T._fillBufferAsync()})),T.setProperty("metadata",L.metadata)}let I=0,P;for(;I!==(I=_);)for(let B=0;B<T.runningOperations.length&&_>0;B++)(P=T.runningOperations[B].read())!==null&&(_--,T._push(P));T.runningOperations.length===0&&T.pendingOperations.length===0&&T.close()})().then(()=>{S()},I=>this.destroy(I))}}e.PathVariableObjectIterator=v},"../node_modules/@comunica/actor-abstract-path/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js"),e),d(n("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),e)},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocessSourceToDestination=void 0;const o=n("../node_modules/@comunica/bus-context-preprocess/lib/index.js"),d=n("../node_modules/@comunica/context-entries/lib/index.js");class h extends o.ActorContextPreprocess{constructor(u){super(u)}async test(u){return!0}async run(u){if(u.context.get(d.KeysRdfResolveQuadPattern.sources)&&!u.context.get(d.KeysRdfUpdateQuads.destination)){const p=u.context.get(d.KeysRdfResolveQuadPattern.sources);if(p.length===1)return{context:u.context.set(d.KeysRdfUpdateQuads.destination,p[0])}}return u}}e.ActorContextPreprocessSourceToDestination=h},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js"),e)},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindingsSha1=void 0;const o=n("../node_modules/@comunica/bus-hash-bindings/lib/index.js"),d=n("../node_modules/hash.js/lib/hash.js"),h=n("../node_modules/rdf-string/index.js"),l=n("../node_modules/canonicalize/lib/canonicalize.js");class u extends o.ActorHashBindings{async test(g){if(!g.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(g){return{hashFunction:v=>(0,d.sha1)().update(l(Object.fromEntries([...v].map(([b,_])=>[(0,h.termToString)(b),(0,h.termToString)(_)])))).digest("hex"),hashCollisions:!0}}}e.ActorHashBindingsSha1=u},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js"),e)},"../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQuery=void 0;const o=n("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js");typeof process>"u"&&(globalThis.process=n("./require-empty.js"));class d extends o.ActorInitQueryBase{}e.ActorInitQuery=d},"../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQueryBase=void 0;const o=n("../node_modules/@comunica/bus-init/lib/index.js");class d extends o.ActorInit{constructor(l){l.contextKeyShortcutsExtensions?.forEach(u=>{if(Object.keys(l.contextKeyShortcuts).some(p=>Object.keys(u).includes(p)))throw new Error("Duplicate keys found while adding `contextKeyShortcutsExtensions`.");l.contextKeyShortcuts={...l.contextKeyShortcuts,...u}}),super(l)}async test(l){return!0}async run(l){throw new Error("ActorInitSparql#run is not supported in the browser.")}}e.ActorInitQueryBase=d},"../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryPhysicalQueryPlanLogger=void 0;const o=n("../node_modules/rdf-string/index.js");class d{constructor(){this.children=new Map}logOperation(l,u,p,g,v,b){const _={actor:v,logicalOperator:l,physicalOperator:u,rawNode:p,children:[],metadata:b};if(this.children.set(p,_.children),this.rootNode){if(!g)throw new Error("Detected more than one parent-less node");const S=this.children.get(g);if(!S)throw new Error("Could not find parent node");S.push(_)}else{if(g)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=_}}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(l){return{logical:l.logicalOperator,physical:l.physicalOperator,...this.getLogicalMetadata(l.rawNode),...l.metadata,...l.children.length>0?{children:l.children.map(u=>this.planNodeToJson(u))}:{}}}getLogicalMetadata(l){if("type"in l){const u=l;switch(u.type){case"pattern":return{pattern:this.quadToString(u)};case"project":return{variables:u.variables.map(p=>p.value)}}}return{}}quadToString(l){return`${(0,o.termToString)(l.subject)} ${(0,o.termToString)(l.predicate)} ${(0,o.termToString)(l.object)}${l.graph.termType==="DefaultGraph"?"":` ${(0,o.termToString)(l.graph)}`}`}}e.MemoryPhysicalQueryPlanLogger=d},"../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/context-entries/lib/index.js"),h=n("../node_modules/@comunica/core/lib/index.js"),l=n("../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js");class u{constructor(g){this.actorInitQuery=g,this.defaultFunctionArgumentsCache={}}async queryBindings(g,v){return this.queryOfType(g,v,"bindings")}async queryQuads(g,v){return this.queryOfType(g,v,"quads")}async queryBoolean(g,v){return this.queryOfType(g,v,"boolean")}async queryVoid(g,v){return this.queryOfType(g,v,"void")}async queryOfType(g,v,b){const _=await this.query(g,v);if(_.resultType===b)return _.execute();throw new Error(`Query result type '${b}' was expected, while '${_.resultType}' was found.`)}async query(g,v){const b=await this.queryOrExplain(g,v);if("explain"in b)throw new Error("Tried to explain a query when in query-only mode");return b}async explain(g,v,b){return v.explain=b,await this.queryOrExplain(g,v)}async queryOrExplain(g,v){v=v||{};for(const O in v)this.actorInitQuery.contextKeyShortcuts[O]&&(v[this.actorInitQuery.contextKeyShortcuts[O]]=v[O],delete v[O]);let b=new h.ActionContext(v),_={language:"sparql",version:"1.1"};b.has(d.KeysInitQuery.queryFormat)&&(_=b.get(d.KeysInitQuery.queryFormat),b=b.delete(d.KeysInitQuery.queryFormat),_.language==="graphql"&&(b=b.setDefault(d.KeysInitQuery.graphqlSingularizeVariables,{})));const S=b.get(d.KeysInitQuery.baseIRI);b=b.setDefault(d.KeysInitQuery.queryTimestamp,new Date).setDefault(d.KeysRdfResolveQuadPattern.sourceIds,new Map).setDefault(d.KeysCore.log,this.actorInitQuery.logger).setDefault(d.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(d.KeysRdfResolveQuadPattern.hypermediaSourcesAggregatedStores,new Map),b=(await this.actorInitQuery.mediatorContextPreprocess.mediate({context:b})).context;const T=b.get(d.KeysInitQuery.explain);let I;if(typeof g=="string"){b=b.set(d.KeysInitQuery.queryString,g);const O=await this.actorInitQuery.mediatorQueryParse.mediate({context:b,query:g,queryFormat:_,baseIRI:S});I=O.operation,O.baseIRI&&(b=b.set(d.KeysInitQuery.baseIRI,O.baseIRI))}else I=g;if(T==="parsed")return{explain:!0,type:T,data:I};b.has(d.KeysInitQuery.initialBindings)&&(I=(0,o.materializeOperation)(I,b.get(d.KeysInitQuery.initialBindings)),b=b.delete(d.KeysInitQuery.queryString));const P=await this.actorInitQuery.mediatorOptimizeQueryOperation.mediate({context:b,operation:I});if(I=P.operation,b=P.context||b,T==="logical")return{explain:!0,type:T,data:I};b=b.set(d.KeysInitQuery.query,I);let B;T==="physical"&&(B=new l.MemoryPhysicalQueryPlanLogger,b=b.set(d.KeysInitQuery.physicalQueryPlanLogger,B));const L=await this.actorInitQuery.mediatorQueryOperation.mediate({context:b,operation:I});L.context=b;const C=u.internalToFinalResult(L);if(B){switch(C.resultType){case"bindings":await(await C.execute()).toArray();break;case"quads":await(await C.execute()).toArray();break;case"boolean":await C.execute();break;case"void":await C.execute();break}return{explain:!0,type:T,data:B.toJson()}}return C}async getResultMediaTypes(g){return g=h.ActionContext.ensureActionContext(g),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:g,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(g){return g=h.ActionContext.ensureActionContext(g),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:g,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(g,v,b){if(b=h.ActionContext.ensureActionContext(b),!v)switch(g.resultType){case"bindings":v="application/json";break;case"quads":v="application/trig";break;default:v="simple";break}const _={...await u.finalToInternalResult(g),context:b};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:b,handle:_,handleMediaType:v})).handle}invalidateHttpCache(g,v){return v=h.ActionContext.ensureActionContext(v),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:g,context:v})}static internalToFinalResult(g){switch(g.type){case"bindings":return{resultType:"bindings",execute:async()=>g.bindingsStream,metadata:async()=>await g.metadata(),context:g.context};case"quads":return{resultType:"quads",execute:async()=>g.quadStream,metadata:async()=>await g.metadata(),context:g.context};case"boolean":return{resultType:"boolean",execute:async()=>g.execute(),context:g.context};case"void":return{resultType:"void",execute:async()=>g.execute(),context:g.context}}}static async finalToInternalResult(g){switch(g.resultType){case"bindings":return{type:"bindings",bindingsStream:await g.execute(),metadata:async()=>await g.metadata()};case"quads":return{type:"quads",quadStream:await g.execute(),metadata:async()=>await g.metadata()};case"boolean":return{type:"boolean",execute:()=>g.execute()};case"void":return{type:"void",execute:()=>g.execute()}}}}e.QueryEngineBase=u},"../node_modules/@comunica/actor-init-query/lib/index-browser.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(l,u,p,g){g===void 0&&(g=p);var v=Object.getOwnPropertyDescriptor(u,p);(!v||("get"in v?!u.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return u[p]}}),Object.defineProperty(l,g,v)}:function(l,u,p,g){g===void 0&&(g=p),l[g]=u[p]}),d=this&&this.__exportStar||function(l,u){for(var p in l)p!=="default"&&!Object.prototype.hasOwnProperty.call(u,p)&&o(u,l,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0,d(n("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js"),e),d(n("../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js"),e);var h=n("../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js");Object.defineProperty(e,"QueryEngineBase",{enumerable:!0,get:function(){return h.QueryEngineBase}})},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationBgpToJoin=void 0;const o=n("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorOptimizeQueryOperation{async test(u){return!0}async run(u){return{operation:d.Util.mapOperation(u.operation,{bgp(g,v){return{recurse:!1,result:v.createJoin(g.patterns)}}}),context:u.context}}}e.ActorOptimizeQueryOperationBgpToJoin=h},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinBgp=void 0;const o=n("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorOptimizeQueryOperation{async test(u){return!0}async run(u){return{operation:d.Util.mapOperation(u.operation,{join(g,v){return g.input.every(b=>b.type==="bgp")?{recurse:!1,result:v.createBgp(g.input.flatMap(b=>b.patterns))}:{recurse:!1,result:g}}}),context:u.context}}}e.ActorOptimizeQueryOperationJoinBgp=h},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinConnected=void 0;const o=n("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorOptimizeQueryOperation{async test(u){return!0}async run(u){return{operation:d.Util.mapOperation(u.operation,{join(g,v){return{recurse:!1,result:h.cluster(g,v)}}}),context:u.context}}static cluster(u,p){const g=u.input.map(S=>({inScopeVariables:Object.fromEntries(d.Util.inScopeVariables(S).map(T=>[T.value,!0])),entries:[S]}));let v,b=g;do v=b,b=h.clusterIteration(v);while(v.length!==b.length);const _=b.map(S=>p.createJoin(S.entries));return _.length===1?_[0]:p.createJoin(_,!1)}static clusterIteration(u){const p=[];for(const g of u){let v=!1;for(const b of p)if(h.haveOverlappingVariables(g.inScopeVariables,b.inScopeVariables)){b.entries=[...b.entries,...g.entries],b.inScopeVariables={...b.inScopeVariables,...g.inScopeVariables},v=!0;break}v||p.push({inScopeVariables:g.inScopeVariables,entries:g.entries})}return p}static haveOverlappingVariables(u,p){for(const g of Object.keys(u))if(p[g])return!0;return!1}}e.ActorOptimizeQueryOperationJoinConnected=h},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js"),e)},"../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAsk=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(l){super(l,"ask")}async testOperation(l,u){return!0}async runOperation(l,u){const p=await this.mediatorQueryOperation.mediate({operation:l.input,context:u}),{bindingsStream:g}=o.ActorQueryOperation.getSafeBindings(p);return{type:"boolean",execute:async()=>(await g.take(1).toArray()).length===1}}}e.ActorQueryOperationAsk=d},"../node_modules/@comunica/actor-query-operation-ask/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js"),e)},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationBgpJoin=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"bgp")}async testOperation(u,p){return!0}async runOperation(u,p){return this.mediatorQueryOperation.mediate({operation:h.FACTORY.createJoin(u.patterns),context:p})}}e.ActorQueryOperationBgpJoin=h,h.FACTORY=new d.Factory},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationConstruct=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/context-entries/lib/index.js"),h=n("../node_modules/rdf-terms/index.js"),l=n("sparqlalgebrajs"),u=n("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js");class p extends o.ActorQueryOperationTypedMediated{constructor(v){super(v,"construct")}static getVariables(v){return(0,h.uniqTerms)([].concat.apply([],v.map(b=>(0,h.getVariables)((0,h.getTerms)(b)))))}async testOperation(v,b){return!0}async runOperation(v,b){const _=p.getVariables(v.template),S={type:l.Algebra.types.PROJECT,input:v.input,variables:_},T=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:S,context:b})),I=b.get(d.KeysQueryOperation.localizeBlankNodes),P=I!==void 0?I:!0,B=new u.BindingsToQuadsIterator(v.template,T.bindingsStream,P);return{metadata:()=>T.metadata().then(C=>({...C,order:void 0,cardinality:{type:C.cardinality.type,value:C.cardinality.value*v.template.length},canContainUndefs:!1,availableOrders:void 0})),quadStream:B,type:"quads"}}}e.ActorQueryOperationConstruct=p},"../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsToQuadsIterator=void 0;const o=n("asynciterator"),d=n("../node_modules/rdf-data-factory/index.js"),h=n("../node_modules/rdf-terms/index.js"),l=new d.DataFactory;class u extends o.MultiTransformIterator{constructor(g,v,b=!0){super(v,{autoStart:!1}),this.template=g,this.localizeBlankNodes=b,this.blankNodeCounter=0}static bindTerm(g,v){return v.termType==="Variable"?g.get(v):v}static bindQuad(g,v){try{return(0,h.mapTerms)(v,b=>{const _=u.bindTerm(g,b);if(!_)throw new Error("Unbound term");return _})}catch{}}static localizeBlankNode(g,v){return v.termType==="BlankNode"?l.blankNode(`${v.value}${g}`):v}static localizeQuad(g,v){return(0,h.mapTerms)(v,b=>u.localizeBlankNode(g,b))}bindTemplate(g,v,b){let _=v.map(S=>u.bindQuad.bind(null,g)(S)).filter(Boolean);return this.localizeBlankNodes&&(_=_.map(u.localizeQuad.bind(null,b))),_}_createTransformer(g){return new o.ArrayIterator(this.bindTemplate(g,this.template,this.blankNodeCounter++))}}e.BindingsToQuadsIterator=u},"../node_modules/@comunica/actor-query-operation-construct/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js"),e),d(n("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js"),e)},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDescribeSubject=void 0;const o=n("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("../node_modules/@comunica/context-entries/lib/index.js"),l=n("asynciterator"),u=n("../node_modules/rdf-data-factory/index.js"),p=n("sparqlalgebrajs"),g=new u.DataFactory;class v extends d.ActorQueryOperationTypedMediated{constructor(_){super(_,"describe")}async testOperation(_,S){return!0}async runOperation(_,S){const T=_.terms.filter(C=>C.termType!=="Variable").map(C=>{const O=[g.quad(C,g.variable("__predicate"),g.variable("__object"))];return O.forEach(M=>M.type="pattern"),{input:{type:p.Algebra.types.BGP,patterns:O},template:O,type:"construct"}});if(T.length!==_.terms.length){let C=[];_.terms.filter(O=>O.termType==="Variable").forEach((O,N)=>{const M=[g.quad(O,g.variable(`__predicate${N}`),g.variable(`__object${N}`))];M.forEach(k=>k.type="pattern"),C=[...C,...M]}),T.push({input:{type:p.Algebra.types.JOIN,input:[_.input,{type:p.Algebra.types.BGP,patterns:C}]},template:C,type:p.Algebra.types.CONSTRUCT})}const I=S.get(h.KeysQueryOperation.localizeBlankNodes);S=S.set(h.KeysQueryOperation.localizeBlankNodes,I!==void 0?I:!1);const P=(await Promise.all(T.map(C=>this.mediatorQueryOperation.mediate({operation:C,context:S})))).map(d.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new l.UnionIterator(P.map(C=>C.quadStream),{autoStart:!1}),metadata:()=>Promise.all(P.map(C=>C.metadata())).then(C=>o.ActorQueryOperationUnion.unionMetadata(C,!1))}}}e.ActorQueryOperationDescribeSubject=v},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js"),e)},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDistinctHash=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(l){super(l,"distinct")}async testOperation(l,u){return!0}async runOperation(l,u){const p=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:l.input,context:u}));return{type:"bindings",bindingsStream:p.bindingsStream.filter(await this.newHashFilter(u)),metadata:p.metadata}}async newHashFilter(l){const{hashFunction:u}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:l}),p={};return g=>{const v=u(g);return!(v in p)&&(p[v]=!0)}}}e.ActorQueryOperationDistinctHash=d},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js"),e)},"../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationExtend=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("../node_modules/sparqlee/dist/index.js");class l extends d.ActorQueryOperationTypedMediated{constructor(p){super(p,"extend")}async testOperation(p,g){return new h.AsyncEvaluator(p.expression,d.ActorQueryOperation.getAsyncExpressionContext(g,this.mediatorQueryOperation)),!0}async runOperation(p,g){const{expression:v,input:b,variable:_}=p,S=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:b,context:g})),T={...d.ActorQueryOperation.getAsyncExpressionContext(g,this.mediatorQueryOperation)},I=new h.AsyncEvaluator(v,T),P=async(L,C,O)=>{try{const N=await I.evaluate(L),M=L.set(_,N);O(M)}catch(N){(0,h.isExpressionError)(N)?(O(L),this.logWarn(g,`Expression error for extend operation with bindings '${(0,o.bindingsToString)(L)}'`)):B.emit("error",N)}C()},B=S.bindingsStream.transform({autoStart:!1,transform:P});return{type:"bindings",bindingsStream:B,async metadata(){const L=await S.metadata();return{...L,variables:[...L.variables,_]}}}}}e.ActorQueryOperationExtend=l},"../node_modules/@comunica/actor-query-operation-extend/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js"),e)},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFilterSparqlee=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("../node_modules/sparqlee/dist/index.js");class l extends d.ActorQueryOperationTypedMediated{constructor(p){super(p,"filter")}async testOperation(p,g){const v={...d.ActorQueryOperation.getAsyncExpressionContext(g,this.mediatorQueryOperation)};return new h.AsyncEvaluator(p.expression,v),!0}async runOperation(p,g){const v=await this.mediatorQueryOperation.mediate({operation:p.input,context:g}),b=d.ActorQueryOperation.getSafeBindings(v);d.ActorQueryOperation.validateQueryOutput(b,"bindings");const _={...d.ActorQueryOperation.getAsyncExpressionContext(g,this.mediatorQueryOperation)},S=new h.AsyncEvaluator(p.expression,_),T=async(P,B,L)=>{try{await S.evaluateAsEBV(P)&&L(P)}catch(C){(0,h.isExpressionError)(C)?this.logWarn(g,"Error occurred while filtering.",()=>({error:C,bindings:(0,o.bindingsToString)(P)})):I.emit("error",C)}B()},I=b.bindingsStream.transform({transform:T});return{type:"bindings",bindingsStream:I,metadata:b.metadata}}}e.ActorQueryOperationFilterSparqlee=l},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFromQuad=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"from")}static copyOperation(u,p){const g={};for(const v of Object.keys(u))Array.isArray(u[v])&&v!=="template"?v==="variables"?g[v]=u[v]:g[v]=u[v].map(p):h.ALGEBRA_TYPES.includes(u[v].type)?g[v]=p(u[v]):g[v]=u[v];return g}static applyOperationDefaultGraph(u,p){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){if(u.type==="bgp")return h.joinOperations(u.patterns.map(v=>{if(v.graph.termType!=="DefaultGraph")return h.FACTORY.createBgp([v]);const b=p.map(_=>h.FACTORY.createBgp([h.FACTORY.createPattern(v.subject,v.predicate,v.object,_)]));return h.unionOperations(b)}));if(u.graph.termType!=="DefaultGraph")return u;const g=p.map(v=>u.type==="path"?h.FACTORY.createPath(u.subject,u.predicate,u.object,v):h.FACTORY.createPattern(u.subject,u.predicate,u.object,v));return h.unionOperations(g)}return h.copyOperation(u,g=>this.applyOperationDefaultGraph(g,p))}static applyOperationNamedGraph(u,p,g){if(u.type==="bgp"&&u.patterns.length>0||u.type==="path"||u.type==="pattern"){const v=u.type==="bgp"?u.patterns[0].graph:u.graph;if(v.termType==="DefaultGraph")return{type:d.Algebra.types.BGP,patterns:[]};if(v.termType==="Variable"){if(p.length===1){const _=p[0],S={};S[`?${v.value}`]=_;const T=h.FACTORY.createValues([v],[S]);let I;return u.type==="bgp"?I=h.FACTORY.createBgp(u.patterns.map(P=>h.FACTORY.createPattern(P.subject,P.predicate,P.object,_))):u.type==="path"?I=h.FACTORY.createPath(u.subject,u.predicate,u.object,_):I=h.FACTORY.createPattern(u.subject,u.predicate,u.object,_),h.FACTORY.createJoin([T,I])}return h.unionOperations(p.map(_=>h.applyOperationNamedGraph(u,[_],g)))}return[...p,...g].some(_=>_.equals(v))?u:{type:d.Algebra.types.BGP,patterns:[]}}return h.copyOperation(u,v=>this.applyOperationNamedGraph(v,p,g))}static joinOperations(u){if(u.length===1)return u[0];if(u.length>1)return h.FACTORY.createJoin(u);throw new Error("A join can only be applied on at least one operation")}static unionOperations(u){if(u.length===1)return u[0];if(u.length>1)return h.FACTORY.createUnion(u);throw new Error("A union can only be applied on at least one operation")}static createOperation(u){let p=u.input;return u.default.length>0&&(p=h.applyOperationDefaultGraph(p,u.default)),(u.named.length>0||u.default.length>0)&&(p=h.applyOperationNamedGraph(p,u.named,u.default)),p}async testOperation(u,p){return!0}async runOperation(u,p){const g=h.createOperation(u);return this.mediatorQueryOperation.mediate({operation:g,context:p})}}e.ActorQueryOperationFromQuad=h,h.FACTORY=new d.Factory,h.ALGEBRA_TYPES=Object.keys(d.Algebra.types).map(l=>d.Algebra.types[l])},"../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js"),e)},"../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationGroup=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("asynciterator"),h=n("../node_modules/sparqlee/dist/index.js"),l=n("../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js");class u extends o.ActorQueryOperationTypedMediated{constructor(g){super(g,"group")}async testOperation(g,v){for(const b of g.aggregates)new h.AsyncEvaluator(b.expression,o.ActorQueryOperation.getAsyncExpressionContext(v));return!0}async runOperation(g,v){const{hashFunction:b}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:v}),{input:_,aggregates:S}=g,T=await this.mediatorQueryOperation.mediate({operation:_,context:v}),I=o.ActorQueryOperation.getSafeBindings(T),P=[...g.variables,...S.map(C=>C.variable)],B=o.ActorQueryOperation.getAsyncExpressionContext(v);return{type:"bindings",bindingsStream:new d.TransformIterator(()=>new Promise((C,O)=>{const N=new l.GroupsState(b,g,B);I.bindingsStream.on("end",async()=>{try{const M=new d.ArrayIterator(await N.collectResults(),{autoStart:!1});C(M)}catch(M){O(M)}}),I.bindingsStream.on("error",O),I.bindingsStream.on("data",M=>{N.consumeBindings(M).catch(O)})}),{autoStart:!1}),metadata:async()=>({...await I.metadata(),variables:P})}}}e.ActorQueryOperationGroup=u},"../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupsState=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/rdf-data-factory/index.js"),h=n("../node_modules/sparqlee/dist/index.js"),l=new d.DataFactory,u=new o.BindingsFactory;class p{constructor(v,b,_){this.hashFunction=v,this.pattern=b,this.sparqleeConfig=_,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(S=>S.value)),this.distinctHashes=b.aggregates.some(({distinct:S})=>S)?new Map:null,this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(v){const b=this.resultCheck();if(b)return b;this.waitCounter++;const _=v.filter((P,B)=>this.groupVariables.has(B.value)),S=this.hashBindings(_);let T=this.groupsInitializer.get(S),I;if(!T)T=(async()=>{const P={};if(await Promise.all(this.pattern.aggregates.map(async L=>{const C=L.variable.value;P[C]=new h.AsyncAggregateEvaluator(L,this.sparqleeConfig),await P[C].put(v)})),this.distinctHashes){const L=this.hashBindings(v);this.distinctHashes.set(S,new Set([L]))}const B={aggregators:P,bindings:_};return this.groups.set(S,B),this.subtractWaitCounterAndCollect(),B})(),this.groupsInitializer.set(S,T),I=T;else{const P=T;I=(async()=>{const B=await P;await Promise.all(this.pattern.aggregates.map(async L=>{if(L.distinct){const O=this.hashBindings(v);if(this.distinctHashes.get(S).has(O))return;this.distinctHashes.get(S).add(O)}const C=L.variable.value;await B.aggregators[C].put(v)}))})().then(()=>{this.subtractWaitCounterAndCollect()})}return I}subtractWaitCounterAndCollect(){--this.waitCounter===0&&this.handleResultCollection()}handleResultCollection(){let v=[...this.groups].map(([b,_])=>{const{bindings:S,aggregators:T}=_;let I=S;for(const P in T){const B=T[P].result();B&&(I=I.set(l.variable(P),B))}return I});if(v.length===0&&this.groupVariables.size===0){const b=[];for(const _ of this.pattern.aggregates){const S=_.variable,T=h.AsyncAggregateEvaluator.emptyValue(_);T!==void 0&&b.push([S,T])}v=[u.bindings(b)]}this.waitResolver(v)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const v=this.resultCheck();if(v)return v;this.resultHasBeenCalled=!0;const b=new Promise(_=>{this.waitResolver=_});return this.subtractWaitCounterAndCollect(),b}hashBindings(v){return this.hashFunction(v)}}e.GroupsState=p},"../node_modules/@comunica/actor-query-operation-group/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js"),e)},"../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationJoin=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(l){super(l,"join")}async testOperation(l,u){return!0}async runOperation(l,u){const p=(await Promise.all(l.input.map(async g=>({output:await this.mediatorQueryOperation.mediate({operation:g,context:u}),operation:g})))).map(({output:g,operation:v})=>({output:o.ActorQueryOperation.getSafeBindings(g),operation:v}));return this.mediatorJoin.mediate({type:"inner",entries:p,context:u})}}e.ActorQueryOperationJoin=d},"../node_modules/@comunica/actor-query-operation-join/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLeftJoin=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/sparqlee/dist/index.js");class h extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"leftjoin")}async testOperation(u,p){return!0}async runOperation(u,p){const g=(await Promise.all(u.input.map(async b=>({output:await this.mediatorQueryOperation.mediate({operation:b,context:p}),operation:b})))).map(({output:b,operation:_})=>({output:o.ActorQueryOperation.getSafeBindings(b),operation:_})),v=await this.mediatorJoin.mediate({type:"optional",entries:g,context:p});if(u.expression){const _=(await g[1].output.metadata()).variables,S={...o.ActorQueryOperation.getAsyncExpressionContext(p)},T=new d.AsyncEvaluator(u.expression,S),I=v.bindingsStream.transform({autoStart:!1,transform:async(P,B,L)=>{if(!_.every(C=>P.has(C.value)))return L(P),B();try{await T.evaluateAsEBV(P)&&L(P)}catch(C){(0,d.isExpressionError)(C)?this.logWarn(p,"Error occurred while filtering.",()=>({error:C,bindings:P})):I.emit("error",C)}B()}});v.bindingsStream=I}return v}}e.ActorQueryOperationLeftJoin=h},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMinus=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(l){super(l,"minus")}async testOperation(l,u){return!0}async runOperation(l,u){const p=(await Promise.all(l.input.map(async g=>({output:await this.mediatorQueryOperation.mediate({operation:g,context:u}),operation:g})))).map(({output:g,operation:v})=>({output:o.ActorQueryOperation.getSafeBindings(g),operation:v}));return this.mediatorJoin.mediate({type:"minus",entries:p,context:u})}}e.ActorQueryOperationMinus=d},"../node_modules/@comunica/actor-query-operation-minus/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js"),e)},"../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationNop=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("asynciterator"),l=new o.BindingsFactory;class u extends d.ActorQueryOperationTypedMediated{constructor(g){super(g,"nop")}async testOperation(g,v){return!0}async runOperation(g,v){return{bindingsStream:new h.SingletonIterator(l.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}e.ActorQueryOperationNop=u},"../node_modules/@comunica/actor-query-operation-nop/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js"),e)},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationOrderBySparqlee=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("sparqlalgebrajs"),h=n("../node_modules/sparqlee/dist/index.js"),l=n("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js");class u extends o.ActorQueryOperationTypedMediated{constructor(g){super(g,"orderby"),this.window=g.window??Number.POSITIVE_INFINITY}async testOperation(g,v){for(let b of g.expressions)b=this.extractSortExpression(b),new h.AsyncEvaluator(b,o.ActorQueryOperation.getAsyncExpressionContext(v));return!0}async runOperation(g,v){const b=await this.mediatorQueryOperation.mediate({operation:g.input,context:v}),_=o.ActorQueryOperation.getSafeBindings(b),S={window:this.window},T={...o.ActorQueryOperation.getAsyncExpressionContext(v)};let{bindingsStream:I}=_;for(let P=g.expressions.length-1;P>=0;P--){let B=g.expressions[P];const L=this.isAscending(B);B=this.extractSortExpression(B);const C=new h.AsyncEvaluator(B,T),O=async(k,W,ae)=>{try{const X=await C.evaluate(k);ae({bindings:k,result:X})}catch(X){(0,h.isExpressionError)(X)||I.emit("error",X),ae({bindings:k,result:void 0})}W()},N=I.transform({transform:O});I=new l.SortIterator(N,(k,W)=>(0,h.orderTypes)(k.result,W.result,L),S).map(({bindings:k,result:W})=>k)}return{type:"bindings",bindingsStream:I,metadata:_.metadata}}extractSortExpression(g){const{expressionType:v,operator:b}=g;return v!==d.Algebra.expressionTypes.OPERATOR?g:b==="desc"?g.args[0]:g}isAscending(g){const{expressionType:v,operator:b}=g;return v!==d.Algebra.expressionTypes.OPERATOR?!0:b!=="desc"}}e.ActorQueryOperationOrderBySparqlee=u},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortIterator=void 0;const o=n("asynciterator");class d extends o.TransformIterator{constructor(l,u,p){super(l,p);const g=p&&p.window;this.windowLength=Number.isFinite(g)&&g>0?g:Number.POSITIVE_INFINITY,this.sort=u,this.sorted=[]}_read(l,u){let p,{length:g}=this.sorted;for(;g!==this.windowLength&&(p=this.source.read(),p!==null);){let v=0,b=g-1,_,S;for(;v<=b;)_=Math.trunc((v+b)/2),S=this.sort(p,this.sorted[_]),S<0?v=_+1:S>0?b=_-1:(v=_,b=-1);this.sorted.splice(v,0,p),g++}g===this.windowLength&&this._push(this.sorted.pop()),u()}_flush(l){let{length:u}=this.sorted;for(;u--;)this._push(this.sorted.pop());l()}}e.SortIterator=d},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathAlt=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),h=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=n("asynciterator"),u=n("sparqlalgebrajs");class p extends o.ActorAbstractPath{constructor(v){super(v,u.Algebra.types.ALT)}async runOperation(v,b){const _=v.predicate,S=(await Promise.all(_.input.map(P=>this.mediatorQueryOperation.mediate({context:b,operation:o.ActorAbstractPath.FACTORY.createPath(v.subject,P,v.object,v.graph)})))).map(h.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new l.UnionIterator(S.map(P=>P.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(S.map(P=>P.metadata())).then(P=>d.ActorQueryOperationUnion.unionMetadata(P,!0))}}}e.ActorQueryOperationPathAlt=p},"../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js"),e)},"../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathInv=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorAbstractPath{constructor(u){super(u,d.Algebra.types.INV)}async runOperation(u,p){const g=u.predicate,v=o.ActorAbstractPath.FACTORY.createPath(u.object,g.path,u.subject,u.graph);return this.mediatorQueryOperation.mediate({operation:v,context:p})}}e.ActorQueryOperationPathInv=h},"../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js"),e)},"../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathLink=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorAbstractPath{constructor(u){super(u,d.Algebra.types.LINK)}async runOperation(u,p){const g=u.predicate,v=o.ActorAbstractPath.FACTORY.createPattern(u.subject,g.iri,u.object,u.graph);return this.mediatorQueryOperation.mediate({operation:v,context:p})}}e.ActorQueryOperationPathLink=h},"../node_modules/@comunica/actor-query-operation-path-link/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js"),e)},"../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathNps=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("sparqlalgebrajs");class l extends o.ActorAbstractPath{constructor(p){super(p,h.Algebra.types.NPS)}async runOperation(p,g){const v=p.predicate,b=this.generateVariable(p),_=o.ActorAbstractPath.FACTORY.createPattern(p.subject,b,p.object,p.graph),S=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:_,context:g}));return{type:"bindings",bindingsStream:S.bindingsStream.transform({filter(I){return!v.iris.some(P=>P.equals(I.get(b)))},transform(I,P,B){B(I.delete(b)),P()}}),metadata:S.metadata}}}e.ActorQueryOperationPathNps=l},"../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js"),e)},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathOneOrMore=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("../node_modules/@comunica/bindings-factory/lib/index.js"),h=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=n("asynciterator"),u=n("sparqlalgebrajs"),p=new d.BindingsFactory;class g extends o.ActorAbstractPath{constructor(b){super(b,u.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(b,_){const S=await this.isPathArbitraryLengthDistinct(_,b);if(S.operation)return S.operation;_=S.context;const T=b.predicate;if(b.subject.termType!=="Variable"&&b.object.termType==="Variable"){const L=b.object,C=await this.getObjectsPredicateStarEval(b.subject,T.path,L,b.graph,_,!1),O=b.graph.termType==="Variable"?[L,b.graph]:[L];return{type:"bindings",bindingsStream:C.bindingsStream,metadata:async()=>({...await C.metadata(),variables:O})}}if(b.subject.termType==="Variable"&&b.object.termType==="Variable"){const L=o.ActorAbstractPath.FACTORY.createDistinct(o.ActorAbstractPath.FACTORY.createPath(b.subject,b.predicate.path,b.object,b.graph)),C=h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:_,operation:L})),O=b.subject,N=b.object,M={},k=new l.MultiTransformIterator(C.bindingsStream,{multiTransform:ae=>{const X=ae.get(O),G=ae.get(N),re=b.graph.termType==="Variable"?ae.get(b.graph):b.graph;return new l.TransformIterator(async()=>{const F=new l.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(O,N,X,G,T.path,re,_,M,{},F,{count:0}),F.transform({transform($,U,H){b.graph.termType==="Variable"&&($=$.set(b.graph,re)),H($),U()}})},{maxBufferSize:128})},autoStart:!1}),W=b.graph.termType==="Variable"?[O,N,b.graph]:[O,N];return{type:"bindings",bindingsStream:k,metadata:async()=>({...await C.metadata(),variables:W})}}if(b.subject.termType==="Variable"&&b.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:_,operation:o.ActorAbstractPath.FACTORY.createPath(b.object,o.ActorAbstractPath.FACTORY.createOneOrMorePath(o.ActorAbstractPath.FACTORY.createInv(T.path)),b.subject,b.graph)});const I=this.generateVariable(),P=h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:_,operation:o.ActorAbstractPath.FACTORY.createPath(b.subject,T,I,b.graph)}));return{type:"bindings",bindingsStream:P.bindingsStream.transform({filter:L=>b.object.equals(L.get(I)),transform(L,C,O){const N=b.graph.termType==="Variable"?p.bindings([[b.graph,L.get(b.graph)]]):p.bindings();O(N),C()}}),metadata:async()=>({...await P.metadata(),variables:b.graph.termType==="Variable"?[b.graph]:[]})}}}e.ActorQueryOperationPathOneOrMore=g},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathSeq=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("sparqlalgebrajs");class l extends o.ActorAbstractPath{constructor(p){super(p,h.Algebra.types.SEQ)}async runOperation(p,g){const v=p.predicate;let b=p.subject;const _=[],S=await Promise.all(v.input.map((P,B)=>{const L=B===v.input.length-1?p.object:this.generateVariable(p,`b${B}`),C=o.ActorAbstractPath.FACTORY.createPath(b,P,L,p.graph),O=this.mediatorQueryOperation.mediate({context:g,operation:C});return b=L,B<v.input.length-1&&_.push(L),{output:O,operation:C}}).map(async({output:P,operation:B})=>({output:d.ActorQueryOperation.getSafeBindings(await P),operation:B}))),T=d.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:S,context:g}));return{type:"bindings",bindingsStream:T.bindingsStream.transform({transform(P,B,L){for(const C of _)P=P.delete(C);L(P),B()}}),async metadata(){const P=await T.metadata(),B=P.variables.filter(L=>!_.some(C=>C.value===L.value));return{...P,variables:B}}}}}e.ActorQueryOperationPathSeq=l},"../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrMore=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("../node_modules/@comunica/bindings-factory/lib/index.js"),h=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=n("asynciterator"),u=n("../node_modules/rdf-string/index.js"),p=n("sparqlalgebrajs"),g=new d.BindingsFactory;class v extends o.ActorAbstractPath{constructor(_){super(_,p.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(_,S){const T=await this.isPathArbitraryLengthDistinct(S,_);if(T.operation)return T.operation;S=T.context;const I=_.predicate,P=_.subject.termType==="Variable",B=_.object.termType==="Variable";if(_.subject.termType==="Variable"&&_.object.termType==="Variable"){const k=this.generateVariable(_),W=o.ActorAbstractPath.FACTORY.createPattern(_.subject,k,_.object,_.graph),ae=h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:S,operation:W})),X=_.subject,G=_.object,re=new Set,F={},$=new l.MultiTransformIterator(ae.bindingsStream,{multiTransform:H=>{const ee=H.get(X),ge=H.get(G),me=_.graph.termType==="Variable"?H.get(_.graph):_.graph,fe=(0,u.termToString)(ee)+(0,u.termToString)(me),he=(0,u.termToString)(ge)+(0,u.termToString)(me);return new l.TransformIterator(async()=>{if(re.has(fe)&&re.has(he))return new l.EmptyIterator;const _e=new l.BufferedIterator,xe={count:0};return re.has(fe)||(re.add(fe),await this.getSubjectAndObjectBindingsPredicateStar(X,G,ee,ee,I.path,me,S,F,{},_e,xe)),re.has(he)||(re.add(he),await this.getSubjectAndObjectBindingsPredicateStar(X,G,ge,ge,I.path,me,S,F,{},_e,xe)),_e.transform({transform(Ne,Ie,Pe){_.graph.termType==="Variable"&&(Ne=Ne.set(_.graph,me)),Pe(Ne),Ie()}})})}}),U=_.graph.termType==="Variable"?[X,_.object,_.graph]:[X,_.object];return{type:"bindings",bindingsStream:$,metadata:async()=>({...await ae.metadata(),variables:U})}}if(!P&&!B){const k=this.generateVariable(),W=await this.getObjectsPredicateStarEval(_.subject,I.path,k,_.graph,S,!0);return{type:"bindings",bindingsStream:W.bindingsStream.transform({filter:X=>_.object.equals(X.get(k)),transform(X,G,re){const F=_.graph.termType==="Variable"?g.bindings([[_.graph,X.get(_.graph)]]):g.bindings();re(F),G()}}),metadata:async()=>({...await W.metadata(),variables:_.graph.termType==="Variable"?[_.graph]:[]})}}const L=P?_.object:_.subject,C=P?_.subject:_.object,O=P?o.ActorAbstractPath.FACTORY.createInv(I.path):I.path,N=await this.getObjectsPredicateStarEval(L,O,C,_.graph,S,!0),M=_.graph.termType==="Variable"?[C,_.graph]:[C];return{type:"bindings",bindingsStream:N.bindingsStream,metadata:async()=>({...await N.metadata(),variables:M})}}}e.ActorQueryOperationPathZeroOrMore=v},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrOne=void 0;const o=n("../node_modules/@comunica/actor-abstract-path/lib/index.js"),d=n("../node_modules/@comunica/bindings-factory/lib/index.js"),h=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=n("asynciterator"),u=n("sparqlalgebrajs"),p=new d.BindingsFactory;class g extends o.ActorAbstractPath{constructor(b){super(b,u.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(b,_){const S=b.predicate,T=b.subject.termType==="Variable",I=b.object.termType==="Variable",P=[];if(!T&&!I&&b.subject.equals(b.object))return{type:"bindings",bindingsStream:new l.SingletonIterator(p.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};if(T&&I)throw new Error("ZeroOrOne path expressions with 2 variables not supported yet");const B=await this.isPathArbitraryLengthDistinct(_,b);if(B.operation)return B.operation;_=B.context,b.subject.termType==="Variable"&&P.push(p.bindings([[b.subject,b.object]])),b.object.termType==="Variable"&&P.push(p.bindings([[b.object,b.subject]]));const L=h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:_,operation:o.ActorAbstractPath.FACTORY.createPath(b.subject,S.path,b.object,b.graph)}));return{type:"bindings",bindingsStream:L.bindingsStream.prepend(P),metadata:L.metadata}}}e.ActorQueryOperationPathZeroOrOne=g},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js"),e)},"../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationProject=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/data-factory/lib/index.js"),h=n("../node_modules/rdf-data-factory/index.js"),l=new h.DataFactory;class u extends o.ActorQueryOperationTypedMediated{constructor(g){super(g,"project")}async testOperation(g,v){return!0}async runOperation(g,v){const b=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:g.input,context:v})),_=await b.metadata(),S=g.variables,T=_.variables.filter(L=>!S.some(C=>L.value===C.value)),I=S.filter(L=>!_.variables.some(C=>L.value===C.value));if(I.length>0)throw new Error(`Variables '${I.map(L=>`?${L.value}`)}' are used in the projection result, but are not assigned.`);let P=T.length===0?b.bindingsStream:b.bindingsStream.transform({map(L){for(const C of T)L=L.delete(C);return L},autoStart:!1}),B=0;return P=P.transform({map(L){B++;const C=new Map;return L.map(O=>{if(O instanceof d.BlankNodeBindingsScoped){let N=C.get(O.value);return N||(N=l.blankNode(`${O.value}${B}`),C.set(O.value,N)),N}return O})},autoStart:!1}),{type:"bindings",bindingsStream:P,metadata:async()=>({..._,variables:S})}}}e.ActorQueryOperationProject=u},"../node_modules/@comunica/actor-query-operation-project/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js"),e)},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationQuadpattern=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("../node_modules/@comunica/context-entries/lib/index.js"),l=n("../node_modules/rdf-data-factory/index.js"),u=n("../node_modules/rdf-terms/index.js"),p=n("sparqlalgebrajs"),g=new o.BindingsFactory,v=new l.DataFactory,b=new p.Factory;class _ extends d.ActorQueryOperationTyped{constructor(T){super(T,"pattern")}static isTermVariable(T){return T.termType==="Variable"}static getVariables(T){return(0,u.uniqTerms)((0,u.getTerms)(T).filter(_.isTermVariable))}static getDuplicateElementLinks(T){const I={};let P=!1;for(const L of u.QUAD_TERM_NAMES)if(T[L].termType==="Variable"){const C=T[L].value,O=(I[C]||(I[C]=[])).push(L);P=P||O>1}if(!P)return;const B={};for(const L in I){const C=I[L],O=C.slice(1);O.length>0&&(B[C[0]]=O)}return B}static validateMetadata(T){for(const I of["cardinality","canContainUndefs"])if(!(I in T))throw new Error(`Invalid metadata: missing ${I} in ${JSON.stringify(T)}`);return T}static getMetadata(T,I,P){return()=>new Promise((B,L)=>{T.getProperty("metadata",C=>B(C)),T.on("error",L)}).then(B=>("canContainUndefs"in B||(B.canContainUndefs=!1),_.quadsMetadataToBindingsMetadata(_.validateMetadata(B),I,P)))}static quadsMetadataToBindingsMetadata(T,I,P){return{...T,order:T.order?_.quadsOrderToBindingsOrder(T.order,I):void 0,availableOrders:T.availableOrders?T.availableOrders.map(B=>({cost:B.cost,terms:_.quadsOrderToBindingsOrder(B.terms,I)})):void 0,variables:P}}static quadsOrderToBindingsOrder(T,I){const P={};return T.map(B=>{const L=I[B.term];if(L&&!P[L])return P[L]=!0,{term:v.variable(L),direction:B.direction}}).filter(B=>!!B)}async testOperation(T,I){return!0}async runOperation(T,I){T.context&&(I=I.merge(T.context));let P=T;const B=this.unionDefaultGraph||I.get(h.KeysQueryOperation.unionDefaultGraph);T.graph.termType==="DefaultGraph"&&B&&(P=b.createPattern(T.subject,T.predicate,T.object,v.variable("__comunica:defaultGraph")));const L=await this.mediatorResolveQuadPattern.mediate({pattern:P,context:I}),C=_.getVariables(T),O=(0,u.reduceTerms)(T,(W,ae,X)=>(ae.termType==="Variable"&&(W[X]=ae.value),W),{}),N=(W,ae,X)=>{const G=O[X];return G&&W.push([v.variable(G),ae]),W},M=_.getMetadata(L.data,O,C);return{type:"bindings",bindingsStream:new d.ClosableTransformIterator(async()=>{let W=L.data;const ae=_.getDuplicateElementLinks(T);return T.graph.termType==="Variable"&&!B&&(W=W.filter(X=>X.graph.termType!=="DefaultGraph")),ae&&(W=W.filter(X=>{for(const G of u.TRIPLE_TERM_NAMES)for(const re of ae[G]||[])if(!X[G].equals(X[re]))return!1;return!0})),W.map(X=>g.bindings((0,u.reduceTerms)(X,N,[])))},{autoStart:!1,onClose:()=>L.data.destroy()}),metadata:M}}}e.ActorQueryOperationQuadpattern=_},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js"),e)},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationReducedHash=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/actor-query-operation-reduced-hash/node_modules/lru-cache/index.js");class h extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"reduced")}async testOperation(u,p){return!0}async runOperation(u,p){const g=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:u.input,context:p}));return{type:"bindings",bindingsStream:g.bindingsStream.filter(await this.newHashFilter(p)),metadata:g.metadata}}async newHashFilter(u){const{hashFunction:p}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:u}),g=new d({max:this.cacheSize});return v=>{const b=p(v);return g.has(b)?!1:(g.set(b,!0),!0)}}}e.ActorQueryOperationReducedHash=h},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js"),e)},"../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationService=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("../node_modules/@comunica/context-entries/lib/index.js"),l=n("asynciterator"),u=new o.BindingsFactory;class p extends d.ActorQueryOperationTypedMediated{constructor(v){super(v,"service")}async testOperation(v,b){if(v.name.termType!=="NamedNode")throw new Error(`${this.name} can only query services by IRI, while a ${v.name.termType} was given.`);return!0}async runOperation(v,b){const _=v.name.value;let S=b.delete(h.KeysRdfResolveQuadPattern.source).delete(h.KeysRdfResolveQuadPattern.sources).delete(h.KeysInitQuery.queryString);const T=this.forceSparqlEndpoint?"sparql":void 0;S=S.set(h.KeysRdfResolveQuadPattern.sources,[{type:T,value:_}]);let I;try{I=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:v.input,context:S}))}catch(P){if(v.silent)I={bindingsStream:new l.SingletonIterator(u.bindings()),type:"bindings",metadata:async()=>({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};else throw P}return I}}e.ActorQueryOperationService=p},"../node_modules/@comunica/actor-query-operation-service/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js"),e)},"../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationSlice=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/context-entries/lib/index.js");class h extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"slice")}async testOperation(u,p){return!0}async runOperation(u,p){u.length&&(p=p.set(d.KeysQueryOperation.limitIndicator,u.length));const g=await this.mediatorQueryOperation.mediate({operation:u.input,context:p});if(g.type==="bindings")return{type:"bindings",bindingsStream:this.sliceStream(g.bindingsStream,u),metadata:this.sliceMetadata(g,u)};if(g.type==="quads")return{type:"quads",quadStream:this.sliceStream(g.quadStream,u),metadata:this.sliceMetadata(g,u)};throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${g.type}'`)}sliceStream(u,p){const g=!!p.length||p.length===0,{start:v}=p,b=g?p.start+p.length-1:Number.POSITIVE_INFINITY;return u.transform({offset:v,limit:Math.max(b-v+1,0),autoStart:!1})}sliceMetadata(u,p){const g=!!p.length||p.length===0;return()=>u.metadata().then(v=>{const b={...v.cardinality};return Number.isFinite(b.value)&&(b.value=Math.max(0,b.value-p.start),g&&(b.value=Math.min(b.value,p.length))),{...v,cardinality:b}})}}e.ActorQueryOperationSlice=h},"../node_modules/@comunica/actor-query-operation-slice/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js"),e)},"../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUnion=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("asynciterator"),h=n("../node_modules/rdf-terms/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(p){super(p,"union")}static unionVariables(p){return(0,h.uniqTerms)(p.flat())}static unionMetadata(p,g){const v={type:"exact",value:0};for(const _ of p)if(_.cardinality.value&&Number.isFinite(_.cardinality.value)||_.cardinality.value===0)_.cardinality.type==="estimate"&&(v.type="estimate"),v.value+=_.cardinality.value;else{v.type="estimate",v.value=Number.POSITIVE_INFINITY;break}const b={cardinality:v,canContainUndefs:p.some(_=>_.canContainUndefs)};return g&&(b.variables=l.unionVariables(p.map(_=>_.variables))),b}async testOperation(p,g){return!0}async runOperation(p,g){const v=(await Promise.all(p.input.map(S=>this.mediatorQueryOperation.mediate({operation:S,context:g})))).map(o.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new d.UnionIterator(v.map(S=>S.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(v.map(S=>S.metadata())).then(S=>l.unionMetadata(S,!0))}}}e.ActorQueryOperationUnion=l},"../node_modules/@comunica/actor-query-operation-union/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js"),e)},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAddRewrite=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/rdf-data-factory/index.js"),h=n("sparqlalgebrajs"),l=new d.DataFactory;class u extends o.ActorQueryOperationTypedMediated{constructor(g){super(g,"add"),this.factory=new h.Factory}async testOperation(g,v){return o.ActorQueryOperation.throwOnReadOnly(v),!0}runOperation(g,v){const b=g.destination==="DEFAULT"?l.defaultGraph():g.destination,_=g.source==="DEFAULT"?l.defaultGraph():g.source,S=this.factory.createDeleteInsert(void 0,[this.factory.createPattern(l.variable("s"),l.variable("p"),l.variable("o"),b)],this.factory.createPattern(l.variable("s"),l.variable("p"),l.variable("o"),_));return this.mediatorQueryOperation.mediate({operation:S,context:v})}}e.ActorQueryOperationAddRewrite=u},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationClear=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/rdf-data-factory/index.js"),h=new d.DataFactory;class l extends o.ActorQueryOperationTypedMediated{constructor(p){super(p,"clear")}async testOperation(p,g){return o.ActorQueryOperation.throwOnReadOnly(g),!0}async runOperation(p,g){let v;p.source==="DEFAULT"?v=h.defaultGraph():typeof p.source=="string"?v=p.source:v=[p.source];const{execute:b}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:v,requireExistence:!p.silent,dropGraphs:!1},context:g});return{type:"void",execute:b}}}e.ActorQueryOperationClear=l},"../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js"),e)},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateCompositeUpdate=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(l){super(l,"compositeupdate")}async testOperation(l,u){return o.ActorQueryOperation.throwOnReadOnly(u),!0}async runOperation(l,u){return{type:"void",execute:()=>(async()=>{for(const g of l.updates)await o.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:g,context:u})).execute()})()}}}e.ActorQueryOperationUpdateCompositeUpdate=d},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCopyRewrite=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"copy"),this.factory=new d.Factory}async testOperation(u,p){return o.ActorQueryOperation.throwOnReadOnly(p),!0}runOperation(u,p){if(typeof u.destination=="string"&&typeof u.source=="string"&&u.destination===u.source||typeof u.destination!="string"&&typeof u.source!="string"&&u.destination.equals(u.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const g=this.factory.createCompositeUpdate([this.factory.createDrop(u.destination,!0),this.factory.createAdd(u.source,u.destination,u.silent)]);return this.mediatorQueryOperation.mediate({operation:g,context:p})}}e.ActorQueryOperationCopyRewrite=h},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCreate=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(l){super(l,"create")}async testOperation(l,u){return o.ActorQueryOperation.throwOnReadOnly(u),!0}async runOperation(l,u){const{execute:p}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[l.source],requireNonExistence:!l.silent},context:u});return{type:"void",execute:p}}}e.ActorQueryOperationCreate=d},"../node_modules/@comunica/actor-query-operation-update-create/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateDeleteInsert=void 0;const o=n("../node_modules/@comunica/actor-query-operation-construct/lib/index.js"),d=n("../node_modules/@comunica/bindings-factory/lib/index.js"),h=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=n("asynciterator"),u=new d.BindingsFactory;class p extends h.ActorQueryOperationTypedMediated{constructor(v){super(v,"deleteinsert"),this.blankNodeCounter=0}async testOperation(v,b){return h.ActorQueryOperation.throwOnReadOnly(b),!0}async runOperation(v,b){const _=v.where?h.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:v.where,context:b})).bindingsStream:new l.ArrayIterator([u.bindings()],{autoStart:!1});let S,T;v.insert&&(S=new o.BindingsToQuadsIterator(v.insert.map(o.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),_.clone(),!1),this.blankNodeCounter++),v.delete&&(T=new o.BindingsToQuadsIterator(v.delete.map(o.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),_.clone(),!1),this.blankNodeCounter++);const{execute:I}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:S,quadStreamDelete:T,context:b});return{type:"void",execute:I}}}e.ActorQueryOperationUpdateDeleteInsert=p},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js"),e)},"../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDrop=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/rdf-data-factory/index.js"),h=new d.DataFactory;class l extends o.ActorQueryOperationTypedMediated{constructor(p){super(p,"drop")}async testOperation(p,g){return o.ActorQueryOperation.throwOnReadOnly(g),!0}async runOperation(p,g){let v;p.source==="DEFAULT"?v=h.defaultGraph():typeof p.source=="string"?v=p.source:v=[p.source];const{execute:b}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:v,requireExistence:!p.silent,dropGraphs:!0},context:g});return{type:"void",execute:b}}}e.ActorQueryOperationDrop=l},"../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js"),e)},"../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLoad=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/context-entries/lib/index.js"),h=n("../node_modules/rdf-data-factory/index.js"),l=n("sparqlalgebrajs"),u=new h.DataFactory;class p extends o.ActorQueryOperationTypedMediated{constructor(v){super(v,"load"),this.factory=new l.Factory,this.constructOperation=this.factory.createConstruct(this.factory.createPattern(u.variable("s"),u.variable("p"),u.variable("o")),[this.factory.createPattern(u.variable("s"),u.variable("p"),u.variable("o"))])}async testOperation(v,b){return o.ActorQueryOperation.throwOnReadOnly(b),!0}async runOperation(v,b){let _=b.set(d.KeysRdfResolveQuadPattern.sources,[v.source.value]);v.silent&&(_=_.set(d.KeysInitQuery.lenient,!0));let T=p.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.constructOperation,context:_})).quadStream;v.destination&&(T=T.map(P=>u.quad(P.subject,P.predicate,P.object,v.destination)));const{execute:I}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:T,context:b});return{type:"void",execute:I}}}e.ActorQueryOperationLoad=p},"../node_modules/@comunica/actor-query-operation-update-load/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js"),e)},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMoveRewrite=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"move"),this.factory=new d.Factory}async testOperation(u,p){return o.ActorQueryOperation.throwOnReadOnly(p),!0}runOperation(u,p){if(typeof u.destination=="string"&&typeof u.source=="string"&&u.destination===u.source||typeof u.destination!="string"&&typeof u.source!="string"&&u.destination.equals(u.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const g=[this.factory.createDrop(u.destination,!0),this.factory.createAdd(u.source,u.destination,u.silent),this.factory.createDrop(u.source)],v=this.factory.createCompositeUpdate(g);return this.mediatorQueryOperation.mediate({operation:v,context:p})}}e.ActorQueryOperationMoveRewrite=h},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationValues=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("asynciterator"),l=n("../node_modules/rdf-data-factory/index.js"),u=new o.BindingsFactory,p=new l.DataFactory;class g extends d.ActorQueryOperationTyped{constructor(b){super(b,"values")}async testOperation(b,_){return!0}async runOperation(b,_){const S=new h.ArrayIterator(b.bindings.map(P=>u.bindings(Object.entries(P).map(([B,L])=>[p.variable(B.slice(1)),L])))),T=b.variables;return{type:"bindings",bindingsStream:S,metadata:()=>Promise.resolve({cardinality:{type:"exact",value:b.bindings.length},canContainUndefs:b.bindings.some(P=>T.some(B=>!(`?${B.value}`in P))),variables:T})}}}e.ActorQueryOperationValues=g},"../node_modules/@comunica/actor-query-operation-values/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js"),e)},"../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParseSparql=void 0;const o=n("../node_modules/@comunica/bus-query-parse/lib/index.js"),d=n("sparqlalgebrajs"),h=n("sparqljs");class l extends o.ActorQueryParse{constructor(p){super(p),this.prefixes=Object.freeze(this.prefixes)}async test(p){if(p.queryFormat&&p.queryFormat.language!=="sparql")throw new Error("This actor can only parse SPARQL queries");return!0}async run(p){const v=new h.Parser({prefixes:this.prefixes,baseIRI:p.baseIRI}).parse(p.query);return{baseIRI:v.type==="query"?v.base:void 0,operation:(0,d.translate)(v,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:p.baseIRI})}}}e.ActorQueryParseSparql=l},"../node_modules/@comunica/actor-query-parse-sparql/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js"),e)},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSortCardinality=void 0;const o=n("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js");class d extends o.ActorRdfJoinEntriesSort{constructor(l){super(l)}async test(l){return!0}async run(l){return{entries:[...l.entries].sort((p,g)=>p.metadata.cardinality.value-g.metadata.cardinality.value)}}}e.ActorRdfJoinEntriesSortCardinality=d},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinHash=void 0;const o=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=n("../node_modules/asyncjoin/index.js");class h extends o.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"hash",limitEntries:2})}async getOutput(u){const p=await o.ActorRdfJoin.getMetadatas(u.entries),g=o.ActorRdfJoin.overlappingVariables(p);return{result:{type:"bindings",bindingsStream:new d.HashJoin(u.entries[0].output.bindingsStream,u.entries[1].output.bindingsStream,b=>o.ActorRdfJoin.hash(b,g),o.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(u.entries,p,u.context)}}}async getJoinCoefficients(u,p){const g=o.ActorRdfJoin.getRequestInitialTimes(p),v=o.ActorRdfJoin.getRequestItemTimes(p);return{iterations:p[0].cardinality.value+p[1].cardinality.value,persistedItems:p[0].cardinality.value,blockingItems:p[0].cardinality.value,requestTime:g[0]+p[0].cardinality.value*v[0]+g[1]+p[1].cardinality.value*v[1]}}}e.ActorRdfJoinHash=h},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiBind=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),h=n("../node_modules/@comunica/context-entries/lib/index.js"),l=n("asynciterator"),u=n("sparqlalgebrajs");class p extends d.ActorRdfJoin{constructor(v){super(v,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0})}static createBindStream(v,b,_,S,T){const I=P=>{const B=_.map(C=>(0,o.materializeOperation)(C,P,{bindFilter:!1})),L=C=>C.merge(P);return new l.TransformIterator(async()=>(await S(B,P)).transform({map:L}),{maxBufferSize:128,autoStart:!1})};switch(v){case"depth-first":return new l.MultiTransformIterator(b,{autoStart:!1,multiTransform:I,optional:T});case"breadth-first":return new l.UnionIterator(b.transform({map:I,optional:T}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${v}`)}}async sortJoinEntries(v,b){if(v.some(P=>P.metadata.canContainUndefs))return v;const S={};for(const P of v)for(const B of P.metadata.variables){let L=S[B.value];L||(L=0),S[B.value]=++L}const T=[];for(const[P,B]of Object.entries(S))B>=2&&T.push(P);if(T.length===0)throw new Error("Bind join can only join entries with at least one common variable");const I=[];for(const P of v){let B=!1;for(const L of P.metadata.variables)if(T.includes(L.value)){B=!0;break}B||I.push(P)}return(await this.mediatorJoinEntriesSort.mediate({entries:v,context:b})).entries.sort((P,B)=>{const L=I.includes(P),C=I.includes(B);return L===C?0:L?1:-1})}async getOutput(v){const b=await d.ActorRdfJoin.getEntriesWithMetadatas(v.entries),_=await this.sortJoinEntries(b,v.context);this.logDebug(v.context,"First entry for Bind Join: ",()=>({entry:_[0].operation,metadata:_[0].metadata}));for(const[B,L]of _.entries())B!==0&&L.output.bindingsStream.close();const S=_[0].output,T=[..._];T.splice(0,1);const I=v.context.set(h.KeysQueryOperation.joinLeftMetadata,_[0].metadata).set(h.KeysQueryOperation.joinRightMetadatas,T.map(B=>B.metadata));return{result:{type:"bindings",bindingsStream:p.createBindStream(this.bindOrder,S.bindingsStream,T.map(B=>B.operation),async(B,L)=>{const C=B.length===1?B[0]:p.FACTORY.createJoin(B);return o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:C,context:I?.set(h.KeysQueryOperation.joinBindings,L)})).bindingsStream},!1),metadata:()=>this.constructResultMetadata(_,_.map(B=>B.metadata),v.context)},physicalPlanMetadata:{bindIndex:b.indexOf(_[0]),bindOrder:this.bindOrder}}}async getJoinCoefficients(v,b){const _=await this.sortJoinEntries(v.entries.map((M,k)=>({...M,metadata:b[k]})),v.context);b=_.map(M=>M.metadata);const S=d.ActorRdfJoin.getRequestInitialTimes(b),T=d.ActorRdfJoin.getRequestItemTimes(b),I=[..._],P=[...S],B=[...T];if(I.splice(0,1),P.splice(0,1),B.splice(0,1),I.some(M=>M.operation.type===u.Algebra.types.EXTEND||M.operation.type===u.Algebra.types.GROUP))throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const L=await Promise.all(I.map(async M=>(await this.mediatorJoinSelectivity.mediate({entries:[_[0],M],context:v.context})).selectivity*this.selectivityModifier)),C=I.map((M,k)=>M.metadata.cardinality.value*L[k]).reduce((M,k)=>M+k,0),O=P.reduce((M,k,W)=>M+k*L[W],0),N=B.reduce((M,k,W)=>M+k*L[W],0);return{iterations:b[0].cardinality.value*C,persistedItems:0,blockingItems:0,requestTime:S[0]+b[0].cardinality.value*(T[0]+O+C*N)}}}e.ActorRdfJoinMultiBind=p,p.FACTORY=new u.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiEmpty=void 0;const o=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=n("asynciterator");class h extends o.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-empty"})}async test(u){if((await o.ActorRdfJoin.getMetadatas(u.entries)).every(p=>o.ActorRdfJoin.getCardinality(p).value>0))throw new Error(`Actor ${this.name} can only join entries where at least one is empty`);return super.test(u)}async getOutput(u){for(const p of u.entries)p.output.bindingsStream.close();return{result:{bindingsStream:new d.ArrayIterator([],{autoStart:!1}),metadata:async()=>({cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:o.ActorRdfJoin.joinVariables(await o.ActorRdfJoin.getMetadatas(u.entries))}),type:"bindings"}}}async getJoinCoefficients(u,p){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinMultiEmpty=h},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiSmallest=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),h=n("sparqlalgebrajs");class l extends d.ActorRdfJoin{constructor(p){super(p,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0})}async sortJoinEntries(p,g){return(await this.mediatorJoinEntriesSort.mediate({entries:p,context:g})).entries}async getOutput(p){const g=await this.sortJoinEntries(await d.ActorRdfJoin.getEntriesWithMetadatas([...p.entries]),p.context),v=g[0],b=g[1];g.splice(0,2);const _={output:o.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:p.type,entries:[v,b],context:p.context})),operation:l.FACTORY.createJoin([v.operation,b.operation],!1)};return g.push(_),{result:await this.mediatorJoin.mediate({type:p.type,entries:g,context:p.context})}}async getJoinCoefficients(p,g){g=[...g],g=(await this.sortJoinEntries(p.entries.map((S,T)=>({...S,metadata:g[T]})),p.context)).map(S=>S.metadata);const b=d.ActorRdfJoin.getRequestInitialTimes(g),_=d.ActorRdfJoin.getRequestItemTimes(g);return{iterations:g[0].cardinality.value*g[1].cardinality.value*g.slice(2).reduce((S,T)=>S*T.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:b[0]+g[0].cardinality.value*_[0]+b[1]+g[1].cardinality.value*_[1]+g.slice(2).reduce((S,T,I)=>S+b.slice(2)[I]+T.cardinality.value*_.slice(2)[I],0)}}}e.ActorRdfJoinMultiSmallest=l,l.FACTORY=new h.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNestedLoop=void 0;const o=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=n("../node_modules/asyncjoin/index.js");class h extends o.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(u){return{result:{type:"bindings",bindingsStream:new d.NestedLoopJoin(u.entries[0].output.bindingsStream,u.entries[1].output.bindingsStream,o.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(u.entries,await o.ActorRdfJoin.getMetadatas(u.entries),u.context)}}}async getJoinCoefficients(u,p){const g=o.ActorRdfJoin.getRequestInitialTimes(p),v=o.ActorRdfJoin.getRequestItemTimes(p);return{iterations:p[0].cardinality.value*p[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:g[0]+p[0].cardinality.value*v[0]+g[1]+p[1].cardinality.value*v[1]}}}e.ActorRdfJoinNestedLoop=h},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNone=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),h=n("asynciterator"),l=new o.BindingsFactory;class u extends d.ActorRdfJoin{constructor(g){super(g,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(g){if(g.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(g){return{result:{bindingsStream:new h.ArrayIterator([l.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinNone=u},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSingle=void 0;const o=n("../node_modules/@comunica/bus-rdf-join/lib/index.js");class d extends o.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(l){if(l.entries.length!==1)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(l){return{result:l.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinSingle=d},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSymmetricHash=void 0;const o=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=n("../node_modules/asyncjoin/index.js");class h extends o.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2})}async getOutput(u){const p=await o.ActorRdfJoin.getMetadatas(u.entries),g=o.ActorRdfJoin.overlappingVariables(p);return{result:{type:"bindings",bindingsStream:new d.SymmetricHashJoin(u.entries[0].output.bindingsStream,u.entries[1].output.bindingsStream,b=>h.hash(b,g),o.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(u.entries,p,u.context)}}}async getJoinCoefficients(u,p){const g=o.ActorRdfJoin.getRequestInitialTimes(p),v=o.ActorRdfJoin.getRequestItemTimes(p);return{iterations:p[0].cardinality.value+p[1].cardinality.value,persistedItems:p[0].cardinality.value+p[1].cardinality.value,blockingItems:0,requestTime:g[0]+p[0].cardinality.value*v[0]+g[1]+p[1].cardinality.value*v[1]}}}e.ActorRdfJoinSymmetricHash=h},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHashUndef=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),h=n("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js");class l extends d.ActorRdfJoin{constructor(p){super(p,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(p){const g=p.entries[1].output,v=p.entries[0].output,b=await d.ActorRdfJoin.getMetadatas(p.entries),_=d.ActorRdfJoin.overlappingVariables(b);if(_.length>0){const S=new h.BindingsIndex(_);return{result:{type:"bindings",bindingsStream:new o.ClosableTransformIterator(async()=>(await new Promise(I=>{g.bindingsStream.on("data",P=>S.add(P)),g.bindingsStream.on("end",I)}),v.bindingsStream.filter(I=>!S.contains(I))),{autoStart:!1,onClose(){g.bindingsStream.destroy(),v.bindingsStream.destroy()}}),async metadata(){const I=await v.metadata(),P=await v.metadata();return{...P,canContainUndefs:I.canContainUndefs||P.canContainUndefs}}}}}return{result:v}}async getJoinCoefficients(p,g){const v=d.ActorRdfJoin.getRequestInitialTimes(g),b=d.ActorRdfJoin.getRequestItemTimes(g);return{iterations:(g[0].cardinality.value+g[1].cardinality.value)*1.01,persistedItems:g[0].cardinality.value,blockingItems:g[0].cardinality.value,requestTime:v[0]+g[0].cardinality.value*b[0]+v[1]+g[1].cardinality.value*b[1]}}}e.ActorRdfJoinMinusHashUndef=l},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsIndex=void 0;const o=n("../node_modules/rdf-string/index.js");class d{constructor(l){this.data={},this.keys=l}static hashTerm(l){return l&&l.termType!=="Variable"?(0,o.termToString)(l):""}add(l){if(this.isBindingsValid(l)){let u=this.data;for(const p of this.keys){const g=d.hashTerm(l.get(p));let v=u[g];v||(v=u[g]={}),u=v}}}contains(l){return this.isBindingsValid(l)?this.containsRecursive(l,this.keys,[this.data]):!1}isBindingsValid(l){let u=!1;for(const p of this.keys)if(l.get(p)){u=!0;break}return u}containsRecursive(l,u,p){if(u.length===0)return!0;let g;[g,...u]=u;for(const v of p){const b=d.hashTerm(l.get(g));if(b){const _=[v[b],v[""]].filter(Boolean);if(_.length===0)continue;if(this.containsRecursive(l,u,_))return!0}else{let _=Object.keys(v).map(S=>v[S]);if(_.length===0&&(_=[{}]),this.containsRecursive(l,u,_))return!0}}return!1}}e.BindingsIndex=d},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHash=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/bus-rdf-join/lib/index.js");class h extends d.ActorRdfJoin{constructor(u){super(u,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(u){const p=u.entries[1].output,g=u.entries[0].output,v=await d.ActorRdfJoin.getMetadatas(u.entries),b=d.ActorRdfJoin.overlappingVariables(v);if(b.length>0){const _={};return{result:{type:"bindings",bindingsStream:new o.ClosableTransformIterator(async()=>(await new Promise(T=>{p.bindingsStream.on("data",I=>{_[d.ActorRdfJoin.hash(I,b)]=!0}),p.bindingsStream.on("end",T)}),g.bindingsStream.filter(T=>!_[d.ActorRdfJoin.hash(T,b)])),{autoStart:!1,onClose(){p.bindingsStream.destroy(),g.bindingsStream.destroy()}}),metadata:g.metadata}}}return{result:g}}async getJoinCoefficients(u,p){const g=d.ActorRdfJoin.getRequestInitialTimes(p),v=d.ActorRdfJoin.getRequestItemTimes(p);return{iterations:p[0].cardinality.value+p[1].cardinality.value,persistedItems:p[0].cardinality.value,blockingItems:p[0].cardinality.value,requestTime:g[0]+p[0].cardinality.value*v[0]+g[1]+p[1].cardinality.value*v[1]}}}e.ActorRdfJoinMinusHash=h},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalBind=void 0;const o=n("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),h=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=n("../node_modules/@comunica/context-entries/lib/index.js"),u=n("sparqlalgebrajs");class p extends h.ActorRdfJoin{constructor(v){super(v,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0})}async getOutput(v){v.entries[1].output.bindingsStream.close();const b=v.context.set(l.KeysQueryOperation.joinLeftMetadata,await v.entries[0].output.metadata()).set(l.KeysQueryOperation.joinRightMetadatas,[await v.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:o.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,v.entries[0].output.bindingsStream,[v.entries[1].operation],async(S,T)=>{const I=S[0];return d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:I,context:b?.set(l.KeysQueryOperation.joinBindings,T)})).bindingsStream},!0),metadata:async()=>await this.constructResultMetadata(v.entries,await h.ActorRdfJoin.getMetadatas(v.entries),v.context,{canContainUndefs:!0})}}}async getJoinCoefficients(v,b){const _=h.ActorRdfJoin.getRequestInitialTimes(b),S=h.ActorRdfJoin.getRequestItemTimes(b);if(v.entries[1].operation.type===u.Algebra.types.EXTEND||v.entries[1].operation.type===u.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const T=(await this.mediatorJoinSelectivity.mediate({entries:v.entries,context:v.context})).selectivity*this.selectivityModifier;return{iterations:b[0].cardinality.value*b[1].cardinality.value*T,persistedItems:0,blockingItems:0,requestTime:_[0]+b[0].cardinality.value*T*(S[0]+_[1]+b[1].cardinality.value*S[1])}}}e.ActorRdfJoinOptionalBind=p},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalNestedLoop=void 0;const o=n("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=n("../node_modules/asyncjoin/index.js");class h extends o.ActorRdfJoin{constructor(u){super(u,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(u){return{result:{type:"bindings",bindingsStream:new d.NestedLoopJoin(u.entries[0].output.bindingsStream,u.entries[1].output.bindingsStream,o.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(u.entries,await o.ActorRdfJoin.getMetadatas(u.entries),u.context,{canContainUndefs:!0})}}}async getJoinCoefficients(u,p){const g=o.ActorRdfJoin.getRequestInitialTimes(p),v=o.ActorRdfJoin.getRequestItemTimes(p);return{iterations:p[0].cardinality.value*p[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:g[0]+p[0].cardinality.value*v[0]+g[1]+p[1].cardinality.value*v[1]}}}e.ActorRdfJoinOptionalNestedLoop=h},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JoinTypes=e.ActorRdfJoinSelectivityVariableCounting=void 0;const o=n("../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js"),d=n("sparqlalgebrajs");class h extends o.ActorRdfJoinSelectivity{constructor(p){super(p)}async test(p){return{accuracy:.5}}static getPatternCost(p){let g=1;return p.subject.termType==="Variable"&&(g+=4),(p.predicate.termType==="Variable"||p.type===d.Algebra.types.PATH)&&(g+=1),p.object.termType==="Variable"&&(g+=2),p.graph.termType==="Variable"&&(g+=1),g/9}static getJoinTypes(p,g){const v=[];return p.subject.termType==="Variable"?(p.subject.equals(g.subject)&&v.push(l.unboundSS),g.type==="pattern"&&p.subject.equals(g.predicate)&&v.push(l.unboundSP),p.subject.equals(g.object)&&v.push(l.unboundSO),p.subject.equals(g.graph)&&v.push(l.unboundSG)):(p.subject.equals(g.subject)&&v.push(l.boundSS),g.type==="pattern"&&p.subject.equals(g.predicate)&&v.push(l.boundSP),p.subject.equals(g.object)&&v.push(l.boundSO),p.subject.equals(g.graph)&&v.push(l.boundSG)),p.type==="pattern"&&(p.predicate.termType==="Variable"?(p.predicate.equals(g.subject)&&v.push(l.unboundPS),g.type==="pattern"&&p.predicate.equals(g.predicate)&&v.push(l.unboundPP),p.predicate.equals(g.object)&&v.push(l.unboundPO),p.predicate.equals(g.graph)&&v.push(l.unboundPG)):(p.predicate.equals(g.subject)&&v.push(l.boundPS),g.type==="pattern"&&p.predicate.equals(g.predicate)&&v.push(l.boundPP),p.predicate.equals(g.object)&&v.push(l.boundPO),p.predicate.equals(g.graph)&&v.push(l.boundPG))),p.object.termType==="Variable"?(p.object.equals(g.subject)&&v.push(l.unboundOS),g.type==="pattern"&&p.object.equals(g.predicate)&&v.push(l.unboundOP),p.object.equals(g.object)&&v.push(l.unboundOO),p.object.equals(g.graph)&&v.push(l.unboundOG)):(p.object.equals(g.subject)&&v.push(l.boundOS),g.type==="pattern"&&p.object.equals(g.predicate)&&v.push(l.boundOP),p.object.equals(g.object)&&v.push(l.boundOO),p.object.equals(g.graph)&&v.push(l.boundOG)),p.graph.termType==="Variable"?(p.graph.equals(g.subject)&&v.push(l.unboundGS),g.type==="pattern"&&p.graph.equals(g.predicate)&&v.push(l.unboundGP),p.graph.equals(g.object)&&v.push(l.unboundGO),p.graph.equals(g.graph)&&v.push(l.unboundGG)):(p.graph.equals(g.subject)&&v.push(l.boundGS),g.type==="pattern"&&p.graph.equals(g.predicate)&&v.push(l.boundGP),p.graph.equals(g.object)&&v.push(l.boundGO),p.graph.equals(g.graph)&&v.push(l.boundGG)),v}static getOperationsPairwiseJoinCost(p,g){let v=h.MAX_PAIRWISE_COST;for(const b of h.getJoinTypes(p,g))switch(b){case l.boundSS:v-=2*2;break;case l.boundSP:v-=3*2;break;case l.boundSO:v-=1*2;break;case l.boundSG:v-=3*2;break;case l.boundPS:v-=3*2;break;case l.boundPP:return 1;case l.boundPO:v-=3*2;break;case l.boundPG:v-=3*2;break;case l.boundOS:v-=1*2;break;case l.boundOP:v-=3*2;break;case l.boundOO:v-=1*2;break;case l.boundOG:v-=3*2;break;case l.boundGS:v-=3*2;break;case l.boundGP:v-=3*2;break;case l.boundGO:v-=3*2;break;case l.boundGG:v-=3*2;break;case l.unboundSS:v-=2;break;case l.unboundSP:v-=3;break;case l.unboundSO:v-=1;break;case l.unboundSG:v-=3;break;case l.unboundPS:v-=3;break;case l.unboundPP:v-=3;break;case l.unboundPO:v-=3;break;case l.unboundPG:v-=3;break;case l.unboundOS:v-=1;break;case l.unboundOP:v-=3;break;case l.unboundOO:v-=1;break;case l.unboundOG:v-=3;break;case l.unboundGS:v-=3;break;case l.unboundGP:v-=3;break;case l.unboundGO:v-=3;break;case l.unboundGG:v-=3;break}return v/h.MAX_PAIRWISE_COST}static getOperationsJoinCost(p){const g=[];for(const _ of p)d.Util.recurseOperation(_,{[d.Algebra.types.PATTERN](S){return g.push(S),!1},[d.Algebra.types.PATH](S){return g.push(S),!1}});let v=0,b=0;for(const _ of g)for(const S of g)_!==S&&(v+=h.getOperationsPairwiseJoinCost(_,S),b++);return v/b*g.reduce((_,S)=>_*h.getPatternCost(S),1)}async run(p){return p.entries.length<=1?{selectivity:1}:{selectivity:h.getOperationsJoinCost(p.entries.map(g=>g.operation))}}}e.ActorRdfJoinSelectivityVariableCounting=h,h.MAX_PAIRWISE_COST=41*2;var l;(function(u){u[u.boundSS=0]="boundSS",u[u.boundSP=1]="boundSP",u[u.boundSO=2]="boundSO",u[u.boundSG=3]="boundSG",u[u.boundPS=4]="boundPS",u[u.boundPP=5]="boundPP",u[u.boundPO=6]="boundPO",u[u.boundPG=7]="boundPG",u[u.boundOS=8]="boundOS",u[u.boundOP=9]="boundOP",u[u.boundOO=10]="boundOO",u[u.boundOG=11]="boundOG",u[u.boundGS=12]="boundGS",u[u.boundGP=13]="boundGP",u[u.boundGO=14]="boundGO",u[u.boundGG=15]="boundGG",u[u.unboundSS=16]="unboundSS",u[u.unboundSP=17]="unboundSP",u[u.unboundSO=18]="unboundSO",u[u.unboundSG=19]="unboundSG",u[u.unboundPS=20]="unboundPS",u[u.unboundPP=21]="unboundPP",u[u.unboundPO=22]="unboundPO",u[u.unboundPG=23]="unboundPG",u[u.unboundOS=24]="unboundOS",u[u.unboundOP=25]="unboundOP",u[u.unboundOO=26]="unboundOO",u[u.unboundOG=27]="unboundOG",u[u.unboundGS=28]="unboundGS",u[u.unboundGP=29]="unboundGP",u[u.unboundGO=30]="unboundGO",u[u.unboundGG=31]="unboundGG"})(l=e.JoinTypes||(e.JoinTypes={}))},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternFederated=void 0;const o=n("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),d=n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js");class h extends o.ActorRdfResolveQuadPatternSource{constructor(u){super(u),this.emptyPatterns=new Map}async test(u){if(!(0,o.getContextSources)(u.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a sources array.`);return!0}async getSource(u){return new d.FederatedQuadSource(this.mediatorResolveQuadPattern,u,this.emptyPatterns,this.skipEmptyPatterns)}}e.ActorRdfResolveQuadPatternFederated=h},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FederatedQuadSource=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),h=n("../node_modules/@comunica/context-entries/lib/index.js"),l=n("../node_modules/@comunica/data-factory/lib/index.js"),u=n("asynciterator"),p=n("../node_modules/rdf-data-factory/index.js"),g=n("../node_modules/rdf-terms/index.js"),v=n("sparqlalgebrajs"),b=new p.DataFactory;class _{constructor(T,I,P,B){if(this.mediatorResolveQuadPattern=T,this.sources=I.get(h.KeysRdfResolveQuadPattern.sources),this.contextDefault=I.delete(h.KeysRdfResolveQuadPattern.sources),this.emptyPatterns=P,this.sourceIds=I.get(h.KeysRdfResolveQuadPattern.sourceIds)??new Map,this.skipEmptyPatterns=B,this.algebraFactory=new v.Factory,this.skipEmptyPatterns)for(const L of this.sources)this.emptyPatterns.has(L)||this.emptyPatterns.set(L,[])}static isTermBound(T){return T.termType!=="Variable"}static isSubPatternOf(T,I){return(!_.isTermBound(I.subject)||I.subject.equals(T.subject))&&(!_.isTermBound(I.predicate)||I.predicate.equals(T.predicate))&&(!_.isTermBound(I.object)||I.object.equals(T.object))&&(!_.isTermBound(I.graph)||I.graph.equals(T.graph))}static skolemizeTerm(T,I){return T.termType==="BlankNode"?new l.BlankNodeScoped(`bc_${I}_${T.value}`,b.namedNode(`${_.SKOLEM_PREFIX}${I}:${T.value}`)):T}static skolemizeQuad(T,I){return(0,g.mapTerms)(T,P=>_.skolemizeTerm(P,I))}static deskolemizeTerm(T,I){if(T.termType==="BlankNode"&&"skolemized"in T&&(T=T.skolemized),T.termType==="NamedNode"&&T.value.startsWith(_.SKOLEM_PREFIX)){const P=T.value.indexOf(":",_.SKOLEM_PREFIX.length);if(T.value.slice(_.SKOLEM_PREFIX.length,P)===I){const L=T.value.slice(P+1,T.value.length);return b.blankNode(L)}return null}return T}static deskolemizeQuad(T,I){return(0,g.mapTerms)(T,P=>{const B=_.deskolemizeTerm(P,I);return B||P})}isSourceEmpty(T,I){if(!this.skipEmptyPatterns)return!1;const P=this.emptyPatterns.get(T);if(P){for(const B of P)if(_.isSubPatternOf(I,B))return!0}return!1}getSourceId(T){let I=this.sourceIds.get(T);return I===void 0&&(I=`${this.sourceIds.size}`,this.sourceIds.set(T,I)),I}match(T,I,P,B){const L={cardinality:{type:"exact",value:0},canContainUndefs:!1};let C=this.sources.length;const O=(k,W,ae,X)=>{this.skipEmptyPatterns&&!k&&ae&&!this.isSourceEmpty(W,ae)&&this.emptyPatterns.get(W).push(ae),C||(X&&this.sources.length===1?M.setProperty("metadata",X):M.setProperty("metadata",L))},N=Promise.all(this.sources.map(async k=>{const W=this.getSourceId(k),ae=_.deskolemizeTerm(T,W),X=_.deskolemizeTerm(I,W),G=_.deskolemizeTerm(P,W),re=_.deskolemizeTerm(B,W);let F,$=(0,d.getDataSourceContext)(k,this.contextDefault);$=$.set(h.KeysRdfResolveQuadPattern.source,k);let U;!ae||!X||!G||!re||this.isSourceEmpty(k,F=this.algebraFactory.createPattern(ae,X,G,re))?(U={data:new u.ArrayIterator([],{autoStart:!1})},U.data.setProperty("metadata",{cardinality:0,canContainUndefs:!1})):U=await this.mediatorResolveQuadPattern.mediate({pattern:F,context:$}),U.data.getProperty("metadata",ee=>{!ee.cardinality||!Number.isFinite(ee.cardinality.value)?(L.cardinality.type="estimate",L.cardinality.value=Number.POSITIVE_INFINITY,C=0):(ee.cardinality.type==="estimate"&&(L.cardinality.type="estimate"),L.cardinality.value+=ee.cardinality.value,C--),(L.requestTime||ee.requestTime)&&(L.requestTime=L.requestTime||0,ee.requestTime=ee.requestTime||0,L.requestTime+=ee.requestTime),(L.pageSize||ee.pageSize)&&(L.pageSize=L.pageSize||0,ee.pageSize=ee.pageSize||0,L.pageSize+=ee.pageSize),ee.canContainUndefs&&(L.canContainUndefs=!0),O(L.cardinality.value,k,F,ee)});const H=U.data.map(ee=>_.skolemizeQuad(ee,W));return H.on("error",ee=>M.emit("error",ee)),H})),M=new o.ClosableTransformIterator(async()=>new u.UnionIterator(await N),{autoStart:!1,onClose(){N.then(k=>{for(const W of k)W.destroy()},()=>{})}});return this.sources.length===0&&M.setProperty("metadata",L),M}}e.FederatedQuadSource=_,_.SKOLEM_PREFIX="urn:comunica_skolem:source_"},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js"),e),d(n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternRdfJsSource=void 0;const o=n("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),d=n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js");class h extends o.ActorRdfResolveQuadPatternSource{constructor(u){super(u)}async test(u){if(!(0,o.hasContextSingleSourceOfType)("rdfjsSource",u.context))throw new Error(`${this.name} requires a single source with an rdfjsSource to be present in the context.`);const p=(0,o.getContextSource)(u.context);if(!p||typeof p=="string"||!("match"in p)&&!p.value.match)throw new Error(`${this.name} received an invalid rdfjsSource.`);return!0}async getSource(u){const p=(0,o.getContextSource)(u);return new d.RdfJsQuadSource("match"in p?p:p.value)}}e.ActorRdfResolveQuadPatternRdfJsSource=h},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadSource=void 0;const o=n("asynciterator");class d{constructor(l){this.source=l}static nullifyVariables(l){return!l||l.termType==="Variable"?void 0:l}match(l,u,p,g){const v=this.source.match(d.nullifyVariables(l),d.nullifyVariables(u),d.nullifyVariables(p),d.nullifyVariables(g)),b=(0,o.wrap)(v,{autoStart:!1});return this.setMetadata(b,l,u,p,g).catch(_=>b.destroy(_)),b}async setMetadata(l,u,p,g,v){let b;if(this.source.countQuads)b=await this.source.countQuads(d.nullifyVariables(u),d.nullifyVariables(p),d.nullifyVariables(g),d.nullifyVariables(v));else{let _=0;b=await new Promise((S,T)=>{const I=this.source.match(d.nullifyVariables(u),d.nullifyVariables(p),d.nullifyVariables(g),d.nullifyVariables(v));I.on("error",T),I.on("end",()=>S(_)),I.on("data",()=>_++)})}l.setProperty("metadata",{cardinality:{type:"exact",value:b},canContainUndefs:!1})}}e.RdfJsQuadSource=d},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js"),e),d(n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js"),e),d(n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsRdfJsStore=void 0;const o=n("../node_modules/@comunica/bus-rdf-update-quads/lib/index.js"),d=n("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js");class h extends o.ActorRdfUpdateQuadsDestination{constructor(u){super(u)}async test(u){const p=(0,o.getContextDestination)(u.context);if(!p||typeof p=="string"||!("remove"in p)&&"value"in p&&!p.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(u){const p=(0,o.getContextDestination)(u);return new d.RdfJsQuadDestination("remove"in p?p:p.value)}}e.ActorRdfUpdateQuadsRdfJsStore=h},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadDestination=void 0;const o=n("../node_modules/rdf-data-factory/index.js"),d=n("../node_modules/rdf-string/index.js"),h=new o.DataFactory;class l{constructor(p){this.store=p}promisifyEventEmitter(p){return new Promise((g,v)=>{p.on("end",g),p.on("error",v)})}delete(p){return this.promisifyEventEmitter(this.store.remove(p))}insert(p){return this.promisifyEventEmitter(this.store.import(p))}async deleteGraphs(p,g,v){switch(p){case"ALL":await this.promisifyEventEmitter(this.store.deleteGraph(h.defaultGraph()));case"NAMED":const b=this.store.match(),_={};b.on("data",S=>{S.graph.termType!=="DefaultGraph"&&(_[(0,d.termToString)(S.graph)]=!0)}),await this.promisifyEventEmitter(b),await Promise.all(Object.keys(_).map(S=>this.promisifyEventEmitter(this.store.deleteGraph((0,d.stringToTerm)(S)))));break;default:for(const S of Array.isArray(p)?p:[p])await this.promisifyEventEmitter(this.store.deleteGraph(S))}}async createGraphs(p,g){if(g)for(const v of p){const b=this.store.match(void 0,void 0,void 0,v);await new Promise((_,S)=>{b.once("data",()=>{S(new Error(`Unable to create graph ${v.value} as it already exists`))}),b.on("end",_),b.on("error",S)})}}}e.RdfJsQuadDestination=l},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js"),e)},"../node_modules/@comunica/bindings-factory/lib/Bindings.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bindings=void 0;const o=n("../packages/immutable/dist/index.js"),d=n("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js");class h{constructor(u,p){this.type="bindings",this.dataFactory=u,this.entries=p}has(u){return this.entries.has(typeof u=="string"?u:u.value)}get(u){return this.entries.get(typeof u=="string"?u:u.value)}set(u,p){return new h(this.dataFactory,this.entries.set(typeof u=="string"?u:u.value,p))}delete(u){return new h(this.dataFactory,this.entries.delete(typeof u=="string"?u:u.value))}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),u=>this.dataFactory.variable(u))}values(){return this.iteratorToIterable(this.entries.values())}forEach(u){this.entries.forEach((p,g)=>u(p,this.dataFactory.variable(g)))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([u,p])=>[this.dataFactory.variable(u),p])[Symbol.iterator]()}equals(u){if(!u)return!1;if(this===u)return!0;if(this.size!==u.size)return!1;for(const p of this.keys())if(!this.get(p)?.equals(u.get(p)))return!1;return!0}filter(u){return new h(this.dataFactory,(0,o.Map)(this.entries.filter((p,g)=>u(p,this.dataFactory.variable(g)))))}map(u){return new h(this.dataFactory,(0,o.Map)(this.entries.map((p,g)=>u(p,this.dataFactory.variable(g)))))}merge(u){const p=new Set([...this.iteratorToIterable(this.entries.keys()),...[...u.keys()].map(v=>v.value)]),g=[];for(const v of p){const b=this.entries.get(v),_=u.get(this.dataFactory.variable(v));if(b&&_&&!b.equals(_))return;const S=b||_;g.push([v,S])}return new h(this.dataFactory,(0,o.Map)(g))}mergeWith(u,p){const g=new Set([...this.iteratorToIterable(this.entries.keys()),...[...p.keys()].map(b=>b.value)]),v=[];for(const b of g){const _=this.dataFactory.variable(b),S=this.entries.get(b),T=p.get(_);let I;S&&T&&!S.equals(T)?I=u(S,T,_):I=S||T,v.push([b,I])}return new h(this.dataFactory,(0,o.Map)(v))}toString(){return(0,d.bindingsToString)(this)}*mapIterable(u,p){for(const g of u)yield p(g)}iteratorToIterable(u){return{[Symbol.iterator]:()=>u}}}e.Bindings=h},"../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsFactory=void 0;const o=n("../packages/immutable/dist/index.js"),d=n("../node_modules/rdf-data-factory/index.js"),h=n("../node_modules/@comunica/bindings-factory/lib/Bindings.js");class l{constructor(p=new d.DataFactory){this.dataFactory=p}bindings(p=[]){return new h.Bindings(this.dataFactory,(0,o.Map)(p.map(([g,v])=>[g.value,v])))}fromBindings(p){return this.bindings([...p])}fromRecord(p){return this.bindings(Object.entries(p).map(([g,v])=>[this.dataFactory.variable(g),v]))}}e.BindingsFactory=l},"../node_modules/@comunica/bindings-factory/lib/bindingsToString.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindingsToString=void 0;const o=n("../node_modules/rdf-string/index.js");function d(h){const l={};for(const u of h.keys())l[u.value]=(0,o.termToString)(h.get(u));return JSON.stringify(l,null,"  ")}e.bindingsToString=d},"../node_modules/@comunica/bindings-factory/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bindings-factory/lib/Bindings.js"),e),d(n("../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js"),e),d(n("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js"),e)},"../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocess=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorContextPreprocess=d},"../node_modules/@comunica/bus-context-preprocess/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js"),e)},"../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindings=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorHashBindings=d},"../node_modules/@comunica/bus-hash-bindings/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js"),e)},"../node_modules/@comunica/bus-init/lib/ActorInit.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInit=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorInit=d},"../node_modules/@comunica/bus-init/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-init/lib/ActorInit.js"),e)},"../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperation=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorOptimizeQueryOperation=d},"../node_modules/@comunica/bus-optimize-query-operation/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js"),e)},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperation=void 0;const o=n("../node_modules/@comunica/context-entries/lib/index.js"),d=n("../node_modules/@comunica/core/lib/index.js"),h=n("../node_modules/@comunica/data-factory/lib/index.js"),l=n("../node_modules/@comunica/bus-query-operation/lib/Bindings.js");let u=0;class p extends d.Actor{constructor(v){super(v)}static getSafeBindings(v){return p.validateQueryOutput(v,"bindings"),v}static getSafeQuads(v){return p.validateQueryOutput(v,"quads"),v}static getSafeBoolean(v){return p.validateQueryOutput(v,"boolean"),v}static getSafeVoid(v){return p.validateQueryOutput(v,"void"),v}static cachifyMetadata(v){let b;return()=>b||(b=v())}static validateQueryOutput(v,b){if(v.type!==b)throw new Error(`Invalid query output type: Expected '${b}' but got '${v.type}'`)}static getBaseExpressionContext(v){const b=v.get(o.KeysInitQuery.queryTimestamp),_=v.get(o.KeysInitQuery.baseIRI),S=v.get(o.KeysInitQuery.functionArgumentsCache)||{};if(v.has(o.KeysInitQuery.extensionFunctionCreator)&&v.has(o.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let T=v.get(o.KeysInitQuery.extensionFunctionCreator);const I=v.get(o.KeysInitQuery.extensionFunctions);return I&&(T=P=>I[P.value]),{now:b,baseIRI:_,extensionFunctionCreator:T,functionArgumentsCache:S}}static getExpressionContext(v,b){return{...this.getBaseExpressionContext(v),bnode:_=>new h.BlankNodeBindingsScoped(_||`BNODE_${u++}`)}}static getAsyncExpressionContext(v,b){const _={...this.getBaseExpressionContext(v),bnode:S=>Promise.resolve(new h.BlankNodeBindingsScoped(S||`BNODE_${u++}`))};return b&&(_.exists=p.createExistenceResolver(v,b)),_}static createExistenceResolver(v,b){return async(_,S)=>{const T=(0,l.materializeOperation)(_.input,S),I=await b.mediate({operation:T,context:v}),P=p.getSafeBindings(I);return new Promise((B,L)=>{P.bindingsStream.on("end",()=>{B(!1)}),P.bindingsStream.on("error",L),P.bindingsStream.on("data",()=>{P.bindingsStream.close(),B(!0)})}).then(B=>_.not?!B:B)}}static throwOnReadOnly(v){if(v.get(o.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}}e.ActorQueryOperation=p},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTyped=void 0;const o=n("../node_modules/@comunica/context-entries/lib/index.js"),d=n("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js");class h extends d.ActorQueryOperation{constructor(u,p){if(super({...u,operationName:p}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(u){if(!u.operation)throw new Error("Missing field 'operation' in a query operation action.");if(u.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${u.operation.type}`);const p=u.operation;return this.testOperation(p,u.context)}async run(u){const p=u.context.get(o.KeysInitQuery.physicalQueryPlanLogger);p&&(p.logOperation(u.operation.type,void 0,u.operation,u.context.get(o.KeysInitQuery.physicalQueryPlanNode),this.name,{}),u.context=u.context.set(o.KeysInitQuery.physicalQueryPlanNode,u.operation));const g=u.operation,v=u.context.set(o.KeysQueryOperation.operation,g),b=await this.runOperation(g,v);return"metadata"in b&&(b.metadata=d.ActorQueryOperation.cachifyMetadata(b.metadata)),b}}e.ActorQueryOperationTyped=h},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTypedMediated=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js");class d extends o.ActorQueryOperationTyped{constructor(l,u){super(l,u)}}e.ActorQueryOperationTypedMediated=d},"../node_modules/@comunica/bus-query-operation/lib/Bindings.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materializeOperation=e.materializeTerm=void 0;const o=n("../node_modules/@comunica/bindings-factory/lib/index.js"),d=n("../node_modules/rdf-string/index.js"),h=n("sparqlalgebrajs"),l=new o.BindingsFactory;function u(g,v){if(g.termType==="Variable"){const b=v.get(g);if(b)return b}return g}e.materializeTerm=u;function p(g,v,b={}){return b={strictTargetVariables:"strictTargetVariables"in b?b.strictTargetVariables:!1,bindFilter:"bindFilter"in b?b.bindFilter:!0},h.Util.mapOperation(g,{path(_,S){return{recurse:!1,result:S.createPath(u(_.subject,v),_.predicate,u(_.object,v),u(_.graph,v))}},pattern(_,S){return{recurse:!1,result:S.createPattern(u(_.subject,v),u(_.predicate,v),u(_.object,v),u(_.graph,v))}},extend(_){if(v.has(_.variable)){if(b.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,d.termToString)(_.variable)} in a BIND operator.`);return{recurse:!0,result:p(_.input,v,b)}}return{recurse:!0,result:_}},group(_,S){if(b.strictTargetVariables){for(const I of _.variables)if(v.has(I))throw new Error(`Tried to bind variable ${(0,d.termToString)(I)} in a GROUP BY operator.`);return{recurse:!0,result:_}}const T=_.variables.filter(I=>!v.has(I));return{recurse:!0,result:S.createGroup(_.input,T,_.aggregates)}},project(_,S){if(b.strictTargetVariables){for(const P of _.variables)if(v.has(P))throw new Error(`Tried to bind variable ${(0,d.termToString)(P)} in a SELECT operator.`);return{recurse:!0,result:_}}const T=_.variables.filter(P=>!v.has(P)),I=l.bindings(_.variables.map(P=>{const B=v.get(P);if(B)return[P,B]}).filter(P=>!!P));return{recurse:!1,result:S.createProject(p(_.input,I,b),T)}},values(_,S){if(b.strictTargetVariables){for(const T of _.variables)if(v.has(T))throw new Error(`Tried to bind variable ${(0,d.termToString)(T)} in a VALUES operator.`)}else{const T=_.variables.filter(P=>!v.has(P)),I=_.bindings.map(P=>{const B={...P};let L=!0;return v.forEach((C,O)=>{const N=(0,d.termToString)(O);N in B&&(C.equals(B[N])||(L=!1),delete B[N])}),L?B:void 0}).filter(Boolean);return{recurse:!0,result:S.createValues(T,I)}}return{recurse:!1,result:_}},expression(_,S){if(!b.bindFilter)return{recurse:!1,result:_};if(_.expressionType==="term")return{recurse:!1,result:S.createTermExpression(u(_.term,v))};if(_.expressionType==="aggregate"&&"variable"in _&&v.has(_.variable)){if(b.strictTargetVariables)throw new Error(`Tried to bind ${(0,d.termToString)(_.variable)} in a ${_.aggregator} aggregate.`);return{recurse:!0,result:_}}return{recurse:!0,result:_}}})}e.materializeOperation=p},"../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusQueryOperation=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.BusIndexed{constructor(l){super({...l,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}}e.BusQueryOperation=d},"../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ClosableTransformIterator=void 0;const o=n("asynciterator");class d extends o.TransformIterator{constructor(l,u){super(l,u),this.onClose=u.onClose}_end(l){this.onClose(),super._end(l)}}e.ClosableTransformIterator=d},"../node_modules/@comunica/bus-query-operation/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js"),e),d(n("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js"),e),d(n("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js"),e),d(n("../node_modules/@comunica/bus-query-operation/lib/Bindings.js"),e),d(n("../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js"),e),d(n("../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js"),e)},"../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParse=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorQueryParse=d},"../node_modules/@comunica/bus-query-parse/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js"),e)},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSort=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorRdfJoinEntriesSort=d},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js"),e)},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSelectivity=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorRdfJoinSelectivity=d},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js"),e)},"../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoin=void 0;const o=n("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=n("../node_modules/@comunica/context-entries/lib/index.js"),h=n("../node_modules/@comunica/core/lib/index.js"),l=n("../node_modules/rdf-data-factory/index.js"),u=n("../node_modules/rdf-string/index.js"),p=new l.DataFactory;class g extends h.Actor{constructor(b,_){super(b),this.includeInLogs=!0,this.logicalType=_.logicalType,this.physicalName=_.physicalName,this.limitEntries=_.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=_.limitEntriesMin??!1,this.canHandleUndefs=_.canHandleUndefs??!1}static hash(b,_){return _.filter(S=>b.has(S)).map(S=>(0,u.termToString)(b.get(S))).join("")}static overlappingVariables(b){const _=b.map(T=>T.variables);let S=_[0];for(const T of _.slice(1))S=S.filter(I=>T.some(P=>P.value===I.value));return S}static joinVariables(b){return[...new Set(b.flatMap(_=>_.variables.map(S=>S.value)))].map(_=>p.variable(_))}static joinBindings(...b){if(b.length===0)return null;if(b.length===1)return b[0];let _=b[0];for(const S of b.slice(1)){const T=_.merge(S);if(!T)return null;_=T}return _}static getCardinality(b){return b.cardinality}static async getMetadatas(b){return await Promise.all(b.map(_=>_.output.metadata()))}static async getEntriesWithMetadatas(b){const _=await g.getMetadatas(b);return b.map((S,T)=>({...S,metadata:_[T]}))}static getRequestInitialTimes(b){return b.map(_=>_.pageSize?0:_.requestTime||0)}static getRequestItemTimes(b){return b.map(_=>_.pageSize?(_.requestTime||0)/_.pageSize:0)}async constructResultMetadata(b,_,S,T={}){let I;return T.cardinality?I=T.cardinality:(I=_.reduce((P,B)=>{const L=g.getCardinality(B);return{type:L.type==="estimate"?"estimate":P.type,value:P.value*L.value}},{type:"exact",value:1}),I.value*=(await this.mediatorJoinSelectivity.mediate({entries:b,context:S})).selectivity),{...T,cardinality:{type:I.type,value:I.value},canContainUndefs:T.canContainUndefs??_.some(P=>P.canContainUndefs),variables:g.joinVariables(_)}}async test(b){if(b.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${b.type}' was given.`);if(b.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?b.entries.length<this.limitEntries:b.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${b.entries.length}.`);for(const S of b.entries)if(S.output.type!=="bindings")throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${S.output.type}'`);const _=await g.getMetadatas(b.entries);if(!this.canHandleUndefs){for(const S of _)if(S.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`)}return await this.getJoinCoefficients(b,_)}async run(b){let _;b.context.has(d.KeysInitQuery.physicalQueryPlanLogger)&&(_=b.context.get(d.KeysInitQuery.physicalQueryPlanNode),b.context=b.context.set(d.KeysInitQuery.physicalQueryPlanNode,b));const S=b.context.get(d.KeysInitQuery.physicalQueryPlanLogger);let T;this.includeInLogs&&S&&(T={},S.logOperation(`join-${this.logicalType}`,this.physicalName,b,_,this.name,T));const{result:I,physicalPlanMetadata:P}=await this.getOutput(b),B=await g.getMetadatas(b.entries);return T&&(Object.assign(T,P),T.cardinalities=B.map(g.getCardinality),T.joinCoefficients=await this.getJoinCoefficients(b,B)),I.metadata=o.ActorQueryOperation.cachifyMetadata(I.metadata),I}}e.ActorRdfJoin=g},"../node_modules/@comunica/bus-rdf-join/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPattern=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorRdfResolveQuadPattern=d},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternSource=void 0;const o=n("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js");class d extends o.ActorRdfResolveQuadPattern{constructor(l){super(l)}async test(l){return!0}async run(l){const u=await this.getSource(l.context,l.pattern);return await this.getOutput(u,l.pattern,l.context)}async getOutput(l,u,p){return{data:l.match(u.subject,u.predicate,u.object,u.graph,p)}}}e.ActorRdfResolveQuadPatternSource=d},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js"),e),d(n("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js"),e),d(n("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hasContextSingleSourceOfType=e.hasContextSingleSource=e.getContextSourceUrl=e.getContextSourceFirst=e.getContextSource=e.getContextSources=e.getDataSourceContext=e.getDataSourceValue=e.getDataSourceType=e.isDataSourceRawType=void 0;const o=n("../node_modules/@comunica/context-entries/lib/index.js");function d(T){return typeof T=="string"||"match"in T}e.isDataSourceRawType=d;function h(T){return typeof T=="string"?"":"match"in T?"rdfjsSource":T.type}e.getDataSourceType=h;function l(T){return d(T)?T:T.value}e.getDataSourceValue=l;function u(T,I){return typeof T=="string"||"match"in T||!T.context?I:I.merge(T.context)}e.getDataSourceContext=u;function p(T){return T.get(o.KeysRdfResolveQuadPattern.sources)}e.getContextSources=p;function g(T){return T.get(o.KeysRdfResolveQuadPattern.source)}e.getContextSource=g;function v(T){if(T.has(o.KeysRdfResolveQuadPattern.source))return T.get(o.KeysRdfResolveQuadPattern.source);const I=T.get(o.KeysRdfResolveQuadPattern.sources);if(I?.length===1)return I[0]}e.getContextSourceFirst=v;function b(T){if(T){let I=l(T);if(typeof I=="string"){const P=I.indexOf("#");return P>=0&&(I=I.slice(0,P)),I}}}e.getContextSourceUrl=b;function _(T){const I=g(T);return!!(I&&(d(I)||I.value))}e.hasContextSingleSource=_;function S(T,I){const P=g(I);return!!(P&&h(P)===T&&l(P))}e.hasContextSingleSourceOfType=S},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuads=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Actor{constructor(l){super(l)}}e.ActorRdfUpdateQuads=d},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsDestination=e.deskolemize=e.deskolemizeStream=void 0;const o=n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js"),d=n("../node_modules/@comunica/context-entries/lib/index.js"),h=n("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js");function l(g,v){return g?.map(b=>o.FederatedQuadSource.deskolemizeQuad(b,v))}e.deskolemizeStream=l;function u(g){const v=g.context.get(d.KeysRdfUpdateQuads.destination),b=g.context.get(d.KeysRdfResolveQuadPattern.sourceIds)?.get(v);return b?{...g,quadStreamInsert:l(g.quadStreamInsert,b),quadStreamDelete:l(g.quadStreamDelete,b)}:g}e.deskolemize=u;class p extends h.ActorRdfUpdateQuads{async test(v){return!0}async run(v){const b=await this.getDestination(v.context);return await this.getOutput(b,u(v),v.context)}async getOutput(v,b,_){return{execute:()=>Promise.all([b.quadStreamInsert?v.insert(b.quadStreamInsert):Promise.resolve(),b.quadStreamDelete?v.delete(b.quadStreamDelete):Promise.resolve(),b.deleteGraphs?v.deleteGraphs(b.deleteGraphs.graphs,b.deleteGraphs.requireExistence,b.deleteGraphs.dropGraphs):Promise.resolve(),b.createGraphs?v.createGraphs(b.createGraphs.graphs,b.createGraphs.requireNonExistence):Promise.resolve()]).then(()=>{})}}}e.ActorRdfUpdateQuadsDestination=p},"../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateHttpResponse=void 0;const o=n("./require-empty.js"),d=n("../node_modules/stream-to-string/index.js");async function h(l,u){if(u.status>=400){let p="empty response";if(u.body){const g=o.ActorHttp.toNodeReadable(u.body);p=await d(g)}throw new Error(`Could not update ${l} (HTTP status ${u.status}):
${p}`)}await u.body?.cancel()}e.validateHttpResponse=h},"../node_modules/@comunica/bus-rdf-update-quads/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js"),e),d(n("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js"),e),d(n("../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js"),e),d(n("../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getContextDestinationUrl=e.getContextDestinationFirst=e.getContextDestination=e.getDataDestinationContext=e.getDataDestinationValue=e.getDataDestinationType=e.isDataDestinationRawType=void 0;const o=n("../node_modules/@comunica/context-entries/lib/index.js");function d(b){return typeof b=="string"||"remove"in b}e.isDataDestinationRawType=d;function h(b){return typeof b=="string"?"":"remove"in b?"rdfjsStore":b.type}e.getDataDestinationType=h;function l(b){return d(b)?b:b.value}e.getDataDestinationValue=l;function u(b,_){return typeof b=="string"||"remove"in b||!b.context?_:_.merge(b.context)}e.getDataDestinationContext=u;function p(b){return b.get(o.KeysRdfUpdateQuads.destination)}e.getContextDestination=p;function g(b){if(b.has(o.KeysRdfUpdateQuads.destination))return b.get(o.KeysRdfUpdateQuads.destination)}e.getContextDestinationFirst=g;function v(b){if(b){let _=l(b);if(typeof _=="string"){const S=_.indexOf("#");return S>=0&&(_=_.slice(0,S)),_}}}e.getContextDestinationUrl=v},"../node_modules/@comunica/context-entries/lib/Keys.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeysRdfUpdateQuads=e.KeysRdfResolveQuadPattern=e.KeysRdfParseHtmlScript=e.KeysRdfParseJsonLd=e.KeysQueryOperation=e.KeysInitQuery=e.KeysHttpProxy=e.KeysHttpMemento=e.KeysHttpWayback=e.KeysHttp=e.KeysCore=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");e.KeysCore={log:o.CONTEXT_KEY_LOGGER},e.KeysHttp={includeCredentials:new o.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new o.ActionContextKey("@comunica/bus-http:auth"),fetch:new o.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new o.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new o.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new o.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new o.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new o.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")},e.KeysHttpWayback={recoverBrokenLinks:new o.ActionContextKey("@comunica/bus-http:recover-broken-links")},e.KeysHttpMemento={datetime:new o.ActionContextKey("@comunica/actor-http-memento:datetime")},e.KeysHttpProxy={httpProxyHandler:new o.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},e.KeysInitQuery={initialBindings:new o.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new o.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new o.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new o.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new o.ActionContextKey("@comunica/actor-init-query:queryString"),query:new o.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new o.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new o.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new o.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new o.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new o.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new o.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new o.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new o.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new o.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new o.ActionContextKey("@context")},e.KeysQueryOperation={operation:new o.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new o.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new o.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new o.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new o.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new o.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new o.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new o.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),localizeBlankNodes:new o.ActionContextKey("@comunica/actor-query-operation:localizeBlankNodes")},e.KeysRdfParseJsonLd={documentLoader:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},e.KeysRdfParseHtmlScript={processingHtmlScript:new o.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new o.ActionContextKey("extractAllScripts")},e.KeysRdfResolveQuadPattern={sources:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds"),hypermediaSourcesAggregatedStores:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:hypermediaSourcesAggregatedStores")},e.KeysRdfUpdateQuads={destination:new o.ActionContextKey("@comunica/bus-rdf-update-quads:destination")}},"../node_modules/@comunica/context-entries/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/context-entries/lib/Keys.js"),e)},"../node_modules/@comunica/core/lib/ActionContext.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionContextKey=e.ActionContext=void 0;const o=n("../packages/immutable/dist/index.js");class d{constructor(u={}){this.map=(0,o.Map)(u)}setDefault(u,p){return this.has(u)?this:this.set(u,p)}set(u,p){return this.setRaw(u.name,p)}setRaw(u,p){return new d(this.map.set(u,p))}delete(u){return new d(this.map.delete(u.name))}get(u){return this.getRaw(u.name)}getRaw(u){return this.map.get(u)}getSafe(u){if(!this.has(u))throw new Error(`Context entry ${u.name} is required but not available`);return this.get(u)}has(u){return this.hasRaw(u.name)}hasRaw(u){return this.map.has(u)}merge(...u){let p=this;for(const g of u)for(const v of g.keys())p=p.set(v,g.get(v));return p}keys(){return[...this.map.keys()].map(u=>new h(u))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(u){return u instanceof d?u:new d((0,o.Map)(u||{}))}}e.ActionContext=d;class h{constructor(u){this.name=u}}e.ActionContextKey=h},"../node_modules/@comunica/core/lib/ActionObserver.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionObserver=void 0;class n{constructor(d){Object.assign(this,d)}}e.ActionObserver=n},"../node_modules/@comunica/core/lib/Actor.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;const o=n("../node_modules/@comunica/core/lib/ContextEntries.js");class d{constructor(l){this.beforeActors=[],Object.assign(this,l),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(l){return l.get(o.CONTEXT_KEY_LOGGER)}runObservable(l){const u=this.run(l);return this.bus.onRun(this,l,u),u}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(l,u){const p=u?u():{};return p.actor=this.name,p}logTrace(l,u,p){const g=d.getContextLogger(l);g&&g.trace(u,this.getDefaultLogData(l,p))}logDebug(l,u,p){const g=d.getContextLogger(l);g&&g.debug(u,this.getDefaultLogData(l,p))}logInfo(l,u,p){const g=d.getContextLogger(l);g&&g.info(u,this.getDefaultLogData(l,p))}logWarn(l,u,p){const g=d.getContextLogger(l);g&&g.warn(u,this.getDefaultLogData(l,p))}logError(l,u,p){const g=d.getContextLogger(l);g&&g.error(u,this.getDefaultLogData(l,p))}logFatal(l,u,p){const g=d.getContextLogger(l);g&&g.fatal(u,this.getDefaultLogData(l,p))}}e.Actor=d},"../node_modules/@comunica/core/lib/Bus.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bus=void 0;class n{constructor(d){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,d)}subscribe(d){this.actors.push(d),this.reorderForDependencies()}subscribeObserver(d){this.observers.push(d)}unsubscribe(d){const h=this.actors.indexOf(d);return h>=0?(this.actors.splice(h,1),!0):!1}unsubscribeObserver(d){const h=this.observers.indexOf(d);return h>=0?(this.observers.splice(h,1),!0):!1}publish(d){return this.actors.map(h=>({actor:h,reply:h.test(d)}))}onRun(d,h,l){for(const u of this.observers)u.onRun(d,h,l)}addDependencies(d,h){for(const l of h){let u=this.dependencyLinks.get(l);u||(u=[],this.dependencyLinks.set(l,u)),u.push(d)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const d=[];for(const h of this.dependencyLinks.keys()){const l=this.actors.indexOf(h);l>=0&&(this.actors.splice(l,1),d.push(h))}for(;d.length>0;){let h=-1;for(let u=0;u<d.length;u++){let p=!0;for(const g of this.dependencyLinks.get(d[u]))if(!this.actors.includes(g)&&d.includes(g)){p=!1;break}if(p){h=u;break}}if(h<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const l=d.splice(h,1)[0];this.actors.push(l)}}}}e.Bus=n},"../node_modules/@comunica/core/lib/BusIndexed.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusIndexed=void 0;const o=n("../node_modules/@comunica/core/lib/Bus.js");class d extends o.Bus{constructor(l){super(l),this.actorsIndex={}}subscribe(l){const u=this.getActorIdentifier(l)||"_undefined_";let p=this.actorsIndex[u];p||(p=this.actorsIndex[u]=[]),p.push(l),super.subscribe(l)}unsubscribe(l){const u=this.getActorIdentifier(l)||"_undefined_",p=this.actorsIndex[u];if(p){const g=p.indexOf(l);g>=0&&p.splice(g,1),p.length===0&&delete this.actorsIndex[u]}return super.unsubscribe(l)}publish(l){const u=this.getActionIdentifier(l);return u?[...this.actorsIndex[u]||[],...this.actorsIndex._undefined_||[]].map(g=>({actor:g,reply:g.test(l)})):super.publish(l)}getActorIdentifier(l){return this.actorIdentifierFields.reduce((u,p)=>u[p],l)}getActionIdentifier(l){return this.actionIdentifierFields.reduce((u,p)=>u[p],l)}}e.BusIndexed=d},"../node_modules/@comunica/core/lib/ContextEntries.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_KEY_LOGGER=void 0;const o=n("../node_modules/@comunica/core/lib/ActionContext.js");e.CONTEXT_KEY_LOGGER=new o.ActionContextKey("@comunica/core:log")},"../node_modules/@comunica/core/lib/Mediator.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Mediator=void 0;class n{constructor(d){Object.assign(this,d)}publish(d){const h=this.bus.publish(d);if(h.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return h}async mediateActor(d){return await this.mediateWith(d,this.publish(d))}async mediate(d){return(await this.mediateActor(d)).runObservable(d)}}e.Mediator=n},"../node_modules/@comunica/core/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(u,p,g,v){v===void 0&&(v=g);var b=Object.getOwnPropertyDescriptor(p,g);(!b||("get"in b?!p.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return p[g]}}),Object.defineProperty(u,v,b)}:function(u,p,g,v){v===void 0&&(v=g),u[v]=p[g]}),d=this&&this.__exportStar||function(u,p){for(var g in u)g!=="default"&&!Object.prototype.hasOwnProperty.call(p,g)&&o(p,u,g)};Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;const l=n("../node_modules/@comunica/types/lib/index.js").Logger;e.Logger=l,d(n("../node_modules/@comunica/core/lib/ActionContext.js"),e),d(n("../node_modules/@comunica/core/lib/Bus.js"),e),d(n("../node_modules/@comunica/core/lib/BusIndexed.js"),e),d(n("../node_modules/@comunica/core/lib/ContextEntries.js"),e),d(n("../node_modules/@comunica/core/lib/ActionObserver.js"),e),d(n("../node_modules/@comunica/core/lib/Actor.js"),e),d(n("../node_modules/@comunica/core/lib/Mediator.js"),e)},"../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeBindingsScoped=void 0;class n{constructor(d){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=d}equals(d){return!!d&&d.termType==="BlankNode"&&d.value===this.value}}e.BlankNodeBindingsScoped=n},"../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeScoped=void 0;class n{constructor(d,h){this.termType="BlankNode",this.value=d,this.skolemized=h}equals(d){return!!d&&d.termType==="BlankNode"&&d.value===this.value}}e.BlankNodeScoped=n},"../node_modules/@comunica/data-factory/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js"),e),d(n("../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js"),e)},"../node_modules/@comunica/logger-void/lib/LoggerVoid.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoggerVoid=void 0;const o=n("../node_modules/@comunica/types/lib/index.js");class d extends o.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}e.LoggerVoid=d},"../node_modules/@comunica/logger-void/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/logger-void/lib/LoggerVoid.js"),e)},"../node_modules/@comunica/mediator-all/lib/MediatorAll.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorAll=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Mediator{constructor(l){super(l)}async mediate(l){const u=[];let p;try{p=this.publish(l)}catch{p=[]}for(const v of p)try{await v.reply,u.push(v.actor)}catch{}return(await Promise.all(u.map(v=>v.runObservable(l))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}}e.MediatorAll=d},"../node_modules/@comunica/mediator-all/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/mediator-all/lib/MediatorAll.js"),e)},"../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombinePipeline=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Mediator{constructor(l){super(l)}async mediate(l){let u;try{u=this.publish(l)}catch{return l}if(this.filterErrors){const g=[];for(const v of u)try{await v.reply,g.push(v)}catch{}u=g}if(u=await Promise.all(u.map(async({actor:g,reply:v})=>({actor:g,reply:await v}))),this.order){const g=v=>{const b=this.field?v[this.field]:v;if(typeof b!="number")throw new Error("Cannot order elements that are not numbers.");return b};u=u.sort((v,b)=>(this.order==="increasing"?1:-1)*(g(v.reply)-g(b.reply)))}let p=l;for(const{actor:g}of u)p={...p,...await g.runObservable(p)};return p}mediateWith(){throw new Error("Method not supported.")}}e.MediatorCombinePipeline=d},"../node_modules/@comunica/mediator-combine-pipeline/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js"),e)},"../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombineUnion=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Mediator{constructor(l){super(l),this.combiner=this.createCombiner()}async mediate(l){let u;try{u=this.publish(l)}catch{u=[]}await Promise.all(u.map(({reply:g})=>g));const p=await Promise.all(u.map(g=>g.actor.runObservable(l)));return this.combiner(p)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return l=>{const u={};return u[this.field]={},[{}].concat(l.map(p=>p[this.field])).forEach((p,g,v)=>{u[this.field]={...p,...u[this.field]}}),u}}}e.MediatorCombineUnion=d},"../node_modules/@comunica/mediator-combine-union/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js"),e)},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorJoinCoefficientsFixed=void 0;const o=n("../node_modules/@comunica/context-entries/lib/index.js"),d=n("../node_modules/@comunica/core/lib/index.js");class h extends d.Mediator{constructor(u){super(u)}async mediateWith(u,p){const g=[],v=p.map(({reply:L})=>L).map(L=>L.catch(C=>{g.push(C)})),b=await Promise.all(v);let _=b.map((L,C)=>{if(L)return L.iterations*this.cpuWeight+L.persistedItems*this.memoryWeight+L.blockingItems*this.timeWeight+L.requestTime*this.ioWeight});const S=Math.max(..._.filter(L=>L!==void 0)),T=u.context.get(o.KeysQueryOperation.limitIndicator);T&&(_=_.map((L,C)=>L!==void 0&&b[C].persistedItems>0&&b[C].iterations>T?L+S:L));let I=-1,P=Number.POSITIVE_INFINITY;for(const[L,C]of _.entries())C!==void 0&&(I===-1||C<P)&&(I=L,P=C);if(I<0)throw new Error(`All actors rejected their test in ${this.name}
${g.map(L=>L.message).join(`
`)}`);const B=p[I].actor;return B.includeInLogs&&d.Actor.getContextLogger(u.context)?.debug(`Determined physical join operator '${B.logicalType}-${B.physicalName}'`,{entries:u.entries.length,variables:await Promise.all(u.entries.map(async L=>(await L.output.metadata()).variables.map(C=>C.value))),costs:Object.fromEntries(_.map((L,C)=>[`${p[C].actor.logicalType}-${p[C].actor.physicalName}`,L])),coefficients:Object.fromEntries(b.map((L,C)=>[`${p[C].actor.logicalType}-${p[C].actor.physicalName}`,L]))}),B}}e.MediatorJoinCoefficientsFixed=h},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js"),e)},"../node_modules/@comunica/mediator-number/lib/MediatorNumber.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorNumber=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Mediator{constructor(l){super(l),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return l=>l.reduce((u,p,g)=>{const v=this.getOrDefault(p[this.field],Number.POSITIVE_INFINITY);return v!==null&&(Number.isNaN(u[0])||u[0]>v)?[v,g]:u},[Number.NaN,-1])[1];case"max":return l=>l.reduce((u,p,g)=>{const v=this.getOrDefault(p[this.field],Number.NEGATIVE_INFINITY);return v!==null&&(Number.isNaN(u[0])||u[0]<v)?[v,g]:u},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(l,u){return l===void 0?u:l}async mediateWith(l,u){let p=u.map(({reply:_})=>_);const g=[];if(this.ignoreErrors){const _={};_[this.field]=null,p=p.map(S=>S.catch(T=>(g.push(T),_)))}const v=await Promise.all(p),b=this.indexPicker(v);if(b<0)throw new Error(`All actors rejected their test in ${this.name}
${g.map(_=>_.message).join(`
`)}`);return u[b].actor}}e.MediatorNumber=d},"../node_modules/@comunica/mediator-number/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/mediator-number/lib/MediatorNumber.js"),e)},"../node_modules/@comunica/mediator-race/lib/MediatorRace.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorRace=void 0;const o=n("../node_modules/@comunica/core/lib/index.js");class d extends o.Mediator{constructor(l){super(l)}mediateWith(l,u){return new Promise((p,g)=>{const v=[];for(const b of u)b.reply.then(()=>{p(b.actor)}).catch(_=>{v.push(_),v.length===u.length&&g(new Error(`${this.name} mediated over all rejecting actors:
${v.map(S=>S.message).join(`
`)}`))})})}}e.MediatorRace=d},"../node_modules/@comunica/mediator-race/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/mediator-race/lib/MediatorRace.js"),e)},"../node_modules/@comunica/types/lib/Bindings.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IActionContext.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IAggregatedStore.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/ICliArgsHandler.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataDestination.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataSource.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IJoinEntry.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IMetadata.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IProxyHandler.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryContext.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryEngine.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryOperationResult.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/Logger.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;class n{static getLevelOrdinal(d){return n.LEVELS[d]}}e.Logger=n,n.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5}},"../node_modules/@comunica/types/lib/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/@comunica/types/lib/Bindings.js"),e),d(n("../node_modules/@comunica/types/lib/IActionContext.js"),e),d(n("../node_modules/@comunica/types/lib/IAggregatedStore.js"),e),d(n("../node_modules/@comunica/types/lib/ICliArgsHandler.js"),e),d(n("../node_modules/@comunica/types/lib/IDataDestination.js"),e),d(n("../node_modules/@comunica/types/lib/IDataSource.js"),e),d(n("../node_modules/@comunica/types/lib/IJoinEntry.js"),e),d(n("../node_modules/@comunica/types/lib/IMetadata.js"),e),d(n("../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js"),e),d(n("../node_modules/@comunica/types/lib/IProxyHandler.js"),e),d(n("../node_modules/@comunica/types/lib/IQueryContext.js"),e),d(n("../node_modules/@comunica/types/lib/IQueryEngine.js"),e),d(n("../node_modules/@comunica/types/lib/IQueryOperationResult.js"),e),d(n("../node_modules/@comunica/types/lib/Logger.js"),e)},"../node_modules/asyncjoin/index.js":(t,e,n)=>{const o=n("../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js"),d=n("../node_modules/asyncjoin/join/HashJoin.js"),h=n("../node_modules/asyncjoin/join/NestedLoopJoin.js"),l=n("../node_modules/asyncjoin/join/SymmetricHashJoin.js"),u=n("../node_modules/asyncjoin/util/MergeIterator.js");t.exports={DynamicNestedLoopJoin:o,HashJoin:d,NestedLoopJoin:h,SymmetricHashJoin:l,MergeStream:u}},"../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js":(t,e,n)=>{let o=n("asynciterator"),d=o.MultiTransformIterator,h=o.SimpleTransformIterator;class l extends d{constructor(p,g,v,b){super(p,b),this.funRight=g,this.funJoin=v}_createTransformer(p){return new h(this.funRight(p),{transform:(g,v,b)=>{let _=this.funJoin(p,g);_!==null&&b(_),v()}})}}t.exports=l},"../node_modules/asyncjoin/join/HashJoin.js":(t,e,n)=>{let o=n("asynciterator").AsyncIterator;class d extends o{constructor(l,u,p,g){super(),this.addedDataListener=!1,this.left=l,this.right=u,this.funHash=p,this.funJoin=g,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",b=>this.destroy(b)),this.right.on("error",b=>this.destroy(b)),this.readable=!1,this.left.on("end",v.bind(this));function v(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",b=>{b==="data"&&!this.addedDataListener&&(this.addedDataListener=!0,this._addDataListener())})}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener());;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let u=this.matches[this.matchIdx++],p=this.funJoin(u,this.match);if(p!==null)return p}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let l=this.funHash(this.match);this.matches=this.leftMap.get(l)||[],this.matchIdx=0}}_addDataListener(){this.left.on("data",l.bind(this));function l(u){let p=this.funHash(u);this.leftMap.has(p)||this.leftMap.set(p,[]),this.leftMap.get(p).push(u)}}}t.exports=d},"../node_modules/asyncjoin/join/NestedLoopJoin.js":(t,e,n)=>{const{MultiTransformIterator:o,SimpleTransformIterator:d,scheduleTask:h}=n("asynciterator");class l extends o{constructor(p,g,v,b){super(p,b),this.right=g,this.funJoin=v,this.on("end",()=>this.right.close())}_end(){super._end(),h(()=>this.right.destroy())}_createTransformer(p){return new d(this.right.clone(),{transform:(g,v,b)=>{let _=this.funJoin(p,g);_!==null&&b(_),v()}})}}t.exports=l},"../node_modules/asyncjoin/join/SymmetricHashJoin.js":(t,e,n)=>{let o=n("asynciterator").AsyncIterator;class d extends o{constructor(l,u,p,g){super(),this.left=l,this.right=u,this.funHash=p,this.funJoin=g,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",v=>this.destroy(v)),this.right.on("error",v=>this.destroy(v)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let v=this.matches[this.matchIdx++],b=this.usedLeft?this.funJoin(this.match,v):this.funJoin(v,this.match);if(b!==null)return b}this.hasResults()||this._end();let l=null;for(let v=0;v<2&&(l=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,l===null);++v);if(this.done||l===null)return this.readable=!1,null;let u=this.funHash(l),p=this.usedLeft?this.leftMap:this.rightMap;return p.has(u)||p.set(u,[]),p.get(u).push(l),this.match=l,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(u)||[],this.matchIdx=0,this.read()}}t.exports=d},"../node_modules/asyncjoin/util/MergeIterator.js":(t,e,n)=>{let o=n("asynciterator").AsyncIterator;class d extends o{constructor(l){super(),Array.isArray(l)||(l=Array.prototype.slice.call(arguments)),this.streams=l;for(let u of l)u.on("readable",()=>this.emit("readable")),u.on("end",()=>this._removeStream(u));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(l){let u=this.streams.indexOf(l);u<0||(this.streams.splice(u,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let l of this.streams)l.close()}read(){for(let l=0;l<this.streams.length;++l){this.idx=(this.idx+1)%this.streams.length;let u=this.streams[this.idx].read();if(u!==null)return u}return null}}t.exports=d},"../node_modules/bignumber.js/bignumber.js":function(t,e,n){var o;(function(d){var h,l=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,u=Math.ceil,p=Math.floor,g="[BigNumber Error] ",v=g+"Number primitive has more than 15 significant digits: ",b=1e14,_=14,S=9007199254740991,T=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],I=1e7,P=1e9;function B(ae){var X,G,re,F=ve.prototype={constructor:ve,toString:null,valueOf:null},$=new ve(1),U=20,H=4,ee=-7,ge=21,me=-1e7,fe=1e7,he=!1,_e=1,xe=0,Ne={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ie="0123456789abcdefghijklmnopqrstuvwxyz",Pe=!0;function ve(q,oe){var Q,Y,ie,se,le,ne,ue,de,pe=this;if(!(pe instanceof ve))return new ve(q,oe);if(oe==null){if(q&&q._isBigNumber===!0){pe.s=q.s,!q.c||q.e>fe?pe.c=pe.e=null:q.e<me?pe.c=[pe.e=0]:(pe.e=q.e,pe.c=q.c.slice());return}if((ne=typeof q=="number")&&q*0==0){if(pe.s=1/q<0?(q=-q,-1):1,q===~~q){for(se=0,le=q;le>=10;le/=10,se++);se>fe?pe.c=pe.e=null:(pe.e=se,pe.c=[q]);return}de=String(q)}else{if(!l.test(de=String(q)))return re(pe,de,ne);pe.s=de.charCodeAt(0)==45?(de=de.slice(1),-1):1}(se=de.indexOf("."))>-1&&(de=de.replace(".","")),(le=de.search(/e/i))>0?(se<0&&(se=le),se+=+de.slice(le+1),de=de.substring(0,le)):se<0&&(se=de.length)}else{if(N(oe,2,Ie.length,"Base"),oe==10&&Pe)return pe=new ve(q),Me(pe,U+pe.e+1,H);if(de=String(q),ne=typeof q=="number"){if(q*0!=0)return re(pe,de,ne,oe);if(pe.s=1/q<0?(de=de.slice(1),-1):1,ve.DEBUG&&de.replace(/^0\.0*|\./,"").length>15)throw Error(v+q)}else pe.s=de.charCodeAt(0)===45?(de=de.slice(1),-1):1;for(Q=Ie.slice(0,oe),se=le=0,ue=de.length;le<ue;le++)if(Q.indexOf(Y=de.charAt(le))<0){if(Y=="."){if(le>se){se=ue;continue}}else if(!ie&&(de==de.toUpperCase()&&(de=de.toLowerCase())||de==de.toLowerCase()&&(de=de.toUpperCase()))){ie=!0,le=-1,se=0;continue}return re(pe,String(q),ne,oe)}ne=!1,de=G(de,oe,10,pe.s),(se=de.indexOf("."))>-1?de=de.replace(".",""):se=de.length}for(le=0;de.charCodeAt(le)===48;le++);for(ue=de.length;de.charCodeAt(--ue)===48;);if(de=de.slice(le,++ue)){if(ue-=le,ne&&ve.DEBUG&&ue>15&&(q>S||q!==p(q)))throw Error(v+pe.s*q);if((se=se-le-1)>fe)pe.c=pe.e=null;else if(se<me)pe.c=[pe.e=0];else{if(pe.e=se,pe.c=[],le=(se+1)%_,se<0&&(le+=_),le<ue){for(le&&pe.c.push(+de.slice(0,le)),ue-=_;le<ue;)pe.c.push(+de.slice(le,le+=_));le=_-(de=de.slice(le)).length}else le-=ue;for(;le--;de+="0");pe.c.push(+de)}}else pe.c=[pe.e=0]}ve.clone=B,ve.ROUND_UP=0,ve.ROUND_DOWN=1,ve.ROUND_CEIL=2,ve.ROUND_FLOOR=3,ve.ROUND_HALF_UP=4,ve.ROUND_HALF_DOWN=5,ve.ROUND_HALF_EVEN=6,ve.ROUND_HALF_CEIL=7,ve.ROUND_HALF_FLOOR=8,ve.EUCLID=9,ve.config=ve.set=function(q){var oe,Q;if(q!=null)if(typeof q=="object"){if(q.hasOwnProperty(oe="DECIMAL_PLACES")&&(Q=q[oe],N(Q,0,P,oe),U=Q),q.hasOwnProperty(oe="ROUNDING_MODE")&&(Q=q[oe],N(Q,0,8,oe),H=Q),q.hasOwnProperty(oe="EXPONENTIAL_AT")&&(Q=q[oe],Q&&Q.pop?(N(Q[0],-P,0,oe),N(Q[1],0,P,oe),ee=Q[0],ge=Q[1]):(N(Q,-P,P,oe),ee=-(ge=Q<0?-Q:Q))),q.hasOwnProperty(oe="RANGE"))if(Q=q[oe],Q&&Q.pop)N(Q[0],-P,-1,oe),N(Q[1],1,P,oe),me=Q[0],fe=Q[1];else if(N(Q,-P,P,oe),Q)me=-(fe=Q<0?-Q:Q);else throw Error(g+oe+" cannot be zero: "+Q);if(q.hasOwnProperty(oe="CRYPTO"))if(Q=q[oe],Q===!!Q)if(Q)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))he=Q;else throw he=!Q,Error(g+"crypto unavailable");else he=Q;else throw Error(g+oe+" not true or false: "+Q);if(q.hasOwnProperty(oe="MODULO_MODE")&&(Q=q[oe],N(Q,0,9,oe),_e=Q),q.hasOwnProperty(oe="POW_PRECISION")&&(Q=q[oe],N(Q,0,P,oe),xe=Q),q.hasOwnProperty(oe="FORMAT"))if(Q=q[oe],typeof Q=="object")Ne=Q;else throw Error(g+oe+" not an object: "+Q);if(q.hasOwnProperty(oe="ALPHABET"))if(Q=q[oe],typeof Q=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(Q))Pe=Q.slice(0,10)=="0123456789",Ie=Q;else throw Error(g+oe+" invalid: "+Q)}else throw Error(g+"Object expected: "+q);return{DECIMAL_PLACES:U,ROUNDING_MODE:H,EXPONENTIAL_AT:[ee,ge],RANGE:[me,fe],CRYPTO:he,MODULO_MODE:_e,POW_PRECISION:xe,FORMAT:Ne,ALPHABET:Ie}},ve.isBigNumber=function(q){if(!q||q._isBigNumber!==!0)return!1;if(!ve.DEBUG)return!0;var oe,Q,Y=q.c,ie=q.e,se=q.s;e:if({}.toString.call(Y)=="[object Array]"){if((se===1||se===-1)&&ie>=-P&&ie<=P&&ie===p(ie)){if(Y[0]===0){if(ie===0&&Y.length===1)return!0;break e}if(oe=(ie+1)%_,oe<1&&(oe+=_),String(Y[0]).length==oe){for(oe=0;oe<Y.length;oe++)if(Q=Y[oe],Q<0||Q>=b||Q!==p(Q))break e;if(Q!==0)return!0}}}else if(Y===null&&ie===null&&(se===null||se===1||se===-1))return!0;throw Error(g+"Invalid BigNumber: "+q)},ve.maximum=ve.max=function(){return Fe(arguments,F.lt)},ve.minimum=ve.min=function(){return Fe(arguments,F.gt)},ve.random=function(){var q=9007199254740992,oe=Math.random()*q&2097151?function(){return p(Math.random()*q)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(Q){var Y,ie,se,le,ne,ue=0,de=[],pe=new ve($);if(Q==null?Q=U:N(Q,0,P),le=u(Q/_),he)if(crypto.getRandomValues){for(Y=crypto.getRandomValues(new Uint32Array(le*=2));ue<le;)ne=Y[ue]*131072+(Y[ue+1]>>>11),ne>=9e15?(ie=crypto.getRandomValues(new Uint32Array(2)),Y[ue]=ie[0],Y[ue+1]=ie[1]):(de.push(ne%1e14),ue+=2);ue=le/2}else if(crypto.randomBytes){for(Y=crypto.randomBytes(le*=7);ue<le;)ne=(Y[ue]&31)*281474976710656+Y[ue+1]*1099511627776+Y[ue+2]*4294967296+Y[ue+3]*16777216+(Y[ue+4]<<16)+(Y[ue+5]<<8)+Y[ue+6],ne>=9e15?crypto.randomBytes(7).copy(Y,ue):(de.push(ne%1e14),ue+=7);ue=le/7}else throw he=!1,Error(g+"crypto unavailable");if(!he)for(;ue<le;)ne=oe(),ne<9e15&&(de[ue++]=ne%1e14);for(le=de[--ue],Q%=_,le&&Q&&(ne=T[_-Q],de[ue]=p(le/ne)*ne);de[ue]===0;de.pop(),ue--);if(ue<0)de=[se=0];else{for(se=-1;de[0]===0;de.splice(0,1),se-=_);for(ue=1,ne=de[0];ne>=10;ne/=10,ue++);ue<_&&(se-=_-ue)}return pe.e=se,pe.c=de,pe}}(),ve.sum=function(){for(var q=1,oe=arguments,Q=new ve(oe[0]);q<oe.length;)Q=Q.plus(oe[q++]);return Q},G=function(){var q="0123456789";function oe(Q,Y,ie,se){for(var le,ne=[0],ue,de=0,pe=Q.length;de<pe;){for(ue=ne.length;ue--;ne[ue]*=Y);for(ne[0]+=se.indexOf(Q.charAt(de++)),le=0;le<ne.length;le++)ne[le]>ie-1&&(ne[le+1]==null&&(ne[le+1]=0),ne[le+1]+=ne[le]/ie|0,ne[le]%=ie)}return ne.reverse()}return function(Q,Y,ie,se,le){var ne,ue,de,pe,be,we,Se,j,w=Q.indexOf("."),E=U,D=H;for(w>=0&&(pe=xe,xe=0,Q=Q.replace(".",""),j=new ve(Y),we=j.pow(Q.length-w),xe=pe,j.c=oe(W(C(we.c),we.e,"0"),10,ie,q),j.e=j.c.length),Se=oe(Q,Y,ie,le?(ne=Ie,q):(ne=q,Ie)),de=pe=Se.length;Se[--pe]==0;Se.pop());if(!Se[0])return ne.charAt(0);if(w<0?--de:(we.c=Se,we.e=de,we.s=se,we=X(we,j,E,D,ie),Se=we.c,be=we.r,de=we.e),ue=de+E+1,w=Se[ue],pe=ie/2,be=be||ue<0||Se[ue+1]!=null,be=D<4?(w!=null||be)&&(D==0||D==(we.s<0?3:2)):w>pe||w==pe&&(D==4||be||D==6&&Se[ue-1]&1||D==(we.s<0?8:7)),ue<1||!Se[0])Q=be?W(ne.charAt(1),-E,ne.charAt(0)):ne.charAt(0);else{if(Se.length=ue,be)for(--ie;++Se[--ue]>ie;)Se[ue]=0,ue||(++de,Se=[1].concat(Se));for(pe=Se.length;!Se[--pe];);for(w=0,Q="";w<=pe;Q+=ne.charAt(Se[w++]));Q=W(Q,de,ne.charAt(0))}return Q}}(),X=function(){function q(Y,ie,se){var le,ne,ue,de,pe=0,be=Y.length,we=ie%I,Se=ie/I|0;for(Y=Y.slice();be--;)ue=Y[be]%I,de=Y[be]/I|0,le=Se*ue+de*we,ne=we*ue+le%I*I+pe,pe=(ne/se|0)+(le/I|0)+Se*de,Y[be]=ne%se;return pe&&(Y=[pe].concat(Y)),Y}function oe(Y,ie,se,le){var ne,ue;if(se!=le)ue=se>le?1:-1;else for(ne=ue=0;ne<se;ne++)if(Y[ne]!=ie[ne]){ue=Y[ne]>ie[ne]?1:-1;break}return ue}function Q(Y,ie,se,le){for(var ne=0;se--;)Y[se]-=ne,ne=Y[se]<ie[se]?1:0,Y[se]=ne*le+Y[se]-ie[se];for(;!Y[0]&&Y.length>1;Y.splice(0,1));}return function(Y,ie,se,le,ne){var ue,de,pe,be,we,Se,j,w,E,D,V,Z,ce,Ae,ke,Be,De,Ce=Y.s==ie.s?1:-1,Ke=Y.c,We=ie.c;if(!Ke||!Ke[0]||!We||!We[0])return new ve(!Y.s||!ie.s||(Ke?We&&Ke[0]==We[0]:!We)?NaN:Ke&&Ke[0]==0||!We?Ce*0:Ce/0);for(w=new ve(Ce),E=w.c=[],de=Y.e-ie.e,Ce=se+de+1,ne||(ne=b,de=L(Y.e/_)-L(ie.e/_),Ce=Ce/_|0),pe=0;We[pe]==(Ke[pe]||0);pe++);if(We[pe]>(Ke[pe]||0)&&de--,Ce<0)E.push(1),be=!0;else{for(Ae=Ke.length,Be=We.length,pe=0,Ce+=2,we=p(ne/(We[0]+1)),we>1&&(We=q(We,we,ne),Ke=q(Ke,we,ne),Be=We.length,Ae=Ke.length),ce=Be,D=Ke.slice(0,Be),V=D.length;V<Be;D[V++]=0);De=We.slice(),De=[0].concat(De),ke=We[0],We[1]>=ne/2&&ke++;do{if(we=0,ue=oe(We,D,Be,V),ue<0){if(Z=D[0],Be!=V&&(Z=Z*ne+(D[1]||0)),we=p(Z/ke),we>1)for(we>=ne&&(we=ne-1),Se=q(We,we,ne),j=Se.length,V=D.length;oe(Se,D,j,V)==1;)we--,Q(Se,Be<j?De:We,j,ne),j=Se.length,ue=1;else we==0&&(ue=we=1),Se=We.slice(),j=Se.length;if(j<V&&(Se=[0].concat(Se)),Q(D,Se,V,ne),V=D.length,ue==-1)for(;oe(We,D,Be,V)<1;)we++,Q(D,Be<V?De:We,V,ne),V=D.length}else ue===0&&(we++,D=[0]);E[pe++]=we,D[0]?D[V++]=Ke[ce]||0:(D=[Ke[ce]],V=1)}while((ce++<Ae||D[0]!=null)&&Ce--);be=D[0]!=null,E[0]||E.splice(0,1)}if(ne==b){for(pe=1,Ce=E[0];Ce>=10;Ce/=10,pe++);Me(w,se+(w.e=pe+de*_-1)+1,le,be)}else w.e=de,w.r=+be;return w}}();function Le(q,oe,Q,Y){var ie,se,le,ne,ue;if(Q==null?Q=H:N(Q,0,8),!q.c)return q.toString();if(ie=q.c[0],le=q.e,oe==null)ue=C(q.c),ue=Y==1||Y==2&&(le<=ee||le>=ge)?k(ue,le):W(ue,le,"0");else if(q=Me(new ve(q),oe,Q),se=q.e,ue=C(q.c),ne=ue.length,Y==1||Y==2&&(oe<=se||se<=ee)){for(;ne<oe;ue+="0",ne++);ue=k(ue,se)}else if(oe-=le,ue=W(ue,se,"0"),se+1>ne){if(--oe>0)for(ue+=".";oe--;ue+="0");}else if(oe+=se-ne,oe>0)for(se+1==ne&&(ue+=".");oe--;ue+="0");return q.s<0&&ie?"-"+ue:ue}function Fe(q,oe){for(var Q,Y=1,ie=new ve(q[0]);Y<q.length;Y++)if(Q=new ve(q[Y]),Q.s)oe.call(ie,Q)&&(ie=Q);else{ie=Q;break}return ie}function Ue(q,oe,Q){for(var Y=1,ie=oe.length;!oe[--ie];oe.pop());for(ie=oe[0];ie>=10;ie/=10,Y++);return(Q=Y+Q*_-1)>fe?q.c=q.e=null:Q<me?q.c=[q.e=0]:(q.e=Q,q.c=oe),q}re=function(){var q=/^(-?)0([xbo])(?=\w[\w.]*$)/i,oe=/^([^.]+)\.$/,Q=/^\.([^.]+)$/,Y=/^-?(Infinity|NaN)$/,ie=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(se,le,ne,ue){var de,pe=ne?le:le.replace(ie,"");if(Y.test(pe))se.s=isNaN(pe)?null:pe<0?-1:1;else{if(!ne&&(pe=pe.replace(q,function(be,we,Se){return de=(Se=Se.toLowerCase())=="x"?16:Se=="b"?2:8,!ue||ue==de?we:be}),ue&&(de=ue,pe=pe.replace(oe,"$1").replace(Q,"0.$1")),le!=pe))return new ve(pe,de);if(ve.DEBUG)throw Error(g+"Not a"+(ue?" base "+ue:"")+" number: "+le);se.s=null}se.c=se.e=null}}();function Me(q,oe,Q,Y){var ie,se,le,ne,ue,de,pe,be=q.c,we=T;if(be){e:{for(ie=1,ne=be[0];ne>=10;ne/=10,ie++);if(se=oe-ie,se<0)se+=_,le=oe,ue=be[de=0],pe=ue/we[ie-le-1]%10|0;else if(de=u((se+1)/_),de>=be.length)if(Y){for(;be.length<=de;be.push(0));ue=pe=0,ie=1,se%=_,le=se-_+1}else break e;else{for(ue=ne=be[de],ie=1;ne>=10;ne/=10,ie++);se%=_,le=se-_+ie,pe=le<0?0:ue/we[ie-le-1]%10|0}if(Y=Y||oe<0||be[de+1]!=null||(le<0?ue:ue%we[ie-le-1]),Y=Q<4?(pe||Y)&&(Q==0||Q==(q.s<0?3:2)):pe>5||pe==5&&(Q==4||Y||Q==6&&(se>0?le>0?ue/we[ie-le]:0:be[de-1])%10&1||Q==(q.s<0?8:7)),oe<1||!be[0])return be.length=0,Y?(oe-=q.e+1,be[0]=we[(_-oe%_)%_],q.e=-oe||0):be[0]=q.e=0,q;if(se==0?(be.length=de,ne=1,de--):(be.length=de+1,ne=we[_-se],be[de]=le>0?p(ue/we[ie-le]%we[le])*ne:0),Y)for(;;)if(de==0){for(se=1,le=be[0];le>=10;le/=10,se++);for(le=be[0]+=ne,ne=1;le>=10;le/=10,ne++);se!=ne&&(q.e++,be[0]==b&&(be[0]=1));break}else{if(be[de]+=ne,be[de]!=b)break;be[de--]=0,ne=1}for(se=be.length;be[--se]===0;be.pop());}q.e>fe?q.c=q.e=null:q.e<me&&(q.c=[q.e=0])}return q}function $e(q){var oe,Q=q.e;return Q===null?q.toString():(oe=C(q.c),oe=Q<=ee||Q>=ge?k(oe,Q):W(oe,Q,"0"),q.s<0?"-"+oe:oe)}return F.absoluteValue=F.abs=function(){var q=new ve(this);return q.s<0&&(q.s=1),q},F.comparedTo=function(q,oe){return O(this,new ve(q,oe))},F.decimalPlaces=F.dp=function(q,oe){var Q,Y,ie,se=this;if(q!=null)return N(q,0,P),oe==null?oe=H:N(oe,0,8),Me(new ve(se),q+se.e+1,oe);if(!(Q=se.c))return null;if(Y=((ie=Q.length-1)-L(this.e/_))*_,ie=Q[ie])for(;ie%10==0;ie/=10,Y--);return Y<0&&(Y=0),Y},F.dividedBy=F.div=function(q,oe){return X(this,new ve(q,oe),U,H)},F.dividedToIntegerBy=F.idiv=function(q,oe){return X(this,new ve(q,oe),0,1)},F.exponentiatedBy=F.pow=function(q,oe){var Q,Y,ie,se,le,ne,ue,de,pe,be=this;if(q=new ve(q),q.c&&!q.isInteger())throw Error(g+"Exponent not an integer: "+$e(q));if(oe!=null&&(oe=new ve(oe)),ne=q.e>14,!be.c||!be.c[0]||be.c[0]==1&&!be.e&&be.c.length==1||!q.c||!q.c[0])return pe=new ve(Math.pow(+$e(be),ne?q.s*(2-M(q)):+$e(q))),oe?pe.mod(oe):pe;if(ue=q.s<0,oe){if(oe.c?!oe.c[0]:!oe.s)return new ve(NaN);Y=!ue&&be.isInteger()&&oe.isInteger(),Y&&(be=be.mod(oe))}else{if(q.e>9&&(be.e>0||be.e<-1||(be.e==0?be.c[0]>1||ne&&be.c[1]>=24e7:be.c[0]<8e13||ne&&be.c[0]<=9999975e7)))return se=be.s<0&&M(q)?-0:0,be.e>-1&&(se=1/se),new ve(ue?1/se:se);xe&&(se=u(xe/_+2))}for(ne?(Q=new ve(.5),ue&&(q.s=1),de=M(q)):(ie=Math.abs(+$e(q)),de=ie%2),pe=new ve($);;){if(de){if(pe=pe.times(be),!pe.c)break;se?pe.c.length>se&&(pe.c.length=se):Y&&(pe=pe.mod(oe))}if(ie){if(ie=p(ie/2),ie===0)break;de=ie%2}else if(q=q.times(Q),Me(q,q.e+1,1),q.e>14)de=M(q);else{if(ie=+$e(q),ie===0)break;de=ie%2}be=be.times(be),se?be.c&&be.c.length>se&&(be.c.length=se):Y&&(be=be.mod(oe))}return Y?pe:(ue&&(pe=$.div(pe)),oe?pe.mod(oe):se?Me(pe,xe,H,le):pe)},F.integerValue=function(q){var oe=new ve(this);return q==null?q=H:N(q,0,8),Me(oe,oe.e+1,q)},F.isEqualTo=F.eq=function(q,oe){return O(this,new ve(q,oe))===0},F.isFinite=function(){return!!this.c},F.isGreaterThan=F.gt=function(q,oe){return O(this,new ve(q,oe))>0},F.isGreaterThanOrEqualTo=F.gte=function(q,oe){return(oe=O(this,new ve(q,oe)))===1||oe===0},F.isInteger=function(){return!!this.c&&L(this.e/_)>this.c.length-2},F.isLessThan=F.lt=function(q,oe){return O(this,new ve(q,oe))<0},F.isLessThanOrEqualTo=F.lte=function(q,oe){return(oe=O(this,new ve(q,oe)))===-1||oe===0},F.isNaN=function(){return!this.s},F.isNegative=function(){return this.s<0},F.isPositive=function(){return this.s>0},F.isZero=function(){return!!this.c&&this.c[0]==0},F.minus=function(q,oe){var Q,Y,ie,se,le=this,ne=le.s;if(q=new ve(q,oe),oe=q.s,!ne||!oe)return new ve(NaN);if(ne!=oe)return q.s=-oe,le.plus(q);var ue=le.e/_,de=q.e/_,pe=le.c,be=q.c;if(!ue||!de){if(!pe||!be)return pe?(q.s=-oe,q):new ve(be?le:NaN);if(!pe[0]||!be[0])return be[0]?(q.s=-oe,q):new ve(pe[0]?le:H==3?-0:0)}if(ue=L(ue),de=L(de),pe=pe.slice(),ne=ue-de){for((se=ne<0)?(ne=-ne,ie=pe):(de=ue,ie=be),ie.reverse(),oe=ne;oe--;ie.push(0));ie.reverse()}else for(Y=(se=(ne=pe.length)<(oe=be.length))?ne:oe,ne=oe=0;oe<Y;oe++)if(pe[oe]!=be[oe]){se=pe[oe]<be[oe];break}if(se&&(ie=pe,pe=be,be=ie,q.s=-q.s),oe=(Y=be.length)-(Q=pe.length),oe>0)for(;oe--;pe[Q++]=0);for(oe=b-1;Y>ne;){if(pe[--Y]<be[Y]){for(Q=Y;Q&&!pe[--Q];pe[Q]=oe);--pe[Q],pe[Y]+=b}pe[Y]-=be[Y]}for(;pe[0]==0;pe.splice(0,1),--de);return pe[0]?Ue(q,pe,de):(q.s=H==3?-1:1,q.c=[q.e=0],q)},F.modulo=F.mod=function(q,oe){var Q,Y,ie=this;return q=new ve(q,oe),!ie.c||!q.s||q.c&&!q.c[0]?new ve(NaN):!q.c||ie.c&&!ie.c[0]?new ve(ie):(_e==9?(Y=q.s,q.s=1,Q=X(ie,q,0,3),q.s=Y,Q.s*=Y):Q=X(ie,q,0,_e),q=ie.minus(Q.times(q)),!q.c[0]&&_e==1&&(q.s=ie.s),q)},F.multipliedBy=F.times=function(q,oe){var Q,Y,ie,se,le,ne,ue,de,pe,be,we,Se,j,w,E,D=this,V=D.c,Z=(q=new ve(q,oe)).c;if(!V||!Z||!V[0]||!Z[0])return!D.s||!q.s||V&&!V[0]&&!Z||Z&&!Z[0]&&!V?q.c=q.e=q.s=null:(q.s*=D.s,!V||!Z?q.c=q.e=null:(q.c=[0],q.e=0)),q;for(Y=L(D.e/_)+L(q.e/_),q.s*=D.s,ue=V.length,be=Z.length,ue<be&&(j=V,V=Z,Z=j,ie=ue,ue=be,be=ie),ie=ue+be,j=[];ie--;j.push(0));for(w=b,E=I,ie=be;--ie>=0;){for(Q=0,we=Z[ie]%E,Se=Z[ie]/E|0,le=ue,se=ie+le;se>ie;)de=V[--le]%E,pe=V[le]/E|0,ne=Se*de+pe*we,de=we*de+ne%E*E+j[se]+Q,Q=(de/w|0)+(ne/E|0)+Se*pe,j[se--]=de%w;j[se]=Q}return Q?++Y:j.splice(0,1),Ue(q,j,Y)},F.negated=function(){var q=new ve(this);return q.s=-q.s||null,q},F.plus=function(q,oe){var Q,Y=this,ie=Y.s;if(q=new ve(q,oe),oe=q.s,!ie||!oe)return new ve(NaN);if(ie!=oe)return q.s=-oe,Y.minus(q);var se=Y.e/_,le=q.e/_,ne=Y.c,ue=q.c;if(!se||!le){if(!ne||!ue)return new ve(ie/0);if(!ne[0]||!ue[0])return ue[0]?q:new ve(ne[0]?Y:ie*0)}if(se=L(se),le=L(le),ne=ne.slice(),ie=se-le){for(ie>0?(le=se,Q=ue):(ie=-ie,Q=ne),Q.reverse();ie--;Q.push(0));Q.reverse()}for(ie=ne.length,oe=ue.length,ie-oe<0&&(Q=ue,ue=ne,ne=Q,oe=ie),ie=0;oe;)ie=(ne[--oe]=ne[oe]+ue[oe]+ie)/b|0,ne[oe]=b===ne[oe]?0:ne[oe]%b;return ie&&(ne=[ie].concat(ne),++le),Ue(q,ne,le)},F.precision=F.sd=function(q,oe){var Q,Y,ie,se=this;if(q!=null&&q!==!!q)return N(q,1,P),oe==null?oe=H:N(oe,0,8),Me(new ve(se),q,oe);if(!(Q=se.c))return null;if(ie=Q.length-1,Y=ie*_+1,ie=Q[ie]){for(;ie%10==0;ie/=10,Y--);for(ie=Q[0];ie>=10;ie/=10,Y++);}return q&&se.e+1>Y&&(Y=se.e+1),Y},F.shiftedBy=function(q){return N(q,-S,S),this.times("1e"+q)},F.squareRoot=F.sqrt=function(){var q,oe,Q,Y,ie,se=this,le=se.c,ne=se.s,ue=se.e,de=U+4,pe=new ve("0.5");if(ne!==1||!le||!le[0])return new ve(!ne||ne<0&&(!le||le[0])?NaN:le?se:1/0);if(ne=Math.sqrt(+$e(se)),ne==0||ne==1/0?(oe=C(le),(oe.length+ue)%2==0&&(oe+="0"),ne=Math.sqrt(+oe),ue=L((ue+1)/2)-(ue<0||ue%2),ne==1/0?oe="5e"+ue:(oe=ne.toExponential(),oe=oe.slice(0,oe.indexOf("e")+1)+ue),Q=new ve(oe)):Q=new ve(ne+""),Q.c[0]){for(ue=Q.e,ne=ue+de,ne<3&&(ne=0);;)if(ie=Q,Q=pe.times(ie.plus(X(se,ie,de,1))),C(ie.c).slice(0,ne)===(oe=C(Q.c)).slice(0,ne))if(Q.e<ue&&--ne,oe=oe.slice(ne-3,ne+1),oe=="9999"||!Y&&oe=="4999"){if(!Y&&(Me(ie,ie.e+U+2,0),ie.times(ie).eq(se))){Q=ie;break}de+=4,ne+=4,Y=1}else{(!+oe||!+oe.slice(1)&&oe.charAt(0)=="5")&&(Me(Q,Q.e+U+2,1),q=!Q.times(Q).eq(se));break}}return Me(Q,Q.e+U+1,H,q)},F.toExponential=function(q,oe){return q!=null&&(N(q,0,P),q++),Le(this,q,oe,1)},F.toFixed=function(q,oe){return q!=null&&(N(q,0,P),q=q+this.e+1),Le(this,q,oe)},F.toFormat=function(q,oe,Q){var Y,ie=this;if(Q==null)q!=null&&oe&&typeof oe=="object"?(Q=oe,oe=null):q&&typeof q=="object"?(Q=q,q=oe=null):Q=Ne;else if(typeof Q!="object")throw Error(g+"Argument not an object: "+Q);if(Y=ie.toFixed(q,oe),ie.c){var se,le=Y.split("."),ne=+Q.groupSize,ue=+Q.secondaryGroupSize,de=Q.groupSeparator||"",pe=le[0],be=le[1],we=ie.s<0,Se=we?pe.slice(1):pe,j=Se.length;if(ue&&(se=ne,ne=ue,ue=se,j-=se),ne>0&&j>0){for(se=j%ne||ne,pe=Se.substr(0,se);se<j;se+=ne)pe+=de+Se.substr(se,ne);ue>0&&(pe+=de+Se.slice(se)),we&&(pe="-"+pe)}Y=be?pe+(Q.decimalSeparator||"")+((ue=+Q.fractionGroupSize)?be.replace(new RegExp("\\d{"+ue+"}\\B","g"),"$&"+(Q.fractionGroupSeparator||"")):be):pe}return(Q.prefix||"")+Y+(Q.suffix||"")},F.toFraction=function(q){var oe,Q,Y,ie,se,le,ne,ue,de,pe,be,we,Se=this,j=Se.c;if(q!=null&&(ne=new ve(q),!ne.isInteger()&&(ne.c||ne.s!==1)||ne.lt($)))throw Error(g+"Argument "+(ne.isInteger()?"out of range: ":"not an integer: ")+$e(ne));if(!j)return new ve(Se);for(oe=new ve($),de=Q=new ve($),Y=ue=new ve($),we=C(j),se=oe.e=we.length-Se.e-1,oe.c[0]=T[(le=se%_)<0?_+le:le],q=!q||ne.comparedTo(oe)>0?se>0?oe:de:ne,le=fe,fe=1/0,ne=new ve(we),ue.c[0]=0;pe=X(ne,oe,0,1),ie=Q.plus(pe.times(Y)),ie.comparedTo(q)!=1;)Q=Y,Y=ie,de=ue.plus(pe.times(ie=de)),ue=ie,oe=ne.minus(pe.times(ie=oe)),ne=ie;return ie=X(q.minus(Q),Y,0,1),ue=ue.plus(ie.times(de)),Q=Q.plus(ie.times(Y)),ue.s=de.s=Se.s,se=se*2,be=X(de,Y,se,H).minus(Se).abs().comparedTo(X(ue,Q,se,H).minus(Se).abs())<1?[de,Y]:[ue,Q],fe=le,be},F.toNumber=function(){return+$e(this)},F.toPrecision=function(q,oe){return q!=null&&N(q,1,P),Le(this,q,oe,2)},F.toString=function(q){var oe,Q=this,Y=Q.s,ie=Q.e;return ie===null?Y?(oe="Infinity",Y<0&&(oe="-"+oe)):oe="NaN":(q==null?oe=ie<=ee||ie>=ge?k(C(Q.c),ie):W(C(Q.c),ie,"0"):q===10&&Pe?(Q=Me(new ve(Q),U+ie+1,H),oe=W(C(Q.c),Q.e,"0")):(N(q,2,Ie.length,"Base"),oe=G(W(C(Q.c),ie,"0"),10,q,Y,!0)),Y<0&&Q.c[0]&&(oe="-"+oe)),oe},F.valueOf=F.toJSON=function(){return $e(this)},F._isBigNumber=!0,ae!=null&&ve.set(ae),ve}function L(ae){var X=ae|0;return ae>0||ae===X?X:X-1}function C(ae){for(var X,G,re=1,F=ae.length,$=ae[0]+"";re<F;){for(X=ae[re++]+"",G=_-X.length;G--;X="0"+X);$+=X}for(F=$.length;$.charCodeAt(--F)===48;);return $.slice(0,F+1||1)}function O(ae,X){var G,re,F=ae.c,$=X.c,U=ae.s,H=X.s,ee=ae.e,ge=X.e;if(!U||!H)return null;if(G=F&&!F[0],re=$&&!$[0],G||re)return G?re?0:-H:U;if(U!=H)return U;if(G=U<0,re=ee==ge,!F||!$)return re?0:!F^G?1:-1;if(!re)return ee>ge^G?1:-1;for(H=(ee=F.length)<(ge=$.length)?ee:ge,U=0;U<H;U++)if(F[U]!=$[U])return F[U]>$[U]^G?1:-1;return ee==ge?0:ee>ge^G?1:-1}function N(ae,X,G,re){if(ae<X||ae>G||ae!==p(ae))throw Error(g+(re||"Argument")+(typeof ae=="number"?ae<X||ae>G?" out of range: ":" not an integer: ":" not a primitive number: ")+String(ae))}function M(ae){var X=ae.c.length-1;return L(ae.e/_)==X&&ae.c[X]%2!=0}function k(ae,X){return(ae.length>1?ae.charAt(0)+"."+ae.slice(1):ae)+(X<0?"e":"e+")+X}function W(ae,X,G){var re,F;if(X<0){for(F=G+".";++X;F+=G);ae=F+ae}else if(re=ae.length,++X>re){for(F=G,X-=re;--X;F+=G);ae+=F}else X<re&&(ae=ae.slice(0,X)+"."+ae.slice(X));return ae}h=B(),h.default=h.BigNumber=h,o=function(){return h}.call(e,n,e,t),o!==void 0&&(t.exports=o)})()},"../node_modules/canonicalize/lib/canonicalize.js":t=>{t.exports=function e(n){return n===null||typeof n!="object"||n.toJSON!=null?JSON.stringify(n):Array.isArray(n)?"["+n.reduce((o,d,h)=>{const l=h===0?"":",",u=d===void 0||typeof d=="symbol"?null:d;return o+l+e(u)},"")+"]":"{"+Object.keys(n).sort().reduce((o,d,h)=>{if(n[d]===void 0||typeof n[d]=="symbol")return o;const l=o.length===0?"":",";return o+l+e(d)+":"+e(n[d])},"")+"}"}},"../node_modules/hash.js/lib/hash.js":(t,e,n)=>{var o=e;o.utils=n("../node_modules/hash.js/lib/hash/utils.js"),o.common=n("../node_modules/hash.js/lib/hash/common.js"),o.sha=n("../node_modules/hash.js/lib/hash/sha.js"),o.ripemd=n("../node_modules/hash.js/lib/hash/ripemd.js"),o.hmac=n("../node_modules/hash.js/lib/hash/hmac.js"),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160},"../node_modules/hash.js/lib/hash/common.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/minimalistic-assert/index.js");function h(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=h,h.prototype.update=function(u,p){if(u=o.toArray(u,p),this.pending?this.pending=this.pending.concat(u):this.pending=u,this.pendingTotal+=u.length,this.pending.length>=this._delta8){u=this.pending;var g=u.length%this._delta8;this.pending=u.slice(u.length-g,u.length),this.pending.length===0&&(this.pending=null),u=o.join32(u,0,u.length-g,this.endian);for(var v=0;v<u.length;v+=this._delta32)this._update(u,v,v+this._delta32)}return this},h.prototype.digest=function(u){return this.update(this._pad()),d(this.pending===null),this._digest(u)},h.prototype._pad=function(){var u=this.pendingTotal,p=this._delta8,g=p-(u+this.padLength)%p,v=new Array(g+this.padLength);v[0]=128;for(var b=1;b<g;b++)v[b]=0;if(u<<=3,this.endian==="big"){for(var _=8;_<this.padLength;_++)v[b++]=0;v[b++]=0,v[b++]=0,v[b++]=0,v[b++]=0,v[b++]=u>>>24&255,v[b++]=u>>>16&255,v[b++]=u>>>8&255,v[b++]=u&255}else for(v[b++]=u&255,v[b++]=u>>>8&255,v[b++]=u>>>16&255,v[b++]=u>>>24&255,v[b++]=0,v[b++]=0,v[b++]=0,v[b++]=0,_=8;_<this.padLength;_++)v[b++]=0;return v}},"../node_modules/hash.js/lib/hash/hmac.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/minimalistic-assert/index.js");function h(l,u,p){if(!(this instanceof h))return new h(l,u,p);this.Hash=l,this.blockSize=l.blockSize/8,this.outSize=l.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(u,p))}t.exports=h,h.prototype._init=function(u){u.length>this.blockSize&&(u=new this.Hash().update(u).digest()),d(u.length<=this.blockSize);for(var p=u.length;p<this.blockSize;p++)u.push(0);for(p=0;p<u.length;p++)u[p]^=54;for(this.inner=new this.Hash().update(u),p=0;p<u.length;p++)u[p]^=106;this.outer=new this.Hash().update(u)},h.prototype.update=function(u,p){return this.inner.update(u,p),this},h.prototype.digest=function(u){return this.outer.update(this.inner.digest()),this.outer.digest(u)}},"../node_modules/hash.js/lib/hash/ripemd.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/hash.js/lib/hash/common.js"),h=o.rotl32,l=o.sum32,u=o.sum32_3,p=o.sum32_4,g=d.BlockHash;function v(){if(!(this instanceof v))return new v;g.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}o.inherits(v,g),e.ripemd160=v,v.blockSize=512,v.outSize=160,v.hmacStrength=192,v.padLength=64,v.prototype._update=function(C,O){for(var N=this.h[0],M=this.h[1],k=this.h[2],W=this.h[3],ae=this.h[4],X=N,G=M,re=k,F=W,$=ae,U=0;U<80;U++){var H=l(h(p(N,b(U,M,k,W),C[T[U]+O],_(U)),P[U]),ae);N=ae,ae=W,W=h(k,10),k=M,M=H,H=l(h(p(X,b(79-U,G,re,F),C[I[U]+O],S(U)),B[U]),$),X=$,$=F,F=h(re,10),re=G,G=H}H=u(this.h[1],k,F),this.h[1]=u(this.h[2],W,$),this.h[2]=u(this.h[3],ae,X),this.h[3]=u(this.h[4],N,G),this.h[4]=u(this.h[0],M,re),this.h[0]=H},v.prototype._digest=function(C){return C==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};function b(L,C,O,N){return L<=15?C^O^N:L<=31?C&O|~C&N:L<=47?(C|~O)^N:L<=63?C&N|O&~N:C^(O|~N)}function _(L){return L<=15?0:L<=31?1518500249:L<=47?1859775393:L<=63?2400959708:2840853838}function S(L){return L<=15?1352829926:L<=31?1548603684:L<=47?1836072691:L<=63?2053994217:0}var T=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],I=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],P=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],B=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},"../node_modules/hash.js/lib/hash/sha.js":(t,e,n)=>{e.sha1=n("../node_modules/hash.js/lib/hash/sha/1.js"),e.sha224=n("../node_modules/hash.js/lib/hash/sha/224.js"),e.sha256=n("../node_modules/hash.js/lib/hash/sha/256.js"),e.sha384=n("../node_modules/hash.js/lib/hash/sha/384.js"),e.sha512=n("../node_modules/hash.js/lib/hash/sha/512.js")},"../node_modules/hash.js/lib/hash/sha/1.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/hash.js/lib/hash/common.js"),h=n("../node_modules/hash.js/lib/hash/sha/common.js"),l=o.rotl32,u=o.sum32,p=o.sum32_5,g=h.ft_1,v=d.BlockHash,b=[1518500249,1859775393,2400959708,3395469782];function _(){if(!(this instanceof _))return new _;v.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(_,v),t.exports=_,_.blockSize=512,_.outSize=160,_.hmacStrength=80,_.padLength=64,_.prototype._update=function(T,I){for(var P=this.W,B=0;B<16;B++)P[B]=T[I+B];for(;B<P.length;B++)P[B]=l(P[B-3]^P[B-8]^P[B-14]^P[B-16],1);var L=this.h[0],C=this.h[1],O=this.h[2],N=this.h[3],M=this.h[4];for(B=0;B<P.length;B++){var k=~~(B/20),W=p(l(L,5),g(k,C,O,N),M,P[B],b[k]);M=N,N=O,O=l(C,30),C=L,L=W}this.h[0]=u(this.h[0],L),this.h[1]=u(this.h[1],C),this.h[2]=u(this.h[2],O),this.h[3]=u(this.h[3],N),this.h[4]=u(this.h[4],M)},_.prototype._digest=function(T){return T==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/224.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/hash.js/lib/hash/sha/256.js");function h(){if(!(this instanceof h))return new h;d.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(h,d),t.exports=h,h.blockSize=512,h.outSize=224,h.hmacStrength=192,h.padLength=64,h.prototype._digest=function(u){return u==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}},"../node_modules/hash.js/lib/hash/sha/256.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/hash.js/lib/hash/common.js"),h=n("../node_modules/hash.js/lib/hash/sha/common.js"),l=n("../node_modules/minimalistic-assert/index.js"),u=o.sum32,p=o.sum32_4,g=o.sum32_5,v=h.ch32,b=h.maj32,_=h.s0_256,S=h.s1_256,T=h.g0_256,I=h.g1_256,P=d.BlockHash,B=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function L(){if(!(this instanceof L))return new L;P.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=B,this.W=new Array(64)}o.inherits(L,P),t.exports=L,L.blockSize=512,L.outSize=256,L.hmacStrength=192,L.padLength=64,L.prototype._update=function(O,N){for(var M=this.W,k=0;k<16;k++)M[k]=O[N+k];for(;k<M.length;k++)M[k]=p(I(M[k-2]),M[k-7],T(M[k-15]),M[k-16]);var W=this.h[0],ae=this.h[1],X=this.h[2],G=this.h[3],re=this.h[4],F=this.h[5],$=this.h[6],U=this.h[7];for(l(this.k.length===M.length),k=0;k<M.length;k++){var H=g(U,S(re),v(re,F,$),this.k[k],M[k]),ee=u(_(W),b(W,ae,X));U=$,$=F,F=re,re=u(G,H),G=X,X=ae,ae=W,W=u(H,ee)}this.h[0]=u(this.h[0],W),this.h[1]=u(this.h[1],ae),this.h[2]=u(this.h[2],X),this.h[3]=u(this.h[3],G),this.h[4]=u(this.h[4],re),this.h[5]=u(this.h[5],F),this.h[6]=u(this.h[6],$),this.h[7]=u(this.h[7],U)},L.prototype._digest=function(O){return O==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/384.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/hash.js/lib/hash/sha/512.js");function h(){if(!(this instanceof h))return new h;d.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(h,d),t.exports=h,h.blockSize=1024,h.outSize=384,h.hmacStrength=192,h.padLength=128,h.prototype._digest=function(u){return u==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}},"../node_modules/hash.js/lib/hash/sha/512.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=n("../node_modules/hash.js/lib/hash/common.js"),h=n("../node_modules/minimalistic-assert/index.js"),l=o.rotr64_hi,u=o.rotr64_lo,p=o.shr64_hi,g=o.shr64_lo,v=o.sum64,b=o.sum64_hi,_=o.sum64_lo,S=o.sum64_4_hi,T=o.sum64_4_lo,I=o.sum64_5_hi,P=o.sum64_5_lo,B=d.BlockHash,L=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function C(){if(!(this instanceof C))return new C;B.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=L,this.W=new Array(160)}o.inherits(C,B),t.exports=C,C.blockSize=1024,C.outSize=512,C.hmacStrength=192,C.padLength=128,C.prototype._prepareBlock=function(ee,ge){for(var me=this.W,fe=0;fe<32;fe++)me[fe]=ee[ge+fe];for(;fe<me.length;fe+=2){var he=$(me[fe-4],me[fe-3]),_e=U(me[fe-4],me[fe-3]),xe=me[fe-14],Ne=me[fe-13],Ie=re(me[fe-30],me[fe-29]),Pe=F(me[fe-30],me[fe-29]),ve=me[fe-32],Le=me[fe-31];me[fe]=S(he,_e,xe,Ne,Ie,Pe,ve,Le),me[fe+1]=T(he,_e,xe,Ne,Ie,Pe,ve,Le)}},C.prototype._update=function(ee,ge){this._prepareBlock(ee,ge);var me=this.W,fe=this.h[0],he=this.h[1],_e=this.h[2],xe=this.h[3],Ne=this.h[4],Ie=this.h[5],Pe=this.h[6],ve=this.h[7],Le=this.h[8],Fe=this.h[9],Ue=this.h[10],Me=this.h[11],$e=this.h[12],q=this.h[13],oe=this.h[14],Q=this.h[15];h(this.k.length===me.length);for(var Y=0;Y<me.length;Y+=2){var ie=oe,se=Q,le=X(Le,Fe),ne=G(Le,Fe),ue=O(Le,Fe,Ue,Me,$e),de=N(Le,Fe,Ue,Me,$e,q),pe=this.k[Y],be=this.k[Y+1],we=me[Y],Se=me[Y+1],j=I(ie,se,le,ne,ue,de,pe,be,we,Se),w=P(ie,se,le,ne,ue,de,pe,be,we,Se);ie=W(fe,he),se=ae(fe,he),le=M(fe,he,_e,xe,Ne),ne=k(fe,he,_e,xe,Ne,Ie);var E=b(ie,se,le,ne),D=_(ie,se,le,ne);oe=$e,Q=q,$e=Ue,q=Me,Ue=Le,Me=Fe,Le=b(Pe,ve,j,w),Fe=_(ve,ve,j,w),Pe=Ne,ve=Ie,Ne=_e,Ie=xe,_e=fe,xe=he,fe=b(j,w,E,D),he=_(j,w,E,D)}v(this.h,0,fe,he),v(this.h,2,_e,xe),v(this.h,4,Ne,Ie),v(this.h,6,Pe,ve),v(this.h,8,Le,Fe),v(this.h,10,Ue,Me),v(this.h,12,$e,q),v(this.h,14,oe,Q)},C.prototype._digest=function(ee){return ee==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")};function O(H,ee,ge,me,fe){var he=H&ge^~H&fe;return he<0&&(he+=4294967296),he}function N(H,ee,ge,me,fe,he){var _e=ee&me^~ee&he;return _e<0&&(_e+=4294967296),_e}function M(H,ee,ge,me,fe){var he=H&ge^H&fe^ge&fe;return he<0&&(he+=4294967296),he}function k(H,ee,ge,me,fe,he){var _e=ee&me^ee&he^me&he;return _e<0&&(_e+=4294967296),_e}function W(H,ee){var ge=l(H,ee,28),me=l(ee,H,2),fe=l(ee,H,7),he=ge^me^fe;return he<0&&(he+=4294967296),he}function ae(H,ee){var ge=u(H,ee,28),me=u(ee,H,2),fe=u(ee,H,7),he=ge^me^fe;return he<0&&(he+=4294967296),he}function X(H,ee){var ge=l(H,ee,14),me=l(H,ee,18),fe=l(ee,H,9),he=ge^me^fe;return he<0&&(he+=4294967296),he}function G(H,ee){var ge=u(H,ee,14),me=u(H,ee,18),fe=u(ee,H,9),he=ge^me^fe;return he<0&&(he+=4294967296),he}function re(H,ee){var ge=l(H,ee,1),me=l(H,ee,8),fe=p(H,ee,7),he=ge^me^fe;return he<0&&(he+=4294967296),he}function F(H,ee){var ge=u(H,ee,1),me=u(H,ee,8),fe=g(H,ee,7),he=ge^me^fe;return he<0&&(he+=4294967296),he}function $(H,ee){var ge=l(H,ee,19),me=l(ee,H,29),fe=p(H,ee,6),he=ge^me^fe;return he<0&&(he+=4294967296),he}function U(H,ee){var ge=u(H,ee,19),me=u(ee,H,29),fe=g(H,ee,6),he=ge^me^fe;return he<0&&(he+=4294967296),he}},"../node_modules/hash.js/lib/hash/sha/common.js":(t,e,n)=>{var o=n("../node_modules/hash.js/lib/hash/utils.js"),d=o.rotr32;function h(S,T,I,P){if(S===0)return l(T,I,P);if(S===1||S===3)return p(T,I,P);if(S===2)return u(T,I,P)}e.ft_1=h;function l(S,T,I){return S&T^~S&I}e.ch32=l;function u(S,T,I){return S&T^S&I^T&I}e.maj32=u;function p(S,T,I){return S^T^I}e.p32=p;function g(S){return d(S,2)^d(S,13)^d(S,22)}e.s0_256=g;function v(S){return d(S,6)^d(S,11)^d(S,25)}e.s1_256=v;function b(S){return d(S,7)^d(S,18)^S>>>3}e.g0_256=b;function _(S){return d(S,17)^d(S,19)^S>>>10}e.g1_256=_},"../node_modules/hash.js/lib/hash/utils.js":(t,e,n)=>{var o=n("../node_modules/minimalistic-assert/index.js"),d=n("../node_modules/inherits/inherits_browser.js");e.inherits=d;function h(U,H){return(U.charCodeAt(H)&64512)!==55296||H<0||H+1>=U.length?!1:(U.charCodeAt(H+1)&64512)===56320}function l(U,H){if(Array.isArray(U))return U.slice();if(!U)return[];var ee=[];if(typeof U=="string")if(H){if(H==="hex")for(U=U.replace(/[^a-z0-9]+/ig,""),U.length%2!==0&&(U="0"+U),me=0;me<U.length;me+=2)ee.push(parseInt(U[me]+U[me+1],16))}else for(var ge=0,me=0;me<U.length;me++){var fe=U.charCodeAt(me);fe<128?ee[ge++]=fe:fe<2048?(ee[ge++]=fe>>6|192,ee[ge++]=fe&63|128):h(U,me)?(fe=65536+((fe&1023)<<10)+(U.charCodeAt(++me)&1023),ee[ge++]=fe>>18|240,ee[ge++]=fe>>12&63|128,ee[ge++]=fe>>6&63|128,ee[ge++]=fe&63|128):(ee[ge++]=fe>>12|224,ee[ge++]=fe>>6&63|128,ee[ge++]=fe&63|128)}else for(me=0;me<U.length;me++)ee[me]=U[me]|0;return ee}e.toArray=l;function u(U){for(var H="",ee=0;ee<U.length;ee++)H+=v(U[ee].toString(16));return H}e.toHex=u;function p(U){var H=U>>>24|U>>>8&65280|U<<8&16711680|(U&255)<<24;return H>>>0}e.htonl=p;function g(U,H){for(var ee="",ge=0;ge<U.length;ge++){var me=U[ge];H==="little"&&(me=p(me)),ee+=b(me.toString(16))}return ee}e.toHex32=g;function v(U){return U.length===1?"0"+U:U}e.zero2=v;function b(U){return U.length===7?"0"+U:U.length===6?"00"+U:U.length===5?"000"+U:U.length===4?"0000"+U:U.length===3?"00000"+U:U.length===2?"000000"+U:U.length===1?"0000000"+U:U}e.zero8=b;function _(U,H,ee,ge){var me=ee-H;o(me%4===0);for(var fe=new Array(me/4),he=0,_e=H;he<fe.length;he++,_e+=4){var xe;ge==="big"?xe=U[_e]<<24|U[_e+1]<<16|U[_e+2]<<8|U[_e+3]:xe=U[_e+3]<<24|U[_e+2]<<16|U[_e+1]<<8|U[_e],fe[he]=xe>>>0}return fe}e.join32=_;function S(U,H){for(var ee=new Array(U.length*4),ge=0,me=0;ge<U.length;ge++,me+=4){var fe=U[ge];H==="big"?(ee[me]=fe>>>24,ee[me+1]=fe>>>16&255,ee[me+2]=fe>>>8&255,ee[me+3]=fe&255):(ee[me+3]=fe>>>24,ee[me+2]=fe>>>16&255,ee[me+1]=fe>>>8&255,ee[me]=fe&255)}return ee}e.split32=S;function T(U,H){return U>>>H|U<<32-H}e.rotr32=T;function I(U,H){return U<<H|U>>>32-H}e.rotl32=I;function P(U,H){return U+H>>>0}e.sum32=P;function B(U,H,ee){return U+H+ee>>>0}e.sum32_3=B;function L(U,H,ee,ge){return U+H+ee+ge>>>0}e.sum32_4=L;function C(U,H,ee,ge,me){return U+H+ee+ge+me>>>0}e.sum32_5=C;function O(U,H,ee,ge){var me=U[H],fe=U[H+1],he=ge+fe>>>0,_e=(he<ge?1:0)+ee+me;U[H]=_e>>>0,U[H+1]=he}e.sum64=O;function N(U,H,ee,ge){var me=H+ge>>>0,fe=(me<H?1:0)+U+ee;return fe>>>0}e.sum64_hi=N;function M(U,H,ee,ge){var me=H+ge;return me>>>0}e.sum64_lo=M;function k(U,H,ee,ge,me,fe,he,_e){var xe=0,Ne=H;Ne=Ne+ge>>>0,xe+=Ne<H?1:0,Ne=Ne+fe>>>0,xe+=Ne<fe?1:0,Ne=Ne+_e>>>0,xe+=Ne<_e?1:0;var Ie=U+ee+me+he+xe;return Ie>>>0}e.sum64_4_hi=k;function W(U,H,ee,ge,me,fe,he,_e){var xe=H+ge+fe+_e;return xe>>>0}e.sum64_4_lo=W;function ae(U,H,ee,ge,me,fe,he,_e,xe,Ne){var Ie=0,Pe=H;Pe=Pe+ge>>>0,Ie+=Pe<H?1:0,Pe=Pe+fe>>>0,Ie+=Pe<fe?1:0,Pe=Pe+_e>>>0,Ie+=Pe<_e?1:0,Pe=Pe+Ne>>>0,Ie+=Pe<Ne?1:0;var ve=U+ee+me+he+xe+Ie;return ve>>>0}e.sum64_5_hi=ae;function X(U,H,ee,ge,me,fe,he,_e,xe,Ne){var Ie=H+ge+fe+_e+Ne;return Ie>>>0}e.sum64_5_lo=X;function G(U,H,ee){var ge=H<<32-ee|U>>>ee;return ge>>>0}e.rotr64_hi=G;function re(U,H,ee){var ge=U<<32-ee|H>>>ee;return ge>>>0}e.rotr64_lo=re;function F(U,H,ee){return U>>>ee}e.shr64_hi=F;function $(U,H,ee){var ge=U<<32-ee|H>>>ee;return ge>>>0}e.shr64_lo=$},"../node_modules/inherits/inherits_browser.js":t=>{typeof Object.create=="function"?t.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(n,o){if(o){n.super_=o;var d=function(){};d.prototype=o.prototype,n.prototype=new d,n.prototype.constructor=n}}},"../node_modules/lru-cache/index.js":(t,e,n)=>{const o=n("../node_modules/yallist/yallist.js"),d=Symbol("max"),h=Symbol("length"),l=Symbol("lengthCalculator"),u=Symbol("allowStale"),p=Symbol("maxAge"),g=Symbol("dispose"),v=Symbol("noDisposeOnSet"),b=Symbol("lruList"),_=Symbol("cache"),S=Symbol("updateAgeOnGet"),T=()=>1;class I{constructor(k){if(typeof k=="number"&&(k={max:k}),k||(k={}),k.max&&(typeof k.max!="number"||k.max<0))throw new TypeError("max must be a non-negative number");this[d]=k.max||1/0;const W=k.length||T;if(this[l]=typeof W!="function"?T:W,this[u]=k.stale||!1,k.maxAge&&typeof k.maxAge!="number")throw new TypeError("maxAge must be a number");this[p]=k.maxAge||0,this[g]=k.dispose,this[v]=k.noDisposeOnSet||!1,this[S]=k.updateAgeOnGet||!1,this.reset()}set max(k){if(typeof k!="number"||k<0)throw new TypeError("max must be a non-negative number");this[d]=k||1/0,L(this)}get max(){return this[d]}set allowStale(k){this[u]=!!k}get allowStale(){return this[u]}set maxAge(k){if(typeof k!="number")throw new TypeError("maxAge must be a non-negative number");this[p]=k,L(this)}get maxAge(){return this[p]}set lengthCalculator(k){typeof k!="function"&&(k=T),k!==this[l]&&(this[l]=k,this[h]=0,this[b].forEach(W=>{W.length=this[l](W.value,W.key),this[h]+=W.length})),L(this)}get lengthCalculator(){return this[l]}get length(){return this[h]}get itemCount(){return this[b].length}rforEach(k,W){W=W||this;for(let ae=this[b].tail;ae!==null;){const X=ae.prev;N(this,k,ae,W),ae=X}}forEach(k,W){W=W||this;for(let ae=this[b].head;ae!==null;){const X=ae.next;N(this,k,ae,W),ae=X}}keys(){return this[b].toArray().map(k=>k.key)}values(){return this[b].toArray().map(k=>k.value)}reset(){this[g]&&this[b]&&this[b].length&&this[b].forEach(k=>this[g](k.key,k.value)),this[_]=new Map,this[b]=new o,this[h]=0}dump(){return this[b].map(k=>B(this,k)?!1:{k:k.key,v:k.value,e:k.now+(k.maxAge||0)}).toArray().filter(k=>k)}dumpLru(){return this[b]}set(k,W,ae){if(ae=ae||this[p],ae&&typeof ae!="number")throw new TypeError("maxAge must be a number");const X=ae?Date.now():0,G=this[l](W,k);if(this[_].has(k)){if(G>this[d])return C(this,this[_].get(k)),!1;const $=this[_].get(k).value;return this[g]&&(this[v]||this[g](k,$.value)),$.now=X,$.maxAge=ae,$.value=W,this[h]+=G-$.length,$.length=G,this.get(k),L(this),!0}const re=new O(k,W,G,X,ae);return re.length>this[d]?(this[g]&&this[g](k,W),!1):(this[h]+=re.length,this[b].unshift(re),this[_].set(k,this[b].head),L(this),!0)}has(k){if(!this[_].has(k))return!1;const W=this[_].get(k).value;return!B(this,W)}get(k){return P(this,k,!0)}peek(k){return P(this,k,!1)}pop(){const k=this[b].tail;return k?(C(this,k),k.value):null}del(k){C(this,this[_].get(k))}load(k){this.reset();const W=Date.now();for(let ae=k.length-1;ae>=0;ae--){const X=k[ae],G=X.e||0;if(G===0)this.set(X.k,X.v);else{const re=G-W;re>0&&this.set(X.k,X.v,re)}}}prune(){this[_].forEach((k,W)=>P(this,W,!1))}}const P=(M,k,W)=>{const ae=M[_].get(k);if(ae){const X=ae.value;if(B(M,X)){if(C(M,ae),!M[u])return}else W&&(M[S]&&(ae.value.now=Date.now()),M[b].unshiftNode(ae));return X.value}},B=(M,k)=>{if(!k||!k.maxAge&&!M[p])return!1;const W=Date.now()-k.now;return k.maxAge?W>k.maxAge:M[p]&&W>M[p]},L=M=>{if(M[h]>M[d])for(let k=M[b].tail;M[h]>M[d]&&k!==null;){const W=k.prev;C(M,k),k=W}},C=(M,k)=>{if(k){const W=k.value;M[g]&&M[g](W.key,W.value),M[h]-=W.length,M[_].delete(W.key),M[b].removeNode(k)}};class O{constructor(k,W,ae,X,G){this.key=k,this.value=W,this.length=ae,this.now=X,this.maxAge=G||0}}const N=(M,k,W,ae)=>{let X=W.value;B(M,X)&&(C(M,W),M[u]||(X=void 0)),X&&k.call(ae,X.value,X.key,M)};t.exports=I},"../node_modules/minimalistic-assert/index.js":t=>{t.exports=e;function e(n,o){if(!n)throw new Error(o||"Assertion failed")}e.equal=function(o,d,h){if(o!=d)throw new Error(h||"Assertion failed: "+o+" != "+d)}},"../node_modules/rdf-data-factory/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/rdf-data-factory/lib/BlankNode.js"),e),d(n("../node_modules/rdf-data-factory/lib/DataFactory.js"),e),d(n("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),e),d(n("../node_modules/rdf-data-factory/lib/Literal.js"),e),d(n("../node_modules/rdf-data-factory/lib/NamedNode.js"),e),d(n("../node_modules/rdf-data-factory/lib/Quad.js"),e),d(n("../node_modules/rdf-data-factory/lib/Variable.js"),e)},"../node_modules/rdf-data-factory/lib/BlankNode.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNode=void 0;class n{constructor(d){this.termType="BlankNode",this.value=d}equals(d){return!!d&&d.termType==="BlankNode"&&d.value===this.value}}e.BlankNode=n},"../node_modules/rdf-data-factory/lib/DataFactory.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataFactory=void 0;const o=n("../node_modules/rdf-data-factory/lib/BlankNode.js"),d=n("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),h=n("../node_modules/rdf-data-factory/lib/Literal.js"),l=n("../node_modules/rdf-data-factory/lib/NamedNode.js"),u=n("../node_modules/rdf-data-factory/lib/Quad.js"),p=n("../node_modules/rdf-data-factory/lib/Variable.js");let g=0;class v{constructor(_){this.blankNodeCounter=0,_=_||{},this.blankNodePrefix=_.blankNodePrefix||`df_${g++}_`}namedNode(_){return new l.NamedNode(_)}blankNode(_){return new o.BlankNode(_||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(_,S){return new h.Literal(_,S)}variable(_){return new p.Variable(_)}defaultGraph(){return d.DefaultGraph.INSTANCE}quad(_,S,T,I){return new u.Quad(_,S,T,I||this.defaultGraph())}fromTerm(_){switch(_.termType){case"NamedNode":return this.namedNode(_.value);case"BlankNode":return this.blankNode(_.value);case"Literal":return _.language?this.literal(_.value,_.language):_.datatype.equals(h.Literal.XSD_STRING)?this.literal(_.value):this.literal(_.value,this.fromTerm(_.datatype));case"Variable":return this.variable(_.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(_.subject),this.fromTerm(_.predicate),this.fromTerm(_.object),this.fromTerm(_.graph))}}fromQuad(_){return this.fromTerm(_)}resetBlankNodeCounter(){this.blankNodeCounter=0}}e.DataFactory=v},"../node_modules/rdf-data-factory/lib/DefaultGraph.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultGraph=void 0;class n{constructor(){this.termType="DefaultGraph",this.value=""}equals(d){return!!d&&d.termType==="DefaultGraph"}}e.DefaultGraph=n,n.INSTANCE=new n},"../node_modules/rdf-data-factory/lib/Literal.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Literal=void 0;const o=n("../node_modules/rdf-data-factory/lib/NamedNode.js");class d{constructor(l,u){this.termType="Literal",this.value=l,typeof u=="string"?(this.language=u,this.datatype=d.RDF_LANGUAGE_STRING):u?(this.language="",this.datatype=u):(this.language="",this.datatype=d.XSD_STRING)}equals(l){return!!l&&l.termType==="Literal"&&l.value===this.value&&l.language===this.language&&l.datatype.equals(this.datatype)}}e.Literal=d,d.RDF_LANGUAGE_STRING=new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),d.XSD_STRING=new o.NamedNode("http://www.w3.org/2001/XMLSchema#string")},"../node_modules/rdf-data-factory/lib/NamedNode.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedNode=void 0;class n{constructor(d){this.termType="NamedNode",this.value=d}equals(d){return!!d&&d.termType==="NamedNode"&&d.value===this.value}}e.NamedNode=n},"../node_modules/rdf-data-factory/lib/Quad.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Quad=void 0;class n{constructor(d,h,l,u){this.termType="Quad",this.value="",this.subject=d,this.predicate=h,this.object=l,this.graph=u}equals(d){return!!d&&(d.termType==="Quad"||!d.termType)&&this.subject.equals(d.subject)&&this.predicate.equals(d.predicate)&&this.object.equals(d.object)&&this.graph.equals(d.graph)}}e.Quad=n},"../node_modules/rdf-data-factory/lib/Variable.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;class n{constructor(d){this.termType="Variable",this.value=d}equals(d){return!!d&&d.termType==="Variable"&&d.value===this.value}}e.Variable=n},"../node_modules/rdf-string/index.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralLanguage=void 0;const o=n("../node_modules/rdf-string/lib/TermUtil.js");Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return o.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return o.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return o.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return o.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return o.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return o.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return o.termToString}})},"../node_modules/rdf-string/lib/TermUtil.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringQuadToQuad=e.quadToStringQuad=e.stringToTerm=e.getLiteralLanguage=e.getLiteralType=e.getLiteralValue=e.termToString=void 0;const o=n("../node_modules/rdf-data-factory/index.js"),d=new o.DataFactory;function h(_){if(_)switch(_.termType){case"NamedNode":return _.value;case"BlankNode":return"_:"+_.value;case"Literal":const S=_;return'"'+S.value+'"'+(S.datatype&&S.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&S.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+S.datatype.value:"")+(S.language?"@"+S.language:"");case"Quad":return`<<${h(_.subject)} ${h(_.predicate)} ${h(_.object)}${_.graph.termType==="DefaultGraph"?"":" "+h(_.graph)}>>`;case"Variable":return"?"+_.value;case"DefaultGraph":return _.value}}e.termToString=h;function l(_){const S=/^"([^]*)"/.exec(_);if(!S)throw new Error(_+" is not a literal");return S[1]}e.getLiteralValue=l;function u(_){const S=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(_);if(!S)throw new Error(_+" is not a literal");return S[1]||(S[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}e.getLiteralType=u;function p(_){const S=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(_);if(!S)throw new Error(_+" is not a literal");return S[1]?S[1].toLowerCase():""}e.getLiteralLanguage=p;function g(_,S){if(S=S||d,!_||!_.length)return S.defaultGraph();switch(_[0]){case"_":return S.blankNode(_.substr(2));case"?":if(!S.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return S.variable(_.substr(1));case'"':const T=p(_),I=S.namedNode(u(_));return S.literal(l(_),T||I);case"<":default:if(_.startsWith("<<")&&_.endsWith(">>")){const P=_.slice(2,-2).trim();let B=[],L=0,C=0,O=!1;for(let N=0;N<P.length;N++){const M=P[N];if(M==="<"&&L++,M===">"){if(L===0)throw new Error("Found closing tag without opening tag in "+_);L--}if(M==='"'){let k=!1,W=N;for(;W-- >0&&P[W]==="\\";)k=!k;k||(O=!O)}if(M===" "&&!O&&L===0){for(B.push(P.slice(C,N));P[N+1]===" ";)N+=1;C=N+1}}if(L!==0)throw new Error("Found opening tag without closing tag in "+_);if(B.push(P.slice(C,P.length)),B.length!==3&&B.length!==4)throw new Error("Nested quad syntax error "+_);return B=B.map(N=>N.startsWith("<")&&!N.includes(" ")?N.slice(1,-1):N),S.quad(g(B[0]),g(B[1]),g(B[2]),B[3]?g(B[3]):void 0)}return S.namedNode(_)}}e.stringToTerm=g;function v(_){return{subject:h(_.subject),predicate:h(_.predicate),object:h(_.object),graph:h(_.graph)}}e.quadToStringQuad=v;function b(_,S){return S=S||d,S.quad(g(_.subject,S),g(_.predicate,S),g(_.object,S),g(_.graph,S))}e.stringQuadToQuad=b},"../node_modules/rdf-terms/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/rdf-terms/lib/QuadTermUtil.js"),e),d(n("../node_modules/rdf-terms/lib/TermUtil.js"),e)},"../node_modules/rdf-terms/lib/QuadTermUtil.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.matchPatternMappings=e.matchPatternComplete=e.matchPattern=e.matchTerm=e.someTerms=e.everyTerms=e.reduceTerms=e.mapTerms=e.filterQuadTermNames=e.filterTerms=e.forEachTerms=e.collectNamedTerms=e.getNamedTerms=e.getTermsNested=e.getTerms=e.TRIPLE_TERM_NAMES=e.QUAD_TERM_NAMES=void 0;const o=n("../node_modules/rdf-data-factory/index.js"),d=new o.DataFactory;e.QUAD_TERM_NAMES=["subject","predicate","object","graph"],e.TRIPLE_TERM_NAMES=["subject","predicate","object"];function h(O,N){return N&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}e.getTerms=h;function l(O,N){const M=[];for(const k of h(O,N))k.termType==="Quad"?l(k,N).forEach(W=>M.push(W)):M.push(k);return M}e.getTermsNested=l;function u(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}e.getNamedTerms=u;function p(O,N,M){const k={};return O.forEach(W=>k[W.key]=W.value),N&&(k.subject=k.subject||N("subject"),k.predicate=k.predicate||N("predicate"),k.object=k.object||N("object"),k.graph=k.graph||N("graph")),(M||d).quad(k.subject,k.predicate,k.object,k.graph)}e.collectNamedTerms=p;function g(O,N){N(O.subject,"subject"),N(O.predicate,"predicate"),N(O.object,"object"),N(O.graph,"graph")}e.forEachTerms=g;function v(O,N){const M=[];return N(O.subject,"subject")&&M.push(O.subject),N(O.predicate,"predicate")&&M.push(O.predicate),N(O.object,"object")&&M.push(O.object),N(O.graph,"graph")&&M.push(O.graph),M}e.filterTerms=v;function b(O,N){const M=[];return N(O.subject,"subject")&&M.push("subject"),N(O.predicate,"predicate")&&M.push("predicate"),N(O.object,"object")&&M.push("object"),N(O.graph,"graph")&&M.push("graph"),M}e.filterQuadTermNames=b;function _(O,N,M){return(M||d).quad(N(O.subject,"subject"),N(O.predicate,"predicate"),N(O.object,"object"),N(O.graph,"graph"))}e.mapTerms=_;function S(O,N,M){let k=M;return k=N(k,O.subject,"subject"),k=N(k,O.predicate,"predicate"),k=N(k,O.object,"object"),N(k,O.graph,"graph")}e.reduceTerms=S;function T(O,N){return N(O.subject,"subject")&&N(O.predicate,"predicate")&&N(O.object,"object")&&N(O.graph,"graph")}e.everyTerms=T;function I(O,N){return N(O.subject,"subject")||N(O.predicate,"predicate")||N(O.object,"object")||N(O.graph,"graph")}e.someTerms=I;function P(O,N){return!N||N.termType==="Variable"||N.termType==="Quad"&&O.termType==="Quad"&&L(O,N)||N.equals(O)}e.matchTerm=P;function B(O,N,M,k,W){return P(O.subject,N)&&P(O.predicate,M)&&P(O.object,k)&&P(O.graph,W)}e.matchPattern=B;function L(O,N){return B(O,N.subject,N.predicate,N.object,N.graph)}e.matchPatternComplete=L;function C(O,N,M={}){const k={};function W(ae,X){return T(ae,(G,re)=>{var F,$;const U=X[re];switch(G.termType){case"Variable":return M.skipVarMapping&&U.termType==="Variable"||(($=(F=k[G.value])===null||F===void 0?void 0:F.equals(U))!==null&&$!==void 0?$:(k[G.value]=U,!0));case"Quad":return U.termType==="Quad"&&W(G,U);default:return G.equals(U)}})}return W(N,O)&&(M.returnMappings?k:!0)}e.matchPatternMappings=C},"../node_modules/rdf-terms/lib/TermUtil.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getQuads=e.getDefaultGraphs=e.getVariables=e.getLiterals=e.getBlankNodes=e.getNamedNodes=e.getTermsOfType=e.uniqTerms=e.TERM_TYPES=void 0;const o=n("../node_modules/rdf-string/index.js");e.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function d(_){const S={};return _.filter(T=>{const I=o.termToString(T);return!(I in S)&&(S[I]=!0)})}e.uniqTerms=d;function h(_,S){return _.filter(T=>T.termType===S)}e.getTermsOfType=h;function l(_){return h(_,"NamedNode")}e.getNamedNodes=l;function u(_){return h(_,"BlankNode")}e.getBlankNodes=u;function p(_){return h(_,"Literal")}e.getLiterals=p;function g(_){return h(_,"Variable")}e.getVariables=g;function v(_){return h(_,"DefaultGraph")}e.getDefaultGraphs=v;function b(_){return h(_,"Quad")}e.getQuads=b},"../node_modules/relative-to-absolute-iri/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/relative-to-absolute-iri/lib/Resolve.js"),e)},"../node_modules/relative-to-absolute-iri/lib/Resolve.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeDotSegmentsOfPath=e.removeDotSegments=e.resolve=void 0;function n(l,u){u=u||"";const p=u.indexOf("#");if(p>0&&(u=u.substr(0,p)),!l.length){if(u.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${u}' for value '${l}'`);return u}if(l.startsWith("?")){const I=u.indexOf("?");return I>0&&(u=u.substr(0,I)),u+l}if(l.startsWith("#"))return u+l;if(!u.length){const I=l.indexOf(":");if(I<0)throw new Error(`Found invalid relative IRI '${l}' for a missing baseIRI`);return d(l,I)}const g=l.indexOf(":");if(g>=0)return d(l,g);const v=u.indexOf(":");if(v<0)throw new Error(`Found invalid baseIRI '${u}' for value '${l}'`);const b=u.substr(0,v+1);if(l.indexOf("//")===0)return b+d(l,g);let _;if(u.indexOf("//",v)===v+1){if(_=u.indexOf("/",v+3),_<0)return u.length>v+3?u+"/"+d(l,g):b+d(l,g)}else if(_=u.indexOf("/",v+1),_<0)return b+d(l,g);if(l.indexOf("/")===0)return u.substr(0,_)+o(l);let S=u.substr(_);const T=S.lastIndexOf("/");return T>=0&&T<S.length-1&&(S=S.substr(0,T+1),l[0]==="."&&l[1]!=="."&&l[1]!=="/"&&l[2]&&(l=l.substr(1))),l=S+l,l=o(l),u.substr(0,_)+l}e.resolve=n;function o(l){const u=[];let p=0;for(;p<l.length;)switch(l[p]){case"/":if(l[p+1]===".")if(l[p+2]==="."){if(!h(l[p+3])){u.push([]),p++;break}u.pop(),l[p+3]||u.push([]),p+=3}else{if(!h(l[p+2])){u.push([]),p++;break}l[p+2]||u.push([]),p+=2}else u.push([]),p++;break;case"#":case"?":u.length||u.push([]),u[u.length-1].push(l.substr(p)),p=l.length;break;default:u.length||u.push([]),u[u.length-1].push(l[p]),p++;break}return"/"+u.map(g=>g.join("")).join("/")}e.removeDotSegments=o;function d(l,u){let p=u+1;u>=0?l[u+1]==="/"&&l[u+2]==="/"&&(p=u+3):l[0]==="/"&&l[1]==="/"&&(p=2);const g=l.indexOf("/",p);if(g<0)return l;const v=l.substr(0,g),b=l.substr(g);return v+o(b)}e.removeDotSegmentsOfPath=d;function h(l){return!l||l==="#"||l==="?"||l==="/"}},"../node_modules/spark-md5/spark-md5.js":t=>{(function(e){t.exports=e()})(function(e){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(P,B){var L=P[0],C=P[1],O=P[2],N=P[3];L+=(C&O|~C&N)+B[0]-680876936|0,L=(L<<7|L>>>25)+C|0,N+=(L&C|~L&O)+B[1]-389564586|0,N=(N<<12|N>>>20)+L|0,O+=(N&L|~N&C)+B[2]+606105819|0,O=(O<<17|O>>>15)+N|0,C+=(O&N|~O&L)+B[3]-1044525330|0,C=(C<<22|C>>>10)+O|0,L+=(C&O|~C&N)+B[4]-176418897|0,L=(L<<7|L>>>25)+C|0,N+=(L&C|~L&O)+B[5]+1200080426|0,N=(N<<12|N>>>20)+L|0,O+=(N&L|~N&C)+B[6]-1473231341|0,O=(O<<17|O>>>15)+N|0,C+=(O&N|~O&L)+B[7]-45705983|0,C=(C<<22|C>>>10)+O|0,L+=(C&O|~C&N)+B[8]+1770035416|0,L=(L<<7|L>>>25)+C|0,N+=(L&C|~L&O)+B[9]-1958414417|0,N=(N<<12|N>>>20)+L|0,O+=(N&L|~N&C)+B[10]-42063|0,O=(O<<17|O>>>15)+N|0,C+=(O&N|~O&L)+B[11]-1990404162|0,C=(C<<22|C>>>10)+O|0,L+=(C&O|~C&N)+B[12]+1804603682|0,L=(L<<7|L>>>25)+C|0,N+=(L&C|~L&O)+B[13]-40341101|0,N=(N<<12|N>>>20)+L|0,O+=(N&L|~N&C)+B[14]-1502002290|0,O=(O<<17|O>>>15)+N|0,C+=(O&N|~O&L)+B[15]+1236535329|0,C=(C<<22|C>>>10)+O|0,L+=(C&N|O&~N)+B[1]-165796510|0,L=(L<<5|L>>>27)+C|0,N+=(L&O|C&~O)+B[6]-1069501632|0,N=(N<<9|N>>>23)+L|0,O+=(N&C|L&~C)+B[11]+643717713|0,O=(O<<14|O>>>18)+N|0,C+=(O&L|N&~L)+B[0]-373897302|0,C=(C<<20|C>>>12)+O|0,L+=(C&N|O&~N)+B[5]-701558691|0,L=(L<<5|L>>>27)+C|0,N+=(L&O|C&~O)+B[10]+38016083|0,N=(N<<9|N>>>23)+L|0,O+=(N&C|L&~C)+B[15]-660478335|0,O=(O<<14|O>>>18)+N|0,C+=(O&L|N&~L)+B[4]-405537848|0,C=(C<<20|C>>>12)+O|0,L+=(C&N|O&~N)+B[9]+568446438|0,L=(L<<5|L>>>27)+C|0,N+=(L&O|C&~O)+B[14]-1019803690|0,N=(N<<9|N>>>23)+L|0,O+=(N&C|L&~C)+B[3]-187363961|0,O=(O<<14|O>>>18)+N|0,C+=(O&L|N&~L)+B[8]+1163531501|0,C=(C<<20|C>>>12)+O|0,L+=(C&N|O&~N)+B[13]-1444681467|0,L=(L<<5|L>>>27)+C|0,N+=(L&O|C&~O)+B[2]-51403784|0,N=(N<<9|N>>>23)+L|0,O+=(N&C|L&~C)+B[7]+1735328473|0,O=(O<<14|O>>>18)+N|0,C+=(O&L|N&~L)+B[12]-1926607734|0,C=(C<<20|C>>>12)+O|0,L+=(C^O^N)+B[5]-378558|0,L=(L<<4|L>>>28)+C|0,N+=(L^C^O)+B[8]-2022574463|0,N=(N<<11|N>>>21)+L|0,O+=(N^L^C)+B[11]+1839030562|0,O=(O<<16|O>>>16)+N|0,C+=(O^N^L)+B[14]-35309556|0,C=(C<<23|C>>>9)+O|0,L+=(C^O^N)+B[1]-1530992060|0,L=(L<<4|L>>>28)+C|0,N+=(L^C^O)+B[4]+1272893353|0,N=(N<<11|N>>>21)+L|0,O+=(N^L^C)+B[7]-155497632|0,O=(O<<16|O>>>16)+N|0,C+=(O^N^L)+B[10]-1094730640|0,C=(C<<23|C>>>9)+O|0,L+=(C^O^N)+B[13]+681279174|0,L=(L<<4|L>>>28)+C|0,N+=(L^C^O)+B[0]-358537222|0,N=(N<<11|N>>>21)+L|0,O+=(N^L^C)+B[3]-722521979|0,O=(O<<16|O>>>16)+N|0,C+=(O^N^L)+B[6]+76029189|0,C=(C<<23|C>>>9)+O|0,L+=(C^O^N)+B[9]-640364487|0,L=(L<<4|L>>>28)+C|0,N+=(L^C^O)+B[12]-421815835|0,N=(N<<11|N>>>21)+L|0,O+=(N^L^C)+B[15]+530742520|0,O=(O<<16|O>>>16)+N|0,C+=(O^N^L)+B[2]-995338651|0,C=(C<<23|C>>>9)+O|0,L+=(O^(C|~N))+B[0]-198630844|0,L=(L<<6|L>>>26)+C|0,N+=(C^(L|~O))+B[7]+1126891415|0,N=(N<<10|N>>>22)+L|0,O+=(L^(N|~C))+B[14]-1416354905|0,O=(O<<15|O>>>17)+N|0,C+=(N^(O|~L))+B[5]-57434055|0,C=(C<<21|C>>>11)+O|0,L+=(O^(C|~N))+B[12]+1700485571|0,L=(L<<6|L>>>26)+C|0,N+=(C^(L|~O))+B[3]-1894986606|0,N=(N<<10|N>>>22)+L|0,O+=(L^(N|~C))+B[10]-1051523|0,O=(O<<15|O>>>17)+N|0,C+=(N^(O|~L))+B[1]-2054922799|0,C=(C<<21|C>>>11)+O|0,L+=(O^(C|~N))+B[8]+1873313359|0,L=(L<<6|L>>>26)+C|0,N+=(C^(L|~O))+B[15]-30611744|0,N=(N<<10|N>>>22)+L|0,O+=(L^(N|~C))+B[6]-1560198380|0,O=(O<<15|O>>>17)+N|0,C+=(N^(O|~L))+B[13]+1309151649|0,C=(C<<21|C>>>11)+O|0,L+=(O^(C|~N))+B[4]-145523070|0,L=(L<<6|L>>>26)+C|0,N+=(C^(L|~O))+B[11]-1120210379|0,N=(N<<10|N>>>22)+L|0,O+=(L^(N|~C))+B[2]+718787259|0,O=(O<<15|O>>>17)+N|0,C+=(N^(O|~L))+B[9]-343485551|0,C=(C<<21|C>>>11)+O|0,P[0]=L+P[0]|0,P[1]=C+P[1]|0,P[2]=O+P[2]|0,P[3]=N+P[3]|0}function d(P){var B=[],L;for(L=0;L<64;L+=4)B[L>>2]=P.charCodeAt(L)+(P.charCodeAt(L+1)<<8)+(P.charCodeAt(L+2)<<16)+(P.charCodeAt(L+3)<<24);return B}function h(P){var B=[],L;for(L=0;L<64;L+=4)B[L>>2]=P[L]+(P[L+1]<<8)+(P[L+2]<<16)+(P[L+3]<<24);return B}function l(P){var B=P.length,L=[1732584193,-271733879,-1732584194,271733878],C,O,N,M,k,W;for(C=64;C<=B;C+=64)o(L,d(P.substring(C-64,C)));for(P=P.substring(C-64),O=P.length,N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=0;C<O;C+=1)N[C>>2]|=P.charCodeAt(C)<<(C%4<<3);if(N[C>>2]|=128<<(C%4<<3),C>55)for(o(L,N),C=0;C<16;C+=1)N[C]=0;return M=B*8,M=M.toString(16).match(/(.*?)(.{0,8})$/),k=parseInt(M[2],16),W=parseInt(M[1],16)||0,N[14]=k,N[15]=W,o(L,N),L}function u(P){var B=P.length,L=[1732584193,-271733879,-1732584194,271733878],C,O,N,M,k,W;for(C=64;C<=B;C+=64)o(L,h(P.subarray(C-64,C)));for(P=C-64<B?P.subarray(C-64):new Uint8Array(0),O=P.length,N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],C=0;C<O;C+=1)N[C>>2]|=P[C]<<(C%4<<3);if(N[C>>2]|=128<<(C%4<<3),C>55)for(o(L,N),C=0;C<16;C+=1)N[C]=0;return M=B*8,M=M.toString(16).match(/(.*?)(.{0,8})$/),k=parseInt(M[2],16),W=parseInt(M[1],16)||0,N[14]=k,N[15]=W,o(L,N),L}function p(P){var B="",L;for(L=0;L<4;L+=1)B+=n[P>>L*8+4&15]+n[P>>L*8&15];return B}function g(P){var B;for(B=0;B<P.length;B+=1)P[B]=p(P[B]);return P.join("")}g(l("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function P(B,L){return B=B|0||0,B<0?Math.max(B+L,0):Math.min(B,L)}ArrayBuffer.prototype.slice=function(B,L){var C=this.byteLength,O=P(B,C),N=C,M,k,W,ae;return L!==e&&(N=P(L,C)),O>N?new ArrayBuffer(0):(M=N-O,k=new ArrayBuffer(M),W=new Uint8Array(k),ae=new Uint8Array(this,O,M),W.set(ae),k)}}();function v(P){return/[\u0080-\uFFFF]/.test(P)&&(P=unescape(encodeURIComponent(P))),P}function b(P,B){var L=P.length,C=new ArrayBuffer(L),O=new Uint8Array(C),N;for(N=0;N<L;N+=1)O[N]=P.charCodeAt(N);return B?O:C}function _(P){return String.fromCharCode.apply(null,new Uint8Array(P))}function S(P,B,L){var C=new Uint8Array(P.byteLength+B.byteLength);return C.set(new Uint8Array(P)),C.set(new Uint8Array(B),P.byteLength),L?C:C.buffer}function T(P){var B=[],L=P.length,C;for(C=0;C<L-1;C+=2)B.push(parseInt(P.substr(C,2),16));return String.fromCharCode.apply(String,B)}function I(){this.reset()}return I.prototype.append=function(P){return this.appendBinary(v(P)),this},I.prototype.appendBinary=function(P){this._buff+=P,this._length+=P.length;var B=this._buff.length,L;for(L=64;L<=B;L+=64)o(this._hash,d(this._buff.substring(L-64,L)));return this._buff=this._buff.substring(L-64),this},I.prototype.end=function(P){var B=this._buff,L=B.length,C,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N;for(C=0;C<L;C+=1)O[C>>2]|=B.charCodeAt(C)<<(C%4<<3);return this._finish(O,L),N=g(this._hash),P&&(N=T(N)),this.reset(),N},I.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},I.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},I.prototype.setState=function(P){return this._buff=P.buff,this._length=P.length,this._hash=P.hash,this},I.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},I.prototype._finish=function(P,B){var L=B,C,O,N;if(P[L>>2]|=128<<(L%4<<3),L>55)for(o(this._hash,P),L=0;L<16;L+=1)P[L]=0;C=this._length*8,C=C.toString(16).match(/(.*?)(.{0,8})$/),O=parseInt(C[2],16),N=parseInt(C[1],16)||0,P[14]=O,P[15]=N,o(this._hash,P)},I.hash=function(P,B){return I.hashBinary(v(P),B)},I.hashBinary=function(P,B){var L=l(P),C=g(L);return B?T(C):C},I.ArrayBuffer=function(){this.reset()},I.ArrayBuffer.prototype.append=function(P){var B=S(this._buff.buffer,P,!0),L=B.length,C;for(this._length+=P.byteLength,C=64;C<=L;C+=64)o(this._hash,h(B.subarray(C-64,C)));return this._buff=C-64<L?new Uint8Array(B.buffer.slice(C-64)):new Uint8Array(0),this},I.ArrayBuffer.prototype.end=function(P){var B=this._buff,L=B.length,C=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O,N;for(O=0;O<L;O+=1)C[O>>2]|=B[O]<<(O%4<<3);return this._finish(C,L),N=g(this._hash),P&&(N=T(N)),this.reset(),N},I.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},I.ArrayBuffer.prototype.getState=function(){var P=I.prototype.getState.call(this);return P.buff=_(P.buff),P},I.ArrayBuffer.prototype.setState=function(P){return P.buff=b(P.buff,!0),I.prototype.setState.call(this,P)},I.ArrayBuffer.prototype.destroy=I.prototype.destroy,I.ArrayBuffer.prototype._finish=I.prototype._finish,I.ArrayBuffer.hash=function(P,B){var L=u(new Uint8Array(P)),C=g(L);return B?T(C):C},I})},"../node_modules/sparqlee/dist/index.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=e.orderTypes=e.isExpressionError=e.ExpressionError=e.AggregateEvaluator=e.SyncEvaluator=e.AsyncEvaluator=void 0;var o=n("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js");Object.defineProperty(e,"AsyncEvaluator",{enumerable:!0,get:function(){return o.AsyncEvaluator}});var d=n("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");Object.defineProperty(e,"SyncEvaluator",{enumerable:!0,get:function(){return d.SyncEvaluator}});var h=n("../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js");Object.defineProperty(e,"AggregateEvaluator",{enumerable:!0,get:function(){return h.AggregateEvaluator}});var l=n("../node_modules/sparqlee/dist/lib/util/Errors.js");Object.defineProperty(e,"ExpressionError",{enumerable:!0,get:function(){return l.ExpressionError}}),Object.defineProperty(e,"isExpressionError",{enumerable:!0,get:function(){return l.isExpressionError}});var u=n("../node_modules/sparqlee/dist/lib/util/Ordering.js");Object.defineProperty(e,"orderTypes",{enumerable:!0,get:function(){return u.orderTypes}});var p=n("../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js");Object.defineProperty(e,"AsyncAggregateEvaluator",{enumerable:!0,get:function(){return p.AsyncAggregateEvaluator}})},"../node_modules/sparqlee/dist/lib/aggregators/Average.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Average=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=n("../node_modules/sparqlee/dist/lib/functions/index.js"),h=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=n("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class p extends u.BaseAggregator{constructor(){super(...arguments),this.summer=d.regularFunctions[l.RegularOperator.ADDITION],this.divider=d.regularFunctions[l.RegularOperator.DIVISION]}static emptyValue(){return(0,h.integer)(0).toRDF()}init(v){return{sum:this.termToNumericOrError(v),count:1}}put(v,b){const _=this.termToNumericOrError(b);return{sum:this.summer.apply([v.sum,_],this.sharedContext),count:v.count+1}}result(v){const b=new o.IntegerLiteral(v.count);return this.divider.apply([v.sum,b],this.sharedContext).toRDF()}}e.Average=p},"../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregator=void 0;const o=n("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),d=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),h=n("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class l{constructor(p,g){this.sharedContext=g,this.distinct=p.distinct,this.separator=p.separator||" ",this.termTransformer=new o.TermTransformer(g.superTypeProvider)}termToNumericOrError(p){if(p.termType!=="Literal")throw new Error(`Term with value ${p.value} has type ${p.termType} and is not a numeric literal`);if(!(0,h.isSubTypeOf)(p.datatype.value,d.TypeAlias.SPARQL_NUMERIC,this.sharedContext.superTypeProvider))throw new Error(`Term datatype ${p.datatype.value} with value ${p.value} has type ${p.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(p)}extractValue(p){if(p.termType!=="Literal")throw new Error(`Term with value ${p.value} has type ${p.termType} and is not a literal`);const g=this.termTransformer.transformLiteral(p);return{type:g.dataType,value:g.typedValue}}static emptyValue(){}}e.BaseAggregator=l},"../node_modules/sparqlee/dist/lib/aggregators/Count.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Count=void 0;const o=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),d=n("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class h extends d.BaseAggregator{static emptyValue(){return(0,o.integer)(0).toRDF()}init(u){return 1}put(u,p){return u+1}result(u){return(0,o.integer)(u).toRDF()}}e.Count=h},"../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupConcat=void 0;const o=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),d=n("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class h extends d.BaseAggregator{static emptyValue(){return(0,o.string)("").toRDF()}init(u){return u.value}put(u,p){return u+this.separator+p.value}result(u){return(0,o.string)(u).toRDF()}}e.GroupConcat=h},"../node_modules/sparqlee/dist/lib/aggregators/Max.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Max=void 0;const o=n("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class d extends o.BaseAggregator{init(l){const{value:u}=this.extractValue(l);return{extremeValue:u,term:l}}put(l,u){const p=this.extractValue(u);return p.value>l.extremeValue?{extremeValue:p.value,term:u}:l}result(l){return l.term}}e.Max=d},"../node_modules/sparqlee/dist/lib/aggregators/Min.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Min=void 0;const o=n("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class d extends o.BaseAggregator{init(l){const{value:u}=this.extractValue(l);return{extremeValue:u,term:l}}put(l,u){const p=this.extractValue(u);return p.value<l.extremeValue?{extremeValue:p.value,term:u}:l}result(l){return l.term}}e.Min=d},"../node_modules/sparqlee/dist/lib/aggregators/Sample.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sample=void 0;const o=n("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class d extends o.BaseAggregator{init(l){return l}put(l,u){return l}result(l){return l}}e.Sample=d},"../node_modules/sparqlee/dist/lib/aggregators/Sum.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sum=void 0;const o=n("../node_modules/sparqlee/dist/lib/functions/index.js"),d=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),h=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=n("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class u extends l.BaseAggregator{constructor(){super(...arguments),this.summer=o.regularFunctions[h.RegularOperator.ADDITION]}static emptyValue(){return(0,d.integer)(0).toRDF()}init(g){return this.termToNumericOrError(g)}put(g,v){const b=this.termToNumericOrError(v);return this.summer.apply([g,b],this.sharedContext)}result(g){return g.toRDF()}}e.Sum=u},"../node_modules/sparqlee/dist/lib/aggregators/index.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.aggregators=void 0;const o=n("../node_modules/sparqlee/dist/lib/aggregators/Average.js"),d=n("../node_modules/sparqlee/dist/lib/aggregators/Count.js"),h=n("../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js"),l=n("../node_modules/sparqlee/dist/lib/aggregators/Max.js"),u=n("../node_modules/sparqlee/dist/lib/aggregators/Min.js"),p=n("../node_modules/sparqlee/dist/lib/aggregators/Sample.js"),g=n("../node_modules/sparqlee/dist/lib/aggregators/Sum.js");e.aggregators={count:d.Count,sum:g.Sum,min:u.Min,max:l.Max,avg:o.Average,group_concat:h.GroupConcat,sample:p.Sample}},"../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AggregateEvaluator=void 0;const o=n("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js"),d=n("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");class h extends o.BaseAggregateEvaluator{constructor(u,p,g){super(u,d.SyncEvaluator.completeContext(p||{}),g),this.evaluator=new d.SyncEvaluator(u.expression,p)}put(u){this.init(u)}__put(u){try{const p=this.evaluator.evaluate(u);this.state=this.aggregator.put(this.state,p)}catch(p){this.safeThrow(p)}}safeThrow(u){if(this.throwError)throw u;this.put=()=>{},this.result=()=>{}}init(u){try{const p=this.evaluator.evaluate(u);this.state=this.aggregator.init(p),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(p){this.safeThrow(p)}}}e.AggregateEvaluator=h},"../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=void 0;const o=n("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js"),d=n("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js");class h extends d.BaseAggregateEvaluator{constructor(u,p,g){super(u,o.AsyncEvaluator.completeContext(p||{}),g),this.evaluator=new o.AsyncEvaluator(u.expression,p),this.errorOccurred=!1}put(u){return this.init(u)}async __put(u){try{const p=await this.evaluator.evaluate(u);this.state=this.aggregator.put(this.state,p)}catch(p){this.safeThrow(p)}}safeThrow(u){if(this.throwError)throw u;this.put=async()=>{},this.result=()=>{},this.errorOccurred=!0}async init(u){try{const p=await this.evaluator.evaluate(u);if(!p||this.errorOccurred)return;if(this.state){this.state=this.aggregator.put(this.state,p);return}this.state=this.aggregator.init(p),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(p){this.safeThrow(p)}}}e.AsyncAggregateEvaluator=h},"../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncEvaluator=void 0;const o=n("../node_modules/lru-cache/index.js"),d=n("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),h=n("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js");class l{constructor(p,g={}){this.algExpr=p;const v=g.extensionFunctionCreator||(()=>{}),b=l.completeContext(g),_=new d.AlgebraTransformer(Object.assign({type:"async",creator:v},b));this.expr=_.transformAlgebra(p),this.evaluator=new h.AsyncRecursiveEvaluator(b,_)}static completeContext(p){return{now:p.now||new Date(Date.now()),baseIRI:p.baseIRI||void 0,functionArgumentsCache:p.functionArgumentsCache||{},superTypeProvider:{cache:p.typeCache||new o,discoverer:p.getSuperType||(()=>"term")},extensionFunctionCreator:p.extensionFunctionCreator,exists:p.exists,aggregate:p.aggregate,bnode:p.bnode}}async evaluate(p){return(await this.evaluator.evaluate(this.expr,p)).toRDF()}async evaluateAsEBV(p){return(await this.evaluator.evaluate(this.expr,p)).coerceEBV()}async evaluateAsInternal(p){return await this.evaluator.evaluate(this.expr,p)}}e.AsyncEvaluator=l},"../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncEvaluator=void 0;const o=n("../node_modules/lru-cache/index.js"),d=n("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),h=n("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js");class l{constructor(p,g={}){this.algExpr=p,this.context=g;const v=g.extensionFunctionCreator||(()=>{}),b=l.completeContext(g),_=new d.AlgebraTransformer(Object.assign({type:"sync",creator:v},b));this.expr=_.transformAlgebra(p),this.evaluator=new h.SyncRecursiveEvaluator(b,_)}static completeContext(p){return{now:p.now||new Date(Date.now()),baseIRI:p.baseIRI||void 0,functionArgumentsCache:p.functionArgumentsCache||{},superTypeProvider:{cache:p.typeCache||new o,discoverer:p.getSuperType||(()=>"term")},extensionFunctionCreator:p.extensionFunctionCreator,exists:p.exists,aggregate:p.aggregate,bnode:p.bnode}}evaluate(p){return this.evaluator.evaluate(this.expr,p).toRDF()}evaluateAsEBV(p){return this.evaluator.evaluate(this.expr,p).coerceEBV()}evaluateAsInternal(p){return this.evaluator.evaluate(this.expr,p)}}e.SyncEvaluator=l},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncRecursiveEvaluator=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=n("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),h=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),l=n("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class u extends l.BaseExpressionEvaluator{constructor(g,v){super(v||new d.TermTransformer(g.superTypeProvider)),this.context=g,this.subEvaluators={[o.ExpressionType.Term]:this.term.bind(this),[o.ExpressionType.Variable]:this.variable.bind(this),[o.ExpressionType.Operator]:this.evalOperator.bind(this),[o.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[o.ExpressionType.Named]:this.evalNamed.bind(this),[o.ExpressionType.Existence]:this.evalExistence.bind(this),[o.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[o.ExpressionType.AsyncExtension]:this.evalAsyncExtension.bind(this)}}async evaluate(g,v){const b=this.subEvaluators[g.expressionType];if(!b)throw new h.InvalidExpressionType(g);return b.bind(this)(g,v)}async evalOperator(g,v){const b=g.args.map(S=>this.evaluate(S,v)),_=await Promise.all(b);return g.apply(_)}async evalSpecialOperator(g,v){const b=this.evaluate.bind(this),_={args:g.args,mapping:v,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:b,bnode:this.context.bnode};return g.applyAsync(_)}async _evalAsyncArgs(g,v){const b=g.map(_=>this.evaluate(_,v));return await Promise.all(b)}async evalNamed(g,v){return g.apply(await this._evalAsyncArgs(g.args,v))}async evalAsyncExtension(g,v){return await g.apply(await this._evalAsyncArgs(g.args,v))}async evalExistence(g,v){if(!this.context.exists)throw new h.NoExistenceHook;return new o.BooleanLiteral(await this.context.exists(g.expression,v))}async evalAggregate(g,v){if(!this.context.aggregate)throw new h.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(g.expression))}}e.AsyncRecursiveEvaluator=u},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregateEvaluator=void 0;const o=n("../node_modules/sparqlee/dist/lib/aggregators/index.js"),d=n("../node_modules/sparqlee/dist/lib/util/Errors.js");class h{constructor(u,p,g){this.throwError=!1,this.expression=u,this.aggregator=new o.aggregators[u.aggregator](u,p),this.throwError=g||!1}static emptyValue(u,p=!1){const g=o.aggregators[u.aggregator].emptyValue();if(g===void 0&&p)throw new d.EmptyAggregateError;return g}result(){return this.aggregator.constructor.emptyValue()}__result(){return this.aggregator.result(this.state)}}e.BaseAggregateEvaluator=h},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseExpressionEvaluator=void 0;const o=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),d=n("../node_modules/sparqlee/dist/lib/util/Errors.js");class h{constructor(u){this.termTransformer=u}term(u,p){return u}variable(u,p){const g=p.get((0,o.expressionToVar)(u));if(!g)throw new d.UnboundVariableError(u.name,p);return this.termTransformer.transformRDFTermUnsafe(g)}}e.BaseExpressionEvaluator=h},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncRecursiveEvaluator=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=n("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),h=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),l=n("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class u extends l.BaseExpressionEvaluator{constructor(g,v){super(v||new d.TermTransformer(g.superTypeProvider)),this.context=g,this.subEvaluators={[o.ExpressionType.Term]:this.term.bind(this),[o.ExpressionType.Variable]:this.variable.bind(this),[o.ExpressionType.Operator]:this.evalOperator.bind(this),[o.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[o.ExpressionType.Named]:this.evalNamed.bind(this),[o.ExpressionType.Existence]:this.evalExistence.bind(this),[o.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[o.ExpressionType.SyncExtension]:this.evalSyncExtension.bind(this)}}evaluate(g,v){const b=this.subEvaluators[g.expressionType];if(!b)throw new h.InvalidExpressionType(g);return b.bind(this)(g,v)}evalOperator(g,v){const b=g.args.map(_=>this.evaluate(_,v));return g.apply(b)}evalSpecialOperator(g,v){const b=this.evaluate.bind(this),_={args:g.args,mapping:v,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:b,bnode:this.context.bnode};return g.applySync(_)}evalNamed(g,v){const b=g.args.map(_=>this.evaluate(_,v));return g.apply(b)}evalSyncExtension(g,v){const b=g.args.map(_=>this.evaluate(_,v));return g.apply(b)}evalExistence(g,v){if(!this.context.exists)throw new h.NoExistenceHook;return new o.BooleanLiteral(this.context.exists(g.expression,v))}evalAggregate(g,v){if(!this.context.aggregate)throw new h.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(g.expression))}}e.SyncRecursiveEvaluator=u},"../node_modules/sparqlee/dist/lib/expressions/Aggregate.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Aggregate=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l,u){this.name=l,this.expression=u,this.expressionType=o.ExpressionType.Aggregate}}e.Aggregate=d},"../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncExtension=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l,u,p){this.name=l,this.args=u,this.apply=p,this.expressionType=o.ExpressionType.AsyncExtension}}e.AsyncExtension=d},"../node_modules/sparqlee/dist/lib/expressions/Existence.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Existence=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l){this.expression=l,this.expressionType=o.ExpressionType.Existence}}e.Existence=d},"../node_modules/sparqlee/dist/lib/expressions/Expressions.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asTermType=e.ExpressionType=void 0,function(o){o.Aggregate="aggregate",o.Existence="existence",o.Named="named",o.Operator="operator",o.SpecialOperator="specialOperator",o.Term="term",o.Variable="variable",o.AsyncExtension="asyncExtension",o.SyncExtension="syncExtension"}(e.ExpressionType||(e.ExpressionType={}));function n(o){if(o==="namedNode"||o==="literal"||o==="blankNode")return o}e.asTermType=n},"../node_modules/sparqlee/dist/lib/expressions/Named.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Named=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l,u,p){this.name=l,this.args=u,this.apply=p,this.expressionType=o.ExpressionType.Named}}e.Named=d},"../node_modules/sparqlee/dist/lib/expressions/Operator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Operator=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l,u){this.args=l,this.apply=u,this.expressionType=o.ExpressionType.Operator}}e.Operator=d},"../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialOperator=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l,u,p){this.args=l,this.applyAsync=u,this.applySync=p,this.expressionType=o.ExpressionType.SpecialOperator}}e.SpecialOperator=d},"../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncExtension=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l,u,p){this.name=l,this.args=u,this.apply=p,this.expressionType=o.ExpressionType.SyncExtension}}e.SyncExtension=d},"../node_modules/sparqlee/dist/lib/expressions/Term.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNonLexicalLiteral=e.NonLexicalLiteral=e.StringLiteral=e.LangStringLiteral=e.DateTimeLiteral=e.BooleanLiteral=e.DoubleLiteral=e.FloatLiteral=e.DecimalLiteral=e.IntegerLiteral=e.NumericLiteral=e.Literal=e.isLiteralTermExpression=e.BlankNode=e.NamedNode=e.Term=void 0;const o=n("../node_modules/rdf-data-factory/index.js"),d=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),h=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=n("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),p=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),g=new o.DataFactory;class v{constructor(){this.expressionType=p.ExpressionType.Term}str(){throw new l.InvalidArgumentTypes([this],d.RegularOperator.STR)}coerceEBV(){throw new l.EBVCoercionError(this)}}e.Term=v;class b extends v{constructor(G){super(),this.value=G,this.termType="namedNode"}toRDF(){return g.namedNode(this.value)}str(){return this.value}}e.NamedNode=b;class _ extends v{constructor(G){super(),this.termType="blankNode",this.value=typeof G=="string"?g.blankNode(G):G}toRDF(){return this.value}}e.BlankNode=_;function S(X){if(X.termType==="literal")return X}e.isLiteralTermExpression=S;class T extends v{constructor(G,re,F,$){super(),this.typedValue=G,this.dataType=re,this.strValue=F,this.language=$,this.termType="literal"}toRDF(){return g.literal(this.strValue||this.str(),this.language||g.namedNode(this.dataType))}str(){return this.strValue||this.typedValue.toString()}}e.Literal=T;class I extends T{constructor(G,re,F,$){super(G,re,F,$),this.typedValue=G,this.strValue=F,this.language=$}coerceEBV(){return!!this.typedValue}toRDF(){const G=super.toRDF();return Number.isFinite(this.typedValue)||(G.value=G.value.replace("Infinity","INF")),G}str(){return this.strValue||this.specificFormatter(this.typedValue)}}e.NumericLiteral=I;class P extends I{constructor(G,re,F,$){super(G,re||h.TypeURL.XSD_INTEGER,F,$),this.typedValue=G,this.strValue=F,this.language=$}specificFormatter(G){return G.toFixed(0)}}e.IntegerLiteral=P;class B extends I{constructor(G,re,F,$){super(G,re||h.TypeURL.XSD_DECIMAL,F,$),this.typedValue=G,this.strValue=F,this.language=$}specificFormatter(G){return G.toString()}}e.DecimalLiteral=B;class L extends I{constructor(G,re,F,$){super(G,re||h.TypeURL.XSD_FLOAT,F,$),this.typedValue=G,this.strValue=F,this.language=$}specificFormatter(G){return G.toString()}}e.FloatLiteral=L;class C extends I{constructor(G,re,F,$){super(G,re||h.TypeURL.XSD_DOUBLE,F,$),this.typedValue=G,this.strValue=F,this.language=$}specificFormatter(G){if(!Number.isFinite(G))return G>0?"INF":G<0?"-INF":"NaN";const re=G.toExponential(),[F,$]=re.split("e"),U=$.replace(/\+/u,"");return`${F.includes(".")?F:`${F}.0`}E${U}`}}e.DoubleLiteral=C;class O extends T{constructor(G,re,F){super(G,F||h.TypeURL.XSD_BOOLEAN,re),this.typedValue=G,this.strValue=re}coerceEBV(){return this.typedValue}}e.BooleanLiteral=O;class N extends T{constructor(G,re,F){super(G,F||h.TypeURL.XSD_DATE_TIME,re),this.typedValue=G,this.strValue=re}}e.DateTimeLiteral=N;class M extends T{constructor(G,re,F){super(G,F||h.TypeURL.RDF_LANG_STRING,G,re),this.typedValue=G,this.language=re}coerceEBV(){return this.str().length>0}}e.LangStringLiteral=M;class k extends T{constructor(G,re){super(G,re||h.TypeURL.XSD_STRING,G),this.typedValue=G}coerceEBV(){return this.str().length>0}}e.StringLiteral=k;class W extends T{constructor(G,re,F,$,U){super({toString:()=>"undefined"},h.TypeAlias.SPARQL_NON_LEXICAL,$,U),this.typeURL=re,this.openWorldType=F}coerceEBV(){if((0,u.isSubTypeOf)(this.typeURL,h.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,u.isSubTypeOf)(this.typeURL,h.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new l.EBVCoercionError(this)}toRDF(){return g.literal(this.str(),this.language||g.namedNode(this.typeURL))}str(){return this.strValue||""}}e.NonLexicalLiteral=W;function ae(X){if(X.dataType===h.TypeAlias.SPARQL_NON_LEXICAL)return X}e.isNonLexicalLiteral=ae},"../node_modules/sparqlee/dist/lib/expressions/Variable.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class d{constructor(l){this.expressionType=o.ExpressionType.Variable,this.name=l}}e.Variable=d},"../node_modules/sparqlee/dist/lib/expressions/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u);var g=Object.getOwnPropertyDescriptor(l,u);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(h,p,g)}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/Variable.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/Term.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/Operator.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/Named.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/Aggregate.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/Existence.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js"),e),d(n("../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js"),e)},"../node_modules/sparqlee/dist/lib/functions/Core.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialFunction=e.NamedFunction=e.RegularFunction=e.BaseFunction=void 0;const o=n("../node_modules/sparqlee/dist/lib/util/Errors.js");class d{constructor(v,b){this.operator=v,this.apply=(_,S)=>(this.monomorph(_,S.superTypeProvider,S.functionArgumentsCache)||this.handleInvalidTypes(_))(S)(_),this.arity=b.arity,this.overloads=b.overloads}monomorph(v,b,_){return this.overloads.search(v,b,_)}}e.BaseFunction=d;class h extends d{constructor(v,b){super(v,b),this.functionClass="regular"}handleInvalidTypes(v){throw new o.InvalidArgumentTypes(v,this.operator)}}e.RegularFunction=h;class l extends d{constructor(v,b){super(v,b),this.functionClass="named"}handleInvalidTypes(v){throw new o.InvalidArgumentTypes(v,this.operator)}}e.NamedFunction=l;class u{constructor(v,b){this.operator=v,this.functionClass="special",this.arity=b.arity,this.applySync=b.applySync,this.applyAsync=b.applyAsync,this.checkArity=b.checkArity||p(this.arity)}}e.SpecialFunction=u;function p(g){return v=>g===Number.POSITIVE_INFINITY?!0:v.length===g}},"../node_modules/sparqlee/dist/lib/functions/Helpers.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expressionToVar=e.dateTime=e.langString=e.string=e.double=e.float=e.decimal=e.integer=e.bool=e.Builder=e.declare=void 0;const o=n("../node_modules/rdf-data-factory/index.js"),d=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),h=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),p=n("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js"),g=new o.DataFactory;function v(N){return new b(N)}e.declare=v;class b{constructor(M){this.overloadTree=new p.OverloadTree(M),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}set(M,k){return this.overloadTree.addOverload(M,k),this}copy({from:M,to:k}){const W=this.overloadTree.getImplementationExact(M);if(!W)throw new u.UnexpectedError("Tried to copy implementation, but types not found",{from:M,to:k});return this.set(k,W)}onUnary(M,k){return this.set([M],W=>([ae])=>k(W)(ae))}onUnaryTyped(M,k){return this.set([M],W=>([ae])=>k(W)(ae.typedValue))}onBinary(M,k){return this.set(M,W=>([ae,X])=>k(W)(ae,X))}onBinaryTyped(M,k){return this.set(M,W=>([ae,X])=>k(W)(ae.typedValue,X.typedValue))}onTernaryTyped(M,k){return this.set(M,W=>([ae,X,G])=>k(W)(ae.typedValue,X.typedValue,G.typedValue))}onTernary(M,k){return this.set(M,W=>([ae,X,G])=>k(W)(ae,X,G))}onQuaternaryTyped(M,k){return this.set(M,W=>([ae,X,G,re])=>k(W)(ae.typedValue,X.typedValue,G.typedValue,re.typedValue))}onTerm1(M){return this.set(["term"],k=>([W])=>M(k)(W))}onLiteral1(M){return this.set(["literal"],k=>([W])=>M(k)(W))}onBoolean1(M){return this.set([h.TypeURL.XSD_BOOLEAN],k=>([W])=>M(k)(W))}onBoolean1Typed(M){return this.set([h.TypeURL.XSD_BOOLEAN],k=>([W])=>M(k)(W.typedValue))}onString1(M){return this.set([h.TypeURL.XSD_STRING],k=>([W])=>M(k)(W))}onString1Typed(M){return this.set([h.TypeURL.XSD_STRING],k=>([W])=>M(k)(W.typedValue))}onLangString1(M){return this.set([h.TypeURL.RDF_LANG_STRING],k=>([W])=>M(k)(W))}onStringly1(M){return this.set([h.TypeAlias.SPARQL_STRINGLY],k=>([W])=>M(k)(W))}onStringly1Typed(M){return this.set([h.TypeAlias.SPARQL_STRINGLY],k=>([W])=>M(k)(W.typedValue))}onNumeric1(M){return this.set([h.TypeAlias.SPARQL_NUMERIC],k=>([W])=>M(k)(W)).invalidLexicalForm([h.TypeAlias.SPARQL_NON_LEXICAL],1)}onDateTime1(M){return this.set([h.TypeURL.XSD_DATE_TIME],k=>([W])=>M(k)(W)).invalidLexicalForm([h.TypeAlias.SPARQL_NON_LEXICAL],1)}numericConverter(M){const k=W=>ae=>M(W)(ae.typedValue);return this.onBinary([l.TypeURL.XSD_INTEGER],W=>ae=>S(k(W)(ae))).onBinary([l.TypeURL.XSD_DECIMAL],W=>ae=>T(k(W)(ae))).onBinary([l.TypeURL.XSD_FLOAT],W=>ae=>I(k(W)(ae))).onBinary([l.TypeURL.XSD_DOUBLE],W=>ae=>P(k(W)(ae))).invalidLexicalForm([h.TypeAlias.SPARQL_NON_LEXICAL],1)}arithmetic(M){const k=W=>(ae,X)=>M(W)(ae.typedValue,X.typedValue);return this.onBinary([l.TypeURL.XSD_INTEGER,l.TypeURL.XSD_INTEGER],W=>(ae,X)=>S(k(W)(ae,X))).onBinary([l.TypeURL.XSD_DECIMAL,l.TypeURL.XSD_DECIMAL],W=>(ae,X)=>T(k(W)(ae,X))).onBinary([l.TypeURL.XSD_FLOAT,l.TypeURL.XSD_FLOAT],W=>(ae,X)=>I(k(W)(ae,X))).onBinary([l.TypeURL.XSD_DOUBLE,l.TypeURL.XSD_DOUBLE],W=>(ae,X)=>P(k(W)(ae,X)))}numberTest(M){return this.numeric(k=>([W,ae])=>{const X=M(k)(W.typedValue,ae.typedValue);return _(X)})}stringTest(M){return this.set([h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],k=>([W,ae])=>{const X=M(k)(W.typedValue,ae.typedValue);return _(X)}).invalidLexicalForm([h.TypeAlias.SPARQL_NON_LEXICAL,h.TypeURL.XSD_STRING],1).invalidLexicalForm([h.TypeURL.XSD_STRING,h.TypeAlias.SPARQL_NON_LEXICAL],2)}booleanTest(M){return this.set([h.TypeURL.XSD_BOOLEAN,h.TypeURL.XSD_BOOLEAN],k=>([W,ae])=>{const X=M(k)(W.typedValue,ae.typedValue);return _(X)}).invalidLexicalForm([h.TypeAlias.SPARQL_NON_LEXICAL,h.TypeURL.XSD_BOOLEAN],1).invalidLexicalForm([h.TypeURL.XSD_BOOLEAN,h.TypeAlias.SPARQL_NON_LEXICAL],2)}dateTimeTest(M){return this.set([h.TypeURL.XSD_DATE_TIME,h.TypeURL.XSD_DATE_TIME],k=>([W,ae])=>{const X=M(k)(W.typedValue,ae.typedValue);return _(X)}).invalidLexicalForm([h.TypeAlias.SPARQL_NON_LEXICAL,h.TypeURL.XSD_DATE_TIME],1).invalidLexicalForm([h.TypeURL.XSD_DATE_TIME,h.TypeAlias.SPARQL_NON_LEXICAL],2)}numeric(M){return this.set([h.TypeAlias.SPARQL_NUMERIC,h.TypeAlias.SPARQL_NUMERIC],M).invalidLexicalForm([h.TypeAlias.SPARQL_NUMERIC,h.TypeAlias.SPARQL_NON_LEXICAL],2).invalidLexicalForm([h.TypeAlias.SPARQL_NON_LEXICAL,h.TypeAlias.SPARQL_NUMERIC],1)}invalidLexicalForm(M,k){return this.set(M,()=>W=>{throw new u.InvalidLexicalForm(W[k-1].toRDF())})}}e.Builder=b;function _(N){return new d.BooleanLiteral(N)}e.bool=_;function S(N){return new d.IntegerLiteral(N)}e.integer=S;function T(N){return new d.DecimalLiteral(N)}e.decimal=T;function I(N){return new d.FloatLiteral(N)}e.float=I;function P(N){return new d.DoubleLiteral(N)}e.double=P;function B(N){return new d.StringLiteral(N)}e.string=B;function L(N,M){return new d.LangStringLiteral(N,M)}e.langString=L;function C(N,M){return new d.DateTimeLiteral(N,M)}e.dateTime=C;function O(N){return g.variable(N.name.slice(1))}e.expressionToVar=O},"../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.namedDefinitions=void 0;const o=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),d=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),h=n("../node_modules/sparqlee/dist/lib/util/Parsing.js"),l=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),u={arity:1,overloads:(0,l.declare)(o.TypeURL.XSD_STRING).onNumeric1(()=>T=>(0,l.string)((0,l.float)(T.typedValue).str())).onBoolean1Typed(()=>T=>(0,l.string)((0,l.bool)(T).str())).onTerm1(()=>T=>(0,l.string)(T.str())).collect()},p={arity:1,overloads:(0,l.declare)(o.TypeURL.XSD_FLOAT).onNumeric1(()=>T=>(0,l.float)(T.typedValue)).onBoolean1Typed(()=>T=>(0,l.float)(T?1:0)).onUnary(o.TypeURL.XSD_STRING,()=>T=>{const I=(0,h.parseXSDFloat)(T.str());if(I===void 0)throw new d.CastError(T,o.TypeURL.XSD_FLOAT);return(0,l.float)(I)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},g={arity:1,overloads:(0,l.declare)(o.TypeURL.XSD_DOUBLE).onNumeric1(()=>T=>(0,l.double)(T.typedValue)).onBoolean1Typed(()=>T=>(0,l.double)(T?1:0)).onUnary(o.TypeURL.XSD_STRING,()=>T=>{const I=(0,h.parseXSDFloat)(T.str());if(I===void 0)throw new d.CastError(T,o.TypeURL.XSD_DOUBLE);return(0,l.double)(I)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},v={arity:1,overloads:(0,l.declare)(o.TypeURL.XSD_DECIMAL).onNumeric1(()=>T=>{const I=(0,h.parseXSDDecimal)(T.str());if(I===void 0)throw new d.CastError(T,o.TypeURL.XSD_DECIMAL);return(0,l.decimal)(I)}).onString1(()=>T=>{const I=T.str(),P=/^([+-])?(\d+(\.\d+)?)$/u.test(I)?(0,h.parseXSDDecimal)(I):void 0;if(P===void 0)throw new d.CastError(T,o.TypeURL.XSD_DECIMAL);return(0,l.decimal)(P)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).onBoolean1Typed(()=>T=>(0,l.decimal)(T?1:0)).collect()},b={arity:1,overloads:(0,l.declare)(o.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>T=>(0,l.integer)(T?1:0)).onNumeric1(()=>T=>{const I=(0,h.parseXSDInteger)(T.str());if(I===void 0)throw new d.CastError(T,o.TypeURL.XSD_INTEGER);return(0,l.integer)(I)}).onString1(()=>T=>{const I=T.str(),P=/^\d+$/u.test(I)?(0,h.parseXSDInteger)(I):void 0;if(P===void 0)throw new d.CastError(T,o.TypeURL.XSD_INTEGER);return(0,l.integer)(P)}).copy({from:[o.TypeAlias.SPARQL_NUMERIC],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},_={arity:1,overloads:(0,l.declare)(o.TypeURL.XSD_DATE_TIME).onUnary(o.TypeURL.XSD_DATE_TIME,()=>T=>T).onUnary(o.TypeURL.XSD_STRING,()=>T=>{const I=new Date(T.str());if(Number.isNaN(I.getTime()))throw new d.CastError(T,o.TypeURL.XSD_DATE_TIME);return(0,l.dateTime)(I,T.str())}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},S={arity:1,overloads:(0,l.declare)(o.TypeURL.XSD_BOOLEAN).onNumeric1(()=>T=>(0,l.bool)(T.coerceEBV())).onUnary(o.TypeURL.XSD_BOOLEAN,()=>T=>(0,l.bool)(T.coerceEBV())).onUnary(o.TypeURL.XSD_STRING,()=>T=>{switch(T.str()){case"true":return(0,l.bool)(!0);case"false":return(0,l.bool)(!1);case"1":return(0,l.bool)(!0);case"0":return(0,l.bool)(!1);default:throw new d.CastError(T,o.TypeURL.XSD_BOOLEAN)}}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()};e.namedDefinitions={[o.TypeURL.XSD_STRING]:u,[o.TypeURL.XSD_FLOAT]:p,[o.TypeURL.XSD_DOUBLE]:g,[o.TypeURL.XSD_DECIMAL]:v,[o.TypeURL.XSD_INTEGER]:b,[o.TypeURL.XSD_DATE_TIME]:_,[o.TypeURL.XSD_DATE]:_,[o.TypeURL.XSD_BOOLEAN]:S}},"../node_modules/sparqlee/dist/lib/functions/OverloadTree.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),h=n("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),l=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js");class u{constructor(g,v){this.identifier=g,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=v||0,this.promotionCount=void 0}getSubtree(g){const v=(0,h.asGeneralType)(g);if(v)return this.generalOverloads[v];for(const[b,_]of this.literalOverLoads)if(g===b)return _}getImplementationExact(g){let v=this;for(const b of g)if(v=v.getSubtree(b),!v)return;return v.implementation}search(g,v,b){let _=b[this.identifier],S=0;for(;S<g.length&&_?.cache;){const P=g[S],B=(0,o.isLiteralTermExpression)(P);_=_.cache[B?B.dataType:P.termType],S++}if(S===g.length&&_?.func)return _.func;const T=[],I=0;if(g.length===0)return this.implementation;for(T.push(...this.getSubTreeWithArg(g[I],v).map(P=>({node:P,index:I+1})));T.length>0;){const{index:P,node:B}=T.pop();if(P===g.length&&B.implementation)return this.addToCache(b,g,B.implementation),B.implementation;T.push(...B.getSubTreeWithArg(g[P],v).map(L=>({node:L,index:P+1})))}}addToCache(g,v,b){function _(T,I){return I in T||(T[I]={}),T[I]}let S=_(g,this.identifier);for(const T of v){const I=(0,o.isLiteralTermExpression)(T),P=I?I.dataType:T.termType;S.cache=S.cache||{},S=_(S.cache,P)}S.func=b}addOverload(g,v){this._addOverload([...g],v,0)}_addOverload(g,v,b){const[_,...S]=g;if(!_){(this.promotionCount===void 0||b<=this.promotionCount)&&(this.promotionCount=b,this.implementation=v);return}let T=this.getSubtree(_);if(!T){const I=new u(this.identifier,this.depth+1),P=(0,h.asGeneralType)(_);P&&(this.generalOverloads[P]=I);const B=(0,h.asOverrideType)(_);B&&this.literalOverLoads.push([B,I]),T=I}T._addOverload(S,v,b),_===d.TypeURL.XSD_STRING&&this.addPromotedOverload(d.TypeURL.XSD_ANY_URI,v,I=>(0,l.string)(I.str()),S,b),_===d.TypeURL.XSD_DOUBLE&&(this.addPromotedOverload(d.TypeURL.XSD_FLOAT,v,I=>(0,l.double)(I.typedValue),S,b),this.addPromotedOverload(d.TypeURL.XSD_DECIMAL,v,I=>(0,l.double)(I.typedValue),S,b)),_===d.TypeURL.XSD_FLOAT&&this.addPromotedOverload(d.TypeURL.XSD_DECIMAL,v,I=>(0,l.float)(I.typedValue),S,b)}addPromotedOverload(g,v,b,_,S){let T=this.getSubtree(g);if(!T){const I=new u(this.identifier,this.depth+1);this.literalOverLoads.push([g,I]),T=I}T._addOverload(_,I=>P=>v(I)([...P.slice(0,this.depth),b(P[this.depth]),...P.slice(this.depth+1,P.length)]),S+1)}getSubTreeWithArg(g,v){const b=[],_=(0,o.isLiteralTermExpression)(g);if(this.generalOverloads.term&&b.push(this.generalOverloads.term),this.generalOverloads[g.termType]&&b.push(this.generalOverloads[g.termType]),_){const S=(0,h.asKnownLiteralType)(_.dataType);let T;S?T=h.superTypeDictTable[S]:T=(0,h.getSuperTypes)(_.dataType,v);const I=this.literalOverLoads.filter(([P,B])=>P in T).map(([P,B])=>[T[P],B]);I.sort(([P,B],[L,C])=>P-L),b.push(...I.map(([P,B])=>B))}return b}}e.OverloadTree=u},"../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.definitions=void 0;const o=n("../node_modules/bignumber.js/bignumber.js"),d=n("../node_modules/hash.js/lib/hash.js"),h=n("../node_modules/rdf-data-factory/index.js"),l=n("../node_modules/relative-to-absolute-iri/index.js"),u=n("../node_modules/spark-md5/spark-md5.js"),p=n("../packages/uuid/dist/index.js"),g=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),v=n("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),b=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),_=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),S=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),T=n("../node_modules/sparqlee/dist/lib/util/Parsing.js"),I=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),P=n("../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js"),B=new h.DataFactory,L={arity:1,overloads:(0,I.declare)(b.RegularOperator.NOT).onTerm1(()=>ye=>(0,I.bool)(!ye.coerceEBV())).collect()},C={arity:1,overloads:(0,I.declare)(b.RegularOperator.UPLUS).numericConverter(()=>ye=>ye).collect()},O={arity:1,overloads:(0,I.declare)(b.RegularOperator.UMINUS).numericConverter(()=>ye=>-ye).collect()},N={arity:2,overloads:(0,I.declare)(b.RegularOperator.MULTIPLICATION).arithmetic(()=>(ye,Ee)=>new o.BigNumber(ye).times(Ee).toNumber()).collect()},M={arity:2,overloads:(0,I.declare)(b.RegularOperator.DIVISION).arithmetic(()=>(ye,Ee)=>new o.BigNumber(ye).div(Ee).toNumber()).onBinaryTyped([_.TypeURL.XSD_INTEGER,_.TypeURL.XSD_INTEGER],()=>(ye,Ee)=>{if(Ee===0)throw new S.ExpressionError("Integer division by 0");return(0,I.decimal)(new o.BigNumber(ye).div(Ee).toNumber())}).collect()},k={arity:2,overloads:(0,I.declare)(b.RegularOperator.ADDITION).arithmetic(()=>(ye,Ee)=>new o.BigNumber(ye).plus(Ee).toNumber()).collect()},W={arity:2,overloads:(0,I.declare)(b.RegularOperator.SUBTRACTION).arithmetic(()=>(ye,Ee)=>new o.BigNumber(ye).minus(Ee).toNumber()).collect()},ae={arity:2,overloads:(0,I.declare)(b.RegularOperator.EQUAL).numberTest(()=>(ye,Ee)=>ye===Ee).stringTest(()=>(ye,Ee)=>ye.localeCompare(Ee)===0).booleanTest(()=>(ye,Ee)=>ye===Ee).dateTimeTest(()=>(ye,Ee)=>ye.getTime()===Ee.getTime()).set(["term","term"],()=>([ye,Ee])=>(0,I.bool)(X(ye,Ee))).collect()};function X(ye,Ee){const qe=ye.toRDF(),Xe=Ee.toRDF(),Ye=qe.equals(Xe);if(qe.termType==="Literal"&&Xe.termType==="Literal")throw new S.RDFEqualTypeError([ye,Ee]);return Ye}const G={arity:2,overloads:(0,I.declare)(b.RegularOperator.NOT_EQUAL).numberTest(()=>(ye,Ee)=>ye!==Ee).stringTest(()=>(ye,Ee)=>ye.localeCompare(Ee)!==0).booleanTest(()=>(ye,Ee)=>ye!==Ee).dateTimeTest(()=>(ye,Ee)=>ye.getTime()!==Ee.getTime()).set(["term","term"],()=>([ye,Ee])=>(0,I.bool)(!X(ye,Ee))).collect()},re={arity:2,overloads:(0,I.declare)(b.RegularOperator.LT).numberTest(()=>(ye,Ee)=>ye<Ee).stringTest(()=>(ye,Ee)=>ye.localeCompare(Ee)===-1).booleanTest(()=>(ye,Ee)=>ye<Ee).dateTimeTest(()=>(ye,Ee)=>ye.getTime()<Ee.getTime()).collect()},F={arity:2,overloads:(0,I.declare)(b.RegularOperator.GT).numberTest(()=>(ye,Ee)=>ye>Ee).stringTest(()=>(ye,Ee)=>ye.localeCompare(Ee)===1).booleanTest(()=>(ye,Ee)=>ye>Ee).dateTimeTest(()=>(ye,Ee)=>ye.getTime()>Ee.getTime()).collect()},$={arity:2,overloads:(0,I.declare)(b.RegularOperator.LTE).numberTest(()=>(ye,Ee)=>ye<=Ee).stringTest(()=>(ye,Ee)=>ye.localeCompare(Ee)!==1).booleanTest(()=>(ye,Ee)=>ye<=Ee).dateTimeTest(()=>(ye,Ee)=>ye.getTime()<=Ee.getTime()).collect()},U={arity:2,overloads:(0,I.declare)(b.RegularOperator.GTE).numberTest(()=>(ye,Ee)=>ye>=Ee).stringTest(()=>(ye,Ee)=>ye.localeCompare(Ee)!==-1).booleanTest(()=>(ye,Ee)=>ye>=Ee).dateTimeTest(()=>(ye,Ee)=>ye.getTime()>=Ee.getTime()).collect()},H={arity:1,overloads:(0,I.declare)(b.RegularOperator.IS_IRI).onTerm1(()=>ye=>(0,I.bool)(ye.termType==="namedNode")).collect()},ee={arity:1,overloads:(0,I.declare)(b.RegularOperator.IS_BLANK).onTerm1(()=>ye=>(0,I.bool)(ye.termType==="blankNode")).collect()},ge={arity:1,overloads:(0,I.declare)(b.RegularOperator.IS_LITERAL).onTerm1(()=>ye=>(0,I.bool)(ye.termType==="literal")).collect()},me={arity:1,overloads:(0,I.declare)(b.RegularOperator.IS_NUMERIC).onNumeric1(()=>ye=>(0,I.bool)(!0)).onTerm1(()=>ye=>(0,I.bool)(!1)).collect()},fe={arity:1,overloads:(0,I.declare)(b.RegularOperator.STR).onTerm1(()=>ye=>(0,I.string)(ye.str())).collect()},he={arity:1,overloads:(0,I.declare)(b.RegularOperator.LANG).onLiteral1(()=>ye=>(0,I.string)(ye.language||"")).collect()},_e={arity:1,overloads:(0,I.declare)(b.RegularOperator.DATATYPE).onLiteral1(()=>ye=>new g.NamedNode(ye.dataType)).collect()},xe={arity:1,overloads:(0,I.declare)(b.RegularOperator.IRI).set(["namedNode"],ye=>Ee=>{const qe=Ee[0],Xe=(0,l.resolve)(qe.str(),ye.baseIRI||"");return new g.NamedNode(Xe)}).onString1(ye=>Ee=>{const qe=(0,l.resolve)(Ee.str(),ye.baseIRI||"");return new g.NamedNode(qe)}).collect()},Ne={arity:2,overloads:(0,I.declare)(b.RegularOperator.STRDT).set([_.TypeURL.XSD_STRING,"namedNode"],({superTypeProvider:ye})=>([Ee,qe])=>{const Xe=B.literal(Ee.typedValue,B.namedNode(qe.value));return new v.TermTransformer(ye).transformLiteral(Xe)}).collect()},Ie={arity:2,overloads:(0,I.declare)(b.RegularOperator.STRLANG).onBinaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>new g.LangStringLiteral(ye,Ee.toLowerCase())).collect()},Pe={arity:0,overloads:(0,I.declare)(b.RegularOperator.UUID).set([],()=>()=>new g.NamedNode(`urn:uuid:${p.v4()}`)).collect()},ve={arity:0,overloads:(0,I.declare)(b.RegularOperator.STRUUID).set([],()=>()=>(0,I.string)(p.v4())).collect()},Le={arity:1,overloads:(0,I.declare)(b.RegularOperator.STRLEN).onStringly1(()=>ye=>(0,I.integer)([...ye.typedValue].length)).collect()},Fe={arity:[2,3],overloads:(0,I.declare)(b.RegularOperator.SUBSTR).onBinaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_INTEGER],()=>(ye,Ee)=>(0,I.string)([...ye].slice(Ee-1).join(""))).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.XSD_INTEGER],()=>(ye,Ee)=>{const qe=[...ye.typedValue].slice(Ee.typedValue-1).join("");return(0,I.langString)(qe,ye.language)}).onTernaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_INTEGER,_.TypeURL.XSD_INTEGER],()=>(ye,Ee,qe)=>(0,I.string)([...ye].slice(Ee-1,qe+Ee-1).join(""))).onTernary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.XSD_INTEGER,_.TypeURL.XSD_INTEGER],()=>(ye,Ee,qe)=>{const Xe=[...ye.typedValue].slice(Ee.typedValue-1,qe.typedValue+Ee.typedValue-1).join("");return(0,I.langString)(Xe,ye.language)}).collect()},Ue={arity:1,overloads:(0,I.declare)(b.RegularOperator.UCASE).onString1Typed(()=>ye=>(0,I.string)(ye.toUpperCase())).onLangString1(()=>ye=>(0,I.langString)(ye.typedValue.toUpperCase(),ye.language)).collect()},Me={arity:1,overloads:(0,I.declare)(b.RegularOperator.LCASE).onString1Typed(()=>ye=>(0,I.string)(ye.toLowerCase())).onLangString1(()=>ye=>(0,I.langString)(ye.typedValue.toLowerCase(),ye.language)).collect()},$e={arity:2,overloads:(0,I.declare)(b.RegularOperator.STRSTARTS).onBinaryTyped([_.TypeAlias.SPARQL_STRINGLY,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>(0,I.bool)(ye.startsWith(Ee))).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.RDF_LANG_STRING],()=>(ye,Ee)=>{if(ye.language!==Ee.language)throw new S.IncompatibleLanguageOperation(ye,Ee);return(0,I.bool)(ye.typedValue.startsWith(Ee.typedValue))}).collect()},q={arity:2,overloads:(0,I.declare)(b.RegularOperator.STRENDS).onBinaryTyped([_.TypeAlias.SPARQL_STRINGLY,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>(0,I.bool)(ye.endsWith(Ee))).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.RDF_LANG_STRING],()=>(ye,Ee)=>{if(ye.language!==Ee.language)throw new S.IncompatibleLanguageOperation(ye,Ee);return(0,I.bool)(ye.typedValue.endsWith(Ee.typedValue))}).collect()},oe={arity:2,overloads:(0,I.declare)(b.RegularOperator.CONTAINS).onBinaryTyped([_.TypeAlias.SPARQL_STRINGLY,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>(0,I.bool)(ye.includes(Ee))).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.RDF_LANG_STRING],()=>(ye,Ee)=>{if(ye.language!==Ee.language)throw new S.IncompatibleLanguageOperation(ye,Ee);return(0,I.bool)(ye.typedValue.includes(Ee.typedValue))}).collect()},Q={arity:2,overloads:(0,I.declare)(b.RegularOperator.STRBEFORE).onBinaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>(0,I.string)(ye.slice(0,Math.max(0,ye.indexOf(Ee))))).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>{const[qe,Xe]=[ye.typedValue,Ee.typedValue],Ye=ye.typedValue.slice(0,Math.max(0,qe.indexOf(Xe)));return Ye||!Xe?(0,I.langString)(Ye,ye.language):(0,I.string)(Ye)}).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.RDF_LANG_STRING],()=>(ye,Ee)=>{if(ye.language!==Ee.language)throw new S.IncompatibleLanguageOperation(ye,Ee);const[qe,Xe]=[ye.typedValue,Ee.typedValue],Ye=ye.typedValue.slice(0,Math.max(0,qe.indexOf(Xe)));return Ye||!Xe?(0,I.langString)(Ye,ye.language):(0,I.string)(Ye)}).collect()},Y={arity:2,overloads:(0,I.declare)(b.RegularOperator.STRAFTER).onBinaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>(0,I.string)(ye.slice(ye.indexOf(Ee)).slice(Ee.length))).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>{const[qe,Xe]=[ye.typedValue,Ee.typedValue],Ye=qe.slice(qe.indexOf(Xe)).slice(Xe.length);return Ye||!Xe?(0,I.langString)(Ye,ye.language):(0,I.string)(Ye)}).onBinary([_.TypeURL.RDF_LANG_STRING,_.TypeURL.RDF_LANG_STRING],()=>(ye,Ee)=>{if(ye.language!==Ee.language)throw new S.IncompatibleLanguageOperation(ye,Ee);const[qe,Xe]=[ye.typedValue,Ee.typedValue],Ye=qe.slice(qe.indexOf(Xe)).slice(Xe.length);return Ye||!Xe?(0,I.langString)(Ye,ye.language):(0,I.string)(Ye)}).collect()},ie={arity:1,overloads:(0,I.declare)(b.RegularOperator.ENCODE_FOR_URI).onStringly1Typed(()=>ye=>(0,I.string)(encodeURI(ye))).collect()},se={arity:2,overloads:(0,I.declare)(b.RegularOperator.LANG_MATCHES).onBinaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee)=>(0,I.bool)(P.langMatches(ye,Ee))).collect()},le=()=>(ye,Ee)=>(0,I.bool)(P.matches(ye,Ee)),ne=()=>(ye,Ee,qe)=>(0,I.bool)(P.matches(ye,Ee,qe)),ue={arity:[2,3],overloads:(0,I.declare)(b.RegularOperator.REGEX).onBinaryTyped([_.TypeAlias.SPARQL_STRINGLY,_.TypeURL.XSD_STRING],le).onTernaryTyped([_.TypeAlias.SPARQL_STRINGLY,_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],ne).collect()},de={arity:[3,4],overloads:(0,I.declare)(b.RegularOperator.REPLACE).onTernaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee,qe)=>(0,I.string)(P.replace(ye,Ee,qe))).set([_.TypeURL.RDF_LANG_STRING,_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>([ye,Ee,qe])=>{const Xe=P.replace(ye.typedValue,Ee.typedValue,qe.typedValue);return(0,I.langString)(Xe,ye.language)}).onQuaternaryTyped([_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>(ye,Ee,qe,Xe)=>(0,I.string)(P.replace(ye,Ee,qe,Xe))).set([_.TypeURL.RDF_LANG_STRING,_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING,_.TypeURL.XSD_STRING],()=>([ye,Ee,qe,Xe])=>{const Ye=P.replace(ye.typedValue,Ee.typedValue,qe.typedValue,Xe.typedValue);return(0,I.langString)(Ye,ye.language)}).collect()},pe={arity:1,overloads:(0,I.declare)(b.RegularOperator.ABS).numericConverter(()=>ye=>Math.abs(ye)).collect()},be={arity:1,overloads:(0,I.declare)(b.RegularOperator.ROUND).numericConverter(()=>ye=>Math.round(ye)).collect()},we={arity:1,overloads:(0,I.declare)(b.RegularOperator.CEIL).numericConverter(()=>ye=>Math.ceil(ye)).collect()},Se={arity:1,overloads:(0,I.declare)(b.RegularOperator.FLOOR).numericConverter(()=>ye=>Math.floor(ye)).collect()},j={arity:0,overloads:(0,I.declare)(b.RegularOperator.RAND).set([],()=>()=>(0,I.double)(Math.random())).collect()};function w(ye){return T.parseXSDDateTime(ye.str())}const E={arity:0,overloads:(0,I.declare)(b.RegularOperator.NOW).set([],ye=>()=>new g.DateTimeLiteral(ye.now,ye.now.toISOString())).collect()},D={arity:1,overloads:(0,I.declare)(b.RegularOperator.YEAR).onDateTime1(()=>ye=>(0,I.integer)(Number(w(ye).year))).collect()},V={arity:1,overloads:(0,I.declare)(b.RegularOperator.MONTH).onDateTime1(()=>ye=>(0,I.integer)(Number(w(ye).month))).collect()},Z={arity:1,overloads:(0,I.declare)(b.RegularOperator.DAY).onDateTime1(()=>ye=>(0,I.integer)(Number(w(ye).day))).collect()},ce={arity:1,overloads:(0,I.declare)(b.RegularOperator.HOURS).onDateTime1(()=>ye=>(0,I.integer)(Number(w(ye).hours))).collect()},Ae={arity:1,overloads:(0,I.declare)(b.RegularOperator.MINUTES).onDateTime1(()=>ye=>(0,I.integer)(Number(w(ye).minutes))).collect()},ke={arity:1,overloads:(0,I.declare)(b.RegularOperator.SECONDS).onDateTime1(()=>ye=>(0,I.decimal)(Number(w(ye).seconds))).collect()},Be={arity:1,overloads:(0,I.declare)(b.RegularOperator.TIMEZONE).onDateTime1(()=>ye=>{const Ee=P.formatDayTimeDuration(w(ye).timezone);if(!Ee)throw new S.InvalidTimezoneCall(ye.strValue);return new g.Literal(Ee,_.TypeURL.XSD_DAYTIME_DURATION,Ee)}).collect()},De={arity:1,overloads:(0,I.declare)(b.RegularOperator.TZ).onDateTime1(()=>ye=>(0,I.string)(w(ye).timezone)).collect()},Ce={arity:1,overloads:(0,I.declare)(b.RegularOperator.MD5).onString1Typed(()=>ye=>(0,I.string)((0,u.hash)(ye))).collect()},Ke={arity:1,overloads:(0,I.declare)(b.RegularOperator.SHA1).onString1Typed(()=>ye=>(0,I.string)((0,d.sha1)().update(ye).digest("hex"))).collect()},We={arity:1,overloads:(0,I.declare)(b.RegularOperator.SHA256).onString1Typed(()=>ye=>(0,I.string)((0,d.sha256)().update(ye).digest("hex"))).collect()},zt={arity:1,overloads:(0,I.declare)(b.RegularOperator.SHA384).onString1Typed(()=>ye=>(0,I.string)((0,d.sha384)().update(ye).digest("hex"))).collect()},yt={arity:1,overloads:(0,I.declare)(b.RegularOperator.SHA512).onString1Typed(()=>ye=>(0,I.string)((0,d.sha512)().update(ye).digest("hex"))).collect()};e.definitions={"!":L,uplus:C,uminus:O,"*":N,"/":M,"+":k,"-":W,"=":ae,"!=":G,"<":re,">":F,"<=":$,">=":U,isiri:H,isuri:H,isblank:ee,isliteral:ge,isnumeric:me,str:fe,lang:he,datatype:_e,iri:xe,uri:xe,strdt:Ne,strlang:Ie,uuid:Pe,struuid:ve,strlen:Le,substr:Fe,ucase:Ue,lcase:Me,strstarts:$e,strends:q,contains:oe,strbefore:Q,strafter:Y,encode_for_uri:ie,langmatches:se,regex:ue,replace:de,abs:pe,round:be,ceil:we,floor:Se,rand:j,now:E,year:D,month:V,day:Z,hours:ce,minutes:Ae,seconds:ke,timezone:Be,tz:De,md5:Ce,sha1:Ke,sha256:We,sha384:zt,sha512:yt}},"../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.specialDefinitions=void 0;const o=n("../packages/uuid/dist/index.js"),d=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),h=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=n("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),p=n("../node_modules/sparqlee/dist/lib/functions/index.js"),g={arity:1,async applyAsync({args:X,mapping:G}){return v({args:X,mapping:G})},applySync({args:X,mapping:G}){return v({args:X,mapping:G})}};function v({args:X,mapping:G}){const re=X[0];if(re.expressionType!==d.ExpressionType.Variable)throw new l.InvalidArgumentTypes(X,h.SpecialOperator.BOUND);const F=G.has((0,u.expressionToVar)(re));return(0,u.bool)(F)}const b={arity:3,async applyAsync({args:X,mapping:G,evaluate:re}){const $=(await re(X[0],G)).coerceEBV();return re($?X[1]:X[2],G)},applySync({args:X,mapping:G,evaluate:re}){const $=re(X[0],G).coerceEBV();return re($?X[1]:X[2],G)}},_={arity:Number.POSITIVE_INFINITY,async applyAsync({args:X,mapping:G,evaluate:re}){const F=[];for(const $ of X)try{return await re($,G)}catch(U){F.push(U)}throw new l.CoalesceError(F)},applySync({args:X,mapping:G,evaluate:re}){const F=[];for(const $ of X)try{return re($,G)}catch(U){F.push(U)}throw new l.CoalesceError(F)}},S={arity:2,async applyAsync({args:X,mapping:G,evaluate:re}){const[F,$]=X;try{if((await re(F,G)).coerceEBV())return(0,u.bool)(!0);const ge=(await re($,G)).coerceEBV();return(0,u.bool)(ge)}catch(U){if(!(await re($,G)).coerceEBV())throw U;return(0,u.bool)(!0)}},applySync({args:X,mapping:G,evaluate:re}){const[F,$]=X;try{if(re(F,G).coerceEBV())return(0,u.bool)(!0);const ge=re($,G).coerceEBV();return(0,u.bool)(ge)}catch(U){if(!re($,G).coerceEBV())throw U;return(0,u.bool)(!0)}}},T={arity:2,async applyAsync({args:X,mapping:G,evaluate:re}){const[F,$]=X;try{if(!(await re(F,G)).coerceEBV())return(0,u.bool)(!1);const ge=(await re($,G)).coerceEBV();return(0,u.bool)(ge)}catch(U){if((await re($,G)).coerceEBV())throw U;return(0,u.bool)(!1)}},applySync({args:X,mapping:G,evaluate:re}){const[F,$]=X;try{if(!re(F,G).coerceEBV())return(0,u.bool)(!1);const ge=re($,G).coerceEBV();return(0,u.bool)(ge)}catch(U){if(re($,G).coerceEBV())throw U;return(0,u.bool)(!1)}}},I={arity:2,async applyAsync({args:X,mapping:G,evaluate:re}){const[F,$]=X.map(ee=>re(ee,G)),[U,H]=await Promise.all([F,$]);return(0,u.bool)(U.toRDF().equals(H.toRDF()))},applySync({args:X,mapping:G,evaluate:re}){const[F,$]=X.map(U=>re(U,G));return(0,u.bool)(F.toRDF().equals($.toRDF()))}},P={arity:Number.POSITIVE_INFINITY,checkArity(X){return X.length>0},async applyAsync(X){const{args:G,mapping:re,evaluate:F}=X,[$,...U]=G,H=await F($,re);return B(H,Object.assign(Object.assign({},X),{args:U}),[])},applySync(X){const{args:G,mapping:re,evaluate:F}=X,[$,...U]=G,H=F($,re);return L(H,Object.assign(Object.assign({},X),{args:U}),[])}};async function B(X,G,re){const{args:F,mapping:$,evaluate:U}=G;if(F.length===0)return re.every(ee=>!ee)?(0,u.bool)(!1):Promise.reject(new l.InError(re));try{const H=F.shift(),ee=await U(H,$);return p.regularFunctions[h.RegularOperator.EQUAL].apply([X,ee],G).typedValue?(0,u.bool)(!0):B(X,G,[...re,!1])}catch(H){return B(X,G,[...re,H])}}function L(X,G,re){const{args:F,mapping:$,evaluate:U}=G;if(F.length===0){if(re.every(ee=>!ee))return(0,u.bool)(!1);throw new l.InError(re)}try{const H=F.shift(),ee=U(H,$);return p.regularFunctions[h.RegularOperator.EQUAL].apply([X,ee],G).typedValue?(0,u.bool)(!0):L(X,G,[...re,!1])}catch(H){return L(X,G,[...re,H])}}const C={arity:Number.POSITIVE_INFINITY,checkArity(X){return X.length>0},async applyAsync(X){const re=await p.specialFunctions[h.SpecialOperator.IN].applyAsync(X);return(0,u.bool)(!re.typedValue)},applySync(X){const re=p.specialFunctions[h.SpecialOperator.IN].applySync(X);return(0,u.bool)(!re.typedValue)}},O=(0,u.declare)(h.SpecialOperator.CONCAT).onStringly1(()=>X=>X).collect(),N={arity:Number.POSITIVE_INFINITY,async applyAsync(X){const{args:G,mapping:re,evaluate:F,functionArgumentsCache:$,superTypeProvider:U}=X,H=G.map(async he=>F(he,re)).map(async he=>{const _e=O.search([await he],U,$);if(!_e)throw new l.InvalidArgumentTypes(G,h.SpecialOperator.CONCAT);return _e(X)([await he])}),ee=await Promise.all(H),me=ee.map(he=>he.typedValue).join(""),fe=M(ee)?ee[0].language:void 0;return fe?(0,u.langString)(me,fe):(0,u.string)(me)},applySync(X){const{args:G,mapping:re,evaluate:F,superTypeProvider:$,functionArgumentsCache:U}=X,H=G.map(fe=>F(fe,re)).map(fe=>{const he=O.search([fe],$,U);if(!he)throw new l.InvalidArgumentTypes(G,h.SpecialOperator.CONCAT);return he(X)([fe])}),ge=H.map(fe=>fe.typedValue).join(""),me=M(H)?H[0].language:void 0;return me?(0,u.langString)(ge,me):(0,u.string)(ge)}};function M(X){return X.length>0&&X.every(G=>G.language===X[0].language)}const k=(0,u.declare)(h.SpecialOperator.BNODE).onString1(()=>X=>X).collect(),W={arity:Number.POSITIVE_INFINITY,checkArity(X){return X.length===0||X.length===1},async applyAsync(X){const{args:G,mapping:re,evaluate:F,superTypeProvider:$,functionArgumentsCache:U}=X,H=G.length===1?await F(G[0],re):void 0;let ee;if(H){const ge=k.search([H],$,U);if(!ge)throw new l.InvalidArgumentTypes(G,h.SpecialOperator.BNODE);ee=ge(X)([H]).str()}if(X.bnode){const ge=await X.bnode(ee);return new d.BlankNode(ge)}return ae(ee)},applySync(X){const{args:G,mapping:re,evaluate:F,superTypeProvider:$,functionArgumentsCache:U}=X,H=G.length===1?F(G[0],re):void 0;let ee;if(H){const ge=k.search([H],$,U);if(!ge)throw new l.InvalidArgumentTypes(G,h.SpecialOperator.BNODE);ee=ge(X)([H]).str()}if(X.bnode){const ge=X.bnode(ee);return new d.BlankNode(ge)}return ae(ee)}};function ae(X){return new d.BlankNode(X||o.v4())}e.specialDefinitions={bound:g,if:b,coalesce:_,"&&":T,"||":S,sameterm:I,in:P,notin:C,concat:N,bnode:W}},"../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatDayTimeDuration=e.langMatches=e.replace=e.matches=void 0;function n(p,g,v){return new RegExp(g,v).test(p)}e.matches=n;function o(p,g,v,b){let _=new RegExp(g,b);if(!_.global){const S=b||"";_=new RegExp(g,`${S}g`)}return p.replace(_,v)}e.replace=o;function d(p,g){const v=p.split("-"),b=g.split("-");if(!l(b[0],v[0])&&!h(v[0]))return!1;let _=1,S=1;for(;S<b.length;){if(h(b[S])){S++;continue}if(_===v.length)return!1;if(l(b[S],v[_])){_++,S++;continue}if(v[_].length===1)return!1;_++}return!0}e.langMatches=d;function h(p){return p==="*"}function l(p,g){return new RegExp(`/${p}/`,"iu").test(`/${g}/`)}function u(p){if(!p)return;let g="",v=0,b=0;if(p!=="Z"&&(g=p.startsWith("-")?"-":"",v=Number.parseInt(p.slice(1,3),10),b=Number.parseInt(p.slice(4,6),10)),v===0&&b===0)return"PT0S";let _=`${g}PT`;return v>0&&(_+=`${v}H`),b>0&&(_+=`${b}M`),_}e.formatDayTimeDuration=u},"../node_modules/sparqlee/dist/lib/functions/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(v,b,_,S){S===void 0&&(S=_);var T=Object.getOwnPropertyDescriptor(b,_);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[_]}}),Object.defineProperty(v,S,T)}:function(v,b,_,S){S===void 0&&(S=_),v[S]=b[_]}),d=this&&this.__exportStar||function(v,b){for(var _ in v)_!=="default"&&!Object.prototype.hasOwnProperty.call(b,_)&&o(b,v,_)};Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=e.namedFunctions=e.specialFunctions=e.regularFunctions=void 0;const h=n("../node_modules/sparqlee/dist/lib/functions/Core.js"),l=n("../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js"),u=n("../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js"),p=n("../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js");d(n("../node_modules/sparqlee/dist/lib/functions/Core.js"),e),e.regularFunctions=Object.fromEntries(Object.entries(u.definitions).map(([v,b])=>[v,new h.RegularFunction(v,b)])),e.specialFunctions=Object.fromEntries(Object.entries(p.specialDefinitions).map(([v,b])=>[v,new h.SpecialFunction(v,b)])),e.namedFunctions=Object.fromEntries(Object.entries(l.namedDefinitions).map(([v,b])=>[v,new h.NamedFunction(v,b)]));var g=n("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js");Object.defineProperty(e,"OverloadTree",{enumerable:!0,get:function(){return g.OverloadTree}})},"../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AlgebraTransformer=void 0;const o=n("sparqlalgebrajs"),d=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),h=n("../node_modules/sparqlee/dist/lib/functions/index.js"),l=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),p=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),g=n("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js");class v extends g.TermTransformer{constructor(_){super(_.superTypeProvider),this.algebraConfig=_,this.creatorConfig={type:_.type,creator:_.creator}}transformAlgebra(_){const S=o.Algebra.expressionTypes;switch(_.expressionType){case S.TERM:return this.transformTerm(_);case S.OPERATOR:return this.transformOperator(_);case S.NAMED:return this.transformNamed(_);case S.EXISTENCE:return v.transformExistence(_);case S.AGGREGATE:return v.transformAggregate(_);case S.WILDCARD:return v.transformWildcard(_)}}static transformWildcard(_){return new d.NamedNode(_.wildcard.value)}transformOperator(_){const S=_.operator.toLowerCase();if(l.SpecialOperators.has(S)){const B=S,L=_.args.map(O=>this.transformAlgebra(O)),C=h.specialFunctions[B];if(!C.checkArity(L))throw new u.InvalidArity(L,B);return new d.SpecialOperator(L,C.applyAsync,C.applySync)}if(!l.Operators.has(S))throw new u.UnknownOperator(_.operator);const T=S,I=_.args.map(B=>this.transformAlgebra(B)),P=h.regularFunctions[T];if(!v.hasCorrectArity(I,P.arity))throw new u.InvalidArity(I,T);return new d.Operator(I,B=>P.apply(B,this.algebraConfig))}wrapSyncFunction(_,S){return T=>{try{const I=_(T.map(P=>P.toRDF()));return this.transformRDFTermUnsafe(I)}catch(I){throw new p.ExtensionFunctionError(S,I)}}}wrapAsyncFunction(_,S){return async T=>{try{const I=await _(T.map(P=>P.toRDF()));return this.transformRDFTermUnsafe(I)}catch(I){throw new p.ExtensionFunctionError(S,I)}}}transformNamed(_){const S=_.name.value,T=_.args.map(I=>this.transformAlgebra(I));if(l.NamedOperators.has(S)){const I=_.name.value,P=h.namedFunctions[I];return new d.Named(_.name,T,B=>P.apply(B,this.algebraConfig))}if(this.creatorConfig.type==="sync"){const I=this.creatorConfig.creator(_.name);if(I){const P=this.wrapSyncFunction(I,_.name.value);return new d.SyncExtension(_.name,T,P)}}else{const I=this.creatorConfig.creator(_.name);if(I){const P=this.wrapAsyncFunction(I,_.name.value);return new d.AsyncExtension(_.name,T,P)}}throw new u.UnknownNamedOperator(_.name.value)}static hasCorrectArity(_,S){return Array.isArray(S)?S.includes(_.length):_.length===S}static transformAggregate(_){const S=_.aggregator;return new d.Aggregate(S,_)}static transformExistence(_){return new d.Existence(_)}}e.AlgebraTransformer=v},"../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TermTransformer=void 0;const o=n("../node_modules/rdf-string/index.js"),d=n("sparqlalgebrajs"),h=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=n("../node_modules/sparqlee/dist/lib/util/Errors.js"),p=n("../node_modules/sparqlee/dist/lib/util/Parsing.js"),g=n("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class v{constructor(_){this.superTypeProvider=_}transformRDFTermUnsafe(_){return this.transformTerm({term:_,type:d.Algebra.types.EXPRESSION,expressionType:d.Algebra.expressionTypes.TERM})}transformTerm(_){if(!_.term)throw new u.InvalidExpression(_);switch(_.term.termType){case"Variable":return new h.Variable(o.termToString(_.term));case"Literal":return this.transformLiteral(_.term);case"NamedNode":return new h.NamedNode(_.term.value);case"BlankNode":return new h.BlankNode(_.term.value);default:throw new u.InvalidTermType(_)}}transformLiteral(_){if(!_.datatype||[null,void 0,""].includes(_.datatype.value))return _.language?new h.LangStringLiteral(_.value,_.language):new h.StringLiteral(_.value);const S=_.datatype.value,T=(0,g.getSuperTypeDict)(S,this.superTypeProvider);if(l.TypeURL.XSD_STRING in T)return new h.StringLiteral(_.value,S);if(l.TypeURL.RDF_LANG_STRING in T)return new h.LangStringLiteral(_.value,_.language);if(l.TypeURL.XSD_DATE_TIME in T){const B=new Date(_.value);return Number.isNaN(B.getTime())?new h.NonLexicalLiteral(void 0,S,this.superTypeProvider,_.value):new h.DateTimeLiteral(new Date(_.value),_.value,S)}if(l.TypeURL.XSD_BOOLEAN in T)return _.value!=="true"&&_.value!=="false"&&_.value!=="1"&&_.value!=="0"?new h.NonLexicalLiteral(void 0,S,this.superTypeProvider,_.value):new h.BooleanLiteral(_.value==="true"||_.value==="1",_.value);if(l.TypeURL.XSD_DECIMAL in T){const B=p.parseXSDDecimal(_.value);return B===void 0?new h.NonLexicalLiteral(void 0,S,this.superTypeProvider,_.value):l.TypeURL.XSD_INTEGER in T?new h.IntegerLiteral(B,S,_.value):new h.DecimalLiteral(B,S,_.value)}const I=l.TypeURL.XSD_FLOAT in T,P=l.TypeURL.XSD_DOUBLE in T;if(I||P){const B=p.parseXSDFloat(_.value);return B===void 0?new h.NonLexicalLiteral(void 0,S,this.superTypeProvider,_.value):I?new h.FloatLiteral(B,S,_.value):new h.DoubleLiteral(B,S,_.value)}return new h.Literal(_.value,S,_.value)}}e.TermTransformer=v},"../node_modules/sparqlee/dist/lib/util/Consts.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedOperators=e.SetFunctions=e.SetFunction=e.Operators=e.SpecialOperators=e.RegularOperators=e.SpecialOperator=e.RegularOperator=e.TypeURL=e.TypeAlias=void 0,function(l){l.SPARQL_NUMERIC="SPARQL_NUMERIC",l.SPARQL_STRINGLY="SPARQL_STRINGLY",l.SPARQL_NON_LEXICAL="SPARQL_NON_LEXICAL"}(e.TypeAlias||(e.TypeAlias={}));var n;(function(l){l.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",l.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",l.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",l.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",l.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",l.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",l.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",l.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",l.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",l.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",l.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",l.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",l.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",l.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",l.XSD_INT="http://www.w3.org/2001/XMLSchema#int",l.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",l.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",l.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",l.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",l.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",l.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",l.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",l.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",l.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",l.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",l.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",l.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",l.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",l.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",l.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",l.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",l.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",l.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",l.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",l.XSD_DAYTIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(n=e.TypeURL||(e.TypeURL={}));var o;(function(l){l.NOT="!",l.UMINUS="uminus",l.UPLUS="uplus",l.EQUAL="=",l.NOT_EQUAL="!=",l.LT="<",l.GT=">",l.LTE="<=",l.GTE=">=",l.MULTIPLICATION="*",l.DIVISION="/",l.ADDITION="+",l.SUBTRACTION="-",l.IS_IRI="isiri",l.IS_URI="isuri",l.IS_BLANK="isblank",l.IS_LITERAL="isliteral",l.IS_NUMERIC="isnumeric",l.STR="str",l.LANG="lang",l.DATATYPE="datatype",l.IRI="iri",l.URI="uri",l.STRDT="strdt",l.STRLANG="strlang",l.UUID="uuid",l.STRUUID="struuid",l.STRLEN="strlen",l.SUBSTR="substr",l.UCASE="ucase",l.LCASE="lcase",l.STRSTARTS="strstarts",l.STRENDS="strends",l.CONTAINS="contains",l.STRBEFORE="strbefore",l.STRAFTER="strafter",l.ENCODE_FOR_URI="encode_for_uri",l.LANG_MATCHES="langmatches",l.REGEX="regex",l.REPLACE="replace",l.ABS="abs",l.ROUND="round",l.CEIL="ceil",l.FLOOR="floor",l.RAND="rand",l.NOW="now",l.YEAR="year",l.MONTH="month",l.DAY="day",l.HOURS="hours",l.MINUTES="minutes",l.SECONDS="seconds",l.TIMEZONE="timezone",l.TZ="tz",l.MD5="md5",l.SHA1="sha1",l.SHA256="sha256",l.SHA384="sha384",l.SHA512="sha512"})(o=e.RegularOperator||(e.RegularOperator={}));var d;(function(l){l.BOUND="bound",l.IF="if",l.COALESCE="coalesce",l.LOGICAL_OR="||",l.LOGICAL_AND="&&",l.SAME_TERM="sameterm",l.IN="in",l.NOT_IN="notin",l.CONCAT="concat",l.BNODE="bnode"})(d=e.SpecialOperator||(e.SpecialOperator={})),e.RegularOperators=new Set(Object.values(o)),e.SpecialOperators=new Set(Object.values(d)),e.Operators=new Set([...e.RegularOperators,...e.SpecialOperators]);var h;(function(l){l.COUNT="count",l.SUM="sum",l.MIN="min",l.MAX="max",l.AVG="avg",l.GROUP_CONCAT="group_concat",l.SAMPLE="sample"})(h=e.SetFunction||(e.SetFunction={})),e.SetFunctions=new Set(Object.values(h)),e.NamedOperators=new Set([n.XSD_STRING,n.XSD_FLOAT,n.XSD_DOUBLE,n.XSD_DECIMAL,n.XSD_INTEGER,n.XSD_DATE_TIME,n.XSD_DATE,n.XSD_BOOLEAN])},"../node_modules/sparqlee/dist/lib/util/Errors.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NoExistenceHook=e.NoAggregator=e.ExtensionFunctionError=e.UnknownNamedOperator=e.UnknownOperator=e.InvalidTermType=e.InvalidExpressionType=e.InvalidExpression=e.InvalidArity=e.UnexpectedError=e.EmptyAggregateError=e.IncompatibleLanguageOperation=e.InvalidTimezoneCall=e.CastError=e.InvalidArgumentTypes=e.InError=e.CoalesceError=e.RDFEqualTypeError=e.EBVCoercionError=e.UnboundVariableError=e.InvalidLexicalForm=e.isExpressionError=e.ExpressionError=void 0;class n extends Error{}e.ExpressionError=n;function o(X){return X instanceof n}e.isExpressionError=o;class d extends n{constructor(G){super(`Invalid lexical form '${ae(G)}'`),this.arg=G}}e.InvalidLexicalForm=d;class h extends n{constructor(G,re){super(`Unbound variable '${ae(G)}'`),this.variable=G,this.bindings=re}}e.UnboundVariableError=h;class l extends n{constructor(G){super(`Cannot coerce term to EBV '${ae(G)}'`),this.arg=G}}e.EBVCoercionError=l;class u extends n{constructor(G){super("Equality test for literals with unsupported datatypes"),this.args=G}}e.RDFEqualTypeError=u;class p extends n{constructor(G){super("All COALESCE arguments threw errors"),this.errors=G}}e.CoalesceError=p;class g extends n{constructor(G){super(`Some argument to IN errorred and none where equal. ${G.map(re=>`(${re.toString()}) `).join("and ")}`),this.errors=G}}e.InError=g;class v extends n{constructor(G,re){super(`Argument types not valid for operator: '${ae(re)}' with '${ae(G)}`),this.args=G,this.op=re}}e.InvalidArgumentTypes=v;class b extends n{constructor(G,re){super(`Invalid cast: '${ae(G)}' to '${ae(re)}'`),this.arg=G}}e.CastError=b;class _ extends n{constructor(G){super(`TIMEZONE call on ${G} which has no timezone`),this.dateString=G}}e.InvalidTimezoneCall=_;class S extends n{constructor(G,re){super(`Operation on incompatible language literals '${ae(G)}' and '${ae(re)}'`),this.arg1=G,this.arg2=re}}e.IncompatibleLanguageOperation=S;class T extends n{constructor(){super("Empty aggregate expression")}}e.EmptyAggregateError=T;class I extends Error{constructor(G,re){super(`Programmer Error '${G}'`),this.payload=re}}e.UnexpectedError=I;class P extends Error{constructor(G,re){super(`The number of args does not match the arity of the operator '${ae(re)}'.`),this.args=G,this.op=re}}e.InvalidArity=P;class B extends Error{constructor(G){super(`Invalid SPARQL Expression '${ae(G)}'`)}}e.InvalidExpression=B;class L extends Error{constructor(G){super(`Invalid expression type for SPARQL Expression '${ae(G)}'`),this.expr=G}}e.InvalidExpressionType=L;class C extends Error{constructor(G){super(`Invalid term type for term '${ae(G)}'`),this.term=G}}e.InvalidTermType=C;class O extends Error{constructor(G){super(`Unknown operator: '${ae(G)}`)}}e.UnknownOperator=O;class N extends Error{constructor(G){super(`Unknown named operator: '${ae(G)}'`)}}e.UnknownNamedOperator=N;class M extends Error{constructor(G,re){re instanceof Error?super(`Error thrown in ${G}: ${re.message}${re.stack?`
${re.stack}`:""}`):super(`Error thrown in ${G}`)}}e.ExtensionFunctionError=M;class k extends Error{constructor(G){super(`Aggregate expression ${ae(G)} found, but no aggregate hook provided.`)}}e.NoAggregator=k;class W extends Error{constructor(){super("EXISTS found, but no existence hook provided.")}}e.NoExistenceHook=W;function ae(X){return JSON.stringify(X)}},"../node_modules/sparqlee/dist/lib/util/Ordering.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.orderTypes=void 0;const o=n("../node_modules/lru-cache/index.js"),d=n("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),h=n("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=n("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");function u(b,_,S,T,I,P){return b===_?0:b===void 0?S?-1:1:_===void 0?S?1:-1:b.equals(_)?0:p(b,_,T,I)===S?-1:1}e.orderTypes=u;function p(b,_,S,T,I){return b.termType!==_.termType?v[b.termType]<v[_.termType]:b.termType==="Literal"?g(b,_,S,T):b.value<_.value}function g(b,_,S,T){const I={discoverer:S||(()=>"term"),cache:T||new o},P=new d.TermTransformer(I),B=P.transformLiteral(b),L=P.transformLiteral(_),C=B.dataType,O=L.dataType,N=(0,l.getSuperTypeDict)(C,I),M=(0,l.getSuperTypeDict)(O,I);return h.TypeURL.XSD_BOOLEAN in N&&h.TypeURL.XSD_BOOLEAN in M||h.TypeURL.XSD_DATE_TIME in N&&h.TypeURL.XSD_DATE_TIME in M||h.TypeAlias.SPARQL_NUMERIC in N&&h.TypeAlias.SPARQL_NUMERIC in M||h.TypeURL.XSD_STRING in N&&h.TypeURL.XSD_STRING in M?B.typedValue<L.typedValue:h.TypeURL.RDF_LANG_STRING in N&&h.TypeURL.RDF_LANG_STRING in M?B.typedValue<L.typedValue||B.typedValue===L.typedValue&&B.language<L.language:C<O||B.dataType===L.dataType&&B.str()<L.str()}const v={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}},"../node_modules/sparqlee/dist/lib/util/Parsing.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseXSDDateTime=e.parseXSDInteger=e.parseXSDDecimal=e.parseXSDFloat=void 0;function n(l){const u=Number(l);return Number.isNaN(u)?l==="NaN"?Number.NaN:l==="INF"||l==="+INF"?Number.POSITIVE_INFINITY:l==="-INF"?Number.NEGATIVE_INFINITY:void 0:u}e.parseXSDFloat=n;function o(l){const u=Number(l);return Number.isNaN(u)?void 0:u}e.parseXSDDecimal=o;function d(l){const u=Number.parseInt(l,10);return Number.isNaN(u)?void 0:u}e.parseXSDInteger=d;function h(l){const u=l.indexOf("T"),p=u>=0?l.slice(0,Math.max(0,u)):l,[g,v,b]=p.split("-");let _="00",S="00",T="00",I="";if(u>=0){const P=l.slice(u+1),[B,L]=P.split(/[+Z-]/u);[_,S,T]=B.split(":");const C=/([+Z-].*)/u.exec(P);I=C?C[0]:""}return{year:g,month:v,day:b,hours:_,minutes:S,seconds:T,timezone:I}}e.parseXSDDateTime=h},"../node_modules/sparqlee/dist/lib/util/TypeHandling.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isSubTypeOf=e.getSuperTypeDict=e.isInternalSubType=e.asGeneralType=e.asOverrideType=e.asKnownLiteralType=e.asTypeAlias=e.typeAliasCheck=e.extensionTableInit=e.getSuperTypes=e.superTypeDictTable=e.extensionTableInput=void 0;const o=n("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=n("../node_modules/sparqlee/dist/lib/util/Consts.js");e.extensionTableInput={[d.TypeURL.XSD_DATE_TIME_STAMP]:d.TypeURL.XSD_DATE_TIME,[d.TypeURL.XSD_DAYTIME_DURATION]:d.TypeURL.XSD_DURATION,[d.TypeURL.XSD_YEAR_MONTH_DURATION]:d.TypeURL.XSD_DURATION,[d.TypeURL.RDF_LANG_STRING]:d.TypeAlias.SPARQL_STRINGLY,[d.TypeURL.XSD_STRING]:d.TypeAlias.SPARQL_STRINGLY,[d.TypeURL.XSD_NORMALIZED_STRING]:d.TypeURL.XSD_STRING,[d.TypeURL.XSD_TOKEN]:d.TypeURL.XSD_NORMALIZED_STRING,[d.TypeURL.XSD_LANGUAGE]:d.TypeURL.XSD_TOKEN,[d.TypeURL.XSD_NM_TOKEN]:d.TypeURL.XSD_TOKEN,[d.TypeURL.XSD_NAME]:d.TypeURL.XSD_TOKEN,[d.TypeURL.XSD_NC_NAME]:d.TypeURL.XSD_NAME,[d.TypeURL.XSD_ENTITY]:d.TypeURL.XSD_NC_NAME,[d.TypeURL.XSD_ID]:d.TypeURL.XSD_NC_NAME,[d.TypeURL.XSD_ID_REF]:d.TypeURL.XSD_NC_NAME,[d.TypeURL.XSD_DOUBLE]:d.TypeAlias.SPARQL_NUMERIC,[d.TypeURL.XSD_FLOAT]:d.TypeAlias.SPARQL_NUMERIC,[d.TypeURL.XSD_DECIMAL]:d.TypeAlias.SPARQL_NUMERIC,[d.TypeURL.XSD_INTEGER]:d.TypeURL.XSD_DECIMAL,[d.TypeURL.XSD_NON_POSITIVE_INTEGER]:d.TypeURL.XSD_INTEGER,[d.TypeURL.XSD_NEGATIVE_INTEGER]:d.TypeURL.XSD_NON_POSITIVE_INTEGER,[d.TypeURL.XSD_LONG]:d.TypeURL.XSD_INTEGER,[d.TypeURL.XSD_INT]:d.TypeURL.XSD_LONG,[d.TypeURL.XSD_SHORT]:d.TypeURL.XSD_INT,[d.TypeURL.XSD_BYTE]:d.TypeURL.XSD_SHORT,[d.TypeURL.XSD_NON_NEGATIVE_INTEGER]:d.TypeURL.XSD_INTEGER,[d.TypeURL.XSD_POSITIVE_INTEGER]:d.TypeURL.XSD_NON_NEGATIVE_INTEGER,[d.TypeURL.XSD_UNSIGNED_LONG]:d.TypeURL.XSD_NON_NEGATIVE_INTEGER,[d.TypeURL.XSD_UNSIGNED_INT]:d.TypeURL.XSD_UNSIGNED_LONG,[d.TypeURL.XSD_UNSIGNED_SHORT]:d.TypeURL.XSD_UNSIGNED_INT,[d.TypeURL.XSD_UNSIGNED_BYTE]:d.TypeURL.XSD_UNSIGNED_SHORT,[d.TypeURL.XSD_DATE_TIME]:"term",[d.TypeURL.XSD_BOOLEAN]:"term",[d.TypeURL.XSD_DATE]:"term",[d.TypeURL.XSD_DURATION]:"term",[d.TypeAlias.SPARQL_NUMERIC]:"term",[d.TypeAlias.SPARQL_STRINGLY]:"term",[d.TypeAlias.SPARQL_NON_LEXICAL]:"term",[d.TypeURL.XSD_ANY_URI]:"term"};function h(P,B){const L=B.cache.get(P);if(L)return L;const C=B.discoverer(P);if(C==="term"){const M=Object.create(null);return M.__depth=0,M[P]=0,B.cache.set(P,M),M}let O;const N=v(C);return N?O=Object.assign({},e.superTypeDictTable[N]):O=Object.assign({},h(C,B)),O.__depth++,O[P]=O.__depth,B.cache.set(P,O),O}e.getSuperTypes=h;function l(){const P=Object.create(null);for(const[B,L]of Object.entries(e.extensionTableInput)){const C=B;P[C]||u(C,L,P)}e.superTypeDictTable=P}e.extensionTableInit=l,l();function u(P,B,L){if(B==="term"||B===void 0){const C=Object.create(null);C.__depth=0,C[P]=0,L[P]=C;return}L[B]||u(B,e.extensionTableInput[B],L),L[P]=Object.assign(Object.assign({},L[B]),{[P]:L[B].__depth+1,__depth:L[B].__depth+1})}function p(){e.typeAliasCheck=Object.create(null);for(const P of Object.values(d.TypeAlias))e.typeAliasCheck[P]=!0}p();function g(P){if(P in e.typeAliasCheck)return P}e.asTypeAlias=g;function v(P){if(P in e.superTypeDictTable)return P}e.asKnownLiteralType=v;function b(P){if(v(P)||P==="term")return P}e.asOverrideType=b;function _(P){if(P==="term"||(0,o.asTermType)(P))return P}e.asGeneralType=_;function S(P,B){return P!=="term"&&e.superTypeDictTable[P]&&e.superTypeDictTable[P][B]!==void 0}e.isInternalSubType=S;function T(P,B){const L=v(P);return L?e.superTypeDictTable[L]:h(P,B)}e.getSuperTypeDict=T;function I(P,B,L){return P==="term"?!1:T(P,L)[B]!==void 0}e.isSubTypeOf=I},"../node_modules/stream-to-string/index.js":(t,e,n)=>{var o=n("./require-empty.js");t.exports=function(d,h,l){typeof h=="function"&&(l=h,h=null),l=l||function(){};var u="";return new o(function(p,g){d.on("data",function(v){u+=typeof h=="string"?v.toString(h):v.toString()}),d.on("end",function(){p(u),l(null,u)}),d.on("error",function(v){g(v),l(v)})})}},"../node_modules/typed-immutable-map/dist/HashMap/empty.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=void 0;const d={node:n("../node_modules/typed-immutable-map/dist/nodes/index.js").EMPTY,size:0};function h(){return d}e.empty=h},"../node_modules/typed-immutable-map/dist/HashMap/entries.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.entries=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function d(l){return(0,o.iterator)((0,o.getNode)(l),h)}e.entries=d;function h(l){return[l.key,l.value]}},"../node_modules/typed-immutable-map/dist/HashMap/filter.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),d=n("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),h=n("../node_modules/typed-immutable-map/dist/HashMap/set.js"),l=function(p,g){return(0,d.reduce)(function(v,b,_){return p(b,_)?(0,h.set)(_,b,v):v},(0,o.empty)(),g)};e.filter=l},"../node_modules/typed-immutable-map/dist/HashMap/forEach.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),d=function(l,u){return(0,o.reduce)((p,g,v)=>l(g,v),null,u),u};e.forEach=d},"../node_modules/typed-immutable-map/dist/HashMap/from.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromObject=e.fromIterable=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),d=n("../node_modules/typed-immutable-map/dist/HashMap/set.js");function h(u){let p=(0,o.empty)();for(const[g,v]of u)p=(0,d.set)(g,v,p);return p}e.fromIterable=h;function l(u){let p=(0,o.empty)();for(let g in u)u.hasOwnProperty(g)&&(p=(0,d.set)(g,u[g],p));return p}e.fromObject=l},"../node_modules/typed-immutable-map/dist/HashMap/get.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.get=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function d(h,l,u){const p=(0,o.findHash)(h);return(0,o.getHash)(void 0,p,h,l,u)}e.get=d},"../node_modules/typed-immutable-map/dist/HashMap/has.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.has=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),d=n("../node_modules/typed-immutable-map/dist/nodes/index.js");function h(l,u,p){const g=(0,o.findHash)(l);return(0,o.getHash)(d.NOTHING,g,l,u,p)!==d.NOTHING}e.has=h},"../node_modules/typed-immutable-map/dist/HashMap/keys.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.keys=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function d(l){return(0,o.iterator)((0,o.getNode)(l),h)}e.keys=d;function h(l){return l.key}},"../node_modules/typed-immutable-map/dist/HashMap/map.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),d=n("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),h=n("../node_modules/typed-immutable-map/dist/HashMap/set.js"),l=function(p,g){return(0,d.reduce)(function(v,b,_){return(0,h.set)(_,p(b,_),v)},(0,o.empty)(),g)};e.map=l},"../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findHash=void 0;const o=n("../node_modules/typed-immutable-map/dist/common/index.js");function d(h){return typeof h=="number"?h:typeof h=="string"?(0,o.stringHash)(h):Math.abs((0,o.stringHash)(JSON.stringify(h)))}e.findHash=d},"../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fold=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function d(h,l,u){const p=(0,o.getNode)(u);if(p.type===0)return l;if(p.type===1)return h(l,p.value,p.key);const g=[p.children];let v;for(;v=g.shift();)for(let b=0;b<v.length;++b){const _=v[b];_&&_.type!==0&&(_.type===1?l=h(l,_.value,_.key):g.push(_.children))}return l}e.fold=d},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=void 0;const o=n("../node_modules/typed-immutable-map/dist/common/index.js"),d=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),h=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js");function l(u,p,g,v,b=h.defaultKeyEquals){let _=(0,d.getNode)(v),S=0;for(;;)switch(_.type){case 1:return b(g,_.key)?_.value:u;case 2:if(p===_.hash){const T=_.children;for(let I=0;I<T.length;++I){const P=T[I];if(b(g,P.key))return P.value}return u}case 3:{const T=(0,o.hashFragment)(S,p),I=(0,o.toBitmap)(T);if(_.mask&I){const P=(0,o.bitmapToIndex)(_.mask,I);_=_.children[P],S+=o.SIZE;break}return u}case 4:{if(_=_.children[(0,o.hashFragment)(S,p)],_){S+=o.SIZE;break}return u}default:return u}}e.getHash=l},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=void 0;function n(o){return o.node}e.getNode=n},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSize=void 0;function n(o){return o.size}e.getSize=n},"../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js"),e),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),e),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),e),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js"),e),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),e),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js"),e),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js"),e),d(n("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js"),e)},"../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=void 0;function n(p,g){return new o(h(p,g,[]))}e.iterator=n;class o{_iterate;constructor(g){this._iterate=g}next(){if(!this._iterate)return{done:!0,value:null};const{value:g,rest:v}=this._iterate;return this._iterate=d(v),{done:!1,value:g}}[Symbol.iterator](){return this}}const d=p=>p&&l(p[0],p[1],p[2],p[3],p[4]);function h(p,g,v){switch(p.type){case 1:return{value:g(p),rest:v};case 2:case 4:case 3:const b=p.children;return l(b.length,b,0,g,v);default:return d(v)}}function l(p,g,v,b,_){for(;v<p;){const S=g[v++];if(S&&u(S))return h(S,b,[p,g,v,b,_])}return d(_)}function u(p){return p&&p.type!==0}},"../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultKeyEquals=void 0;const n=(o,d)=>o===d;e.defaultKeyEquals=n},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setKeyValue=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/index.js"),d=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),h=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),l=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js"),u=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),p=v=>()=>v;function g(v,b,_){const S=(0,d.findHash)(v),T={value:(0,l.getSize)(_)},I=(0,o.modify)((0,h.getNode)(_),0,p(b),S,v,T);return(0,u.setTree)(I,T.value,_)}e.setKeyValue=g},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setTree=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function d(h,l,u){return h===(0,o.getNode)(u)?u:{node:h,size:l}}e.setTree=d},"../node_modules/typed-immutable-map/dist/HashMap/reduce.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.reduce=o.fold},"../node_modules/typed-immutable-map/dist/HashMap/remove.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.remove=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),d=n("../node_modules/typed-immutable-map/dist/nodes/constants.js");function h(l,u){return(0,o.setKeyValue)(l,d.NOTHING,u)}e.remove=h},"../node_modules/typed-immutable-map/dist/HashMap/set.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.set=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.set=o.setKeyValue},"../node_modules/typed-immutable-map/dist/HashMap/size.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.size=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js");function d(h){return(0,o.getSize)(h)}e.size=d},"../node_modules/typed-immutable-map/dist/HashMap/values.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.values=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function d(l){return(0,o.iterator)((0,o.getNode)(l),h)}e.values=d;function h(l){return l.value}},"../node_modules/typed-immutable-map/dist/common/array-operations.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.remove=e.replace=void 0;function n(h,l,u){const p=u.length,g=Array(p);for(let v=0;v<p;++v)g[v]=u[v];return g[h]=l,g}e.replace=n;function o(h,l){const u=l.length;if(u===0||h>=u)return l;if(u===1)return[];const p=Array(u-1);let g=0;for(;g<h;++g)p[g]=l[g];for(g=g+1;g<u;++g)p[g-1]=l[g];return p}e.remove=o;function d(h,l,u){const p=u.length,g=Array(p+1);let v=0;for(;v<h;++v)g[v]=u[v];for(g[v++]=l;v<p+1;++v)g[v]=u[v-1];return g}e.insert=d},"../node_modules/typed-immutable-map/dist/common/bitwise-operations.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bitmapToIndex=e.toBitmap=e.hashFragment=e.hammingWeight=void 0;const o=n("../node_modules/typed-immutable-map/dist/common/constants.js");function d(p){return p=p-(p>>1&1431655765),p=(p&858993459)+(p>>2&858993459),(p+(p>>4)&252645135)*16843009>>24}e.hammingWeight=d;function h(p,g){return g>>>p&o.MASK}e.hashFragment=h;function l(p){return 1<<p}e.toBitmap=l;function u(p,g){return d(p&g-1)}e.bitmapToIndex=u},"../node_modules/typed-immutable-map/dist/common/constants.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_ARRAY_NODE=e.MAX_INDEX_NODE=e.MASK=e.BUCKET_SIZE=e.SIZE=void 0,e.SIZE=5,e.BUCKET_SIZE=Math.pow(2,e.SIZE),e.MASK=e.BUCKET_SIZE-1,e.MAX_INDEX_NODE=e.BUCKET_SIZE/2,e.MIN_ARRAY_NODE=e.BUCKET_SIZE/4},"../node_modules/typed-immutable-map/dist/common/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/typed-immutable-map/dist/common/array-operations.js"),e),d(n("../node_modules/typed-immutable-map/dist/common/bitwise-operations.js"),e),d(n("../node_modules/typed-immutable-map/dist/common/constants.js"),e),d(n("../node_modules/typed-immutable-map/dist/common/stringHash.js"),e)},"../node_modules/typed-immutable-map/dist/common/stringHash.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringHash=void 0;function n(o){let d=0;for(let h=0;h<o.length;++h)d=(d<<5)-d+o.charCodeAt(h)|0;return d}e.stringHash=n},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyListNode=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),d=n("../node_modules/typed-immutable-map/dist/nodes/modify.js"),h=n("../node_modules/typed-immutable-map/dist/common/index.js"),l=n("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js");function u(g,v,b,_,S,T){const{size:I,children:P}=g,B=(0,h.hashFragment)(v,_),L=P[B],C=(0,d.modify)(L||(0,o.empty)(),v+h.SIZE,b,_,S,T);return L===C?g:p(L)&&!p(C)?{type:4,size:I+1,children:(0,h.replace)(B,C,P)}:!p(L)&&p(C)?I-1<=h.MIN_ARRAY_NODE?(0,l.toIndexNode)(I,B,P):{type:4,size:I-1,children:(0,h.replace)(B,(0,o.empty)(),P)}:{type:4,size:I,children:(0,h.replace)(B,C,P)}}e.modifyListNode=u;function p(g){return g&&g.type===0}},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toIndexNode=void 0;function n(o,d,h){const l=new Array(o-1);let u=0,p=0;for(let g=0;g<h.length;++g)if(g!==d){const v=h[g];v&&v.type>0&&(l[u++]=v,p|=1<<g)}return{type:3,mask:p,children:l}}e.toIndexNode=n},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyCollisionNode=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/constants.js"),d=n("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),h=n("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js");function l(u,p,g,v,b,_){if(v===u.hash){const T=(0,h.newCollisionList)(u.hash,u.children,g,b,_);return T===u.children?u:T.length>1?{type:2,hash:u.hash,children:T}:T[0]}const S=g();return S===o.NOTHING?u:(++_.value,(0,d.combineLeafNodes)(p,u.hash,u,v,{type:1,hash:v,key:b,value:S}))}e.modifyCollisionNode=l},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.newCollisionList=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/constants.js"),d=n("../node_modules/typed-immutable-map/dist/common/index.js");function h(l,u,p,g,v){const b=u.length;for(let S=0;S<b;++S){const T=u[S];if(T.key===g){const I=T.value,P=p(I);return P===I?u:P===o.NOTHING?(--v.value,(0,d.remove)(S,u)):(0,d.insert)(S,{type:1,hash:l,key:g,value:P},u)}}const _=p();return _===o.NOTHING?u:(++v.value,(0,d.insert)(b,{type:1,hash:l,key:g,value:_},u))}e.newCollisionList=h},"../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=e.modifyEmpty=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/constants.js");function d(l,u,p,g,v,b){const _=p(void 0);return _===o.NOTHING?l:(++b.value,{type:1,hash:g,key:v,value:_})}e.modifyEmpty=d,e.EMPTY={type:0};function h(){return e.EMPTY}e.empty=h},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyIndexedNode=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),d=n("../node_modules/typed-immutable-map/dist/common/index.js"),h=n("../node_modules/typed-immutable-map/dist/nodes/modify.js"),l=n("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js");function u(g,v,b,_,S,T){const{mask:I,children:P}=g,B=(0,d.hashFragment)(v,_),L=(0,d.toBitmap)(B),C=(0,d.bitmapToIndex)(I,L),O=!!(I&L),N=O?P[C]:(0,o.empty)(),M=(0,h.modify)(N,v+d.SIZE,b,_,S,T);if(N===M)return g;if(O&&M.type===0){const k=I&~L;return k?P.length<=2&&p(P[C^1])?P[C^1]:{type:3,mask:k,children:(0,d.remove)(C,P)}:(0,o.empty)()}return!O&&M.type!==0?P.length>=d.MAX_INDEX_NODE?(0,l.toArrayNode)(B,M,I,P):{type:3,mask:I|L,children:(0,d.insert)(C,M,P)}:{type:3,mask:I,children:(0,d.replace)(C,M,P)}}e.modifyIndexedNode=u;function p(g){const v=g.type;return v===0||v===1||v===2}},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArrayNode=void 0;function n(o,d,h,l){const u=[];let p=h,g=0;for(let v=0;p;++v)p&1&&(u[v]=l[g++]),p>>>=1;return u[o]=d,{type:4,size:g+1,children:u}}e.toArrayNode=n},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyLeaf=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/constants.js"),d=n("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),h=n("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js");function l(u,p,g,v,b,_){if(b===u.key){const T=g(u.value);return T===u.value?u:T===o.NOTHING?(--_.value,(0,d.empty)()):{type:1,hash:v,key:b,value:T}}const S=g();return S===o.NOTHING?u:(++_.value,(0,h.combineLeafNodes)(p,u.hash,u,v,{type:1,hash:v,key:b,value:S}))}e.modifyLeaf=l},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLeafNodes=void 0;const o=n("../node_modules/typed-immutable-map/dist/common/index.js");function d(h,l,u,p,g){if(l===p)return{type:2,hash:l,children:[g,u]};const v=(0,o.hashFragment)(h,l),b=(0,o.hashFragment)(h,p);return{type:3,mask:(0,o.toBitmap)(v)|(0,o.toBitmap)(b),children:v===b?[d(h+o.SIZE,l,u,p,g)]:v<b?[u,g]:[g,u]}}e.combineLeafNodes=d},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/constants.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NOTHING=void 0,e.NOTHING=Object.create(null)},"../node_modules/typed-immutable-map/dist/nodes/index.js":function(t,e,n){var o=this&&this.__createBinding||(Object.create?function(h,l,u,p){p===void 0&&(p=u),Object.defineProperty(h,p,{enumerable:!0,get:function(){return l[u]}})}:function(h,l,u,p){p===void 0&&(p=u),h[p]=l[u]}),d=this&&this.__exportStar||function(h,l){for(var u in h)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&o(l,h,u)};Object.defineProperty(e,"__esModule",{value:!0}),d(n("../node_modules/typed-immutable-map/dist/nodes/types.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/constants.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),e),d(n("../node_modules/typed-immutable-map/dist/nodes/modify.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/modify.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modify=void 0;const o=n("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),d=n("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),h=n("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),l=n("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),u=n("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js");function p(g,v,b,_,S,T){switch(g.type){case 1:return(0,o.modifyLeaf)(g,v,b,_,S,T);case 0:return(0,d.modifyEmpty)(g,v,b,_,S,T);case 4:return(0,h.modifyListNode)(g,v,b,_,S,T);case 3:return(0,l.modifyIndexedNode)(g,v,b,_,S,T);case 2:return(0,u.modifyCollisionNode)(g,v,b,_,S,T);default:throw new Error("never")}}e.modify=p},"../node_modules/typed-immutable-map/dist/nodes/types.js":(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/uuid-random/index.js":(t,e,n)=>{(function(){var o,d=0,h=[],l;for(l=0;l<256;l++)h[l]=(l+256).toString(16).substr(1);v.BUFFER_SIZE=4096,v.bin=g,v.clearBuffer=function(){o=null,d=0},v.test=function(b){return typeof b=="string"?/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(b):!1};var u;typeof crypto<"u"?u=crypto:typeof window<"u"&&typeof window.msCrypto<"u"&&(u=window.msCrypto),u=u||n("?699d"),t.exports=v,v.randomBytes=function(){if(u){if(u.randomBytes)return u.randomBytes;if(u.getRandomValues)return typeof Uint8Array.prototype.slice!="function"?function(b){var _=new Uint8Array(b);return u.getRandomValues(_),Array.from(_)}:function(b){var _=new Uint8Array(b);return u.getRandomValues(_),_}}return function(b){var _,S=[];for(_=0;_<b;_++)S.push(Math.floor(Math.random()*256));return S}}();function p(b){return(!o||d+b>v.BUFFER_SIZE)&&(d=0,o=v.randomBytes(v.BUFFER_SIZE)),o.slice(d,d+=b)}function g(){var b=p(16);return b[6]=b[6]&15|64,b[8]=b[8]&63|128,b}function v(){var b=g();return h[b[0]]+h[b[1]]+h[b[2]]+h[b[3]]+"-"+h[b[4]]+h[b[5]]+"-"+h[b[6]]+h[b[7]]+"-"+h[b[8]]+h[b[9]]+"-"+h[b[10]]+h[b[11]]+h[b[12]]+h[b[13]]+h[b[14]]+h[b[15]]}})()},"../node_modules/yallist/iterator.js":t=>{t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let n=this.head;n;n=n.next)yield n.value}}},"../node_modules/yallist/yallist.js":(t,e,n)=>{t.exports=o,o.Node=u,o.create=o;function o(p){var g=this;if(g instanceof o||(g=new o),g.tail=null,g.head=null,g.length=0,p&&typeof p.forEach=="function")p.forEach(function(_){g.push(_)});else if(arguments.length>0)for(var v=0,b=arguments.length;v<b;v++)g.push(arguments[v]);return g}o.prototype.removeNode=function(p){if(p.list!==this)throw new Error("removing node which does not belong to this list");var g=p.next,v=p.prev;return g&&(g.prev=v),v&&(v.next=g),p===this.head&&(this.head=g),p===this.tail&&(this.tail=v),p.list.length--,p.next=null,p.prev=null,p.list=null,g},o.prototype.unshiftNode=function(p){if(p!==this.head){p.list&&p.list.removeNode(p);var g=this.head;p.list=this,p.next=g,g&&(g.prev=p),this.head=p,this.tail||(this.tail=p),this.length++}},o.prototype.pushNode=function(p){if(p!==this.tail){p.list&&p.list.removeNode(p);var g=this.tail;p.list=this,p.prev=g,g&&(g.next=p),this.tail=p,this.head||(this.head=p),this.length++}},o.prototype.push=function(){for(var p=0,g=arguments.length;p<g;p++)h(this,arguments[p]);return this.length},o.prototype.unshift=function(){for(var p=0,g=arguments.length;p<g;p++)l(this,arguments[p]);return this.length},o.prototype.pop=function(){if(this.tail){var p=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,p}},o.prototype.shift=function(){if(this.head){var p=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,p}},o.prototype.forEach=function(p,g){g=g||this;for(var v=this.head,b=0;v!==null;b++)p.call(g,v.value,b,this),v=v.next},o.prototype.forEachReverse=function(p,g){g=g||this;for(var v=this.tail,b=this.length-1;v!==null;b--)p.call(g,v.value,b,this),v=v.prev},o.prototype.get=function(p){for(var g=0,v=this.head;v!==null&&g<p;g++)v=v.next;if(g===p&&v!==null)return v.value},o.prototype.getReverse=function(p){for(var g=0,v=this.tail;v!==null&&g<p;g++)v=v.prev;if(g===p&&v!==null)return v.value},o.prototype.map=function(p,g){g=g||this;for(var v=new o,b=this.head;b!==null;)v.push(p.call(g,b.value,this)),b=b.next;return v},o.prototype.mapReverse=function(p,g){g=g||this;for(var v=new o,b=this.tail;b!==null;)v.push(p.call(g,b.value,this)),b=b.prev;return v},o.prototype.reduce=function(p,g){var v,b=this.head;if(arguments.length>1)v=g;else if(this.head)b=this.head.next,v=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var _=0;b!==null;_++)v=p(v,b.value,_),b=b.next;return v},o.prototype.reduceReverse=function(p,g){var v,b=this.tail;if(arguments.length>1)v=g;else if(this.tail)b=this.tail.prev,v=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var _=this.length-1;b!==null;_--)v=p(v,b.value,_),b=b.prev;return v},o.prototype.toArray=function(){for(var p=new Array(this.length),g=0,v=this.head;v!==null;g++)p[g]=v.value,v=v.next;return p},o.prototype.toArrayReverse=function(){for(var p=new Array(this.length),g=0,v=this.tail;v!==null;g++)p[g]=v.value,v=v.prev;return p},o.prototype.slice=function(p,g){g=g||this.length,g<0&&(g+=this.length),p=p||0,p<0&&(p+=this.length);var v=new o;if(g<p||g<0)return v;p<0&&(p=0),g>this.length&&(g=this.length);for(var b=0,_=this.head;_!==null&&b<p;b++)_=_.next;for(;_!==null&&b<g;b++,_=_.next)v.push(_.value);return v},o.prototype.sliceReverse=function(p,g){g=g||this.length,g<0&&(g+=this.length),p=p||0,p<0&&(p+=this.length);var v=new o;if(g<p||g<0)return v;p<0&&(p=0),g>this.length&&(g=this.length);for(var b=this.length,_=this.tail;_!==null&&b>g;b--)_=_.prev;for(;_!==null&&b>p;b--,_=_.prev)v.push(_.value);return v},o.prototype.splice=function(p,g,...v){p>this.length&&(p=this.length-1),p<0&&(p=this.length+p);for(var b=0,_=this.head;_!==null&&b<p;b++)_=_.next;for(var S=[],b=0;_&&b<g;b++)S.push(_.value),_=this.removeNode(_);_===null&&(_=this.tail),_!==this.head&&_!==this.tail&&(_=_.prev);for(var b=0;b<v.length;b++)_=d(this,_,v[b]);return S},o.prototype.reverse=function(){for(var p=this.head,g=this.tail,v=p;v!==null;v=v.prev){var b=v.prev;v.prev=v.next,v.next=b}return this.head=g,this.tail=p,this};function d(p,g,v){var b=g===p.head?new u(v,null,g,p):new u(v,g,g.next,p);return b.next===null&&(p.tail=b),b.prev===null&&(p.head=b),p.length++,b}function h(p,g){p.tail=new u(g,p.tail,null,p),p.head||(p.head=p.tail),p.length++}function l(p,g){p.head=new u(g,null,p.head,p),p.tail||(p.tail=p.head),p.length++}function u(p,g,v,b){if(!(this instanceof u))return new u(p,g,v,b);this.list=b,this.value=p,g?(g.next=this,this.prev=g):this.prev=null,v?(v.prev=this,this.next=v):this.next=null}try{n("../node_modules/yallist/iterator.js")(o)}catch{}},"../packages/immutable/dist/Map.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/has.js"),d=n("../node_modules/typed-immutable-map/dist/HashMap/get.js"),h=n("../node_modules/typed-immutable-map/dist/HashMap/set.js"),l=n("../node_modules/typed-immutable-map/dist/HashMap/forEach.js"),u=n("../node_modules/typed-immutable-map/dist/HashMap/map.js"),p=n("../node_modules/typed-immutable-map/dist/HashMap/filter.js"),g=n("../node_modules/typed-immutable-map/dist/HashMap/remove.js"),v=n("../node_modules/typed-immutable-map/dist/HashMap/entries.js"),b=n("../node_modules/typed-immutable-map/dist/HashMap/values.js"),_=n("../node_modules/typed-immutable-map/dist/HashMap/keys.js"),S=n("../node_modules/typed-immutable-map/dist/HashMap/size.js");class T{hashmap;constructor(P){this.hashmap=P}get size(){return(0,S.size)(this.hashmap)}set(P,B){return new T((0,h.set)(P,B,this.hashmap))}delete(P){return new T((0,g.remove)(P,this.hashmap))}get(P){return(0,d.get)(P,this.hashmap)}has(P){return(0,o.has)(P,this.hashmap)}forEach(P){(0,l.forEach)(P,this.hashmap)}map(P){return new T((0,u.map)(P,this.hashmap))}filter(P){return new T((0,p.filter)(P,this.hashmap))}toJS(){return Object.fromEntries(this)}toJSON(){return this.toJS()}keys(){return(0,_.keys)(this.hashmap)}values(){return(0,b.values)(this.hashmap)}entries(){return(0,v.entries)(this.hashmap)}[Symbol.iterator](){return this.entries()}}e.Map=T},"../packages/immutable/dist/index.js":(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const o=n("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),d=n("../node_modules/typed-immutable-map/dist/HashMap/from.js"),h=n("../packages/immutable/dist/Map.js"),l=p=>Symbol.iterator in p;function u(p){return p?l(p)?new h.Map((0,d.fromIterable)(p)):new h.Map((0,d.fromObject)(p)):new h.Map((0,o.empty)())}e.Map=u},"../packages/uuid/dist/index.js":function(t,e,n){var o=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(e,"__esModule",{value:!0}),e.v4=void 0;const d=o(n("../node_modules/uuid-random/index.js"));e.v4=d.default},asynciterator:t=>{t.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__},sparqlalgebrajs:t=>{t.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__},sparqljs:t=>{t.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__},"?699d":()=>{},"./require-empty.js":()=>{},"./src/crypto-polyfill.js":(__unused_webpack_module,__unused_webpack_exports,__quadstore_comunica_require__)=>{const isNode=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,polyfillCrypto=({randomFillSync:t})=>{__quadstore_comunica_require__.g.crypto={},__quadstore_comunica_require__.g.crypto.getRandomValues=e=>(t(e),e)};isNode&&typeof crypto>"u"&&(eval("typeof require === 'function'")?polyfillCrypto(eval("require('crypto');")):eval("import('crypto');").then(polyfillCrypto).catch(t=>{console.error(t),process.exit(1)}))},"./src/engine.js":(t,e,n)=>{const o=new(n("../node_modules/@comunica/logger-void/lib/index.js")).LoggerVoid,d=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^2.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),h=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^2.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),l=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^2.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),u=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^2.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),p=new(n("../node_modules/@comunica/bus-query-operation/lib/index.js")).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^2.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),g=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^2.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),v=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^2.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),b=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),_=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^2.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),S=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^2.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),T=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^2.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),I=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^2.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),P=new(n("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/^2.0.0/components/ActorRdfResolveQuadPattern.jsonld#ActorRdfResolveQuadPattern_default_bus"});new(n("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js")).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:h});const B=new(n("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:h});new(n("../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js")).ActorHashBindingsSha1({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:l});const L=new(n("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:l}),C=new(n("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:u});new(n("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js")).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:u}),new(n("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js")).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:u}),new(n("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js")).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:u});const O=new(n("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:p});new(n("../node_modules/@comunica/actor-query-operation-values/lib/index.js")).ActorQueryOperationValues({name:"urn:comunica:default:query-operation/actors#values",bus:p});const N=new(n("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:g});new(n("../node_modules/@comunica/actor-query-parse-sparql/lib/index.js")).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:g});const M=new(n("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:v}),k=new(n("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:v}),W=new(n("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:v}),ae=new(n("../node_modules/@comunica/mediator-all/lib/index.js")).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:b});new(n("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js")).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:_});const X=new(n("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:_});new(n("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js")).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:S});const G=new(n("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:S});new(n("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js")).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:T});const re=new(n("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:T}),F=new(n("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js")).MediatorJoinCoefficientsFixed({cpuWeight:1,memoryWeight:1,timeWeight:10,ioWeight:100,name:"urn:comunica:default:rdf-join/mediators#main",bus:I}),$=new(n("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-resolve-quad-pattern/mediators#main",bus:P});new(n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js")).ActorRdfResolveQuadPatternRdfJsSource({name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#rdfjs-source",bus:P}),new(n("../node_modules/@comunica/actor-query-operation-ask/lib/index.js")).ActorQueryOperationAsk({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#ask",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js")).ActorQueryOperationBgpJoin({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#bgp",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-construct/lib/index.js")).ActorQueryOperationConstruct({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#construct",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js")).ActorQueryOperationDescribeSubject({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#describe",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js")).ActorQueryOperationDistinctHash({mediatorHashBindings:L,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#distinct",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-extend/lib/index.js")).ActorQueryOperationExtend({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#extend",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js")).ActorQueryOperationFilterSparqlee({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#filter",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js")).ActorQueryOperationFromQuad({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#from",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-group/lib/index.js")).ActorQueryOperationGroup({mediatorHashBindings:L,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#group",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js")).ActorQueryOperationOrderBySparqlee({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#orderby",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-nop/lib/index.js")).ActorQueryOperationNop({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#nop",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-project/lib/index.js")).ActorQueryOperationProject({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#project",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js")).ActorQueryOperationReducedHash({mediatorHashBindings:L,cacheSize:100,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#reduced",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-service/lib/index.js")).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#service",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-slice/lib/index.js")).ActorQueryOperationSlice({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#slice",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-union/lib/index.js")).ActorQueryOperationUnion({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#union",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js")).ActorQueryOperationPathAlt({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-alt",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js")).ActorQueryOperationPathInv({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-inv",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-link/lib/index.js")).ActorQueryOperationPathLink({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-link",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js")).ActorQueryOperationPathZeroOrOne({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js")).ActorQueryOperationAddRewrite({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-add",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js")).ActorQueryOperationPathZeroOrMore({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js")).ActorQueryOperationPathOneOrMore({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js")).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-composite",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js")).ActorQueryOperationPathNps({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-nps",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js")).ActorQueryOperationCopyRewrite({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-copy",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js")).ActorQueryOperationMoveRewrite({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-move",bus:p});const U=new(n("../node_modules/@comunica/actor-init-query/lib/index-browser.js")).ActorInitQuery({mediatorOptimizeQueryOperation:C,mediatorQueryOperation:O,mediatorQueryParse:N,mediatorQueryResultSerialize:M,mediatorQueryResultSerializeMediaTypeCombiner:k,mediatorQueryResultSerializeMediaTypeFormatCombiner:W,mediatorContextPreprocess:B,mediatorHttpInvalidate:ae,logger:o,defaultQueryInputFormat:"sparql",allowNoSources:!1,contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelay:"@comunica/bus-http:http-retry-delay",httpRetryOnServerError:"@comunica/bus-http:http-retry-on-server-error",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",localizeBlankNodes:"@comunica/actor-query-operation:localizeBlankNodes",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:init/actors#query",bus:d});new(n("../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js")).ActorRdfJoinNone({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js")).ActorRdfJoinSingle({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js")).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js")).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorJoinEntriesSort:X,mediatorQueryOperation:O,mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js")).ActorRdfJoinHash({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js")).ActorRdfJoinSymmetricHash({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js")).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js")).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorQueryOperation:O,mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js")).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js")).ActorRdfJoinMinusHash({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:I}),new(n("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js")).ActorRdfJoinMinusHashUndef({mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:I}),new(n("../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js")).ActorQueryOperationClear({mediatorUpdateQuads:re,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-clear",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-create/lib/index.js")).ActorQueryOperationCreate({mediatorUpdateQuads:re,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-create",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js")).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:re,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js")).ActorQueryOperationDrop({mediatorUpdateQuads:re,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-drop",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-update-load/lib/index.js")).ActorQueryOperationLoad({mediatorUpdateQuads:re,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-load",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-join/lib/index.js")).ActorQueryOperationJoin({mediatorJoin:F,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#join",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js")).ActorQueryOperationLeftJoin({mediatorJoin:F,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-minus/lib/index.js")).ActorQueryOperationMinus({mediatorJoin:F,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#minus",bus:p}),new(n("../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js")).ActorQueryOperationPathSeq({mediatorJoin:F,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-seq",bus:p}),new(n("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js")).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:X,mediatorJoin:F,mediatorJoinSelectivity:G,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:I}),new(n("../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js")).ActorQueryOperationQuadpattern({mediatorResolveQuadPattern:$,unionDefaultGraph:!1,name:"urn:comunica:default:query-operation/actors#quadpattern",bus:p}),new(n("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js")).ActorRdfResolveQuadPatternFederated({mediatorResolveQuadPattern:$,skipEmptyPatterns:!1,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#federated",bus:P}),t.exports=U},"./src/index.js":(t,e,n)=>{n("./src/crypto-polyfill.js");const{QueryEngineBase:o}=n("../node_modules/@comunica/actor-init-query/lib/index-browser.js"),d=new o(n("./src/engine.js")),h=Object.create(null);class l{constructor(p){this.store=p,this.engine=d}getContext(p){return{...p,source:this.store,destination:this.store}}query(p,g=h){return d.query(p,this.getContext(g))}queryVoid(p,g=h){return d.queryVoid(p,this.getContext(g))}queryBindings(p,g=h){return d.queryBindings(p,this.getContext(g))}queryQuads(p,g=h){return d.queryQuads(p,this.getContext(g))}queryBoolean(p,g=h){return d.queryBoolean(p,this.getContext(g))}}t.exports.D=l,t.exports.H=d},"../node_modules/@comunica/actor-query-operation-reduced-hash/node_modules/lru-cache/index.js":t=>{const e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=typeof AbortController=="function"?AbortController:class{constructor(){this.signal=new l}abort(O=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||O,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},d=typeof AbortSignal=="function",h=typeof o.AbortSignal=="function",l=d?AbortSignal:h?o.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(O){O.type==="abort"&&(this.aborted=!0,this.onabort(O),this._listeners.forEach(N=>N(O),this))}onabort(){}addEventListener(O,N){O==="abort"&&this._listeners.push(N)}removeEventListener(O,N){O==="abort"&&(this._listeners=this._listeners.filter(M=>M!==N))}},u=new Set,p=(C,O)=>{const N=`LRU_CACHE_OPTION_${C}`;_(N)&&S(N,`${C} option`,`options.${O}`,L)},g=(C,O)=>{const N=`LRU_CACHE_METHOD_${C}`;if(_(N)){const{prototype:M}=L,{get:k}=Object.getOwnPropertyDescriptor(M,C);S(N,`${C} method`,`cache.${O}()`,k)}},v=(C,O)=>{const N=`LRU_CACHE_PROPERTY_${C}`;if(_(N)){const{prototype:M}=L,{get:k}=Object.getOwnPropertyDescriptor(M,C);S(N,`${C} property`,`cache.${O}`,k)}},b=(...C)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...C):console.error(...C)},_=C=>!u.has(C),S=(C,O,N,M)=>{u.add(C);const k=`The ${O} is deprecated. Please use ${N} instead.`;b(k,"DeprecationWarning",C,M)},T=C=>C&&C===Math.floor(C)&&C>0&&isFinite(C),I=C=>T(C)?C<=Math.pow(2,8)?Uint8Array:C<=Math.pow(2,16)?Uint16Array:C<=Math.pow(2,32)?Uint32Array:C<=Number.MAX_SAFE_INTEGER?P:null:null;class P extends Array{constructor(O){super(O),this.fill(0)}}class B{constructor(O){if(O===0)return[];const N=I(O);this.heap=new N(O),this.length=0}push(O){this.heap[this.length++]=O}pop(){return this.heap[--this.length]}}class L{constructor(O={}){const{max:N=0,ttl:M,ttlResolution:k=1,ttlAutopurge:W,updateAgeOnGet:ae,updateAgeOnHas:X,allowStale:G,dispose:re,disposeAfter:F,noDisposeOnSet:$,noUpdateTTL:U,maxSize:H=0,maxEntrySize:ee=0,sizeCalculation:ge,fetchMethod:me,fetchContext:fe,noDeleteOnFetchRejection:he,noDeleteOnStaleGet:_e,allowStaleOnFetchRejection:xe,allowStaleOnFetchAbort:Ne,ignoreFetchAbort:Ie}=O,{length:Pe,maxAge:ve,stale:Le}=O instanceof L?{}:O;if(N!==0&&!T(N))throw new TypeError("max option must be a nonnegative integer");const Fe=N?I(N):Array;if(!Fe)throw new Error("invalid max value: "+N);if(this.max=N,this.maxSize=H,this.maxEntrySize=ee||this.maxSize,this.sizeCalculation=ge||Pe,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=me||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=fe,!this.fetchMethod&&fe!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(N).fill(null),this.valList=new Array(N).fill(null),this.next=new Fe(N),this.prev=new Fe(N),this.head=0,this.tail=0,this.free=new B(N),this.initialFill=1,this.size=0,typeof re=="function"&&(this.dispose=re),typeof F=="function"?(this.disposeAfter=F,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!$,this.noUpdateTTL=!!U,this.noDeleteOnFetchRejection=!!he,this.allowStaleOnFetchRejection=!!xe,this.allowStaleOnFetchAbort=!!Ne,this.ignoreFetchAbort=!!Ie,this.maxEntrySize!==0){if(this.maxSize!==0&&!T(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!T(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!G||!!Le,this.noDeleteOnStaleGet=!!_e,this.updateAgeOnGet=!!ae,this.updateAgeOnHas=!!X,this.ttlResolution=T(k)||k===0?k:1,this.ttlAutopurge=!!W,this.ttl=M||ve||0,this.ttl){if(!T(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const Ue="LRU_CACHE_UNBOUNDED";_(Ue)&&(u.add(Ue),b("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Ue,L))}Le&&p("stale","allowStale"),ve&&p("maxAge","ttl"),Pe&&p("length","sizeCalculation")}getRemainingTTL(O){return this.has(O,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new P(this.max),this.starts=new P(this.max),this.setItemTTL=(M,k,W=e.now())=>{if(this.starts[M]=k!==0?W:0,this.ttls[M]=k,k!==0&&this.ttlAutopurge){const ae=setTimeout(()=>{this.isStale(M)&&this.delete(this.keyList[M])},k+1);ae.unref&&ae.unref()}},this.updateItemAge=M=>{this.starts[M]=this.ttls[M]!==0?e.now():0},this.statusTTL=(M,k)=>{M&&(M.ttl=this.ttls[k],M.start=this.starts[k],M.now=O||N(),M.remainingTTL=M.now+M.ttl-M.start)};let O=0;const N=()=>{const M=e.now();if(this.ttlResolution>0){O=M;const k=setTimeout(()=>O=0,this.ttlResolution);k.unref&&k.unref()}return M};this.getRemainingTTL=M=>{const k=this.keyMap.get(M);return k===void 0?0:this.ttls[k]===0||this.starts[k]===0?1/0:this.starts[k]+this.ttls[k]-(O||N())},this.isStale=M=>this.ttls[M]!==0&&this.starts[M]!==0&&(O||N())-this.starts[M]>this.ttls[M]}updateItemAge(O){}statusTTL(O,N){}setItemTTL(O,N,M){}isStale(O){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new P(this.max),this.removeItemSize=O=>{this.calculatedSize-=this.sizes[O],this.sizes[O]=0},this.requireSize=(O,N,M,k)=>{if(this.isBackgroundFetch(N))return 0;if(!T(M))if(k){if(typeof k!="function")throw new TypeError("sizeCalculation must be a function");if(M=k(N,O),!T(M))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return M},this.addItemSize=(O,N,M)=>{if(this.sizes[O]=N,this.maxSize){const k=this.maxSize-this.sizes[O];for(;this.calculatedSize>k;)this.evict(!0)}this.calculatedSize+=this.sizes[O],M&&(M.entrySize=N,M.totalCalculatedSize=this.calculatedSize)}}removeItemSize(O){}addItemSize(O,N){}requireSize(O,N,M,k){if(M||k)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:O=this.allowStale}={}){if(this.size)for(let N=this.tail;!(!this.isValidIndex(N)||((O||!this.isStale(N))&&(yield N),N===this.head));)N=this.prev[N]}*rindexes({allowStale:O=this.allowStale}={}){if(this.size)for(let N=this.head;!(!this.isValidIndex(N)||((O||!this.isStale(N))&&(yield N),N===this.tail));)N=this.next[N]}isValidIndex(O){return O!==void 0&&this.keyMap.get(this.keyList[O])===O}*entries(){for(const O of this.indexes())this.valList[O]!==void 0&&this.keyList[O]!==void 0&&!this.isBackgroundFetch(this.valList[O])&&(yield[this.keyList[O],this.valList[O]])}*rentries(){for(const O of this.rindexes())this.valList[O]!==void 0&&this.keyList[O]!==void 0&&!this.isBackgroundFetch(this.valList[O])&&(yield[this.keyList[O],this.valList[O]])}*keys(){for(const O of this.indexes())this.keyList[O]!==void 0&&!this.isBackgroundFetch(this.valList[O])&&(yield this.keyList[O])}*rkeys(){for(const O of this.rindexes())this.keyList[O]!==void 0&&!this.isBackgroundFetch(this.valList[O])&&(yield this.keyList[O])}*values(){for(const O of this.indexes())this.valList[O]!==void 0&&!this.isBackgroundFetch(this.valList[O])&&(yield this.valList[O])}*rvalues(){for(const O of this.rindexes())this.valList[O]!==void 0&&!this.isBackgroundFetch(this.valList[O])&&(yield this.valList[O])}[Symbol.iterator](){return this.entries()}find(O,N){for(const M of this.indexes()){const k=this.valList[M],W=this.isBackgroundFetch(k)?k.__staleWhileFetching:k;if(W!==void 0&&O(W,this.keyList[M],this))return this.get(this.keyList[M],N)}}forEach(O,N=this){for(const M of this.indexes()){const k=this.valList[M],W=this.isBackgroundFetch(k)?k.__staleWhileFetching:k;W!==void 0&&O.call(N,W,this.keyList[M],this)}}rforEach(O,N=this){for(const M of this.rindexes()){const k=this.valList[M],W=this.isBackgroundFetch(k)?k.__staleWhileFetching:k;W!==void 0&&O.call(N,W,this.keyList[M],this)}}get prune(){return g("prune","purgeStale"),this.purgeStale}purgeStale(){let O=!1;for(const N of this.rindexes({allowStale:!0}))this.isStale(N)&&(this.delete(this.keyList[N]),O=!0);return O}dump(){const O=[];for(const N of this.indexes({allowStale:!0})){const M=this.keyList[N],k=this.valList[N],W=this.isBackgroundFetch(k)?k.__staleWhileFetching:k;if(W===void 0)continue;const ae={value:W};if(this.ttls){ae.ttl=this.ttls[N];const X=e.now()-this.starts[N];ae.start=Math.floor(Date.now()-X)}this.sizes&&(ae.size=this.sizes[N]),O.unshift([M,ae])}return O}load(O){this.clear();for(const[N,M]of O){if(M.start){const k=Date.now()-M.start;M.start=e.now()-k}this.set(N,M.value,M)}}dispose(O,N,M){}set(O,N,{ttl:M=this.ttl,start:k,noDisposeOnSet:W=this.noDisposeOnSet,size:ae=0,sizeCalculation:X=this.sizeCalculation,noUpdateTTL:G=this.noUpdateTTL,status:re}={}){if(ae=this.requireSize(O,N,ae,X),this.maxEntrySize&&ae>this.maxEntrySize)return re&&(re.set="miss",re.maxEntrySizeExceeded=!0),this.delete(O),this;let F=this.size===0?void 0:this.keyMap.get(O);if(F===void 0)F=this.newIndex(),this.keyList[F]=O,this.valList[F]=N,this.keyMap.set(O,F),this.next[this.tail]=F,this.prev[F]=this.tail,this.tail=F,this.size++,this.addItemSize(F,ae,re),re&&(re.set="add"),G=!1;else{this.moveToTail(F);const $=this.valList[F];if(N!==$){if(this.isBackgroundFetch($)?$.__abortController.abort(new Error("replaced")):W||(this.dispose($,O,"set"),this.disposeAfter&&this.disposed.push([$,O,"set"])),this.removeItemSize(F),this.valList[F]=N,this.addItemSize(F,ae,re),re){re.set="replace";const U=$&&this.isBackgroundFetch($)?$.__staleWhileFetching:$;U!==void 0&&(re.oldValue=U)}}else re&&(re.set="update")}if(M!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),G||this.setItemTTL(F,M,k),this.statusTTL(re,F),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const O=this.valList[this.head];return this.evict(!0),O}}evict(O){const N=this.head,M=this.keyList[N],k=this.valList[N];return this.isBackgroundFetch(k)?k.__abortController.abort(new Error("evicted")):(this.dispose(k,M,"evict"),this.disposeAfter&&this.disposed.push([k,M,"evict"])),this.removeItemSize(N),O&&(this.keyList[N]=null,this.valList[N]=null,this.free.push(N)),this.head=this.next[N],this.keyMap.delete(M),this.size--,N}has(O,{updateAgeOnHas:N=this.updateAgeOnHas,status:M}={}){const k=this.keyMap.get(O);if(k!==void 0)if(this.isStale(k))M&&(M.has="stale",this.statusTTL(M,k));else return N&&this.updateItemAge(k),M&&(M.has="hit"),this.statusTTL(M,k),!0;else M&&(M.has="miss");return!1}peek(O,{allowStale:N=this.allowStale}={}){const M=this.keyMap.get(O);if(M!==void 0&&(N||!this.isStale(M))){const k=this.valList[M];return this.isBackgroundFetch(k)?k.__staleWhileFetching:k}}backgroundFetch(O,N,M,k){const W=N===void 0?void 0:this.valList[N];if(this.isBackgroundFetch(W))return W;const ae=new o;M.signal&&M.signal.addEventListener("abort",()=>ae.abort(M.signal.reason));const X={signal:ae.signal,options:M,context:k},G=(H,ee=!1)=>{const{aborted:ge}=ae.signal,me=M.ignoreFetchAbort&&H!==void 0;return M.status&&(ge&&!ee?(M.status.fetchAborted=!0,M.status.fetchError=ae.signal.reason,me&&(M.status.fetchAbortIgnored=!0)):M.status.fetchResolved=!0),ge&&!me&&!ee?F(ae.signal.reason):(this.valList[N]===U&&(H===void 0?U.__staleWhileFetching?this.valList[N]=U.__staleWhileFetching:this.delete(O):(M.status&&(M.status.fetchUpdated=!0),this.set(O,H,X.options))),H)},re=H=>(M.status&&(M.status.fetchRejected=!0,M.status.fetchError=H),F(H)),F=H=>{const{aborted:ee}=ae.signal,ge=ee&&M.allowStaleOnFetchAbort,me=ge||M.allowStaleOnFetchRejection,fe=me||M.noDeleteOnFetchRejection;if(this.valList[N]===U&&(!fe||U.__staleWhileFetching===void 0?this.delete(O):ge||(this.valList[N]=U.__staleWhileFetching)),me)return M.status&&U.__staleWhileFetching!==void 0&&(M.status.returnedStale=!0),U.__staleWhileFetching;if(U.__returned===U)throw H},$=(H,ee)=>{this.fetchMethod(O,W,X).then(ge=>H(ge),ee),ae.signal.addEventListener("abort",()=>{(!M.ignoreFetchAbort||M.allowStaleOnFetchAbort)&&(H(),M.allowStaleOnFetchAbort&&(H=ge=>G(ge,!0)))})};M.status&&(M.status.fetchDispatched=!0);const U=new Promise($).then(G,re);return U.__abortController=ae,U.__staleWhileFetching=W,U.__returned=null,N===void 0?(this.set(O,U,{...X.options,status:void 0}),N=this.keyMap.get(O)):this.valList[N]=U,U}isBackgroundFetch(O){return O&&typeof O=="object"&&typeof O.then=="function"&&Object.prototype.hasOwnProperty.call(O,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(O,"__returned")&&(O.__returned===O||O.__returned===null)}async fetch(O,{allowStale:N=this.allowStale,updateAgeOnGet:M=this.updateAgeOnGet,noDeleteOnStaleGet:k=this.noDeleteOnStaleGet,ttl:W=this.ttl,noDisposeOnSet:ae=this.noDisposeOnSet,size:X=0,sizeCalculation:G=this.sizeCalculation,noUpdateTTL:re=this.noUpdateTTL,noDeleteOnFetchRejection:F=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:$=this.allowStaleOnFetchRejection,ignoreFetchAbort:U=this.ignoreFetchAbort,allowStaleOnFetchAbort:H=this.allowStaleOnFetchAbort,fetchContext:ee=this.fetchContext,forceRefresh:ge=!1,status:me,signal:fe}={}){if(!this.fetchMethod)return me&&(me.fetch="get"),this.get(O,{allowStale:N,updateAgeOnGet:M,noDeleteOnStaleGet:k,status:me});const he={allowStale:N,updateAgeOnGet:M,noDeleteOnStaleGet:k,ttl:W,noDisposeOnSet:ae,size:X,sizeCalculation:G,noUpdateTTL:re,noDeleteOnFetchRejection:F,allowStaleOnFetchRejection:$,allowStaleOnFetchAbort:H,ignoreFetchAbort:U,status:me,signal:fe};let _e=this.keyMap.get(O);if(_e===void 0){me&&(me.fetch="miss");const xe=this.backgroundFetch(O,_e,he,ee);return xe.__returned=xe}else{const xe=this.valList[_e];if(this.isBackgroundFetch(xe)){const Le=N&&xe.__staleWhileFetching!==void 0;return me&&(me.fetch="inflight",Le&&(me.returnedStale=!0)),Le?xe.__staleWhileFetching:xe.__returned=xe}const Ne=this.isStale(_e);if(!ge&&!Ne)return me&&(me.fetch="hit"),this.moveToTail(_e),M&&this.updateItemAge(_e),this.statusTTL(me,_e),xe;const Ie=this.backgroundFetch(O,_e,he,ee),Pe=Ie.__staleWhileFetching!==void 0,ve=Pe&&N;return me&&(me.fetch=Pe&&Ne?"stale":"refresh",ve&&Ne&&(me.returnedStale=!0)),ve?Ie.__staleWhileFetching:Ie.__returned=Ie}}get(O,{allowStale:N=this.allowStale,updateAgeOnGet:M=this.updateAgeOnGet,noDeleteOnStaleGet:k=this.noDeleteOnStaleGet,status:W}={}){const ae=this.keyMap.get(O);if(ae!==void 0){const X=this.valList[ae],G=this.isBackgroundFetch(X);return this.statusTTL(W,ae),this.isStale(ae)?(W&&(W.get="stale"),G?(W&&(W.returnedStale=N&&X.__staleWhileFetching!==void 0),N?X.__staleWhileFetching:void 0):(k||this.delete(O),W&&(W.returnedStale=N),N?X:void 0)):(W&&(W.get="hit"),G?X.__staleWhileFetching:(this.moveToTail(ae),M&&this.updateItemAge(ae),X))}else W&&(W.get="miss")}connect(O,N){this.prev[N]=O,this.next[O]=N}moveToTail(O){O!==this.tail&&(O===this.head?this.head=this.next[O]:this.connect(this.prev[O],this.next[O]),this.connect(this.tail,O),this.tail=O)}get del(){return g("del","delete"),this.delete}delete(O){let N=!1;if(this.size!==0){const M=this.keyMap.get(O);if(M!==void 0)if(N=!0,this.size===1)this.clear();else{this.removeItemSize(M);const k=this.valList[M];this.isBackgroundFetch(k)?k.__abortController.abort(new Error("deleted")):(this.dispose(k,O,"delete"),this.disposeAfter&&this.disposed.push([k,O,"delete"])),this.keyMap.delete(O),this.keyList[M]=null,this.valList[M]=null,M===this.tail?this.tail=this.prev[M]:M===this.head?this.head=this.next[M]:(this.next[this.prev[M]]=this.next[M],this.prev[this.next[M]]=this.prev[M]),this.size--,this.free.push(M)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return N}clear(){for(const O of this.rindexes({allowStale:!0})){const N=this.valList[O];if(this.isBackgroundFetch(N))N.__abortController.abort(new Error("deleted"));else{const M=this.keyList[O];this.dispose(N,M,"delete"),this.disposeAfter&&this.disposed.push([N,M,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return g("reset","clear"),this.clear}get length(){return v("length","size"),this.size}static get AbortController(){return o}static get AbortSignal(){return l}}t.exports=L}},__quadstore_comunica_module_cache__={};function __quadstore_comunica_require__(t){var e=__quadstore_comunica_module_cache__[t];if(e!==void 0)return e.exports;var n=__quadstore_comunica_module_cache__[t]={exports:{}};return __quadstore_comunica_modules__[t].call(n.exports,n,n.exports,__quadstore_comunica_require__),n.exports}__quadstore_comunica_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var __quadstore_comunica_exports__=__quadstore_comunica_require__("./src/index.js"),__quadstore_comunica_exports__Engine=__quadstore_comunica_exports__.D;__quadstore_comunica_exports__.H;const proxyMarker=Symbol("Comlink.proxy"),createEndpoint=Symbol("Comlink.endpoint"),releaseProxy=Symbol("Comlink.releaseProxy"),throwMarker=Symbol("Comlink.thrown"),isObject$1=t=>typeof t=="object"&&t!==null||typeof t=="function",proxyTransferHandler={canHandle:t=>isObject$1(t)&&t[proxyMarker],serialize(t){const{port1:e,port2:n}=new MessageChannel;return expose$1(t,e),[n,[n]]},deserialize(t){return t.start(),wrap(t)}},throwTransferHandler={canHandle:t=>isObject$1(t)&&throwMarker in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},transferHandlers=new Map([["proxy",proxyTransferHandler],["throw",throwTransferHandler]]);function expose$1(t,e=self){e.addEventListener("message",function n(o){if(!o||!o.data)return;const{id:d,type:h,path:l}=Object.assign({path:[]},o.data),u=(o.data.argumentList||[]).map(fromWireValue);let p;try{const g=l.slice(0,-1).reduce((b,_)=>b[_],t),v=l.reduce((b,_)=>b[_],t);switch(h){case"GET":p=v;break;case"SET":g[l.slice(-1)[0]]=fromWireValue(o.data.value),p=!0;break;case"APPLY":p=v.apply(g,u);break;case"CONSTRUCT":{const b=new v(...u);p=proxy(b)}break;case"ENDPOINT":{const{port1:b,port2:_}=new MessageChannel;expose$1(t,_),p=transfer$1(b,[b])}break;case"RELEASE":p=void 0;break;default:return}}catch(g){p={value:g,[throwMarker]:0}}Promise.resolve(p).catch(g=>({value:g,[throwMarker]:0})).then(g=>{const[v,b]=toWireValue(g);e.postMessage(Object.assign(Object.assign({},v),{id:d}),b),h==="RELEASE"&&(e.removeEventListener("message",n),closeEndPoint(e))})}),e.start&&e.start()}function isMessagePort(t){return t.constructor.name==="MessagePort"}function closeEndPoint(t){isMessagePort(t)&&t.close()}function wrap(t,e){return createProxy(t,[],e)}function throwIfProxyReleased(t){if(t)throw new Error("Proxy has been released and is not useable")}function createProxy(t,e=[],n=function(){}){let o=!1;const d=new Proxy(n,{get(h,l){if(throwIfProxyReleased(o),l===releaseProxy)return()=>requestResponseMessage(t,{type:"RELEASE",path:e.map(u=>u.toString())}).then(()=>{closeEndPoint(t),o=!0});if(l==="then"){if(e.length===0)return{then:()=>d};const u=requestResponseMessage(t,{type:"GET",path:e.map(p=>p.toString())}).then(fromWireValue);return u.then.bind(u)}return createProxy(t,[...e,l])},set(h,l,u){throwIfProxyReleased(o);const[p,g]=toWireValue(u);return requestResponseMessage(t,{type:"SET",path:[...e,l].map(v=>v.toString()),value:p},g).then(fromWireValue)},apply(h,l,u){throwIfProxyReleased(o);const p=e[e.length-1];if(p===createEndpoint)return requestResponseMessage(t,{type:"ENDPOINT"}).then(fromWireValue);if(p==="bind")return createProxy(t,e.slice(0,-1));const[g,v]=processArguments(u);return requestResponseMessage(t,{type:"APPLY",path:e.map(b=>b.toString()),argumentList:g},v).then(fromWireValue)},construct(h,l){throwIfProxyReleased(o);const[u,p]=processArguments(l);return requestResponseMessage(t,{type:"CONSTRUCT",path:e.map(g=>g.toString()),argumentList:u},p).then(fromWireValue)}});return d}function myFlat(t){return Array.prototype.concat.apply([],t)}function processArguments(t){const e=t.map(toWireValue);return[e.map(n=>n[0]),myFlat(e.map(n=>n[1]))]}const transferCache=new WeakMap;function transfer$1(t,e){return transferCache.set(t,e),t}function proxy(t){return Object.assign(t,{[proxyMarker]:!0})}function toWireValue(t){for(const[e,n]of transferHandlers)if(n.canHandle(t)){const[o,d]=n.serialize(t);return[{type:"HANDLER",name:e,value:o},d]}return[{type:"RAW",value:t},transferCache.get(t)||[]]}function fromWireValue(t){switch(t.type){case"HANDLER":return transferHandlers.get(t.name).deserialize(t.value);case"RAW":return t.value}}function requestResponseMessage(t,e,n){return new Promise(o=>{const d=generateUUID();t.addEventListener("message",function h(l){!l.data||!l.data.id||l.data.id!==d||(t.removeEventListener("message",h),o(l.data))}),t.start&&t.start(),t.postMessage(Object.assign({id:d},e),n)})}function generateUUID(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const DEPENDS_ON="http://dat-ecosystem.org#dependson",OWNS="http://dat-ecosystem.org#owns";var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeGlobal$1=freeGlobal,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root$1=freeGlobal$1||freeSelf||Function("return this")(),root$2=root$1,Symbol$1=root$2.Symbol,Symbol$2=Symbol$1,objectProto$1=Object.prototype,hasOwnProperty=objectProto$1.hasOwnProperty,nativeObjectToString$1=objectProto$1.toString,symToStringTag$1=Symbol$2?Symbol$2.toStringTag:void 0;function getRawTag(t){var e=hasOwnProperty.call(t,symToStringTag$1),n=t[symToStringTag$1];try{t[symToStringTag$1]=void 0;var o=!0}catch{}var d=nativeObjectToString$1.call(t);return o&&(e?t[symToStringTag$1]=n:delete t[symToStringTag$1]),d}var objectProto=Object.prototype,nativeObjectToString=objectProto.toString;function objectToString(t){return nativeObjectToString.call(t)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$2?Symbol$2.toStringTag:void 0;function baseGetTag(t){return t==null?t===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(t)?getRawTag(t):objectToString(t)}function isObjectLike(t){return t!=null&&typeof t=="object"}var symbolTag="[object Symbol]";function isSymbol(t){return typeof t=="symbol"||isObjectLike(t)&&baseGetTag(t)==symbolTag}var reWhitespace=/\s/;function trimmedEndIndex(t){for(var e=t.length;e--&&reWhitespace.test(t.charAt(e)););return e}var reTrimStart=/^\s+/;function baseTrim(t){return t&&t.slice(0,trimmedEndIndex(t)+1).replace(reTrimStart,"")}function isObject(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(t){if(typeof t=="number")return t;if(isSymbol(t))return NAN;if(isObject(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=isObject(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=baseTrim(t);var n=reIsBinary.test(t);return n||reIsOctal.test(t)?freeParseInt(t.slice(2),n?2:8):reIsBadHex.test(t)?NAN:+t}var now$2=function(){return root$2.Date.now()},now$3=now$2,FUNC_ERROR_TEXT="Expected a function",nativeMax=Math.max,nativeMin=Math.min;function debounce(t,e,n){var o,d,h,l,u,p,g=0,v=!1,b=!1,_=!0;if(typeof t!="function")throw new TypeError(FUNC_ERROR_TEXT);e=toNumber(e)||0,isObject(n)&&(v=!!n.leading,b="maxWait"in n,h=b?nativeMax(toNumber(n.maxWait)||0,e):h,_="trailing"in n?!!n.trailing:_);function S(M){var k=o,W=d;return o=d=void 0,g=M,l=t.apply(W,k),l}function T(M){return g=M,u=setTimeout(B,e),v?S(M):l}function I(M){var k=M-p,W=M-g,ae=e-k;return b?nativeMin(ae,h-W):ae}function P(M){var k=M-p,W=M-g;return p===void 0||k>=e||k<0||b&&W>=h}function B(){var M=now$3();if(P(M))return L(M);u=setTimeout(B,I(M))}function L(M){return u=void 0,_&&o?S(M):(o=d=void 0,l)}function C(){u!==void 0&&clearTimeout(u),g=0,o=p=d=u=void 0}function O(){return u===void 0?l:L(now$3())}function N(){var M=now$3(),k=P(M);if(o=arguments,d=this,p=M,k){if(u===void 0)return T(p);if(b)return clearTimeout(u),u=setTimeout(B,e),S(p)}return u===void 0&&(u=setTimeout(B,e)),l}return N.cancel=C,N.flush=O,N}function fromPairs(t){for(var e=-1,n=t==null?0:t.length,o={};++e<n;){var d=t[e];o[d[0]]=d[1]}return o}const backend=new MemoryLevel_1,df=new rdfDataFactory.DataFactory,store=new Quadstore({backend,dataFactory:df}),engine=new __quadstore_comunica_exports__Engine(store);async function buildGraph(t){console.log("BUILDING GRAPH",t);const{valueNetworkData:e,projectsData:n,organizationsData:o}=t,d=Object.entries(e).flatMap(([p,{dependents:g,dependencies:v,owner:b}])=>[b&&p&&df.quad(df.namedNode(b),df.literal(OWNS),df.namedNode(p),df.defaultGraph()),...(g||[]).filter(_=>_).map(_=>df.quad(df.namedNode(_),df.namedNode(DEPENDS_ON),df.namedNode(p),df.defaultGraph())),...(v||[]).filter(_=>_).map(_=>df.quad(df.namedNode(p),df.namedNode(DEPENDS_ON),df.namedNode(_),df.defaultGraph()))]).filter(p=>p),h=[...Object.entries(o).flatMap(([p,g])=>Object.entries(g).flatMap(([v,b])=>b&&df.quad(df.namedNode(p),df.namedNode(v),df.literal(b))).filter(v=>v))],l=[...Object.entries(n).flatMap(([p,g])=>Object.entries(g).flatMap(([v,b])=>b&&df.quad(df.namedNode(p),df.namedNode(v),df.literal(b))).filter(v=>v))],u=[...d,...h,...l];await store.open(),await store.multiPut(u),console.log("inserted",u.length,"entries")}const getProps=t=>(async e=>fromPairs([e].flat().map(n=>[n,t.get(n)]))).bind(t),doQuery=async(t,e,n,o)=>{await engine.queryBindings(t).then(d=>{e&&d.on("data",h=>e(h,proxy(getProps(h)))),n&&d.on("end",h=>n(h,h&&proxy(h.get.bind(h)))),o&&d.on("error",h=>o(h,h&&proxy(h.get.bind(h))))})};var db=Object.freeze({__proto__:null,buildGraph,doQuery}),rafExports={},raf$1={get exports(){return rafExports},set exports(t){rafExports=t}},performanceNowExports={},performanceNow={get exports(){return performanceNowExports},set exports(t){performanceNowExports=t}};(function(){var t,e,n,o,d,h;typeof performance<"u"&&performance!==null&&performance.now?performanceNow.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(performanceNow.exports=function(){return(t()-d)/1e6},e=process.hrtime,t=function(){var l;return l=e(),l[0]*1e9+l[1]},o=t(),h=process.uptime()*1e9,d=o-h):Date.now?(performanceNow.exports=function(){return Date.now()-n},n=Date.now()):(performanceNow.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(commonjsGlobal);var now$1=performanceNowExports,root=typeof window>"u"?commonjsGlobal:window,vendors=["moz","webkit"],suffix="AnimationFrame",raf=root["request"+suffix],caf=root["cancel"+suffix]||root["cancelRequest"+suffix];for(var i=0;!raf&&i<vendors.length;i++)raf=root[vendors[i]+"Request"+suffix],caf=root[vendors[i]+"Cancel"+suffix]||root[vendors[i]+"CancelRequest"+suffix];if(!raf||!caf){var last=0,id=0,queue=[],frameDuration=1e3/60;raf=function(t){if(queue.length===0){var e=now$1(),n=Math.max(0,frameDuration-(e-last));last=n+e,setTimeout(function(){var o=queue.slice(0);queue.length=0;for(var d=0;d<o.length;d++)if(!o[d].cancelled)try{o[d].callback(last)}catch(h){setTimeout(function(){throw h},0)}},Math.round(n))}return queue.push({handle:++id,callback:t,cancelled:!1}),id},caf=function(t){for(var e=0;e<queue.length;e++)queue[e].handle===t&&(queue[e].cancelled=!0)}}raf$1.exports=function(t){return raf.call(root,t)};rafExports.cancel=function(){caf.apply(root,arguments)};rafExports.polyfill=function(t){t||(t=root),t.requestAnimationFrame=raf,t.cancelAnimationFrame=caf};function forceCenter(t,e,n){var o,d=1;t==null&&(t=0),e==null&&(e=0),n==null&&(n=0);function h(){var l,u=o.length,p,g=0,v=0,b=0;for(l=0;l<u;++l)p=o[l],g+=p.x||0,v+=p.y||0,b+=p.z||0;for(g=(g/u-t)*d,v=(v/u-e)*d,b=(b/u-n)*d,l=0;l<u;++l)p=o[l],g&&(p.x-=g),v&&(p.y-=v),b&&(p.z-=b)}return h.initialize=function(l){o=l},h.x=function(l){return arguments.length?(t=+l,h):t},h.y=function(l){return arguments.length?(e=+l,h):e},h.z=function(l){return arguments.length?(n=+l,h):n},h.strength=function(l){return arguments.length?(d=+l,h):d},h}function tree_add$2(t){const e=+this._x.call(null,t);return add$3(this.cover(e),e,t)}function add$3(t,e,n){if(isNaN(e))return t;var o,d=t._root,h={data:n},l=t._x0,u=t._x1,p,g,v,b,_;if(!d)return t._root=h,t;for(;d.length;)if((v=e>=(p=(l+u)/2))?l=p:u=p,o=d,!(d=d[b=+v]))return o[b]=h,t;if(g=+t._x.call(null,d.data),e===g)return h.next=d,o?o[b]=h:t._root=h,t;do o=o?o[b]=new Array(2):t._root=new Array(2),(v=e>=(p=(l+u)/2))?l=p:u=p;while((b=+v)==(_=+(g>=p)));return o[_]=d,o[b]=h,t}function addAll$2(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e);let o=1/0,d=-1/0;for(let h=0,l;h<e;++h)isNaN(l=+this._x.call(null,t[h]))||(n[h]=l,l<o&&(o=l),l>d&&(d=l));if(o>d)return this;this.cover(o).cover(d);for(let h=0;h<e;++h)add$3(this,n[h],t[h]);return this}function tree_cover$2(t){if(isNaN(t=+t))return this;var e=this._x0,n=this._x1;if(isNaN(e))n=(e=Math.floor(t))+1;else{for(var o=n-e||1,d=this._root,h,l;e>t||t>=n;)switch(l=+(t<e),h=new Array(2),h[l]=d,d=h,o*=2,l){case 0:n=e+o;break;case 1:e=n-o;break}this._root&&this._root.length&&(this._root=d)}return this._x0=e,this._x1=n,this}function tree_data$2(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function tree_extent$2(t){return arguments.length?this.cover(+t[0][0]).cover(+t[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function Half(t,e,n){this.node=t,this.x0=e,this.x1=n}function tree_find$2(t,e){var n,o=this._x0,d,h,l=this._x1,u=[],p=this._root,g,v;for(p&&u.push(new Half(p,o,l)),e==null?e=1/0:(o=t-e,l=t+e);g=u.pop();)if(!(!(p=g.node)||(d=g.x0)>l||(h=g.x1)<o))if(p.length){var b=(d+h)/2;u.push(new Half(p[1],b,h),new Half(p[0],d,b)),(v=+(t>=b))&&(g=u[u.length-1],u[u.length-1]=u[u.length-1-v],u[u.length-1-v]=g)}else{var _=Math.abs(t-+this._x.call(null,p.data));_<e&&(e=_,o=t-_,l=t+_,n=p.data)}return n}function tree_remove$2(t){if(isNaN(p=+this._x.call(null,t)))return this;var e,n=this._root,o,d,h,l=this._x0,u=this._x1,p,g,v,b,_;if(!n)return this;if(n.length)for(;;){if((v=p>=(g=(l+u)/2))?l=g:u=g,e=n,!(n=n[b=+v]))return this;if(!n.length)break;e[b+1&1]&&(o=e,_=b)}for(;n.data!==t;)if(d=n,!(n=n.next))return this;return(h=n.next)&&delete n.next,d?(h?d.next=h:delete d.next,this):e?(h?e[b]=h:delete e[b],(n=e[0]||e[1])&&n===(e[1]||e[0])&&!n.length&&(o?o[_]=n:this._root=n),this):(this._root=h,this)}function removeAll$2(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function tree_root$2(){return this._root}function tree_size$2(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function tree_visit$2(t){var e=[],n,o=this._root,d,h,l;for(o&&e.push(new Half(o,this._x0,this._x1));n=e.pop();)if(!t(o=n.node,h=n.x0,l=n.x1)&&o.length){var u=(h+l)/2;(d=o[1])&&e.push(new Half(d,u,l)),(d=o[0])&&e.push(new Half(d,h,u))}return this}function tree_visitAfter$2(t){var e=[],n=[],o;for(this._root&&e.push(new Half(this._root,this._x0,this._x1));o=e.pop();){var d=o.node;if(d.length){var h,l=o.x0,u=o.x1,p=(l+u)/2;(h=d[0])&&e.push(new Half(h,l,p)),(h=d[1])&&e.push(new Half(h,p,u))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.x1);return this}function defaultX$2(t){return t[0]}function tree_x$2(t){return arguments.length?(this._x=t,this):this._x}function binarytree(t,e){var n=new Binarytree(e??defaultX$2,NaN,NaN);return t==null?n:n.addAll(t)}function Binarytree(t,e,n){this._x=t,this._x0=e,this._x1=n,this._root=void 0}function leaf_copy$2(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var treeProto$2=binarytree.prototype=Binarytree.prototype;treeProto$2.copy=function(){var t=new Binarytree(this._x,this._x0,this._x1),e=this._root,n,o;if(!e)return t;if(!e.length)return t._root=leaf_copy$2(e),t;for(n=[{source:e,target:t._root=new Array(2)}];e=n.pop();)for(var d=0;d<2;++d)(o=e.source[d])&&(o.length?n.push({source:o,target:e.target[d]=new Array(2)}):e.target[d]=leaf_copy$2(o));return t};treeProto$2.add=tree_add$2;treeProto$2.addAll=addAll$2;treeProto$2.cover=tree_cover$2;treeProto$2.data=tree_data$2;treeProto$2.extent=tree_extent$2;treeProto$2.find=tree_find$2;treeProto$2.remove=tree_remove$2;treeProto$2.removeAll=removeAll$2;treeProto$2.root=tree_root$2;treeProto$2.size=tree_size$2;treeProto$2.visit=tree_visit$2;treeProto$2.visitAfter=tree_visitAfter$2;treeProto$2.x=tree_x$2;function tree_add$1(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return add$2(this.cover(e,n),e,n,t)}function add$2(t,e,n,o){if(isNaN(e)||isNaN(n))return t;var d,h=t._root,l={data:o},u=t._x0,p=t._y0,g=t._x1,v=t._y1,b,_,S,T,I,P,B,L;if(!h)return t._root=l,t;for(;h.length;)if((I=e>=(b=(u+g)/2))?u=b:g=b,(P=n>=(_=(p+v)/2))?p=_:v=_,d=h,!(h=h[B=P<<1|I]))return d[B]=l,t;if(S=+t._x.call(null,h.data),T=+t._y.call(null,h.data),e===S&&n===T)return l.next=h,d?d[B]=l:t._root=l,t;do d=d?d[B]=new Array(4):t._root=new Array(4),(I=e>=(b=(u+g)/2))?u=b:g=b,(P=n>=(_=(p+v)/2))?p=_:v=_;while((B=P<<1|I)===(L=(T>=_)<<1|S>=b));return d[L]=h,d[B]=l,t}function addAll$1(t){var e,n,o=t.length,d,h,l=new Array(o),u=new Array(o),p=1/0,g=1/0,v=-1/0,b=-1/0;for(n=0;n<o;++n)isNaN(d=+this._x.call(null,e=t[n]))||isNaN(h=+this._y.call(null,e))||(l[n]=d,u[n]=h,d<p&&(p=d),d>v&&(v=d),h<g&&(g=h),h>b&&(b=h));if(p>v||g>b)return this;for(this.cover(p,g).cover(v,b),n=0;n<o;++n)add$2(this,l[n],u[n],t[n]);return this}function tree_cover$1(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,o=this._y0,d=this._x1,h=this._y1;if(isNaN(n))d=(n=Math.floor(t))+1,h=(o=Math.floor(e))+1;else{for(var l=d-n||1,u=this._root,p,g;n>t||t>=d||o>e||e>=h;)switch(g=(e<o)<<1|t<n,p=new Array(4),p[g]=u,u=p,l*=2,g){case 0:d=n+l,h=o+l;break;case 1:n=d-l,h=o+l;break;case 2:d=n+l,o=h-l;break;case 3:n=d-l,o=h-l;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=o,this._x1=d,this._y1=h,this}function tree_data$1(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function tree_extent$1(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(t,e,n,o,d){this.node=t,this.x0=e,this.y0=n,this.x1=o,this.y1=d}function tree_find$1(t,e,n){var o,d=this._x0,h=this._y0,l,u,p,g,v=this._x1,b=this._y1,_=[],S=this._root,T,I;for(S&&_.push(new Quad(S,d,h,v,b)),n==null?n=1/0:(d=t-n,h=e-n,v=t+n,b=e+n,n*=n);T=_.pop();)if(!(!(S=T.node)||(l=T.x0)>v||(u=T.y0)>b||(p=T.x1)<d||(g=T.y1)<h))if(S.length){var P=(l+p)/2,B=(u+g)/2;_.push(new Quad(S[3],P,B,p,g),new Quad(S[2],l,B,P,g),new Quad(S[1],P,u,p,B),new Quad(S[0],l,u,P,B)),(I=(e>=B)<<1|t>=P)&&(T=_[_.length-1],_[_.length-1]=_[_.length-1-I],_[_.length-1-I]=T)}else{var L=t-+this._x.call(null,S.data),C=e-+this._y.call(null,S.data),O=L*L+C*C;if(O<n){var N=Math.sqrt(n=O);d=t-N,h=e-N,v=t+N,b=e+N,o=S.data}}return o}function tree_remove$1(t){if(isNaN(v=+this._x.call(null,t))||isNaN(b=+this._y.call(null,t)))return this;var e,n=this._root,o,d,h,l=this._x0,u=this._y0,p=this._x1,g=this._y1,v,b,_,S,T,I,P,B;if(!n)return this;if(n.length)for(;;){if((T=v>=(_=(l+p)/2))?l=_:p=_,(I=b>=(S=(u+g)/2))?u=S:g=S,e=n,!(n=n[P=I<<1|T]))return this;if(!n.length)break;(e[P+1&3]||e[P+2&3]||e[P+3&3])&&(o=e,B=P)}for(;n.data!==t;)if(d=n,!(n=n.next))return this;return(h=n.next)&&delete n.next,d?(h?d.next=h:delete d.next,this):e?(h?e[P]=h:delete e[P],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(o?o[B]=n:this._root=n),this):(this._root=h,this)}function removeAll$1(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function tree_root$1(){return this._root}function tree_size$1(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function tree_visit$1(t){var e=[],n,o=this._root,d,h,l,u,p;for(o&&e.push(new Quad(o,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(o=n.node,h=n.x0,l=n.y0,u=n.x1,p=n.y1)&&o.length){var g=(h+u)/2,v=(l+p)/2;(d=o[3])&&e.push(new Quad(d,g,v,u,p)),(d=o[2])&&e.push(new Quad(d,h,v,g,p)),(d=o[1])&&e.push(new Quad(d,g,l,u,v)),(d=o[0])&&e.push(new Quad(d,h,l,g,v))}return this}function tree_visitAfter$1(t){var e=[],n=[],o;for(this._root&&e.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));o=e.pop();){var d=o.node;if(d.length){var h,l=o.x0,u=o.y0,p=o.x1,g=o.y1,v=(l+p)/2,b=(u+g)/2;(h=d[0])&&e.push(new Quad(h,l,u,v,b)),(h=d[1])&&e.push(new Quad(h,v,u,p,b)),(h=d[2])&&e.push(new Quad(h,l,b,v,g)),(h=d[3])&&e.push(new Quad(h,v,b,p,g))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.y0,o.x1,o.y1);return this}function defaultX$1(t){return t[0]}function tree_x$1(t){return arguments.length?(this._x=t,this):this._x}function defaultY$1(t){return t[1]}function tree_y$1(t){return arguments.length?(this._y=t,this):this._y}function quadtree(t,e,n){var o=new Quadtree(e??defaultX$1,n??defaultY$1,NaN,NaN,NaN,NaN);return t==null?o:o.addAll(t)}function Quadtree(t,e,n,o,d,h){this._x=t,this._y=e,this._x0=n,this._y0=o,this._x1=d,this._y1=h,this._root=void 0}function leaf_copy$1(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var treeProto$1=quadtree.prototype=Quadtree.prototype;treeProto$1.copy=function(){var t=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,o;if(!e)return t;if(!e.length)return t._root=leaf_copy$1(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var d=0;d<4;++d)(o=e.source[d])&&(o.length?n.push({source:o,target:e.target[d]=new Array(4)}):e.target[d]=leaf_copy$1(o));return t};treeProto$1.add=tree_add$1;treeProto$1.addAll=addAll$1;treeProto$1.cover=tree_cover$1;treeProto$1.data=tree_data$1;treeProto$1.extent=tree_extent$1;treeProto$1.find=tree_find$1;treeProto$1.remove=tree_remove$1;treeProto$1.removeAll=removeAll$1;treeProto$1.root=tree_root$1;treeProto$1.size=tree_size$1;treeProto$1.visit=tree_visit$1;treeProto$1.visitAfter=tree_visitAfter$1;treeProto$1.x=tree_x$1;treeProto$1.y=tree_y$1;function tree_add(t){const e=+this._x.call(null,t),n=+this._y.call(null,t),o=+this._z.call(null,t);return add$1(this.cover(e,n,o),e,n,o,t)}function add$1(t,e,n,o,d){if(isNaN(e)||isNaN(n)||isNaN(o))return t;var h,l=t._root,u={data:d},p=t._x0,g=t._y0,v=t._z0,b=t._x1,_=t._y1,S=t._z1,T,I,P,B,L,C,O,N,M,k,W;if(!l)return t._root=u,t;for(;l.length;)if((O=e>=(T=(p+b)/2))?p=T:b=T,(N=n>=(I=(g+_)/2))?g=I:_=I,(M=o>=(P=(v+S)/2))?v=P:S=P,h=l,!(l=l[k=M<<2|N<<1|O]))return h[k]=u,t;if(B=+t._x.call(null,l.data),L=+t._y.call(null,l.data),C=+t._z.call(null,l.data),e===B&&n===L&&o===C)return u.next=l,h?h[k]=u:t._root=u,t;do h=h?h[k]=new Array(8):t._root=new Array(8),(O=e>=(T=(p+b)/2))?p=T:b=T,(N=n>=(I=(g+_)/2))?g=I:_=I,(M=o>=(P=(v+S)/2))?v=P:S=P;while((k=M<<2|N<<1|O)===(W=(C>=P)<<2|(L>=I)<<1|B>=T));return h[W]=l,h[k]=u,t}function addAll(t){Array.isArray(t)||(t=Array.from(t));const e=t.length,n=new Float64Array(e),o=new Float64Array(e),d=new Float64Array(e);let h=1/0,l=1/0,u=1/0,p=-1/0,g=-1/0,v=-1/0;for(let b=0,_,S,T,I;b<e;++b)isNaN(S=+this._x.call(null,_=t[b]))||isNaN(T=+this._y.call(null,_))||isNaN(I=+this._z.call(null,_))||(n[b]=S,o[b]=T,d[b]=I,S<h&&(h=S),S>p&&(p=S),T<l&&(l=T),T>g&&(g=T),I<u&&(u=I),I>v&&(v=I));if(h>p||l>g||u>v)return this;this.cover(h,l,u).cover(p,g,v);for(let b=0;b<e;++b)add$1(this,n[b],o[b],d[b],t[b]);return this}function tree_cover(t,e,n){if(isNaN(t=+t)||isNaN(e=+e)||isNaN(n=+n))return this;var o=this._x0,d=this._y0,h=this._z0,l=this._x1,u=this._y1,p=this._z1;if(isNaN(o))l=(o=Math.floor(t))+1,u=(d=Math.floor(e))+1,p=(h=Math.floor(n))+1;else{for(var g=l-o||1,v=this._root,b,_;o>t||t>=l||d>e||e>=u||h>n||n>=p;)switch(_=(n<h)<<2|(e<d)<<1|t<o,b=new Array(8),b[_]=v,v=b,g*=2,_){case 0:l=o+g,u=d+g,p=h+g;break;case 1:o=l-g,u=d+g,p=h+g;break;case 2:l=o+g,d=u-g,p=h+g;break;case 3:o=l-g,d=u-g,p=h+g;break;case 4:l=o+g,u=d+g,h=p-g;break;case 5:o=l-g,u=d+g,h=p-g;break;case 6:l=o+g,d=u-g,h=p-g;break;case 7:o=l-g,d=u-g,h=p-g;break}this._root&&this._root.length&&(this._root=v)}return this._x0=o,this._y0=d,this._z0=h,this._x1=l,this._y1=u,this._z1=p,this}function tree_data(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function tree_extent(t){return arguments.length?this.cover(+t[0][0],+t[0][1],+t[0][2]).cover(+t[1][0],+t[1][1],+t[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Octant(t,e,n,o,d,h,l){this.node=t,this.x0=e,this.y0=n,this.z0=o,this.x1=d,this.y1=h,this.z1=l}function tree_find(t,e,n,o){var d,h=this._x0,l=this._y0,u=this._z0,p,g,v,b,_,S,T=this._x1,I=this._y1,P=this._z1,B=[],L=this._root,C,O;for(L&&B.push(new Octant(L,h,l,u,T,I,P)),o==null?o=1/0:(h=t-o,l=e-o,u=n-o,T=t+o,I=e+o,P=n+o,o*=o);C=B.pop();)if(!(!(L=C.node)||(p=C.x0)>T||(g=C.y0)>I||(v=C.z0)>P||(b=C.x1)<h||(_=C.y1)<l||(S=C.z1)<u))if(L.length){var N=(p+b)/2,M=(g+_)/2,k=(v+S)/2;B.push(new Octant(L[7],N,M,k,b,_,S),new Octant(L[6],p,M,k,N,_,S),new Octant(L[5],N,g,k,b,M,S),new Octant(L[4],p,g,k,N,M,S),new Octant(L[3],N,M,v,b,_,k),new Octant(L[2],p,M,v,N,_,k),new Octant(L[1],N,g,v,b,M,k),new Octant(L[0],p,g,v,N,M,k)),(O=(n>=k)<<2|(e>=M)<<1|t>=N)&&(C=B[B.length-1],B[B.length-1]=B[B.length-1-O],B[B.length-1-O]=C)}else{var W=t-+this._x.call(null,L.data),ae=e-+this._y.call(null,L.data),X=n-+this._z.call(null,L.data),G=W*W+ae*ae+X*X;if(G<o){var re=Math.sqrt(o=G);h=t-re,l=e-re,u=n-re,T=t+re,I=e+re,P=n+re,d=L.data}}return d}function tree_remove(t){if(isNaN(_=+this._x.call(null,t))||isNaN(S=+this._y.call(null,t))||isNaN(T=+this._z.call(null,t)))return this;var e,n=this._root,o,d,h,l=this._x0,u=this._y0,p=this._z0,g=this._x1,v=this._y1,b=this._z1,_,S,T,I,P,B,L,C,O,N,M;if(!n)return this;if(n.length)for(;;){if((L=_>=(I=(l+g)/2))?l=I:g=I,(C=S>=(P=(u+v)/2))?u=P:v=P,(O=T>=(B=(p+b)/2))?p=B:b=B,e=n,!(n=n[N=O<<2|C<<1|L]))return this;if(!n.length)break;(e[N+1&7]||e[N+2&7]||e[N+3&7]||e[N+4&7]||e[N+5&7]||e[N+6&7]||e[N+7&7])&&(o=e,M=N)}for(;n.data!==t;)if(d=n,!(n=n.next))return this;return(h=n.next)&&delete n.next,d?(h?d.next=h:delete d.next,this):e?(h?e[N]=h:delete e[N],(n=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&n===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!n.length&&(o?o[M]=n:this._root=n),this):(this._root=h,this)}function removeAll(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function tree_root(){return this._root}function tree_size(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function tree_visit(t){var e=[],n,o=this._root,d,h,l,u,p,g,v;for(o&&e.push(new Octant(o,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();)if(!t(o=n.node,h=n.x0,l=n.y0,u=n.z0,p=n.x1,g=n.y1,v=n.z1)&&o.length){var b=(h+p)/2,_=(l+g)/2,S=(u+v)/2;(d=o[7])&&e.push(new Octant(d,b,_,S,p,g,v)),(d=o[6])&&e.push(new Octant(d,h,_,S,b,g,v)),(d=o[5])&&e.push(new Octant(d,b,l,S,p,_,v)),(d=o[4])&&e.push(new Octant(d,h,l,S,b,_,v)),(d=o[3])&&e.push(new Octant(d,b,_,u,p,g,S)),(d=o[2])&&e.push(new Octant(d,h,_,u,b,g,S)),(d=o[1])&&e.push(new Octant(d,b,l,u,p,_,S)),(d=o[0])&&e.push(new Octant(d,h,l,u,b,_,S))}return this}function tree_visitAfter(t){var e=[],n=[],o;for(this._root&&e.push(new Octant(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));o=e.pop();){var d=o.node;if(d.length){var h,l=o.x0,u=o.y0,p=o.z0,g=o.x1,v=o.y1,b=o.z1,_=(l+g)/2,S=(u+v)/2,T=(p+b)/2;(h=d[0])&&e.push(new Octant(h,l,u,p,_,S,T)),(h=d[1])&&e.push(new Octant(h,_,u,p,g,S,T)),(h=d[2])&&e.push(new Octant(h,l,S,p,_,v,T)),(h=d[3])&&e.push(new Octant(h,_,S,p,g,v,T)),(h=d[4])&&e.push(new Octant(h,l,u,T,_,S,b)),(h=d[5])&&e.push(new Octant(h,_,u,T,g,S,b)),(h=d[6])&&e.push(new Octant(h,l,S,T,_,v,b)),(h=d[7])&&e.push(new Octant(h,_,S,T,g,v,b))}n.push(o)}for(;o=n.pop();)t(o.node,o.x0,o.y0,o.z0,o.x1,o.y1,o.z1);return this}function defaultX(t){return t[0]}function tree_x(t){return arguments.length?(this._x=t,this):this._x}function defaultY(t){return t[1]}function tree_y(t){return arguments.length?(this._y=t,this):this._y}function defaultZ(t){return t[2]}function tree_z(t){return arguments.length?(this._z=t,this):this._z}function octree(t,e,n,o){var d=new Octree(e??defaultX,n??defaultY,o??defaultZ,NaN,NaN,NaN,NaN,NaN,NaN);return t==null?d:d.addAll(t)}function Octree(t,e,n,o,d,h,l,u,p){this._x=t,this._y=e,this._z=n,this._x0=o,this._y0=d,this._z0=h,this._x1=l,this._y1=u,this._z1=p,this._root=void 0}function leaf_copy(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var treeProto=octree.prototype=Octree.prototype;treeProto.copy=function(){var t=new Octree(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,n,o;if(!e)return t;if(!e.length)return t._root=leaf_copy(e),t;for(n=[{source:e,target:t._root=new Array(8)}];e=n.pop();)for(var d=0;d<8;++d)(o=e.source[d])&&(o.length?n.push({source:o,target:e.target[d]=new Array(8)}):e.target[d]=leaf_copy(o));return t};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;treeProto.z=tree_z;function constant(t){return function(){return t}}function jiggle(t){return(t()-.5)*1e-6}function index(t){return t.index}function find(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function forceLink(t){var e=index,n=_,o,d=constant(30),h,l,u,p,g,v,b=1;t==null&&(t=[]);function _(B){return 1/Math.min(p[B.source.index],p[B.target.index])}function S(B){for(var L=0,C=t.length;L<b;++L)for(var O=0,N,M,k,W=0,ae=0,X=0,G,re;O<C;++O)N=t[O],M=N.source,k=N.target,W=k.x+k.vx-M.x-M.vx||jiggle(v),u>1&&(ae=k.y+k.vy-M.y-M.vy||jiggle(v)),u>2&&(X=k.z+k.vz-M.z-M.vz||jiggle(v)),G=Math.sqrt(W*W+ae*ae+X*X),G=(G-h[O])/G*B*o[O],W*=G,ae*=G,X*=G,k.vx-=W*(re=g[O]),u>1&&(k.vy-=ae*re),u>2&&(k.vz-=X*re),M.vx+=W*(re=1-re),u>1&&(M.vy+=ae*re),u>2&&(M.vz+=X*re)}function T(){if(l){var B,L=l.length,C=t.length,O=new Map(l.map((M,k)=>[e(M,k,l),M])),N;for(B=0,p=new Array(L);B<C;++B)N=t[B],N.index=B,typeof N.source!="object"&&(N.source=find(O,N.source)),typeof N.target!="object"&&(N.target=find(O,N.target)),p[N.source.index]=(p[N.source.index]||0)+1,p[N.target.index]=(p[N.target.index]||0)+1;for(B=0,g=new Array(C);B<C;++B)N=t[B],g[B]=p[N.source.index]/(p[N.source.index]+p[N.target.index]);o=new Array(C),I(),h=new Array(C),P()}}function I(){if(l)for(var B=0,L=t.length;B<L;++B)o[B]=+n(t[B],B,t)}function P(){if(l)for(var B=0,L=t.length;B<L;++B)h[B]=+d(t[B],B,t)}return S.initialize=function(B,...L){l=B,v=L.find(C=>typeof C=="function")||Math.random,u=L.find(C=>[1,2,3].includes(C))||2,T()},S.links=function(B){return arguments.length?(t=B,T(),S):t},S.id=function(B){return arguments.length?(e=B,S):e},S.iterations=function(B){return arguments.length?(b=+B,S):b},S.strength=function(B){return arguments.length?(n=typeof B=="function"?B:constant(+B),I(),S):n},S.distance=function(B){return arguments.length?(d=typeof B=="function"?B:constant(+B),P(),S):d},S}var noop$1={value:()=>{}};function dispatch(){for(var t=0,e=arguments.length,n={},o;t<e;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Dispatch(n)}function Dispatch(t){this._=t}function parseTypenames(t,e){return t.trim().split(/^|\s+/).map(function(n){var o="",d=n.indexOf(".");if(d>=0&&(o=n.slice(d+1),n=n.slice(0,d)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,e){var n=this._,o=parseTypenames(t+"",n),d,h=-1,l=o.length;if(arguments.length<2){for(;++h<l;)if((d=(t=o[h]).type)&&(d=get(n[d],t.name)))return d;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++h<l;)if(d=(t=o[h]).type)n[d]=set(n[d],t.name,e);else if(e==null)for(d in n)n[d]=set(n[d],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dispatch(t)},call:function(t,e){if((d=arguments.length-2)>0)for(var n=new Array(d),o=0,d,h;o<d;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(h=this._[t],o=0,d=h.length;o<d;++o)h[o].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],d=0,h=o.length;d<h;++d)o[d].value.apply(e,n)}};function get(t,e){for(var n=0,o=t.length,d;n<o;++n)if((d=t[n]).name===e)return d.value}function set(t,e,n){for(var o=0,d=t.length;o<d;++o)if(t[o].name===e){t[o]=noop$1,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:e,value:n}),t}var frame=0,timeout=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?now():+n)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(t,e,n){var o=new Timer;return o.restart(t,e,n),o}function timerFlush(){now(),++frame;for(var t=taskHead,e;t;)(e=clockNow-t._time)>=0&&t._call.call(void 0,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var t=clock.now(),e=t-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=t)}function nap(){for(var t,e=taskHead,n,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:taskHead=n);taskTail=t,sleep(o)}function sleep(t){if(!frame){timeout&&(timeout=clearTimeout(timeout));var e=t-clockNow;e>24?(t<1/0&&(timeout=setTimeout(wake,t-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}const a=1664525,c$1=1013904223,m=4294967296;function lcg(){let t=1;return()=>(t=(a*t+c$1)%m)/m}var MAX_DIMENSIONS=3;function x(t){return t.x}function y(t){return t.y}function z(t){return t.z}var initialRadius=10,initialAngleRoll=Math.PI*(3-Math.sqrt(5)),initialAngleYaw=Math.PI*20/(9+Math.sqrt(221));function forceSimulation(t,e){e=e||2;var n=Math.min(MAX_DIMENSIONS,Math.max(1,Math.round(e))),o,d=1,h=.001,l=1-Math.pow(h,1/300),u=0,p=.6,g=new Map,v=timer(S),b=dispatch("tick","end"),_=lcg();t==null&&(t=[]);function S(){T(),b.call("tick",o),d<h&&(v.stop(),b.call("end",o))}function T(B){var L,C=t.length,O;B===void 0&&(B=1);for(var N=0;N<B;++N)for(d+=(u-d)*l,g.forEach(function(M){M(d)}),L=0;L<C;++L)O=t[L],O.fx==null?O.x+=O.vx*=p:(O.x=O.fx,O.vx=0),n>1&&(O.fy==null?O.y+=O.vy*=p:(O.y=O.fy,O.vy=0)),n>2&&(O.fz==null?O.z+=O.vz*=p:(O.z=O.fz,O.vz=0));return o}function I(){for(var B=0,L=t.length,C;B<L;++B){if(C=t[B],C.index=B,C.fx!=null&&(C.x=C.fx),C.fy!=null&&(C.y=C.fy),C.fz!=null&&(C.z=C.fz),isNaN(C.x)||n>1&&isNaN(C.y)||n>2&&isNaN(C.z)){var O=initialRadius*(n>2?Math.cbrt(.5+B):n>1?Math.sqrt(.5+B):B),N=B*initialAngleRoll,M=B*initialAngleYaw;n===1?C.x=O:n===2?(C.x=O*Math.cos(N),C.y=O*Math.sin(N)):(C.x=O*Math.sin(N)*Math.cos(M),C.y=O*Math.cos(N),C.z=O*Math.sin(N)*Math.sin(M))}(isNaN(C.vx)||n>1&&isNaN(C.vy)||n>2&&isNaN(C.vz))&&(C.vx=0,n>1&&(C.vy=0),n>2&&(C.vz=0))}}function P(B){return B.initialize&&B.initialize(t,_,n),B}return I(),o={tick:T,restart:function(){return v.restart(S),o},stop:function(){return v.stop(),o},numDimensions:function(B){return arguments.length?(n=Math.min(MAX_DIMENSIONS,Math.max(1,Math.round(B))),g.forEach(P),o):n},nodes:function(B){return arguments.length?(t=B,I(),g.forEach(P),o):t},alpha:function(B){return arguments.length?(d=+B,o):d},alphaMin:function(B){return arguments.length?(h=+B,o):h},alphaDecay:function(B){return arguments.length?(l=+B,o):+l},alphaTarget:function(B){return arguments.length?(u=+B,o):u},velocityDecay:function(B){return arguments.length?(p=1-B,o):1-p},randomSource:function(B){return arguments.length?(_=B,g.forEach(P),o):_},force:function(B,L){return arguments.length>1?(L==null?g.delete(B):g.set(B,P(L)),o):g.get(B)},find:function(){var B=Array.prototype.slice.call(arguments),L=B.shift()||0,C=(n>1?B.shift():null)||0,O=(n>2?B.shift():null)||0,N=B.shift()||1/0,M=0,k=t.length,W,ae,X,G,re,F;for(N*=N,M=0;M<k;++M)re=t[M],W=L-re.x,ae=C-(re.y||0),X=O-(re.z||0),G=W*W+ae*ae+X*X,G<N&&(F=re,N=G);return F},on:function(B,L){return arguments.length>1?(b.on(B,L),o):b.on(B)}}}function forceManyBody(){var t,e,n,o,d,h=constant(-30),l,u=1,p=1/0,g=.81;function v(T){var I,P=t.length,B=(e===1?binarytree(t,x):e===2?quadtree(t,x,y):e===3?octree(t,x,y,z):null).visitAfter(_);for(d=T,I=0;I<P;++I)n=t[I],B.visit(S)}function b(){if(t){var T,I=t.length,P;for(l=new Array(I),T=0;T<I;++T)P=t[T],l[P.index]=+h(P,T,t)}}function _(T){var I=0,P,B,L=0,C,O,N,M,k=T.length;if(k){for(C=O=N=M=0;M<k;++M)(P=T[M])&&(B=Math.abs(P.value))&&(I+=P.value,L+=B,C+=B*(P.x||0),O+=B*(P.y||0),N+=B*(P.z||0));I*=Math.sqrt(4/k),T.x=C/L,e>1&&(T.y=O/L),e>2&&(T.z=N/L)}else{P=T,P.x=P.data.x,e>1&&(P.y=P.data.y),e>2&&(P.z=P.data.z);do I+=l[P.data.index];while(P=P.next)}T.value=I}function S(T,I,P,B,L){if(!T.value)return!0;var C=[P,B,L][e-1],O=T.x-n.x,N=e>1?T.y-n.y:0,M=e>2?T.z-n.z:0,k=C-I,W=O*O+N*N+M*M;if(k*k/g<W)return W<p&&(O===0&&(O=jiggle(o),W+=O*O),e>1&&N===0&&(N=jiggle(o),W+=N*N),e>2&&M===0&&(M=jiggle(o),W+=M*M),W<u&&(W=Math.sqrt(u*W)),n.vx+=O*T.value*d/W,e>1&&(n.vy+=N*T.value*d/W),e>2&&(n.vz+=M*T.value*d/W)),!0;if(T.length||W>=p)return;(T.data!==n||T.next)&&(O===0&&(O=jiggle(o),W+=O*O),e>1&&N===0&&(N=jiggle(o),W+=N*N),e>2&&M===0&&(M=jiggle(o),W+=M*M),W<u&&(W=Math.sqrt(u*W)));do T.data!==n&&(k=l[T.data.index]*d/W,n.vx+=O*k,e>1&&(n.vy+=N*k),e>2&&(n.vz+=M*k));while(T=T.next)}return v.initialize=function(T,...I){t=T,o=I.find(P=>typeof P=="function")||Math.random,e=I.find(P=>[1,2,3].includes(P))||2,b()},v.strength=function(T){return arguments.length?(h=typeof T=="function"?T:constant(+T),b(),v):h},v.distanceMin=function(T){return arguments.length?(u=T*T,v):Math.sqrt(u)},v.distanceMax=function(T){return arguments.length?(p=T*T,v):Math.sqrt(p)},v.theta=function(T){return arguments.length?(g=T*T,v):Math.sqrt(g)},v}var ngraph_forcelayoutExports={},ngraph_forcelayout={get exports(){return ngraph_forcelayoutExports},set exports(t){ngraph_forcelayoutExports=t}},generateCreateBodyExports={},generateCreateBody={get exports(){return generateCreateBodyExports},set exports(t){generateCreateBodyExports=t}},getVariableName$2=function t(e){return e===0?"x":e===1?"y":e===2?"z":"c"+(e+1)};const getVariableName$1=getVariableName$2;var createPatternBuilder$6=function t(e){return n;function n(o,d){let h=d&&d.indent||0,l=d&&d.join!==void 0?d.join:`
`,u=Array(h+1).join(" "),p=[];for(let g=0;g<e;++g){let v=getVariableName$1(g),b=g===0?"":u;p.push(b+o.replace(/{var}/g,v))}return p.join(l)}};const createPatternBuilder$5=createPatternBuilder$6;generateCreateBody.exports=generateCreateBodyFunction$1;generateCreateBodyExports.generateCreateBodyFunctionBody=generateCreateBodyFunctionBody;generateCreateBodyExports.getVectorCode=getVectorCode;generateCreateBodyExports.getBodyCode=getBodyCode;function generateCreateBodyFunction$1(t,e){let n=generateCreateBodyFunctionBody(t,e),{Body:o}=new Function(n)();return o}function generateCreateBodyFunctionBody(t,e){return`
${getVectorCode(t,e)}
${getBodyCode(t)}
return {Body: Body, Vector: Vector};
`}function getBodyCode(t){let e=createPatternBuilder$5(t),n=e("{var}",{join:", "});return`
function Body(${n}) {
  this.isPinned = false;
  this.pos = new Vector(${n});
  this.force = new Vector();
  this.velocity = new Vector();
  this.mass = 1;

  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.reset = function() {
  this.force.reset();
  this.springCount = 0;
  this.springLength = 0;
}

Body.prototype.setPosition = function (${n}) {
  ${e("this.pos.{var} = {var} || 0;",{indent:2})}
};`}function getVectorCode(t,e){let n=createPatternBuilder$5(t),o="";return e&&(o=`${n(`
   var v{var};
Object.defineProperty(this, '{var}', {
  set: function(v) { 
    if (!Number.isFinite(v)) throw new Error('Cannot set non-numbers to {var}');
    v{var} = v; 
  },
  get: function() { return v{var}; }
});`)}`),`function Vector(${n("{var}",{join:", "})}) {
  ${o}
    if (typeof arguments[0] === 'object') {
      // could be another vector
      let v = arguments[0];
      ${n('if (!Number.isFinite(v.{var})) throw new Error("Expected value is not a finite number at Vector constructor ({var})");',{indent:4})}
      ${n("this.{var} = v.{var};",{indent:4})}
    } else {
      ${n('this.{var} = typeof {var} === "number" ? {var} : 0;',{indent:4})}
    }
  }
  
  Vector.prototype.reset = function () {
    ${n("this.{var} = ",{join:""})}0;
  };`}var generateQuadTreeExports={},generateQuadTree={get exports(){return generateQuadTreeExports},set exports(t){generateQuadTreeExports=t}};const createPatternBuilder$4=createPatternBuilder$6,getVariableName=getVariableName$2;generateQuadTree.exports=generateQuadTreeFunction$1;generateQuadTreeExports.generateQuadTreeFunctionBody=generateQuadTreeFunctionBody;generateQuadTreeExports.getInsertStackCode=getInsertStackCode;generateQuadTreeExports.getQuadNodeCode=getQuadNodeCode;generateQuadTreeExports.isSamePosition=isSamePosition;generateQuadTreeExports.getChildBodyCode=getChildBodyCode;generateQuadTreeExports.setChildBodyCode=setChildBodyCode;function generateQuadTreeFunction$1(t){let e=generateQuadTreeFunctionBody(t);return new Function(e)()}function generateQuadTreeFunctionBody(t){let e=createPatternBuilder$4(t),n=Math.pow(2,t);return`
${getInsertStackCode()}
${getQuadNodeCode(t)}
${isSamePosition(t)}
${getChildBodyCode(t)}
${setChildBodyCode(t)}

function createQuadTree(options, random) {
  options = options || {};
  options.gravity = typeof options.gravity === 'number' ? options.gravity : -1;
  options.theta = typeof options.theta === 'number' ? options.theta : 0.8;

  var gravity = options.gravity;
  var updateQueue = [];
  var insertStack = new InsertStack();
  var theta = options.theta;

  var nodesCache = [];
  var currentInCache = 0;
  var root = newNode();

  return {
    insertBodies: insertBodies,

    /**
     * Gets root node if it is present
     */
    getRoot: function() {
      return root;
    },

    updateBodyForce: update,

    options: function(newOptions) {
      if (newOptions) {
        if (typeof newOptions.gravity === 'number') {
          gravity = newOptions.gravity;
        }
        if (typeof newOptions.theta === 'number') {
          theta = newOptions.theta;
        }

        return this;
      }

      return {
        gravity: gravity,
        theta: theta
      };
    }
  };

  function newNode() {
    // To avoid pressure on GC we reuse nodes.
    var node = nodesCache[currentInCache];
    if (node) {
${l("      node.")}
      node.body = null;
      node.mass = ${e("node.mass_{var} = ",{join:""})}0;
      ${e("node.min_{var} = node.max_{var} = ",{join:""})}0;
    } else {
      node = new QuadNode();
      nodesCache[currentInCache] = node;
    }

    ++currentInCache;
    return node;
  }

  function update(sourceBody) {
    var queue = updateQueue;
    var v;
    ${e("var d{var};",{indent:4})}
    var r; 
    ${e("var f{var} = 0;",{indent:4})}
    var queueLength = 1;
    var shiftIdx = 0;
    var pushIdx = 1;

    queue[0] = root;

    while (queueLength) {
      var node = queue[shiftIdx];
      var body = node.body;

      queueLength -= 1;
      shiftIdx += 1;
      var differentBody = (body !== sourceBody);
      if (body && differentBody) {
        // If the current node is a leaf node (and it is not source body),
        // calculate the force exerted by the current node on body, and add this
        // amount to body's net force.
        ${e("d{var} = body.pos.{var} - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Poor man's protection against zero distance.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }

        // This is standard gravitation force calculation but we divide
        // by r^3 to save two operations when normalizing force vector.
        v = gravity * body.mass * sourceBody.mass / (r * r * r);
        ${e("f{var} += v * d{var};",{indent:8})}
      } else if (differentBody) {
        // Otherwise, calculate the ratio s / r,  where s is the width of the region
        // represented by the internal node, and r is the distance between the body
        // and the node's center-of-mass
        ${e("d{var} = node.mass_{var} / node.mass - sourceBody.pos.{var};",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

        if (r === 0) {
          // Sorry about code duplication. I don't want to create many functions
          // right away. Just want to see performance first.
          ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:10})}
          r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
        }
        // If s / r < , treat this internal node as a single body, and calculate the
        // force it exerts on sourceBody, and add this amount to sourceBody's net force.
        if ((node.max_${getVariableName(0)} - node.min_${getVariableName(0)}) / r < theta) {
          // in the if statement above we consider node's width only
          // because the region was made into square during tree creation.
          // Thus there is no difference between using width or height.
          v = gravity * node.mass * sourceBody.mass / (r * r * r);
          ${e("f{var} += v * d{var};",{indent:10})}
        } else {
          // Otherwise, run the procedure recursively on each of the current node's children.

          // I intentionally unfolded this loop, to save several CPU cycles.
${h()}
        }
      }
    }

    ${e("sourceBody.force.{var} += f{var};",{indent:4})}
  }

  function insertBodies(bodies) {
    ${e("var {var}min = Number.MAX_VALUE;",{indent:4})}
    ${e("var {var}max = Number.MIN_VALUE;",{indent:4})}
    var i = bodies.length;

    // To reduce quad tree depth we are looking for exact bounding box of all particles.
    while (i--) {
      var pos = bodies[i].pos;
      ${e("if (pos.{var} < {var}min) {var}min = pos.{var};",{indent:6})}
      ${e("if (pos.{var} > {var}max) {var}max = pos.{var};",{indent:6})}
    }

    // Makes the bounds square.
    var maxSideLength = -Infinity;
    ${e("if ({var}max - {var}min > maxSideLength) maxSideLength = {var}max - {var}min ;",{indent:4})}

    currentInCache = 0;
    root = newNode();
    ${e("root.min_{var} = {var}min;",{indent:4})}
    ${e("root.max_{var} = {var}min + maxSideLength;",{indent:4})}

    i = bodies.length - 1;
    if (i >= 0) {
      root.body = bodies[i];
    }
    while (i--) {
      insert(bodies[i], root);
    }
  }

  function insert(newBody) {
    insertStack.reset();
    insertStack.push(root, newBody);

    while (!insertStack.isEmpty()) {
      var stackItem = insertStack.pop();
      var node = stackItem.node;
      var body = stackItem.body;

      if (!node.body) {
        // This is internal node. Update the total mass of the node and center-of-mass.
        ${e("var {var} = body.pos.{var};",{indent:8})}
        node.mass += body.mass;
        ${e("node.mass_{var} += body.mass * {var};",{indent:8})}

        // Recursively insert the body in the appropriate quadrant.
        // But first find the appropriate quadrant.
        var quadIdx = 0; // Assume we are in the 0's quad.
        ${e("var min_{var} = node.min_{var};",{indent:8})}
        ${e("var max_{var} = (min_{var} + node.max_{var}) / 2;",{indent:8})}

${d(8)}

        var child = getChild(node, quadIdx);

        if (!child) {
          // The node is internal but this quadrant is not taken. Add
          // subnode to it.
          child = newNode();
          ${e("child.min_{var} = min_{var};",{indent:10})}
          ${e("child.max_{var} = max_{var};",{indent:10})}
          child.body = body;

          setChild(node, quadIdx, child);
        } else {
          // continue searching in this quadrant.
          insertStack.push(child, body);
        }
      } else {
        // We are trying to add to the leaf node.
        // We have to convert current leaf into internal node
        // and continue adding two nodes.
        var oldBody = node.body;
        node.body = null; // internal nodes do not cary bodies

        if (isSamePosition(oldBody.pos, body.pos)) {
          // Prevent infinite subdivision by bumping one node
          // anywhere in this quadrant
          var retriesCount = 3;
          do {
            var offset = random.nextDouble();
            ${e("var d{var} = (node.max_{var} - node.min_{var}) * offset;",{indent:12})}

            ${e("oldBody.pos.{var} = node.min_{var} + d{var};",{indent:12})}
            retriesCount -= 1;
            // Make sure we don't bump it out of the box. If we do, next iteration should fix it
          } while (retriesCount > 0 && isSamePosition(oldBody.pos, body.pos));

          if (retriesCount === 0 && isSamePosition(oldBody.pos, body.pos)) {
            // This is very bad, we ran out of precision.
            // if we do not return from the method we'll get into
            // infinite loop here. So we sacrifice correctness of layout, and keep the app running
            // Next layout iteration should get larger bounding box in the first step and fix this
            return;
          }
        }
        // Next iteration should subdivide node further.
        insertStack.push(node, oldBody);
        insertStack.push(node, body);
      }
    }
  }
}
return createQuadTree;

`;function d(u){let p=[],g=Array(u+1).join(" ");for(let v=0;v<t;++v)p.push(g+`if (${getVariableName(v)} > max_${getVariableName(v)}) {`),p.push(g+`  quadIdx = quadIdx + ${Math.pow(2,v)};`),p.push(g+`  min_${getVariableName(v)} = max_${getVariableName(v)};`),p.push(g+`  max_${getVariableName(v)} = node.max_${getVariableName(v)};`),p.push(g+"}");return p.join(`
`)}function h(){let u=Array(11).join(" "),p=[];for(let g=0;g<n;++g)p.push(u+`if (node.quad${g}) {`),p.push(u+`  queue[pushIdx] = node.quad${g};`),p.push(u+"  queueLength += 1;"),p.push(u+"  pushIdx += 1;"),p.push(u+"}");return p.join(`
`)}function l(u){let p=[];for(let g=0;g<n;++g)p.push(`${u}quad${g} = null;`);return p.join(`
`)}}function isSamePosition(t){let e=createPatternBuilder$4(t);return`
  function isSamePosition(point1, point2) {
    ${e("var d{var} = Math.abs(point1.{var} - point2.{var});",{indent:2})}
  
    return ${e("d{var} < 1e-8",{join:" && "})};
  }  
`}function setChildBodyCode(t){var e=Math.pow(2,t);return`
function setChild(node, idx, child) {
  ${n()}
}`;function n(){let o=[];for(let d=0;d<e;++d){let h=d===0?"  ":"  else ";o.push(`${h}if (idx === ${d}) node.quad${d} = child;`)}return o.join(`
`)}}function getChildBodyCode(t){return`function getChild(node, idx) {
${e()}
  return null;
}`;function e(){let n=[],o=Math.pow(2,t);for(let d=0;d<o;++d)n.push(`  if (idx === ${d}) return node.quad${d};`);return n.join(`
`)}}function getQuadNodeCode(t){let e=createPatternBuilder$4(t),n=Math.pow(2,t);var o=`
function QuadNode() {
  // body stored inside this node. In quad tree only leaf nodes (by construction)
  // contain bodies:
  this.body = null;

  // Child nodes are stored in quads. Each quad is presented by number:
  // 0 | 1
  // -----
  // 2 | 3
${d("  this.")}

  // Total mass of current node
  this.mass = 0;

  // Center of mass coordinates
  ${e("this.mass_{var} = 0;",{indent:2})}

  // bounding box coordinates
  ${e("this.min_{var} = 0;",{indent:2})}
  ${e("this.max_{var} = 0;",{indent:2})}
}
`;return o;function d(h){let l=[];for(let u=0;u<n;++u)l.push(`${h}quad${u} = null;`);return l.join(`
`)}}function getInsertStackCode(){return`
/**
 * Our implementation of QuadTree is non-recursive to avoid GC hit
 * This data structure represent stack of elements
 * which we are trying to insert into quad tree.
 */
function InsertStack () {
    this.stack = [];
    this.popIdx = 0;
}

InsertStack.prototype = {
    isEmpty: function() {
        return this.popIdx === 0;
    },
    push: function (node, body) {
        var item = this.stack[this.popIdx];
        if (!item) {
            // we are trying to avoid memory pressure: create new element
            // only when absolutely necessary
            this.stack[this.popIdx] = new InsertStackElement(node, body);
        } else {
            item.node = node;
            item.body = body;
        }
        ++this.popIdx;
    },
    pop: function () {
        if (this.popIdx > 0) {
            return this.stack[--this.popIdx];
        }
    },
    reset: function () {
        this.popIdx = 0;
    }
};

function InsertStackElement(node, body) {
    this.node = node; // QuadTree node
    this.body = body; // physical body which needs to be inserted to node
}
`}var generateBoundsExports={},generateBounds={get exports(){return generateBoundsExports},set exports(t){generateBoundsExports=t}};generateBounds.exports=generateBoundsFunction$1;generateBoundsExports.generateFunctionBody=generateBoundsFunctionBody;const createPatternBuilder$3=createPatternBuilder$6;function generateBoundsFunction$1(t){let e=generateBoundsFunctionBody(t);return new Function("bodies","settings","random",e)}function generateBoundsFunctionBody(t){let e=createPatternBuilder$3(t);return`
  var boundingBox = {
    ${e("min_{var}: 0, max_{var}: 0,",{indent:4})}
  };

  return {
    box: boundingBox,

    update: updateBoundingBox,

    reset: resetBoundingBox,

    getBestNewPosition: function (neighbors) {
      var ${e("base_{var} = 0",{join:", "})};

      if (neighbors.length) {
        for (var i = 0; i < neighbors.length; ++i) {
          let neighborPos = neighbors[i].pos;
          ${e("base_{var} += neighborPos.{var};",{indent:10})}
        }

        ${e("base_{var} /= neighbors.length;",{indent:8})}
      } else {
        ${e("base_{var} = (boundingBox.min_{var} + boundingBox.max_{var}) / 2;",{indent:8})}
      }

      var springLength = settings.springLength;
      return {
        ${e("{var}: base_{var} + (random.nextDouble() - 0.5) * springLength,",{indent:8})}
      };
    }
  };

  function updateBoundingBox() {
    var i = bodies.length;
    if (i === 0) return; // No bodies - no borders.

    ${e("var max_{var} = -Infinity;",{indent:4})}
    ${e("var min_{var} = Infinity;",{indent:4})}

    while(i--) {
      // this is O(n), it could be done faster with quadtree, if we check the root node bounds
      var bodyPos = bodies[i].pos;
      ${e("if (bodyPos.{var} < min_{var}) min_{var} = bodyPos.{var};",{indent:6})}
      ${e("if (bodyPos.{var} > max_{var}) max_{var} = bodyPos.{var};",{indent:6})}
    }

    ${e("boundingBox.min_{var} = min_{var};",{indent:4})}
    ${e("boundingBox.max_{var} = max_{var};",{indent:4})}
  }

  function resetBoundingBox() {
    ${e("boundingBox.min_{var} = boundingBox.max_{var} = 0;",{indent:4})}
  }
`}var generateCreateDragForceExports={},generateCreateDragForce={get exports(){return generateCreateDragForceExports},set exports(t){generateCreateDragForceExports=t}};const createPatternBuilder$2=createPatternBuilder$6;generateCreateDragForce.exports=generateCreateDragForceFunction$1;generateCreateDragForceExports.generateCreateDragForceFunctionBody=generateCreateDragForceFunctionBody;function generateCreateDragForceFunction$1(t){let e=generateCreateDragForceFunctionBody(t);return new Function("options",e)}function generateCreateDragForceFunctionBody(t){return`
  if (!Number.isFinite(options.dragCoefficient)) throw new Error('dragCoefficient is not a finite number');

  return {
    update: function(body) {
      ${createPatternBuilder$2(t)("body.force.{var} -= options.dragCoefficient * body.velocity.{var};",{indent:6})}
    }
  };
`}var generateCreateSpringForceExports={},generateCreateSpringForce={get exports(){return generateCreateSpringForceExports},set exports(t){generateCreateSpringForceExports=t}};const createPatternBuilder$1=createPatternBuilder$6;generateCreateSpringForce.exports=generateCreateSpringForceFunction$1;generateCreateSpringForceExports.generateCreateSpringForceFunctionBody=generateCreateSpringForceFunctionBody;function generateCreateSpringForceFunction$1(t){let e=generateCreateSpringForceFunctionBody(t);return new Function("options","random",e)}function generateCreateSpringForceFunctionBody(t){let e=createPatternBuilder$1(t);return`
  if (!Number.isFinite(options.springCoefficient)) throw new Error('Spring coefficient is not a number');
  if (!Number.isFinite(options.springLength)) throw new Error('Spring length is not a number');

  return {
    /**
     * Updates forces acting on a spring
     */
    update: function (spring) {
      var body1 = spring.from;
      var body2 = spring.to;
      var length = spring.length < 0 ? options.springLength : spring.length;
      ${e("var d{var} = body2.pos.{var} - body1.pos.{var};",{indent:6})}
      var r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});

      if (r === 0) {
        ${e("d{var} = (random.nextDouble() - 0.5) / 50;",{indent:8})}
        r = Math.sqrt(${e("d{var} * d{var}",{join:" + "})});
      }

      var d = r - length;
      var coefficient = ((spring.coefficient > 0) ? spring.coefficient : options.springCoefficient) * d / r;

      ${e("body1.force.{var} += coefficient * d{var}",{indent:6})};
      body1.springCount += 1;
      body1.springLength += r;

      ${e("body2.force.{var} -= coefficient * d{var}",{indent:6})};
      body2.springCount += 1;
      body2.springLength += r;
    }
  };
`}var generateIntegratorExports={},generateIntegrator={get exports(){return generateIntegratorExports},set exports(t){generateIntegratorExports=t}};const createPatternBuilder=createPatternBuilder$6;generateIntegrator.exports=generateIntegratorFunction$1;generateIntegratorExports.generateIntegratorFunctionBody=generateIntegratorFunctionBody;function generateIntegratorFunction$1(t){let e=generateIntegratorFunctionBody(t);return new Function("bodies","timeStep","adaptiveTimeStepWeight",e)}function generateIntegratorFunctionBody(t){let e=createPatternBuilder(t);return`
  var length = bodies.length;
  if (length === 0) return 0;

  ${e("var d{var} = 0, t{var} = 0;",{indent:2})}

  for (var i = 0; i < length; ++i) {
    var body = bodies[i];
    if (body.isPinned) continue;

    if (adaptiveTimeStepWeight && body.springCount) {
      timeStep = (adaptiveTimeStepWeight * body.springLength/body.springCount);
    }

    var coeff = timeStep / body.mass;

    ${e("body.velocity.{var} += coeff * body.force.{var};",{indent:4})}
    ${e("var v{var} = body.velocity.{var};",{indent:4})}
    var v = Math.sqrt(${e("v{var} * v{var}",{join:" + "})});

    if (v > 1) {
      // We normalize it so that we move within timeStep range. 
      // for the case when v <= 1 - we let velocity to fade out.
      ${e("body.velocity.{var} = v{var} / v;",{indent:6})}
    }

    ${e("d{var} = timeStep * body.velocity.{var};",{indent:4})}

    ${e("body.pos.{var} += d{var};",{indent:4})}

    ${e("t{var} += Math.abs(d{var});",{indent:4})}
  }

  return (${e("t{var} * t{var}",{join:" + "})})/length;
`}var spring,hasRequiredSpring;function requireSpring(){if(hasRequiredSpring)return spring;hasRequiredSpring=1,spring=t;function t(e,n,o,d){this.from=e,this.to=n,this.length=o,this.coefficient=d}return spring}var ngraph_merge,hasRequiredNgraph_merge;function requireNgraph_merge(){if(hasRequiredNgraph_merge)return ngraph_merge;hasRequiredNgraph_merge=1,ngraph_merge=t;function t(e,n){var o;if(e||(e={}),n){for(o in n)if(n.hasOwnProperty(o)){var d=e.hasOwnProperty(o),h=typeof n[o],l=!d||typeof e[o]!==h;l?e[o]=n[o]:h==="object"&&(e[o]=t(e[o],n[o]))}}return e}return ngraph_merge}var ngraph_events=function t(e){validateSubject(e);var n=createEventsStorage(e);return e.on=n.on,e.off=n.off,e.fire=n.fire,e};function createEventsStorage(t){var e=Object.create(null);return{on:function(n,o,d){if(typeof o!="function")throw new Error("callback is expected to be a function");var h=e[n];return h||(h=e[n]=[]),h.push({callback:o,ctx:d}),t},off:function(n,o){var d=typeof n>"u";if(d)return e=Object.create(null),t;if(e[n]){var h=typeof o!="function";if(h)delete e[n];else for(var l=e[n],u=0;u<l.length;++u)l[u].callback===o&&l.splice(u,1)}return t},fire:function(n){var o=e[n];if(!o)return t;var d;arguments.length>1&&(d=Array.prototype.splice.call(arguments,1));for(var h=0;h<o.length;++h){var l=o[h];l.callback.apply(l.ctx,d)}return t}}}function validateSubject(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}var ngraph_randomExports={},ngraph_random={get exports(){return ngraph_randomExports},set exports(t){ngraph_randomExports=t}},hasRequiredNgraph_random;function requireNgraph_random(){if(hasRequiredNgraph_random)return ngraph_randomExports;hasRequiredNgraph_random=1,ngraph_random.exports=t,ngraph_randomExports.random=t,ngraph_randomExports.randomIterator=u;function t(p){var g=typeof p=="number"?p:+new Date;return new e(g)}function e(p){this.seed=p}e.prototype.next=l,e.prototype.nextDouble=h,e.prototype.uniform=h,e.prototype.gaussian=n;function n(){var p,g,v;do g=this.nextDouble()*2-1,v=this.nextDouble()*2-1,p=g*g+v*v;while(p>=1||p===0);return g*Math.sqrt(-2*Math.log(p)/p)}e.prototype.levy=o;function o(){var p=1.5,g=Math.pow(d(1+p)*Math.sin(Math.PI*p/2)/(d((1+p)/2)*p*Math.pow(2,(p-1)/2)),1/p);return this.gaussian()*g/Math.pow(Math.abs(this.gaussian()),1/p)}function d(p){return Math.sqrt(2*Math.PI/p)*Math.pow(1/Math.E*(p+1/(12*p-1/(10*p))),p)}function h(){var p=this.seed;return p=p+2127912214+(p<<12)&4294967295,p=(p^3345072700^p>>>19)&4294967295,p=p+374761393+(p<<5)&4294967295,p=(p+3550635116^p<<9)&4294967295,p=p+4251993797+(p<<3)&4294967295,p=(p^3042594569^p>>>16)&4294967295,this.seed=p,(p&268435455)/268435456}function l(p){return Math.floor(this.nextDouble()*p)}function u(p,g){var v=g||t();if(typeof v.next!="function")throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:_,shuffle:b};function b(){var S,T,I;for(S=p.length-1;S>0;--S)T=v.next(S+1),I=p[T],p[T]=p[S],p[S]=I;return p}function _(S){var T,I,P;for(T=p.length-1;T>0;--T)I=v.next(T+1),P=p[I],p[I]=p[T],p[T]=P,S(P);p.length&&S(p[0])}}return ngraph_randomExports}var createPhysicsSimulator_1=createPhysicsSimulator,generateCreateBodyFunction=generateCreateBodyExports,generateQuadTreeFunction=generateQuadTreeExports,generateBoundsFunction=generateBoundsExports,generateCreateDragForceFunction=generateCreateDragForceExports,generateCreateSpringForceFunction=generateCreateSpringForceExports,generateIntegratorFunction=generateIntegratorExports,dimensionalCache={};function createPhysicsSimulator(t){var e=requireSpring(),n=requireNgraph_merge(),o=ngraph_events;if(t){if(t.springCoeff!==void 0)throw new Error("springCoeff was renamed to springCoefficient");if(t.dragCoeff!==void 0)throw new Error("dragCoeff was renamed to dragCoefficient")}t=n(t,{springLength:10,springCoefficient:.8,gravity:-12,theta:.8,dragCoefficient:.9,timeStep:.5,adaptiveTimeStepWeight:0,dimensions:2,debug:!1});var d=dimensionalCache[t.dimensions];if(!d){var h=t.dimensions;d={Body:generateCreateBodyFunction(h,t.debug),createQuadTree:generateQuadTreeFunction(h),createBounds:generateBoundsFunction(h),createDragForce:generateCreateDragForceFunction(h),createSpringForce:generateCreateSpringForceFunction(h),integrate:generateIntegratorFunction(h)},dimensionalCache[h]=d}var l=d.Body,u=d.createQuadTree,p=d.createBounds,g=d.createDragForce,v=d.createSpringForce,b=d.integrate,_=U=>new l(U),S=requireNgraph_random().random(42),T=[],I=[],P=u(t,S),B=p(T,t,S),L=v(t,S),C=g(t),O=0,N=[],M=new Map,k=0;X("nbody",F),X("spring",$);var W={bodies:T,quadTree:P,springs:I,settings:t,addForce:X,removeForce:G,getForces:re,step:function(){for(var U=0;U<N.length;++U)N[U](k);var H=b(T,t.timeStep,t.adaptiveTimeStepWeight);return k+=1,H},addBody:function(U){if(!U)throw new Error("Body is required");return T.push(U),U},addBodyAt:function(U){if(!U)throw new Error("Body position is required");var H=_(U);return T.push(H),H},removeBody:function(U){if(U){var H=T.indexOf(U);if(!(H<0))return T.splice(H,1),T.length===0&&B.reset(),!0}},addSpring:function(U,H,ee,ge){if(!U||!H)throw new Error("Cannot add null spring to force simulator");typeof ee!="number"&&(ee=-1);var me=new e(U,H,ee,ge>=0?ge:-1);return I.push(me),me},getTotalMovement:function(){return O},removeSpring:function(U){if(U){var H=I.indexOf(U);if(H>-1)return I.splice(H,1),!0}},getBestNewBodyPosition:function(U){return B.getBestNewPosition(U)},getBBox:ae,getBoundingBox:ae,invalidateBBox:function(){console.warn("invalidateBBox() is deprecated, bounds always recomputed on `getBBox()` call")},gravity:function(U){return U!==void 0?(t.gravity=U,P.options({gravity:U}),this):t.gravity},theta:function(U){return U!==void 0?(t.theta=U,P.options({theta:U}),this):t.theta},random:S};return expose(t,W),o(W),W;function ae(){return B.update(),B.box}function X(U,H){if(M.has(U))throw new Error("Force "+U+" is already added");M.set(U,H),N.push(H)}function G(U){var H=N.indexOf(M.get(U));H<0||(N.splice(H,1),M.delete(U))}function re(){return M}function F(){if(T.length!==0){P.insertBodies(T);for(var U=T.length;U--;){var H=T[U];H.isPinned||(H.reset(),P.updateBodyForce(H),C.update(H))}}}function $(){for(var U=I.length;U--;)L.update(I[U])}}function expose(t,e){for(var n in t)augment(t,e,n)}function augment(t,e,n){if(t.hasOwnProperty(n)&&typeof e[n]!="function"){var o=Number.isFinite(t[n]);o?e[n]=function(d){if(d!==void 0){if(!Number.isFinite(d))throw new Error("Value of "+n+" should be a valid number.");return t[n]=d,e}return t[n]}:e[n]=function(d){return d!==void 0?(t[n]=d,e):t[n]}}}ngraph_forcelayout.exports=createLayout;ngraph_forcelayoutExports.simulator=createPhysicsSimulator_1;var eventify$1=ngraph_events;function createLayout(t,e){if(!t)throw new Error("Graph structure cannot be undefined");var n=e&&e.createSimulator||createPhysicsSimulator_1,o=n(e);if(Array.isArray(e))throw new Error("Physics settings is expected to be an object");var d=t.version>19?F:re;e&&typeof e.nodeMass=="function"&&(d=e.nodeMass);var h=new Map,l={},u=0,p=o.settings.springTransform||noop;C(),P();var g=!1,v={step:function(){if(u===0)return b(!0),!0;var $=o.step();v.lastMove=$,v.fire("step");var U=$/u,H=U<=.01;return b(H),H},getNodePosition:function($){return G($).pos},setNodePosition:function($){var U=G($);U.setPosition.apply(U,Array.prototype.slice.call(arguments,1))},getLinkPosition:function($){var U=l[$];if(U)return{from:U.from.pos,to:U.to.pos}},getGraphRect:function(){return o.getBBox()},forEachBody:_,pinNode:function($,U){var H=G($.id);H.isPinned=!!U},isNodePinned:function($){return G($.id).isPinned},dispose:function(){t.off("changed",L),v.fire("disposed")},getBody:I,getSpring:T,getForceVectorLength:S,simulator:o,graph:t,lastMove:0};return eventify$1(v),v;function b($){g!==$&&(g=$,B($))}function _($){h.forEach($)}function S(){var $=0,U=0;return _(function(H){$+=Math.abs(H.force.x),U+=Math.abs(H.force.y)}),Math.sqrt($*$+U*U)}function T($,U){var H;if(U===void 0)typeof $!="object"?H=$:H=$.id;else{var ee=t.hasLink($,U);if(!ee)return;H=ee.id}return l[H]}function I($){return h.get($)}function P(){t.on("changed",L)}function B($){v.fire("stable",$)}function L($){for(var U=0;U<$.length;++U){var H=$[U];H.changeType==="add"?(H.node&&O(H.node.id),H.link&&M(H.link)):H.changeType==="remove"&&(H.node&&N(H.node),H.link&&k(H.link))}u=t.getNodesCount()}function C(){u=0,t.forEachNode(function($){O($.id),u+=1}),t.forEachLink(M)}function O($){var U=h.get($);if(!U){var H=t.getNode($);if(!H)throw new Error("initBody() was called with unknown node id");var ee=H.position;if(!ee){var ge=W(H);ee=o.getBestNewBodyPosition(ge)}U=o.addBodyAt(ee),U.id=$,h.set($,U),ae($),X(H)&&(U.isPinned=!0)}}function N($){var U=$.id,H=h.get(U);H&&(h.delete(U),o.removeBody(H))}function M($){ae($.fromId),ae($.toId);var U=h.get($.fromId),H=h.get($.toId),ee=o.addSpring(U,H,$.length);p($,ee),l[$.id]=ee}function k($){var U=l[$.id];if(U){var H=t.getNode($.fromId),ee=t.getNode($.toId);H&&ae(H.id),ee&&ae(ee.id),delete l[$.id],o.removeSpring(U)}}function W($){var U=[];if(!$.links)return U;for(var H=Math.min($.links.length,2),ee=0;ee<H;++ee){var ge=$.links[ee],me=ge.fromId!==$.id?h.get(ge.fromId):h.get(ge.toId);me&&me.pos&&U.push(me)}return U}function ae($){var U=h.get($);if(U.mass=d($),Number.isNaN(U.mass))throw new Error("Node mass should be a number")}function X($){return $&&($.isPinned||$.data&&$.data.isPinned)}function G($){var U=h.get($);return U||(O($),U=h.get($)),U}function re($){var U=t.getLinks($);return U?1+U.length/3:1}function F($){var U=t.getLinks($);return U?1+U.size/3:1}}function noop(){}var ngraph_graph=createGraph,eventify=ngraph_events;function createGraph(t){if(t=t||{},"uniqueLinkId"in t&&(console.warn("ngraph.graph: Starting from version 0.14 `uniqueLinkId` is deprecated.\nUse `multigraph` option instead\n",`
`,`Note: there is also change in default behavior: From now on each graph
is considered to be not a multigraph by default (each edge is unique).`),t.multigraph=t.uniqueLinkId),t.multigraph===void 0&&(t.multigraph=!1),typeof Map!="function")throw new Error("ngraph.graph requires `Map` to be defined. Please polyfill it before using ngraph");var e=new Map,n=new Map,o={},d=0,h=t.multigraph?O:C,l=[],u=H,p=H,g=H,v=H,b={version:20,addNode:I,addLink:L,removeLink:W,removeNode:B,getNode:P,getNodeCount:N,getLinkCount:M,getEdgeCount:M,getLinksCount:M,getNodesCount:N,getLinks:k,forEachNode:me,forEachLinkedNode:F,forEachLink:re,beginUpdate:g,endUpdate:v,clear:G,hasLink:X,hasNode:P,getLink:X};return eventify(b),_(),b;function _(){var fe=b.on;b.on=he;function he(){return b.beginUpdate=g=ee,b.endUpdate=v=ge,u=S,p=T,b.on=fe,fe.apply(b,arguments)}}function S(fe,he){l.push({link:fe,changeType:he})}function T(fe,he){l.push({node:fe,changeType:he})}function I(fe,he){if(fe===void 0)throw new Error("Invalid node identifier");g();var _e=P(fe);return _e?(_e.data=he,p(_e,"update")):(_e=new Node(fe,he),p(_e,"add")),e.set(fe,_e),v(),_e}function P(fe){return e.get(fe)}function B(fe){var he=P(fe);if(!he)return!1;g();var _e=he.links;return _e&&(_e.forEach(ae),he.links=null),e.delete(fe),p(he,"remove"),v(),!0}function L(fe,he,_e){g();var xe=P(fe)||I(fe),Ne=P(he)||I(he),Ie=h(fe,he,_e),Pe=n.has(Ie.id);return n.set(Ie.id,Ie),addLinkToNode(xe,Ie),fe!==he&&addLinkToNode(Ne,Ie),u(Ie,Pe?"update":"add"),v(),Ie}function C(fe,he,_e){var xe=makeLinkId(fe,he),Ne=n.get(xe);return Ne?(Ne.data=_e,Ne):new Link(fe,he,_e,xe)}function O(fe,he,_e){var xe=makeLinkId(fe,he),Ne=o.hasOwnProperty(xe);if(Ne||X(fe,he)){Ne||(o[xe]=0);var Ie="@"+ ++o[xe];xe=makeLinkId(fe+Ie,he+Ie)}return new Link(fe,he,_e,xe)}function N(){return e.size}function M(){return n.size}function k(fe){var he=P(fe);return he?he.links:null}function W(fe,he){return he!==void 0&&(fe=X(fe,he)),ae(fe)}function ae(fe){if(!fe||!n.get(fe.id))return!1;g(),n.delete(fe.id);var he=P(fe.fromId),_e=P(fe.toId);return he&&he.links.delete(fe),_e&&_e.links.delete(fe),u(fe,"remove"),v(),!0}function X(fe,he){if(!(fe===void 0||he===void 0))return n.get(makeLinkId(fe,he))}function G(){g(),me(function(fe){B(fe.id)}),v()}function re(fe){if(typeof fe=="function")for(var he=n.values(),_e=he.next();!_e.done;){if(fe(_e.value))return!0;_e=he.next()}}function F(fe,he,_e){var xe=P(fe);if(xe&&xe.links&&typeof he=="function")return _e?U(xe.links,fe,he):$(xe.links,fe,he)}function $(fe,he,_e){for(var xe,Ne=fe.values(),Ie=Ne.next();!Ie.done;){var Pe=Ie.value,ve=Pe.fromId===he?Pe.toId:Pe.fromId;if(xe=_e(e.get(ve),Pe),xe)return!0;Ie=Ne.next()}}function U(fe,he,_e){for(var xe,Ne=fe.values(),Ie=Ne.next();!Ie.done;){var Pe=Ie.value;if(Pe.fromId===he&&(xe=_e(e.get(Pe.toId),Pe),xe))return!0;Ie=Ne.next()}}function H(){}function ee(){d+=1}function ge(){d-=1,d===0&&l.length>0&&(b.fire("changed",l),l.length=0)}function me(fe){if(typeof fe!="function")throw new Error("Function is expected to iterate over graph nodes. You passed "+fe);for(var he=e.values(),_e=he.next();!_e.done;){if(fe(_e.value))return!0;_e=he.next()}}}function Node(t,e){this.id=t,this.links=null,this.data=e}function addLinkToNode(t,e){t.links?t.links.add(e):t.links=new Set([e])}function Link(t,e,n,o){this.fromId=t,this.toId=e,this.data=n,this.id=o}function makeLinkId(t,e){return t.toString()+" "+e.toString()}class GraphLayoutSim{constructor(e){this.positions=new Float32Array(0),this.graphData=e}get positionsBuffer(){return new Float32Array(this.positions)}start(){throw new Error("not implemented")}stop(){throw new Error("not implemented")}getPositions(e){const n=this.positionsBuffer;e(n)}}class D3ForceLayout extends GraphLayoutSim{constructor(e){super(e),this.layoutEngine=forceSimulation(e.nodes,3).force("charge",forceManyBody()).force("link",forceLink(e.links).id(n=>n.id)).force("center",forceCenter()),this.layoutEngine.on("tick",()=>{const n=this.graphData.nodes.flatMap(({x:o,y:d,z:h})=>[o,d,h].map(l=>l));this.positions=new Float32Array(n)})}start(){this.layoutEngine.restart()}stop(){this.layoutEngine.stop()}}class NgraphForceLayout extends GraphLayoutSim{constructor(e){super(e);const n=ngraph_graph();e.nodes.forEach(o=>{n.addNode(o.id,o)}),e.links.forEach(o=>{n.addLink(o.source,o.target)}),this.layoutEngine=ngraph_forcelayoutExports(n,{dimensions:3});for(let o of e.nodes)this.layoutEngine.setNodePosition(o.id,o.x,o.y,o.z);this.layoutEngine.on("step",()=>{const o=e.nodes.flatMap(({id:d})=>{const{x:h,y:l,z:u}=this.layoutEngine.getNodePosition(d);return[h,l,u].map(p=>p)});this.positions=new Float32Array(o)})}start(){const e=()=>{this.layoutEngine.step(),using===this.layoutEngine&&rafExports(e)};e()}stop(){this.layoutEngine.dispose()}}var layout=Object.freeze({__proto__:null,D3ForceLayout,NgraphForceLayout});const transfer=(t,e)=>transfer$1(t,e);var transformMat4_1=transformMat4$2;function transformMat4$2(t,e,n){var o=e[0],d=e[1],h=e[2],l=n[3]*o+n[7]*d+n[11]*h+n[15];return l=l||1,t[0]=(n[0]*o+n[4]*d+n[8]*h+n[12])/l,t[1]=(n[1]*o+n[5]*d+n[9]*h+n[13])/l,t[2]=(n[2]*o+n[6]*d+n[10]*h+n[14])/l,t}var rotateY_1=rotateY;function rotateY(t,e,n,o){var d=n[0],h=n[2],l=e[0]-d,u=e[2]-h,p=Math.sin(o),g=Math.cos(o);return t[0]=d+u*p+l*g,t[1]=e[1],t[2]=h+u*g-l*p,t}var rotateX_1=rotateX;function rotateX(t,e,n,o){var d=n[1],h=n[2],l=e[1]-d,u=e[2]-h,p=Math.sin(o),g=Math.cos(o);return t[0]=e[0],t[1]=d+l*g-u*p,t[2]=h+l*p+u*g,t}var epsilon=1e-6,equals_1=equals,EPSILON=epsilon;function equals(t,e){var n=t[0],o=t[1],d=t[2],h=e[0],l=e[1],u=e[2];return Math.abs(n-h)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(o-l)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(d-u)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(u))}var add_1=add;function add(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}var scaleAndAdd_1=scaleAndAdd;function scaleAndAdd(t,e,n,o){return t[0]=e[0]+n[0]*o,t[1]=e[1]+n[1]*o,t[2]=e[2]+n[2]*o,t}var copy_1=copy;function copy(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}var normalize_1=normalize;function normalize(t,e){var n=e[0],o=e[1],d=e[2],h=n*n+o*o+d*d;return h>0&&(h=1/Math.sqrt(h),t[0]=e[0]*h,t[1]=e[1]*h,t[2]=e[2]*h),t}var identity_1=identity$1;function identity$1(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}var invert_1=invert;function invert(t,e){var n=e[0],o=e[1],d=e[2],h=e[3],l=e[4],u=e[5],p=e[6],g=e[7],v=e[8],b=e[9],_=e[10],S=e[11],T=e[12],I=e[13],P=e[14],B=e[15],L=n*u-o*l,C=n*p-d*l,O=n*g-h*l,N=o*p-d*u,M=o*g-h*u,k=d*g-h*p,W=v*I-b*T,ae=v*P-_*T,X=v*B-S*T,G=b*P-_*I,re=b*B-S*I,F=_*B-S*P,$=L*F-C*re+O*G+N*X-M*ae+k*W;return $?($=1/$,t[0]=(u*F-p*re+g*G)*$,t[1]=(d*re-o*F-h*G)*$,t[2]=(I*k-P*M+B*N)*$,t[3]=(_*M-b*k-S*N)*$,t[4]=(p*X-l*F-g*ae)*$,t[5]=(n*F-d*X+h*ae)*$,t[6]=(P*O-T*k-B*C)*$,t[7]=(v*k-_*O+S*C)*$,t[8]=(l*re-u*X+g*W)*$,t[9]=(o*X-n*re-h*W)*$,t[10]=(T*M-I*O+B*L)*$,t[11]=(b*O-v*M-S*L)*$,t[12]=(u*ae-l*G-p*W)*$,t[13]=(n*G-o*ae+d*W)*$,t[14]=(I*C-T*N-P*L)*$,t[15]=(v*N-b*C+_*L)*$,t):null}var translate_1=translate;function translate(t,e,n){var o=n[0],d=n[1],h=n[2],l,u,p,g,v,b,_,S,T,I,P,B;return e===t?(t[12]=e[0]*o+e[4]*d+e[8]*h+e[12],t[13]=e[1]*o+e[5]*d+e[9]*h+e[13],t[14]=e[2]*o+e[6]*d+e[10]*h+e[14],t[15]=e[3]*o+e[7]*d+e[11]*h+e[15]):(l=e[0],u=e[1],p=e[2],g=e[3],v=e[4],b=e[5],_=e[6],S=e[7],T=e[8],I=e[9],P=e[10],B=e[11],t[0]=l,t[1]=u,t[2]=p,t[3]=g,t[4]=v,t[5]=b,t[6]=_,t[7]=S,t[8]=T,t[9]=I,t[10]=P,t[11]=B,t[12]=l*o+v*d+T*h+e[12],t[13]=u*o+b*d+I*h+e[13],t[14]=p*o+_*d+P*h+e[14],t[15]=g*o+S*d+B*h+e[15]),t}var scale_1=scale$1;function scale$1(t,e,n){var o=n[0],d=n[1],h=n[2];return t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t[3]=e[3]*o,t[4]=e[4]*d,t[5]=e[5]*d,t[6]=e[6]*d,t[7]=e[7]*d,t[8]=e[8]*h,t[9]=e[9]*h,t[10]=e[10]*h,t[11]=e[11]*h,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}var identity=identity_1,lookAt_1=lookAt$1;function lookAt$1(t,e,n,o){var d,h,l,u,p,g,v,b,_,S,T=e[0],I=e[1],P=e[2],B=o[0],L=o[1],C=o[2],O=n[0],N=n[1],M=n[2];return Math.abs(T-O)<1e-6&&Math.abs(I-N)<1e-6&&Math.abs(P-M)<1e-6?identity(t):(v=T-O,b=I-N,_=P-M,S=1/Math.sqrt(v*v+b*b+_*_),v*=S,b*=S,_*=S,d=L*_-C*b,h=C*v-B*_,l=B*b-L*v,S=Math.sqrt(d*d+h*h+l*l),S?(S=1/S,d*=S,h*=S,l*=S):(d=0,h=0,l=0),u=b*l-_*h,p=_*d-v*l,g=v*h-b*d,S=Math.sqrt(u*u+p*p+g*g),S?(S=1/S,u*=S,p*=S,g*=S):(u=0,p=0,g=0),t[0]=d,t[1]=u,t[2]=v,t[3]=0,t[4]=h,t[5]=p,t[6]=b,t[7]=0,t[8]=l,t[9]=g,t[10]=_,t[11]=0,t[12]=-(d*T+h*I+l*P),t[13]=-(u*T+p*I+g*P),t[14]=-(v*T+b*I+_*P),t[15]=1,t)}var perspective_1=perspective$1;function perspective$1(t,e,n,o,d){var h=1/Math.tan(e/2),l=1/(o-d);return t[0]=h/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(d+o)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*d*o*l,t[15]=0,t}var transformMat4$1=transformMat4_1,vec3RotateY=rotateY_1,vec3RotateX=rotateX_1,vec3Equals=equals_1,vec3Add=add_1,vec3ScaleAndAdd=scaleAndAdd_1,vec3Copy=copy_1,vec3Normalize=normalize_1,mat4Identity=identity_1,mat4Invert=invert_1,mat4Translate=translate_1,mat4Scale=scale_1,lookAt=lookAt_1,perspective=perspective_1,MAX_PHI=Math.PI*.5-1e-4,MIN_PHI=-Math.PI*.5+1e-4,inertialTurntableCamera=function t(e){e=e||{};var n=!0,o={aspectRatio:e.aspectRatio?e.aspectRatio:1,zoomAboutCursor:e.zoomAboutCursor===void 0?!0:e.zoomAboutCursor,distance:e.distance===void 0?10:e.distance,phi:e.phi===void 0?0:e.phi,theta:e.theta===void 0?0:e.theta,fovY:e.fovY===void 0?Math.PI/4:e.fovY,near:e.near===void 0?.1:e.near,far:e.far===void 0?100:e.far,panDecayTime:e.panDecayTime||100,zoomDecayTime:e.zoomDecayTime||100,rotationDecayTime:e.rotationDecayTime||100,dirty:!0,up:e.up||new Float32Array([0,1,0]),center:e.center||new Float32Array(3),rotationCenter:e.rotationCenter||e.center&&e.center.slice()||new Float32Array(3),zoom:0,panX:0,panY:0,panZ:0,pitch:0,yaw:0,dTheta:0,dPhi:0,mouseX:0,mouseY:0},d=null,h={tick:function(F){if(k.zoom&&(o.zoom=k.zoom),k.dTheta&&(o.dTheta=k.dTheta),k.dPhi&&(o.dPhi=k.dPhi),k.panX&&(o.panX=k.panX),k.panY&&(o.panY=k.panY),k.panZ&&(o.panZ=k.panZ),k.yaw&&(o.yaw=k.yaw),k.pitch&&(o.pitch=k.pitch),N(k),F){var $=o.dPhi,U=o.dTheta,H=o.zoom,ee=o.panX,ge=o.panY,me=o.panZ,fe=o.pitch,he=o.yaw;Object.assign(o,F),F.dPhi!==void 0&&(o.dPhi+=$),F.dTheta!==void 0&&(o.dTheta+=U),F.zoom!==void 0&&(o.zoom+=H),F.panX!==void 0&&(o.panX+=ee),F.panY!==void 0&&(o.panY+=ge),F.panZ!==void 0&&(o.panZ+=me),F.pitch!==void 0&&(o.pitch+=fe),F.yaw!==void 0&&(o.yaw+=he)}T()&&P(),O()?re(o):N(o);var _e=Date.now();d!==null&&M(_e-d),d=_e,h.state.dirty=n,n=!1,S()},taint:L,resize:C,params:o,rotate:G,pivot:X,pan:W,zoom:ae};h.state={},h.state.projection=new Float32Array(16),h.state.viewInv=new Float32Array(16),h.state.view=new Float32Array(16),h.state.width=null,h.state.height=null,h.state.eye=new Float32Array(3);var l=new Float32Array(3),u=new Float32Array(3),p=new Float32Array(3),g=new Float32Array(3),v=new Float32Array(3),b=new Float32Array(16),_={up:new Float32Array(3),center:new Float32Array(3)};S();function S(){vec3Copy(_.up,o.up),vec3Copy(_.center,o.center),_.near=o.near,_.far=o.far,_.distance=o.distance,_.phi=o.phi,_.theta=o.theta,_.fovY=o.fovY}function T(){return!vec3Equals(o.up,_.up)||!vec3Equals(o.center,_.center)||o.near!==_.near||o.far!==_.far||o.phi!==_.phi||o.theta!==_.theta||o.distance!==_.distance||o.fovY!==_.fovY}var I={};function P(){I.dPhi=o.phi-_.phi,I.dTheta=o.theta-_.theta,I.zoom=o.distance/_.distance-1,o.theta=_.theta,o.distance=_.distance,o.phi=_.phi,I.yaw=0,I.pitch=0,I.panX=0,I.panY=0,I.panZ=0,I.mouseX=0,I.mouseY=0,re(I)}function B(){h.state.eye[0]=0,h.state.eye[1]=0,h.state.eye[2]=o.distance,vec3RotateX(h.state.eye,h.state.eye,v,-o.phi),vec3RotateY(h.state.eye,h.state.eye,v,o.theta),vec3Add(h.state.eye,h.state.eye,o.center),lookAt(h.state.view,h.state.eye,o.center,o.up),perspective(h.state.projection,o.fovY,h.params.aspectRatio,o.near,o.far),mat4Invert(h.state.viewInv,h.state.view)}function L(){n=!0}function C(F){h.params.aspectRatio=F,B(),L()}function O(){if(Math.abs(o.zoom)>1e-4||Math.abs(o.panX)>1e-4||Math.abs(o.panY)>1e-4||Math.abs(o.panZ)>1e-4||Math.abs(o.dTheta)>1e-4||Math.abs(o.dPhi)>1e-4||Math.abs(o.yaw)>1e-4||Math.abs(o.pitch)>1e-4)return!0}function N(F){F.zoom=0,F.dTheta=0,F.dPhi=0,F.panX=0,F.panY=0,F.panZ=0,F.yaw=0,F.pitch=0}function M(F){var $=o.panDecayTime?Math.exp(-F/o.panDecayTime/Math.LN2):0,U=o.zoomDecayTime?Math.exp(-F/o.zoomDecayTime/Math.LN2):0,H=o.rotationDecayTime?Math.exp(-F/o.rotationDecayTime/Math.LN2):0;o.zoom*=U,o.panX*=$,o.panY*=$,o.panZ*=$,o.dTheta*=H,o.dPhi*=H,o.yaw*=H,o.pitch*=H}var k={};N(k);function W(F,$){var U=h.params.distance*Math.tan(h.params.fovY*.5)*2;return k.panX+=F*o.aspectRatio*U,k.panY+=$*U,h}function ae(F,$,U){return k.zoom+=U,o.mouseX=F,o.mouseY=$,h}function X(F,$){var U=h.params.fovY;k.yaw+=F*U*o.aspectRatio,k.pitch+=$*U}function G(F,$){k.dTheta+=F,k.dPhi+=$}function re(F){var $;mat4Identity(b),o.zoomAboutCursor&&($=o.distance*Math.tan(o.fovY*.5),l[0]=F.mouseX*o.aspectRatio*$,l[1]=F.mouseY*$,l[2]=0,mat4Translate(b,b,l)),l[0]=1+F.zoom,l[1]=1+F.zoom,l[2]=1,mat4Scale(b,b,l),o.zoomAboutCursor&&($=o.distance*Math.tan(o.fovY*.5),l[0]=-F.mouseX*o.aspectRatio*$,l[1]=-F.mouseY*$,l[2]=0,mat4Translate(b,b,l)),b[12]-=F.panX*.5,b[13]-=F.panY*.5,transformMat4$1(o.center,o.center,h.state.view),transformMat4$1(o.center,o.center,b),transformMat4$1(o.center,o.center,h.state.viewInv),o.rotateAboutCenter&&vec3Copy(o.rotationCenter,o.center),o.distance*=1+F.zoom;var U=o.phi;o.phi+=F.dPhi,o.phi=Math.min(MAX_PHI,Math.max(MIN_PHI,o.phi));var H=o.phi-U,ee=o.theta;o.theta+=F.dTheta;var ge=o.theta-ee;if(vec3RotateY(o.center,o.center,o.rotationCenter,ge-o.theta),vec3RotateX(o.center,o.center,o.rotationCenter,-H),vec3RotateY(o.center,o.center,o.rotationCenter,o.theta),F.yaw!==0||F.pitch!==0){p[0]=h.state.view[0],p[1]=h.state.view[4],p[2]=h.state.view[8],vec3Normalize(p,p),u[0]=h.state.view[1],u[1]=h.state.view[5],u[2]=h.state.view[9],vec3Normalize(u,u),g[0]=h.state.view[2],g[1]=h.state.view[6],g[2]=h.state.view[10],vec3Normalize(g,g);var me=Math.min(MAX_PHI,Math.max(MIN_PHI,o.phi+F.pitch*.5)),fe=me-o.phi;vec3ScaleAndAdd(o.center,o.center,p,-Math.sin(F.yaw*.5)*o.distance),vec3ScaleAndAdd(o.center,o.center,u,-Math.sin(fe)*o.distance),vec3ScaleAndAdd(o.center,o.center,g,(2-Math.cos(F.yaw*.5)-Math.cos(fe))*o.distance),o.phi=me,o.theta+=F.yaw*.5}B(),L()}return C(h.params.aspectRatio),h},moizeExports={},moize$1={get exports(){return moizeExports},set exports(t){moizeExports=t}},microMemoizeExports={},microMemoize={get exports(){return microMemoizeExports},set exports(t){microMemoizeExports=t}},hasRequiredMicroMemoize;function requireMicroMemoize(){return hasRequiredMicroMemoize||(hasRequiredMicroMemoize=1,function(t,e){(function(n,o){t.exports=o()})(commonjsGlobal,function(){var n={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},o=Array.prototype.slice;function d(b){var _=b.length;return _?_===1?[b[0]]:_===2?[b[0],b[1]]:_===3?[b[0],b[1],b[2]]:o.call(b,0):[]}function h(b){var _={};for(var S in b)n[S]||(_[S]=b[S]);return _}function l(b){return typeof b=="function"&&b.isMemoized}function u(b,_){return b===_||b!==b&&_!==_}function p(b,_){var S={};for(var T in b)S[T]=b[T];for(var T in _)S[T]=_[T];return S}var g=function(){function b(_){this.keys=[],this.values=[],this.options=_;var S=typeof _.isMatchingKey=="function";S?this.getKeyIndex=this._getKeyIndexFromMatchingKey:_.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey=typeof _.transformKey=="function",this.shouldCloneArguments=this.canTransformKey||S,this.shouldUpdateOnAdd=typeof _.onCacheAdd=="function",this.shouldUpdateOnChange=typeof _.onCacheChange=="function",this.shouldUpdateOnHit=typeof _.onCacheHit=="function"}return Object.defineProperty(b.prototype,"size",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"snapshot",{get:function(){return{keys:d(this.keys),size:this.size,values:d(this.values)}},enumerable:!1,configurable:!0}),b.prototype._getKeyIndexFromMatchingKey=function(_){var S=this.options,T=S.isMatchingKey,I=S.maxSize,P=this.keys,B=P.length;if(!B)return-1;if(T(P[0],_))return 0;if(I>1){for(var L=1;L<B;L++)if(T(P[L],_))return L}return-1},b.prototype._getKeyIndexForMany=function(_){var S=this.options.isEqual,T=this.keys,I=T.length;if(!I)return-1;if(I===1)return this._getKeyIndexForSingle(_);var P=_.length,B,L;if(P>1){for(var C=0;C<I;C++)if(B=T[C],B.length===P){for(L=0;L<P&&S(B[L],_[L]);L++);if(L===P)return C}}else for(var C=0;C<I;C++)if(B=T[C],B.length===P&&S(B[0],_[0]))return C;return-1},b.prototype._getKeyIndexForSingle=function(_){var S=this.keys;if(!S.length)return-1;var T=S[0],I=T.length;if(_.length!==I)return-1;var P=this.options.isEqual;if(I>1){for(var B=0;B<I;B++)if(!P(T[B],_[B]))return-1;return 0}return P(T[0],_[0])?0:-1},b.prototype.orderByLru=function(_,S,T){for(var I=this.keys,P=this.values,B=I.length,L=T;L--;)I[L+1]=I[L],P[L+1]=P[L];I[0]=_,P[0]=S;var C=this.options.maxSize;B===C&&T===B?(I.pop(),P.pop()):T>=C&&(I.length=P.length=C)},b.prototype.updateAsyncCache=function(_){var S=this,T=this.options,I=T.onCacheChange,P=T.onCacheHit,B=this.keys[0],L=this.values[0];this.values[0]=L.then(function(C){return S.shouldUpdateOnHit&&P(S,S.options,_),S.shouldUpdateOnChange&&I(S,S.options,_),C},function(C){var O=S.getKeyIndex(B);throw O!==-1&&(S.keys.splice(O,1),S.values.splice(O,1)),C})},b}();function v(b,_){if(_===void 0&&(_={}),l(b))return v(b.fn,p(b.options,_));if(typeof b!="function")throw new TypeError("You must pass a function to `memoize`.");var S=_.isEqual,T=S===void 0?u:S,I=_.isMatchingKey,P=_.isPromise,B=P===void 0?!1:P,L=_.maxSize,C=L===void 0?1:L,O=_.onCacheAdd,N=_.onCacheChange,M=_.onCacheHit,k=_.transformKey,W=p({isEqual:T,isMatchingKey:I,isPromise:B,maxSize:C,onCacheAdd:O,onCacheChange:N,onCacheHit:M,transformKey:k},h(_)),ae=new g(W),X=ae.keys,G=ae.values,re=ae.canTransformKey,F=ae.shouldCloneArguments,$=ae.shouldUpdateOnAdd,U=ae.shouldUpdateOnChange,H=ae.shouldUpdateOnHit,ee=function(){var ge=F?d(arguments):arguments;re&&(ge=k(ge));var me=X.length?ae.getKeyIndex(ge):-1;if(me!==-1)H&&M(ae,W,ee),me&&(ae.orderByLru(X[me],G[me],me),U&&N(ae,W,ee));else{var fe=b.apply(this,arguments),he=F?ge:d(arguments);ae.orderByLru(he,fe,X.length),B&&ae.updateAsyncCache(ee),$&&O(ae,W,ee),U&&N(ae,W,ee)}return G[0]};return ee.cache=ae,ee.fn=b,ee.isMemoized=!0,ee.options=W,ee}return v})}(microMemoize)),microMemoizeExports}var fastEqualsExports={},fastEquals={get exports(){return fastEqualsExports},set exports(t){fastEqualsExports=t}},hasRequiredFastEquals;function requireFastEquals(){return hasRequiredFastEquals||(hasRequiredFastEquals=1,function(t,e){(function(n,o){o(e)})(commonjsGlobal,function(n){var o=typeof WeakMap=="function",d=Object.keys;function h(G,re){return G===re||G!==G&&re!==re}function l(G){return G.constructor===Object||G.constructor==null}function u(G){return!!G&&typeof G.then=="function"}function p(G){return!!(G&&G.$$typeof)}function g(){var G=[];return{delete:function(re){for(var F=0;F<G.length;++F)if(G[F][0]===re){G.splice(F,1);return}},get:function(re){for(var F=0;F<G.length;++F)if(G[F][0]===re)return G[F][1]},set:function(re,F){for(var $=0;$<G.length;++$)if(G[$][0]===re){G[$][1]=F;return}G.push([re,F])}}}var v=function(G){return G?function(){return new WeakMap}:g}(o);function b(G){return function(F){var $=G||F;return function(H,ee,ge,me,fe,he,_e){_e===void 0&&(_e=v());var xe=!!H&&typeof H=="object",Ne=!!ee&&typeof ee=="object";if(xe!==Ne)return!1;if(!xe&&!Ne)return $(H,ee,_e);var Ie=_e.get(H);if(Ie&&_e.get(ee))return Ie===ee;_e.set(H,ee),_e.set(ee,H);var Pe=$(H,ee,_e);return _e.delete(H),_e.delete(ee),Pe}}}function _(G,re,F,$){var U=G.length;if(re.length!==U)return!1;for(;U-- >0;)if(!F(G[U],re[U],U,U,G,re,$))return!1;return!0}function S(G,re,F,$){var U=G.size===re.size;if(U&&G.size){var H={},ee=0;G.forEach(function(ge,me){if(U){var fe=!1,he=0;re.forEach(function(_e,xe){!fe&&!H[he]&&(fe=F(me,xe,ee,he,G,re,$)&&F(ge,_e,me,xe,G,re,$),fe&&(H[he]=!0)),he++}),ee++,U=fe}})}return U}var T="_owner",I=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function P(G,re,F,$){var U=d(G),H=U.length;if(d(re).length!==H)return!1;if(H)for(var ee=void 0;H-- >0;){if(ee=U[H],ee===T){var ge=p(G),me=p(re);if((ge||me)&&ge!==me)return!1}if(!I(re,ee)||!F(G[ee],re[ee],ee,ee,G,re,$))return!1}return!0}var B=function(){return/foo/g.flags==="g"?function(re,F){return re.source===F.source&&re.flags===F.flags}:function(re,F){return re.source===F.source&&re.global===F.global&&re.ignoreCase===F.ignoreCase&&re.multiline===F.multiline&&re.unicode===F.unicode&&re.sticky===F.sticky&&re.lastIndex===F.lastIndex}}();function L(G,re,F,$){var U=G.size===re.size;if(U&&G.size){var H={};G.forEach(function(ee,ge){if(U){var me=!1,fe=0;re.forEach(function(he,_e){!me&&!H[fe]&&(me=F(ee,he,ge,_e,G,re,$),me&&(H[fe]=!0)),fe++}),U=me}})}return U}var C=typeof Map=="function",O=typeof Set=="function",N=Object.prototype.valueOf;function M(G){var re=typeof G=="function"?G(F):function($,U,H,ee,ge,me,fe){return F($,U,fe)};function F($,U,H){if($===U)return!0;if($&&U&&typeof $=="object"&&typeof U=="object"){if(l($)&&l(U))return P($,U,re,H);var ee=Array.isArray($),ge=Array.isArray(U);return ee||ge?ee===ge&&_($,U,re,H):(ee=$ instanceof Date,ge=U instanceof Date,ee||ge?ee===ge&&h($.getTime(),U.getTime()):(ee=$ instanceof RegExp,ge=U instanceof RegExp,ee||ge?ee===ge&&B($,U):u($)||u(U)?$===U:C&&(ee=$ instanceof Map,ge=U instanceof Map,ee||ge)?ee===ge&&S($,U,re,H):O&&(ee=$ instanceof Set,ge=U instanceof Set,ee||ge)?ee===ge&&L($,U,re,H):$.valueOf!==N||U.valueOf!==N?h($.valueOf(),U.valueOf()):P($,U,re,H)))}return $!==$&&U!==U}return F}var k=M(),W=M(function(){return h}),ae=M(b()),X=M(b(h));n.circularDeepEqual=ae,n.circularShallowEqual=X,n.createCustomEqual=M,n.deepEqual=k,n.sameValueZeroEqual=h,n.shallowEqual=W,Object.defineProperty(n,"__esModule",{value:!0})})}(fastEquals,fastEqualsExports)),fastEqualsExports}(function(t,e){(function(n,o){t.exports=o(requireMicroMemoize(),requireFastEquals())})(commonjsGlobal,function(n,o){function d(){return d=Object.assign?Object.assign.bind():function(Q){for(var Y=1;Y<arguments.length;Y++){var ie=arguments[Y];for(var se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&(Q[se]=ie[se])}return Q},d.apply(this,arguments)}function h(Q,Y){if(Q==null)return{};var ie={},se=Object.keys(Q),le,ne;for(ne=0;ne<se.length;ne++)le=se[ne],!(Y.indexOf(le)>=0)&&(ie[le]=Q[le]);return ie}var l={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function u(){for(var Q=arguments.length,Y=new Array(Q),ie=0;ie<Q;ie++)Y[ie]=arguments[ie];return Y.reduce(function(se,le){if(typeof se=="function")return typeof le=="function"?function(){se.apply(this,arguments),le.apply(this,arguments)}:se;if(typeof le=="function")return le})}function p(){for(var Q=arguments.length,Y=new Array(Q),ie=0;ie<Q;ie++)Y[ie]=arguments[ie];return Y.reduce(function(se,le){if(typeof se=="function")return typeof le=="function"?function(){return se(le.apply(this,arguments))}:se;if(typeof le=="function")return le})}function g(Q,Y){for(var ie=0;ie<Q.length;ie++)if(Q[ie].key===Y)return ie;return-1}function v(Q,Y){var ie=typeof Y=="function"?Y:function(se,le){for(var ne=0;ne<le.length;ne++)if(!Q(se[ne],le[ne]))return!1;return!0};return function(se,le){for(var ne=0;ne<se.length;ne++)if(se[ne].length===le.length&&ie(se[ne],le))return ne;return-1}}function b(Q,Y){return!Y||Y===l?Q:d({},Q,Y,{onCacheAdd:u(Q.onCacheAdd,Y.onCacheAdd),onCacheChange:u(Q.onCacheChange,Y.onCacheChange),onCacheHit:u(Q.onCacheHit,Y.onCacheHit),transformArgs:p(Q.transformArgs,Y.transformArgs)})}function _(Q){return typeof Q=="function"&&Q.isMoized}function S(Q,Y,ie){try{var se=ie||Y||"anonymous";Object.defineProperty(Q,"name",{configurable:!0,enumerable:!1,value:"moized("+se+")",writable:!0})}catch{}}function T(Q,Y,ie){var se=g(Q,Y);se!==-1&&(clearTimeout(Q[se].timeoutId),ie&&Q.splice(se,1))}function I(Q,Y){var ie=setTimeout(Q,Y);return typeof ie.unref=="function"&&ie.unref(),ie}function P(Q,Y,ie,se){var le=Y.maxAge;return function ne(ue,de,pe){var be=ue.keys[0];if(g(Q,be)===-1){var we=function(){var j=v(ie,se),w=j(ue.keys,be),E=ue.values[w];~w&&(ue.keys.splice(w,1),ue.values.splice(w,1),typeof Y.onCacheChange=="function"&&Y.onCacheChange(ue,de,pe)),T(Q,be,!0),typeof Y.onExpire=="function"&&Y.onExpire(be)===!1&&(ue.keys.unshift(be),ue.values.unshift(E),ne(ue,de,pe),typeof Y.onCacheChange=="function"&&Y.onCacheChange(ue,de,pe))};Q.push({expirationMethod:we,key:be,timeoutId:I(we,le)})}}}function B(Q,Y){return function(se){var le=se.keys[0],ne=g(Q,le);~ne&&(T(Q,le,!1),Q[ne].timeoutId=I(Q[ne].expirationMethod,Y.maxAge))}}function L(Q,Y,ie,se){var le=typeof Y.maxAge=="number"&&isFinite(Y.maxAge)?P(Q,Y,ie,se):void 0;return{onCacheAdd:le,onCacheHit:le&&Y.updateExpire?B(Q,Y):void 0}}var C={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},O=!1;function N(Q){Q?delete C.profiles[Q]:C.profiles={}}function M(Q){Q===void 0&&(Q=!0),C.isCollectingStats=Q}function k(Q){var Y=Q.profileName;return function(){Y&&!C.profiles[Y]&&(C.profiles[Y]={calls:0,hits:0}),C.profiles[Y].calls++}}function W(Q){return function(){var Y=C.profiles,ie=Q.profileName;Y[ie]||(Y[ie]={calls:0,hits:0}),Y[ie].calls++,Y[ie].hits++}}function ae(Q){return Q.displayName||Q.name||"Anonymous "+C.anonymousProfileNameCounter++}function X(Q,Y){return Q?(Y/Q*100).toFixed(4)+"%":"0.0000%"}function G(Q){!C.isCollectingStats&&!O&&(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),O=!0);var Y=C.profiles;if(Q){if(!Y[Q])return{calls:0,hits:0,usage:"0.0000%"};var ie=Y[Q];return d({},ie,{usage:X(ie.calls,ie.hits)})}var se=Object.keys(C.profiles).reduce(function(le,ne){return le.calls+=Y[ne].calls,le.hits+=Y[ne].hits,le},{calls:0,hits:0});return d({},se,{profiles:Object.keys(Y).reduce(function(le,ne){return le[ne]=G(ne),le},{}),usage:X(se.calls,se.hits)})}function re(Q){return C.isCollectingStats?{onCacheAdd:k(Q),onCacheHit:W(Q)}:{}}var F={arguments:!0,callee:!0,caller:!0,constructor:!0,length:!0,name:!0,prototype:!0};function $(Q,Y,ie){ie===void 0&&(ie=[]),Object.getOwnPropertyNames(Q).forEach(function(se){if(!F[se]&&ie.indexOf(se)===-1){var le=Object.getOwnPropertyDescriptor(Q,se);le.get||le.set?Object.defineProperty(Y,se,le):Y[se]=Q[se]}})}function U(Q,Y){var ie=Y.expirations,se=Q.options,le=v(se.isEqual,se.isMatchingKey),ne=Q;ne.clear=function(){var ue=ne._microMemoizeOptions.onCacheChange,de=ne.cache;return de.keys.length=0,de.values.length=0,ue&&ue(de,ne.options,ne),!0},ne.clearStats=function(){N(ne.options.profileName)},ne.get=function(ue){var de=ne._microMemoizeOptions.transformKey,pe=ne.cache,be=de?de(ue):ue,we=le(pe.keys,be);return we!==-1?ne.apply(this,ue):void 0},ne.getStats=function(){return G(ne.options.profileName)},ne.has=function(ue){var de=ne._microMemoizeOptions.transformKey,pe=de?de(ue):ue;return le(ne.cache.keys,pe)!==-1},ne.keys=function(){return ne.cacheSnapshot.keys},ne.remove=function(ue){var de=ne._microMemoizeOptions,pe=de.onCacheChange,be=de.transformKey,we=ne.cache,Se=le(we.keys,be?be(ue):ue);if(Se===-1)return!1;var j=we.keys[Se];return we.keys.splice(Se,1),we.values.splice(Se,1),pe&&pe(we,ne.options,ne),T(ie,j,!0),!0},ne.set=function(ue,de){var pe=ne._microMemoizeOptions,be=ne.cache,we=ne.options,Se=pe.onCacheAdd,j=pe.onCacheChange,w=pe.transformKey,E=w?w(ue):ue,D=le(be.keys,E);if(D===-1){var V=we.maxSize-1;be.size>V&&(be.keys.length=V,be.values.length=V),be.keys.unshift(E),be.values.unshift(de),we.isPromise&&be.updateAsyncCache(ne),Se&&Se(be,we,ne),j&&j(be,we,ne)}else{var Z=be.keys[D];be.values[D]=de,D>0&&be.orderByLru(Z,de,D),we.isPromise&&be.updateAsyncCache(ne),typeof j=="function"&&j(be,we,ne)}},ne.values=function(){return ne.cacheSnapshot.values}}function H(Q,Y){var ie=Y.expirations,se=Y.options,le=Y.originalFunction,ne=Q.options;Object.defineProperties(Q,{_microMemoizeOptions:{configurable:!0,get:function(){return ne}},cacheSnapshot:{configurable:!0,get:function(){var pe=Q.cache;return{keys:pe.keys.slice(0),size:pe.size,values:pe.values.slice(0)}}},expirations:{configurable:!0,get:function(){return ie}},expirationsSnapshot:{configurable:!0,get:function(){return ie.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return se}},originalFunction:{configurable:!0,get:function(){return le}}});var ue=Q;$(le,ue)}function ee(Q,Y){return U(Q,Y),H(Q,Y),Q}var ge=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function me(Q,Y,ie){var se=Q(d({maxArgs:2,isShallowEqual:!0},ie,{isReact:!1}));Y.displayName||(Y.displayName=Y.name||"Component");function le(ne,ue,de){this.props=ne,this.context=ue,this.updater=de,this.MoizedComponent=se(Y)}return le.prototype.isReactComponent={},le.prototype.render=function(){return{$$typeof:ge,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},$(Y,le,["contextType","contextTypes"]),le.displayName="Moized("+(Y.displayName||Y.name||"Component")+")",S(le,Y.name,ie.profileName),le}function fe(Q){return function(Y){if(Q>=Y.length)return Y;if(Q===0)return[];if(Q===1)return[Y[0]];if(Q===2)return[Y[0],Y[1]];if(Q===3)return[Y[0],Y[1],Y[2]];for(var ie=[],se=0;se<Q;se++)ie[se]=Y[se];return ie}}function he(Q,Y){for(var ie=Q.length,se=0;se<ie;++se)if(Q[se]===Y)return se+1;return 0}function _e(){var Q=[],Y=[];return function(se,le){var ne=typeof le;if(ne==="function"||ne==="symbol")return le.toString();if(typeof le=="object"){if(Q.length){var ue=he(Q,this);ue===0?Q[Q.length]=this:(Q.splice(ue),Y.splice(ue)),Y[Y.length]=se;var de=he(Q,le);if(de!==0)return"[ref="+(Y.slice(0,de).join(".")||".")+"]"}else Q[0]=le,Y[0]=se;return le}return""+le}}function xe(Q){var Y=typeof Q;return Q&&(Y==="object"||Y==="function")?JSON.stringify(Q,_e()):Q}function Ne(Q){for(var Y="|",ie=0;ie<Q.length;ie++)Y+=xe(Q[ie])+"|";return[Y]}function Ie(Q){return typeof Q.serializer=="function"?Q.serializer:Ne}function Pe(Q,Y){return Q[0]===Y[0]}function ve(Q){if(typeof Q=="function")return function(Y,ie,se){return Q(se.cache,se.options,se)}}function Le(Q){return Q.matchesArg||Q.isDeepEqual&&o.deepEqual||Q.isShallowEqual&&o.shallowEqual||o.sameValueZeroEqual}function Fe(Q){return Q.matchesKey||Q.isSerialized&&Pe||void 0}function Ue(Q){return p(Q.isSerialized&&Ie(Q),typeof Q.transformArgs=="function"&&Q.transformArgs,typeof Q.maxArgs=="number"&&fe(Q.maxArgs))}function Me(Q){var Y=Q.options.updateCacheForKey,ie=function(){for(var le=arguments.length,ne=new Array(le),ue=0;ue<le;ue++)ne[ue]=arguments[ue];if(!Y(ne))return Q.apply(this,ne);var de=Q.fn.apply(this,ne);return Q.set(ne,de),de};return $(Q,ie),ie}var $e=["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"],q=function Q(Y,ie){var se=ie||l;if(_(Y)){var le=Y.originalFunction,ne=b(Y.options,se);return Q(le,ne)}if(typeof Y=="object")return function(Ce,Ke){if(typeof Ce=="function"){var We=b(Y,Ke);return Q(Ce,We)}var zt=b(Y,Ce);return Q(zt)};if(se.isReact)return me(Q,Y,se);var ue=d({},l,se,{maxAge:typeof se.maxAge=="number"&&se.maxAge>=0?se.maxAge:l.maxAge,maxArgs:typeof se.maxArgs=="number"&&se.maxArgs>=0?se.maxArgs:l.maxArgs,maxSize:typeof se.maxSize=="number"&&se.maxSize>=0?se.maxSize:l.maxSize,profileName:se.profileName||ae(Y)}),de=[];ue.matchesArg,ue.isDeepEqual;var pe=ue.isPromise;ue.isReact,ue.isSerialized,ue.isShallowEqual,ue.matchesKey,ue.maxAge,ue.maxArgs;var be=ue.maxSize,we=ue.onCacheAdd,Se=ue.onCacheChange,j=ue.onCacheHit;ue.onExpire,ue.profileName,ue.serializer;var w=ue.updateCacheForKey;ue.transformArgs,ue.updateExpire;var E=h(ue,$e),D=Le(ue),V=Fe(ue),Z=L(de,ue,D,V),ce=re(ue),Ae=Ue(ue),ke=d({},E,{isEqual:D,isMatchingKey:V,isPromise:pe,maxSize:be,onCacheAdd:ve(u(we,Z.onCacheAdd,ce.onCacheAdd)),onCacheChange:ve(Se),onCacheHit:ve(u(j,Z.onCacheHit,ce.onCacheHit)),transformKey:Ae}),Be=n(Y,ke),De=ee(Be,{expirations:de,options:ue,originalFunction:Y});return w&&(De=Me(De)),S(De,Y.name,se.profileName),De};q.clearStats=N,q.collectStats=M,q.compose=function(){return p.apply(void 0,arguments)||q},q.deep=q({isDeepEqual:!0}),q.getStats=G,q.infinite=q({maxSize:1/0}),q.isCollectingStats=function(){return C.isCollectingStats},q.isMoized=function(Y){return typeof Y=="function"&&!!Y.isMoized},q.matchesArg=function(Q){return q({matchesArg:Q})},q.matchesKey=function(Q){return q({matchesKey:Q})};function oe(Q,Y){if(Y===!0)return q({maxAge:Q,updateExpire:Y});if(typeof Y=="object"){var ie=Y.onExpire,se=Y.updateExpire;return q({maxAge:Q,onExpire:ie,updateExpire:se})}return q(typeof Y=="function"?{maxAge:Q,onExpire:Y,updateExpire:!0}:{maxAge:Q})}return q.maxAge=oe,q.maxArgs=function(Q){return q({maxArgs:Q})},q.maxSize=function(Q){return q({maxSize:Q})},q.profile=function(Q){return q({profileName:Q})},q.promise=q({isPromise:!0,updateExpire:!0}),q.react=q({isReact:!0}),q.serialize=q({isSerialized:!0}),q.serializeWith=function(Q){return q({isSerialized:!0,serializer:Q})},q.shallow=q({isShallowEqual:!0}),q.transformArgs=function(Q){return q({transformArgs:Q})},q.updateCacheForKey=function(Q){return q({updateCacheForKey:Q})},Object.defineProperty(q,"default",{configurable:!1,enumerable:!1,value:q,writable:!1}),q})})(moize$1);var moize=moizeExports,ARRAY_TYPE=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function create$1(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function fromValues$1(t,e,n,o,d,h,l,u,p,g,v,b,_,S,T,I){var P=new ARRAY_TYPE(16);return P[0]=t,P[1]=e,P[2]=n,P[3]=o,P[4]=d,P[5]=h,P[6]=l,P[7]=u,P[8]=p,P[9]=g,P[10]=v,P[11]=b,P[12]=_,P[13]=S,P[14]=T,P[15]=I,P}function multiply(t,e,n){var o=e[0],d=e[1],h=e[2],l=e[3],u=e[4],p=e[5],g=e[6],v=e[7],b=e[8],_=e[9],S=e[10],T=e[11],I=e[12],P=e[13],B=e[14],L=e[15],C=n[0],O=n[1],N=n[2],M=n[3];return t[0]=C*o+O*u+N*b+M*I,t[1]=C*d+O*p+N*_+M*P,t[2]=C*h+O*g+N*S+M*B,t[3]=C*l+O*v+N*T+M*L,C=n[4],O=n[5],N=n[6],M=n[7],t[4]=C*o+O*u+N*b+M*I,t[5]=C*d+O*p+N*_+M*P,t[6]=C*h+O*g+N*S+M*B,t[7]=C*l+O*v+N*T+M*L,C=n[8],O=n[9],N=n[10],M=n[11],t[8]=C*o+O*u+N*b+M*I,t[9]=C*d+O*p+N*_+M*P,t[10]=C*h+O*g+N*S+M*B,t[11]=C*l+O*v+N*T+M*L,C=n[12],O=n[13],N=n[14],M=n[15],t[12]=C*o+O*u+N*b+M*I,t[13]=C*d+O*p+N*_+M*P,t[14]=C*h+O*g+N*S+M*B,t[15]=C*l+O*v+N*T+M*L,t}function create(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function fromValues(t,e,n,o){var d=new ARRAY_TYPE(4);return d[0]=t,d[1]=e,d[2]=n,d[3]=o,d}function scale(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function transformMat4(t,e,n){var o=e[0],d=e[1],h=e[2],l=e[3];return t[0]=n[0]*o+n[4]*d+n[8]*h+n[12]*l,t[1]=n[1]*o+n[5]*d+n[9]*h+n[13]*l,t[2]=n[2]*o+n[6]*d+n[10]*h+n[14]*l,t[3]=n[3]*o+n[7]*d+n[11]*h+n[15]*l,t}(function(){var t=create();return function(e,n,o,d,h,l){var u,p;for(n||(n=4),o||(o=0),d?p=Math.min(d*n+o,e.length):p=e.length,u=o;u<p;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],h(t,t,l),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}})();class SpringDamper{constructor(e,n=15,o=15){this.target=e,this.stiffness=n,this.damping=o,this.velocity=this._initializeVelocity(e),this.animationFrameId=null,this.currentValues=this._clone(e),this.paused=!1}_initializeVelocity(e){if(typeof e=="number")return 0;if(Array.isArray(e)||ArrayBuffer.isView(e))return e.map(()=>0);{const n={};for(const o in e)n[o]=0;return n}}_clone(e){return Array.isArray(e)?[...e]:ArrayBuffer.isView(e)?e.slice():typeof e=="object"?{...e}:e}updateTarget(e){this.target=e}updateInitialValues(e){this.currentValues=this._clone(e)}_interpolateSpring(e,n,o,d,h,l){const u=n-e,p=d*u,g=-h*o,v=p+g,b=o+v*l;return{newCurrentValue:e+b*l,newVelocity:b}}step(e){if(this.paused)return this.currentValues;const n=(o,d,h)=>this._interpolateSpring(o,d,h,this.stiffness,this.damping,e);if(typeof this.target=="number"){const{newCurrentValue:o,newVelocity:d}=n(this.currentValues,this.target,this.velocity);this.currentValues=o,this.velocity=d}else if(Array.isArray(this.target)||ArrayBuffer.isView(this.target))for(let o=0;o<this.target.length;o++){const{newCurrentValue:d,newVelocity:h}=n(this.currentValues[o],this.target[o],this.velocity[o]);this.currentValues[o]=d,this.velocity[o]=h}else for(const o in this.target){const{newCurrentValue:d,newVelocity:h}=n(this.currentValues[o],this.target[o],this.velocity[o]);this.currentValues[o]=d,this.velocity[o]=h}return this.currentValues}animate(e){const n=.016666666666666666,o=()=>{const d=this.step(n);e(d),this.animationFrameId=rafExports(o)};this.stop(),this.animationFrameId=rafExports(o)}pause(){this.paused=!0}resume(){this.paused=!1}stop(){rafExports.cancel(this.animationFrameId)}}const getGlobalCamera=moize.infinite(()=>inertialTurntableCamera({panDecayTime:200,zoomDecayTime:200,rotationDecayTime:500,distance:2e3})),getOrthographicCamera=moize.infinite(t=>inertialTurntableCamera({phi:Math.PI/4,theta:Math.PI/4,distance:200,center:[0,0,0],fovY:.013888888888888888*(Math.PI/2),near:2,far:400})),globalCamera=getGlobalCamera();getOrthographicCamera("zoomed");const updateCameras=(t,e,n)=>{const o=getGlobalCamera(),d={near:o.params.distance*.1,far:o.params.distance*5e4};o.resize(e/n),o.tick({fovY:Math.PI/3,...d});const h=getOrthographicCamera("zoomed");h.params.distance=o.params.distance,h.params.center=[0,0,0],h.resize(e/n),h.tick(d);const l=getOrthographicCamera("fixed");l.resize(e/n),l.tick({near:l.params.distance*.1,far:l.params.distance*1e4});const u=new Float32Array(o.state.projection),p=new Float32Array(o.state.view),g=new Float32Array(h.state.projection),v=new Float32Array(h.state.view),b=new Float32Array(l.state.projection),_=new Float32Array(l.state.view),S=new Float32Array([o.params.distance,o.params.rotationCenter[0],o.params.rotationCenter[1],o.params.rotationCenter[2],o.params.center[0],o.params.center[1],o.params.center[2],o.params.phi,o.params.theta]);t(transfer(u,[u.buffer]),transfer(p,[p.buffer]),transfer(g,[g.buffer]),transfer(v,[v.buffer]),transfer(b,[b.buffer]),transfer(_,[_.buffer]),transfer(S,[S.buffer]))},c=globalCamera.params.center,centerSpringDamper=new SpringDamper(c),centerUpdate=t=>{globalCamera.params.center=t},startCenterSpring=debounce(()=>{centerSpringDamper.updateInitialValues(globalCamera.params.center),centerSpringDamper.animate(centerUpdate)},100),setCameraCenter=(t,e=3e3)=>{globalCamera.params.rotationCenter=t,centerSpringDamper.updateTarget(t),startCenterSpring()},distanceSpringDamper=new SpringDamper(globalCamera.params.distance),distanceUpdate=t=>{globalCamera.params.distance=t},startDistanceSpring=debounce(()=>{distanceSpringDamper.updateTarget(globalCamera.params.distance),distanceSpringDamper.updateInitialValues(globalCamera.params.distance),distanceSpringDamper.animate(distanceUpdate)},100),setCameraDistance=(t,e=5e3)=>{distanceSpringDamper.updateTarget(t)};startCenterSpring();startDistanceSpring();const startPanning=()=>{centerSpringDamper.stop()},stopPanning=()=>{},startZooming=()=>{distanceSpringDamper.stop()},stopZooming=()=>{startDistanceSpring()},zoomGlobalCamera=(t,e,n)=>{(globalCamera.params.distance>25||n>0)&&globalCamera.zoom(t,e,n)},panGlobalCamera=(...t)=>{globalCamera.pan(...t)},getGlobalCameraParams=()=>globalCamera.params,computeScreenPosition=([t,e,n])=>{const{projection:o,view:d}=getGlobalCamera().state,h=fromValues(t,e,n,1),l=create(),u=create(),p=fromValues$1(...o),g=fromValues$1(...d),v=create$1();return multiply(v,p,g),transformMat4(l,h,v),scale(u,l,1/l[3]),[u[0],u[1],u[2]]};var cameraAnimation=Object.freeze({__proto__:null,computeScreenPosition,getGlobalCameraParams,globalCamera,panGlobalCamera,setCameraCenter,setCameraDistance,startPanning,startZooming,stopPanning,stopZooming,updateCameras,zoomGlobalCamera});expose$1({...db,...layout,...cameraAnimation});
