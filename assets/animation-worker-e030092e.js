const lt=Symbol("Comlink.proxy"),Dt=Symbol("Comlink.endpoint"),kt=Symbol("Comlink.releaseProxy"),Ve=Symbol("Comlink.thrown"),ht=e=>typeof e=="object"&&e!==null||typeof e=="function",Nt={canHandle:e=>ht(e)&&e[lt],serialize(e){const{port1:t,port2:n}=new MessageChannel;return We(e,t),[n,[n]]},deserialize(e){return e.start(),Yt(e)}},_t={canHandle:e=>ht(e)&&Ve in e,serialize({value:e}){let t;return e instanceof Error?t={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:t={isError:!1,value:e},[t,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},pt=new Map([["proxy",Nt],["throw",_t]]);function We(e,t=self){t.addEventListener("message",function n(r){if(!r||!r.data)return;const{id:s,type:i,path:u}=Object.assign({path:[]},r.data),l=(r.data.argumentList||[]).map(oe);let m;try{const C=u.slice(0,-1).reduce((f,c)=>f[c],e),O=u.reduce((f,c)=>f[c],e);switch(i){case"GET":m=O;break;case"SET":C[u.slice(-1)[0]]=oe(r.data.value),m=!0;break;case"APPLY":m=O.apply(C,l);break;case"CONSTRUCT":{const f=new O(...l);m=Lt(f)}break;case"ENDPOINT":{const{port1:f,port2:c}=new MessageChannel;We(e,c),m=ie(f,[f])}break;case"RELEASE":m=void 0;break;default:return}}catch(C){m={value:C,[Ve]:0}}Promise.resolve(m).catch(C=>({value:C,[Ve]:0})).then(C=>{const[O,f]=Ze(C);t.postMessage(Object.assign(Object.assign({},O),{id:s}),f),i==="RELEASE"&&(t.removeEventListener("message",n),dt(t))})}),t.start&&t.start()}function Vt(e){return e.constructor.name==="MessagePort"}function dt(e){Vt(e)&&e.close()}function Yt(e,t){return Ye(e,[],t)}function Ee(e){if(e)throw new Error("Proxy has been released and is not useable")}function Ye(e,t=[],n=function(){}){let r=!1;const s=new Proxy(n,{get(i,u){if(Ee(r),u===kt)return()=>fe(e,{type:"RELEASE",path:t.map(l=>l.toString())}).then(()=>{dt(e),r=!0});if(u==="then"){if(t.length===0)return{then:()=>s};const l=fe(e,{type:"GET",path:t.map(m=>m.toString())}).then(oe);return l.then.bind(l)}return Ye(e,[...t,u])},set(i,u,l){Ee(r);const[m,C]=Ze(l);return fe(e,{type:"SET",path:[...t,u].map(O=>O.toString()),value:m},C).then(oe)},apply(i,u,l){Ee(r);const m=t[t.length-1];if(m===Dt)return fe(e,{type:"ENDPOINT"}).then(oe);if(m==="bind")return Ye(e,t.slice(0,-1));const[C,O]=Je(l);return fe(e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:C},O).then(oe)},construct(i,u){Ee(r);const[l,m]=Je(u);return fe(e,{type:"CONSTRUCT",path:t.map(C=>C.toString()),argumentList:l},m).then(oe)}});return s}function Ht(e){return Array.prototype.concat.apply([],e)}function Je(e){const t=e.map(Ze);return[t.map(n=>n[0]),Ht(t.map(n=>n[1]))]}const mt=new WeakMap;function ie(e,t){return mt.set(e,t),e}function Lt(e){return Object.assign(e,{[lt]:!0})}function Ze(e){for(const[t,n]of pt)if(n.canHandle(e)){const[r,s]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},s]}return[{type:"RAW",value:e},mt.get(e)||[]]}function oe(e){switch(e.type){case"HANDLER":return pt.get(e.name).deserialize(e.value);case"RAW":return e.value}}function fe(e,t,n){return new Promise(r=>{const s=$t();e.addEventListener("message",function i(u){!u.data||!u.data.id||u.data.id!==s||(e.removeEventListener("message",i),r(u.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},t),n)})}function $t(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ut=Xt;function Xt(e,t,n){var r=t[0],s=t[1],i=t[2],u=n[3]*r+n[7]*s+n[11]*i+n[15];return u=u||1,e[0]=(n[0]*r+n[4]*s+n[8]*i+n[12])/u,e[1]=(n[1]*r+n[5]*s+n[9]*i+n[13])/u,e[2]=(n[2]*r+n[6]*s+n[10]*i+n[14])/u,e}var Wt=Zt;function Zt(e,t,n,r){var s=n[0],i=n[2],u=t[0]-s,l=t[2]-i,m=Math.sin(r),C=Math.cos(r);return e[0]=s+l*m+u*C,e[1]=t[1],e[2]=i+l*C-u*m,e}var Bt=Gt;function Gt(e,t,n,r){var s=n[1],i=n[2],u=t[1]-s,l=t[2]-i,m=Math.sin(r),C=Math.cos(r);return e[0]=t[0],e[1]=s+u*C-l*m,e[2]=i+u*m+l*C,e}var Jt=1e-6,Qt=er,Ie=Jt;function er(e,t){var n=e[0],r=e[1],s=e[2],i=t[0],u=t[1],l=t[2];return Math.abs(n-i)<=Ie*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=Ie*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(s-l)<=Ie*Math.max(1,Math.abs(s),Math.abs(l))}var tr=rr;function rr(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}var nr=ar;function ar(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}var ir=or;function or(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}var sr=cr;function cr(e,t){var n=t[0],r=t[1],s=t[2],i=n*n+r*r+s*s;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}var vt=ur;function ur(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var fr=lr;function lr(e,t){var n=t[0],r=t[1],s=t[2],i=t[3],u=t[4],l=t[5],m=t[6],C=t[7],O=t[8],f=t[9],c=t[10],v=t[11],P=t[12],M=t[13],A=t[14],F=t[15],I=n*l-r*u,w=n*m-s*u,j=n*C-i*u,R=r*m-s*l,S=r*C-i*l,q=s*C-i*m,L=O*M-f*P,V=O*A-c*P,Z=O*F-v*P,z=f*A-c*M,T=f*F-v*M,h=c*F-v*A,p=I*h-w*T+j*z+R*Z-S*V+q*L;return p?(p=1/p,e[0]=(l*h-m*T+C*z)*p,e[1]=(s*T-r*h-i*z)*p,e[2]=(M*q-A*S+F*R)*p,e[3]=(c*S-f*q-v*R)*p,e[4]=(m*Z-u*h-C*V)*p,e[5]=(n*h-s*Z+i*V)*p,e[6]=(A*j-P*q-F*w)*p,e[7]=(O*q-c*j+v*w)*p,e[8]=(u*T-l*Z+C*L)*p,e[9]=(r*Z-n*T-i*L)*p,e[10]=(P*S-M*j+F*I)*p,e[11]=(f*j-O*S-v*I)*p,e[12]=(l*V-u*z-m*L)*p,e[13]=(n*z-r*V+s*L)*p,e[14]=(M*w-P*R-A*I)*p,e[15]=(O*R-f*w+c*I)*p,e):null}var hr=pr;function pr(e,t,n){var r=n[0],s=n[1],i=n[2],u,l,m,C,O,f,c,v,P,M,A,F;return t===e?(e[12]=t[0]*r+t[4]*s+t[8]*i+t[12],e[13]=t[1]*r+t[5]*s+t[9]*i+t[13],e[14]=t[2]*r+t[6]*s+t[10]*i+t[14],e[15]=t[3]*r+t[7]*s+t[11]*i+t[15]):(u=t[0],l=t[1],m=t[2],C=t[3],O=t[4],f=t[5],c=t[6],v=t[7],P=t[8],M=t[9],A=t[10],F=t[11],e[0]=u,e[1]=l,e[2]=m,e[3]=C,e[4]=O,e[5]=f,e[6]=c,e[7]=v,e[8]=P,e[9]=M,e[10]=A,e[11]=F,e[12]=u*r+O*s+P*i+t[12],e[13]=l*r+f*s+M*i+t[13],e[14]=m*r+c*s+A*i+t[14],e[15]=C*r+v*s+F*i+t[15]),e}var dr=mr;function mr(e,t,n){var r=n[0],s=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*s,e[5]=t[5]*s,e[6]=t[6]*s,e[7]=t[7]*s,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}var vr=vt,yr=gr;function gr(e,t,n,r){var s,i,u,l,m,C,O,f,c,v,P=t[0],M=t[1],A=t[2],F=r[0],I=r[1],w=r[2],j=n[0],R=n[1],S=n[2];return Math.abs(P-j)<1e-6&&Math.abs(M-R)<1e-6&&Math.abs(A-S)<1e-6?vr(e):(O=P-j,f=M-R,c=A-S,v=1/Math.sqrt(O*O+f*f+c*c),O*=v,f*=v,c*=v,s=I*c-w*f,i=w*O-F*c,u=F*f-I*O,v=Math.sqrt(s*s+i*i+u*u),v?(v=1/v,s*=v,i*=v,u*=v):(s=0,i=0,u=0),l=f*u-c*i,m=c*s-O*u,C=O*i-f*s,v=Math.sqrt(l*l+m*m+C*C),v?(v=1/v,l*=v,m*=v,C*=v):(l=0,m=0,C=0),e[0]=s,e[1]=l,e[2]=O,e[3]=0,e[4]=i,e[5]=m,e[6]=f,e[7]=0,e[8]=u,e[9]=C,e[10]=c,e[11]=0,e[12]=-(s*P+i*M+u*A),e[13]=-(l*P+m*M+C*A),e[14]=-(O*P+f*M+c*A),e[15]=1,e)}var Cr=Ar;function Ar(e,t,n,r,s){var i=1/Math.tan(t/2),u=1/(r-s);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+r)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*r*u,e[15]=0,e}var qe=Ut,Re=Wt,Qe=Bt,et=Qt,wr=tr,je=nr,De=ir,ke=sr,xr=vt,zr=fr,tt=hr,Er=dr,Mr=yr,br=Cr,rt=Math.PI*.5-1e-4,nt=-Math.PI*.5+1e-4,yt=function(t){t=t||{};var n=!0,r={aspectRatio:t.aspectRatio?t.aspectRatio:1,zoomAboutCursor:t.zoomAboutCursor===void 0?!0:t.zoomAboutCursor,distance:t.distance===void 0?10:t.distance,phi:t.phi===void 0?0:t.phi,theta:t.theta===void 0?0:t.theta,fovY:t.fovY===void 0?Math.PI/4:t.fovY,near:t.near===void 0?.1:t.near,far:t.far===void 0?100:t.far,panDecayTime:t.panDecayTime||100,zoomDecayTime:t.zoomDecayTime||100,rotationDecayTime:t.rotationDecayTime||100,dirty:!0,up:t.up||new Float32Array([0,1,0]),center:t.center||new Float32Array(3),rotationCenter:t.rotationCenter||t.center&&t.center.slice()||new Float32Array(3),zoom:0,panX:0,panY:0,panZ:0,pitch:0,yaw:0,dTheta:0,dPhi:0,mouseX:0,mouseY:0},s=null,i={tick:function(h){if(q.zoom&&(r.zoom=q.zoom),q.dTheta&&(r.dTheta=q.dTheta),q.dPhi&&(r.dPhi=q.dPhi),q.panX&&(r.panX=q.panX),q.panY&&(r.panY=q.panY),q.panZ&&(r.panZ=q.panZ),q.yaw&&(r.yaw=q.yaw),q.pitch&&(r.pitch=q.pitch),R(q),h){var p=r.dPhi,b=r.dTheta,k=r.zoom,K=r.panX,_=r.panY,H=r.panZ,$=r.pitch,B=r.yaw;Object.assign(r,h),h.dPhi!==void 0&&(r.dPhi+=p),h.dTheta!==void 0&&(r.dTheta+=b),h.zoom!==void 0&&(r.zoom+=k),h.panX!==void 0&&(r.panX+=K),h.panY!==void 0&&(r.panY+=_),h.panZ!==void 0&&(r.panZ+=H),h.pitch!==void 0&&(r.pitch+=$),h.yaw!==void 0&&(r.yaw+=B)}P()&&A(),j()?T(r):R(r);var X=Date.now();s!==null&&S(X-s),s=X,i.state.dirty=n,n=!1,v()},taint:I,resize:w,params:r,rotate:z,pivot:Z,pan:L,zoom:V};i.state={},i.state.projection=new Float32Array(16),i.state.viewInv=new Float32Array(16),i.state.view=new Float32Array(16),i.state.width=null,i.state.height=null,i.state.eye=new Float32Array(3);var u=new Float32Array(3),l=new Float32Array(3),m=new Float32Array(3),C=new Float32Array(3),O=new Float32Array(3),f=new Float32Array(16),c={up:new Float32Array(3),center:new Float32Array(3)};v();function v(){De(c.up,r.up),De(c.center,r.center),c.near=r.near,c.far=r.far,c.distance=r.distance,c.phi=r.phi,c.theta=r.theta,c.fovY=r.fovY}function P(){return!et(r.up,c.up)||!et(r.center,c.center)||r.near!==c.near||r.far!==c.far||r.phi!==c.phi||r.theta!==c.theta||r.distance!==c.distance||r.fovY!==c.fovY}var M={};function A(){M.dPhi=r.phi-c.phi,M.dTheta=r.theta-c.theta,M.zoom=r.distance/c.distance-1,r.theta=c.theta,r.distance=c.distance,r.phi=c.phi,M.yaw=0,M.pitch=0,M.panX=0,M.panY=0,M.panZ=0,M.mouseX=0,M.mouseY=0,T(M)}function F(){i.state.eye[0]=0,i.state.eye[1]=0,i.state.eye[2]=r.distance,Qe(i.state.eye,i.state.eye,O,-r.phi),Re(i.state.eye,i.state.eye,O,r.theta),wr(i.state.eye,i.state.eye,r.center),Mr(i.state.view,i.state.eye,r.center,r.up),br(i.state.projection,r.fovY,i.params.aspectRatio,r.near,r.far),zr(i.state.viewInv,i.state.view)}function I(){n=!0}function w(h){i.params.aspectRatio=h,F(),I()}function j(){if(Math.abs(r.zoom)>1e-4||Math.abs(r.panX)>1e-4||Math.abs(r.panY)>1e-4||Math.abs(r.panZ)>1e-4||Math.abs(r.dTheta)>1e-4||Math.abs(r.dPhi)>1e-4||Math.abs(r.yaw)>1e-4||Math.abs(r.pitch)>1e-4)return!0}function R(h){h.zoom=0,h.dTheta=0,h.dPhi=0,h.panX=0,h.panY=0,h.panZ=0,h.yaw=0,h.pitch=0}function S(h){var p=r.panDecayTime?Math.exp(-h/r.panDecayTime/Math.LN2):0,b=r.zoomDecayTime?Math.exp(-h/r.zoomDecayTime/Math.LN2):0,k=r.rotationDecayTime?Math.exp(-h/r.rotationDecayTime/Math.LN2):0;r.zoom*=b,r.panX*=p,r.panY*=p,r.panZ*=p,r.dTheta*=k,r.dPhi*=k,r.yaw*=k,r.pitch*=k}var q={};R(q);function L(h,p){var b=i.params.distance*Math.tan(i.params.fovY*.5)*2;return q.panX+=h*r.aspectRatio*b,q.panY+=p*b,i}function V(h,p,b){return q.zoom+=b,r.mouseX=h,r.mouseY=p,i}function Z(h,p){var b=i.params.fovY;q.yaw+=h*b*r.aspectRatio,q.pitch+=p*b}function z(h,p){q.dTheta+=h,q.dPhi+=p}function T(h){var p;xr(f),r.zoomAboutCursor&&(p=r.distance*Math.tan(r.fovY*.5),u[0]=h.mouseX*r.aspectRatio*p,u[1]=h.mouseY*p,u[2]=0,tt(f,f,u)),u[0]=1+h.zoom,u[1]=1+h.zoom,u[2]=1,Er(f,f,u),r.zoomAboutCursor&&(p=r.distance*Math.tan(r.fovY*.5),u[0]=-h.mouseX*r.aspectRatio*p,u[1]=-h.mouseY*p,u[2]=0,tt(f,f,u)),f[12]-=h.panX*.5,f[13]-=h.panY*.5,qe(r.center,r.center,i.state.view),qe(r.center,r.center,f),qe(r.center,r.center,i.state.viewInv),r.rotateAboutCenter&&De(r.rotationCenter,r.center),r.distance*=1+h.zoom;var b=r.phi;r.phi+=h.dPhi,r.phi=Math.min(rt,Math.max(nt,r.phi));var k=r.phi-b,K=r.theta;r.theta+=h.dTheta;var _=r.theta-K;if(Re(r.center,r.center,r.rotationCenter,_-r.theta),Qe(r.center,r.center,r.rotationCenter,-k),Re(r.center,r.center,r.rotationCenter,r.theta),h.yaw!==0||h.pitch!==0){m[0]=i.state.view[0],m[1]=i.state.view[4],m[2]=i.state.view[8],ke(m,m),l[0]=i.state.view[1],l[1]=i.state.view[5],l[2]=i.state.view[9],ke(l,l),C[0]=i.state.view[2],C[1]=i.state.view[6],C[2]=i.state.view[10],ke(C,C);var H=Math.min(rt,Math.max(nt,r.phi+h.pitch*.5)),$=H-r.phi;je(r.center,r.center,m,-Math.sin(h.yaw*.5)*r.distance),je(r.center,r.center,l,-Math.sin($)*r.distance),je(r.center,r.center,C,(2-Math.cos(h.yaw*.5)-Math.cos($))*r.distance),r.phi=H,r.theta+=h.yaw*.5}F(),I()}return w(i.params.aspectRatio),i},He={},Sr={get exports(){return He},set exports(e){He=e}},Se={},Tr={get exports(){return Se},set exports(e){Se=e}},at;function Or(){return at||(at=1,function(e,t){(function(n,r){e.exports=r()})(Ce,function(){var n={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},r=Array.prototype.slice;function s(f){var c=f.length;return c?c===1?[f[0]]:c===2?[f[0],f[1]]:c===3?[f[0],f[1],f[2]]:r.call(f,0):[]}function i(f){var c={};for(var v in f)n[v]||(c[v]=f[v]);return c}function u(f){return typeof f=="function"&&f.isMemoized}function l(f,c){return f===c||f!==f&&c!==c}function m(f,c){var v={};for(var P in f)v[P]=f[P];for(var P in c)v[P]=c[P];return v}var C=function(){function f(c){this.keys=[],this.values=[],this.options=c;var v=typeof c.isMatchingKey=="function";v?this.getKeyIndex=this._getKeyIndexFromMatchingKey:c.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey=typeof c.transformKey=="function",this.shouldCloneArguments=this.canTransformKey||v,this.shouldUpdateOnAdd=typeof c.onCacheAdd=="function",this.shouldUpdateOnChange=typeof c.onCacheChange=="function",this.shouldUpdateOnHit=typeof c.onCacheHit=="function"}return Object.defineProperty(f.prototype,"size",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"snapshot",{get:function(){return{keys:s(this.keys),size:this.size,values:s(this.values)}},enumerable:!1,configurable:!0}),f.prototype._getKeyIndexFromMatchingKey=function(c){var v=this.options,P=v.isMatchingKey,M=v.maxSize,A=this.keys,F=A.length;if(!F)return-1;if(P(A[0],c))return 0;if(M>1){for(var I=1;I<F;I++)if(P(A[I],c))return I}return-1},f.prototype._getKeyIndexForMany=function(c){var v=this.options.isEqual,P=this.keys,M=P.length;if(!M)return-1;if(M===1)return this._getKeyIndexForSingle(c);var A=c.length,F,I;if(A>1){for(var w=0;w<M;w++)if(F=P[w],F.length===A){for(I=0;I<A&&v(F[I],c[I]);I++);if(I===A)return w}}else for(var w=0;w<M;w++)if(F=P[w],F.length===A&&v(F[0],c[0]))return w;return-1},f.prototype._getKeyIndexForSingle=function(c){var v=this.keys;if(!v.length)return-1;var P=v[0],M=P.length;if(c.length!==M)return-1;var A=this.options.isEqual;if(M>1){for(var F=0;F<M;F++)if(!A(P[F],c[F]))return-1;return 0}return A(P[0],c[0])?0:-1},f.prototype.orderByLru=function(c,v,P){for(var M=this.keys,A=this.values,F=M.length,I=P;I--;)M[I+1]=M[I],A[I+1]=A[I];M[0]=c,A[0]=v;var w=this.options.maxSize;F===w&&P===F?(M.pop(),A.pop()):P>=w&&(M.length=A.length=w)},f.prototype.updateAsyncCache=function(c){var v=this,P=this.options,M=P.onCacheChange,A=P.onCacheHit,F=this.keys[0],I=this.values[0];this.values[0]=I.then(function(w){return v.shouldUpdateOnHit&&A(v,v.options,c),v.shouldUpdateOnChange&&M(v,v.options,c),w},function(w){var j=v.getKeyIndex(F);throw j!==-1&&(v.keys.splice(j,1),v.values.splice(j,1)),w})},f}();function O(f,c){if(c===void 0&&(c={}),u(f))return O(f.fn,m(f.options,c));if(typeof f!="function")throw new TypeError("You must pass a function to `memoize`.");var v=c.isEqual,P=v===void 0?l:v,M=c.isMatchingKey,A=c.isPromise,F=A===void 0?!1:A,I=c.maxSize,w=I===void 0?1:I,j=c.onCacheAdd,R=c.onCacheChange,S=c.onCacheHit,q=c.transformKey,L=m({isEqual:P,isMatchingKey:M,isPromise:F,maxSize:w,onCacheAdd:j,onCacheChange:R,onCacheHit:S,transformKey:q},i(c)),V=new C(L),Z=V.keys,z=V.values,T=V.canTransformKey,h=V.shouldCloneArguments,p=V.shouldUpdateOnAdd,b=V.shouldUpdateOnChange,k=V.shouldUpdateOnHit,K=function(){var _=h?s(arguments):arguments;T&&(_=q(_));var H=Z.length?V.getKeyIndex(_):-1;if(H!==-1)k&&S(V,L,K),H&&(V.orderByLru(Z[H],z[H],H),b&&R(V,L,K));else{var $=f.apply(this,arguments),B=h?_:s(arguments);V.orderByLru(B,$,Z.length),F&&V.updateAsyncCache(K),p&&j(V,L,K),b&&R(V,L,K)}return z[0]};return K.cache=V,K.fn=f,K.isMemoized=!0,K.options=L,K}return O})}(Tr)),Se}var ve={},Pr={get exports(){return ve},set exports(e){ve=e}},it;function Kr(){return it||(it=1,function(e,t){(function(n,r){r(t)})(Ce,function(n){var r=typeof WeakMap=="function",s=Object.keys;function i(z,T){return z===T||z!==z&&T!==T}function u(z){return z.constructor===Object||z.constructor==null}function l(z){return!!z&&typeof z.then=="function"}function m(z){return!!(z&&z.$$typeof)}function C(){var z=[];return{delete:function(T){for(var h=0;h<z.length;++h)if(z[h][0]===T){z.splice(h,1);return}},get:function(T){for(var h=0;h<z.length;++h)if(z[h][0]===T)return z[h][1]},set:function(T,h){for(var p=0;p<z.length;++p)if(z[p][0]===T){z[p][1]=h;return}z.push([T,h])}}}var O=function(z){return z?function(){return new WeakMap}:C}(r);function f(z){return function(h){var p=z||h;return function(k,K,_,H,$,B,X){X===void 0&&(X=O());var ne=!!k&&typeof k=="object",Ae=!!K&&typeof K=="object";if(ne!==Ae)return!1;if(!ne&&!Ae)return p(k,K,X);var we=X.get(k);if(we&&X.get(K))return we===K;X.set(k,K),X.set(K,k);var Pe=p(k,K,X);return X.delete(k),X.delete(K),Pe}}}function c(z,T,h,p){var b=z.length;if(T.length!==b)return!1;for(;b-- >0;)if(!h(z[b],T[b],b,b,z,T,p))return!1;return!0}function v(z,T,h,p){var b=z.size===T.size;if(b&&z.size){var k={},K=0;z.forEach(function(_,H){if(b){var $=!1,B=0;T.forEach(function(X,ne){!$&&!k[B]&&($=h(H,ne,K,B,z,T,p)&&h(_,X,H,ne,z,T,p),$&&(k[B]=!0)),B++}),K++,b=$}})}return b}var P="_owner",M=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function A(z,T,h,p){var b=s(z),k=b.length;if(s(T).length!==k)return!1;if(k)for(var K=void 0;k-- >0;){if(K=b[k],K===P){var _=m(z),H=m(T);if((_||H)&&_!==H)return!1}if(!M(T,K)||!h(z[K],T[K],K,K,z,T,p))return!1}return!0}var F=function(){return/foo/g.flags==="g"?function(T,h){return T.source===h.source&&T.flags===h.flags}:function(T,h){return T.source===h.source&&T.global===h.global&&T.ignoreCase===h.ignoreCase&&T.multiline===h.multiline&&T.unicode===h.unicode&&T.sticky===h.sticky&&T.lastIndex===h.lastIndex}}();function I(z,T,h,p){var b=z.size===T.size;if(b&&z.size){var k={};z.forEach(function(K,_){if(b){var H=!1,$=0;T.forEach(function(B,X){!H&&!k[$]&&(H=h(K,B,_,X,z,T,p),H&&(k[$]=!0)),$++}),b=H}})}return b}var w=typeof Map=="function",j=typeof Set=="function",R=Object.prototype.valueOf;function S(z){var T=typeof z=="function"?z(h):function(p,b,k,K,_,H,$){return h(p,b,$)};function h(p,b,k){if(p===b)return!0;if(p&&b&&typeof p=="object"&&typeof b=="object"){if(u(p)&&u(b))return A(p,b,T,k);var K=Array.isArray(p),_=Array.isArray(b);return K||_?K===_&&c(p,b,T,k):(K=p instanceof Date,_=b instanceof Date,K||_?K===_&&i(p.getTime(),b.getTime()):(K=p instanceof RegExp,_=b instanceof RegExp,K||_?K===_&&F(p,b):l(p)||l(b)?p===b:w&&(K=p instanceof Map,_=b instanceof Map,K||_)?K===_&&v(p,b,T,k):j&&(K=p instanceof Set,_=b instanceof Set,K||_)?K===_&&I(p,b,T,k):p.valueOf!==R||b.valueOf!==R?i(p.valueOf(),b.valueOf()):A(p,b,T,k)))}return p!==p&&b!==b}return h}var q=S(),L=S(function(){return i}),V=S(f()),Z=S(f(i));n.circularDeepEqual=V,n.circularShallowEqual=Z,n.createCustomEqual=S,n.deepEqual=q,n.sameValueZeroEqual=i,n.shallowEqual=L,Object.defineProperty(n,"__esModule",{value:!0})})}(Pr,ve)),ve}(function(e,t){(function(n,r){e.exports=r(Or(),Kr())})(Ce,function(n,r){function s(){return s=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var g=arguments[o];for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}return a},s.apply(this,arguments)}function i(a,o){if(a==null)return{};var g={},d=Object.keys(a),x,y;for(y=0;y<d.length;y++)x=d[y],!(o.indexOf(x)>=0)&&(g[x]=a[x]);return g}var u={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function l(){for(var a=arguments.length,o=new Array(a),g=0;g<a;g++)o[g]=arguments[g];return o.reduce(function(d,x){if(typeof d=="function")return typeof x=="function"?function(){d.apply(this,arguments),x.apply(this,arguments)}:d;if(typeof x=="function")return x})}function m(){for(var a=arguments.length,o=new Array(a),g=0;g<a;g++)o[g]=arguments[g];return o.reduce(function(d,x){if(typeof d=="function")return typeof x=="function"?function(){return d(x.apply(this,arguments))}:d;if(typeof x=="function")return x})}function C(a,o){for(var g=0;g<a.length;g++)if(a[g].key===o)return g;return-1}function O(a,o){var g=typeof o=="function"?o:function(d,x){for(var y=0;y<x.length;y++)if(!a(d[y],x[y]))return!1;return!0};return function(d,x){for(var y=0;y<d.length;y++)if(d[y].length===x.length&&g(d[y],x))return y;return-1}}function f(a,o){return!o||o===u?a:s({},a,o,{onCacheAdd:l(a.onCacheAdd,o.onCacheAdd),onCacheChange:l(a.onCacheChange,o.onCacheChange),onCacheHit:l(a.onCacheHit,o.onCacheHit),transformArgs:m(a.transformArgs,o.transformArgs)})}function c(a){return typeof a=="function"&&a.isMoized}function v(a,o,g){try{var d=g||o||"anonymous";Object.defineProperty(a,"name",{configurable:!0,enumerable:!1,value:"moized("+d+")",writable:!0})}catch{}}function P(a,o,g){var d=C(a,o);d!==-1&&(clearTimeout(a[d].timeoutId),g&&a.splice(d,1))}function M(a,o){var g=setTimeout(a,o);return typeof g.unref=="function"&&g.unref(),g}function A(a,o,g,d){var x=o.maxAge;return function y(E,N,U){var Y=E.keys[0];if(C(a,Y)===-1){var W=function(){var Q=O(g,d),ee=Q(E.keys,Y),ce=E.values[ee];~ee&&(E.keys.splice(ee,1),E.values.splice(ee,1),typeof o.onCacheChange=="function"&&o.onCacheChange(E,N,U)),P(a,Y,!0),typeof o.onExpire=="function"&&o.onExpire(Y)===!1&&(E.keys.unshift(Y),E.values.unshift(ce),y(E,N,U),typeof o.onCacheChange=="function"&&o.onCacheChange(E,N,U))};a.push({expirationMethod:W,key:Y,timeoutId:M(W,x)})}}}function F(a,o){return function(d){var x=d.keys[0],y=C(a,x);~y&&(P(a,x,!1),a[y].timeoutId=M(a[y].expirationMethod,o.maxAge))}}function I(a,o,g,d){var x=typeof o.maxAge=="number"&&isFinite(o.maxAge)?A(a,o,g,d):void 0;return{onCacheAdd:x,onCacheHit:x&&o.updateExpire?F(a,o):void 0}}var w={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},j=!1;function R(a){a?delete w.profiles[a]:w.profiles={}}function S(a){a===void 0&&(a=!0),w.isCollectingStats=a}function q(a){var o=a.profileName;return function(){o&&!w.profiles[o]&&(w.profiles[o]={calls:0,hits:0}),w.profiles[o].calls++}}function L(a){return function(){var o=w.profiles,g=a.profileName;o[g]||(o[g]={calls:0,hits:0}),o[g].calls++,o[g].hits++}}function V(a){return a.displayName||a.name||"Anonymous "+w.anonymousProfileNameCounter++}function Z(a,o){return a?(o/a*100).toFixed(4)+"%":"0.0000%"}function z(a){!w.isCollectingStats&&!j&&(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),j=!0);var o=w.profiles;if(a){if(!o[a])return{calls:0,hits:0,usage:"0.0000%"};var g=o[a];return s({},g,{usage:Z(g.calls,g.hits)})}var d=Object.keys(w.profiles).reduce(function(x,y){return x.calls+=o[y].calls,x.hits+=o[y].hits,x},{calls:0,hits:0});return s({},d,{profiles:Object.keys(o).reduce(function(x,y){return x[y]=z(y),x},{}),usage:Z(d.calls,d.hits)})}function T(a){return w.isCollectingStats?{onCacheAdd:q(a),onCacheHit:L(a)}:{}}var h={arguments:!0,callee:!0,caller:!0,constructor:!0,length:!0,name:!0,prototype:!0};function p(a,o,g){g===void 0&&(g=[]),Object.getOwnPropertyNames(a).forEach(function(d){if(!h[d]&&g.indexOf(d)===-1){var x=Object.getOwnPropertyDescriptor(a,d);x.get||x.set?Object.defineProperty(o,d,x):o[d]=a[d]}})}function b(a,o){var g=o.expirations,d=a.options,x=O(d.isEqual,d.isMatchingKey),y=a;y.clear=function(){var E=y._microMemoizeOptions.onCacheChange,N=y.cache;return N.keys.length=0,N.values.length=0,E&&E(N,y.options,y),!0},y.clearStats=function(){R(y.options.profileName)},y.get=function(E){var N=y._microMemoizeOptions.transformKey,U=y.cache,Y=N?N(E):E,W=x(U.keys,Y);return W!==-1?y.apply(this,E):void 0},y.getStats=function(){return z(y.options.profileName)},y.has=function(E){var N=y._microMemoizeOptions.transformKey,U=N?N(E):E;return x(y.cache.keys,U)!==-1},y.keys=function(){return y.cacheSnapshot.keys},y.remove=function(E){var N=y._microMemoizeOptions,U=N.onCacheChange,Y=N.transformKey,W=y.cache,J=x(W.keys,Y?Y(E):E);if(J===-1)return!1;var Q=W.keys[J];return W.keys.splice(J,1),W.values.splice(J,1),U&&U(W,y.options,y),P(g,Q,!0),!0},y.set=function(E,N){var U=y._microMemoizeOptions,Y=y.cache,W=y.options,J=U.onCacheAdd,Q=U.onCacheChange,ee=U.transformKey,ce=ee?ee(E):E,re=x(Y.keys,ce);if(re===-1){var ue=W.maxSize-1;Y.size>ue&&(Y.keys.length=ue,Y.values.length=ue),Y.keys.unshift(ce),Y.values.unshift(N),W.isPromise&&Y.updateAsyncCache(y),J&&J(Y,W,y),Q&&Q(Y,W,y)}else{var xe=Y.keys[re];Y.values[re]=N,re>0&&Y.orderByLru(xe,N,re),W.isPromise&&Y.updateAsyncCache(y),typeof Q=="function"&&Q(Y,W,y)}},y.values=function(){return y.cacheSnapshot.values}}function k(a,o){var g=o.expirations,d=o.options,x=o.originalFunction,y=a.options;Object.defineProperties(a,{_microMemoizeOptions:{configurable:!0,get:function(){return y}},cacheSnapshot:{configurable:!0,get:function(){var U=a.cache;return{keys:U.keys.slice(0),size:U.size,values:U.values.slice(0)}}},expirations:{configurable:!0,get:function(){return g}},expirationsSnapshot:{configurable:!0,get:function(){return g.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return d}},originalFunction:{configurable:!0,get:function(){return x}}});var E=a;p(x,E)}function K(a,o){return b(a,o),k(a,o),a}var _=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function H(a,o,g){var d=a(s({maxArgs:2,isShallowEqual:!0},g,{isReact:!1}));o.displayName||(o.displayName=o.name||"Component");function x(y,E,N){this.props=y,this.context=E,this.updater=N,this.MoizedComponent=d(o)}return x.prototype.isReactComponent={},x.prototype.render=function(){return{$$typeof:_,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},p(o,x,["contextType","contextTypes"]),x.displayName="Moized("+(o.displayName||o.name||"Component")+")",v(x,o.name,g.profileName),x}function $(a){return function(o){if(a>=o.length)return o;if(a===0)return[];if(a===1)return[o[0]];if(a===2)return[o[0],o[1]];if(a===3)return[o[0],o[1],o[2]];for(var g=[],d=0;d<a;d++)g[d]=o[d];return g}}function B(a,o){for(var g=a.length,d=0;d<g;++d)if(a[d]===o)return d+1;return 0}function X(){var a=[],o=[];return function(d,x){var y=typeof x;if(y==="function"||y==="symbol")return x.toString();if(typeof x=="object"){if(a.length){var E=B(a,this);E===0?a[a.length]=this:(a.splice(E),o.splice(E)),o[o.length]=d;var N=B(a,x);if(N!==0)return"[ref="+(o.slice(0,N).join(".")||".")+"]"}else a[0]=x,o[0]=d;return x}return""+x}}function ne(a){var o=typeof a;return a&&(o==="object"||o==="function")?JSON.stringify(a,X()):a}function Ae(a){for(var o="|",g=0;g<a.length;g++)o+=ne(a[g])+"|";return[o]}function we(a){return typeof a.serializer=="function"?a.serializer:Ae}function Pe(a,o){return a[0]===o[0]}function Ke(a){if(typeof a=="function")return function(o,g,d){return a(d.cache,d.options,d)}}function Mt(a){return a.matchesArg||a.isDeepEqual&&r.deepEqual||a.isShallowEqual&&r.shallowEqual||r.sameValueZeroEqual}function bt(a){return a.matchesKey||a.isSerialized&&Pe||void 0}function St(a){return m(a.isSerialized&&we(a),typeof a.transformArgs=="function"&&a.transformArgs,typeof a.maxArgs=="number"&&$(a.maxArgs))}function Tt(a){var o=a.options.updateCacheForKey,g=function(){for(var x=arguments.length,y=new Array(x),E=0;E<x;E++)y[E]=arguments[E];if(!o(y))return a.apply(this,y);var N=a.fn.apply(this,y);return a.set(y,N),N};return p(a,g),g}var Ot=["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"],D=function a(o,g){var d=g||u;if(c(o)){var x=o.originalFunction,y=f(o.options,d);return a(x,y)}if(typeof o=="object")return function(Fe,qt){if(typeof Fe=="function"){var Rt=f(o,qt);return a(Fe,Rt)}var jt=f(o,Fe);return a(jt)};if(d.isReact)return H(a,o,d);var E=s({},u,d,{maxAge:typeof d.maxAge=="number"&&d.maxAge>=0?d.maxAge:u.maxAge,maxArgs:typeof d.maxArgs=="number"&&d.maxArgs>=0?d.maxArgs:u.maxArgs,maxSize:typeof d.maxSize=="number"&&d.maxSize>=0?d.maxSize:u.maxSize,profileName:d.profileName||V(o)}),N=[];E.matchesArg,E.isDeepEqual;var U=E.isPromise;E.isReact,E.isSerialized,E.isShallowEqual,E.matchesKey,E.maxAge,E.maxArgs;var Y=E.maxSize,W=E.onCacheAdd,J=E.onCacheChange,Q=E.onCacheHit;E.onExpire,E.profileName,E.serializer;var ee=E.updateCacheForKey;E.transformArgs,E.updateExpire;var ce=i(E,Ot),re=Mt(E),ue=bt(E),xe=I(N,E,re,ue),Ge=T(E),Kt=St(E),Ft=s({},ce,{isEqual:re,isMatchingKey:ue,isPromise:U,maxSize:Y,onCacheAdd:Ke(l(W,xe.onCacheAdd,Ge.onCacheAdd)),onCacheChange:Ke(J),onCacheHit:Ke(l(Q,xe.onCacheHit,Ge.onCacheHit)),transformKey:Kt}),It=n(o,Ft),ze=K(It,{expirations:N,options:E,originalFunction:o});return ee&&(ze=Tt(ze)),v(ze,o.name,d.profileName),ze};D.clearStats=R,D.collectStats=S,D.compose=function(){return m.apply(void 0,arguments)||D},D.deep=D({isDeepEqual:!0}),D.getStats=z,D.infinite=D({maxSize:1/0}),D.isCollectingStats=function(){return w.isCollectingStats},D.isMoized=function(o){return typeof o=="function"&&!!o.isMoized},D.matchesArg=function(a){return D({matchesArg:a})},D.matchesKey=function(a){return D({matchesKey:a})};function Pt(a,o){if(o===!0)return D({maxAge:a,updateExpire:o});if(typeof o=="object"){var g=o.onExpire,d=o.updateExpire;return D({maxAge:a,onExpire:g,updateExpire:d})}return D(typeof o=="function"?{maxAge:a,onExpire:o,updateExpire:!0}:{maxAge:a})}return D.maxAge=Pt,D.maxArgs=function(a){return D({maxArgs:a})},D.maxSize=function(a){return D({maxSize:a})},D.profile=function(a){return D({profileName:a})},D.promise=D({isPromise:!0,updateExpire:!0}),D.react=D({isReact:!0}),D.serialize=D({isSerialized:!0}),D.serializeWith=function(a){return D({isSerialized:!0,serializer:a})},D.shallow=D({isShallowEqual:!0}),D.transformArgs=function(a){return D({transformArgs:a})},D.updateCacheForKey=function(a){return D({updateCacheForKey:a})},Object.defineProperty(D,"default",{configurable:!1,enumerable:!1,value:D,writable:!1}),D})})(Sr);var gt=He,he=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Fr(){var e=new he(16);return he!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ot(e,t,n,r,s,i,u,l,m,C,O,f,c,v,P,M){var A=new he(16);return A[0]=e,A[1]=t,A[2]=n,A[3]=r,A[4]=s,A[5]=i,A[6]=u,A[7]=l,A[8]=m,A[9]=C,A[10]=O,A[11]=f,A[12]=c,A[13]=v,A[14]=P,A[15]=M,A}function Ir(e,t,n){var r=t[0],s=t[1],i=t[2],u=t[3],l=t[4],m=t[5],C=t[6],O=t[7],f=t[8],c=t[9],v=t[10],P=t[11],M=t[12],A=t[13],F=t[14],I=t[15],w=n[0],j=n[1],R=n[2],S=n[3];return e[0]=w*r+j*l+R*f+S*M,e[1]=w*s+j*m+R*c+S*A,e[2]=w*i+j*C+R*v+S*F,e[3]=w*u+j*O+R*P+S*I,w=n[4],j=n[5],R=n[6],S=n[7],e[4]=w*r+j*l+R*f+S*M,e[5]=w*s+j*m+R*c+S*A,e[6]=w*i+j*C+R*v+S*F,e[7]=w*u+j*O+R*P+S*I,w=n[8],j=n[9],R=n[10],S=n[11],e[8]=w*r+j*l+R*f+S*M,e[9]=w*s+j*m+R*c+S*A,e[10]=w*i+j*C+R*v+S*F,e[11]=w*u+j*O+R*P+S*I,w=n[12],j=n[13],R=n[14],S=n[15],e[12]=w*r+j*l+R*f+S*M,e[13]=w*s+j*m+R*c+S*A,e[14]=w*i+j*C+R*v+S*F,e[15]=w*u+j*O+R*P+S*I,e}function Le(){var e=new he(4);return he!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function qr(e,t,n,r){var s=new he(4);return s[0]=e,s[1]=t,s[2]=n,s[3]=r,s}function Rr(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function jr(e,t,n){var r=t[0],s=t[1],i=t[2],u=t[3];return e[0]=n[0]*r+n[4]*s+n[8]*i+n[12]*u,e[1]=n[1]*r+n[5]*s+n[9]*i+n[13]*u,e[2]=n[2]*r+n[6]*s+n[10]*i+n[14]*u,e[3]=n[3]*r+n[7]*s+n[11]*i+n[15]*u,e}(function(){var e=Le();return function(t,n,r,s,i,u){var l,m;for(n||(n=4),r||(r=0),s?m=Math.min(s*n+r,t.length):m=t.length,l=r;l<m;l+=n)e[0]=t[l],e[1]=t[l+1],e[2]=t[l+2],e[3]=t[l+3],i(e,e,u),t[l]=e[0],t[l+1]=e[1],t[l+2]=e[2],t[l+3]=e[3];return t}})();var se={},Dr={get exports(){return se},set exports(e){se=e}},$e={},Me={get exports(){return $e},set exports(e){$e=e}};(function(){var e,t,n,r,s,i;typeof performance<"u"&&performance!==null&&performance.now?Me.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Me.exports=function(){return(e()-s)/1e6},t=process.hrtime,e=function(){var u;return u=t(),u[0]*1e9+u[1]},r=e(),i=process.uptime()*1e9,s=r-i):Date.now?(Me.exports=function(){return Date.now()-n},n=Date.now()):(Me.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(Ce);var kr=$e,te=typeof window>"u"?Ce:window,be=["moz","webkit"],le="AnimationFrame",pe=te["request"+le],ge=te["cancel"+le]||te["cancelRequest"+le];for(var de=0;!pe&&de<be.length;de++)pe=te[be[de]+"Request"+le],ge=te[be[de]+"Cancel"+le]||te[be[de]+"CancelRequest"+le];if(!pe||!ge){var Ne=0,st=0,ae=[],Nr=1e3/60;pe=function(e){if(ae.length===0){var t=kr(),n=Math.max(0,Nr-(t-Ne));Ne=n+t,setTimeout(function(){var r=ae.slice(0);ae.length=0;for(var s=0;s<r.length;s++)if(!r[s].cancelled)try{r[s].callback(Ne)}catch(i){setTimeout(function(){throw i},0)}},Math.round(n))}return ae.push({handle:++st,callback:e,cancelled:!1}),st},ge=function(e){for(var t=0;t<ae.length;t++)ae[t].handle===e&&(ae[t].cancelled=!0)}}Dr.exports=function(e){return pe.call(te,e)};se.cancel=function(){ge.apply(te,arguments)};se.polyfill=function(e){e||(e=te),e.requestAnimationFrame=pe,e.cancelAnimationFrame=ge};class Ct{constructor(t,n=15,r=15){this.target=t,this.stiffness=n,this.damping=r,this.velocity=this._initializeVelocity(t),this.animationFrameId=null,this.currentValues=this._clone(t),this.paused=!1}_initializeVelocity(t){if(typeof t=="number")return 0;if(Array.isArray(t)||ArrayBuffer.isView(t))return t.map(()=>0);{const n={};for(const r in t)n[r]=0;return n}}_clone(t){return Array.isArray(t)?[...t]:ArrayBuffer.isView(t)?t.slice():typeof t=="object"?{...t}:t}updateTarget(t){this.target=t}updateInitialValues(t){this.currentValues=this._clone(t)}_interpolateSpring(t,n,r,s,i,u){const l=n-t,m=s*l,C=-i*r,O=m+C,f=r+O*u;return{newCurrentValue:t+f*u,newVelocity:f}}step(t){if(this.paused)return this.currentValues;const n=(r,s,i)=>this._interpolateSpring(r,s,i,this.stiffness,this.damping,t);if(typeof this.target=="number"){const{newCurrentValue:r,newVelocity:s}=n(this.currentValues,this.target,this.velocity);this.currentValues=r,this.velocity=s}else if(Array.isArray(this.target)||ArrayBuffer.isView(this.target))for(let r=0;r<this.target.length;r++){const{newCurrentValue:s,newVelocity:i}=n(this.currentValues[r],this.target[r],this.velocity[r]);this.currentValues[r]=s,this.velocity[r]=i}else for(const r in this.target){const{newCurrentValue:s,newVelocity:i}=n(this.currentValues[r],this.target[r],this.velocity[r]);this.currentValues[r]=s,this.velocity[r]=i}return this.currentValues}animate(t){const n=.016666666666666666,r=()=>{const s=this.step(n);t(s),this.animationFrameId=se(r)};this.stop(),this.animationFrameId=se(r)}pause(){this.paused=!0}resume(){this.paused=!1}stop(){se.cancel(this.animationFrameId)}}var _r=typeof global=="object"&&global&&global.Object===Object&&global,Vr=_r,Yr=typeof self=="object"&&self&&self.Object===Object&&self,Hr=Vr||Yr||Function("return this")(),At=Hr,Lr=At.Symbol,Te=Lr,wt=Object.prototype,$r=wt.hasOwnProperty,Ur=wt.toString,me=Te?Te.toStringTag:void 0;function Xr(e){var t=$r.call(e,me),n=e[me];try{e[me]=void 0;var r=!0}catch{}var s=Ur.call(e);return r&&(t?e[me]=n:delete e[me]),s}var Wr=Object.prototype,Zr=Wr.toString;function Br(e){return Zr.call(e)}var Gr="[object Null]",Jr="[object Undefined]",ct=Te?Te.toStringTag:void 0;function Qr(e){return e==null?e===void 0?Jr:Gr:ct&&ct in Object(e)?Xr(e):Br(e)}function en(e){return e!=null&&typeof e=="object"}var tn="[object Symbol]";function rn(e){return typeof e=="symbol"||en(e)&&Qr(e)==tn}var nn=/\s/;function an(e){for(var t=e.length;t--&&nn.test(e.charAt(t)););return t}var on=/^\s+/;function sn(e){return e&&e.slice(0,an(e)+1).replace(on,"")}function Ue(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var ut=0/0,cn=/^[-+]0x[0-9a-f]+$/i,un=/^0b[01]+$/i,fn=/^0o[0-7]+$/i,ln=parseInt;function ft(e){if(typeof e=="number")return e;if(rn(e))return ut;if(Ue(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ue(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=sn(e);var n=un.test(e);return n||fn.test(e)?ln(e.slice(2),n?2:8):cn.test(e)?ut:+e}var hn=function(){return At.Date.now()},_e=hn,pn="Expected a function",dn=Math.max,mn=Math.min;function xt(e,t,n){var r,s,i,u,l,m,C=0,O=!1,f=!1,c=!0;if(typeof e!="function")throw new TypeError(pn);t=ft(t)||0,Ue(n)&&(O=!!n.leading,f="maxWait"in n,i=f?dn(ft(n.maxWait)||0,t):i,c="trailing"in n?!!n.trailing:c);function v(S){var q=r,L=s;return r=s=void 0,C=S,u=e.apply(L,q),u}function P(S){return C=S,l=setTimeout(F,t),O?v(S):u}function M(S){var q=S-m,L=S-C,V=t-q;return f?mn(V,i-L):V}function A(S){var q=S-m,L=S-C;return m===void 0||q>=t||q<0||f&&L>=i}function F(){var S=_e();if(A(S))return I(S);l=setTimeout(F,M(S))}function I(S){return l=void 0,c&&r?v(S):(r=s=void 0,u)}function w(){l!==void 0&&clearTimeout(l),C=0,r=m=s=l=void 0}function j(){return l===void 0?u:I(_e())}function R(){var S=_e(),q=A(S);if(r=arguments,s=this,m=S,q){if(l===void 0)return P(m);if(f)return clearTimeout(l),l=setTimeout(F,t),v(m)}return l===void 0&&(l=setTimeout(F,t)),u}return R.cancel=w,R.flush=j,R}const Be=gt.infinite(()=>yt({panDecayTime:200,zoomDecayTime:200,rotationDecayTime:500,distance:2e3})),Xe=gt.infinite(e=>yt({phi:Math.PI/4,theta:Math.PI/4,distance:200,center:[0,0,0],fovY:.013888888888888888*(Math.PI/2),near:2,far:400})),G=Be();Xe("zoomed");const vn=(e,t,n)=>{const r=Be(),s={near:r.params.distance*.1,far:r.params.distance*5e4};r.resize(t/n),r.tick({fovY:Math.PI/3,...s});const i=Xe("zoomed");i.params.distance=r.params.distance,i.params.center=[0,0,0],i.resize(t/n),i.tick(s);const u=Xe("fixed");u.resize(t/n),u.tick({near:u.params.distance*.1,far:u.params.distance*1e4});const l=new Float32Array(r.state.projection),m=new Float32Array(r.state.view),C=new Float32Array(i.state.projection),O=new Float32Array(i.state.view),f=new Float32Array(u.state.projection),c=new Float32Array(u.state.view);e(ie(l,[l.buffer]),ie(m,[m.buffer]),ie(C,[C.buffer]),ie(O,[O.buffer]),ie(f,[f.buffer]),ie(c,[c.buffer]))},yn=G.params.center,Oe=new Ct(yn),gn=e=>{G.params.center=e},zt=xt(()=>{Oe.updateInitialValues(G.params.center),Oe.animate(gn)},100),Cn=(e,t=3e3)=>{G.params.rotationCenter=e,Oe.updateTarget(e),zt()},ye=new Ct(G.params.distance),An=e=>{G.params.distance=e},Et=xt(()=>{ye.updateTarget(G.params.distance),ye.updateInitialValues(G.params.distance),ye.animate(An)},100),wn=(e,t=5e3)=>{ye.updateTarget(e)};zt();Et();const xn=()=>{Oe.stop()},zn=()=>{},En=()=>{ye.stop()},Mn=()=>{Et()},bn=(e,t,n)=>{(G.params.distance>25||n>0)&&G.zoom(e,t,n)},Sn=(...e)=>{G.pan(...e)},Tn=()=>G.params,On=([e,t,n])=>{const{projection:r,view:s}=Be().state,i=qr(e,t,n,1),u=Le(),l=Le(),m=ot(...r),C=ot(...s),O=Fr();return Ir(O,m,C),jr(u,i,O),Rr(l,u,1/u[3]),[l[0],l[1],l[2]]};We({startPanning:xn,stopPanning:zn,startZooming:En,stopZooming:Mn,globalCamera:G,getGlobalCameraParams:Tn,updateCameras:vn,setCameraCenter:Cn,setCameraDistance:wn,zoomGlobalCamera:bn,panGlobalCamera:Sn,computeScreenPosition:On});
