import{m as N,u as j,M as He,V as Oe,p as Wt,g as xo,i as _r,d as $o,w as _o,a as Er,l as Pr,c as Sr,s as te,b as Z,e as Ce,f as Cr,h as Ar,j as Ht,k as Eo,n as Po,o as de,q as at,r as kr,t as z,v as B,x as Nr,y as M,z as It,A as Ut,B as Bt,C as Mr,D as Ln,E as ds,T as zr,F as Ir,G as So,H as Gt,I as Tr,J as Co,K as hs,L as Lr,N as q,O as ot,P as fs,Q as ps,R as gs,S as Or,U as Ao,W as dt,X as Vr,Y as jr,Z as Rr,_ as Dr,$ as Fr,a0 as Wr,a1 as Hr,a2 as ko,a3 as ln,a4 as Ur,a5 as Br,a6 as No,a7 as Gr,a8 as qr,a9 as Zt,aa as qt,ab as Kr,ac as Xr,ad as Zr,ae as Yr,af as Jr,ag as Qr,ah as ms,ai as Ue,aj as cn,ak as vs,al as St,am as ei,an as bs,ao as un,ap as ti,aq as ni}from"./worker-9ad80e94.js";const Yt=N.infinite(t=>({globalProjection:j(new He),globalView:j(new He),zoomedProjection:j(new He),zoomedView:j(new He),fixedProjection:j(new He),fixedView:j(new He),distance:j(0),center:j(new Oe(0,0,0)),rotationCenter:j(new Oe(0,0,0))})),si=t=>N(Wt((e,n,s,o,r,a,i)=>{const l=Yt(t);l.globalProjection.value.fromArray(e),l.globalView.value.fromArray(n),l.zoomedProjection.value.fromArray(s),l.zoomedView.value.fromArray(o),l.fixedProjection.value.fromArray(r),l.fixedView.value.fromArray(a),l.distance.value=i[0],l.center.value.fromArray(i.slice(1,4)),l.rotationCenter.value.fromArray(i.slice(4,7))}));var bt={};function oi(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var e=t.which;if(e===2)return 4;if(e===3)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e=t.button;if(e===1)return 4;if(e===2)return 2;if(e>=0)return 1<<e}}return 0}bt.buttons=oi;function Xn(t){return t.target||t.srcElement||window}bt.element=Xn;function ri(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var e=Xn(t),n=e.getBoundingClientRect();return t.clientX-n.left}return 0}bt.x=ri;function ii(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var e=Xn(t),n=e.getBoundingClientRect();return t.clientY-n.top}return 0}bt.y=ii;var ai=li,tt=bt;function li(t,e){e||(e=t,t=window);var n=0,s=0,o=0,r={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function i(f){var m=!1;return"altKey"in f&&(m=m||f.altKey!==r.alt,r.alt=!!f.altKey),"shiftKey"in f&&(m=m||f.shiftKey!==r.shift,r.shift=!!f.shiftKey),"ctrlKey"in f&&(m=m||f.ctrlKey!==r.control,r.control=!!f.ctrlKey),"metaKey"in f&&(m=m||f.metaKey!==r.meta,r.meta=!!f.metaKey),m}function l(f,m){var y=tt.x(m),S=tt.y(m);"buttons"in m&&(f=m.buttons|0),(f!==n||y!==s||S!==o||i(m))&&(n=f|0,s=y||0,o=S||0,e&&e(n,s,o,r))}function c(f){l(0,f)}function d(){(n||s||o||r.shift||r.alt||r.meta||r.control)&&(s=o=0,n=0,r.shift=r.alt=r.control=r.meta=!1,e&&e(0,0,0,r))}function u(f){i(f)&&e&&e(n,s,o,r)}function p(f){tt.buttons(f)===0?l(0,f):l(n,f)}function h(f){l(n|tt.buttons(f),f)}function b(f){l(n&~tt.buttons(f),f)}function g(){a||(a=!0,t.addEventListener("mousemove",p),t.addEventListener("mousedown",h),t.addEventListener("mouseup",b),t.addEventListener("mouseleave",c),t.addEventListener("mouseenter",c),t.addEventListener("mouseout",c),t.addEventListener("mouseover",c),t.addEventListener("blur",d),t.addEventListener("keyup",u),t.addEventListener("keydown",u),t.addEventListener("keypress",u),t!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function x(){a&&(a=!1,t.removeEventListener("mousemove",p),t.removeEventListener("mousedown",h),t.removeEventListener("mouseup",b),t.removeEventListener("mouseleave",c),t.removeEventListener("mouseenter",c),t.removeEventListener("mouseout",c),t.removeEventListener("mouseover",c),t.removeEventListener("blur",d),t.removeEventListener("keyup",u),t.removeEventListener("keydown",u),t.removeEventListener("keypress",u),t!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}g();var _={element:t};return Object.defineProperties(_,{enabled:{get:function(){return a},set:function(f){f?g():x()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return s},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),_}var ci={left:0,top:0},ui=di;function di(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var s=t.clientX||0,o=t.clientY||0,r=hi(e);return n[0]=s-r.left,n[1]=o-r.top,n}function hi(t){return t===window||t===document||t===document.body?ci:t.getBoundingClientRect()}var On={exports:{}},Mo={exports:{}},fi=void 0,zo=function(t){return t!==fi&&t!==null},pi=zo,gi={object:!0,function:!0,undefined:!0},mi=function(t){return pi(t)?hasOwnProperty.call(gi,typeof t):!1},vi=mi,bi=function(t){if(!vi(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},yi=bi,wi=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!yi(t)},xi=wi,$i=/^\s*class[\s{/}]/,_i=Function.prototype.toString,Ei=function(t){return!(!xi(t)||$i.test(_i.call(t)))},Pi=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},dn,ys;function Si(){return ys||(ys=1,dn=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),dn}var Ci=function(){},Ai=Ci(),Zn=function(t){return t!==Ai&&t!==null},hn,ws;function ki(){if(ws)return hn;ws=1;var t=Zn,e=Object.keys;return hn=function(n){return e(t(n)?Object(n):n)},hn}var fn,xs;function Ni(){return xs||(xs=1,fn=Si()()?Object.keys:ki()),fn}var pn,$s;function Mi(){if($s)return pn;$s=1;var t=Zn;return pn=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},pn}var gn,_s;function zi(){if(_s)return gn;_s=1;var t=Ni(),e=Mi(),n=Math.max;return gn=function(s,o){var r,a,i=n(arguments.length,2),l;for(s=Object(e(s)),l=function(c){try{s[c]=o[c]}catch(d){r||(r=d)}},a=1;a<i;++a)o=arguments[a],t(o).forEach(l);if(r!==void 0)throw r;return s},gn}var Ii=Pi()?Object.assign:zi(),Ti=Zn,Li=Array.prototype.forEach,Oi=Object.create,Vi=function(t,e){var n;for(n in t)e[n]=t[n]},ji=function(t){var e=Oi(null);return Li.call(arguments,function(n){Ti(n)&&Vi(Object(n),e)}),e},mn="razdwatrzy",Ri=function(){return typeof mn.contains!="function"?!1:mn.contains("dwa")===!0&&mn.contains("foo")===!1},vn,Es;function Di(){if(Es)return vn;Es=1;var t=String.prototype.indexOf;return vn=function(e){return t.call(this,e,arguments[1])>-1},vn}var Fi=Ri()?String.prototype.contains:Di(),Tt=zo,Ps=Ei,Io=Ii,To=ji,lt=Fi,Wi=Mo.exports=function(t,e){var n,s,o,r,a;return arguments.length<2||typeof t!="string"?(r=e,e=t,t=null):r=arguments[2],Tt(t)?(n=lt.call(t,"c"),s=lt.call(t,"e"),o=lt.call(t,"w")):(n=o=!0,s=!1),a={value:e,configurable:n,enumerable:s,writable:o},r?Io(To(r),a):a};Wi.gs=function(t,e,n){var s,o,r,a;return typeof t!="string"?(r=n,n=e,e=t,t=null):r=arguments[3],Tt(e)?Ps(e)?Tt(n)?Ps(n)||(r=n,n=void 0):n=void 0:(r=e,e=n=void 0):e=void 0,Tt(t)?(s=lt.call(t,"c"),o=lt.call(t,"e")):(s=!0,o=!1),a={get:e,set:n,configurable:s,enumerable:o},r?Io(To(r),a):a};var Hi=Mo.exports,Ui=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var n=Hi,s=Ui,o=Function.prototype.apply,r=Function.prototype.call,a=Object.create,i=Object.defineProperty,l=Object.defineProperties,c=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0},u,p,h,b,g,x,_;u=function(f,m){var y;return s(m),c.call(this,"__ee__")?y=this.__ee__:(y=d.value=a(null),i(this,"__ee__",d),d.value=null),y[f]?typeof y[f]=="object"?y[f].push(m):y[f]=[y[f],m]:y[f]=m,this},p=function(f,m){var y,S;return s(m),S=this,u.call(this,f,y=function(){h.call(S,f,y),o.call(m,this,arguments)}),y.__eeOnceListener__=m,this},h=function(f,m){var y,S,$,k;if(s(m),!c.call(this,"__ee__"))return this;if(y=this.__ee__,!y[f])return this;if(S=y[f],typeof S=="object")for(k=0;$=S[k];++k)($===m||$.__eeOnceListener__===m)&&(S.length===2?y[f]=S[k?0:1]:S.splice(k,1));else(S===m||S.__eeOnceListener__===m)&&delete y[f];return this},b=function(f){var m,y,S,$,k;if(c.call(this,"__ee__")&&($=this.__ee__[f],!!$))if(typeof $=="object"){for(y=arguments.length,k=new Array(y-1),m=1;m<y;++m)k[m-1]=arguments[m];for($=$.slice(),m=0;S=$[m];++m)o.call(S,this,k)}else switch(arguments.length){case 1:r.call($,this);break;case 2:r.call($,this,arguments[1]);break;case 3:r.call($,this,arguments[1],arguments[2]);break;default:for(y=arguments.length,k=new Array(y-1),m=1;m<y;++m)k[m-1]=arguments[m];o.call($,this,k)}},g={on:u,once:p,off:h,emit:b},x={on:n(u),once:n(p),off:n(h),emit:n(b)},_=l({},x),t.exports=e=function(f){return f==null?a(_):l(Object(f),x)},e.methods=g})(On,On.exports);var Bi=On.exports,Gi=Xi,qi=ai,Be=ui,Ki=Bi;function Xi(t){t=t||window;var e=Ki(),n=[null,null],s=[null,null],o=[null,null],r=[null,null],a=0,i={},l,c,d=t===window?function(){l=window.innerWidth,c=window.innerHeight}:function(){l=t.clientWidth,c=t.clientHeight},u=0,p,h,b={},g=qi(t,function(C,P,A,I){p=P,h=A,u=C,b=I});function x(C){Be(C,t,o),d(),i.buttons=u,i.mods=b,i.x0=i.x=i.x1=2*o[0]/l-1,i.y0=i.y=i.y1=1-2*o[1]/c,i.x2=null,i.y2=null,i.dx=2*C.deltaX/l,i.dy=-2*C.deltaY/c,i.dz=2*C.deltaZ/l,i.active=1,i.zoomx=1,i.zoomy=1,i.theta=0,i.dtheta=0,i.originalEvent=C,e.emit("wheel",i),n[0]=o[0],n[1]=o[1]}var _=null,f=null,m=0;function y(C){Be(C,t,o),m=0,d(),i.buttons=u,i.mods=b,i.x=i.x1=2*o[0]/l-1,i.y=i.y1=1-2*o[1]/c,i.x2=null,i.y2=null,i.active=m,i.x0=2*_/l-1,i.y0=1-2*f/c,i.dx=0,i.dy=0,i.dz=0,i.zoomx=1,i.zoomy=1,i.theta=0,i.dtheta=0,i.originalEvent=C,e.emit("mouseup",i),_=f=null,n[0]=o[0],n[1]=o[1]}function S(C){Be(C,t,o),m=1,d(),_=p,f=h,i.buttons=u,i.mods=b,i.x=i.x0=i.x1=2*o[0]/l-1,i.y=i.y0=i.y1=1-2*o[1]/c,i.x2=null,i.y2=null,i.active=m,i.dx=0,i.dy=0,i.dz=0,i.zoomx=1,i.zoomy=1,i.theta=0,i.dtheta=0,i.originalEvent=C,e.emit("mousedown",i),n[0]=o[0],n[1]=o[1]}function $(C){Be(C,t,o),d(),i.buttons=u,i.mods=b,i.x0=2*_/l-1,i.y0=1-2*f/c,i.x=i.x1=2*o[0]/l-1,i.y=i.y1=1-2*o[1]/c,i.x2=null,i.y2=null,i.dx=2*(o[0]-n[0])/l,i.dy=-2*(o[1]-n[1])/c,i.active=m,i.dz=0,i.zoomx=1,i.zoomy=1,i.theta=0,i.dtheta=0,i.originalEvent=C,e.emit("mousemove",i),n[0]=o[0],n[1]=o[1]}function k(C){for(var P=C.identifier,A=0;A<r.length;A++)if(r[A]&&r[A].touch&&r[A].touch.identifier===P)return A;return-1}function ke(C){s[0]=null,s[1]=null;for(var P=0;P<C.changedTouches.length;P++){var A=C.changedTouches[P],I=A.identifier,H=k(I);if(H===-1&&a<2){var pe=r[0]?1:0,R=r[0]?0:1,V={position:[0,0],touch:null};r[pe]=V,a++,V.touch=A,Be(A,t,V.position),r[R]&&r[R].touch}}for(var D=0,F=0,U=0,P=0;P<r.length;P++)r[P]&&(D+=r[P].position[0],F+=r[P].position[1],U++);if(D/=U,F/=U,a>0){if(i.theta=0,U>1){var ye=r[1].position[0]-r[0].position[0],ge=(r[0].position[1]-r[1].position[1])*l/c;i.theta=Math.atan2(ge,ye)}d(),i.buttons=0,i.mods={},i.active=a,_=D,f=F,i.x0=2*_/l-1,i.y0=1-2*f/c,i.x=2*D/l-1,i.y=1-2*F/c,i.x1=2*r[0].position[0]/l-1,i.y1=1-2*r[0].position[1]/c,a>1&&(i.x2=2*r[1].position[0]/l-1,i.y2=1-2*r[1].position[1]/c),i.active=a,i.dx=0,i.dy=0,i.dz=0,i.zoomx=1,i.zoomy=1,i.dtheta=0,i.originalEvent=C,e.emit(a===1?"touchstart":"pinchstart",i)}}function je(C){for(var P,A=!1,I=0;I<C.changedTouches.length;I++){var H=C.changedTouches[I];P=k(H),P!==-1&&(A=!0,r[P].touch=H,Be(H,t,r[P].position))}if(A){if(a===1){for(P=0;P<r.length&&!r[P];P++);if(r[P]&&s[P]){var pe=r[P].position[0],R=r[P].position[1],V=pe-s[P][0],D=R-s[P][1];i.buttons=0,i.mods={},i.active=a,i.x=i.x1=2*pe/l-1,i.y=i.y1=1-2*R/c,i.x2=null,i.y2=null,i.x0=2*_/l-1,i.y0=1-2*f/c,i.dx=2*V/l,i.dy=-2*D/c,i.dz=0,i.zoomx=1,i.zoomy=1,i.theta=0,i.dtheta=0,i.originalEvent=C,e.emit("touchmove",i)}}else if(a===2&&s[0]&&s[1]){var F=s[0],U=s[1],ye=U[0]-F[0],ge=(U[1]-F[1])*l/c,we=r[0].position,xe=r[1].position,Re=xe[0]-we[0],De=(we[1]-xe[1])*l/c,xt=Math.sqrt(ye*ye+ge*ge)*.5,nn=Math.atan2(ge,ye),Fe=Math.sqrt(Re*Re+De*De)*.5,$t=Math.atan2(De,Re),sn=(U[0]+F[0])*.5,Ne=(U[1]+F[1])*.5,V=.5*(xe[0]+we[0]-F[0]-U[0]),D=.5*(xe[1]+we[1]-F[1]-U[1]),We=Fe/xt,on=$t-nn;i.buttons=0,i.mods=b,i.active=a,i.x=2*sn/l-1,i.y=1-2*Ne/c,i.x0=2*_/l-1,i.y0=1-2*f/c,i.x1=2*we[0]/l-1,i.y1=1-2*we[1]/c,i.x2=2*xe[0]/l-1,i.y2=1-2*xe[1]/c,i.dx=2*V/l,i.dy=-2*D/c,i.dz=0,i.zoomx=We,i.zoomy=We,i.theta=$t,i.dtheta=on,i.originalEvent=C,e.emit("pinchmove",i)}}r[0]&&(s[0]=r[0].position.slice()),r[1]&&(s[1]=r[1].position.slice())}function he(C){for(var P,A=0;A<C.changedTouches.length;A++){var I=C.changedTouches[A],H=k(I);if(H!==-1){P=r[H],r[H]=null,a--;var pe=H===0?1:0;r[pe]&&r[pe].touch}}var R=0,V=0;if(a===0)P&&(R=P.position[0],V=P.position[1]);else{for(var D=0,A=0;A<r.length;A++)r[A]&&(R+=r[A].position[0],V+=r[A].position[1],D++);R/=D,V/=D}a<2&&(i.buttons=0,i.mods=b,i.active=a,i.x=2*R/l-1,i.y=1-2*V/c,i.x0=2*_/l-1,i.y0=1-2*f/c,i.dx=0,i.dy=0,i.dz=0,i.zoomx=1,i.zoomy=1,i.theta=0,i.dtheta=0,i.originalEvent=C,e.emit(a===0?"touchend":"pinchend",i)),a===0&&(_=f=null)}var be=!1;function fe(){be||(be=!0,g.enabled=!0,t.addEventListener("wheel",x,!1),t.addEventListener("mousedown",S,!1),window.addEventListener("mousemove",$,!1),window.addEventListener("mouseup",y,!1),t.addEventListener("touchstart",ke,!1),window.addEventListener("touchmove",je,!1),window.addEventListener("touchend",he,!1),window.addEventListener("touchcancel",he,!1))}function J(){be&&(be=!1,g.enabled=!1,t.removeEventListener("wheel",x,!1),t.removeEventListener("mousedown",S,!1),window.removeEventListener("mousemove",$,!1),window.removeEventListener("mouseup",y,!1),t.removeEventListener("touchstart",ke,!1),window.removeEventListener("touchmove",je,!1),window.removeEventListener("touchend",he,!1),window.removeEventListener("touchcancel",he,!1))}return fe(),e.enable=fe,e.disable=J,e}const Lt=xo(Gi);function Lo(){return new Worker(new URL("worker-794281d5.js",import.meta.url).href,{type:"module"})}var Zi="Expected a function";function Vn(t,e,n){var s=!0,o=!0;if(typeof t!="function")throw new TypeError(Zi);return _r(n)&&(s="leading"in n?!!n.leading:s,o="trailing"in n?!!n.trailing:o),$o(t,e,{leading:s,maxWait:e,trailing:o})}var Ss=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var s=0,o=e.length,r;s<o;s++)(r||!(s in e))&&(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))},Yi=function(){function t(e,n,s){this.name=e,this.version=n,this.os=s,this.type="browser"}return t}(),Ji=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Qi=function(){function t(e,n,s,o){this.name=e,this.version=n,this.os=s,this.bot=o,this.type="bot-device"}return t}(),ea=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),ta=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),na=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,sa=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Cs=3,oa=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",na]],As=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function ra(t){return t?ks(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ta:typeof navigator<"u"?ks(navigator.userAgent):la()}function ia(t){return t!==""&&oa.reduce(function(e,n){var s=n[0],o=n[1];if(e)return e;var r=o.exec(t);return!!r&&[s,r]},!1)}function ks(t){var e=ia(t);if(!e)return null;var n=e[0],s=e[1];if(n==="searchbot")return new ea;var o=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);o?o.length<Cs&&(o=Ss(Ss([],o,!0),ca(Cs-o.length),!0)):o=[];var r=o.join("."),a=aa(t),i=sa.exec(t);return i&&i[1]?new Qi(n,r,a,i[1]):new Yi(n,r,a)}function aa(t){for(var e=0,n=As.length;e<n;e++){var s=As[e],o=s[0],r=s[1],a=r.exec(t);if(a)return o}return null}function la(){var t=typeof process<"u"&&process.version;return t?new Ji(process.version.slice(1)):null}function ca(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}const Ns=ra(navigator.userAgent),Yn=Ns?.name!=="safari"&&Ns?.os!=="iOS";Yn?console.debug("Using workers"):console.warn("Not using workers due to an awful memory leak that makes WebKit crash if you use workers");const jn=N.infinite(t=>Yn?_o(new Lo):Er),ua=N.infinite(t=>Yn?_o(new Lo):Pr),Y=N.infinite(t=>Sr);var E=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},v=globalThis&&globalThis.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},_e,Ie,ee,Ge,rt,ne,se,oe,re,ie,ae,le,ce,Te,qe,Ee,Ot,Pe;const da=function(t){var e=131,n=137,s=0;t+="x";var o=Math.floor(9007199254740991/n);for(let r=0;r<t.length;r++)s>o&&(s=Math.floor(s/n)),s=s*e+t.charCodeAt(r);return s},w="0123456789abcdef".split(""),ha=[-2147483648,8388608,32768,128],Q=[24,16,8,0],Ct=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],T=[];class fa{constructor(e=!1,n=!1){_e.set(this,void 0),Ie.set(this,void 0),ee.set(this,void 0),Ge.set(this,void 0),rt.set(this,void 0),ne.set(this,void 0),se.set(this,void 0),oe.set(this,void 0),re.set(this,void 0),ie.set(this,void 0),ae.set(this,void 0),le.set(this,void 0),ce.set(this,void 0),Te.set(this,void 0),qe.set(this,void 0),Ee.set(this,void 0),Ot.set(this,0),Pe.set(this,void 0),this.init(e,n)}init(e,n){n?(T[0]=T[16]=T[1]=T[2]=T[3]=T[4]=T[5]=T[6]=T[7]=T[8]=T[9]=T[10]=T[11]=T[12]=T[13]=T[14]=T[15]=0,E(this,Ie,T)):E(this,Ie,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e?(E(this,ne,3238371032),E(this,se,914150663),E(this,oe,812702999),E(this,re,4144912697),E(this,ie,4290775857),E(this,ae,1750603025),E(this,le,1694076839),E(this,ce,3204075428)):(E(this,ne,1779033703),E(this,se,3144134277),E(this,oe,1013904242),E(this,re,2773480762),E(this,ie,1359893119),E(this,ae,2600822924),E(this,le,528734635),E(this,ce,1541459225)),E(this,_e,E(this,Pe,E(this,ee,E(this,qe,0)))),E(this,Ge,E(this,Te,!1)),E(this,rt,!0),E(this,Ee,e)}update(e){if(v(this,Ge))return this;let n;e instanceof ArrayBuffer?n=new Uint8Array(e):n=e;let s=0;const o=n.length,r=v(this,Ie);for(;s<o;){let a;if(v(this,Te)&&(E(this,Te,!1),r[0]=v(this,_e),r[16]=r[1]=r[2]=r[3]=r[4]=r[5]=r[6]=r[7]=r[8]=r[9]=r[10]=r[11]=r[12]=r[13]=r[14]=r[15]=0),typeof n!="string")for(a=v(this,Pe);s<o&&a<64;++s)r[a>>2]|=n[s]<<Q[a++&3];else for(a=v(this,Pe);s<o&&a<64;++s){let i=n.charCodeAt(s);i<128?r[a>>2]|=i<<Q[a++&3]:i<2048?(r[a>>2]|=(192|i>>6)<<Q[a++&3],r[a>>2]|=(128|i&63)<<Q[a++&3]):i<55296||i>=57344?(r[a>>2]|=(224|i>>12)<<Q[a++&3],r[a>>2]|=(128|i>>6&63)<<Q[a++&3],r[a>>2]|=(128|i&63)<<Q[a++&3]):(i=65536+((i&1023)<<10|n.charCodeAt(++s)&1023),r[a>>2]|=(240|i>>18)<<Q[a++&3],r[a>>2]|=(128|i>>12&63)<<Q[a++&3],r[a>>2]|=(128|i>>6&63)<<Q[a++&3],r[a>>2]|=(128|i&63)<<Q[a++&3])}E(this,Ot,a),E(this,ee,v(this,ee)+(a-v(this,Pe))),a>=64?(E(this,_e,r[16]),E(this,Pe,a-64),this.hash(),E(this,Te,!0)):E(this,Pe,a)}return v(this,ee)>4294967295&&(E(this,qe,v(this,qe)+(v(this,ee)/4294967296<<0)),E(this,ee,v(this,ee)%4294967296)),this}finalize(){if(v(this,Ge))return;E(this,Ge,!0);const e=v(this,Ie),n=v(this,Ot);e[16]=v(this,_e),e[n>>2]|=ha[n&3],E(this,_e,e[16]),n>=56&&(v(this,Te)||this.hash(),e[0]=v(this,_e),e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=v(this,qe)<<3|v(this,ee)>>>29,e[15]=v(this,ee)<<3,this.hash()}hash(){let e=v(this,ne),n=v(this,se),s=v(this,oe),o=v(this,re),r=v(this,ie),a=v(this,ae),i=v(this,le),l=v(this,ce);const c=v(this,Ie);let d,u,p,h,b,g,x,_,f,m;for(let y=16;y<64;++y)h=c[y-15],d=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=c[y-2],u=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,c[y]=c[y-16]+d+c[y-7]+u<<0;m=n&s;for(let y=0;y<64;y+=4)v(this,rt)?(v(this,Ee)?(x=300032,h=c[0]-1413257819,l=h-150054599<<0,o=h+24177077<<0):(x=704751109,h=c[0]-210244248,l=h-1521486534<<0,o=h+143694565<<0),E(this,rt,!1)):(d=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),u=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),x=e&n,p=x^e&s^m,g=r&a^~r&i,h=l+u+g+Ct[y]+c[y],b=d+p,l=o+h<<0,o=h+b<<0),d=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),u=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),_=o&e,p=_^o&n^x,g=l&r^~l&a,h=i+u+g+Ct[y+1]+c[y+1],b=d+p,i=s+h<<0,s=h+b<<0,d=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),u=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),f=s&o,p=f^s&e^_,g=i&l^~i&r,h=a+u+g+Ct[y+2]+c[y+2],b=d+p,a=n+h<<0,n=h+b<<0,d=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),u=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),m=n&s,p=m^n&o^f,g=a&i^~a&l,h=r+u+g+Ct[y+3]+c[y+3],b=d+p,r=e+h<<0,e=h+b<<0;E(this,ne,v(this,ne)+e<<0),E(this,se,v(this,se)+n<<0),E(this,oe,v(this,oe)+s<<0),E(this,re,v(this,re)+o<<0),E(this,ie,v(this,ie)+r<<0),E(this,ae,v(this,ae)+a<<0),E(this,le,v(this,le)+i<<0),E(this,ce,v(this,ce)+l<<0)}hex(){this.finalize();const e=v(this,ne),n=v(this,se),s=v(this,oe),o=v(this,re),r=v(this,ie),a=v(this,ae),i=v(this,le),l=v(this,ce);let c=w[e>>28&15]+w[e>>24&15]+w[e>>20&15]+w[e>>16&15]+w[e>>12&15]+w[e>>8&15]+w[e>>4&15]+w[e&15]+w[n>>28&15]+w[n>>24&15]+w[n>>20&15]+w[n>>16&15]+w[n>>12&15]+w[n>>8&15]+w[n>>4&15]+w[n&15]+w[s>>28&15]+w[s>>24&15]+w[s>>20&15]+w[s>>16&15]+w[s>>12&15]+w[s>>8&15]+w[s>>4&15]+w[s&15]+w[o>>28&15]+w[o>>24&15]+w[o>>20&15]+w[o>>16&15]+w[o>>12&15]+w[o>>8&15]+w[o>>4&15]+w[o&15]+w[r>>28&15]+w[r>>24&15]+w[r>>20&15]+w[r>>16&15]+w[r>>12&15]+w[r>>8&15]+w[r>>4&15]+w[r&15]+w[a>>28&15]+w[a>>24&15]+w[a>>20&15]+w[a>>16&15]+w[a>>12&15]+w[a>>8&15]+w[a>>4&15]+w[a&15]+w[i>>28&15]+w[i>>24&15]+w[i>>20&15]+w[i>>16&15]+w[i>>12&15]+w[i>>8&15]+w[i>>4&15]+w[i&15];return v(this,Ee)||(c+=w[l>>28&15]+w[l>>24&15]+w[l>>20&15]+w[l>>16&15]+w[l>>12&15]+w[l>>8&15]+w[l>>4&15]+w[l&15]),c}toString(){return this.hex()}digest(){this.finalize();const e=v(this,ne),n=v(this,se),s=v(this,oe),o=v(this,re),r=v(this,ie),a=v(this,ae),i=v(this,le),l=v(this,ce),c=[e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,s>>24&255,s>>16&255,s>>8&255,s&255,o>>24&255,o>>16&255,o>>8&255,o&255,r>>24&255,r>>16&255,r>>8&255,r&255,a>>24&255,a>>16&255,a>>8&255,a&255,i>>24&255,i>>16&255,i>>8&255,i&255];return v(this,Ee)||c.push(l>>24&255,l>>16&255,l>>8&255,l&255),c}array(){return this.digest()}arrayBuffer(){this.finalize();const e=new ArrayBuffer(v(this,Ee)?28:32),n=new DataView(e);return n.setUint32(0,v(this,ne)),n.setUint32(4,v(this,se)),n.setUint32(8,v(this,oe)),n.setUint32(12,v(this,re)),n.setUint32(16,v(this,ie)),n.setUint32(20,v(this,ae)),n.setUint32(24,v(this,le)),v(this,Ee)||n.setUint32(28,v(this,ce)),e}}_e=new WeakMap,Ie=new WeakMap,ee=new WeakMap,Ge=new WeakMap,rt=new WeakMap,ne=new WeakMap,se=new WeakMap,oe=new WeakMap,re=new WeakMap,ie=new WeakMap,ae=new WeakMap,le=new WeakMap,ce=new WeakMap,Te=new WeakMap,qe=new WeakMap,Ee=new WeakMap,Ot=new WeakMap,Pe=new WeakMap;function pa(t){const e=new fa;return e.update(t),parseInt(e.hex().substring(0,8),16)}const ga=function(t){var e="#";return t.forEach(function(n){n<16&&(e+=0),e+=n.toString(16)}),e},ma=function(t,e,n){t/=360;var s=n<.5?n*(1+e):n+e-n*e,o=2*n-s;return[t+1/3,t,t-1/3].map(function(r){return r<0&&r++,r>1&&r--,r<1/6?r=o+(s-o)*6*r:r<.5?r=s:r<2/3?r=o+(s-o)*6*(2/3-r):r=o,Math.round(r*255)})};class va{constructor(e={}){const[n,s]=[e.lightness,e.saturation].map(function(o){return o=o!==void 0?o:[.35,.5,.65],Array.isArray(o)?o.concat():[o]});this.L=n,this.S=s,typeof e.hue=="number"&&(e.hue={min:e.hue,max:e.hue}),typeof e.hue=="object"&&!Array.isArray(e.hue)&&(e.hue=[e.hue]),typeof e.hue>"u"&&(e.hue=[]),this.hueRanges=e.hue.map(function(o){return{min:typeof o.min>"u"?0:o.min,max:typeof o.max>"u"?360:o.max}}),this.hash=pa,typeof e.hash=="function"&&(this.hash=e.hash),e.hash==="bkdr"&&(this.hash=da)}hsl(e){var n,s,o,r=this.hash(e),a=727;if(this.hueRanges.length){const i=this.hueRanges[r%this.hueRanges.length];n=r/this.hueRanges.length%a*(i.max-i.min)/a+i.min}else n=r%359;return r=Math.ceil(r/360),s=this.S[r%this.S.length],r=Math.ceil(r/this.S.length),o=this.L[r%this.L.length],[n,s,o]}rgb(e){var n=this.hsl(e);return ma.apply(this,n)}hex(e){var n=this.rgb(e);return ga(n)}}const ba="/webscape-wanderer/assets/vibes-512px-04de93e8.png";var Rn;function At(t,e,n){return Math.min(Math.max(t||0,e),n)}function bn(t){return{r:At(t.r,0,255),g:At(t.g,0,255),b:At(t.b,0,255),a:At(t.a,0,1)}}function Dn(t){return{r:255*t.r,g:255*t.g,b:255*t.b,a:t.a}}function Fn(t){return{r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}}function Ms(t,e){e===void 0&&(e=0);var n=Math.pow(10,e);return{r:Math.round(t.r*n)/n,g:Math.round(t.g*n)/n,b:Math.round(t.b*n)/n,a:t.a}}function yn(t,e,n,s,o,r){return(1-e/n)*s+e/n*Math.round((1-t)*o+t*r)}function ya(t,e,n,s,o){o===void 0&&(o={unitInput:!1,unitOutput:!1,roundOutput:!0}),o.unitInput&&(t=Dn(t),e=Dn(e)),t=bn(t);var r=(e=bn(e)).a+t.a-e.a*t.a,a=n(t,e,s),i=bn({r:yn(t.a,e.a,r,t.r,e.r,a.r),g:yn(t.a,e.a,r,t.g,e.g,a.g),b:yn(t.a,e.a,r,t.b,e.b,a.b),a:r});return o.unitOutput?Fn(i):o.roundOutput?Ms(i):Ms(i,9)}function wa(t,e,n){return Dn(n(Fn(t),Fn(e)))}function Wn(t){return .3*t.r+.59*t.g+.11*t.b}function xa(t,e){var n=e-Wn(t);return function(s){var o=Wn(s),r=s.r,a=s.g,i=s.b,l=Math.min(r,a,i),c=Math.max(r,a,i);function d(p){return o+(p-o)*o/(o-l)}function u(p){return o+(p-o)*(1-o)/(c-o)}return l<0&&(r=d(r),a=d(a),i=d(i)),c>1&&(r=u(r),a=u(a),i=u(i)),{r,g:a,b:i}}({r:t.r+n,g:t.g+n,b:t.b+n})}function $a(t){return Math.max(t.r,t.g,t.b)-Math.min(t.r,t.g,t.b)}function _a(t,e){var n=["r","g","b"].sort(function(i,l){return t[i]-t[l]}),s=n[0],o=n[1],r=n[2],a={r:t.r,g:t.g,b:t.b};return a[r]>a[s]?(a[o]=(a[o]-a[s])*e/(a[r]-a[s]),a[r]=e):a[o]=a[r]=0,a[s]=0,a}function Ea(t,e){return xa(_a(e,$a(t)),Wn(t))}Rn=function(t,e){return ya(t,e,wa,Ea,{unitInput:!0,unitOutput:!0})};var Pa={grad:.9,turn:360,rad:360/(2*Math.PI)},me=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},L=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},X=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Oo=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},zs=function(t){return{r:X(t.r,0,255),g:X(t.g,0,255),b:X(t.b,0,255),a:X(t.a)}},wn=function(t){return{r:L(t.r),g:L(t.g),b:L(t.b),a:L(t.a,3)}},Sa=/^#([0-9a-f]{3,8})$/i,kt=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Vo=function(t){var e=t.r,n=t.g,s=t.b,o=t.a,r=Math.max(e,n,s),a=r-Math.min(e,n,s),i=a?r===e?(n-s)/a:r===n?2+(s-e)/a:4+(e-n)/a:0;return{h:60*(i<0?i+6:i),s:r?a/r*100:0,v:r/255*100,a:o}},jo=function(t){var e=t.h,n=t.s,s=t.v,o=t.a;e=e/360*6,n/=100,s/=100;var r=Math.floor(e),a=s*(1-n),i=s*(1-(e-r)*n),l=s*(1-(1-e+r)*n),c=r%6;return{r:255*[s,i,a,a,l,s][c],g:255*[l,s,s,i,a,a][c],b:255*[a,a,l,s,s,i][c],a:o}},Is=function(t){return{h:Oo(t.h),s:X(t.s,0,100),l:X(t.l,0,100),a:X(t.a)}},Ts=function(t){return{h:L(t.h),s:L(t.s),l:L(t.l),a:L(t.a,3)}},Ls=function(t){return jo((n=(e=t).s,{h:e.h,s:(n*=((s=e.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:e.a}));var e,n,s},ct=function(t){return{h:(e=Vo(t)).h,s:(o=(200-(n=e.s))*(s=e.v)/100)>0&&o<200?n*s/100/(o<=100?o:200-o)*100:0,l:o/2,a:e.a};var e,n,s,o},Ca=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Aa=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,ka=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Na=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hn={string:[[function(t){var e=Sa.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?L(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?L(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=ka.exec(t)||Na.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:zs({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=Ca.exec(t)||Aa.exec(t);if(!e)return null;var n,s,o=Is({h:(n=e[1],s=e[2],s===void 0&&(s="deg"),Number(n)*(Pa[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Ls(o)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,s=t.b,o=t.a,r=o===void 0?1:o;return me(e)&&me(n)&&me(s)?zs({r:Number(e),g:Number(n),b:Number(s),a:Number(r)}):null},"rgb"],[function(t){var e=t.h,n=t.s,s=t.l,o=t.a,r=o===void 0?1:o;if(!me(e)||!me(n)||!me(s))return null;var a=Is({h:Number(e),s:Number(n),l:Number(s),a:Number(r)});return Ls(a)},"hsl"],[function(t){var e=t.h,n=t.s,s=t.v,o=t.a,r=o===void 0?1:o;if(!me(e)||!me(n)||!me(s))return null;var a=function(i){return{h:Oo(i.h),s:X(i.s,0,100),v:X(i.v,0,100),a:X(i.a)}}({h:Number(e),s:Number(n),v:Number(s),a:Number(r)});return jo(a)},"hsv"]]},Os=function(t,e){for(var n=0;n<e.length;n++){var s=e[n][0](t);if(s)return[s,e[n][1]]}return[null,void 0]},Ma=function(t){return typeof t=="string"?Os(t.trim(),Hn.string):typeof t=="object"&&t!==null?Os(t,Hn.object):[null,void 0]},xn=function(t,e){var n=ct(t);return{h:n.h,s:X(n.s+100*e,0,100),l:n.l,a:n.a}},$n=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Vs=function(t,e){var n=ct(t);return{h:n.h,s:n.s,l:X(n.l+100*e,0,100),a:n.a}},Un=function(){function t(e){this.parsed=Ma(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return L($n(this.rgba),2)},t.prototype.isDark=function(){return $n(this.rgba)<.5},t.prototype.isLight=function(){return $n(this.rgba)>=.5},t.prototype.toHex=function(){return e=wn(this.rgba),n=e.r,s=e.g,o=e.b,a=(r=e.a)<1?kt(L(255*r)):"","#"+kt(n)+kt(s)+kt(o)+a;var e,n,s,o,r,a},t.prototype.toRgb=function(){return wn(this.rgba)},t.prototype.toRgbString=function(){return e=wn(this.rgba),n=e.r,s=e.g,o=e.b,(r=e.a)<1?"rgba("+n+", "+s+", "+o+", "+r+")":"rgb("+n+", "+s+", "+o+")";var e,n,s,o,r},t.prototype.toHsl=function(){return Ts(ct(this.rgba))},t.prototype.toHslString=function(){return e=Ts(ct(this.rgba)),n=e.h,s=e.s,o=e.l,(r=e.a)<1?"hsla("+n+", "+s+"%, "+o+"%, "+r+")":"hsl("+n+", "+s+"%, "+o+"%)";var e,n,s,o,r},t.prototype.toHsv=function(){return e=Vo(this.rgba),{h:L(e.h),s:L(e.s),v:L(e.v),a:L(e.a,3)};var e},t.prototype.invert=function(){return ue({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ue(xn(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ue(xn(this.rgba,-e))},t.prototype.grayscale=function(){return ue(xn(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ue(Vs(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ue(Vs(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ue({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):L(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=ct(this.rgba);return typeof e=="number"?ue({h:e,s:n.s,l:n.l,a:n.a}):L(n.h)},t.prototype.isEqual=function(e){return this.toHex()===ue(e).toHex()},t}(),ue=function(t){return t instanceof Un?t:new Un(t)},js=[],za=function(t){t.forEach(function(e){js.indexOf(e)<0&&(e(Un,Hn),js.push(e))})};function Ia(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var o in n)s[n[o]]=o;var r={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,l,c=s[this.toHex()];if(c)return c;if(a?.closest){var d=this.toRgb(),u=1/0,p="black";if(!r.length)for(var h in n)r[h]=new t(n[h]).toRgb();for(var b in n){var g=(i=d,l=r[b],Math.pow(i.r-l.r,2)+Math.pow(i.g-l.g,2)+Math.pow(i.b-l.b,2));g<u&&(u=g,p=b)}return p}},e.string.push([function(a){var i=a.toLowerCase(),l=i==="transparent"?"#0000":n[i];return l?new t(l).toRgb():null},"name"])}const Ro=({color:t})=>t,Ta=(t,e=Ce)=>{const{nodes:n,links:s}=t;return new Float32Array(n.map(Ro).flatMap(e))},Do=({size:t})=>t,La=(t,e=Ce)=>{const{nodes:n,links:s}=t;return new Float32Array(n.map(Do).map(e))},Fo=async(t,{colorMap:e=Ce,sizeMap:n=Ce,immediate:s=!1}={})=>{await W(t);const o=await Ta(await W(t),e),r=await La(await W(t),n),a=ve(t);a.setNodeProperties("colorTarget","vec4",o),a.setNodeProperties("sizeTarget","float",r),a.setNodeProperties("emphasisTarget","float",new Float32Array(r.length).fill(0)),s&&(a.setNodeProperties("colorInitial","vec4",o),a.setNodeProperties("sizeInitial","float",r),a.setNodeProperties("emphasisInitial","float",new Float32Array(r.length).fill(0)))},Rs=async(t,e,{colorMap:n=Ce,sizeMap:s=Ce,emphasis:o=0,immediate:r=!1}={})=>{const a=n(Ro(e)),i=s(Do(e)),l=ve(t);l.setNodeProperty("colorTarget",e.index,a),l.setNodeProperty("sizeTarget",e.index,i),l.setNodeProperty("emphasisTarget",e.index,o),r&&(l.setNodeProperty("colorInitial",e.index,a),l.setNodeProperty("sizeInitial",e.index,i),l.setNodeProperty("emphasisInitial",e.index,o))},Oa={colorMap:t=>{const e=t.slice(0,3).reduce((n,s)=>n+s,0)/3;return[...t.slice(0,3).map(n=>e),.5]},sizeMap:t=>t},Wo=async(t,e=!1)=>{try{await Fo(t,{...Oa,immediate:e})}catch(n){console.error(n)}},Va=async(t,e,n=!0)=>{if(await Qa(t).get(),e){Fs(t,e.index),Jt(t,e);const s=Cr(e.id),o=Ar(e.id),{nodesById:r,links:a}=await W(t),i=({sizeMap:l=Ce,emphasis:c=1,colorMap:d=Ce})=>(u,p)=>{p(["upstream","downstream"]).then(({upstream:h,downstream:b})=>{const g=h?.value||b?.value,x=r[g];Rs(t,x,{sizeMap:l,emphasis:c,colorMap:d})})};Wo(t).then(()=>{jn(t).doQuery(s,Wt(i({colorMap:l=>{const c={r:l[0],g:l[1],b:l[2],a:l[3]},d={r:57/255,g:179/255,b:83/255,a:.8},u=Rn(c,d);return[u.r,u.g,u.b,u.a]}}))),Rs(t,e,{sizeMap:l=>l*1.5,emphasis:1}),jn(t).doQuery(o,Wt(i({colorMap:l=>{const c={r:l[0],g:l[1],b:l[2],a:l[3]},d={r:0,g:102/255,b:209/255,a:.8},u=Rn(c,d);return[u.r,u.g,u.b,u.a]}})))})}else Fo(t),Fs(t,-1)},ja=async t=>{const e=await W(t),{nodesByNavId:n}=e,o=Z(t).focus,r=n[o];if(r){const a=Jt(t,r);sr(t,a,!1)}},Ds=async t=>{const e=await W(t),{nodesByNavId:n}=e,s=Z(t),o=s.focus,r=n[o];if(r){const a=Jt(t,r);sr(t,a,!0),to(t,s.focusedZoom||500)}else to(t,s.unfocusedZoom||1500)};window.initializeSelectionVisuals=Wo;const ht=t=>te(t,"selectedIndex",()=>-1).get(),Fs=(t,e)=>{te(t,"selectedIndex").set(e)},Ra=async t=>{const e=ht(t),{nodes:n}=await W(t);return n[e]};za([Ia]);const Ho=t=>{const e=Z(t),n=ue(getComputedStyle(e).getPropertyValue("--selected-color")).toRgb();return[n.r/255,n.g/255,n.b/255,1]},Ws={globalScale:1,nodeScale:1,edgeFog:1,nodeFog:1,edgeScale:1,edgeOvershoot:1.25,edgeFrequency:2,edgePulseSpeed:1,edgeWaveSpeed:1,focus:-1,selected:-1,defaultFogVisibility:.3,defaultFogBoundaryClipZ:700,focusedZoom:100,unfocusedZoom:300,zoomBoundary:150,nodeShape:"box"},Da=t=>Object.keys(Z(t).constructor.properties),Uo=N.infinite(t=>{const e=Z(t);return Object.fromEntries(Da(t).map(n=>[n,e[n]]))}),yt=N.infinite(t=>{const e={mousePosition:j(new Ht(...or(t))),selectedIndex:j(-1),selectedColor:j(new Eo(...Ho(t))),hoveringIndex:j(en(t)),viewport:j(new Ht(0,0)),devicePixelRatio:j(window.devicePixelRatio),time:j(performance.now()/1e3)},n=Uo(t);return Object.entries(n).forEach(([s,o])=>{e[s]=j(o)}),console.debug("initialized uniforms",e),e}),Hs=new Ht,Fa=t=>{const{renderer:e}=Ae(t);e.getSize(Hs);let n=yt(t);n.mousePosition.value=new Ht(...or(t)),n.selectedIndex.value=ht(t),n.selectedColor.value=new Eo(...Ho(t)),n.hoveringIndex.value=en(t),n.time.value=performance.now()/1e3,n.viewport.value=Hs.toArray();const s=Uo(t);Object.entries(s).forEach(([o,r])=>{n[o].value=r})},Vt=(t,e,n)=>{const s=Po(t.div(n),-.5,.5),o=de(at(de(at(s.mul(2),2)),-1));return at(kr(o),e)},Bn=z(.15),Us=(t,{nodePosition:e,scale:n})=>{const{globalProjection:s,globalView:o,zoomedProjection:r,zoomedView:a,fixedProjection:i,fixedView:l,distance:c,center:d,rotationCenter:u}=Yt(t),{globalScale:p,nodeScale:h}=yt(t),b=s.mul(o).mul(B(e,z(1))),g=b.xyz.div(b.w),x=Nr.mul(n).mul(p.value).mul(h.value),_=i.mul(l.mul(B(x,z(1)))),f=_.xyz.div(_.w),m=r.mul(a.mul(B(x,z(1)))),y=m.xyz.div(m.w),S=M(y,f,z(.5)),$=It(S.x.add(g.x),S.y.add(g.y),g.z.add(S.z.sub(z(.99)).mul(z(.1)))),k=B($.mul(b.w),b.w);return{globalNDC:g,globalClipPosition:b,orthoFixedClipPosition:_,orthoZoomedClipPosition:m,orthographicClipPosition:k}},Wa=({positionClipZ:t,fogBoundaryClipZ:e,distance:n})=>{const s=z(1).sub(Vt(t,z(1),e));return M(s,z(0),Ut(z(400),z(800),n))},Ha=(t,e)=>{const n=t.r.add(t.g).add(t.b).div(3);return M(t,n.toVec3(),e)},Ua=t=>{const e=t.add(1).bitAnd(255).toFloat().div(255),n=t.add(1).bitAnd(65280).shiftRight(8).toFloat().div(255),s=t.add(1).bitAnd(16711680).shiftRight(16).toFloat().div(255);return B(e,n,s,1)},Ba=t=>{const e=Gt,{fixedProjection:n,fixedView:s,distance:o}=Yt(t),{selectedIndex:r,selectedColor:a,defaultFogBoundaryClipZ:i,nodeFog:l}=yt(t),c=ve(t),d=c.getNodeProperties("positionInitial"),u=c.getNodeProperties("positionTarget"),p=d.element(e).sub(u.element(e).mul(0));c.getNodeProperties("colorInitial");const h=c.getNodeProperties("colorTarget");h.element(e).sub(h.element(e).mul(0));const b=c.getNodeProperties("sizeInitial"),g=c.getNodeProperties("sizeTarget"),x=b.element(e).sub(g.element(e).mul(0)),_=c.getNodeProperties("emphasisInitial"),f=c.getNodeProperties("emphasisTarget"),m=_.element(e).sub(f.element(e).mul(0)),S=r.greaterThan(-1).not().cond(de(m),m),$=c.getNodeProperties("colorTarget"),k=e.equal(r),ke=x.mul(Bn).mul(M(.5,1,m)),je=Bt(ke,.05),he=Us(t,{nodePosition:p,scale:ke}),be=Us(t,{nodePosition:p,scale:je});s.mul(n).mul(Mr).normalize();let fe=$.element(e);d.element(r),Ln(d.element(e));let J=ds(Wa({positionClipZ:he.globalClipPosition.z,fogBoundaryClipZ:i,distance:o}),de(k.toFloat()));J=ds(J,de(S)),J=M(0,J,l);let C=fe.w;C=M(.1,1,S);let P=fe.xyz.mul(M(1,.5,J));P=Ha(P,Bt(de(.2).mul(J),de(S))),fe=B(P,C);const A=M(fe,a,k.toFloat()),I=new zr().load(ba);return{graphNodeMaterial:new Ir({vertexNode:he.orthographicClipPosition,matcap:I,colorNode:A,transparent:!0}),graphNodePickerMaterial:new So({vertexNode:be.orthographicClipPosition,colorNode:Ua(e),depthWrite:!0})}},Bs=t=>{const e=ve(t),n=Gt,s=e.getEdgePairs("positionInitial"),o=e.getEdgePairs("positionTarget"),r=e.getEdgePairs("sizeInitial"),a=e.getEdgePairs("sizeTarget"),i=e.getEdgePairs("colorInitial"),l=e.getEdgePairs("colorTarget");e.getEdgePairs("emphasisInitial");const c=e.getEdgePairs("emphasisTarget");return{sourcePosition:s.source.element(n).add(o.source.element(n).mul(0)).toVar("srcPosition"),targetPosition:s.target.element(n).add(o.target.element(n).mul(0)).toVar("tgtPosition"),sourceColor:i.source.element(n).sub(l.source.element(n).mul(0)).toVar("srcColor"),targetColor:i.target.element(n).sub(l.target.element(n).mul(0)).toVar("tgtColor"),sourceSize:r.source.element(n).sub(a.source.element(n).mul(0)).mul(Bn).toVar("srcSize"),targetSize:r.target.element(n).sub(a.target.element(n).mul(0)).mul(Bn).toVar("tgtSize"),sourceEmphasis:c.source.element(n).x.toVar("srcEmphasis"),targetEmphasis:c.target.element(n).y.toVar("tgtEmphasis"),edgeIndices:e.getEdgeIndices().element(n).toVar("edgeIndices")}},Ga=({nodePosition:t,vertexPosition:e,edgeDirection:n,scale:s,flatness:o,globalView:r,globalProjection:a,globalScale:i,edgeScale:l})=>{const c=Co(n),d=ot(c.y.negate(),c.x).toVar("edgePerpendicular").mul(s).mul(i).mul(l).div(3),u=a.toVar("projection").mul(r.toVar("view")).mul(B(t,1)).toVar("position"),p=u.div(u.w),h=B(u.xy.add(e.y.mul(d)),u.zw),g=p.add(B(e.y.mul(d),0,0)).mul(u.w);return M(h,g,o)},qa=t=>{const{globalProjection:e,globalView:n,distance:s}=Yt(t),{selectedIndex:o,selectedColor:r,mousePosition:a,hoveringIndex:i,edgeFrequency:l,edgePulseSpeed:c,edgeWaveSpeed:d,time:u,devicePixelRatio:p,nodeDepthTexture:h,globalScale:b,edgeScale:g,edgeOvershoot:x,defaultFogBoundaryClipZ:_,edgeFog:f,selectedEdgeColor:m}=yt(t),y=Tr("segmentOffset","vec3");let{sourcePosition:S,targetPosition:$,sourceColor:k,targetColor:ke,sourceSize:je,targetSize:he,sourceEmphasis:be,targetEmphasis:fe,edgeIndices:J}=Bs(t);const P=It(y.y.mul(x),y.x,y.z).add(It(x.mul(.5),0,0)).toVar("segmentPosition"),A=P.x.toVar("isSource"),I=de(A).toVar("isTarget"),H=P.toVar("vertexOffset"),pe=S.mul(A).add($.mul(I)).toVar("nodePosition"),R=e.toVar("projection").mul(n.toVar("view")).mul(B(S,1)).toVar("sourcePositionClip"),V=e.toVar("projection").mul(n.toVar("view")).mul(B($,1)).toVar("targetPositionClip"),D=Co(V.xyz.div(V.w).sub(R.xyz.div(R.w))).xy.toVar("edgeDirection"),F=je.mul(A).add(he.mul(I)).mul(.4).toVar("size"),U=z(1).toVar("flatness"),ye=Ga({nodePosition:pe,vertexPosition:H,edgeDirection:D,scale:F,flatness:U,globalView:n,globalProjection:e,globalScale:b,edgeScale:g}).toVar("positionClip");let ge=k.mul(A).add(ke.mul(I)).toVar("color");const we=J.x,xe=J.y,Re=hs(o,we).toFloat(),De=hs(o,xe).toFloat(),xt=Re.mul(A).add(De.mul(I));Bt(Re,De).toFloat();const nn=z(Lr(o,-1)).toVar("isAnySelected"),Fe=Bt(be,fe).toVar("emphasis"),$t=xt;let sn=ge.xyz,Ne=z(1);Ne=Ne.mul(M(.4,1,M(1,Fe,nn))),Ne=Ne.mul(M(1,M(.3,1,Fe),Ut(400,1200,s))),ge=B(sn,Ne);const We=Ka(ye.z,_.div(2)).toVar("fog"),on=q(ge);q(We),q(Fe),q(F),q(I);const hr=q(R.xy.div(R.w).toVar("sourcePosition2DNDC")),fr=V.xy.div(V.w).toVar("targetPosition2DNDC"),rn=q(hr.reflect(ot(0,1)).add(ot(1,1)).mul(.5).mul(fs)),pr=q(fr.reflect(ot(0,1)).add(ot(1,1)).mul(.5).mul(fs)),as=q(Ln($.sub(S))),_t=q(Ln(pr.sub(rn)));q(H.y);const ls=q(P.y),gr=()=>{const cs=ps(rn,gs).div(_t),us=I;let Et=on,$e=Et.w.mul(M(Vt(ls,z(2).mul(de(We)),1),1,We));Bs(t);const mr=_t.mul(l).mul(.1),vr=z(4).mul(d).div(_t),br=_n(cs.sub(u.mul(vr)),mr),yr=as.div(4).mul(l),wr=z(20).div(as).mul(c),an=Po(at(_n(cs.sub(u.mul(wr)),1),_t.div(2)),0,1);let Pt=Et.xyz;Pt=M(Et.xyz,It(1,1,0),M(0,an,.1)),$e=Et.w.mul(M(1,br,de(an))),$e=$e.mul(Vt(ls,1,an.mul(M(.2,.4,Fe)).mul(_n(us,yr)).add(.6))),$e=$e.mul(M(.4,1,$t)),$e=$e.mul(Vt(us.sub(.5),2,x));const xr=ps(gs,rn),$r=z(100);return Ut($r,z(0),xr),Pt=M(Pt,r.xyz,xt),B(Pt,$e)};return new So({vertexNode:ye,colorNode:gr(),depthTest:!1,transparent:!0})},Ka=(t,e)=>Ut(0,1,t.sub(e).div(e)),_n=(t,e)=>at(Or(t.mul(e).mul(Math.PI)),2),ft=N.infinite(t=>{const{graphNodeMaterial:e,graphNodePickerMaterial:n}=Ba(t),s=new Ao,o=new dt(s,e),r=Z(t)._nodeGeometryBuffer||Bo("box");Xa(t,r,o);const a=new dt(s,n);return{mesh:o,pickerMesh:a}}),Bo=t=>{let e;try{return t=="sphere"?e=new Vr(1,32,32):t=="cone"?e=new jr(1,2,128):t=="icosohedron"?e=new Rr(1.5,0):t==="box"?e=new Dr(1,1,1):t==="torusKnot"&&(e=new Fr(1,.3,128,64,2,3)),e.computeVertexNormals(),e}catch(n){return console.warn("Error setting node geometry:",n),null}},Xa=(t,e,n)=>{n.geometry.setAttribute("position",e.attributes.position),n.geometry.setAttribute("normal",e.attributes.normal),n.geometry.setIndex(e.index),n.material.needsUpdate=!0},Go=(t,e)=>{console.debug("loading node vertex array",e);const{mesh:n,pickerMesh:s}=ft(t);n.geometry.instanceCount=e,s.geometry.instanceCount=e},Jn=N.infinite(t=>{const e=new Wr(.5,.5,1,4,4,!0),n=new Ao;return n.setAttribute("segmentOffset",e.attributes.position),n.setIndex(e.index),new dt(n,qa(t))}),Gs=async t=>{const{nodes:e,linkIndexPairs:n}=await W(t);ft.clear(),Ae.clear();const{mesh:s,pickerMesh:o}=ft(t);s.material.needsUpdate=!0,o.material.needsUpdate=!0,Go(t,e.length),Jn(t).geometry.instanceCount=n.length},Za=N.infinite(t=>{const{canvas:e}=G(t),n=new Hr({canvas:e,forceWebGL:!0});return n.setClearColor(new ko("#000000"),0),n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(window.devicePixelRatio),n}),Ae=N.infinite(t=>{const e=new ln,n=new ln,s=new ln,o=new Ur(75,window.innerWidth/window.innerHeight,.5,1e3);o.position.z=10;const r=new Br(16777215,2);e.add(r);const a=Za(t),i=Jn(t);e.add(i);const l=ft(t).mesh;e.add(l);const c=ft(t).pickerMesh;return s.add(c),{scene:e,depthScene:n,pickerScene:s,camera:o,renderer:a,nodeVisualizerMesh:l,edgeVisualizerMesh:i,nodePickerMesh:c}}),Qn=N.infinite(t=>{const{canvas:e}=G(t);return new No(e.width,e.height,{stencilBuffer:!1})}),Ya=N.infinite(t=>{const{canvas:e}=G(t);return new No(e.width,e.height,{depthTexture:new Gr(e.width,e.height),depthBuffer:!0,stencilBuffer:!1})}),qo=new va({saturation:.7,lightness:.6}),Ko=t=>t.replace(/^(https?:\/\/)?(www\.)?([a-z0-9-]+\.)+[a-z0-9-]+/i,"").replace(/\/$/,"").replace(/^\//,"").replace(/[^A-Za-z0-9\.]/gi,"-").replace(/-+/g,"-").replace(/^package-/,"").replace(/-v-/,"-"),ve=N.infinite(t=>{const e=qr(t);return window.bufferState=e,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"emphasis",type:"float"},{name:"size",type:"float"}].forEach(({name:s,type:o})=>{const r=new Float32Array(0),a=new Float32Array(0);e.setNodeProperties(`${s}Initial`,o,r),e.setNodeProperties(`${s}Target`,o,a)}),e}),Ja=async(t,e,n=!0)=>{const{set:s}=Zt(t,"graphData");s(e),(await Yo(t,e)).setData(e);const{nodes:r,linkIndexPairs:a}=e,i=ve(t),l=n?i.getNodeCount():0;n&&i.getEdgeCount(),i.setNodeCount(r.length),i.setEdges(a);const c=40,d=()=>[Math.random()*c-c/2,Math.random()*c-c/2,Math.random()*c-c/2],u=new Float32Array(r.length*3);if(n){const g=i.getNodeProperties("positionTarget","vec3").value.array;u.set(g.subarray(0,l*3));for(let x=l;x<r.length;x++){const _=d();u.set(_,x*3)}}else for(let g=0;g<r.length;g++){const x=d();u.set(x,g*3)}i.setNodeProperties("positionInitial","vec3",u),i.setNodeProperties("positionTarget","vec3",u);const p=new Float32Array(r.length*4);if(n){const g=i.getNodeProperties("colorTarget","vec4").value.array;p.set(g.subarray(0,l*4));for(let x=l;x<r.length;x++)p.set(r[x].color,x*4)}else for(let g=0;g<r.length;g++)p.set(r[g].color,g*4);i.setNodeProperties("colorInitial","vec4",p),i.setNodeProperties("colorTarget","vec4",p);const h=new Float32Array(r.length);if(n){const g=i.getNodeProperties("sizeTarget","float").value.array;h.set(g.subarray(0,l));for(let x=l;x<r.length;x++)h[x]=r[x].size}else for(let g=0;g<r.length;g++)h[g]=r[g].size;i.setNodeProperties("sizeInitial","float",h),i.setNodeProperties("sizeTarget","float",h);const b=new Float32Array(r.length);if(n){const g=i.getNodeProperties("emphasisTarget","float").value.array;b.set(g.subarray(0,l)),b.fill(0,l)}else b.fill(0);i.setNodeProperties("emphasisTarget","float",b),Go(t,r.length),Jn(t).geometry.instanceCount=a.length,el(t,e)},W=async t=>await Zt(t,"graphData").get(),Xo=t=>({index:t,id:`node://${t}`,size:1,color:[...qo.rgb(String(t)).map(e=>e/255),1],navId:Ko(`node-${t}`)}),Zo=t=>()=>{const e=Math.floor(Math.random()*t.length),n=Math.floor(Math.random()*t.length);return{sourceIndex:e,targetIndex:n,source:t[e],target:t[n]}},lc=(t,e,n=0)=>{const s=[...Array(t).keys()].map(l=>l+n).map(Xo),o=[...Array(e).keys()].map(Zo(s)),r=o.map(({sourceIndex:l,targetIndex:c})=>[l,c]),a=qt(s.map(l=>[l.navId,l])),i=qt(s.map(l=>[l.id,l]));return{nodes:s,links:o,linkIndexPairs:r,nodesByNavId:a,nodesById:i}},cc=(t,{nodes:e,nodesByNavId:n,nodesById:s})=>{const o=e.length,r=[...Array(t).keys()].map(a=>a+o).map(Xo);e.push(...r),r.forEach(a=>{n[a.navId]=a,s[a.id]=a})},uc=(t,{nodes:e,links:n,linkIndexPairs:s})=>{const o=[...Array(t).keys()].map(Zo(e));n.push(...o),s.push(...o.map(({sourceIndex:r,targetIndex:a})=>[r,a]))},dc=({nodes:t,links:e})=>{const n=t.map(({id:i},l)=>({index:l,id:`node://${i}`,size:1,color:[...qo.rgb(String(i)).map(c=>c/255),1],navId:Ko(`node-${i}`)})),s=e.map(i=>{const l=n.findIndex(d=>d.id===`node://${i.source}`),c=n.findIndex(d=>d.id===`node://${i.target}`);return{sourceIndex:l,targetIndex:c,source:n[l],target:n[c]}}),o=s.map(({sourceIndex:i,targetIndex:l})=>[i,l]),r=qt(n.map(i=>[i.navId,i])),a=qt(n.map(i=>[i.id,i]));return{nodes:n,links:s,linkIndexPairs:o,nodesByNavId:r,nodesById:a}},Qa=t=>Zt(t,"graphDbPrepared"),el=async(t,e)=>{const{set:n}=Zt(t,"graphDbPrepared"),s=await jn(t).buildGraph(e);return n(!0),s};let Nt;const Yo=N.infinite(async(t,e)=>{const n=(await ua(t)).D3ForceLayout;return Nt=await new n(e),Nt.start(),Nt},{onExpire:()=>{Nt.stop()},transformArgs:([t,e])=>[t]}),qs=t=>ve(t).getNodeProperties("positionTarget","vec3").value.array,tl=async t=>{const e=await W(t);(await Yo(t,e)).getPositions(Wt(s=>{s.length>0&&ve(t).setNodeProperties("positionTarget","vec3",s)}))},Jt=(t,e)=>{const n=qs(t)?qs(t):[],s=e.index;return[n[s*3],n[s*3+1],n[s*3+2]]};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var En;const Kt=window,Je=Kt.trustedTypes,Ks=Je?Je.createPolicy("lit-html",{createHTML:t=>t}):void 0,Gn="$lit$",Se=`lit$${(Math.random()+"").slice(9)}$`,Jo="?"+Se,nl=`<${Jo}>`,Ve=document,pt=()=>Ve.createComment(""),gt=t=>t===null||typeof t!="object"&&typeof t!="function",Qo=Array.isArray,sl=t=>Qo(t)||typeof t?.[Symbol.iterator]=="function",Pn=`[ 	
\f\r]`,nt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Xs=/-->/g,Zs=/>/g,Me=RegExp(`>|${Pn}(?:([^\\s"'>=/]+)(${Pn}*=${Pn}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),Ys=/'/g,Js=/"/g,er=/^(?:script|style|textarea|title)$/i,ol=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),rl=ol(1),Qe=Symbol.for("lit-noChange"),O=Symbol.for("lit-nothing"),Qs=new WeakMap,Le=Ve.createTreeWalker(Ve,129,null,!1);function tr(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Ks!==void 0?Ks.createHTML(e):e}const il=(t,e)=>{const n=t.length-1,s=[];let o,r=e===2?"<svg>":"",a=nt;for(let i=0;i<n;i++){const l=t[i];let c,d,u=-1,p=0;for(;p<l.length&&(a.lastIndex=p,d=a.exec(l),d!==null);)p=a.lastIndex,a===nt?d[1]==="!--"?a=Xs:d[1]!==void 0?a=Zs:d[2]!==void 0?(er.test(d[2])&&(o=RegExp("</"+d[2],"g")),a=Me):d[3]!==void 0&&(a=Me):a===Me?d[0]===">"?(a=o??nt,u=-1):d[1]===void 0?u=-2:(u=a.lastIndex-d[2].length,c=d[1],a=d[3]===void 0?Me:d[3]==='"'?Js:Ys):a===Js||a===Ys?a=Me:a===Xs||a===Zs?a=nt:(a=Me,o=void 0);const h=a===Me&&t[i+1].startsWith("/>")?" ":"";r+=a===nt?l+nl:u>=0?(s.push(c),l.slice(0,u)+Gn+l.slice(u)+Se+h):l+Se+(u===-2?(s.push(void 0),i):h)}return[tr(t,r+(t[n]||"<?>")+(e===2?"</svg>":"")),s]};class mt{constructor({strings:e,_$litType$:n},s){let o;this.parts=[];let r=0,a=0;const i=e.length-1,l=this.parts,[c,d]=il(e,n);if(this.el=mt.createElement(c,s),Le.currentNode=this.el.content,n===2){const u=this.el.content,p=u.firstChild;p.remove(),u.append(...p.childNodes)}for(;(o=Le.nextNode())!==null&&l.length<i;){if(o.nodeType===1){if(o.hasAttributes()){const u=[];for(const p of o.getAttributeNames())if(p.endsWith(Gn)||p.startsWith(Se)){const h=d[a++];if(u.push(p),h!==void 0){const b=o.getAttribute(h.toLowerCase()+Gn).split(Se),g=/([.?@])?(.*)/.exec(h);l.push({type:1,index:r,name:g[2],strings:b,ctor:g[1]==="."?ll:g[1]==="?"?ul:g[1]==="@"?dl:Qt})}else l.push({type:6,index:r})}for(const p of u)o.removeAttribute(p)}if(er.test(o.tagName)){const u=o.textContent.split(Se),p=u.length-1;if(p>0){o.textContent=Je?Je.emptyScript:"";for(let h=0;h<p;h++)o.append(u[h],pt()),Le.nextNode(),l.push({type:2,index:++r});o.append(u[p],pt())}}}else if(o.nodeType===8)if(o.data===Jo)l.push({type:2,index:r});else{let u=-1;for(;(u=o.data.indexOf(Se,u+1))!==-1;)l.push({type:7,index:r}),u+=Se.length-1}r++}}static createElement(e,n){const s=Ve.createElement("template");return s.innerHTML=e,s}}function et(t,e,n=t,s){var o,r,a,i;if(e===Qe)return e;let l=s!==void 0?(o=n._$Co)===null||o===void 0?void 0:o[s]:n._$Cl;const c=gt(e)?void 0:e._$litDirective$;return l?.constructor!==c&&((r=l?._$AO)===null||r===void 0||r.call(l,!1),c===void 0?l=void 0:(l=new c(t),l._$AT(t,n,s)),s!==void 0?((a=(i=n)._$Co)!==null&&a!==void 0?a:i._$Co=[])[s]=l:n._$Cl=l),l!==void 0&&(e=et(t,l._$AS(t,e.values),l,s)),e}class al{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var n;const{el:{content:s},parts:o}=this._$AD,r=((n=e?.creationScope)!==null&&n!==void 0?n:Ve).importNode(s,!0);Le.currentNode=r;let a=Le.nextNode(),i=0,l=0,c=o[0];for(;c!==void 0;){if(i===c.index){let d;c.type===2?d=new wt(a,a.nextSibling,this,e):c.type===1?d=new c.ctor(a,c.name,c.strings,this,e):c.type===6&&(d=new hl(a,this,e)),this._$AV.push(d),c=o[++l]}i!==c?.index&&(a=Le.nextNode(),i++)}return Le.currentNode=Ve,r}v(e){let n=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,n),n+=s.strings.length-2):s._$AI(e[n])),n++}}class wt{constructor(e,n,s,o){var r;this.type=2,this._$AH=O,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=s,this.options=o,this._$Cp=(r=o?.isConnected)===null||r===void 0||r}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=et(this,e,n),gt(e)?e===O||e==null||e===""?(this._$AH!==O&&this._$AR(),this._$AH=O):e!==this._$AH&&e!==Qe&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):sl(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==O&&gt(this._$AH)?this._$AA.nextSibling.data=e:this.$(Ve.createTextNode(e)),this._$AH=e}g(e){var n;const{values:s,_$litType$:o}=e,r=typeof o=="number"?this._$AC(e):(o.el===void 0&&(o.el=mt.createElement(tr(o.h,o.h[0]),this.options)),o);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===r)this._$AH.v(s);else{const a=new al(r,this),i=a.u(this.options);a.v(s),this.$(i),this._$AH=a}}_$AC(e){let n=Qs.get(e.strings);return n===void 0&&Qs.set(e.strings,n=new mt(e)),n}T(e){Qo(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let s,o=0;for(const r of e)o===n.length?n.push(s=new wt(this.k(pt()),this.k(pt()),this,this.options)):s=n[o],s._$AI(r),o++;o<n.length&&(this._$AR(s&&s._$AB.nextSibling,o),n.length=o)}_$AR(e=this._$AA.nextSibling,n){var s;for((s=this._$AP)===null||s===void 0||s.call(this,!1,!0,n);e&&e!==this._$AB;){const o=e.nextSibling;e.remove(),e=o}}setConnected(e){var n;this._$AM===void 0&&(this._$Cp=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class Qt{constructor(e,n,s,o,r){this.type=1,this._$AH=O,this._$AN=void 0,this.element=e,this.name=n,this._$AM=o,this.options=r,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=O}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,s,o){const r=this.strings;let a=!1;if(r===void 0)e=et(this,e,n,0),a=!gt(e)||e!==this._$AH&&e!==Qe,a&&(this._$AH=e);else{const i=e;let l,c;for(e=r[0],l=0;l<r.length-1;l++)c=et(this,i[s+l],n,l),c===Qe&&(c=this._$AH[l]),a||(a=!gt(c)||c!==this._$AH[l]),c===O?e=O:e!==O&&(e+=(c??"")+r[l+1]),this._$AH[l]=c}a&&!o&&this.j(e)}j(e){e===O?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ll extends Qt{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===O?void 0:e}}const cl=Je?Je.emptyScript:"";class ul extends Qt{constructor(){super(...arguments),this.type=4}j(e){e&&e!==O?this.element.setAttribute(this.name,cl):this.element.removeAttribute(this.name)}}class dl extends Qt{constructor(e,n,s,o,r){super(e,n,s,o,r),this.type=5}_$AI(e,n=this){var s;if((e=(s=et(this,e,n,0))!==null&&s!==void 0?s:O)===Qe)return;const o=this._$AH,r=e===O&&o!==O||e.capture!==o.capture||e.once!==o.once||e.passive!==o.passive,a=e!==O&&(o===O||r);r&&this.element.removeEventListener(this.name,this,o),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,s;typeof this._$AH=="function"?this._$AH.call((s=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&s!==void 0?s:this.element,e):this._$AH.handleEvent(e)}}class hl{constructor(e,n,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){et(this,e)}}const eo=Kt.litHtmlPolyfillSupport;eo?.(mt,wt),((En=Kt.litHtmlVersions)!==null&&En!==void 0?En:Kt.litHtmlVersions=[]).push("2.8.0");const nr=(t,e,n)=>{var s,o;const r=(s=n?.renderBefore)!==null&&s!==void 0?s:e;let a=r._$litPart$;if(a===void 0){const i=(o=n?.renderBefore)!==null&&o!==void 0?o:null;r._$litPart$=a=new wt(e.insertBefore(pt(),i),i,void 0,n??{})}return a._$AI(t),a},fl=(t,e)=>{const{canvas:n}=G(t),s=n.getBoundingClientRect(),o=(e.clientX-s.left)/s.width,r=(e.clientY-s.top)/s.height;return{x:o*2-1,y:-(r*2-1)}},jt=(t,...e)=>Y(t).getGlobalCamera(t,...e),pl=(t,...e)=>Y(t).updateCameras(t,...e),gl=(t,...e)=>Y(t).getGlobalCameraParams(t,...e),sr=(t,...e)=>Y(t).setCameraCenter(t,...e),to=(t,...e)=>Y(t).setCameraDistance(t,...e),no=(t,...e)=>Y(t).zoomGlobalCamera(t,...e),so=(t,...e)=>Y(t).panGlobalCamera(t,...e),oo=(t,...e)=>Y(t).startZooming(t,...e),ml=(t,...e)=>Y(t).stopZooming(t,...e),ro=(t,...e)=>Y(t).startPanning(t,...e),io=(t,...e)=>Y(t).stopPanning(t,...e),vl=(t,...e)=>Y(t).computeScreenPosition(t,...e),ao=()=>window.matchMedia("(pointer:fine)").matches,lo=async t=>{const e=Z(t);ml(t);const n=ht(t),s=(await gl(t)).distance;n>-1?(e.focusedZoom=Math.min(s,e.zoomBoundary),console.debug("setting selected zoom",e.focusedZoom)):(e.unfocusedZoom=Math.max(s,e.zoomBoundary),console.debug("setting deselected zoom",e.unfocusedZoom))},vt=t=>te(t,"pointerPositionInfo",()=>({x:0,y:0,canvasX:0,canvasY:0,pickerX:0,pickerY:0})).get(),co=new Uint8Array(4).fill(0);let Sn=-1,Rt=!1,it=0,Ze=0;const Cn=()=>{it++},bl=async(t,e)=>{const{nodes:n}=await W(t),s=n[e];Z(t).dispatchEvent(new CustomEvent("tap",{detail:{tappedIndex:e,info:s}}))},or=t=>[vt(t).x,vt(t).y],yl=t=>[vt(t).pickerX,vt(t).pickerY],Dt=Kr((t,{x:e,y:n})=>{const{canvas:s}=G(t),o=vt(t);o.x=e,o.y=n,o.canvasX=(e+1)/2*s.width,o.canvasY=(n+1)/2*s.height;const r=window.devicePixelRatio||1;o.pickerX=Math.floor(o.canvasX/r),o.pickerY=Math.floor(o.canvasY/r)}),en=t=>te(t,"currentlyHoveringIndex",()=>-1).get(),wl=async t=>{const{nodes:e}=await W(t),n=en(t);return e[n]},xl=N.infinite(t=>{const e=t.context,{canvas:n}=G(e);Lt(n).on("touchmove",Dt(e)).on("mousemove",Dt(e)),Lt(n).on("mousemove",()=>{!Rt&&Sl(e)()}),Lt(n).on("touchmove",Cn).on("pinchmove",Cn).on("mousemove",Cn),n.addEventListener("pointerdown",async s=>{console.debug("pointer down");const o=async([i,l])=>{console.debug("pointer clickHandler",i,l);const c=Ze>.03||it>5;if(console.debug("was drag",c,Ze,it),Rt=!1,!c){const d=en(e);bl(e,d).catch(u=>{console.error("Error in notifyTapped:",u)})}},r=new Promise((i,l)=>{n.addEventListener("pointerup",i,{once:!0}),setTimeout(()=>l("pointer event timed out after 100ms"),200)});Rt=!0,it=0,Ze=0;const a=[r,Cl(e)];Promise.all(a).then(o).catch(i=>console.debug(i)),setTimeout(()=>{Ze>.03||it>5||es(e)()},2),Dt(e,fl(e,s))}),n.addEventListener("selected",s=>{}),n.addEventListener("hover",async s=>{const{nodes:o}=await W(e),r=s.detail.wasHoveredIndex;r>-1&&o[r];const a=s.detail.nowHoveredIndex,i=a>-1?o[a]:null;ht(e)>-1&&o[ht(e)],i?te(e,"currentlyHoveringIndex").set(i?.index!=null?i.index:-1):te(e,"currentlyHoveringIndex").set(-1)})}),Mt=Math.PI/3,$l=t=>{const{canvas:e}=G(t);e.addEventListener("wheel",n=>{const s=Math.exp(n.deltaY/e.clientHeight*2)-1,o=Math.sign(s);oo(t),no(t,0,0,o*Math.min(Math.abs(s),.06)),n.preventDefault(),lo(t)},{passive:!1}),Lt(e).on("mousemove",function(n){!n.active||n.buttons!==1||(Ze+=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2)),n.mods.shift?(ro(t),so(t,n.dx,n.dy)):n.mods.meta?jt(t).pivot(n.dx,n.dy):(jt(t).rotate(-n.dx*Mt,-n.dy*Mt),io(t)),n.originalEvent.preventDefault())}).on("touchmove",function(n){Dt(n),n.active&&(Ze+=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2)),jt(t).rotate(-n.dx*Mt,-n.dy*Mt))}).on("pinchmove",function(n){n.active&&(Rt=!0,ro(t),oo(t),no(t,0,0,1-n.zoomx),so(t,n.dx,n.dy))}).on("touchstart",n=>n.originalEvent.preventDefault()).on("pinchstart",n=>n.originalEvent.preventDefault()).on("pinchend",()=>{io(t),lo(t)})},rr=N.infinite(t=>({lastOverIndex:-1,pickerTime:0,pickerSync:null,pickerFailures:0,pickerGuardFailed:!1})),_l=t=>t[0]+t[1]*256+t[2]*256*256-1,El=t=>{const e=rr(t),n=G(t).gl,s=()=>n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return e.pickerSync?n?.clientWaitSync(e.pickerSync,0,0)===n?.CONDITION_SATISFIED?(n.deleteSync(e.pickerSync),e.pickerSync=s(),!0):!1:(e.pickerSync=s(),!1)},es=N.infinite(t=>()=>{const e=rr(t),n=El(t),{canvas:s}=G(t),o=G(t).gl;if(e.pickerFailures>10&&(e.pickerGuardFailed=!0,console.warn("picker guard failed")),!n&&!e.pickerGuardFailed)console.debug("not ready to read picker pixel yet"),e.pickerFailures+=1;else{e.pickerFailures=0;const{renderer:r}=Ae(t),a=yl(t),i=Qn(t);a[0]>=0&&a[0]<i.width&&a[1]>=0&&a[1]<i.height&&r.readRenderTargetPixelsAsync(i,...a,1,1).then(l=>{o.flush();for(let d=0;d<4;d++)co[d]=l[d];const c=_l(co);setTimeout(()=>{s.dispatchEvent(new CustomEvent("hover",{detail:{wasHoveredIndex:Sn,nowHoveredIndex:c}}))},1),c>-1&&setTimeout(()=>{s.dispatchEvent(new CustomEvent("hoveron",{detail:{wasHoveredIndex:Sn,nowHoveredIndex:c}}))},10),Sn=c})}}),Pl=t=>Vn(es(t),1e3),Sl=t=>$o(es(t),300),Cl=async t=>(console.debug("waiting for hover event"),new Promise(e=>{const n=G(t).canvas,s=o=>{console.debug("got hover event",o.detail),e(o.detail)};n.addEventListener("hover",s,{once:!0})})),ts=N.deep((t,{classes:e,htmlTemplate:n,applyScreenPositionStyle:s}={})=>{const o=Z(t);s=s||((d,u)=>{u.style.left=`${d[0]}vw`,u.style.bottom=`${d[1]}vh`});const r=document.createElement("div");r?.classList.add("cursor"),e?.forEach(d=>r?.classList.add(d)),o?.shadowRoot?.appendChild(r);const a=d=>{s(d,r)},i=d=>{const u=[(d[0]+1)/2*100,(d[1]+1)/2*100];a(u)},l=Vn(async d=>{const u=Jt(t,d),p=await vl(t,u);i(p)},1e3/10),c=Vn(async d=>{d?(await l(d),r.classList.add("focused")):r.classList.remove("focused"),d&&n&&nr(n(d),r)},50);return{element:r,alignToScreenPosition:a,alignToNDCPosition:i,alignToNode:l,highlightNode:c,destroy:()=>r.remove()}}),Al=N.infinite(t=>ts(t,{classes:["selected-cursor"]})),kl=N.infinite(t=>ts(t,{classes:["hovered-tooltip"],htmlTemplate:e=>rl`
      <div class="node-name">${e.data?.name}</div>
    `,applyScreenPositionStyle(e,n){n.style.left=`calc(min(${e[0]}vw, calc(100vw - 15em)))`,n.style.bottom=`${e[1]}vh`}})),Nl=N.infinite(t=>ts(t,{classes:["hovered-cursor"]}));var ns={exports:{}};function Ml(t,e){var n=e&&e.cache?e.cache:Vl,s=e&&e.serializer?e.serializer:Ol,o=e&&e.strategy?e.strategy:Il;return o(t,{cache:n,serializer:s})}function zl(t){return t==null||typeof t=="number"||typeof t=="boolean"}function ir(t,e,n,s){var o=zl(s)?s:n(s),r=e.get(o);return typeof r>"u"&&(r=t.call(this,s),e.set(o,r)),r}function ar(t,e,n){var s=Array.prototype.slice.call(arguments,3),o=n(s),r=e.get(o);return typeof r>"u"&&(r=t.apply(this,s),e.set(o,r)),r}function ss(t,e,n,s,o){return n.bind(e,t,s,o)}function Il(t,e){var n=t.length===1?ir:ar;return ss(t,this,n,e.cache.create(),e.serializer)}function Tl(t,e){var n=ar;return ss(t,this,n,e.cache.create(),e.serializer)}function Ll(t,e){var n=ir;return ss(t,this,n,e.cache.create(),e.serializer)}function Ol(){return JSON.stringify(arguments)}function tn(){this.cache=Object.create(null)}tn.prototype.has=function(t){return t in this.cache};tn.prototype.get=function(t){return this.cache[t]};tn.prototype.set=function(t,e){this.cache[t]=e};var Vl={create:function(){return new tn}};ns.exports=Ml;ns.exports.strategies={variadic:Tl,monadic:Ll};var jl=ns.exports;const Rl=xo(jl),Dl=Rl((t,e)=>{const n=Xr(()=>{for(const{current:o,target:r}of e){let a=o.element(Gt),i=r.element(Gt);a.assign(a.add(i.sub(a).mul(.05)))}}),s=e[0]?.target.value.count;return n().compute(s)},{serializer:([t,e])=>{let n=e;const s=ve(t);return n=JSON.stringify(e.flatMap(o=>[s.getNodeCount(),o?.target?.uuid,s.getEdgeCount(),o?.current?.uuid])),n}}),ze=(t,e)=>{const{renderer:n}=Ae(t),s=Dl(t,e);Ae(t),n.compute(s)},Fl=t=>{const e=ve(t);ze(t,[{current:e.getNodeProperties("positionInitial"),target:e.getNodeProperties("positionTarget")},{current:e.getNodeProperties("sizeInitial"),target:e.getNodeProperties("sizeTarget")}]),ze(t,[{current:e.getNodeProperties("emphasisInitial"),target:e.getNodeProperties("emphasisTarget")}]),ze(t,[{current:e.getNodeProperties("colorInitial"),target:e.getNodeProperties("colorTarget")}]),ze(t,[{current:e.getEdgePairs("positionInitial").source,target:e.getEdgePairs("positionTarget").source},{current:e.getEdgePairs("positionInitial").target,target:e.getEdgePairs("positionTarget").target}]),ze(t,[{current:e.getEdgePairs("sizeInitial").source,target:e.getEdgePairs("sizeTarget").source},{current:e.getEdgePairs("sizeInitial").target,target:e.getEdgePairs("sizeTarget").target}]),ze(t,[{current:e.getEdgePairs("colorInitial").source,target:e.getEdgePairs("colorTarget").source},{current:e.getEdgePairs("colorInitial").target,target:e.getEdgePairs("colorTarget").target}]),ze(t,[{current:e.getEdgePairs("emphasisInitial").source,target:e.getEdgePairs("emphasisTarget").source},{current:e.getEdgePairs("emphasisInitial").target,target:e.getEdgePairs("emphasisTarget").target}])};window.addEventListener("keydown",t=>{t.key,t.key});const os=N.infinite(t=>{const e=Z(t),n=window.devicePixelRatio||1,s=e.clientWidth,o=e.clientHeight,r=Math.floor(s*n),a=Math.floor(o*n);return{width:r,height:a,clientWidth:s,clientHeight:o}}),Wl=(t,e=null)=>{const{set:n,get:s}=te(t,"canvas"),o=s();n(e?o||e:o||document.createElement("canvas"))},G=N.infinite(t=>{const e=te(t,"canvas").get(),n=e.getContext("webgl2",{powerPreference:"high-performance"});return n?console.debug("WebGL2 initialized"):console.error("WebGL2 failed to initialize"),{canvas:e,gl:n}}),Hl=t=>{G(t);const{renderer:e,camera:n}=Ae(t),{width:s,height:o,clientWidth:r,clientHeight:a}=os(t);Z(t),e.setSize(r,a),n.aspect=r/a,Qn(t).setSize(r,a),Ya(t).setSize(r,a),jt(t).resize(s/o)},Ul=t=>{yt(t)},lr=t=>{if(te(t,"visible").get()){Fa(t),tl(t),Ra(t).then(c=>{Al(t).highlightNode(c)}),ao()&&wl(t).then(c=>{kl(t).highlightNode(c),Nl(t).highlightNode(c)});const{width:e,height:n}=os(t);pl(t,si(t),e,n),G(t);const{renderer:s,scene:o,camera:r,nodeVisualizerMesh:a,nodePickerMesh:i,edgeVisualizerMesh:l}=Ae(t);ja(t),Fl(t),s.setRenderTarget(null),s.render(o,r),s.setRenderTarget(Qn(t)),s.render(i,r),ao()&&Pl(t)()}requestAnimationFrame(()=>lr(t))};var Ye={},Bl=(t,e)=>{Ye[t]??(Ye[t]=[]),Ye[t].push(e)},Gl=(t,e)=>{var n;(n=Ye[t])==null||n.splice(Ye[t].indexOf(e),1)},uo=async(t,e,n)=>{for(const s of Ye[t]??[])await s(e,n)},An=t=>t.length>1&&t.endsWith("/")?t.slice(0,-1):t,ql=t=>{var e;const n=(e=t.match(/(:[^/]+)/g))==null?void 0:e.map(s=>s.substring(1));return n&&{keys:n,regExp:new RegExp("^"+t.replace(/(:[^/]+)/g,"([^/]+)")+"$")}},Kl=(t,e)=>Object.fromEntries(e.map((n,s)=>[n,t[s+1]])),cr=[],Ke,Xl=t=>{for(const e of cr){const{pattern:n,regExp:s,keys:o}=e,r=s?t.match(s):n==="*"||n===t;if(r){const a=Array.isArray(r)?Kl(r,o):void 0;return{definition:e,params:a}}}},st=async(t,e)=>{const n=Xl(t),s=!!n,o=n?.params??{},r=Ke;Ke={path:t,params:o,matches:s,trigger:e},await uo("before-route",Ke,r),await n?.definition.action(o,Ke,r),await uo("route",Ke,r)},rs={get currentRoute(){return Ke},on:Bl,off:Gl,start({handleInitial:t=!0}={}){const e=window.location.hash!=""&&window.location.hash;t&&st(e||window.location.pathname||"/","init"),window.addEventListener("popstate",()=>st(window.location.pathname,"popstate")),window.addEventListener("hashchange",()=>{st(window.location.hash,"hashchange")})},route(t,e){const n=An(t),{regExp:s,keys:o=[]}=ql(t)||{};cr.push({pattern:n,action:e,regExp:s,keys:o})},push(t){window.history.pushState(null,"",An(t)),st(t,"push")},replace(t){window.history.replaceState(null,"",An(t)),st(t,"replace")}};rs.route("#-",()=>{console.debug("navigating to nothing")});rs.route("#node/:id",async(t,{trigger:e})=>{});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Ft=window,is=Ft.ShadowRoot&&(Ft.ShadyCSS===void 0||Ft.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ur=Symbol(),ho=new WeakMap;let Zl=class{constructor(e,n,s){if(this._$cssResult$=!0,s!==ur)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(is&&e===void 0){const s=n!==void 0&&n.length===1;s&&(e=ho.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&ho.set(n,e))}return e}toString(){return this.cssText}};const Yl=t=>new Zl(typeof t=="string"?t:t+"",void 0,ur),Jl=(t,e)=>{is?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const s=document.createElement("style"),o=Ft.litNonce;o!==void 0&&s.setAttribute("nonce",o),s.textContent=n.cssText,t.appendChild(s)})},fo=is?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const s of e.cssRules)n+=s.cssText;return Yl(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var kn;const Xt=window,po=Xt.trustedTypes,Ql=po?po.emptyScript:"",go=Xt.reactiveElementPolyfillSupport,qn={toAttribute(t,e){switch(e){case Boolean:t=t?Ql:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},dr=(t,e)=>e!==t&&(e==e||t==t),Nn={attribute:!0,type:String,converter:qn,reflect:!1,hasChanged:dr},Kn="finalized";class Xe extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,s)=>{const o=this._$Ep(s,n);o!==void 0&&(this._$Ev.set(o,s),e.push(o))}),e}static createProperty(e,n=Nn){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const s=typeof e=="symbol"?Symbol():"__"+e,o=this.getPropertyDescriptor(e,s,n);o!==void 0&&Object.defineProperty(this.prototype,e,o)}}static getPropertyDescriptor(e,n,s){return{get(){return this[n]},set(o){const r=this[e];this[n]=o,this.requestUpdate(e,r,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Nn}static finalize(){if(this.hasOwnProperty(Kn))return!1;this[Kn]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,s=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const o of s)this.createProperty(o,n[o])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const o of s)n.unshift(fo(o))}else e!==void 0&&n.push(fo(e));return n}static _$Ep(e,n){const s=n.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,s;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((s=e.hostConnected)===null||s===void 0||s.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Jl(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostConnected)===null||s===void 0?void 0:s.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostDisconnected)===null||s===void 0?void 0:s.call(n)})}attributeChangedCallback(e,n,s){this._$AK(e,s)}_$EO(e,n,s=Nn){var o;const r=this.constructor._$Ep(e,s);if(r!==void 0&&s.reflect===!0){const a=(((o=s.converter)===null||o===void 0?void 0:o.toAttribute)!==void 0?s.converter:qn).toAttribute(n,s.type);this._$El=e,a==null?this.removeAttribute(r):this.setAttribute(r,a),this._$El=null}}_$AK(e,n){var s;const o=this.constructor,r=o._$Ev.get(e);if(r!==void 0&&this._$El!==r){const a=o.getPropertyOptions(r),i=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)===null||s===void 0?void 0:s.fromAttribute)!==void 0?a.converter:qn;this._$El=r,this[r]=i.fromAttribute(n,a.type),this._$El=null}}requestUpdate(e,n,s){let o=!0;e!==void 0&&(((s=s||this.constructor.getPropertyOptions(e)).hasChanged||dr)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),s.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,s))):o=!1),!this.isUpdatePending&&o&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((o,r)=>this[r]=o),this._$Ei=void 0);let n=!1;const s=this._$AL;try{n=this.shouldUpdate(s),n?(this.willUpdate(s),(e=this._$ES)===null||e===void 0||e.forEach(o=>{var r;return(r=o.hostUpdate)===null||r===void 0?void 0:r.call(o)}),this.update(s)):this._$Ek()}catch(o){throw n=!1,this._$Ek(),o}n&&this._$AE(s)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(s=>{var o;return(o=s.hostUpdated)===null||o===void 0?void 0:o.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,s)=>this._$EO(s,this[s],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}Xe[Kn]=!0,Xe.elementProperties=new Map,Xe.elementStyles=[],Xe.shadowRootOptions={mode:"open"},go?.({ReactiveElement:Xe}),((kn=Xt.reactiveElementVersions)!==null&&kn!==void 0?kn:Xt.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Mn,zn;class ut extends Xe{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const s=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=s.firstChild),s}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=nr(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Qe}}ut.finalized=!0,ut._$litElement$=!0,(Mn=globalThis.litElementHydrateSupport)===null||Mn===void 0||Mn.call(globalThis,{LitElement:ut});const mo=globalThis.litElementPolyfillSupport;mo?.({LitElement:ut});((zn=globalThis.litElementVersions)!==null&&zn!==void 0?zn:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var In;((In=window.HTMLSlotElement)===null||In===void 0?void 0:In.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");const ec=/^[og]\s*(.+)?/,tc=/^mtllib /,nc=/^usemtl /,sc=/^usemap /,vo=/\s+/,bo=new Oe,Tn=new Oe,yo=new Oe,wo=new Oe,K=new Oe,zt=new ko;function oc(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=n!==!1;return}const s=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(o,r){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const i={index:this.materials.length,name:o||"",mtllib:Array.isArray(r)&&r.length>0?r[r.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(o){const r=this.currentMaterial();if(r&&r.groupEnd===-1&&(r.groupEnd=this.geometry.vertices.length/3,r.groupCount=r.groupEnd-r.groupStart,r.inherited=!1),o&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return o&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),r}},s&&s.name&&typeof s.clone=="function"){const o=s.clone(0);o.inherited=!0,this.object.materials.push(o)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,n){const s=parseInt(e,10);return(s>=0?s-1:s+n/3)*3},parseNormalIndex:function(e,n){const s=parseInt(e,10);return(s>=0?s-1:s+n/3)*3},parseUVIndex:function(e,n){const s=parseInt(e,10);return(s>=0?s-1:s+n/2)*2},addVertex:function(e,n,s){const o=this.vertices,r=this.object.geometry.vertices;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[n+0],o[n+1],o[n+2]),r.push(o[s+0],o[s+1],o[s+2])},addVertexPoint:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addVertexLine:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addNormal:function(e,n,s){const o=this.normals,r=this.object.geometry.normals;r.push(o[e+0],o[e+1],o[e+2]),r.push(o[n+0],o[n+1],o[n+2]),r.push(o[s+0],o[s+1],o[s+2])},addFaceNormal:function(e,n,s){const o=this.vertices,r=this.object.geometry.normals;bo.fromArray(o,e),Tn.fromArray(o,n),yo.fromArray(o,s),K.subVectors(yo,Tn),wo.subVectors(bo,Tn),K.cross(wo),K.normalize(),r.push(K.x,K.y,K.z),r.push(K.x,K.y,K.z),r.push(K.x,K.y,K.z)},addColor:function(e,n,s){const o=this.colors,r=this.object.geometry.colors;o[e]!==void 0&&r.push(o[e+0],o[e+1],o[e+2]),o[n]!==void 0&&r.push(o[n+0],o[n+1],o[n+2]),o[s]!==void 0&&r.push(o[s+0],o[s+1],o[s+2])},addUV:function(e,n,s){const o=this.uvs,r=this.object.geometry.uvs;r.push(o[e+0],o[e+1]),r.push(o[n+0],o[n+1]),r.push(o[s+0],o[s+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const n=this.uvs;this.object.geometry.uvs.push(n[e+0],n[e+1])},addFace:function(e,n,s,o,r,a,i,l,c){const d=this.vertices.length;let u=this.parseVertexIndex(e,d),p=this.parseVertexIndex(n,d),h=this.parseVertexIndex(s,d);if(this.addVertex(u,p,h),this.addColor(u,p,h),i!==void 0&&i!==""){const b=this.normals.length;u=this.parseNormalIndex(i,b),p=this.parseNormalIndex(l,b),h=this.parseNormalIndex(c,b),this.addNormal(u,p,h)}else this.addFaceNormal(u,p,h);if(o!==void 0&&o!==""){const b=this.uvs.length;u=this.parseUVIndex(o,b),p=this.parseUVIndex(r,b),h=this.parseUVIndex(a,b),this.addUV(u,p,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const n=this.vertices.length;for(let s=0,o=e.length;s<o;s++){const r=this.parseVertexIndex(e[s],n);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,n){this.object.geometry.type="Line";const s=this.vertices.length,o=this.uvs.length;for(let r=0,a=e.length;r<a;r++)this.addVertexLine(this.parseVertexIndex(e[r],s));for(let r=0,a=n.length;r<a;r++)this.addUVLine(this.parseUVIndex(n[r],o))}};return t.startObject("",!1),t}class rc extends Zr{constructor(e){super(e),this.materials=null}load(e,n,s,o){const r=this,a=new Yr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(i){try{n(r.parse(i))}catch(l){o?o(l):console.error(l),r.manager.itemError(e)}},s,o)}setMaterials(e){return this.materials=e,this}parse(e){const n=new oc;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const s=e.split(`
`);let o=[];for(let i=0,l=s.length;i<l;i++){const c=s[i].trimStart();if(c.length===0)continue;const d=c.charAt(0);if(d!=="#")if(d==="v"){const u=c.split(vo);switch(u[0]){case"v":n.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),u.length>=7?(zt.setRGB(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6]),Jr),n.colors.push(zt.r,zt.g,zt.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":n.uvs.push(parseFloat(u[1]),parseFloat(u[2]));break}}else if(d==="f"){const p=c.slice(1).trim().split(vo),h=[];for(let g=0,x=p.length;g<x;g++){const _=p[g];if(_.length>0){const f=_.split("/");h.push(f)}}const b=h[0];for(let g=1,x=h.length-1;g<x;g++){const _=h[g],f=h[g+1];n.addFace(b[0],_[0],f[0],b[1],_[1],f[1],b[2],_[2],f[2])}}else if(d==="l"){const u=c.substring(1).trim().split(" ");let p=[];const h=[];if(c.indexOf("/")===-1)p=u;else for(let b=0,g=u.length;b<g;b++){const x=u[b].split("/");x[0]!==""&&p.push(x[0]),x[1]!==""&&h.push(x[1])}n.addLineGeometry(p,h)}else if(d==="p"){const p=c.slice(1).trim().split(" ");n.addPointGeometry(p)}else if((o=ec.exec(c))!==null){const u=(" "+o[0].slice(1).trim()).slice(1);n.startObject(u)}else if(nc.test(c))n.object.startMaterial(c.substring(7).trim(),n.materialLibraries);else if(tc.test(c))n.materialLibraries.push(c.substring(7).trim());else if(sc.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(d==="s"){if(o=c.split(" "),o.length>1){const p=o[1].trim().toLowerCase();n.object.smooth=p!=="0"&&p!=="off"}else n.object.smooth=!0;const u=n.object.currentMaterial();u&&(u.smooth=n.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}n.finalize();const r=new Qr;if(r.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let i=0,l=n.objects.length;i<l;i++){const c=n.objects[i],d=c.geometry,u=c.materials,p=d.type==="Line",h=d.type==="Points";let b=!1;if(d.vertices.length===0)continue;const g=new ms;g.setAttribute("position",new Ue(d.vertices,3)),d.normals.length>0&&g.setAttribute("normal",new Ue(d.normals,3)),d.colors.length>0&&(b=!0,g.setAttribute("color",new Ue(d.colors,3))),d.hasUVIndices===!0&&g.setAttribute("uv",new Ue(d.uvs,2));const x=[];for(let f=0,m=u.length;f<m;f++){const y=u[f],S=y.name+"_"+y.smooth+"_"+b;let $=n.materials[S];if(this.materials!==null){if($=this.materials.create(y.name),p&&$&&!($ instanceof cn)){const k=new cn;vs.prototype.copy.call(k,$),k.color.copy($.color),$=k}else if(h&&$&&!($ instanceof St)){const k=new St({size:10,sizeAttenuation:!1});vs.prototype.copy.call(k,$),k.color.copy($.color),k.map=$.map,$=k}}$===void 0&&(p?$=new cn:h?$=new St({size:1,sizeAttenuation:!1}):$=new ei,$.name=y.name,$.flatShading=!y.smooth,$.vertexColors=b,n.materials[S]=$),x.push($)}let _;if(x.length>1){for(let f=0,m=u.length;f<m;f++){const y=u[f];g.addGroup(y.groupStart,y.groupCount,f)}p?_=new bs(g,x):h?_=new un(g,x):_=new dt(g,x)}else p?_=new bs(g,x[0]):h?_=new un(g,x[0]):_=new dt(g,x[0]);_.name=c.name,r.add(_)}else if(n.vertices.length>0){const i=new St({size:1,sizeAttenuation:!1}),l=new ms;l.setAttribute("position",new Ue(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(l.setAttribute("color",new Ue(n.colors,3)),i.vertexColors=!0);const c=new un(l,i);r.add(c)}return r}}class ic extends ut{constructor(){super();for(const[e,n]of Object.entries(Ws))this[e]=Ws[e];if(this.context=Symbol(),ti(this.context,this),Z(this.context)!==this)throw new Error("What the heck");this.resizeObserver=new ResizeObserver(e=>{os.clear(this.context),Hl(this.context)}),this.intersectionObserver=new IntersectionObserver(e=>{const n=e[0],{set:s,get:o}=te(this.context,"visible");n.isIntersecting?s(!0):s(!1),console.log("Intersection observer",o())},{root:null,rootMargin:"0px",threshold:.3}),this.onTapHandler=e=>{this.setAttribute("selected",e.detail?.info?.navId),this.focus=e.detail?.info?.navId}}static get properties(){return{globalScale:{type:Number,attribute:"global-scale"},nodeScale:{type:Number,attribute:"node-scale"},edgeFog:{type:Number,attribute:"edge-fog"},nodeFog:{type:Number,attribute:"node-fog"},edgeScale:{type:Number,attribute:"edge-scale"},edgeOvershoot:{type:Number,attribute:"edge-overshoot"},edgeFrequency:{type:Number,attribute:"edge-frequency"},edgePulseSpeed:{type:Number,attribute:"edge-pulse-speed"},edgeWaveSpeed:{type:Number,attribute:"edge-wave-speed"},selected:{type:String},focus:{type:String,attribute:!1},focusedZoom:{type:Number},unfocusedZoom:{type:Number},zoomBoundary:{type:Number},defaultFogVisibility:{type:Number,attribute:"default-fog-visibility"},defaultFogBoundaryClipZ:{type:Number,attribute:"default-fog-boundary-clip-z"},nodeShape:{type:String,attribute:"node-shape"},nodeGeometryBuffer:{attribute:!1},graphData:{attribute:!1}}}onTap(e){this.onTapHandler=e}connectedCallback(){super.connectedCallback();const e=this.context,n=this.shadowRoot,s=document.createElement("style");s.textContent=`
      :host {
        display: block;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      canvas {
        max-width: 100%;
        max-height: fit-content;
        display: block;
      }
    `,n.appendChild(s);const o=document.createElement("canvas");n.appendChild(o),Wl(e,o),console.debug("Canvas created and set"),Ul(e),console.debug("Renderer initialized"),Ae(e),console.debug("Three.js setup complete"),$l(e),console.debug("Camera interaction set up"),xl(this),console.debug("Selection setup complete"),document.querySelector("html")?.classList.add("loading"),console.debug("Added loading class to HTML"),W(this.context).then(r=>{console.debug("Graph data retrieved",r),document.querySelector("html").classList.remove("loading"),console.debug("Removed loading class from HTML"),lr(this.context),console.debug("Graph animation started"),rs.start(),console.debug("Navigation started")}),ni(this.context),this.resizeObserver.observe(this),this.intersectionObserver.observe(this),this.addEventListener("tap",r=>{r&&this.onTapHandler(r)})}get visible(){return te(this.context,"visible").get()&&this.isVisible()}disconnectedCallback(){this.resizeObserver.unobserve(this),this.intersectionObserver.unobserve(this)}adoptedCallback(){}updateCommon(e){for(const[n,s]of e){const o=this[n];switch(n){case"graphData":Ja(this.context,o),Ds(this.context);break;case"selected":W(this.context).then(({nodesByNavId:a})=>{const i=a[o];Va(this.context,i,!0)});break;case"focus":Ds(this.context);break;case"nodeShape":let r=Bo(this.nodeShape);if(r)this._nodeGeometryBuffer=r,Gs(this.context);else try{new rc().load(this.nodeShape,i=>{this._nodeGeometryBuffer=i?.children[0]?.geometry,Gs(this.context)})}catch(a){console.warn("Failed to load node shape as an obj url",a)}break}}}firstUpdated(e){this.updateCommon(e)}updated(e){this.updateCommon(e)}getNodeFromEvent(e){return null}}function fc(t="webscape-wanderer"){customElements.get(t)||customElements.define(t,ic)}export{cc as a,uc as b,dc as d,lc as r,fc as s};
//# sourceMappingURL=main-4ac24655.js.map
