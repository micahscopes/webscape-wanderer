import{m as N,u as j,M as He,V as Le,p as Ft,g as _o,i as xi,d as $o,w as Eo,a as _i,l as $i,c as Ei,C as Po,L as Pi,F as Si,S as Ai,G as Ci,B as ds,b as Ue,e as rn,f as hs,P as Pt,h as ki,j as fs,k as an,n as dt,s as ge,o as Se,q as Ni,r as Mi,t as ce,v as Wt,x as So,y as Ao,z as le,A as at,D as zi,E as z,H as B,I as Ii,J as M,K as zt,N as Ht,O as Ut,Q as Ti,R as Tn,T as ps,U as Li,W as Oi,X as Co,Y as Bt,Z as Vi,_ as ko,$ as gs,a0 as ji,a1 as q,a2 as ot,a3 as ms,a4 as vs,a5 as bs,a6 as Ri,a7 as Di,a8 as Fi,a9 as Wi,aa as Hi,ab as ys,ac as No,ad as Ln,ae as Ui,af as ln,ag as Bi,ah as Gi,ai as qi,aj as Mo,ak as Ki,al as Xi,am as Kt,an as ws,ao as Zi,ap as Yi,aq as Ji,ar as Qi}from"./worker-b8ee51b7.js";const Xt=N.infinite(t=>({globalProjection:j(new He),globalView:j(new He),zoomedProjection:j(new He),zoomedView:j(new He),fixedProjection:j(new He),fixedView:j(new He),distance:j(0),center:j(new Le(0,0,0)),rotationCenter:j(new Le(0,0,0))})),er=t=>N(Ft((e,n,s,i,o,a,r)=>{const l=Xt(t);l.globalProjection.value.fromArray(e),l.globalView.value.fromArray(n),l.zoomedProjection.value.fromArray(s),l.zoomedView.value.fromArray(i),l.fixedProjection.value.fromArray(o),l.fixedView.value.fromArray(a),l.distance.value=r[0],l.center.value.fromArray(r.slice(1,4)),l.rotationCenter.value.fromArray(r.slice(4,7))}));var vt={};function tr(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var e=t.which;if(e===2)return 4;if(e===3)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e=t.button;if(e===1)return 4;if(e===2)return 2;if(e>=0)return 1<<e}}return 0}vt.buttons=tr;function Zn(t){return t.target||t.srcElement||window}vt.element=Zn;function nr(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var e=Zn(t),n=e.getBoundingClientRect();return t.clientX-n.left}return 0}vt.x=nr;function sr(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var e=Zn(t),n=e.getBoundingClientRect();return t.clientY-n.top}return 0}vt.y=sr;var or=ir,tt=vt;function ir(t,e){e||(e=t,t=window);var n=0,s=0,i=0,o={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function r(g){var y=!1;return"altKey"in g&&(y=y||g.altKey!==o.alt,o.alt=!!g.altKey),"shiftKey"in g&&(y=y||g.shiftKey!==o.shift,o.shift=!!g.shiftKey),"ctrlKey"in g&&(y=y||g.ctrlKey!==o.control,o.control=!!g.ctrlKey),"metaKey"in g&&(y=y||g.metaKey!==o.meta,o.meta=!!g.metaKey),y}function l(g,y){var m=tt.x(y),C=tt.y(y);"buttons"in y&&(g=y.buttons|0),(g!==n||m!==s||C!==i||r(y))&&(n=g|0,s=m||0,i=C||0,e&&e(n,s,i,o))}function c(g){l(0,g)}function d(){(n||s||i||o.shift||o.alt||o.meta||o.control)&&(s=i=0,n=0,o.shift=o.alt=o.control=o.meta=!1,e&&e(0,0,0,o))}function u(g){r(g)&&e&&e(n,s,i,o)}function p(g){tt.buttons(g)===0?l(0,g):l(n,g)}function h(g){l(n|tt.buttons(g),g)}function v(g){l(n&~tt.buttons(g),g)}function f(){a||(a=!0,t.addEventListener("mousemove",p),t.addEventListener("mousedown",h),t.addEventListener("mouseup",v),t.addEventListener("mouseleave",c),t.addEventListener("mouseenter",c),t.addEventListener("mouseout",c),t.addEventListener("mouseover",c),t.addEventListener("blur",d),t.addEventListener("keyup",u),t.addEventListener("keydown",u),t.addEventListener("keypress",u),t!==window&&(window.addEventListener("blur",d),window.addEventListener("keyup",u),window.addEventListener("keydown",u),window.addEventListener("keypress",u)))}function x(){a&&(a=!1,t.removeEventListener("mousemove",p),t.removeEventListener("mousedown",h),t.removeEventListener("mouseup",v),t.removeEventListener("mouseleave",c),t.removeEventListener("mouseenter",c),t.removeEventListener("mouseout",c),t.removeEventListener("mouseover",c),t.removeEventListener("blur",d),t.removeEventListener("keyup",u),t.removeEventListener("keydown",u),t.removeEventListener("keypress",u),t!==window&&(window.removeEventListener("blur",d),window.removeEventListener("keyup",u),window.removeEventListener("keydown",u),window.removeEventListener("keypress",u)))}f();var $={element:t};return Object.defineProperties($,{enabled:{get:function(){return a},set:function(g){g?f():x()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return s},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),$}var rr={left:0,top:0},ar=lr;function lr(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var s=t.clientX||0,i=t.clientY||0,o=cr(e);return n[0]=s-o.left,n[1]=i-o.top,n}function cr(t){return t===window||t===document||t===document.body?rr:t.getBoundingClientRect()}var On={exports:{}},zo={exports:{}},ur=void 0,Io=function(t){return t!==ur&&t!==null},dr=Io,hr={object:!0,function:!0,undefined:!0},fr=function(t){return dr(t)?hasOwnProperty.call(hr,typeof t):!1},pr=fr,gr=function(t){if(!pr(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},mr=gr,vr=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!mr(t)},br=vr,yr=/^\s*class[\s{/}]/,wr=Function.prototype.toString,xr=function(t){return!(!br(t)||yr.test(wr.call(t)))},_r=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},cn,xs;function $r(){return xs||(xs=1,cn=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),cn}var Er=function(){},Pr=Er(),Yn=function(t){return t!==Pr&&t!==null},un,_s;function Sr(){if(_s)return un;_s=1;var t=Yn,e=Object.keys;return un=function(n){return e(t(n)?Object(n):n)},un}var dn,$s;function Ar(){return $s||($s=1,dn=$r()()?Object.keys:Sr()),dn}var hn,Es;function Cr(){if(Es)return hn;Es=1;var t=Yn;return hn=function(e){if(!t(e))throw new TypeError("Cannot use null or undefined");return e},hn}var fn,Ps;function kr(){if(Ps)return fn;Ps=1;var t=Ar(),e=Cr(),n=Math.max;return fn=function(s,i){var o,a,r=n(arguments.length,2),l;for(s=Object(e(s)),l=function(c){try{s[c]=i[c]}catch(d){o||(o=d)}},a=1;a<r;++a)i=arguments[a],t(i).forEach(l);if(o!==void 0)throw o;return s},fn}var Nr=_r()?Object.assign:kr(),Mr=Yn,zr=Array.prototype.forEach,Ir=Object.create,Tr=function(t,e){var n;for(n in t)e[n]=t[n]},Lr=function(t){var e=Ir(null);return zr.call(arguments,function(n){Mr(n)&&Tr(Object(n),e)}),e},pn="razdwatrzy",Or=function(){return typeof pn.contains!="function"?!1:pn.contains("dwa")===!0&&pn.contains("foo")===!1},gn,Ss;function Vr(){if(Ss)return gn;Ss=1;var t=String.prototype.indexOf;return gn=function(e){return t.call(this,e,arguments[1])>-1},gn}var jr=Or()?String.prototype.contains:Vr(),It=Io,As=xr,To=Nr,Lo=Lr,lt=jr,Rr=zo.exports=function(t,e){var n,s,i,o,a;return arguments.length<2||typeof t!="string"?(o=e,e=t,t=null):o=arguments[2],It(t)?(n=lt.call(t,"c"),s=lt.call(t,"e"),i=lt.call(t,"w")):(n=i=!0,s=!1),a={value:e,configurable:n,enumerable:s,writable:i},o?To(Lo(o),a):a};Rr.gs=function(t,e,n){var s,i,o,a;return typeof t!="string"?(o=n,n=e,e=t,t=null):o=arguments[3],It(e)?As(e)?It(n)?As(n)||(o=n,n=void 0):n=void 0:(o=e,e=n=void 0):e=void 0,It(t)?(s=lt.call(t,"c"),i=lt.call(t,"e")):(s=!0,i=!1),a={get:e,set:n,configurable:s,enumerable:i},o?To(Lo(o),a):a};var Dr=zo.exports,Fr=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var n=Dr,s=Fr,i=Function.prototype.apply,o=Function.prototype.call,a=Object.create,r=Object.defineProperty,l=Object.defineProperties,c=Object.prototype.hasOwnProperty,d={configurable:!0,enumerable:!1,writable:!0},u,p,h,v,f,x,$;u=function(g,y){var m;return s(y),c.call(this,"__ee__")?m=this.__ee__:(m=d.value=a(null),r(this,"__ee__",d),d.value=null),m[g]?typeof m[g]=="object"?m[g].push(y):m[g]=[m[g],y]:m[g]=y,this},p=function(g,y){var m,C;return s(y),C=this,u.call(this,g,m=function(){h.call(C,g,m),i.call(y,this,arguments)}),m.__eeOnceListener__=y,this},h=function(g,y){var m,C,_,k;if(s(y),!c.call(this,"__ee__"))return this;if(m=this.__ee__,!m[g])return this;if(C=m[g],typeof C=="object")for(k=0;_=C[k];++k)(_===y||_.__eeOnceListener__===y)&&(C.length===2?m[g]=C[k?0:1]:C.splice(k,1));else(C===y||C.__eeOnceListener__===y)&&delete m[g];return this},v=function(g){var y,m,C,_,k;if(c.call(this,"__ee__")&&(_=this.__ee__[g],!!_))if(typeof _=="object"){for(m=arguments.length,k=new Array(m-1),y=1;y<m;++y)k[y-1]=arguments[y];for(_=_.slice(),y=0;C=_[y];++y)i.call(C,this,k)}else switch(arguments.length){case 1:o.call(_,this);break;case 2:o.call(_,this,arguments[1]);break;case 3:o.call(_,this,arguments[1],arguments[2]);break;default:for(m=arguments.length,k=new Array(m-1),y=1;y<m;++y)k[y-1]=arguments[y];i.call(_,this,k)}},f={on:u,once:p,off:h,emit:v},x={on:n(u),once:n(p),off:n(h),emit:n(v)},$=l({},x),t.exports=e=function(g){return g==null?a($):l(Object(g),x)},e.methods=f})(On,On.exports);var Wr=On.exports,Hr=Gr,Ur=or,Be=ar,Br=Wr;function Gr(t){t=t||window;var e=Br(),n=[null,null],s=[null,null],i=[null,null],o=[null,null],a=0,r={},l,c,d=t===window?function(){l=window.innerWidth,c=window.innerHeight}:function(){l=t.clientWidth,c=t.clientHeight},u=0,p,h,v={},f=Ur(t,function(S,P,A,I){p=P,h=A,u=S,v=I});function x(S){Be(S,t,i),d(),r.buttons=u,r.mods=v,r.x0=r.x=r.x1=2*i[0]/l-1,r.y0=r.y=r.y1=1-2*i[1]/c,r.x2=null,r.y2=null,r.dx=2*S.deltaX/l,r.dy=-2*S.deltaY/c,r.dz=2*S.deltaZ/l,r.active=1,r.zoomx=1,r.zoomy=1,r.theta=0,r.dtheta=0,r.originalEvent=S,e.emit("wheel",r),n[0]=i[0],n[1]=i[1]}var $=null,g=null,y=0;function m(S){Be(S,t,i),y=0,d(),r.buttons=u,r.mods=v,r.x=r.x1=2*i[0]/l-1,r.y=r.y1=1-2*i[1]/c,r.x2=null,r.y2=null,r.active=y,r.x0=2*$/l-1,r.y0=1-2*g/c,r.dx=0,r.dy=0,r.dz=0,r.zoomx=1,r.zoomy=1,r.theta=0,r.dtheta=0,r.originalEvent=S,e.emit("mouseup",r),$=g=null,n[0]=i[0],n[1]=i[1]}function C(S){Be(S,t,i),y=1,d(),$=p,g=h,r.buttons=u,r.mods=v,r.x=r.x0=r.x1=2*i[0]/l-1,r.y=r.y0=r.y1=1-2*i[1]/c,r.x2=null,r.y2=null,r.active=y,r.dx=0,r.dy=0,r.dz=0,r.zoomx=1,r.zoomy=1,r.theta=0,r.dtheta=0,r.originalEvent=S,e.emit("mousedown",r),n[0]=i[0],n[1]=i[1]}function _(S){Be(S,t,i),d(),r.buttons=u,r.mods=v,r.x0=2*$/l-1,r.y0=1-2*g/c,r.x=r.x1=2*i[0]/l-1,r.y=r.y1=1-2*i[1]/c,r.x2=null,r.y2=null,r.dx=2*(i[0]-n[0])/l,r.dy=-2*(i[1]-n[1])/c,r.active=y,r.dz=0,r.zoomx=1,r.zoomy=1,r.theta=0,r.dtheta=0,r.originalEvent=S,e.emit("mousemove",r),n[0]=i[0],n[1]=i[1]}function k(S){for(var P=S.identifier,A=0;A<o.length;A++)if(o[A]&&o[A].touch&&o[A].touch.identifier===P)return A;return-1}function Ae(S){s[0]=null,s[1]=null;for(var P=0;P<S.changedTouches.length;P++){var A=S.changedTouches[P],I=A.identifier,R=k(I);if(R===-1&&a<2){var he=o[0]?1:0,D=o[0]?0:1,V={position:[0,0],touch:null};o[he]=V,a++,V.touch=A,Be(A,t,V.position),o[D]&&o[D].touch}}for(var W=0,H=0,U=0,P=0;P<o.length;P++)o[P]&&(W+=o[P].position[0],H+=o[P].position[1],U++);if(W/=U,H/=U,a>0){if(r.theta=0,U>1){var be=o[1].position[0]-o[0].position[0],fe=(o[0].position[1]-o[1].position[1])*l/c;r.theta=Math.atan2(fe,be)}d(),r.buttons=0,r.mods={},r.active=a,$=W,g=H,r.x0=2*$/l-1,r.y0=1-2*g/c,r.x=2*W/l-1,r.y=1-2*H/c,r.x1=2*o[0].position[0]/l-1,r.y1=1-2*o[0].position[1]/c,a>1&&(r.x2=2*o[1].position[0]/l-1,r.y2=1-2*o[1].position[1]/c),r.active=a,r.dx=0,r.dy=0,r.dz=0,r.zoomx=1,r.zoomy=1,r.dtheta=0,r.originalEvent=S,e.emit(a===1?"touchstart":"pinchstart",r)}}function Ce(S){for(var P,A=!1,I=0;I<S.changedTouches.length;I++){var R=S.changedTouches[I];P=k(R),P!==-1&&(A=!0,o[P].touch=R,Be(R,t,o[P].position))}if(A){if(a===1){for(P=0;P<o.length&&!o[P];P++);if(o[P]&&s[P]){var he=o[P].position[0],D=o[P].position[1],V=he-s[P][0],W=D-s[P][1];r.buttons=0,r.mods={},r.active=a,r.x=r.x1=2*he/l-1,r.y=r.y1=1-2*D/c,r.x2=null,r.y2=null,r.x0=2*$/l-1,r.y0=1-2*g/c,r.dx=2*V/l,r.dy=-2*W/c,r.dz=0,r.zoomx=1,r.zoomy=1,r.theta=0,r.dtheta=0,r.originalEvent=S,e.emit("touchmove",r)}}else if(a===2&&s[0]&&s[1]){var H=s[0],U=s[1],be=U[0]-H[0],fe=(U[1]-H[1])*l/c,ye=o[0].position,we=o[1].position,Re=we[0]-ye[0],De=(ye[1]-we[1])*l/c,wt=Math.sqrt(be*be+fe*fe)*.5,en=Math.atan2(fe,be),Fe=Math.sqrt(Re*Re+De*De)*.5,xt=Math.atan2(De,Re),tn=(U[0]+H[0])*.5,ke=(U[1]+H[1])*.5,V=.5*(we[0]+ye[0]-H[0]-U[0]),W=.5*(we[1]+ye[1]-H[1]-U[1]),We=Fe/wt,nn=xt-en;r.buttons=0,r.mods=v,r.active=a,r.x=2*tn/l-1,r.y=1-2*ke/c,r.x0=2*$/l-1,r.y0=1-2*g/c,r.x1=2*ye[0]/l-1,r.y1=1-2*ye[1]/c,r.x2=2*we[0]/l-1,r.y2=1-2*we[1]/c,r.dx=2*V/l,r.dy=-2*W/c,r.dz=0,r.zoomx=We,r.zoomy=We,r.theta=xt,r.dtheta=nn,r.originalEvent=S,e.emit("pinchmove",r)}}o[0]&&(s[0]=o[0].position.slice()),o[1]&&(s[1]=o[1].position.slice())}function ve(S){for(var P,A=0;A<S.changedTouches.length;A++){var I=S.changedTouches[A],R=k(I);if(R!==-1){P=o[R],o[R]=null,a--;var he=R===0?1:0;o[he]&&o[he].touch}}var D=0,V=0;if(a===0)P&&(D=P.position[0],V=P.position[1]);else{for(var W=0,A=0;A<o.length;A++)o[A]&&(D+=o[A].position[0],V+=o[A].position[1],W++);D/=W,V/=W}a<2&&(r.buttons=0,r.mods=v,r.active=a,r.x=2*D/l-1,r.y=1-2*V/c,r.x0=2*$/l-1,r.y0=1-2*g/c,r.dx=0,r.dy=0,r.dz=0,r.zoomx=1,r.zoomy=1,r.theta=0,r.dtheta=0,r.originalEvent=S,e.emit(a===0?"touchend":"pinchend",r)),a===0&&($=g=null)}var ue=!1;function je(){ue||(ue=!0,f.enabled=!0,t.addEventListener("wheel",x,!1),t.addEventListener("mousedown",C,!1),window.addEventListener("mousemove",_,!1),window.addEventListener("mouseup",m,!1),t.addEventListener("touchstart",Ae,!1),window.addEventListener("touchmove",Ce,!1),window.addEventListener("touchend",ve,!1),window.addEventListener("touchcancel",ve,!1))}function de(){ue&&(ue=!1,f.enabled=!1,t.removeEventListener("wheel",x,!1),t.removeEventListener("mousedown",C,!1),window.removeEventListener("mousemove",_,!1),window.removeEventListener("mouseup",m,!1),t.removeEventListener("touchstart",Ae,!1),window.removeEventListener("touchmove",Ce,!1),window.removeEventListener("touchend",ve,!1),window.removeEventListener("touchcancel",ve,!1))}return je(),e.enable=je,e.disable=de,e}const Tt=_o(Hr);function Oo(){return new Worker(new URL("worker-b27bed30.js",import.meta.url).href,{type:"module"})}var qr="Expected a function";function Vn(t,e,n){var s=!0,i=!0;if(typeof t!="function")throw new TypeError(qr);return xi(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),$o(t,e,{leading:s,maxWait:e,trailing:i})}var Cs=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var s=0,i=e.length,o;s<i;s++)(o||!(s in e))&&(o||(o=Array.prototype.slice.call(e,0,s)),o[s]=e[s]);return t.concat(o||Array.prototype.slice.call(e))},Kr=function(){function t(e,n,s){this.name=e,this.version=n,this.os=s,this.type="browser"}return t}(),Xr=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),Zr=function(){function t(e,n,s,i){this.name=e,this.version=n,this.os=s,this.bot=i,this.type="bot-device"}return t}(),Yr=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),Jr=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),Qr=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,ea=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ks=3,ta=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Qr]],Ns=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function na(t){return t?Ms(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new Jr:typeof navigator<"u"?Ms(navigator.userAgent):ia()}function sa(t){return t!==""&&ta.reduce(function(e,n){var s=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[s,o]},!1)}function Ms(t){var e=sa(t);if(!e)return null;var n=e[0],s=e[1];if(n==="searchbot")return new Yr;var i=s[1]&&s[1].split(".").join("_").split("_").slice(0,3);i?i.length<ks&&(i=Cs(Cs([],i,!0),ra(ks-i.length),!0)):i=[];var o=i.join("."),a=oa(t),r=ea.exec(t);return r&&r[1]?new Zr(n,o,a,r[1]):new Kr(n,o,a)}function oa(t){for(var e=0,n=Ns.length;e<n;e++){var s=Ns[e],i=s[0],o=s[1],a=o.exec(t);if(a)return i}return null}function ia(){var t=typeof process<"u"&&process.version;return t?new Xr(process.version.slice(1)):null}function ra(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}const zs=na(navigator.userAgent),Jn=zs?.name!=="safari"&&zs?.os!=="iOS";Jn?console.debug("Using workers"):console.warn("Not using workers due to an awful memory leak that makes WebKit crash if you use workers");const jn=N.infinite(t=>Jn?Eo(new Oo):_i),aa=N.infinite(t=>Jn?Eo(new Oo):$i),Z=N.infinite(t=>Ei);var E=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},b=globalThis&&globalThis.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},_e,ze,J,Ge,it,Q,ee,te,ne,se,oe,ie,re,Ie,qe,$e,Lt,Ee;const la=function(t){var e=131,n=137,s=0;t+="x";var i=Math.floor(9007199254740991/n);for(let o=0;o<t.length;o++)s>i&&(s=Math.floor(s/n)),s=s*e+t.charCodeAt(o);return s},w="0123456789abcdef".split(""),ca=[-2147483648,8388608,32768,128],Y=[24,16,8,0],St=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],T=[];class ua{constructor(e=!1,n=!1){_e.set(this,void 0),ze.set(this,void 0),J.set(this,void 0),Ge.set(this,void 0),it.set(this,void 0),Q.set(this,void 0),ee.set(this,void 0),te.set(this,void 0),ne.set(this,void 0),se.set(this,void 0),oe.set(this,void 0),ie.set(this,void 0),re.set(this,void 0),Ie.set(this,void 0),qe.set(this,void 0),$e.set(this,void 0),Lt.set(this,0),Ee.set(this,void 0),this.init(e,n)}init(e,n){n?(T[0]=T[16]=T[1]=T[2]=T[3]=T[4]=T[5]=T[6]=T[7]=T[8]=T[9]=T[10]=T[11]=T[12]=T[13]=T[14]=T[15]=0,E(this,ze,T)):E(this,ze,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e?(E(this,Q,3238371032),E(this,ee,914150663),E(this,te,812702999),E(this,ne,4144912697),E(this,se,4290775857),E(this,oe,1750603025),E(this,ie,1694076839),E(this,re,3204075428)):(E(this,Q,1779033703),E(this,ee,3144134277),E(this,te,1013904242),E(this,ne,2773480762),E(this,se,1359893119),E(this,oe,2600822924),E(this,ie,528734635),E(this,re,1541459225)),E(this,_e,E(this,Ee,E(this,J,E(this,qe,0)))),E(this,Ge,E(this,Ie,!1)),E(this,it,!0),E(this,$e,e)}update(e){if(b(this,Ge))return this;let n;e instanceof ArrayBuffer?n=new Uint8Array(e):n=e;let s=0;const i=n.length,o=b(this,ze);for(;s<i;){let a;if(b(this,Ie)&&(E(this,Ie,!1),o[0]=b(this,_e),o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),typeof n!="string")for(a=b(this,Ee);s<i&&a<64;++s)o[a>>2]|=n[s]<<Y[a++&3];else for(a=b(this,Ee);s<i&&a<64;++s){let r=n.charCodeAt(s);r<128?o[a>>2]|=r<<Y[a++&3]:r<2048?(o[a>>2]|=(192|r>>6)<<Y[a++&3],o[a>>2]|=(128|r&63)<<Y[a++&3]):r<55296||r>=57344?(o[a>>2]|=(224|r>>12)<<Y[a++&3],o[a>>2]|=(128|r>>6&63)<<Y[a++&3],o[a>>2]|=(128|r&63)<<Y[a++&3]):(r=65536+((r&1023)<<10|n.charCodeAt(++s)&1023),o[a>>2]|=(240|r>>18)<<Y[a++&3],o[a>>2]|=(128|r>>12&63)<<Y[a++&3],o[a>>2]|=(128|r>>6&63)<<Y[a++&3],o[a>>2]|=(128|r&63)<<Y[a++&3])}E(this,Lt,a),E(this,J,b(this,J)+(a-b(this,Ee))),a>=64?(E(this,_e,o[16]),E(this,Ee,a-64),this.hash(),E(this,Ie,!0)):E(this,Ee,a)}return b(this,J)>4294967295&&(E(this,qe,b(this,qe)+(b(this,J)/4294967296<<0)),E(this,J,b(this,J)%4294967296)),this}finalize(){if(b(this,Ge))return;E(this,Ge,!0);const e=b(this,ze),n=b(this,Lt);e[16]=b(this,_e),e[n>>2]|=ca[n&3],E(this,_e,e[16]),n>=56&&(b(this,Ie)||this.hash(),e[0]=b(this,_e),e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=b(this,qe)<<3|b(this,J)>>>29,e[15]=b(this,J)<<3,this.hash()}hash(){let e=b(this,Q),n=b(this,ee),s=b(this,te),i=b(this,ne),o=b(this,se),a=b(this,oe),r=b(this,ie),l=b(this,re);const c=b(this,ze);let d,u,p,h,v,f,x,$,g,y;for(let m=16;m<64;++m)h=c[m-15],d=(h>>>7|h<<25)^(h>>>18|h<<14)^h>>>3,h=c[m-2],u=(h>>>17|h<<15)^(h>>>19|h<<13)^h>>>10,c[m]=c[m-16]+d+c[m-7]+u<<0;y=n&s;for(let m=0;m<64;m+=4)b(this,it)?(b(this,$e)?(x=300032,h=c[0]-1413257819,l=h-150054599<<0,i=h+24177077<<0):(x=704751109,h=c[0]-210244248,l=h-1521486534<<0,i=h+143694565<<0),E(this,it,!1)):(d=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),u=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),x=e&n,p=x^e&s^y,f=o&a^~o&r,h=l+u+f+St[m]+c[m],v=d+p,l=i+h<<0,i=h+v<<0),d=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),u=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),$=i&e,p=$^i&n^x,f=l&o^~l&a,h=r+u+f+St[m+1]+c[m+1],v=d+p,r=s+h<<0,s=h+v<<0,d=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),u=(r>>>6|r<<26)^(r>>>11|r<<21)^(r>>>25|r<<7),g=s&i,p=g^s&e^$,f=r&l^~r&o,h=a+u+f+St[m+2]+c[m+2],v=d+p,a=n+h<<0,n=h+v<<0,d=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),u=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),y=n&s,p=y^n&i^g,f=a&r^~a&l,h=o+u+f+St[m+3]+c[m+3],v=d+p,o=e+h<<0,e=h+v<<0;E(this,Q,b(this,Q)+e<<0),E(this,ee,b(this,ee)+n<<0),E(this,te,b(this,te)+s<<0),E(this,ne,b(this,ne)+i<<0),E(this,se,b(this,se)+o<<0),E(this,oe,b(this,oe)+a<<0),E(this,ie,b(this,ie)+r<<0),E(this,re,b(this,re)+l<<0)}hex(){this.finalize();const e=b(this,Q),n=b(this,ee),s=b(this,te),i=b(this,ne),o=b(this,se),a=b(this,oe),r=b(this,ie),l=b(this,re);let c=w[e>>28&15]+w[e>>24&15]+w[e>>20&15]+w[e>>16&15]+w[e>>12&15]+w[e>>8&15]+w[e>>4&15]+w[e&15]+w[n>>28&15]+w[n>>24&15]+w[n>>20&15]+w[n>>16&15]+w[n>>12&15]+w[n>>8&15]+w[n>>4&15]+w[n&15]+w[s>>28&15]+w[s>>24&15]+w[s>>20&15]+w[s>>16&15]+w[s>>12&15]+w[s>>8&15]+w[s>>4&15]+w[s&15]+w[i>>28&15]+w[i>>24&15]+w[i>>20&15]+w[i>>16&15]+w[i>>12&15]+w[i>>8&15]+w[i>>4&15]+w[i&15]+w[o>>28&15]+w[o>>24&15]+w[o>>20&15]+w[o>>16&15]+w[o>>12&15]+w[o>>8&15]+w[o>>4&15]+w[o&15]+w[a>>28&15]+w[a>>24&15]+w[a>>20&15]+w[a>>16&15]+w[a>>12&15]+w[a>>8&15]+w[a>>4&15]+w[a&15]+w[r>>28&15]+w[r>>24&15]+w[r>>20&15]+w[r>>16&15]+w[r>>12&15]+w[r>>8&15]+w[r>>4&15]+w[r&15];return b(this,$e)||(c+=w[l>>28&15]+w[l>>24&15]+w[l>>20&15]+w[l>>16&15]+w[l>>12&15]+w[l>>8&15]+w[l>>4&15]+w[l&15]),c}toString(){return this.hex()}digest(){this.finalize();const e=b(this,Q),n=b(this,ee),s=b(this,te),i=b(this,ne),o=b(this,se),a=b(this,oe),r=b(this,ie),l=b(this,re),c=[e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,s>>24&255,s>>16&255,s>>8&255,s&255,i>>24&255,i>>16&255,i>>8&255,i&255,o>>24&255,o>>16&255,o>>8&255,o&255,a>>24&255,a>>16&255,a>>8&255,a&255,r>>24&255,r>>16&255,r>>8&255,r&255];return b(this,$e)||c.push(l>>24&255,l>>16&255,l>>8&255,l&255),c}array(){return this.digest()}arrayBuffer(){this.finalize();const e=new ArrayBuffer(b(this,$e)?28:32),n=new DataView(e);return n.setUint32(0,b(this,Q)),n.setUint32(4,b(this,ee)),n.setUint32(8,b(this,te)),n.setUint32(12,b(this,ne)),n.setUint32(16,b(this,se)),n.setUint32(20,b(this,oe)),n.setUint32(24,b(this,ie)),b(this,$e)||n.setUint32(28,b(this,re)),e}}_e=new WeakMap,ze=new WeakMap,J=new WeakMap,Ge=new WeakMap,it=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,se=new WeakMap,oe=new WeakMap,ie=new WeakMap,re=new WeakMap,Ie=new WeakMap,qe=new WeakMap,$e=new WeakMap,Lt=new WeakMap,Ee=new WeakMap;function da(t){const e=new ua;return e.update(t),parseInt(e.hex().substring(0,8),16)}const ha=function(t){var e="#";return t.forEach(function(n){n<16&&(e+=0),e+=n.toString(16)}),e},fa=function(t,e,n){t/=360;var s=n<.5?n*(1+e):n+e-n*e,i=2*n-s;return[t+1/3,t,t-1/3].map(function(o){return o<0&&o++,o>1&&o--,o<1/6?o=i+(s-i)*6*o:o<.5?o=s:o<2/3?o=i+(s-i)*6*(2/3-o):o=i,Math.round(o*255)})};class pa{constructor(e={}){const[n,s]=[e.lightness,e.saturation].map(function(i){return i=i!==void 0?i:[.35,.5,.65],Array.isArray(i)?i.concat():[i]});this.L=n,this.S=s,typeof e.hue=="number"&&(e.hue={min:e.hue,max:e.hue}),typeof e.hue=="object"&&!Array.isArray(e.hue)&&(e.hue=[e.hue]),typeof e.hue>"u"&&(e.hue=[]),this.hueRanges=e.hue.map(function(i){return{min:typeof i.min>"u"?0:i.min,max:typeof i.max>"u"?360:i.max}}),this.hash=da,typeof e.hash=="function"&&(this.hash=e.hash),e.hash==="bkdr"&&(this.hash=la)}hsl(e){var n,s,i,o=this.hash(e),a=727;if(this.hueRanges.length){const r=this.hueRanges[o%this.hueRanges.length];n=o/this.hueRanges.length%a*(r.max-r.min)/a+r.min}else n=o%359;return o=Math.ceil(o/360),s=this.S[o%this.S.length],o=Math.ceil(o/this.S.length),i=this.L[o%this.L.length],[n,s,i]}rgb(e){var n=this.hsl(e);return fa.apply(this,n)}hex(e){var n=this.rgb(e);return ha(n)}}const ga=/^[og]\s*(.+)?/,ma=/^mtllib /,va=/^usemtl /,ba=/^usemap /,Is=/\s+/,Ts=new Le,mn=new Le,Ls=new Le,Os=new Le,K=new Le,At=new Po;function ya(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=n!==!1;return}const s=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,o){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const r={index:this.materials.length,name:i||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const c={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return c.clone=this.clone.bind(c),c}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),i&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},s&&s.name&&typeof s.clone=="function"){const i=s.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,n){const s=parseInt(e,10);return(s>=0?s-1:s+n/3)*3},parseNormalIndex:function(e,n){const s=parseInt(e,10);return(s>=0?s-1:s+n/3)*3},parseUVIndex:function(e,n){const s=parseInt(e,10);return(s>=0?s-1:s+n/2)*2},addVertex:function(e,n,s){const i=this.vertices,o=this.object.geometry.vertices;o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2]),o.push(i[s+0],i[s+1],i[s+2])},addVertexPoint:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addVertexLine:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addNormal:function(e,n,s){const i=this.normals,o=this.object.geometry.normals;o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2]),o.push(i[s+0],i[s+1],i[s+2])},addFaceNormal:function(e,n,s){const i=this.vertices,o=this.object.geometry.normals;Ts.fromArray(i,e),mn.fromArray(i,n),Ls.fromArray(i,s),K.subVectors(Ls,mn),Os.subVectors(Ts,mn),K.cross(Os),K.normalize(),o.push(K.x,K.y,K.z),o.push(K.x,K.y,K.z),o.push(K.x,K.y,K.z)},addColor:function(e,n,s){const i=this.colors,o=this.object.geometry.colors;i[e]!==void 0&&o.push(i[e+0],i[e+1],i[e+2]),i[n]!==void 0&&o.push(i[n+0],i[n+1],i[n+2]),i[s]!==void 0&&o.push(i[s+0],i[s+1],i[s+2])},addUV:function(e,n,s){const i=this.uvs,o=this.object.geometry.uvs;o.push(i[e+0],i[e+1]),o.push(i[n+0],i[n+1]),o.push(i[s+0],i[s+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const n=this.uvs;this.object.geometry.uvs.push(n[e+0],n[e+1])},addFace:function(e,n,s,i,o,a,r,l,c){const d=this.vertices.length;let u=this.parseVertexIndex(e,d),p=this.parseVertexIndex(n,d),h=this.parseVertexIndex(s,d);if(this.addVertex(u,p,h),this.addColor(u,p,h),r!==void 0&&r!==""){const v=this.normals.length;u=this.parseNormalIndex(r,v),p=this.parseNormalIndex(l,v),h=this.parseNormalIndex(c,v),this.addNormal(u,p,h)}else this.addFaceNormal(u,p,h);if(i!==void 0&&i!==""){const v=this.uvs.length;u=this.parseUVIndex(i,v),p=this.parseUVIndex(o,v),h=this.parseUVIndex(a,v),this.addUV(u,p,h),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const n=this.vertices.length;for(let s=0,i=e.length;s<i;s++){const o=this.parseVertexIndex(e[s],n);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,n){this.object.geometry.type="Line";const s=this.vertices.length,i=this.uvs.length;for(let o=0,a=e.length;o<a;o++)this.addVertexLine(this.parseVertexIndex(e[o],s));for(let o=0,a=n.length;o<a;o++)this.addUVLine(this.parseUVIndex(n[o],i))}};return t.startObject("",!1),t}class wa extends Pi{constructor(e){super(e),this.materials=null}load(e,n,s,i){const o=this,a=new Si(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(r){try{n(o.parse(r))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},s,i)}setMaterials(e){return this.materials=e,this}parse(e){const n=new ya;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const s=e.split(`
`);let i=[];for(let r=0,l=s.length;r<l;r++){const c=s[r].trimStart();if(c.length===0)continue;const d=c.charAt(0);if(d!=="#")if(d==="v"){const u=c.split(Is);switch(u[0]){case"v":n.vertices.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3])),u.length>=7?(At.setRGB(parseFloat(u[4]),parseFloat(u[5]),parseFloat(u[6]),Ai),n.colors.push(At.r,At.g,At.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(u[1]),parseFloat(u[2]),parseFloat(u[3]));break;case"vt":n.uvs.push(parseFloat(u[1]),parseFloat(u[2]));break}}else if(d==="f"){const p=c.slice(1).trim().split(Is),h=[];for(let f=0,x=p.length;f<x;f++){const $=p[f];if($.length>0){const g=$.split("/");h.push(g)}}const v=h[0];for(let f=1,x=h.length-1;f<x;f++){const $=h[f],g=h[f+1];n.addFace(v[0],$[0],g[0],v[1],$[1],g[1],v[2],$[2],g[2])}}else if(d==="l"){const u=c.substring(1).trim().split(" ");let p=[];const h=[];if(c.indexOf("/")===-1)p=u;else for(let v=0,f=u.length;v<f;v++){const x=u[v].split("/");x[0]!==""&&p.push(x[0]),x[1]!==""&&h.push(x[1])}n.addLineGeometry(p,h)}else if(d==="p"){const p=c.slice(1).trim().split(" ");n.addPointGeometry(p)}else if((i=ga.exec(c))!==null){const u=(" "+i[0].slice(1).trim()).slice(1);n.startObject(u)}else if(va.test(c))n.object.startMaterial(c.substring(7).trim(),n.materialLibraries);else if(ma.test(c))n.materialLibraries.push(c.substring(7).trim());else if(ba.test(c))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(d==="s"){if(i=c.split(" "),i.length>1){const p=i[1].trim().toLowerCase();n.object.smooth=p!=="0"&&p!=="off"}else n.object.smooth=!0;const u=n.object.currentMaterial();u&&(u.smooth=n.object.smooth)}else{if(c==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+c+'"')}}n.finalize();const o=new Ci;if(o.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let r=0,l=n.objects.length;r<l;r++){const c=n.objects[r],d=c.geometry,u=c.materials,p=d.type==="Line",h=d.type==="Points";let v=!1;if(d.vertices.length===0)continue;const f=new ds;f.setAttribute("position",new Ue(d.vertices,3)),d.normals.length>0&&f.setAttribute("normal",new Ue(d.normals,3)),d.colors.length>0&&(v=!0,f.setAttribute("color",new Ue(d.colors,3))),d.hasUVIndices===!0&&f.setAttribute("uv",new Ue(d.uvs,2));const x=[];for(let g=0,y=u.length;g<y;g++){const m=u[g],C=m.name+"_"+m.smooth+"_"+v;let _=n.materials[C];if(this.materials!==null){if(_=this.materials.create(m.name),p&&_&&!(_ instanceof rn)){const k=new rn;hs.prototype.copy.call(k,_),k.color.copy(_.color),_=k}else if(h&&_&&!(_ instanceof Pt)){const k=new Pt({size:10,sizeAttenuation:!1});hs.prototype.copy.call(k,_),k.color.copy(_.color),k.map=_.map,_=k}}_===void 0&&(p?_=new rn:h?_=new Pt({size:1,sizeAttenuation:!1}):_=new ki,_.name=m.name,_.flatShading=!m.smooth,_.vertexColors=v,n.materials[C]=_),x.push(_)}let $;if(x.length>1){for(let g=0,y=u.length;g<y;g++){const m=u[g];f.addGroup(m.groupStart,m.groupCount,g)}p?$=new fs(f,x):h?$=new an(f,x):$=new dt(f,x)}else p?$=new fs(f,x[0]):h?$=new an(f,x[0]):$=new dt(f,x[0]);$.name=c.name,o.add($)}else if(n.vertices.length>0){const r=new Pt({size:1,sizeAttenuation:!1}),l=new ds;l.setAttribute("position",new Ue(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(l.setAttribute("color",new Ue(n.colors,3)),r.vertexColors=!0);const c=new an(l,r);o.add(c)}return o}}const xa="/webscape-wanderer/assets/heart-5938e4ca.obj",_a="/webscape-wanderer/assets/vibes-512px-04de93e8.png";var Rn;function Ct(t,e,n){return Math.min(Math.max(t||0,e),n)}function vn(t){return{r:Ct(t.r,0,255),g:Ct(t.g,0,255),b:Ct(t.b,0,255),a:Ct(t.a,0,1)}}function Dn(t){return{r:255*t.r,g:255*t.g,b:255*t.b,a:t.a}}function Fn(t){return{r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}}function Vs(t,e){e===void 0&&(e=0);var n=Math.pow(10,e);return{r:Math.round(t.r*n)/n,g:Math.round(t.g*n)/n,b:Math.round(t.b*n)/n,a:t.a}}function bn(t,e,n,s,i,o){return(1-e/n)*s+e/n*Math.round((1-t)*i+t*o)}function $a(t,e,n,s,i){i===void 0&&(i={unitInput:!1,unitOutput:!1,roundOutput:!0}),i.unitInput&&(t=Dn(t),e=Dn(e)),t=vn(t);var o=(e=vn(e)).a+t.a-e.a*t.a,a=n(t,e,s),r=vn({r:bn(t.a,e.a,o,t.r,e.r,a.r),g:bn(t.a,e.a,o,t.g,e.g,a.g),b:bn(t.a,e.a,o,t.b,e.b,a.b),a:o});return i.unitOutput?Fn(r):i.roundOutput?Vs(r):Vs(r,9)}function Ea(t,e,n){return Dn(n(Fn(t),Fn(e)))}function Wn(t){return .3*t.r+.59*t.g+.11*t.b}function Pa(t,e){var n=e-Wn(t);return function(s){var i=Wn(s),o=s.r,a=s.g,r=s.b,l=Math.min(o,a,r),c=Math.max(o,a,r);function d(p){return i+(p-i)*i/(i-l)}function u(p){return i+(p-i)*(1-i)/(c-i)}return l<0&&(o=d(o),a=d(a),r=d(r)),c>1&&(o=u(o),a=u(a),r=u(r)),{r:o,g:a,b:r}}({r:t.r+n,g:t.g+n,b:t.b+n})}function Sa(t){return Math.max(t.r,t.g,t.b)-Math.min(t.r,t.g,t.b)}function Aa(t,e){var n=["r","g","b"].sort(function(r,l){return t[r]-t[l]}),s=n[0],i=n[1],o=n[2],a={r:t.r,g:t.g,b:t.b};return a[o]>a[s]?(a[i]=(a[i]-a[s])*e/(a[o]-a[s]),a[o]=e):a[i]=a[o]=0,a[s]=0,a}function Ca(t,e){return Pa(Aa(e,Sa(t)),Wn(t))}Rn=function(t,e){return $a(t,e,Ea,Ca,{unitInput:!0,unitOutput:!0})};var ka={grad:.9,turn:360,rad:360/(2*Math.PI)},pe=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},L=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},X=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},Vo=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},js=function(t){return{r:X(t.r,0,255),g:X(t.g,0,255),b:X(t.b,0,255),a:X(t.a)}},yn=function(t){return{r:L(t.r),g:L(t.g),b:L(t.b),a:L(t.a,3)}},Na=/^#([0-9a-f]{3,8})$/i,kt=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},jo=function(t){var e=t.r,n=t.g,s=t.b,i=t.a,o=Math.max(e,n,s),a=o-Math.min(e,n,s),r=a?o===e?(n-s)/a:o===n?2+(s-e)/a:4+(e-n)/a:0;return{h:60*(r<0?r+6:r),s:o?a/o*100:0,v:o/255*100,a:i}},Ro=function(t){var e=t.h,n=t.s,s=t.v,i=t.a;e=e/360*6,n/=100,s/=100;var o=Math.floor(e),a=s*(1-n),r=s*(1-(e-o)*n),l=s*(1-(1-e+o)*n),c=o%6;return{r:255*[s,r,a,a,l,s][c],g:255*[l,s,s,r,a,a][c],b:255*[a,a,l,s,s,r][c],a:i}},Rs=function(t){return{h:Vo(t.h),s:X(t.s,0,100),l:X(t.l,0,100),a:X(t.a)}},Ds=function(t){return{h:L(t.h),s:L(t.s),l:L(t.l),a:L(t.a,3)}},Fs=function(t){return Ro((n=(e=t).s,{h:e.h,s:(n*=((s=e.l)<50?s:100-s)/100)>0?2*n/(s+n)*100:0,v:s+n,a:e.a}));var e,n,s},ct=function(t){return{h:(e=jo(t)).h,s:(i=(200-(n=e.s))*(s=e.v)/100)>0&&i<200?n*s/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,s,i},Ma=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,za=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ia=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ta=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hn={string:[[function(t){var e=Na.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?L(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?L(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Ia.exec(t)||Ta.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:js({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=Ma.exec(t)||za.exec(t);if(!e)return null;var n,s,i=Rs({h:(n=e[1],s=e[2],s===void 0&&(s="deg"),Number(n)*(ka[s]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Fs(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,s=t.b,i=t.a,o=i===void 0?1:i;return pe(e)&&pe(n)&&pe(s)?js({r:Number(e),g:Number(n),b:Number(s),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,n=t.s,s=t.l,i=t.a,o=i===void 0?1:i;if(!pe(e)||!pe(n)||!pe(s))return null;var a=Rs({h:Number(e),s:Number(n),l:Number(s),a:Number(o)});return Fs(a)},"hsl"],[function(t){var e=t.h,n=t.s,s=t.v,i=t.a,o=i===void 0?1:i;if(!pe(e)||!pe(n)||!pe(s))return null;var a=function(r){return{h:Vo(r.h),s:X(r.s,0,100),v:X(r.v,0,100),a:X(r.a)}}({h:Number(e),s:Number(n),v:Number(s),a:Number(o)});return Ro(a)},"hsv"]]},Ws=function(t,e){for(var n=0;n<e.length;n++){var s=e[n][0](t);if(s)return[s,e[n][1]]}return[null,void 0]},La=function(t){return typeof t=="string"?Ws(t.trim(),Hn.string):typeof t=="object"&&t!==null?Ws(t,Hn.object):[null,void 0]},wn=function(t,e){var n=ct(t);return{h:n.h,s:X(n.s+100*e,0,100),l:n.l,a:n.a}},xn=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Hs=function(t,e){var n=ct(t);return{h:n.h,s:n.s,l:X(n.l+100*e,0,100),a:n.a}},Un=function(){function t(e){this.parsed=La(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return L(xn(this.rgba),2)},t.prototype.isDark=function(){return xn(this.rgba)<.5},t.prototype.isLight=function(){return xn(this.rgba)>=.5},t.prototype.toHex=function(){return e=yn(this.rgba),n=e.r,s=e.g,i=e.b,a=(o=e.a)<1?kt(L(255*o)):"","#"+kt(n)+kt(s)+kt(i)+a;var e,n,s,i,o,a},t.prototype.toRgb=function(){return yn(this.rgba)},t.prototype.toRgbString=function(){return e=yn(this.rgba),n=e.r,s=e.g,i=e.b,(o=e.a)<1?"rgba("+n+", "+s+", "+i+", "+o+")":"rgb("+n+", "+s+", "+i+")";var e,n,s,i,o},t.prototype.toHsl=function(){return Ds(ct(this.rgba))},t.prototype.toHslString=function(){return e=Ds(ct(this.rgba)),n=e.h,s=e.s,i=e.l,(o=e.a)<1?"hsla("+n+", "+s+"%, "+i+"%, "+o+")":"hsl("+n+", "+s+"%, "+i+"%)";var e,n,s,i,o},t.prototype.toHsv=function(){return e=jo(this.rgba),{h:L(e.h),s:L(e.s),v:L(e.v),a:L(e.a,3)};var e},t.prototype.invert=function(){return ae({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ae(wn(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ae(wn(this.rgba,-e))},t.prototype.grayscale=function(){return ae(wn(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ae(Hs(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ae(Hs(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ae({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):L(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=ct(this.rgba);return typeof e=="number"?ae({h:e,s:n.s,l:n.l,a:n.a}):L(n.h)},t.prototype.isEqual=function(e){return this.toHex()===ae(e).toHex()},t}(),ae=function(t){return t instanceof Un?t:new Un(t)},Us=[],Oa=function(t){t.forEach(function(e){Us.indexOf(e)<0&&(e(Un,Hn),Us.push(e))})};function Va(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var i in n)s[n[i]]=i;var o={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var r,l,c=s[this.toHex()];if(c)return c;if(a?.closest){var d=this.toRgb(),u=1/0,p="black";if(!o.length)for(var h in n)o[h]=new t(n[h]).toRgb();for(var v in n){var f=(r=d,l=o[v],Math.pow(r.r-l.r,2)+Math.pow(r.g-l.g,2)+Math.pow(r.b-l.b,2));f<u&&(u=f,p=v)}return p}},e.string.push([function(a){var r=a.toLowerCase(),l=r==="transparent"?"#0000":n[r];return l?new t(l).toRgb():null},"name"])}const Do=({color:t})=>t,ja=(t,e=Se)=>{const{nodes:n,links:s}=t;return new Float32Array(n.map(Do).flatMap(e))},Fo=({size:t})=>t,Ra=(t,e=Se)=>{const{nodes:n,links:s}=t;return new Float32Array(n.map(Fo).map(e))},Wo=async(t,{colorMap:e=Se,sizeMap:n=Se,immediate:s=!1}={})=>{await F(t);const i=await ja(await F(t),e),o=await Ra(await F(t),n),a=me(t);a.setNodeProperties("colorTarget","vec4",i),a.setNodeProperties("sizeTarget","float",o),a.setNodeProperties("emphasisTarget","float",new Float32Array(o.length).fill(0)),s&&(a.setNodeProperties("colorInitial","vec4",i),a.setNodeProperties("sizeInitial","float",o),a.setNodeProperties("emphasisInitial","float",new Float32Array(o.length).fill(0)))},Bs=async(t,e,{colorMap:n=Se,sizeMap:s=Se,emphasis:i=0,immediate:o=!1}={})=>{const a=n(Do(e)),r=s(Fo(e)),l=me(t);l.setNodeProperty("colorTarget",e.index,a),l.setNodeProperty("sizeTarget",e.index,r),l.setNodeProperty("emphasisTarget",e.index,i),o&&(l.setNodeProperty("colorInitial",e.index,a),l.setNodeProperty("sizeInitial",e.index,r),l.setNodeProperty("emphasisInitial",e.index,i))},Da={colorMap:t=>{const e=t.slice(0,3).reduce((n,s)=>n+s,0)/3;return[...t.slice(0,3).map(n=>e),.5]},sizeMap:t=>t},Ho=async(t,e=!1)=>{try{await Wo(t,{...Da,immediate:e})}catch(n){console.error(n)}},Gs=async(t,e,n=!0)=>{if(await ol(t).get(),e){qs(t,e.index),Zt(t,e);const s=Ni(e.id),i=Mi(e.id),{nodesById:o,links:a}=await F(t),r=({sizeMap:l=Se,emphasis:c=1,colorMap:d=Se})=>(u,p)=>{p(["upstream","downstream"]).then(({upstream:h,downstream:v})=>{const f=h?.value||v?.value,x=o[f];Bs(t,x,{sizeMap:l,emphasis:c,colorMap:d})})};Ho(t).then(()=>{jn(t).doQuery(s,Ft(r({colorMap:l=>{const c={r:l[0],g:l[1],b:l[2],a:l[3]},d={r:57/255,g:179/255,b:83/255,a:.8},u=Rn(c,d);return[u.r,u.g,u.b,u.a]}}))),Bs(t,e,{sizeMap:l=>l*1.5,emphasis:1}),jn(t).doQuery(i,Ft(r({colorMap:l=>{const c={r:l[0],g:l[1],b:l[2],a:l[3]},d={r:0,g:102/255,b:209/255,a:.8},u=Rn(c,d);return[u.r,u.g,u.b,u.a]}})))})}else Wo(t),qs(t,-1)},Fa=async t=>{const e=await F(t),{nodesByNavId:n}=e,i=ce(t).focus,o=n[i];if(o){const a=Zt(t,o);ti(t,a,!1)}},_n=async t=>{const e=await F(t),{nodesByNavId:n}=e,s=ce(t),i=s.focus,o=n[i];if(o){const a=Zt(t,o);ti(t,a),ro(t,s.focusedZoom||500)}else ro(t,s.unfocusedZoom||1500)};window.initializeSelectionVisuals=Ho;const ht=t=>ge(t,"selectedIndex",()=>-1).get(),qs=(t,e)=>{ge(t,"selectedIndex").set(e)},Wa=async t=>{const e=ht(t),{nodes:n}=await F(t);return n[e]};Oa([Va]);let Ha=()=>ae("deeppink").toRgb();const Uo=t=>{const e=ge(t,"selectedColor",Ha).get();return[e.r/255,e.g/255,e.b/255,1]},Ks={globalScale:1,nodeScale:1,edgeFog:1,nodeFog:1,edgeScale:1,edgeOvershoot:1.25,edgeFrequency:2,edgePulseSpeed:1,edgeWaveSpeed:1,focus:-1,selected:-1,defaultFogVisibility:.3,defaultFogBoundaryClipZ:700,focusedZoom:100,unfocusedZoom:500,zoomBoundary:200},Ua=t=>Object.keys(ce(t).constructor.properties),Bo=N.infinite(t=>{const e=ce(t);return Object.fromEntries(Ua(t).map(n=>[n,e[n]]))}),bt=N.infinite(t=>{const e={mousePosition:j(new Wt(...ni(t))),selectedIndex:j(-1),selectedColor:j(new So(...Uo(t))),hoveringIndex:j(Jt(t)),viewport:j(new Wt(0,0)),devicePixelRatio:j(window.devicePixelRatio),time:j(performance.now()/1e3)},n=Bo(t);return Object.entries(n).forEach(([s,i])=>{e[s]=j(i)}),console.debug("initialized uniforms",e),e}),Xs=new Wt,Ba=t=>{const{renderer:e}=Oe(t);e.getSize(Xs);let n=bt(t);n.mousePosition.value=new Wt(...ni(t)),n.selectedIndex.value=ht(t),n.selectedColor.value=new So(...Uo(t)),n.hoveringIndex.value=Jt(t),n.time.value=performance.now()/1e3,n.viewport.value=Xs.toArray();const s=Bo(t);Object.entries(s).forEach(([i,o])=>{n[i].value=o})},Ot=(t,e,n)=>{const s=Ao(t.div(n),-.5,.5),i=le(at(le(at(s.mul(2),2)),-1));return at(zi(i),e)},Bn=z(.15),Zs=(t,{nodePosition:e,scale:n})=>{const{globalProjection:s,globalView:i,zoomedProjection:o,zoomedView:a,fixedProjection:r,fixedView:l,distance:c,center:d,rotationCenter:u}=Xt(t),{globalScale:p,nodeScale:h}=bt(t),v=s.mul(i).mul(B(e,z(1))),f=v.xyz.div(v.w),x=Ii.mul(n).mul(p.value).mul(h.value),$=r.mul(l.mul(B(x,z(1)))),g=$.xyz.div($.w),y=o.mul(a.mul(B(x,z(1)))),m=y.xyz.div(y.w),C=M(m,g,z(.5)),_=zt(C.x.add(f.x),C.y.add(f.y),f.z.add(C.z.sub(z(.99)).mul(z(.1)))),k=B(_.mul(v.w),v.w);return{globalNDC:f,globalClipPosition:v,orthoFixedClipPosition:$,orthoZoomedClipPosition:y,orthographicClipPosition:k}},Ga=({positionClipZ:t,fogBoundaryClipZ:e,distance:n})=>{const s=z(1).sub(Ot(t,z(1),e));return M(s,z(0),Ht(z(400),z(800),n))},qa=(t,e)=>{const n=t.r.add(t.g).add(t.b).div(3);return M(t,n.toVec3(),e)},Ka=t=>{const e=t.add(1).bitAnd(255).toFloat().div(255),n=t.add(1).bitAnd(65280).shiftRight(8).toFloat().div(255),s=t.add(1).bitAnd(16711680).shiftRight(16).toFloat().div(255);return B(e,n,s,1)},Xa=t=>{const e=Bt,{fixedProjection:n,fixedView:s,distance:i}=Xt(t),{selectedIndex:o,selectedColor:a,defaultFogBoundaryClipZ:r,nodeFog:l}=bt(t),c=me(t),d=c.getNodeProperties("positionInitial"),u=c.getNodeProperties("positionTarget"),p=d.element(e).sub(u.element(e).mul(0)),h=c.getNodeProperties("colorInitial"),v=c.getNodeProperties("colorTarget");h.element(e).sub(v.element(e).mul(0));const f=c.getNodeProperties("sizeInitial"),x=c.getNodeProperties("sizeTarget"),$=f.element(e).sub(x.element(e).mul(0)),g=c.getNodeProperties("emphasisInitial"),y=c.getNodeProperties("emphasisTarget"),m=g.element(e).sub(y.element(e).mul(0)),_=o.greaterThan(-1).not().cond(le(m),m),k=c.getNodeProperties("colorTarget"),Ae=e.equal(o),Ce=$.mul(Bn).mul(M(.5,1,m)),ve=Ut(Ce,.05),ue=Zs(t,{nodePosition:p,scale:Ce}),je=Zs(t,{nodePosition:p,scale:ve});s.mul(n).mul(Ti).normalize();let de=k.element(e);d.element(o),Tn(d.element(e));let S=ps(Ga({positionClipZ:ue.globalClipPosition.z,fogBoundaryClipZ:r,distance:i}),le(Ae.toFloat()));S=ps(S,le(_)),S=M(0,S,l);let P=de.w;P=M(.1,1,_);let A=de.xyz.mul(M(1,.5,S));A=qa(A,Ut(le(.2).mul(S),le(_))),de=B(A,P);const I=M(de,a,Ae.toFloat()),R=new Li().load(_a);return{graphNodeMaterial:new Oi({vertexNode:ue.orthographicClipPosition,matcap:R,colorNode:I,transparent:!0}),graphNodePickerMaterial:new Co({vertexNode:je.orthographicClipPosition,colorNode:Ka(e),depthWrite:!0})}},Ys=t=>{const e=me(t),n=Bt,s=e.getEdgePairs("positionInitial"),i=e.getEdgePairs("positionTarget"),o=e.getEdgePairs("sizeInitial"),a=e.getEdgePairs("sizeTarget"),r=e.getEdgePairs("colorInitial"),l=e.getEdgePairs("colorTarget");e.getEdgePairs("emphasisInitial");const c=e.getEdgePairs("emphasisTarget");return{sourcePosition:s.source.element(n).add(i.source.element(n).mul(0)).toVar("srcPosition"),targetPosition:s.target.element(n).add(i.target.element(n).mul(0)).toVar("tgtPosition"),sourceColor:r.source.element(n).sub(l.source.element(n).mul(0)).toVar("srcColor"),targetColor:r.target.element(n).sub(l.target.element(n).mul(0)).toVar("tgtColor"),sourceSize:o.source.element(n).sub(a.source.element(n).mul(0)).mul(Bn).toVar("srcSize"),targetSize:o.target.element(n).sub(a.target.element(n).mul(0)).mul(Bn).toVar("tgtSize"),sourceEmphasis:c.source.element(n).x.toVar("srcEmphasis"),targetEmphasis:c.target.element(n).y.toVar("tgtEmphasis"),edgeIndices:e.getEdgeIndices().element(n).toVar("edgeIndices")}},Za=({nodePosition:t,vertexPosition:e,edgeDirection:n,scale:s,flatness:i,globalView:o,globalProjection:a,globalScale:r,edgeScale:l})=>{const c=ko(n),d=ot(c.y.negate(),c.x).toVar("edgePerpendicular").mul(s).mul(r).mul(l).div(3),u=a.toVar("projection").mul(o.toVar("view")).mul(B(t,1)).toVar("position"),p=u.div(u.w),h=B(u.xy.add(e.y.mul(d)),u.zw),f=p.add(B(e.y.mul(d),0,0)).mul(u.w);return M(h,f,i)},Ya=t=>{const{globalProjection:e,globalView:n,distance:s}=Xt(t),{selectedIndex:i,selectedColor:o,mousePosition:a,hoveringIndex:r,edgeFrequency:l,edgePulseSpeed:c,edgeWaveSpeed:d,time:u,devicePixelRatio:p,nodeDepthTexture:h,globalScale:v,edgeScale:f,edgeOvershoot:x,defaultFogBoundaryClipZ:$,edgeFog:g,selectedEdgeColor:y}=bt(t),m=Vi("segmentOffset","vec3");let{sourcePosition:C,targetPosition:_,sourceColor:k,targetColor:Ae,sourceSize:Ce,targetSize:ve,sourceEmphasis:ue,targetEmphasis:je,edgeIndices:de}=Ys(t);const P=zt(m.y.mul(x),m.x,m.z).add(zt(x.mul(.5),0,0)).toVar("segmentPosition"),A=P.x.toVar("isSource"),I=le(A).toVar("isTarget"),R=P.toVar("vertexOffset"),he=C.mul(A).add(_.mul(I)).toVar("nodePosition"),D=e.toVar("projection").mul(n.toVar("view")).mul(B(C,1)).toVar("sourcePositionClip"),V=e.toVar("projection").mul(n.toVar("view")).mul(B(_,1)).toVar("targetPositionClip"),W=ko(V.xyz.div(V.w).sub(D.xyz.div(D.w))).xy.toVar("edgeDirection"),H=Ce.mul(A).add(ve.mul(I)).mul(.4).toVar("size"),U=z(1).toVar("flatness"),be=Za({nodePosition:he,vertexPosition:R,edgeDirection:W,scale:H,flatness:U,globalView:n,globalProjection:e,globalScale:v,edgeScale:f}).toVar("positionClip");let fe=k.mul(A).add(Ae.mul(I)).toVar("color");const ye=de.x,we=de.y,Re=gs(i,ye).toFloat(),De=gs(i,we).toFloat(),wt=Re.mul(A).add(De.mul(I));Ut(Re,De).toFloat();const en=z(ji(i,-1)).toVar("isAnySelected"),Fe=Ut(ue,je).toVar("emphasis"),xt=wt;let tn=fe.xyz,ke=z(1);ke=ke.mul(M(.4,1,M(1,Fe,en))),ke=ke.mul(M(1,M(.3,1,Fe),Ht(400,1200,s))),fe=B(tn,ke);const We=Ja(be.z,$.div(2)).toVar("fog"),nn=q(fe);q(We),q(Fe),q(H),q(I);const ui=q(D.xy.div(D.w).toVar("sourcePosition2DNDC")),di=V.xy.div(V.w).toVar("targetPosition2DNDC"),sn=q(ui.reflect(ot(0,1)).add(ot(1,1)).mul(.5).mul(ms)),hi=q(di.reflect(ot(0,1)).add(ot(1,1)).mul(.5).mul(ms)),as=q(Tn(_.sub(C))),_t=q(Tn(hi.sub(sn)));q(R.y);const ls=q(P.y),fi=()=>{const cs=vs(sn,bs).div(_t),us=I;let $t=nn,xe=$t.w.mul(M(Ot(ls,z(2).mul(le(We)),1),1,We));Ys(t);const pi=_t.mul(l).mul(.1),gi=z(4).mul(d).div(_t),mi=$n(cs.sub(u.mul(gi)),pi),vi=as.div(4).mul(l),bi=z(20).div(as).mul(c),on=Ao(at($n(cs.sub(u.mul(bi)),1),_t.div(2)),0,1);let Et=$t.xyz;Et=M($t.xyz,zt(1,1,0),M(0,on,.1)),xe=$t.w.mul(M(1,mi,le(on))),xe=xe.mul(Ot(ls,1,on.mul(M(.2,.4,Fe)).mul($n(us,vi)).add(.6))),xe=xe.mul(M(.4,1,xt)),xe=xe.mul(Ot(us.sub(.5),2,x));const yi=vs(bs,sn),wi=z(100);return Ht(wi,z(0),yi),Et=M(Et,o.xyz,wt),B(Et,xe)};return new Co({vertexNode:be,colorNode:fi(),depthTest:!1,transparent:!0})},Ja=(t,e)=>Ht(0,1,t.sub(e).div(e)),$n=(t,e)=>at(Ri(t.mul(e).mul(Math.PI)),2),Gn=N.infinite((t,e="cone")=>{let n;if(e=="sphere")n=new Di(1,32,32);else if(e=="cone")n=new Fi(1,2,128);else if(e=="icosohedron")n=new Wi(1.5,0);else if(e==="box")n=new Hi(1,1,1);else if(e==="heart"){const d=new wa().load(xa).children[0].geometry;if(!d.index){const h=[],v=d.attributes.position;for(let f=0;f<v.count;f+=3)h.push(f,f+1,f+2);d.setIndex(h)}let u=1;d.scale(u,u,u),console.debug(d),n=d;let p=new ys(1,.3,128,64,3,5);console.debug(p)}else e==="brain"&&(n=new ys(1,.3,128,64,2,3));n.computeVertexNormals();const s=new No;s.setAttribute("position",n.attributes.position),s.setAttribute("normal",n.attributes.normal),s.setIndex(n.index),s.setAttribute("index",new Ln(new Int32Array([]),1)),s.setAttribute("index",new Ln(new Int32Array([1,2,3,4]),1));const{graphNodeMaterial:i,graphNodePickerMaterial:o}=Xa(t),a=new dt(s,i),r=new dt(s,o);return{mesh:a,pickerMesh:r}});N.infinite((t,e)=>{const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;return new Ln(n,1)});const Qa=(t,e)=>{console.debug("loading node vertex array",e);const{mesh:n,pickerMesh:s}=Gn(t);n.geometry.instanceCount=e,s.geometry.instanceCount=e},Go=N.infinite(t=>{const e=new Ui(.5,.5,1,4,4,!0),n=new No;return n.setAttribute("segmentOffset",e.attributes.position),n.setIndex(e.index),new dt(n,Ya(t))}),Oe=N.infinite(t=>{const{canvas:e,gl:n}=G(t),s=new ln,i=new ln,o=new ln,a=new Bi(75,window.innerWidth/window.innerHeight,.5,1e3);a.position.z=10;const r=new Gi(16777215,2);s.add(r);const l=new qi({canvas:e,forceWebGL:!0});l.setClearColor(new Po("#000000"),0),l.setSize(window.innerWidth,window.innerHeight),l.setPixelRatio(window.devicePixelRatio);const c=Go(t);s.add(c);const d=Gn(t).mesh;s.add(d);const u=Gn(t).pickerMesh;return o.add(u),{scene:s,depthScene:i,pickerScene:o,camera:a,renderer:l,nodeVisualizerMesh:d,edgeVisualizerMesh:c,nodePickerMesh:u}}),Qn=N.infinite(t=>{const{canvas:e}=G(t);return new Mo(e.width,e.height,{stencilBuffer:!1})}),el=N.infinite(t=>{const{canvas:e}=G(t);return new Mo(e.width,e.height,{depthTexture:new Ki(e.width,e.height),depthBuffer:!0,stencilBuffer:!1})}),tl=new pa({saturation:.7,lightness:.6}),nl=t=>t.replace(/^(https?:\/\/)?(www\.)?([a-z0-9-]+\.)+[a-z0-9-]+/i,"").replace(/\/$/,"").replace(/^\//,"").replace(/[^A-Za-z0-9\.]/gi,"-").replace(/-+/g,"-").replace(/^package-/,"").replace(/-v-/,"-"),me=N.infinite(t=>{const e=Xi(t);return window.bufferState=e,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"emphasis",type:"float"},{name:"size",type:"float"}].forEach(({name:s,type:i})=>{const o=new Float32Array(0),a=new Float32Array(0);e.setNodeProperties(`${s}Initial`,i,o),e.setNodeProperties(`${s}Target`,i,a)}),e}),sl=async(t,e,n=!0)=>{const{set:s}=Kt(t,"graphData");s(e),(await Xo(t,e)).setData(e);const{nodes:o,linkIndexPairs:a}=e,r=me(t),l=n?r.getNodeCount():0;n&&r.getEdgeCount(),r.setNodeCount(o.length),r.setEdges(a);const c=40,d=()=>[Math.random()*c-c/2,Math.random()*c-c/2,Math.random()*c-c/2],u=new Float32Array(o.length*3);if(n){const f=r.getNodeProperties("positionTarget","vec3").value.array;u.set(f.subarray(0,l*3));for(let x=l;x<o.length;x++){const $=d();u.set($,x*3)}}else for(let f=0;f<o.length;f++){const x=d();u.set(x,f*3)}r.setNodeProperties("positionInitial","vec3",u),r.setNodeProperties("positionTarget","vec3",u);const p=new Float32Array(o.length*4);if(n){const f=r.getNodeProperties("colorTarget","vec4").value.array;p.set(f.subarray(0,l*4));for(let x=l;x<o.length;x++)p.set(o[x].color,x*4)}else for(let f=0;f<o.length;f++)p.set(o[f].color,f*4);r.setNodeProperties("colorInitial","vec4",p),r.setNodeProperties("colorTarget","vec4",p);const h=new Float32Array(o.length);if(n){const f=r.getNodeProperties("sizeTarget","float").value.array;h.set(f.subarray(0,l));for(let x=l;x<o.length;x++)h[x]=o[x].size}else for(let f=0;f<o.length;f++)h[f]=o[f].size;r.setNodeProperties("sizeInitial","float",h),r.setNodeProperties("sizeTarget","float",h);const v=new Float32Array(o.length);if(n){const f=r.getNodeProperties("emphasisTarget","float").value.array;v.set(f.subarray(0,l)),v.fill(0,l)}else v.fill(0);r.setNodeProperties("emphasisTarget","float",v),Qa(t,o.length),Go(t).geometry.instanceCount=a.length,il(t,e)},F=async t=>await Kt(t,"graphData").get(),qo=t=>({index:t,id:`node://${t}`,size:1,color:[...tl.rgb(String(t)).map(e=>e/255),1],navId:nl(`node-${t}`)}),Ko=t=>()=>{const e=Math.floor(Math.random()*t.length),n=Math.floor(Math.random()*t.length);return{sourceIndex:e,targetIndex:n,source:t[e],target:t[n]}},ac=(t,e,n=0)=>{const s=[...Array(t).keys()].map(l=>l+n).map(qo),i=[...Array(e).keys()].map(Ko(s)),o=i.map(({sourceIndex:l,targetIndex:c})=>[l,c]),a=ws(s.map(l=>[l.navId,l])),r=ws(s.map(l=>[l.id,l]));return{nodes:s,links:i,linkIndexPairs:o,nodesByNavId:a,nodesById:r}},lc=(t,{nodes:e,nodesByNavId:n,nodesById:s})=>{const i=e.length,o=[...Array(t).keys()].map(a=>a+i).map(qo);e.push(...o),o.forEach(a=>{n[a.navId]=a,s[a.id]=a})},cc=(t,{nodes:e,links:n,linkIndexPairs:s})=>{const i=[...Array(t).keys()].map(Ko(e));n.push(...i),s.push(...i.map(({sourceIndex:o,targetIndex:a})=>[o,a]))},ol=t=>Kt(t,"graphDbPrepared"),il=async(t,e)=>{const{set:n}=Kt(t,"graphDbPrepared"),s=await jn(t).buildGraph(e);return n(!0),s};let Nt;const Xo=N.infinite(async(t,e)=>{const n=(await aa(t)).D3ForceLayout;return Nt=await new n(e),Nt.start(),Nt},{onExpire:()=>{Nt.stop()},transformArgs:([t,e])=>[t]}),Js=t=>me(t).getNodeProperties("positionTarget","vec3").value.array,rl=async t=>{const e=await F(t);(await Xo(t,e)).getPositions(Ft(s=>{s.length>0&&me(t).setNodeProperties("positionTarget","vec3",s)}))},Zt=(t,e)=>{const n=Js(t)?Js(t):[],s=e.index;return[n[s*3],n[s*3+1],n[s*3+2]]};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var En;const Gt=window,Je=Gt.trustedTypes,Qs=Je?Je.createPolicy("lit-html",{createHTML:t=>t}):void 0,qn="$lit$",Pe=`lit$${(Math.random()+"").slice(9)}$`,Zo="?"+Pe,al=`<${Zo}>`,Ve=document,ft=()=>Ve.createComment(""),pt=t=>t===null||typeof t!="object"&&typeof t!="function",Yo=Array.isArray,ll=t=>Yo(t)||typeof t?.[Symbol.iterator]=="function",Pn=`[ 	
\f\r]`,nt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,eo=/-->/g,to=/>/g,Ne=RegExp(`>|${Pn}(?:([^\\s"'>=/]+)(${Pn}*=${Pn}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),no=/'/g,so=/"/g,Jo=/^(?:script|style|textarea|title)$/i,cl=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),ul=cl(1),Qe=Symbol.for("lit-noChange"),O=Symbol.for("lit-nothing"),oo=new WeakMap,Te=Ve.createTreeWalker(Ve,129,null,!1);function Qo(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Qs!==void 0?Qs.createHTML(e):e}const dl=(t,e)=>{const n=t.length-1,s=[];let i,o=e===2?"<svg>":"",a=nt;for(let r=0;r<n;r++){const l=t[r];let c,d,u=-1,p=0;for(;p<l.length&&(a.lastIndex=p,d=a.exec(l),d!==null);)p=a.lastIndex,a===nt?d[1]==="!--"?a=eo:d[1]!==void 0?a=to:d[2]!==void 0?(Jo.test(d[2])&&(i=RegExp("</"+d[2],"g")),a=Ne):d[3]!==void 0&&(a=Ne):a===Ne?d[0]===">"?(a=i??nt,u=-1):d[1]===void 0?u=-2:(u=a.lastIndex-d[2].length,c=d[1],a=d[3]===void 0?Ne:d[3]==='"'?so:no):a===so||a===no?a=Ne:a===eo||a===to?a=nt:(a=Ne,i=void 0);const h=a===Ne&&t[r+1].startsWith("/>")?" ":"";o+=a===nt?l+al:u>=0?(s.push(c),l.slice(0,u)+qn+l.slice(u)+Pe+h):l+Pe+(u===-2?(s.push(void 0),r):h)}return[Qo(t,o+(t[n]||"<?>")+(e===2?"</svg>":"")),s]};class gt{constructor({strings:e,_$litType$:n},s){let i;this.parts=[];let o=0,a=0;const r=e.length-1,l=this.parts,[c,d]=dl(e,n);if(this.el=gt.createElement(c,s),Te.currentNode=this.el.content,n===2){const u=this.el.content,p=u.firstChild;p.remove(),u.append(...p.childNodes)}for(;(i=Te.nextNode())!==null&&l.length<r;){if(i.nodeType===1){if(i.hasAttributes()){const u=[];for(const p of i.getAttributeNames())if(p.endsWith(qn)||p.startsWith(Pe)){const h=d[a++];if(u.push(p),h!==void 0){const v=i.getAttribute(h.toLowerCase()+qn).split(Pe),f=/([.?@])?(.*)/.exec(h);l.push({type:1,index:o,name:f[2],strings:v,ctor:f[1]==="."?fl:f[1]==="?"?gl:f[1]==="@"?ml:Yt})}else l.push({type:6,index:o})}for(const p of u)i.removeAttribute(p)}if(Jo.test(i.tagName)){const u=i.textContent.split(Pe),p=u.length-1;if(p>0){i.textContent=Je?Je.emptyScript:"";for(let h=0;h<p;h++)i.append(u[h],ft()),Te.nextNode(),l.push({type:2,index:++o});i.append(u[p],ft())}}}else if(i.nodeType===8)if(i.data===Zo)l.push({type:2,index:o});else{let u=-1;for(;(u=i.data.indexOf(Pe,u+1))!==-1;)l.push({type:7,index:o}),u+=Pe.length-1}o++}}static createElement(e,n){const s=Ve.createElement("template");return s.innerHTML=e,s}}function et(t,e,n=t,s){var i,o,a,r;if(e===Qe)return e;let l=s!==void 0?(i=n._$Co)===null||i===void 0?void 0:i[s]:n._$Cl;const c=pt(e)?void 0:e._$litDirective$;return l?.constructor!==c&&((o=l?._$AO)===null||o===void 0||o.call(l,!1),c===void 0?l=void 0:(l=new c(t),l._$AT(t,n,s)),s!==void 0?((a=(r=n)._$Co)!==null&&a!==void 0?a:r._$Co=[])[s]=l:n._$Cl=l),l!==void 0&&(e=et(t,l._$AS(t,e.values),l,s)),e}class hl{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var n;const{el:{content:s},parts:i}=this._$AD,o=((n=e?.creationScope)!==null&&n!==void 0?n:Ve).importNode(s,!0);Te.currentNode=o;let a=Te.nextNode(),r=0,l=0,c=i[0];for(;c!==void 0;){if(r===c.index){let d;c.type===2?d=new yt(a,a.nextSibling,this,e):c.type===1?d=new c.ctor(a,c.name,c.strings,this,e):c.type===6&&(d=new vl(a,this,e)),this._$AV.push(d),c=i[++l]}r!==c?.index&&(a=Te.nextNode(),r++)}return Te.currentNode=Ve,o}v(e){let n=0;for(const s of this._$AV)s!==void 0&&(s.strings!==void 0?(s._$AI(e,s,n),n+=s.strings.length-2):s._$AI(e[n])),n++}}class yt{constructor(e,n,s,i){var o;this.type=2,this._$AH=O,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=s,this.options=i,this._$Cp=(o=i?.isConnected)===null||o===void 0||o}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=et(this,e,n),pt(e)?e===O||e==null||e===""?(this._$AH!==O&&this._$AR(),this._$AH=O):e!==this._$AH&&e!==Qe&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):ll(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==O&&pt(this._$AH)?this._$AA.nextSibling.data=e:this.$(Ve.createTextNode(e)),this._$AH=e}g(e){var n;const{values:s,_$litType$:i}=e,o=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=gt.createElement(Qo(i.h,i.h[0]),this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===o)this._$AH.v(s);else{const a=new hl(o,this),r=a.u(this.options);a.v(s),this.$(r),this._$AH=a}}_$AC(e){let n=oo.get(e.strings);return n===void 0&&oo.set(e.strings,n=new gt(e)),n}T(e){Yo(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let s,i=0;for(const o of e)i===n.length?n.push(s=new yt(this.k(ft()),this.k(ft()),this,this.options)):s=n[i],s._$AI(o),i++;i<n.length&&(this._$AR(s&&s._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var s;for((s=this._$AP)===null||s===void 0||s.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cp=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class Yt{constructor(e,n,s,i,o){this.type=1,this._$AH=O,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=o,s.length>2||s[0]!==""||s[1]!==""?(this._$AH=Array(s.length-1).fill(new String),this.strings=s):this._$AH=O}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,s,i){const o=this.strings;let a=!1;if(o===void 0)e=et(this,e,n,0),a=!pt(e)||e!==this._$AH&&e!==Qe,a&&(this._$AH=e);else{const r=e;let l,c;for(e=o[0],l=0;l<o.length-1;l++)c=et(this,r[s+l],n,l),c===Qe&&(c=this._$AH[l]),a||(a=!pt(c)||c!==this._$AH[l]),c===O?e=O:e!==O&&(e+=(c??"")+o[l+1]),this._$AH[l]=c}a&&!i&&this.j(e)}j(e){e===O?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class fl extends Yt{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===O?void 0:e}}const pl=Je?Je.emptyScript:"";class gl extends Yt{constructor(){super(...arguments),this.type=4}j(e){e&&e!==O?this.element.setAttribute(this.name,pl):this.element.removeAttribute(this.name)}}class ml extends Yt{constructor(e,n,s,i,o){super(e,n,s,i,o),this.type=5}_$AI(e,n=this){var s;if((e=(s=et(this,e,n,0))!==null&&s!==void 0?s:O)===Qe)return;const i=this._$AH,o=e===O&&i!==O||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==O&&(i===O||o);o&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,s;typeof this._$AH=="function"?this._$AH.call((s=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&s!==void 0?s:this.element,e):this._$AH.handleEvent(e)}}class vl{constructor(e,n,s){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=s}get _$AU(){return this._$AM._$AU}_$AI(e){et(this,e)}}const io=Gt.litHtmlPolyfillSupport;io?.(gt,yt),((En=Gt.litHtmlVersions)!==null&&En!==void 0?En:Gt.litHtmlVersions=[]).push("2.8.0");const ei=(t,e,n)=>{var s,i;const o=(s=n?.renderBefore)!==null&&s!==void 0?s:e;let a=o._$litPart$;if(a===void 0){const r=(i=n?.renderBefore)!==null&&i!==void 0?i:null;o._$litPart$=a=new yt(e.insertBefore(ft(),r),r,void 0,n??{})}return a._$AI(t),a},bl=(t,e)=>{const{canvas:n}=G(t),s=n.getBoundingClientRect(),i=(e.clientX-s.left)/s.width,o=(e.clientY-s.top)/s.height;return{x:i*2-1,y:-(o*2-1)}},Vt=(t,...e)=>Z(t).getGlobalCamera(t,...e),yl=(t,...e)=>Z(t).updateCameras(t,...e),wl=(t,...e)=>Z(t).getGlobalCameraParams(t,...e),ti=(t,...e)=>Z(t).setCameraCenter(t,...e),ro=(t,...e)=>Z(t).setCameraDistance(t,...e),ao=(t,...e)=>Z(t).zoomGlobalCamera(t,...e),lo=(t,...e)=>Z(t).panGlobalCamera(t,...e),co=(t,...e)=>Z(t).startZooming(t,...e),xl=(t,...e)=>Z(t).stopZooming(t,...e),uo=(t,...e)=>Z(t).startPanning(t,...e),ho=(t,...e)=>Z(t).stopPanning(t,...e),_l=(t,...e)=>Z(t).computeScreenPosition(t,...e),fo=()=>window.matchMedia("(pointer:fine)").matches,po=async t=>{const e=ce(t);xl(t);const n=ht(t),s=(await wl(t)).distance;n>-1?(e.focusedZoom=Math.min(s,e.zoomBoundary),console.debug("setting selected zoom",e.focusedZoom)):(e.unfocusedZoom=Math.max(s,e.zoomBoundary),console.debug("setting deselected zoom",e.unfocusedZoom))},mt=t=>ge(t,"pointerPositionInfo",()=>({x:0,y:0,canvasX:0,canvasY:0,pickerX:0,pickerY:0})).get(),go=new Uint8Array(4).fill(0);let Sn=-1,jt=!1,rt=0,Ze=0;const An=()=>{rt++},$l=async(t,e)=>{const{nodes:n}=await F(t),s=n[e];ce(t).dispatchEvent(new CustomEvent("tap",{detail:{tappedIndex:e,info:s}}))},ni=t=>[mt(t).x,mt(t).y],El=t=>[mt(t).pickerX,mt(t).pickerY],Rt=Zi((t,{x:e,y:n})=>{const{canvas:s}=G(t),i=mt(t);i.x=e,i.y=n,i.canvasX=(e+1)/2*s.width,i.canvasY=(n+1)/2*s.height;const o=window.devicePixelRatio||1;i.pickerX=Math.floor(i.canvasX/o),i.pickerY=Math.floor(i.canvasY/o)}),Jt=t=>ge(t,"currentlyHoveringIndex",()=>-1).get(),Pl=async t=>{const{nodes:e}=await F(t),n=Jt(t);return e[n]},Sl=N.infinite(t=>{const e=t.context,{canvas:n}=G(e);Tt(n).on("touchmove",Rt(e)).on("mousemove",Rt(e)),Tt(n).on("mousemove",()=>{!jt&&Ml(e)()}),Tt(n).on("touchmove",An).on("pinchmove",An).on("mousemove",An),n.addEventListener("pointerdown",async s=>{console.debug("pointer down");const i=async([r,l])=>{console.debug("pointer clickHandler",r,l);const c=Ze>.03||rt>5;if(console.debug("was drag",c,Ze,rt),jt=!1,!c){const d=Jt(e);$l(e,d).catch(u=>{console.error("Error in notifyTapped:",u)})}},o=new Promise((r,l)=>{n.addEventListener("pointerup",r,{once:!0}),setTimeout(()=>l("pointer event timed out after 100ms"),200)});jt=!0,rt=0,Ze=0;const a=[o,zl(e)];Promise.all(a).then(i).catch(r=>console.debug(r)),setTimeout(()=>{Ze>.03||rt>5||es(e)()},2),Rt(e,bl(e,s))}),n.addEventListener("selected",s=>{}),n.addEventListener("hover",async s=>{const{nodes:i}=await F(e),o=s.detail.wasHoveredIndex;o>-1&&i[o];const a=s.detail.nowHoveredIndex,r=a>-1?i[a]:null;ht(e)>-1&&i[ht(e)],r?ge(e,"currentlyHoveringIndex").set(r?.index!=null?r.index:-1):ge(e,"currentlyHoveringIndex").set(-1)})}),Mt=Math.PI/3,Al=t=>{const{canvas:e}=G(t);e.addEventListener("wheel",n=>{const s=Math.exp(n.deltaY/e.clientHeight*2)-1,i=Math.sign(s);co(t),ao(t,0,0,i*Math.min(Math.abs(s),.06)),n.preventDefault(),po(t)},{passive:!1}),Tt(e).on("mousemove",function(n){!n.active||n.buttons!==1||(Ze+=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2)),n.mods.shift?(uo(t),lo(t,n.dx,n.dy)):n.mods.meta?Vt(t).pivot(n.dx,n.dy):(Vt(t).rotate(-n.dx*Mt,-n.dy*Mt),ho(t)),n.originalEvent.preventDefault())}).on("touchmove",function(n){Rt(n),n.active&&(Ze+=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2)),Vt(t).rotate(-n.dx*Mt,-n.dy*Mt))}).on("pinchmove",function(n){n.active&&(jt=!0,uo(t),co(t),ao(t,0,0,1-n.zoomx),lo(t,n.dx,n.dy))}).on("touchstart",n=>n.originalEvent.preventDefault()).on("pinchstart",n=>n.originalEvent.preventDefault()).on("pinchend",()=>{ho(t),po(t)})},si=N.infinite(t=>({lastOverIndex:-1,pickerTime:0,pickerSync:null,pickerFailures:0,pickerGuardFailed:!1})),Cl=t=>t[0]+t[1]*256+t[2]*256*256-1,kl=t=>{const e=si(t),n=G(t).gl,s=()=>n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return e.pickerSync?n?.clientWaitSync(e.pickerSync,0,0)===n?.CONDITION_SATISFIED?(n.deleteSync(e.pickerSync),e.pickerSync=s(),!0):!1:(e.pickerSync=s(),!1)},es=N.infinite(t=>()=>{const e=si(t),n=kl(t),{canvas:s}=G(t),i=G(t).gl;if(e.pickerFailures>10&&(e.pickerGuardFailed=!0,console.warn("picker guard failed")),!n&&!e.pickerGuardFailed)console.debug("not ready to read picker pixel yet"),e.pickerFailures+=1;else{e.pickerFailures=0;const{renderer:o}=Oe(t),a=El(t),r=Qn(t);a[0]>=0&&a[0]<r.width&&a[1]>=0&&a[1]<r.height&&o.readRenderTargetPixelsAsync(r,...a,1,1).then(l=>{i.flush();for(let d=0;d<4;d++)go[d]=l[d];const c=Cl(go);setTimeout(()=>{s.dispatchEvent(new CustomEvent("hover",{detail:{wasHoveredIndex:Sn,nowHoveredIndex:c}}))},1),c>-1&&setTimeout(()=>{s.dispatchEvent(new CustomEvent("hoveron",{detail:{wasHoveredIndex:Sn,nowHoveredIndex:c}}))},10),Sn=c})}}),Nl=t=>Vn(es(t),1e3),Ml=t=>$o(es(t),300),zl=async t=>(console.debug("waiting for hover event"),new Promise(e=>{const n=G(t).canvas,s=i=>{console.debug("got hover event",i.detail),e(i.detail)};n.addEventListener("hover",s,{once:!0})})),ts=N.deep((t,{classes:e,htmlTemplate:n,applyScreenPositionStyle:s}={})=>{const i=ce(t);s=s||((d,u)=>{u.style.left=`${d[0]}vw`,u.style.bottom=`${d[1]}vh`});const o=document.createElement("div");o?.classList.add("cursor"),e?.forEach(d=>o?.classList.add(d)),i?.shadowRoot?.appendChild(o);const a=d=>{s(d,o)},r=d=>{const u=[(d[0]+1)/2*100,(d[1]+1)/2*100];a(u)},l=Vn(async d=>{const u=Zt(t,d),p=await _l(t,u);r(p)},1e3/10),c=Vn(async d=>{d?(await l(d),o.classList.add("focused")):o.classList.remove("focused"),d&&n&&ei(n(d),o)},50);return{element:o,alignToScreenPosition:a,alignToNDCPosition:r,alignToNode:l,highlightNode:c,destroy:()=>o.remove()}}),Il=N.infinite(t=>ts(t,{classes:["selected-cursor"]})),Tl=N.infinite(t=>ts(t,{classes:["hovered-tooltip"],htmlTemplate:e=>ul`
      <div class="node-name">${e.data?.name}</div>
    `,applyScreenPositionStyle(e,n){n.style.left=`calc(min(${e[0]}vw, calc(100vw - 15em)))`,n.style.bottom=`${e[1]}vh`}})),Ll=N.infinite(t=>ts(t,{classes:["hovered-cursor"]}));var ns={exports:{}};function Ol(t,e){var n=e&&e.cache?e.cache:Wl,s=e&&e.serializer?e.serializer:Fl,i=e&&e.strategy?e.strategy:jl;return i(t,{cache:n,serializer:s})}function Vl(t){return t==null||typeof t=="number"||typeof t=="boolean"}function oi(t,e,n,s){var i=Vl(s)?s:n(s),o=e.get(i);return typeof o>"u"&&(o=t.call(this,s),e.set(i,o)),o}function ii(t,e,n){var s=Array.prototype.slice.call(arguments,3),i=n(s),o=e.get(i);return typeof o>"u"&&(o=t.apply(this,s),e.set(i,o)),o}function ss(t,e,n,s,i){return n.bind(e,t,s,i)}function jl(t,e){var n=t.length===1?oi:ii;return ss(t,this,n,e.cache.create(),e.serializer)}function Rl(t,e){var n=ii;return ss(t,this,n,e.cache.create(),e.serializer)}function Dl(t,e){var n=oi;return ss(t,this,n,e.cache.create(),e.serializer)}function Fl(){return JSON.stringify(arguments)}function Qt(){this.cache=Object.create(null)}Qt.prototype.has=function(t){return t in this.cache};Qt.prototype.get=function(t){return this.cache[t]};Qt.prototype.set=function(t,e){this.cache[t]=e};var Wl={create:function(){return new Qt}};ns.exports=Ol;ns.exports.strategies={variadic:Rl,monadic:Dl};var Hl=ns.exports;const Ul=_o(Hl),Bl=Ul((t,e)=>{const n=Yi(()=>{for(const{current:i,target:o}of e){let a=i.element(Bt),r=o.element(Bt);a.assign(a.add(r.sub(a).mul(.05)))}}),s=e[0]?.target.value.count;return n().compute(s)},{serializer:([t,e])=>{let n=e;const s=me(t);return n=JSON.stringify(e.flatMap(i=>[s.getNodeCount(),i?.target?.uuid,s.getEdgeCount(),i?.current?.uuid])),n}}),Me=(t,e)=>{const{renderer:n}=Oe(t),s=Bl(t,e);Oe(t),n.compute(s)},Gl=t=>{const e=me(t);Me(t,[{current:e.getNodeProperties("positionInitial"),target:e.getNodeProperties("positionTarget")},{current:e.getNodeProperties("sizeInitial"),target:e.getNodeProperties("sizeTarget")}]),Me(t,[{current:e.getNodeProperties("emphasisInitial"),target:e.getNodeProperties("emphasisTarget")}]),Me(t,[{current:e.getNodeProperties("colorInitial"),target:e.getNodeProperties("colorTarget")}]),Me(t,[{current:e.getEdgePairs("positionInitial").source,target:e.getEdgePairs("positionTarget").source},{current:e.getEdgePairs("positionInitial").target,target:e.getEdgePairs("positionTarget").target}]),Me(t,[{current:e.getEdgePairs("sizeInitial").source,target:e.getEdgePairs("sizeTarget").source},{current:e.getEdgePairs("sizeInitial").target,target:e.getEdgePairs("sizeTarget").target}]),Me(t,[{current:e.getEdgePairs("colorInitial").source,target:e.getEdgePairs("colorTarget").source},{current:e.getEdgePairs("colorInitial").target,target:e.getEdgePairs("colorTarget").target}]),Me(t,[{current:e.getEdgePairs("emphasisInitial").source,target:e.getEdgePairs("emphasisTarget").source},{current:e.getEdgePairs("emphasisInitial").target,target:e.getEdgePairs("emphasisTarget").target}])};window.addEventListener("keydown",t=>{t.key,t.key});const os=N.infinite(t=>{const e=ce(t),n=window.devicePixelRatio||1,s=e.clientWidth,i=e.clientHeight,o=Math.floor(s*n),a=Math.floor(i*n);return{width:o,height:a,clientWidth:s,clientHeight:i}}),ql=(t,e=null)=>{const{set:n,get:s}=ge(t,"canvas"),i=s();n(e?i||e:i||document.createElement("canvas"))},G=N.infinite(t=>{const e=ge(t,"canvas").get(),n=e.getContext("webgl2",{powerPreference:"high-performance"});return n?console.debug("WebGL2 initialized"):console.error("WebGL2 failed to initialize"),{canvas:e,gl:n}}),Kl=t=>{G(t);const{renderer:e,camera:n}=Oe(t),{width:s,height:i,clientWidth:o,clientHeight:a}=os(t);ce(t),e.setSize(o,a),n.aspect=o/a,Qn(t).setSize(o,a),el(t).setSize(o,a),Vt(t).resize(s/i)},Xl=t=>{bt(t)},ri=t=>{Ba(t),rl(t),Wa(t).then(c=>{Il(t).highlightNode(c)}),fo()&&Pl(t).then(c=>{Tl(t).highlightNode(c),Ll(t).highlightNode(c)});const{width:e,height:n}=os(t);yl(t,er(t),e,n),G(t);const{renderer:s,scene:i,camera:o,nodeVisualizerMesh:a,nodePickerMesh:r,edgeVisualizerMesh:l}=Oe(t);Fa(t),Gl(t),s.setRenderTarget(null),s.render(i,o),s.render(r,o),s.setRenderTarget(Qn(t)),s.render(r,o),fo()&&Nl(t)(),requestAnimationFrame(()=>ri(t))};var Ye={},Zl=(t,e)=>{Ye[t]??(Ye[t]=[]),Ye[t].push(e)},Yl=(t,e)=>{var n;(n=Ye[t])==null||n.splice(Ye[t].indexOf(e),1)},mo=async(t,e,n)=>{for(const s of Ye[t]??[])await s(e,n)},Cn=t=>t.length>1&&t.endsWith("/")?t.slice(0,-1):t,Jl=t=>{var e;const n=(e=t.match(/(:[^/]+)/g))==null?void 0:e.map(s=>s.substring(1));return n&&{keys:n,regExp:new RegExp("^"+t.replace(/(:[^/]+)/g,"([^/]+)")+"$")}},Ql=(t,e)=>Object.fromEntries(e.map((n,s)=>[n,t[s+1]])),ai=[],Ke,ec=t=>{for(const e of ai){const{pattern:n,regExp:s,keys:i}=e,o=s?t.match(s):n==="*"||n===t;if(o){const a=Array.isArray(o)?Ql(o,i):void 0;return{definition:e,params:a}}}},st=async(t,e)=>{const n=ec(t),s=!!n,i=n?.params??{},o=Ke;Ke={path:t,params:i,matches:s,trigger:e},await mo("before-route",Ke,o),await n?.definition.action(i,Ke,o),await mo("route",Ke,o)},is={get currentRoute(){return Ke},on:Zl,off:Yl,start({handleInitial:t=!0}={}){const e=window.location.hash!=""&&window.location.hash;t&&st(e||window.location.pathname||"/","init"),window.addEventListener("popstate",()=>st(window.location.pathname,"popstate")),window.addEventListener("hashchange",()=>{st(window.location.hash,"hashchange")})},route(t,e){const n=Cn(t),{regExp:s,keys:i=[]}=Jl(t)||{};ai.push({pattern:n,action:e,regExp:s,keys:i})},push(t){window.history.pushState(null,"",Cn(t)),st(t,"push")},replace(t){window.history.replaceState(null,"",Cn(t)),st(t,"replace")}};is.route("#-",()=>{console.debug("navigating to nothing")});is.route("#node/:id",async(t,{trigger:e})=>{});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Dt=window,rs=Dt.ShadowRoot&&(Dt.ShadyCSS===void 0||Dt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,li=Symbol(),vo=new WeakMap;let tc=class{constructor(e,n,s){if(this._$cssResult$=!0,s!==li)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(rs&&e===void 0){const s=n!==void 0&&n.length===1;s&&(e=vo.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),s&&vo.set(n,e))}return e}toString(){return this.cssText}};const nc=t=>new tc(typeof t=="string"?t:t+"",void 0,li),sc=(t,e)=>{rs?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const s=document.createElement("style"),i=Dt.litNonce;i!==void 0&&s.setAttribute("nonce",i),s.textContent=n.cssText,t.appendChild(s)})},bo=rs?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const s of e.cssRules)n+=s.cssText;return nc(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var kn;const qt=window,yo=qt.trustedTypes,oc=yo?yo.emptyScript:"",wo=qt.reactiveElementPolyfillSupport,Kn={toAttribute(t,e){switch(e){case Boolean:t=t?oc:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},ci=(t,e)=>e!==t&&(e==e||t==t),Nn={attribute:!0,type:String,converter:Kn,reflect:!1,hasChanged:ci},Xn="finalized";class Xe extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,s)=>{const i=this._$Ep(s,n);i!==void 0&&(this._$Ev.set(i,s),e.push(i))}),e}static createProperty(e,n=Nn){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const s=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,s,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,s){return{get(){return this[n]},set(i){const o=this[e];this[n]=i,this.requestUpdate(e,o,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Nn}static finalize(){if(this.hasOwnProperty(Xn))return!1;this[Xn]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,s=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of s)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const s=new Set(e.flat(1/0).reverse());for(const i of s)n.unshift(bo(i))}else e!==void 0&&n.push(bo(e));return n}static _$Ep(e,n){const s=n.attribute;return s===!1?void 0:typeof s=="string"?s:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,s;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((s=e.hostConnected)===null||s===void 0||s.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return sc(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostConnected)===null||s===void 0?void 0:s.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var s;return(s=n.hostDisconnected)===null||s===void 0?void 0:s.call(n)})}attributeChangedCallback(e,n,s){this._$AK(e,s)}_$EO(e,n,s=Nn){var i;const o=this.constructor._$Ep(e,s);if(o!==void 0&&s.reflect===!0){const a=(((i=s.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?s.converter:Kn).toAttribute(n,s.type);this._$El=e,a==null?this.removeAttribute(o):this.setAttribute(o,a),this._$El=null}}_$AK(e,n){var s;const i=this.constructor,o=i._$Ev.get(e);if(o!==void 0&&this._$El!==o){const a=i.getPropertyOptions(o),r=typeof a.converter=="function"?{fromAttribute:a.converter}:((s=a.converter)===null||s===void 0?void 0:s.fromAttribute)!==void 0?a.converter:Kn;this._$El=o,this[o]=r.fromAttribute(n,a.type),this._$El=null}}requestUpdate(e,n,s){let i=!0;e!==void 0&&(((s=s||this.constructor.getPropertyOptions(e)).hasChanged||ci)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),s.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,s))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,o)=>this[o]=i),this._$Ei=void 0);let n=!1;const s=this._$AL;try{n=this.shouldUpdate(s),n?(this.willUpdate(s),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var o;return(o=i.hostUpdate)===null||o===void 0?void 0:o.call(i)}),this.update(s)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(s)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(s=>{var i;return(i=s.hostUpdated)===null||i===void 0?void 0:i.call(s)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,s)=>this._$EO(s,this[s],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}Xe[Xn]=!0,Xe.elementProperties=new Map,Xe.elementStyles=[],Xe.shadowRootOptions={mode:"open"},wo?.({ReactiveElement:Xe}),((kn=qt.reactiveElementVersions)!==null&&kn!==void 0?kn:qt.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Mn,zn;class ut extends Xe{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const s=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=s.firstChild),s}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=ei(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return Qe}}ut.finalized=!0,ut._$litElement$=!0,(Mn=globalThis.litElementHydrateSupport)===null||Mn===void 0||Mn.call(globalThis,{LitElement:ut});const xo=globalThis.litElementPolyfillSupport;xo?.({LitElement:ut});((zn=globalThis.litElementVersions)!==null&&zn!==void 0?zn:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var In;((In=window.HTMLSlotElement)===null||In===void 0?void 0:In.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");class ic extends ut{constructor(){super();for(const[e,n]of Object.entries(Ks))this[e]=Ks[e];if(this.context=Symbol(),Ji(this.context,this),ce(this.context)!==this)throw new Error("What the heck");this.resizeObserver=new ResizeObserver(e=>{os.clear(this.context),Kl(this.context)}),this.onTapHandler=e=>{this.setAttribute("selected",e.detail?.info?.navId),this.focus=e.detail?.info?.navId}}static get properties(){return{globalScale:{type:Number,attribute:"global-scale"},nodeScale:{type:Number,attribute:"node-scale"},edgeFog:{type:Number,attribute:"edge-fog"},nodeFog:{type:Number,attribute:"node-fog"},edgeScale:{type:Number,attribute:"edge-scale"},edgeOvershoot:{type:Number,attribute:"edge-overshoot"},edgeFrequency:{type:Number,attribute:"edge-frequency"},edgePulseSpeed:{type:Number,attribute:"edge-pulse-speed"},edgeWaveSpeed:{type:Number,attribute:"edge-wave-speed"},selected:{type:String},focus:{type:String,attribute:!1},focusedZoom:{type:Number},unfocusedZoom:{type:Number},zoomBoundary:{type:Number},defaultFogVisibility:{type:Number,attribute:"default-fog-visibility"},defaultFogBoundaryClipZ:{type:Number,attribute:"default-fog-boundary-clip-z"}}}set graphData(e){sl(this.context,e)}get graphData(){return F(this.context)}onTap(e){this.onTapHandler=e}connectedCallback(){super.connectedCallback();const e=this.context,n=this.shadowRoot,s=document.createElement("style");s.textContent=`
      :host {
        display: block;
        min-width: 100%;
        min-height: 99vh;
        max-height: 100vh;
      }
    `,n.appendChild(s);const i=document.createElement("canvas");n.appendChild(i),ql(e,i),console.debug("Canvas created and set"),Xl(e),console.debug("Renderer initialized"),Oe(e),console.debug("Three.js setup complete"),Al(e),console.debug("Camera interaction set up"),Sl(this),console.debug("Selection setup complete"),document.querySelector("html")?.classList.add("loading"),console.debug("Added loading class to HTML"),F(this.context).then(o=>{console.debug("Graph data retrieved",o),document.querySelector("html").classList.remove("loading"),console.debug("Removed loading class from HTML"),ri(this.context),console.debug("Graph animation started"),is.start(),console.debug("Navigation started")}),Qi(this.context),this.resizeObserver.observe(this),_n(this.context),this.addEventListener("tap",o=>{o&&this.onTapHandler(o)})}disconnectedCallback(){this.resizeObserver.unobserve(this)}adoptedCallback(){}firstUpdated(e){for(const[n,s]of e)if(n=="selected"){const i=this[n];F(this.context).then(({nodesByNavId:o})=>{const a=o[i];Gs(this.context,a,!0)})}else n=="focus"&&_n(this.context)}updated(e){for(const[n,s]of e)if(n=="selected"){const i=this[n];F(this.context).then(({nodesByNavId:o})=>{const a=o[i];Gs(this.context,a,!0)})}else n=="focus"&&_n(this.context)}getNodeFromEvent(e){return null}}function dc(t="webscape-wanderer"){customElements.get(t)||customElements.define(t,ic)}export{lc as a,cc as b,ac as r,dc as s};
//# sourceMappingURL=main-4723a0fb.js.map
