function _mergeNamespaces(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(o){if(o!=="default"&&!(o in n)){var l=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return t[o]}})}})}),Object.freeze(n)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var buffer={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup$1[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function byteLength(n){var e=getLens(n),t=e[0],o=e[1];return(t+o)*3/4-o}function _byteLength(n,e,t){return(e+t)*3/4-t}function toByteArray(n){var e,t=getLens(n),o=t[0],l=t[1],d=new Arr(_byteLength(n,o,l)),u=0,a=l>0?o-4:o,c;for(c=0;c<a;c+=4)e=revLookup[n.charCodeAt(c)]<<18|revLookup[n.charCodeAt(c+1)]<<12|revLookup[n.charCodeAt(c+2)]<<6|revLookup[n.charCodeAt(c+3)],d[u++]=e>>16&255,d[u++]=e>>8&255,d[u++]=e&255;return l===2&&(e=revLookup[n.charCodeAt(c)]<<2|revLookup[n.charCodeAt(c+1)]>>4,d[u++]=e&255),l===1&&(e=revLookup[n.charCodeAt(c)]<<10|revLookup[n.charCodeAt(c+1)]<<4|revLookup[n.charCodeAt(c+2)]>>2,d[u++]=e>>8&255,d[u++]=e&255),d}function tripletToBase64(n){return lookup$1[n>>18&63]+lookup$1[n>>12&63]+lookup$1[n>>6&63]+lookup$1[n&63]}function encodeChunk(n,e,t){for(var o,l=[],d=e;d<t;d+=3)o=(n[d]<<16&16711680)+(n[d+1]<<8&65280)+(n[d+2]&255),l.push(tripletToBase64(o));return l.join("")}function fromByteArray(n){for(var e,t=n.length,o=t%3,l=[],d=16383,u=0,a=t-o;u<a;u+=d)l.push(encodeChunk(n,u,u+d>a?a:u+d));return o===1?(e=n[t-1],l.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):o===2&&(e=(n[t-2]<<8)+n[t-1],l.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),l.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(n,e,t,o,l){var d,u,a=l*8-o-1,c=(1<<a)-1,p=c>>1,m=-7,y=t?l-1:0,h=t?-1:1,T=n[e+y];for(y+=h,d=T&(1<<-m)-1,T>>=-m,m+=a;m>0;d=d*256+n[e+y],y+=h,m-=8);for(u=d&(1<<-m)-1,d>>=-m,m+=o;m>0;u=u*256+n[e+y],y+=h,m-=8);if(d===0)d=1-p;else{if(d===c)return u?NaN:(T?-1:1)*(1/0);u=u+Math.pow(2,o),d=d-p}return(T?-1:1)*u*Math.pow(2,d-o)};ieee754.write=function(n,e,t,o,l,d){var u,a,c,p=d*8-l-1,m=(1<<p)-1,y=m>>1,h=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=o?0:d-1,g=o?1:-1,v=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=m):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),u+y>=1?e+=h/c:e+=h*Math.pow(2,1-y),e*c>=2&&(u++,c/=2),u+y>=m?(a=0,u=m):u+y>=1?(a=(e*c-1)*Math.pow(2,l),u=u+y):(a=e*Math.pow(2,y-1)*Math.pow(2,l),u=0));l>=8;n[t+T]=a&255,T+=g,a/=256,l-=8);for(u=u<<l|a,p+=l;p>0;n[t+T]=u&255,T+=g,u/=256,p-=8);n[t+T-g]|=v*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){var e=base64Js,t=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=w,n.INSPECT_MAX_BYTES=50;var l=2147483647;n.kMaxLength=l,a.TYPED_ARRAY_SUPPORT=d(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{var j=new Uint8Array(1),b={foo:function(){return 42}};return Object.setPrototypeOf(b,Uint8Array.prototype),Object.setPrototypeOf(j,b),j.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function u(j){if(j>l)throw new RangeError('The value "'+j+'" is invalid for option "size"');var b=new Uint8Array(j);return Object.setPrototypeOf(b,a.prototype),b}function a(j,b,_){if(typeof j=="number"){if(typeof b=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(j)}return c(j,b,_)}a.poolSize=8192;function c(j,b,_){if(typeof j=="string")return h(j,b);if(ArrayBuffer.isView(j))return g(j);if(j==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(D(j,ArrayBuffer)||j&&D(j.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(D(j,SharedArrayBuffer)||j&&D(j.buffer,SharedArrayBuffer)))return v(j,b,_);if(typeof j=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var N=j.valueOf&&j.valueOf();if(N!=null&&N!==j)return a.from(N,b,_);var L=S(j);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof j[Symbol.toPrimitive]=="function")return a.from(j[Symbol.toPrimitive]("string"),b,_);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}a.from=function(j,b,_){return c(j,b,_)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function p(j){if(typeof j!="number")throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function m(j,b,_){return p(j),j<=0?u(j):b!==void 0?typeof _=="string"?u(j).fill(b,_):u(j).fill(b):u(j)}a.alloc=function(j,b,_){return m(j,b,_)};function y(j){return p(j),u(j<0?0:x(j)|0)}a.allocUnsafe=function(j){return y(j)},a.allocUnsafeSlow=function(j){return y(j)};function h(j,b){if((typeof b!="string"||b==="")&&(b="utf8"),!a.isEncoding(b))throw new TypeError("Unknown encoding: "+b);var _=E(j,b)|0,N=u(_),L=N.write(j,b);return L!==_&&(N=N.slice(0,L)),N}function T(j){for(var b=j.length<0?0:x(j.length)|0,_=u(b),N=0;N<b;N+=1)_[N]=j[N]&255;return _}function g(j){if(D(j,Uint8Array)){var b=new Uint8Array(j);return v(b.buffer,b.byteOffset,b.byteLength)}return T(j)}function v(j,b,_){if(b<0||j.byteLength<b)throw new RangeError('"offset" is outside of buffer bounds');if(j.byteLength<b+(_||0))throw new RangeError('"length" is outside of buffer bounds');var N;return b===void 0&&_===void 0?N=new Uint8Array(j):_===void 0?N=new Uint8Array(j,b):N=new Uint8Array(j,b,_),Object.setPrototypeOf(N,a.prototype),N}function S(j){if(a.isBuffer(j)){var b=x(j.length)|0,_=u(b);return _.length===0||j.copy(_,0,0,b),_}if(j.length!==void 0)return typeof j.length!="number"||k(j.length)?u(0):T(j);if(j.type==="Buffer"&&Array.isArray(j.data))return T(j.data)}function x(j){if(j>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return j|0}function w(j){return+j!=j&&(j=0),a.alloc(+j)}a.isBuffer=function(b){return b!=null&&b._isBuffer===!0&&b!==a.prototype},a.compare=function(b,_){if(D(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),D(_,Uint8Array)&&(_=a.from(_,_.offset,_.byteLength)),!a.isBuffer(b)||!a.isBuffer(_))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(b===_)return 0;for(var N=b.length,L=_.length,F=0,U=Math.min(N,L);F<U;++F)if(b[F]!==_[F]){N=b[F],L=_[F];break}return N<L?-1:L<N?1:0},a.isEncoding=function(b){switch(String(b).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(b,_){if(!Array.isArray(b))throw new TypeError('"list" argument must be an Array of Buffers');if(b.length===0)return a.alloc(0);var N;if(_===void 0)for(_=0,N=0;N<b.length;++N)_+=b[N].length;var L=a.allocUnsafe(_),F=0;for(N=0;N<b.length;++N){var U=b[N];if(D(U,Uint8Array))F+U.length>L.length?a.from(U).copy(L,F):Uint8Array.prototype.set.call(L,U,F);else if(a.isBuffer(U))U.copy(L,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=U.length}return L};function E(j,b){if(a.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||D(j,ArrayBuffer))return j.byteLength;if(typeof j!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var _=j.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&_===0)return 0;for(var L=!1;;)switch(b){case"ascii":case"latin1":case"binary":return _;case"utf8":case"utf-8":return je(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return _*2;case"hex":return _>>>1;case"base64":return Oe(j).length;default:if(L)return N?-1:je(j).length;b=(""+b).toLowerCase(),L=!0}}a.byteLength=E;function O(j,b,_){var N=!1;if((b===void 0||b<0)&&(b=0),b>this.length||((_===void 0||_>this.length)&&(_=this.length),_<=0)||(_>>>=0,b>>>=0,_<=b))return"";for(j||(j="utf8");;)switch(j){case"hex":return ie(this,b,_);case"utf8":case"utf-8":return te(this,b,_);case"ascii":return Y(this,b,_);case"latin1":case"binary":return oe(this,b,_);case"base64":return $(this,b,_);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,b,_);default:if(N)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),N=!0}}a.prototype._isBuffer=!0;function I(j,b,_){var N=j[b];j[b]=j[_],j[_]=N}a.prototype.swap16=function(){var b=this.length;if(b%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var _=0;_<b;_+=2)I(this,_,_+1);return this},a.prototype.swap32=function(){var b=this.length;if(b%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var _=0;_<b;_+=4)I(this,_,_+3),I(this,_+1,_+2);return this},a.prototype.swap64=function(){var b=this.length;if(b%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var _=0;_<b;_+=8)I(this,_,_+7),I(this,_+1,_+6),I(this,_+2,_+5),I(this,_+3,_+4);return this},a.prototype.toString=function(){var b=this.length;return b===0?"":arguments.length===0?te(this,0,b):O.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(b){if(!a.isBuffer(b))throw new TypeError("Argument must be a Buffer");return this===b?!0:a.compare(this,b)===0},a.prototype.inspect=function(){var b="",_=n.INSPECT_MAX_BYTES;return b=this.toString("hex",0,_).replace(/(.{2})/g,"$1 ").trim(),this.length>_&&(b+=" ... "),"<Buffer "+b+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(b,_,N,L,F){if(D(b,Uint8Array)&&(b=a.from(b,b.offset,b.byteLength)),!a.isBuffer(b))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof b);if(_===void 0&&(_=0),N===void 0&&(N=b?b.length:0),L===void 0&&(L=0),F===void 0&&(F=this.length),_<0||N>b.length||L<0||F>this.length)throw new RangeError("out of range index");if(L>=F&&_>=N)return 0;if(L>=F)return-1;if(_>=N)return 1;if(_>>>=0,N>>>=0,L>>>=0,F>>>=0,this===b)return 0;for(var U=F-L,X=N-_,ee=Math.min(U,X),ue=this.slice(L,F),de=b.slice(_,N),fe=0;fe<ee;++fe)if(ue[fe]!==de[fe]){U=ue[fe],X=de[fe];break}return U<X?-1:X<U?1:0};function z(j,b,_,N,L){if(j.length===0)return-1;if(typeof _=="string"?(N=_,_=0):_>2147483647?_=2147483647:_<-2147483648&&(_=-2147483648),_=+_,k(_)&&(_=L?0:j.length-1),_<0&&(_=j.length+_),_>=j.length){if(L)return-1;_=j.length-1}else if(_<0)if(L)_=0;else return-1;if(typeof b=="string"&&(b=a.from(b,N)),a.isBuffer(b))return b.length===0?-1:Q(j,b,_,N,L);if(typeof b=="number")return b=b&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(j,b,_):Uint8Array.prototype.lastIndexOf.call(j,b,_):Q(j,[b],_,N,L);throw new TypeError("val must be string, number or Buffer")}function Q(j,b,_,N,L){var F=1,U=j.length,X=b.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(j.length<2||b.length<2)return-1;F=2,U/=2,X/=2,_/=2}function ee(ve,be){return F===1?ve[be]:ve.readUInt16BE(be*F)}var ue;if(L){var de=-1;for(ue=_;ue<U;ue++)if(ee(j,ue)===ee(b,de===-1?0:ue-de)){if(de===-1&&(de=ue),ue-de+1===X)return de*F}else de!==-1&&(ue-=ue-de),de=-1}else for(_+X>U&&(_=U-X),ue=_;ue>=0;ue--){for(var fe=!0,me=0;me<X;me++)if(ee(j,ue+me)!==ee(b,me)){fe=!1;break}if(fe)return ue}return-1}a.prototype.includes=function(b,_,N){return this.indexOf(b,_,N)!==-1},a.prototype.indexOf=function(b,_,N){return z(this,b,_,N,!0)},a.prototype.lastIndexOf=function(b,_,N){return z(this,b,_,N,!1)};function W(j,b,_,N){_=Number(_)||0;var L=j.length-_;N?(N=Number(N),N>L&&(N=L)):N=L;var F=b.length;N>F/2&&(N=F/2);for(var U=0;U<N;++U){var X=parseInt(b.substr(U*2,2),16);if(k(X))return U;j[_+U]=X}return U}function H(j,b,_,N){return Se(je(b,j.length-_),j,_,N)}function B(j,b,_,N){return Se(Ie(b),j,_,N)}function M(j,b,_,N){return Se(Oe(b),j,_,N)}function V(j,b,_,N){return Se(Re(b,j.length-_),j,_,N)}a.prototype.write=function(b,_,N,L){if(_===void 0)L="utf8",N=this.length,_=0;else if(N===void 0&&typeof _=="string")L=_,N=this.length,_=0;else if(isFinite(_))_=_>>>0,isFinite(N)?(N=N>>>0,L===void 0&&(L="utf8")):(L=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var F=this.length-_;if((N===void 0||N>F)&&(N=F),b.length>0&&(N<0||_<0)||_>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");for(var U=!1;;)switch(L){case"hex":return W(this,b,_,N);case"utf8":case"utf-8":return H(this,b,_,N);case"ascii":case"latin1":case"binary":return B(this,b,_,N);case"base64":return M(this,b,_,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,b,_,N);default:if(U)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),U=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function $(j,b,_){return b===0&&_===j.length?e.fromByteArray(j):e.fromByteArray(j.slice(b,_))}function te(j,b,_){_=Math.min(j.length,_);for(var N=[],L=b;L<_;){var F=j[L],U=null,X=F>239?4:F>223?3:F>191?2:1;if(L+X<=_){var ee,ue,de,fe;switch(X){case 1:F<128&&(U=F);break;case 2:ee=j[L+1],(ee&192)===128&&(fe=(F&31)<<6|ee&63,fe>127&&(U=fe));break;case 3:ee=j[L+1],ue=j[L+2],(ee&192)===128&&(ue&192)===128&&(fe=(F&15)<<12|(ee&63)<<6|ue&63,fe>2047&&(fe<55296||fe>57343)&&(U=fe));break;case 4:ee=j[L+1],ue=j[L+2],de=j[L+3],(ee&192)===128&&(ue&192)===128&&(de&192)===128&&(fe=(F&15)<<18|(ee&63)<<12|(ue&63)<<6|de&63,fe>65535&&fe<1114112&&(U=fe))}}U===null?(U=65533,X=1):U>65535&&(U-=65536,N.push(U>>>10&1023|55296),U=56320|U&1023),N.push(U),L+=X}return Z(N)}var J=4096;function Z(j){var b=j.length;if(b<=J)return String.fromCharCode.apply(String,j);for(var _="",N=0;N<b;)_+=String.fromCharCode.apply(String,j.slice(N,N+=J));return _}function Y(j,b,_){var N="";_=Math.min(j.length,_);for(var L=b;L<_;++L)N+=String.fromCharCode(j[L]&127);return N}function oe(j,b,_){var N="";_=Math.min(j.length,_);for(var L=b;L<_;++L)N+=String.fromCharCode(j[L]);return N}function ie(j,b,_){var N=j.length;(!b||b<0)&&(b=0),(!_||_<0||_>N)&&(_=N);for(var L="",F=b;F<_;++F)L+=G[j[F]];return L}function ne(j,b,_){for(var N=j.slice(b,_),L="",F=0;F<N.length-1;F+=2)L+=String.fromCharCode(N[F]+N[F+1]*256);return L}a.prototype.slice=function(b,_){var N=this.length;b=~~b,_=_===void 0?N:~~_,b<0?(b+=N,b<0&&(b=0)):b>N&&(b=N),_<0?(_+=N,_<0&&(_=0)):_>N&&(_=N),_<b&&(_=b);var L=this.subarray(b,_);return Object.setPrototypeOf(L,a.prototype),L};function re(j,b,_){if(j%1!==0||j<0)throw new RangeError("offset is not uint");if(j+b>_)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(b,_,N){b=b>>>0,_=_>>>0,N||re(b,_,this.length);for(var L=this[b],F=1,U=0;++U<_&&(F*=256);)L+=this[b+U]*F;return L},a.prototype.readUintBE=a.prototype.readUIntBE=function(b,_,N){b=b>>>0,_=_>>>0,N||re(b,_,this.length);for(var L=this[b+--_],F=1;_>0&&(F*=256);)L+=this[b+--_]*F;return L},a.prototype.readUint8=a.prototype.readUInt8=function(b,_){return b=b>>>0,_||re(b,1,this.length),this[b]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(b,_){return b=b>>>0,_||re(b,2,this.length),this[b]|this[b+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(b,_){return b=b>>>0,_||re(b,2,this.length),this[b]<<8|this[b+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(b,_){return b=b>>>0,_||re(b,4,this.length),(this[b]|this[b+1]<<8|this[b+2]<<16)+this[b+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(b,_){return b=b>>>0,_||re(b,4,this.length),this[b]*16777216+(this[b+1]<<16|this[b+2]<<8|this[b+3])},a.prototype.readIntLE=function(b,_,N){b=b>>>0,_=_>>>0,N||re(b,_,this.length);for(var L=this[b],F=1,U=0;++U<_&&(F*=256);)L+=this[b+U]*F;return F*=128,L>=F&&(L-=Math.pow(2,8*_)),L},a.prototype.readIntBE=function(b,_,N){b=b>>>0,_=_>>>0,N||re(b,_,this.length);for(var L=_,F=1,U=this[b+--L];L>0&&(F*=256);)U+=this[b+--L]*F;return F*=128,U>=F&&(U-=Math.pow(2,8*_)),U},a.prototype.readInt8=function(b,_){return b=b>>>0,_||re(b,1,this.length),this[b]&128?(255-this[b]+1)*-1:this[b]},a.prototype.readInt16LE=function(b,_){b=b>>>0,_||re(b,2,this.length);var N=this[b]|this[b+1]<<8;return N&32768?N|4294901760:N},a.prototype.readInt16BE=function(b,_){b=b>>>0,_||re(b,2,this.length);var N=this[b+1]|this[b]<<8;return N&32768?N|4294901760:N},a.prototype.readInt32LE=function(b,_){return b=b>>>0,_||re(b,4,this.length),this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24},a.prototype.readInt32BE=function(b,_){return b=b>>>0,_||re(b,4,this.length),this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]},a.prototype.readFloatLE=function(b,_){return b=b>>>0,_||re(b,4,this.length),t.read(this,b,!0,23,4)},a.prototype.readFloatBE=function(b,_){return b=b>>>0,_||re(b,4,this.length),t.read(this,b,!1,23,4)},a.prototype.readDoubleLE=function(b,_){return b=b>>>0,_||re(b,8,this.length),t.read(this,b,!0,52,8)},a.prototype.readDoubleBE=function(b,_){return b=b>>>0,_||re(b,8,this.length),t.read(this,b,!1,52,8)};function he(j,b,_,N,L,F){if(!a.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(b>L||b<F)throw new RangeError('"value" argument is out of bounds');if(_+N>j.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(b,_,N,L){if(b=+b,_=_>>>0,N=N>>>0,!L){var F=Math.pow(2,8*N)-1;he(this,b,_,N,F,0)}var U=1,X=0;for(this[_]=b&255;++X<N&&(U*=256);)this[_+X]=b/U&255;return _+N},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(b,_,N,L){if(b=+b,_=_>>>0,N=N>>>0,!L){var F=Math.pow(2,8*N)-1;he(this,b,_,N,F,0)}var U=N-1,X=1;for(this[_+U]=b&255;--U>=0&&(X*=256);)this[_+U]=b/X&255;return _+N},a.prototype.writeUint8=a.prototype.writeUInt8=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,1,255,0),this[_]=b&255,_+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,2,65535,0),this[_]=b&255,this[_+1]=b>>>8,_+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,2,65535,0),this[_]=b>>>8,this[_+1]=b&255,_+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,4,4294967295,0),this[_+3]=b>>>24,this[_+2]=b>>>16,this[_+1]=b>>>8,this[_]=b&255,_+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,4,4294967295,0),this[_]=b>>>24,this[_+1]=b>>>16,this[_+2]=b>>>8,this[_+3]=b&255,_+4},a.prototype.writeIntLE=function(b,_,N,L){if(b=+b,_=_>>>0,!L){var F=Math.pow(2,8*N-1);he(this,b,_,N,F-1,-F)}var U=0,X=1,ee=0;for(this[_]=b&255;++U<N&&(X*=256);)b<0&&ee===0&&this[_+U-1]!==0&&(ee=1),this[_+U]=(b/X>>0)-ee&255;return _+N},a.prototype.writeIntBE=function(b,_,N,L){if(b=+b,_=_>>>0,!L){var F=Math.pow(2,8*N-1);he(this,b,_,N,F-1,-F)}var U=N-1,X=1,ee=0;for(this[_+U]=b&255;--U>=0&&(X*=256);)b<0&&ee===0&&this[_+U+1]!==0&&(ee=1),this[_+U]=(b/X>>0)-ee&255;return _+N},a.prototype.writeInt8=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,1,127,-128),b<0&&(b=255+b+1),this[_]=b&255,_+1},a.prototype.writeInt16LE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,2,32767,-32768),this[_]=b&255,this[_+1]=b>>>8,_+2},a.prototype.writeInt16BE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,2,32767,-32768),this[_]=b>>>8,this[_+1]=b&255,_+2},a.prototype.writeInt32LE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,4,2147483647,-2147483648),this[_]=b&255,this[_+1]=b>>>8,this[_+2]=b>>>16,this[_+3]=b>>>24,_+4},a.prototype.writeInt32BE=function(b,_,N){return b=+b,_=_>>>0,N||he(this,b,_,4,2147483647,-2147483648),b<0&&(b=4294967295+b+1),this[_]=b>>>24,this[_+1]=b>>>16,this[_+2]=b>>>8,this[_+3]=b&255,_+4};function we(j,b,_,N,L,F){if(_+N>j.length)throw new RangeError("Index out of range");if(_<0)throw new RangeError("Index out of range")}function Te(j,b,_,N,L){return b=+b,_=_>>>0,L||we(j,b,_,4),t.write(j,b,_,N,23,4),_+4}a.prototype.writeFloatLE=function(b,_,N){return Te(this,b,_,!0,N)},a.prototype.writeFloatBE=function(b,_,N){return Te(this,b,_,!1,N)};function Ee(j,b,_,N,L){return b=+b,_=_>>>0,L||we(j,b,_,8),t.write(j,b,_,N,52,8),_+8}a.prototype.writeDoubleLE=function(b,_,N){return Ee(this,b,_,!0,N)},a.prototype.writeDoubleBE=function(b,_,N){return Ee(this,b,_,!1,N)},a.prototype.copy=function(b,_,N,L){if(!a.isBuffer(b))throw new TypeError("argument should be a Buffer");if(N||(N=0),!L&&L!==0&&(L=this.length),_>=b.length&&(_=b.length),_||(_=0),L>0&&L<N&&(L=N),L===N||b.length===0||this.length===0)return 0;if(_<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),b.length-_<L-N&&(L=b.length-_+N);var F=L-N;return this===b&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(_,N,L):Uint8Array.prototype.set.call(b,this.subarray(N,L),_),F},a.prototype.fill=function(b,_,N,L){if(typeof b=="string"){if(typeof _=="string"?(L=_,_=0,N=this.length):typeof N=="string"&&(L=N,N=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(b.length===1){var F=b.charCodeAt(0);(L==="utf8"&&F<128||L==="latin1")&&(b=F)}}else typeof b=="number"?b=b&255:typeof b=="boolean"&&(b=Number(b));if(_<0||this.length<_||this.length<N)throw new RangeError("Out of range index");if(N<=_)return this;_=_>>>0,N=N===void 0?this.length:N>>>0,b||(b=0);var U;if(typeof b=="number")for(U=_;U<N;++U)this[U]=b;else{var X=a.isBuffer(b)?b:a.from(b,L),ee=X.length;if(ee===0)throw new TypeError('The value "'+b+'" is invalid for argument "value"');for(U=0;U<N-_;++U)this[U+_]=X[U%ee]}return this};var _e=/[^+/0-9A-Za-z-_]/g;function ce(j){if(j=j.split("=")[0],j=j.trim().replace(_e,""),j.length<2)return"";for(;j.length%4!==0;)j=j+"=";return j}function je(j,b){b=b||1/0;for(var _,N=j.length,L=null,F=[],U=0;U<N;++U){if(_=j.charCodeAt(U),_>55295&&_<57344){if(!L){if(_>56319){(b-=3)>-1&&F.push(239,191,189);continue}else if(U+1===N){(b-=3)>-1&&F.push(239,191,189);continue}L=_;continue}if(_<56320){(b-=3)>-1&&F.push(239,191,189),L=_;continue}_=(L-55296<<10|_-56320)+65536}else L&&(b-=3)>-1&&F.push(239,191,189);if(L=null,_<128){if((b-=1)<0)break;F.push(_)}else if(_<2048){if((b-=2)<0)break;F.push(_>>6|192,_&63|128)}else if(_<65536){if((b-=3)<0)break;F.push(_>>12|224,_>>6&63|128,_&63|128)}else if(_<1114112){if((b-=4)<0)break;F.push(_>>18|240,_>>12&63|128,_>>6&63|128,_&63|128)}else throw new Error("Invalid code point")}return F}function Ie(j){for(var b=[],_=0;_<j.length;++_)b.push(j.charCodeAt(_)&255);return b}function Re(j,b){for(var _,N,L,F=[],U=0;U<j.length&&!((b-=2)<0);++U)_=j.charCodeAt(U),N=_>>8,L=_%256,F.push(L),F.push(N);return F}function Oe(j){return e.toByteArray(ce(j))}function Se(j,b,_,N){for(var L=0;L<N&&!(L+_>=b.length||L>=j.length);++L)b[L+_]=j[L];return L}function D(j,b){return j instanceof b||j!=null&&j.constructor!=null&&j.constructor.name!=null&&j.constructor.name===b.name}function k(j){return j!==j}var G=function(){for(var j="0123456789abcdef",b=new Array(256),_=0;_<16;++_)for(var N=_*16,L=0;L<16;++L)b[N+L]=j[_]+j[L];return b}()})(buffer);var browserExports={},browser={get exports(){return browserExports},set exports(n){browserExports=n}},process=browser.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(n){if(cachedSetTimeout===setTimeout)return setTimeout(n,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(n,0);try{return cachedSetTimeout(n,0)}catch{try{return cachedSetTimeout.call(null,n,0)}catch{return cachedSetTimeout.call(this,n,0)}}}function runClearTimeout(n){if(cachedClearTimeout===clearTimeout)return clearTimeout(n);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(n);try{return cachedClearTimeout(n)}catch{try{return cachedClearTimeout.call(null,n)}catch{return cachedClearTimeout.call(this,n)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var n=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(n)}}process.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];queue.push(new Item(n,e)),queue.length===1&&!draining&&runTimeout(drainQueue)};function Item(n,e){this.fun=n,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$2(){}process.on=noop$2;process.addListener=noop$2;process.once=noop$2;process.off=noop$2;process.removeListener=noop$2;process.removeAllListeners=noop$2;process.emit=noop$2;process.prependListener=noop$2;process.prependOnceListener=noop$2;process.listeners=function(n){return[]};process.binding=function(n){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(n){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};(function(n){function e(){var o=this||self;return delete n.prototype.__magic__,o}if(typeof globalThis=="object")return globalThis;if(this)return e();n.defineProperty(n.prototype,"__magic__",{configurable:!0,get:e});var t=__magic__;return t})(Object);var abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...e){const t=e.reduce((o,l)=>Object.assign(o,l),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$1}=buffer||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const t=this.encode(e);return Buffer$1.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:t}=textEndec();return new ViewFormat$2({encode:o=>e.encode(this.encode(o)),decode:o=>this.decode(t.decode(o)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer}=buffer||{Buffer:{isBuffer:()=>!1}},{textEncoder,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$1=n=>n;encodings$1.utf8=new UTF8Format$1({encode:function(n){return Buffer.isBuffer(n)?n.toString("utf8"):ArrayBuffer.isView(n)?textDecoder.decode(n):String(n)},decode:identity$1,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder.encode(n)},decode:function(n){return textDecoder.decode(n)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:function(n){return n.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:identity$1,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:Buffer.from(String(n),"utf8")},decode:function(n){return Buffer.from(n.buffer,n.byteOffset,n.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder.encode(n)},decode:identity$1,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:identity$1,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:Buffer.from(String(n),"hex")},decode:function(n){return n.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:Buffer.from(String(n),"base64")},decode:function(n){return n.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>validFormats.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const t in encodings)try{this.encoding(t)}catch(o){if(o.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw o}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let t=this[kEncodings].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=lookup[e],!t)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=from(e)}const{name:o,format:l}=t;if(!this[kFormats].has(l))if(this[kFormats].has("view"))t=t.createViewTranscoder();else if(this[kFormats].has("buffer"))t=t.createBufferTranscoder();else if(this[kFormats].has("utf8"))t=t.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${o}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const d of[e,o,t.name,t.commonName])this[kEncodings].set(d,t)}return t}};levelTranscoder.Transcoder=Transcoder$1;function from(n){if(n instanceof Encoding)return n;const e="type"in n&&typeof n.type=="string"?n.type:void 0,t=n.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(n)){case"view":return new ViewFormat({...n,name:t});case"utf8":return new UTF8Format({...n,name:t});case"buffer":return new BufferFormat({...n,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(n){return"format"in n&&n.format!==void 0?n.format:"buffer"in n&&typeof n.buffer=="boolean"?n.buffer?"buffer":"utf8":"code"in n&&Number.isInteger(n.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup={...encodings,...aliases};let anonymousCount=0;var eventsExports={},events={get exports(){return eventsExports},set exports(n){eventsExports=n}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,t,o){return Function.prototype.apply.call(e,t,o)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;eventsExports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");defaultMaxListeners=n}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(n){return n._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:n._maxListeners}EventEmitter$1.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function(e){for(var t=[],o=1;o<arguments.length;o++)t.push(arguments[o]);var l=e==="error",d=this._events;if(d!==void 0)l=l&&d.error===void 0;else if(!l)return!1;if(l){var u;if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var a=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw a.context=u,a}var c=d[e];if(c===void 0)return!1;if(typeof c=="function")ReflectApply(c,this,t);else for(var p=c.length,m=arrayClone(c,p),o=0;o<p;++o)ReflectApply(m[o],this,t);return!0};function _addListener(n,e,t,o){var l,d,u;if(checkListener(t),d=n._events,d===void 0?(d=n._events=Object.create(null),n._eventsCount=0):(d.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),d=n._events),u=d[e]),u===void 0)u=d[e]=t,++n._eventsCount;else if(typeof u=="function"?u=d[e]=o?[t,u]:[u,t]:o?u.unshift(t):u.push(t),l=_getMaxListeners(n),l>0&&u.length>l&&!u.warned){u.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=u.length,ProcessEmitWarning(a)}return n}EventEmitter$1.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(n,e,t){var o={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},l=onceWrapper.bind(o);return l.listener=t,o.wrapFn=l,l}EventEmitter$1.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.removeListener=function(e,t){var o,l,d,u,a;if(checkListener(t),l=this._events,l===void 0)return this;if(o=l[e],o===void 0)return this;if(o===t||o.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,o.listener||t));else if(typeof o!="function"){for(d=-1,u=o.length-1;u>=0;u--)if(o[u]===t||o[u].listener===t){a=o[u].listener,d=u;break}if(d<0)return this;d===0?o.shift():spliceOne(o,d),o.length===1&&(l[e]=o[0]),l.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function(e){var t,o,l;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){var d=Object.keys(o),u;for(l=0;l<d.length;++l)u=d[l],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=o[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(l=t.length-1;l>=0;l--)this.removeListener(e,t[l]);return this};function _listeners(n,e,t){var o=n._events;if(o===void 0)return[];var l=o[e];return l===void 0?[]:typeof l=="function"?t?[l.listener||l]:[l]:t?unwrapListeners(l):arrayClone(l,l.length)}EventEmitter$1.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):listenerCount.call(n,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter$1.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(n,e){for(var t=new Array(e),o=0;o<e;++o)t[o]=n[o];return t}function spliceOne(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function unwrapListeners(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function once(n,e){return new Promise(function(t,o){function l(u){n.removeListener(e,d),o(u)}function d(){typeof n.removeListener=="function"&&n.removeListener("error",l),t([].slice.call(arguments))}eventTargetAgnosticAddListener(n,e,d,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(n,l,{once:!0})})}function addErrorHandlerIfEventEmitter(n,e,t){typeof n.on=="function"&&eventTargetAgnosticAddListener(n,"error",e,t)}function eventTargetAgnosticAddListener(n,e,t,o){if(typeof n.on=="function")o.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function l(d){o.once&&n.removeEventListener(e,l),t(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n),nextTick=nextTickBrowser$1;catering.fromCallback=function(n,e){if(n===void 0){var t=new Promise(function(o,l){n=function(d,u){d?l(d):o(u)}});n[e!==void 0?e:"promise"]=t}else if(typeof n!="function")throw new TypeError("Callback must be a function");return n};catering.fromPromise=function(n,e){if(e===void 0)return n;n.then(function(t){nextTick(()=>e(null,t))}).catch(function(t){nextTick(()=>e(t))})};var abstractIterator={},common$6={};common$6.getCallback=function(n,e){return typeof n=="function"?n:e};common$6.getOptions=function(n,e){return typeof n=="object"&&n!==null?n:e!==void 0?e:{}};const{fromCallback:fromCallback$2}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$6,kPromise$2=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,t,o){if(typeof e!="object"||e===null){const l=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${l}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=t[kKeyEncoding$1],this[kValueEncoding$1]=t[kValueEncoding$1],this[kLegacy]=o,this[kLimit]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let t;if(e===void 0)t=new Promise((o,l)=>{e=(d,u,a)=>{d?l(d):this[kLegacy]?u===void 0&&a===void 0?o():o([u,a]):o(u)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),t}_next(e){this.nextTick(e)}nextv(e,t,o){return o=getCallback$2(t,o),o=fromCallback$2(o,kPromise$2),t=getOptions$2(t,emptyOptions),Number.isInteger(e)?(this[kClosing]?this.nextTick(o,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(o,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=o,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,t,this[kHandleMany$1])),o[kPromise$2]):(this.nextTick(o,new TypeError("The first argument 'size' must be an integer")),o[kPromise$2])}_nextv(e,t,o){const l=[],d=(u,a,c)=>{if(u)return o(u);if(this[kLegacy]?a===void 0&&c===void 0:a===void 0)return o(null,l);l.push(this[kLegacy]?[a,c]:a),l.length===e?o(null,l):this._next(d)};this._next(d)}all(e,t){return t=getCallback$2(e,t),t=fromCallback$2(t,kPromise$2),e=getOptions$2(e,emptyOptions),this[kClosing]?this.nextTick(t,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(t,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=t,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),t[kPromise$2]}_all(e,t){let o=this[kCount];const l=[],d=()=>{const a=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-o):1e3;a<=0?this.nextTick(t,null,l):this._nextv(a,emptyOptions,u)},u=(a,c)=>{a?t(a):c.length===0?t(null,l):(l.push.apply(l,c),o+=c.length,d())};d()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,t,o){this[kAutoClose]?this.close(e.bind(null,t,o)):e(t,o)}seek(e,t){if(t=getOptions$2(t,emptyOptions),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const o=this.db.keyEncoding(t.keyEncoding||this[kKeyEncoding$1]),l=o.format;t.keyEncoding!==l&&(t={...t,keyEncoding:l});const d=this.db.prefixKey(o.encode(e),l);this._seek(d,t)}}}_seek(e,t){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$2(e,kPromise$2),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$2]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!0),this[kKeys]=t.keys!==!1,this[kValues]=t.values!==!1}[kHandleOne$1](e,t,o){const l=this[kFinishWork]();if(e)return l(e);try{t=this[kKeys]&&t!==void 0?this[kKeyEncoding$1].decode(t):void 0,o=this[kValues]&&o!==void 0?this[kValueEncoding$1].decode(o):void 0}catch(d){return l(new IteratorDecodeError("entry",d))}t===void 0&&o===void 0||this[kCount]++,l(null,t,o)}[kHandleMany$1](e,t){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(const l of t){const d=l[0],u=l[1];l[0]=this[kKeys]&&d!==void 0?this[kKeyEncoding$1].decode(d):void 0,l[1]=this[kValues]&&u!==void 0?this[kValueEncoding$1].decode(u):void 0}}catch(l){return this[kReturnMany](o,new IteratorDecodeError("entries",l))}this[kCount]+=t.length,this[kReturnMany](o,null,t)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const o=this[kFinishWork]();if(e)return o(e);try{t=t!==void 0?this[kKeyEncoding$1].decode(t):void 0}catch(l){return o(new IteratorDecodeError("key",l))}t!==void 0&&this[kCount]++,o(null,t)}[kHandleMany$1](e,t){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(let l=0;l<t.length;l++){const d=t[l];t[l]=d!==void 0?this[kKeyEncoding$1].decode(d):void 0}}catch(l){return this[kReturnMany](o,new IteratorDecodeError("keys",l))}this[kCount]+=t.length,this[kReturnMany](o,null,t)}},AbstractValueIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const o=this[kFinishWork]();if(e)return o(e);try{t=t!==void 0?this[kValueEncoding$1].decode(t):void 0}catch(l){return o(new IteratorDecodeError("value",l))}t!==void 0&&this[kCount]++,o(null,t)}[kHandleMany$1](e,t){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(let l=0;l<t.length;l++){const d=t[l];t[l]=d!==void 0?this[kValueEncoding$1].decode(d):void 0}}catch(l){return this[kReturnMany](o,new IteratorDecodeError("values",l))}this[kCount]+=t.length,this[kReturnMany](o,null,t)}};class IteratorDecodeError extends ModuleError$6{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const n of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,n.split(" ")[0],{get(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$3;abstractIterator.AbstractValueIterator=AbstractValueIterator$3;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$2,AbstractValueIterator:AbstractValueIterator$2}=abstractIterator,kIterator$1=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$2{constructor(e,t){super(e,t),this[kIterator$1]=e.iterator({...t,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$2{constructor(e,t){super(e,t),this[kIterator$1]=e.iterator({...t,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const n of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=n===DefaultKeyIterator$1,t=e?o=>o[0]:o=>o[1];n.prototype._next=function(o){this[kCallback]=o,this[kIterator$1].next(this[kHandleOne])},n.prototype[kHandleOne]=function(o,l,d){const u=this[kCallback];o?u(o):u(null,e?l:d)},n.prototype._nextv=function(o,l,d){this[kCallback]=d,this[kIterator$1].nextv(o,l,this[kHandleMany])},n.prototype._all=function(o,l){this[kCallback]=l,this[kIterator$1].all(o,this[kHandleMany])},n.prototype[kHandleMany]=function(o,l){const d=this[kCallback];o?d(o):d(null,l.map(t))},n.prototype._seek=function(o,l){this[kIterator$1].seek(o,l)},n.prototype._close=function(o){this[kIterator$1].close(o)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.iterator(t),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.keys(t),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator$1{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.values(t),this.db.defer(()=>this[kUndefer$1]())}};for(const n of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])n.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},n.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._nextv=function(e,t,o){this[kNut]!==null?this[kNut].nextv(e,t,o):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,o)):this.nextTick(o,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._all=function(e,t){this[kNut]!==null?this[kNut].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._seek=function(e,t){this[kNut]!==null?this[kNut]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},n.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$1}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$6,kPromise$1=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,t,o){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const l=this.db._checkKey(e)||this.db._checkValue(t);if(l)throw l;const d=o&&o.sublevel!=null?o.sublevel:this.db,u=o,a=d.keyEncoding(o&&o.keyEncoding),c=d.valueEncoding(o&&o.valueEncoding),p=a.format;o={...o,keyEncoding:p,valueEncoding:c.format},d!==this.db&&(o.sublevel=null);const m=d.prefixKey(a.encode(e),p),y=c.encode(t);return this._put(m,y,o),this[kOperations$1].push({...u,type:"put",key:e,value:t}),this}_put(e,t,o){}del(e,t){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e);if(o)throw o;const l=t&&t.sublevel!=null?t.sublevel:this.db,d=t,u=l.keyEncoding(t&&t.keyEncoding),a=u.format;return t={...t,keyEncoding:a},l!==this.db&&(t.sublevel=null),this._del(l.prefixKey(u.encode(e),a),t),this[kOperations$1].push({...d,type:"del",key:e}),this}_del(e,t){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,t){return t=getCallback$1(e,t),t=fromCallback$1(t,kPromise$1),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(t,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[kStatus$1]="writing",this._write(e,o=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>t(o)),o||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),t[kPromise$1]}_write(e,t){}close(e){return e=fromCallback$1(e,kPromise$1),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$1]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const t of e)t()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,t,o){this[kEncoded].push({...o,type:"put",key:e,value:t})}_del(e,t){this[kEncoded].push({...t,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(t):this.db._batch(this[kEncoded],e,t):this.nextTick(t,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$2=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(n,e){const t={};for(const o in n)if(hasOwnProperty.call(n,o)&&!(o==="keyEncoding"||o==="valueEncoding")){if(o==="start"||o==="end")throw new ModuleError$2(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if(o==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$2.has(o)?t[o]=e.encode(n[o]):t[o]=n[o]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var queueMicrotask_1,hasRequiredQueueMicrotask;function requireQueueMicrotask(){if(hasRequiredQueueMicrotask)return queueMicrotask_1;hasRequiredQueueMicrotask=1;let n;return queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):e=>(n||(n=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),queueMicrotask_1}var nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const n=requireQueueMicrotask();return nextTickBrowser=function(e,...t){t.length===0?n(e):n(()=>e(...t))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:n,AbstractKeyIterator:e,AbstractValueIterator:t}=abstractIterator,o=Symbol("unfix"),l=Symbol("iterator"),d=Symbol("handleOne"),u=Symbol("handleMany"),a=Symbol("callback");class c extends n{constructor(h,T,g,v){super(h,T),this[l]=g,this[o]=v,this[d]=this[d].bind(this),this[u]=this[u].bind(this),this[a]=null}[d](h,T,g){const v=this[a];if(h)return v(h);T!==void 0&&(T=this[o](T)),v(h,T,g)}[u](h,T){const g=this[a];if(h)return g(h);for(const v of T){const S=v[0];S!==void 0&&(v[0]=this[o](S))}g(h,T)}}class p extends e{constructor(h,T,g,v){super(h,T),this[l]=g,this[o]=v,this[d]=this[d].bind(this),this[u]=this[u].bind(this),this[a]=null}[d](h,T){const g=this[a];if(h)return g(h);T!==void 0&&(T=this[o](T)),g(h,T)}[u](h,T){const g=this[a];if(h)return g(h);for(let v=0;v<T.length;v++){const S=T[v];S!==void 0&&(T[v]=this[o](S))}g(h,T)}}class m extends t{constructor(h,T,g){super(h,T),this[l]=g}}for(const y of[c,p])y.prototype._next=function(h){this[a]=h,this[l].next(this[d])},y.prototype._nextv=function(h,T,g){this[a]=g,this[l].nextv(h,T,this[u])},y.prototype._all=function(h,T){this[a]=T,this[l].all(h,this[u])};for(const y of[m])y.prototype._next=function(h){this[l].next(h)},y.prototype._nextv=function(h,T,g){this[l].nextv(h,T,g)},y.prototype._all=function(h,T){this[l].all(h,T)};for(const y of[c,p,m])y.prototype._seek=function(h,T){this[l].seek(h,T)},y.prototype._close=function(h){this[l].close(h)};return abstractSublevelIterator.AbstractSublevelIterator=c,abstractSublevelIterator.AbstractSublevelKeyIterator=p,abstractSublevelIterator.AbstractSublevelValueIterator=m,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const n=moduleError,{Buffer:e}=buffer||{},{AbstractSublevelIterator:t,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:l}=requireAbstractSublevelIterator(),d=Symbol("prefix"),u=Symbol("upperBound"),a=Symbol("prefixRange"),c=Symbol("parent"),p=Symbol("unfix"),m=new TextEncoder,y={separator:"!"};abstractSublevel=function({AbstractLevel:x}){class w extends x{static defaults(O){if(typeof O=="string")throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(O&&O.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return O==null?y:O.separator?O:{...O,separator:"!"}}constructor(O,I,z){const{separator:Q,manifest:W,...H}=w.defaults(z);I=S(I,Q);const B=Q.charCodeAt(0)+1,M=O[c]||O;if(!m.encode(I).every(te=>te>B&&te<127))throw new n(`Prefix must use bytes > ${B} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(h(M,W),H);const V=(O.prefix||"")+Q+I+Q,$=V.slice(0,-1)+String.fromCharCode(B);this[c]=M,this[d]=new g(V),this[u]=new g($),this[p]=new v,this.nextTick=M.nextTick}prefixKey(O,I){if(I==="utf8")return this[d].utf8+O;if(O.byteLength===0)return this[d][I];if(I==="view"){const z=this[d].view,Q=new Uint8Array(z.byteLength+O.byteLength);return Q.set(z,0),Q.set(O,z.byteLength),Q}else{const z=this[d].buffer;return e.concat([z,O],z.byteLength+O.byteLength)}}[a](O,I){O.gte!==void 0?O.gte=this.prefixKey(O.gte,I):O.gt!==void 0?O.gt=this.prefixKey(O.gt,I):O.gte=this[d][I],O.lte!==void 0?O.lte=this.prefixKey(O.lte,I):O.lt!==void 0?O.lt=this.prefixKey(O.lt,I):O.lte=this[u][I]}get prefix(){return this[d].utf8}get db(){return this[c]}_open(O,I){this[c].open({passive:!0},I)}_put(O,I,z,Q){this[c].put(O,I,z,Q)}_get(O,I,z){this[c].get(O,I,z)}_getMany(O,I,z){this[c].getMany(O,I,z)}_del(O,I,z){this[c].del(O,I,z)}_batch(O,I,z){this[c].batch(O,I,z)}_clear(O,I){this[a](O,O.keyEncoding),this[c].clear(O,I)}_iterator(O){this[a](O,O.keyEncoding);const I=this[c].iterator(O),z=this[p].get(this[d].utf8.length,O.keyEncoding);return new t(this,O,I,z)}_keys(O){this[a](O,O.keyEncoding);const I=this[c].keys(O),z=this[p].get(this[d].utf8.length,O.keyEncoding);return new o(this,O,I,z)}_values(O){this[a](O,O.keyEncoding);const I=this[c].values(O);return new l(this,O,I)}}return{AbstractSublevel:w}};const h=function(x,w){return{...x.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...w,encodings:{utf8:T(x,"utf8"),buffer:T(x,"buffer"),view:T(x,"view")}}},T=function(x,w){return x.supports.encodings[w]?x.keyEncoding(w).name===w:!1};class g{constructor(w){this.utf8=w,this.view=m.encode(w),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class v{constructor(){this.cache=new Map}get(w,E){let O=this.cache.get(E);return O===void 0&&(E==="view"?O=function(I,z){return z.subarray(I)}.bind(null,w):O=function(I,z){return z.slice(I)}.bind(null,w),this.cache.set(E,O)),O}}const S=function(x,w){let E=0,O=x.length;for(;E<O&&x[E]===w;)E++;for(;O>E&&x[O-1]===w;)O--;return x.slice(E,O)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=eventsExports,{fromCallback}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$6,rangeOptions$1=rangeOptions_1,kPromise=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};let AbstractLevel$1=class extends EventEmitter{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=getOptions(t);const{keyEncoding:o,valueEncoding:l,passive:d,...u}=t;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=u,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(o||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(l||"utf8");for(const a of this[kTranscoder].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,t){t=getCallback(e,t),t=fromCallback(t,kPromise),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const o=l=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,l?()=>o(l):o):this[kStatus]!=="open"?t(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:l})):t()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,o):this.nextTick(o):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,l=>{if(l){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),o(l)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),o()})):this[kStatus]==="open"?this.nextTick(o):this.once(kLanded,()=>this.open(e,t)),t[kPromise]}_open(e,t){this.nextTick(t)}close(e){e=fromCallback(e,kPromise);const t=o=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,o?t(o):t):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:o})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const o=l=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),t(l)};this[kCloseResources](()=>{this._close(l=>{if(l)return o(l);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),t()})})}else this[kStatus]==="closed"?this.nextTick(t):this.once(kLanded,()=>this.close(e));return e[kPromise]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let t=this[kResources].size,o=!0;const l=()=>{--t===0&&(o?this.nextTick(e):e())};for(const d of this[kResources])d.close(l);o=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,t,o){if(o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];const l=this._checkKey(e);if(l)return this.nextTick(o,l),o[kPromise];const d=this.keyEncoding(t.keyEncoding),u=this.valueEncoding(t.valueEncoding),a=d.format,c=u.format;return(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c})),this._get(this.prefixKey(d.encode(e),a),t,(p,m)=>{if(p)return(p.code==="LEVEL_NOT_FOUND"||p.notFound||/NotFound/i.test(p))&&(p.code||(p.code="LEVEL_NOT_FOUND"),p.notFound||(p.notFound=!0),p.status||(p.status=404)),o(p);try{m=u.decode(m)}catch(y){return o(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:y}))}o(null,m)}),o[kPromise]}_get(e,t,o){this.nextTick(o,new Error("NotFound"))}getMany(e,t,o){if(o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];if(!Array.isArray(e))return this.nextTick(o,new TypeError("The first argument 'keys' must be an array")),o[kPromise];if(e.length===0)return this.nextTick(o,null,[]),o[kPromise];const l=this.keyEncoding(t.keyEncoding),d=this.valueEncoding(t.valueEncoding),u=l.format,a=d.format;(t.keyEncoding!==u||t.valueEncoding!==a)&&(t=Object.assign({},t,{keyEncoding:u,valueEncoding:a}));const c=new Array(e.length);for(let p=0;p<e.length;p++){const m=e[p],y=this._checkKey(m);if(y)return this.nextTick(o,y),o[kPromise];c[p]=this.prefixKey(l.encode(m),u)}return this._getMany(c,t,(p,m)=>{if(p)return o(p);try{for(let y=0;y<m.length;y++)m[y]!==void 0&&(m[y]=d.decode(m[y]))}catch(y){return o(new ModuleError$1(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:y}))}o(null,m)}),o[kPromise]}_getMany(e,t,o){this.nextTick(o,null,new Array(e.length).fill(void 0))}put(e,t,o,l){if(l=getCallback(o,l),l=fromCallback(l,kPromise),o=getOptions(o,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,t,o,l)),l[kPromise];if(maybeError(this,l))return l[kPromise];const d=this._checkKey(e)||this._checkValue(t);if(d)return this.nextTick(l,d),l[kPromise];const u=this.keyEncoding(o.keyEncoding),a=this.valueEncoding(o.valueEncoding),c=u.format,p=a.format;(o.keyEncoding!==c||o.valueEncoding!==p)&&(o=Object.assign({},o,{keyEncoding:c,valueEncoding:p}));const m=this.prefixKey(u.encode(e),c),y=a.encode(t);return this._put(m,y,o,h=>{if(h)return l(h);this.emit("put",e,t),l()}),l[kPromise]}_put(e,t,o,l){this.nextTick(l)}del(e,t,o){if(o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];const l=this._checkKey(e);if(l)return this.nextTick(o,l),o[kPromise];const d=this.keyEncoding(t.keyEncoding),u=d.format;return t.keyEncoding!==u&&(t=Object.assign({},t,{keyEncoding:u})),this._del(this.prefixKey(d.encode(e),u),t,a=>{if(a)return o(a);this.emit("del",e),o()}),o[kPromise]}_del(e,t,o){this.nextTick(o)}batch(e,t,o){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?o=e:o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];if(!Array.isArray(e))return this.nextTick(o,new TypeError("The first argument 'operations' must be an array")),o[kPromise];if(e.length===0)return this.nextTick(o),o[kPromise];const l=new Array(e.length),{keyEncoding:d,valueEncoding:u,...a}=t;for(let c=0;c<e.length;c++){if(typeof e[c]!="object"||e[c]===null)return this.nextTick(o,new TypeError("A batch operation must be an object")),o[kPromise];const p=Object.assign({},e[c]);if(p.type!=="put"&&p.type!=="del")return this.nextTick(o,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),o[kPromise];const m=this._checkKey(p.key);if(m)return this.nextTick(o,m),o[kPromise];const y=p.sublevel!=null?p.sublevel:this,h=y.keyEncoding(p.keyEncoding||d),T=h.format;if(p.key=y.prefixKey(h.encode(p.key),T),p.keyEncoding=T,p.type==="put"){const g=this._checkValue(p.value);if(g)return this.nextTick(o,g),o[kPromise];const v=y.valueEncoding(p.valueEncoding||u);p.value=v.encode(p.value),p.valueEncoding=v.format}y!==this&&(p.sublevel=null),l[c]=p}return this._batch(l,a,c=>{if(c)return o(c);this.emit("batch",e),o()}),o[kPromise]}_batch(e,t,o){this.nextTick(o)}sublevel(e,t){return this._sublevel(e,AbstractSublevel.defaults(t))}_sublevel(e,t){return new AbstractSublevel(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=getCallback(e,t),t=fromCallback(t,kPromise),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,t)),t[kPromise];if(maybeError(this,t))return t[kPromise];const o=e,l=this.keyEncoding(e.keyEncoding);return e=rangeOptions$1(e,l),e.keyEncoding=l.format,e.limit===0?this.nextTick(t):this._clear(e,d=>{if(d)return t(d);this.emit("clear",o),t()}),t[kPromise]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=t.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=t.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=t.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(n,e){return n[kStatus]!=="open"?(n.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(n){return Object.keys(n.supports.encodings).filter(e=>!!n.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;var rbtree=createRBTree,RED=0,BLACK=1;function RBNode(n,e,t,o,l,d){this._color=n,this.key=e,this.value=t,this.left=o,this.right=l,this._count=d}function cloneNode(n){return new RBNode(n._color,n.key,n.value,n.left,n.right,n._count)}function repaint(n,e){return new RBNode(n,e.key,e.value,e.left,e.right,e._count)}function recount(n){n._count=1+(n.left?n.left._count:0)+(n.right?n.right._count:0)}function RedBlackTree(n,e){this._compare=n,this.root=e}var proto=RedBlackTree.prototype;Object.defineProperty(proto,"keys",{get:function(){var n=[];return this.forEach(function(e,t){n.push(e)}),n}});Object.defineProperty(proto,"values",{get:function(){var n=[];return this.forEach(function(e,t){n.push(t)}),n}});Object.defineProperty(proto,"length",{get:function(){return this.root?this.root._count:0}});proto.insert=function(n,e){for(var t=this._compare,o=this.root,l=[],d=[];o;){var u=t(n,o.key);l.push(o),d.push(u),u<=0?o=o.left:o=o.right}l.push(new RBNode(RED,n,e,null,null,1));for(var a=l.length-2;a>=0;--a){var o=l[a];d[a]<=0?l[a]=new RBNode(o._color,o.key,o.value,l[a+1],o.right,o._count+1):l[a]=new RBNode(o._color,o.key,o.value,o.left,l[a+1],o._count+1)}for(var a=l.length-1;a>1;--a){var c=l[a-1],o=l[a];if(c._color===BLACK||o._color===BLACK)break;var p=l[a-2];if(p.left===c)if(c.left===o){var m=p.right;if(m&&m._color===RED)c._color=BLACK,p.right=repaint(BLACK,m),p._color=RED,a-=1;else{if(p._color=RED,p.left=c.right,c._color=BLACK,c.right=p,l[a-2]=c,l[a-1]=o,recount(p),recount(c),a>=3){var y=l[a-3];y.left===p?y.left=c:y.right=c}break}}else{var m=p.right;if(m&&m._color===RED)c._color=BLACK,p.right=repaint(BLACK,m),p._color=RED,a-=1;else{if(c.right=o.left,p._color=RED,p.left=o.right,o._color=BLACK,o.left=c,o.right=p,l[a-2]=o,l[a-1]=c,recount(p),recount(c),recount(o),a>=3){var y=l[a-3];y.left===p?y.left=o:y.right=o}break}}else if(c.right===o){var m=p.left;if(m&&m._color===RED)c._color=BLACK,p.left=repaint(BLACK,m),p._color=RED,a-=1;else{if(p._color=RED,p.right=c.left,c._color=BLACK,c.left=p,l[a-2]=c,l[a-1]=o,recount(p),recount(c),a>=3){var y=l[a-3];y.right===p?y.right=c:y.left=c}break}}else{var m=p.left;if(m&&m._color===RED)c._color=BLACK,p.left=repaint(BLACK,m),p._color=RED,a-=1;else{if(c.left=o.right,p._color=RED,p.right=o.left,o._color=BLACK,o.right=c,o.left=p,l[a-2]=o,l[a-1]=c,recount(p),recount(c),recount(o),a>=3){var y=l[a-3];y.right===p?y.right=o:y.left=o}break}}}return l[0]._color=BLACK,new RedBlackTree(t,l[0])};function doVisitFull(n,e){if(e.left){var t=doVisitFull(n,e.left);if(t)return t}var t=n(e.key,e.value);if(t)return t;if(e.right)return doVisitFull(n,e.right)}function doVisitHalf(n,e,t,o){var l=e(n,o.key);if(l<=0){if(o.left){var d=doVisitHalf(n,e,t,o.left);if(d)return d}var d=t(o.key,o.value);if(d)return d}if(o.right)return doVisitHalf(n,e,t,o.right)}function doVisit(n,e,t,o,l){var d=t(n,l.key),u=t(e,l.key),a;if(d<=0&&(l.left&&(a=doVisit(n,e,t,o,l.left),a)||u>0&&(a=o(l.key,l.value),a)))return a;if(u>0&&l.right)return doVisit(n,e,t,o,l.right)}proto.forEach=function(e,t,o){if(this.root)switch(arguments.length){case 1:return doVisitFull(e,this.root);case 2:return doVisitHalf(t,this._compare,e,this.root);case 3:return this._compare(t,o)>=0?void 0:doVisit(t,o,this._compare,e,this.root)}};Object.defineProperty(proto,"begin",{get:function(){for(var n=[],e=this.root;e;)n.push(e),e=e.left;return new RedBlackTreeIterator(this,n)}});Object.defineProperty(proto,"end",{get:function(){for(var n=[],e=this.root;e;)n.push(e),e=e.right;return new RedBlackTreeIterator(this,n)}});proto.at=function(n){if(n<0)return new RedBlackTreeIterator(this,[]);for(var e=this.root,t=[];;){if(t.push(e),e.left){if(n<e.left._count){e=e.left;continue}n-=e.left._count}if(!n)return new RedBlackTreeIterator(this,t);if(n-=1,e.right){if(n>=e.right._count)break;e=e.right}else break}return new RedBlackTreeIterator(this,[])};proto.ge=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d<=0&&(l=o.length),d<=0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.gt=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d<0&&(l=o.length),d<0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.lt=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d>0&&(l=o.length),d<=0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.le=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d>=0&&(l=o.length),d<0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.find=function(n){for(var e=this._compare,t=this.root,o=[];t;){var l=e(n,t.key);if(o.push(t),l===0)return new RedBlackTreeIterator(this,o);l<=0?t=t.left:t=t.right}return new RedBlackTreeIterator(this,[])};proto.remove=function(n){var e=this.find(n);return e?e.remove():this};proto.get=function(n){for(var e=this._compare,t=this.root;t;){var o=e(n,t.key);if(o===0)return t.value;o<=0?t=t.left:t=t.right}};function RedBlackTreeIterator(n,e){this.tree=n,this._stack=e}var iproto=RedBlackTreeIterator.prototype;Object.defineProperty(iproto,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(iproto,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});iproto.clone=function(){return new RedBlackTreeIterator(this.tree,this._stack.slice())};function swapNode(n,e){n.key=e.key,n.value=e.value,n.left=e.left,n.right=e.right,n._color=e._color,n._count=e._count}function fixDoubleBlack(n){for(var e,t,o,l,d=n.length-1;d>=0;--d){if(e=n[d],d===0){e._color=BLACK;return}if(t=n[d-1],t.left===e){if(o=t.right,o.right&&o.right._color===RED){if(o=t.right=cloneNode(o),l=o.right=cloneNode(o.right),t.right=o.left,o.left=t,o.right=l,o._color=t._color,e._color=BLACK,t._color=BLACK,l._color=BLACK,recount(t),recount(o),d>1){var u=n[d-2];u.left===t?u.left=o:u.right=o}n[d-1]=o;return}else if(o.left&&o.left._color===RED){if(o=t.right=cloneNode(o),l=o.left=cloneNode(o.left),t.right=l.left,o.left=l.right,l.left=t,l.right=o,l._color=t._color,t._color=BLACK,o._color=BLACK,e._color=BLACK,recount(t),recount(o),recount(l),d>1){var u=n[d-2];u.left===t?u.left=l:u.right=l}n[d-1]=l;return}if(o._color===BLACK)if(t._color===RED){t._color=BLACK,t.right=repaint(RED,o);return}else{t.right=repaint(RED,o);continue}else{if(o=cloneNode(o),t.right=o.left,o.left=t,o._color=t._color,t._color=RED,recount(t),recount(o),d>1){var u=n[d-2];u.left===t?u.left=o:u.right=o}n[d-1]=o,n[d]=t,d+1<n.length?n[d+1]=e:n.push(e),d=d+2}}else{if(o=t.left,o.left&&o.left._color===RED){if(o=t.left=cloneNode(o),l=o.left=cloneNode(o.left),t.left=o.right,o.right=t,o.left=l,o._color=t._color,e._color=BLACK,t._color=BLACK,l._color=BLACK,recount(t),recount(o),d>1){var u=n[d-2];u.right===t?u.right=o:u.left=o}n[d-1]=o;return}else if(o.right&&o.right._color===RED){if(o=t.left=cloneNode(o),l=o.right=cloneNode(o.right),t.left=l.right,o.right=l.left,l.right=t,l.left=o,l._color=t._color,t._color=BLACK,o._color=BLACK,e._color=BLACK,recount(t),recount(o),recount(l),d>1){var u=n[d-2];u.right===t?u.right=l:u.left=l}n[d-1]=l;return}if(o._color===BLACK)if(t._color===RED){t._color=BLACK,t.left=repaint(RED,o);return}else{t.left=repaint(RED,o);continue}else{if(o=cloneNode(o),t.left=o.right,o.right=t,o._color=t._color,t._color=RED,recount(t),recount(o),d>1){var u=n[d-2];u.right===t?u.right=o:u.left=o}n[d-1]=o,n[d]=t,d+1<n.length?n[d+1]=e:n.push(e),d=d+2}}}}iproto.remove=function(){var n=this._stack;if(n.length===0)return this.tree;var e=new Array(n.length),t=n[n.length-1];e[e.length-1]=new RBNode(t._color,t.key,t.value,t.left,t.right,t._count);for(var o=n.length-2;o>=0;--o){var t=n[o];t.left===n[o+1]?e[o]=new RBNode(t._color,t.key,t.value,e[o+1],t.right,t._count):e[o]=new RBNode(t._color,t.key,t.value,t.left,e[o+1],t._count)}if(t=e[e.length-1],t.left&&t.right){var l=e.length;for(t=t.left;t.right;)e.push(t),t=t.right;var d=e[l-1];e.push(new RBNode(t._color,d.key,d.value,t.left,t.right,t._count)),e[l-1].key=t.key,e[l-1].value=t.value;for(var o=e.length-2;o>=l;--o)t=e[o],e[o]=new RBNode(t._color,t.key,t.value,t.left,e[o+1],t._count);e[l-1].left=e[l]}if(t=e[e.length-1],t._color===RED){var u=e[e.length-2];u.left===t?u.left=null:u.right===t&&(u.right=null),e.pop();for(var o=0;o<e.length;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}else if(t.left||t.right){t.left?swapNode(t,t.left):t.right&&swapNode(t,t.right),t._color=BLACK;for(var o=0;o<e.length-1;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}else{if(e.length===1)return new RedBlackTree(this.tree._compare,null);for(var o=0;o<e.length;++o)e[o]._count--;var a=e[e.length-2];fixDoubleBlack(e),a.left===t?a.left=null:a.right=null}return new RedBlackTree(this.tree._compare,e[0])};Object.defineProperty(iproto,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(iproto,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(iproto,"index",{get:function(){var n=0,e=this._stack;if(e.length===0){var t=this.tree.root;return t?t._count:0}else e[e.length-1].left&&(n=e[e.length-1].left._count);for(var o=e.length-2;o>=0;--o)e[o+1]===e[o].right&&(++n,e[o].left&&(n+=e[o].left._count));return n},enumerable:!0});iproto.next=function(){var n=this._stack;if(n.length!==0){var e=n[n.length-1];if(e.right)for(e=e.right;e;)n.push(e),e=e.left;else for(n.pop();n.length>0&&n[n.length-1].right===e;)e=n[n.length-1],n.pop()}};Object.defineProperty(iproto,"hasNext",{get:function(){var n=this._stack;if(n.length===0)return!1;if(n[n.length-1].right)return!0;for(var e=n.length-1;e>0;--e)if(n[e-1].left===n[e])return!0;return!1}});iproto.update=function(n){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var t=new Array(e.length),o=e[e.length-1];t[t.length-1]=new RBNode(o._color,o.key,n,o.left,o.right,o._count);for(var l=e.length-2;l>=0;--l)o=e[l],o.left===e[l+1]?t[l]=new RBNode(o._color,o.key,o.value,t[l+1],o.right,o._count):t[l]=new RBNode(o._color,o.key,o.value,o.left,t[l+1],o._count);return new RedBlackTree(this.tree._compare,t[0])};iproto.prev=function(){var n=this._stack;if(n.length!==0){var e=n[n.length-1];if(e.left)for(e=e.left;e;)n.push(e),e=e.right;else for(n.pop();n.length>0&&n[n.length-1].left===e;)e=n[n.length-1],n.pop()}};Object.defineProperty(iproto,"hasPrev",{get:function(){var n=this._stack;if(n.length===0)return!1;if(n[n.length-1].left)return!0;for(var e=n.length-1;e>0;--e)if(n[e-1].right===n[e])return!0;return!1}});function defaultCompare(n,e){return n<e?-1:n>e?1:0}function createRBTree(n){return new RedBlackTree(n||defaultCompare,null)}const{AbstractLevel,AbstractIterator,AbstractKeyIterator,AbstractValueIterator}=abstractLevel$1,ModuleError=moduleError,createRBT=rbtree,rangeOptions=new Set(["gt","gte","lt","lte"]),kNone=Symbol("none"),kTree=Symbol("tree"),kIterator=Symbol("iterator"),kLowerBound=Symbol("lowerBound"),kUpperBound=Symbol("upperBound"),kOutOfRange=Symbol("outOfRange"),kReverse=Symbol("reverse"),kOptions=Symbol("options"),kTest=Symbol("test"),kAdvance=Symbol("advance"),kInit=Symbol("init");function compare(n,e){if(typeof n=="string")return n<e?-1:n>e?1:0;const t=Math.min(n.byteLength,e.byteLength);for(let o=0;o<t;o++){const l=n[o]-e[o];if(l!==0)return l}return n.byteLength-e.byteLength}function gt(n){return compare(n,this[kUpperBound])>0}function gte(n){return compare(n,this[kUpperBound])>=0}function lt(n){return compare(n,this[kUpperBound])<0}function lte(n){return compare(n,this[kUpperBound])<=0}class MemoryIterator extends AbstractIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key,o=this[kIterator].value;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,t,o)}_nextv(e,t,o){const l=this[kIterator],d=[];for(;l.valid&&d.length<e&&this[kTest](l.key);)d.push([l.key,l.value]),l[this[kAdvance]]();this.nextTick(o,null,d)}_all(e,t){const o=this.limit-this.count,l=this[kIterator],d=[];for(;l.valid&&d.length<o&&this[kTest](l.key);)d.push([l.key,l.value]),l[this[kAdvance]]();this.nextTick(t,null,d)}}class MemoryKeyIterator extends AbstractKeyIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,t)}_nextv(e,t,o){const l=this[kIterator],d=[];for(;l.valid&&d.length<e&&this[kTest](l.key);)d.push(l.key),l[this[kAdvance]]();this.nextTick(o,null,d)}_all(e,t){const o=this.limit-this.count,l=this[kIterator],d=[];for(;l.valid&&d.length<o&&this[kTest](l.key);)d.push(l.key),l[this[kAdvance]]();this.nextTick(t,null,d)}}class MemoryValueIterator extends AbstractValueIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key,o=this[kIterator].value;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,o)}_nextv(e,t,o){const l=this[kIterator],d=[];for(;l.valid&&d.length<e&&this[kTest](l.key);)d.push(l.value),l[this[kAdvance]]();this.nextTick(o,null,d)}_all(e,t){const o=this.limit-this.count,l=this[kIterator],d=[];for(;l.valid&&d.length<o&&this[kTest](l.key);)d.push(l.value),l[this[kAdvance]]();this.nextTick(t,null,d)}}for(const n of[MemoryIterator,MemoryKeyIterator,MemoryValueIterator])n.prototype[kInit]=function(e,t){this[kReverse]=t.reverse,this[kOptions]=t,this[kReverse]?(this[kAdvance]="prev",this[kLowerBound]="lte"in t?t.lte:"lt"in t?t.lt:kNone,this[kUpperBound]="gte"in t?t.gte:"gt"in t?t.gt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.end:"lte"in t?this[kIterator]=e.le(this[kLowerBound]):this[kIterator]=e.lt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="gte"in t?gte:gt)):(this[kAdvance]="next",this[kLowerBound]="gte"in t?t.gte:"gt"in t?t.gt:kNone,this[kUpperBound]="lte"in t?t.lte:"lt"in t?t.lt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.begin:"gte"in t?this[kIterator]=e.ge(this[kLowerBound]):this[kIterator]=e.gt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="lte"in t?lte:lt))},n.prototype[kTest]=function(){return!0},n.prototype[kOutOfRange]=function(e){return this[kTest](e)?this[kLowerBound]===kNone?!1:this[kReverse]?"lte"in this[kOptions]?compare(e,this[kLowerBound])>0:compare(e,this[kLowerBound])>=0:"gte"in this[kOptions]?compare(e,this[kLowerBound])<0:compare(e,this[kLowerBound])<=0:!0},n.prototype._seek=function(e,t){this[kOutOfRange](e)?(this[kIterator]=this[kIterator].tree.end,this[kIterator].next()):this[kReverse]?this[kIterator]=this[kIterator].tree.le(e):this[kIterator]=this[kIterator].tree.ge(e)};class MemoryLevel extends AbstractLevel{constructor(e,t,o){if(typeof e=="object"&&e!==null&&(t=e),typeof e=="function"||typeof t=="function"||typeof o=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{storeEncoding:l,...d}=t||{};if(l=l||"buffer",!["buffer","view","utf8"].includes(l))throw new ModuleError("The storeEncoding option must be 'buffer', 'view' or 'utf8'",{code:"LEVEL_ENCODING_NOT_SUPPORTED"});super({seek:!0,permanence:!1,createIfMissing:!1,errorIfExists:!1,encodings:{[l]:!0}},d),this[kTree]=createRBT(compare)}_put(e,t,o,l){const d=this[kTree].find(e);d.valid?this[kTree]=d.update(t):this[kTree]=this[kTree].insert(e,t),this.nextTick(l)}_get(e,t,o){const l=this[kTree].get(e);if(typeof l>"u")return this.nextTick(o,new Error("NotFound"));this.nextTick(o,null,l)}_getMany(e,t,o){this.nextTick(o,null,e.map(l=>this[kTree].get(l)))}_del(e,t,o){this[kTree]=this[kTree].remove(e),this.nextTick(o)}_batch(e,t,o){let l=this[kTree];for(const d of e){const u=d.key,a=l.find(u);d.type==="put"?l=a.valid?a.update(d.value):l.insert(u,d.value):l=a.remove()}this[kTree]=l,this.nextTick(o)}_clear(e,t){if(e.limit===-1&&!Object.keys(e).some(isRangeOption))return this[kTree]=createRBT(compare),this.nextTick(t);const o=this._keys({...e}),l=o.limit;let d=0;const u=()=>{for(let a=0;a<500;a++){if(++d>l||!o[kIterator].valid||!o[kTest](o[kIterator].key))return t();this[kTree]=this[kTree].remove(o[kIterator].key),o[kIterator][o[kAdvance]]()}this.nextTick(u)};this.nextTick(u)}_iterator(e){return new MemoryIterator(this,e)}_keys(e){return new MemoryKeyIterator(this,e)}_values(e){return new MemoryValueIterator(this,e)}}var MemoryLevel_1=MemoryLevel;if(typeof browserExports<"u"&&!browserExports.browser&&typeof commonjsGlobal<"u"&&typeof commonjsGlobal.setImmediate=="function"){const n=commonjsGlobal.setImmediate;MemoryLevel.prototype.nextTick=function(e,...t){t.length===0?n(e):n(()=>e(...t))}}function isRangeOption(n){return rangeOptions.has(n)}var rdfDataFactory={},BlankNode$1={};Object.defineProperty(BlankNode$1,"__esModule",{value:!0});BlankNode$1.BlankNode=void 0;class BlankNode{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}BlankNode$1.BlankNode=BlankNode;var DataFactory$2={},DefaultGraph$1={};Object.defineProperty(DefaultGraph$1,"__esModule",{value:!0});DefaultGraph$1.DefaultGraph=void 0;class DefaultGraph{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}}DefaultGraph$1.DefaultGraph=DefaultGraph;DefaultGraph.INSTANCE=new DefaultGraph;var Literal$1={},NamedNode$1={};Object.defineProperty(NamedNode$1,"__esModule",{value:!0});NamedNode$1.NamedNode=void 0;class NamedNode{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}}NamedNode$1.NamedNode=NamedNode;Object.defineProperty(Literal$1,"__esModule",{value:!0});Literal$1.Literal=void 0;const NamedNode_1$1=NamedNode$1;class Literal{constructor(e,t){this.termType="Literal",this.value=e,typeof t=="string"?(this.language=t,this.datatype=Literal.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=Literal.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}Literal$1.Literal=Literal;Literal.RDF_LANGUAGE_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Literal.XSD_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/2001/XMLSchema#string");var Quad$1={};Object.defineProperty(Quad$1,"__esModule",{value:!0});Quad$1.Quad=void 0;class Quad{constructor(e,t,o,l){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=o,this.graph=l}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}Quad$1.Quad=Quad;var Variable$1={};Object.defineProperty(Variable$1,"__esModule",{value:!0});Variable$1.Variable=void 0;class Variable{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}}Variable$1.Variable=Variable;Object.defineProperty(DataFactory$2,"__esModule",{value:!0});DataFactory$2.DataFactory=void 0;const BlankNode_1=BlankNode$1,DefaultGraph_1=DefaultGraph$1,Literal_1=Literal$1,NamedNode_1=NamedNode$1,Quad_1=Quad$1,Variable_1=Variable$1;let dataFactoryCounter=0,DataFactory$1=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${dataFactoryCounter++}_`}namedNode(e){return new NamedNode_1.NamedNode(e)}blankNode(e){return new BlankNode_1.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new Literal_1.Literal(e,t)}variable(e){return new Variable_1.Variable(e)}defaultGraph(){return DefaultGraph_1.DefaultGraph.INSTANCE}quad(e,t,o,l){return new Quad_1.Quad(e,t,o,l||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(Literal_1.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};DataFactory$2.DataFactory=DataFactory$1;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,l,d,u){u===void 0&&(u=d),Object.defineProperty(o,u,{enumerable:!0,get:function(){return l[d]}})}:function(o,l,d,u){u===void 0&&(u=d),o[u]=l[d]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,l){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,o,d)};Object.defineProperty(n,"__esModule",{value:!0}),t(BlankNode$1,n),t(DataFactory$2,n),t(DefaultGraph$1,n),t(Literal$1,n),t(NamedNode$1,n),t(Quad$1,n),t(Variable$1,n)})(rdfDataFactory);var ResultType;(function(n){n.VOID="void",n.QUADS="quads",n.APPROXIMATE_SIZE="approximate_size"})(ResultType||(ResultType={}));class LinkedList{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}get empty(){return this._head===null}push(e){const t={value:e,next:null};this._tail===null?this._head=this._tail=t:this._tail.next=this._tail=t,this._length++}shift(){if(this._head===null)return;const{value:e,next:t}=this._head;return this._head=t,t===null&&(this._tail=null),this._length--,e}clear(){this._length=0,this._head=this._tail=null}}const resolved=Promise.resolve(void 0);function createTaskScheduler(){const n=typeof queueMicrotask=="function"?queueMicrotask:l=>resolved.then(l),e=typeof setImmediate=="function"?setImmediate:l=>setTimeout(l,0);let t=0,o=null;return l=>{o!==null?o.push(l):++t<100?n(l):(o=[l],e(()=>{for(const d of o)n(d);o=null,t=0}))}}let taskScheduler=createTaskScheduler();function scheduleTask(n){taskScheduler(n)}function getTaskScheduler(){return taskScheduler}function setTaskScheduler(n){taskScheduler=n}const INIT=1<<0,OPEN=1<<1,CLOSING=1<<2,CLOSED=1<<3,ENDED=1<<4,DESTROYED=1<<5;class AsyncIterator extends eventsExports.EventEmitter{constructor(e=OPEN){super(),this._readable=!1,this._state=e,this.on("newListener",waitForDataListener)}_changeState(e,t=!1){const o=e>this._state&&this._state<ENDED;return o&&(this._state=e,e===ENDED&&(t?taskScheduler(()=>this.emit("end")):this.emit("end"))),o}read(){return null}forEach(e,t){this.on("data",bind(e,t))}close(){this._changeState(CLOSED)&&this._endAsync()}destroy(e){this.done||this._destroy(e,t=>{e=e||t,e&&this.emit("error",e),this._end(!0)})}_destroy(e,t){t()}_end(e=!1){this._changeState(e?DESTROYED:ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){taskScheduler(()=>this._end())}get readable(){return this._readable}set readable(e){e=Boolean(e)&&!this.done,this._readable!==e&&(this._readable=e,e&&taskScheduler(()=>this.emit("readable")))}get closed(){return this._state>=CLOSING}get ended(){return this._state===ENDED}get destroyed(){return this._state===DESTROYED}get done(){return this._state>=ENDED}toString(){const e=this._toStringDetails();return`[${this.constructor.name}${e?` ${e}`:""}]`}_toStringDetails(){return""}toArray(e){const t=[],o=typeof e?.limit=="number"?e.limit:1/0;return this.ended||o<=0?Promise.resolve(t):new Promise((l,d)=>{const u=()=>l(t),a=c=>{t.push(c),t.length>=o&&(this.removeListener("error",d),this.removeListener("data",a),this.removeListener("end",u),l(t))};this.on("error",d),this.on("data",a),this.on("end",u)})}getProperty(e,t){const o=this._properties;if(!t)return o&&o[e];if(o&&e in o)taskScheduler(()=>t(o[e]));else{let l;(l=this._propertyCallbacks)||(this._propertyCallbacks=l=Object.create(null)),e in l?l[e].push(t):l[e]=[t]}}setProperty(e,t){const o=this._properties||(this._properties=Object.create(null));o[e]=t;const l=this._propertyCallbacks||{},d=l[e];if(d){delete l[e],taskScheduler(()=>{for(const u of d)u(t)});for(e in l)return;delete this._propertyCallbacks}}getProperties(){const e=this._properties,t={};for(const o in e)t[o]=e[o];return t}setProperties(e){for(const t in e)this.setProperty(t,e[t])}copyProperties(e,t){for(const o of t)e.getProperty(o,l=>this.setProperty(o,l))}transform(e){return new SimpleTransformIterator(this,e)}map(e,t){return new MappingIterator(this,bind(e,t))}filter(e,t){return this.map(function(o){return e.call(t||this,o)?o:null})}uniq(e=identity){const t=new Set;return this.filter(function(o){const l=e.call(this,o);return t.has(l)?!1:(t.add(l),!0)})}prepend(e){return this.transform({prepend:e})}append(e){return this.transform({append:e})}surround(e,t){return this.transform({prepend:e,append:t})}skip(e){return this.map(t=>e-- >0?null:t)}take(e){return this.transform({limit:e})}range(e,t){return this.transform({offset:e,limit:Math.max(t-e+1,0)})}clone(){return new ClonedIterator(this)}}function waitForDataListener(n){n==="data"&&(this.removeListener("newListener",waitForDataListener),addSingleListener(this,"readable",emitData),this.readable&&taskScheduler(()=>emitData.call(this)))}function emitData(){let n;for(;this.listenerCount("data")!==0&&(n=this.read())!==null;)this.emit("data",n);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",emitData),addSingleListener(this,"newListener",waitForDataListener))}function addSingleListener(n,e,t){n.listeners(e).includes(t)||n.on(e,t)}class EmptyIterator extends AsyncIterator{constructor(){super(),this._changeState(ENDED,!0)}}class SingletonIterator extends AsyncIterator{constructor(e){super(),this._item=e,e===null?this.close():this.readable=!0}read(){const e=this._item;return this._item=null,this.close(),e}_toStringDetails(){return this._item===null?"":`(${this._item})`}}class ArrayIterator extends AsyncIterator{constructor(e=[],{autoStart:t=!0,preserve:o=!0}={}){super();const l=o||!Array.isArray(e)?[...e]:e;this._index=0,this._sourceStarted=t!==!1,this._truncateThreshold=o?-1:64,this._sourceStarted&&l.length===0?this.close():this._buffer=l,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let e=null;return this._buffer&&(this._index<this._buffer.length&&(e=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),e}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(e,t){delete this._buffer,t()}toArray(e={}){if(!this._buffer)return Promise.resolve([]);const{length:t}=this._buffer,o=this._index,l=typeof e.limit!="number"?t:o+e.limit,d=this._buffer.slice(o,l);return this._index=l,l>=t&&this.close(),Promise.resolve(d)}}class IntegerIterator extends AsyncIterator{constructor({start:e=0,step:t=1,end:o}={}){super(),Number.isFinite(e)&&(e=Math.trunc(e)),this._next=e,Number.isFinite(t)&&(t=Math.trunc(t)),this._step=t;const l=t>=0,d=l?1/0:-1/0;Number.isFinite(o)?o=Math.trunc(o):o!==-d&&(o=d),this._last=o,!Number.isFinite(e)||(l?e>o:e<o)?this.close():this.readable=!0}read(){if(this.closed)return null;const e=this._next,t=this._step,o=this._last,l=this._next+=t;return(t>=0?l>o:l<o)&&this.close(),e}_toStringDetails(){return`(${this._next}...${this._last})`}}function identity(n){return n}const DESTINATION=Symbol("destination");class MappingIterator extends AsyncIterator{constructor(e,t=identity,o={}){super(),this._map=t,this._source=ensureSourceAvailable(e),this._destroySource=o.destroySource!==!1,e.done?this.close():(this._source[DESTINATION]=this,this._source.on("end",destinationClose),this._source.on("error",destinationEmitError),this._source.on("readable",destinationSetReadable),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let e,t;for(;(e=this._source.read())!==null;)if((t=this._map(e))!==null)return t}this.readable=!1,this._source.done&&this.close()}return null}_end(e){this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&this._source.destroy(),super._end(e)}}function ensureSourceAvailable(n,e=!1){if(!n||!isFunction(n.read)||!isFunction(n.on))throw new TypeError(`Invalid source: ${n}`);if(!e&&n[DESTINATION])throw new Error("The source already has a destination");return n}class BufferedIterator extends AsyncIterator{constructor({maxBufferSize:e=4,autoStart:t=!0}={}){super(INIT),this._buffer=new LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=e,taskScheduler(()=>this._init(t)),this._sourceStarted=t!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(e){e!==1/0&&(e=Number.isFinite(e)?Math.max(Math.trunc(e),1):4),this._maxBufferSize!==e&&(this._maxBufferSize=e,this._state===OPEN&&this._fillBuffer())}_init(e){let t=!1;this._reading=!0,this._begin(()=>{if(t)throw new Error("done callback called multiple times");t=!0,this._reading=!1,this._changeState(OPEN),e?this._fillBufferAsync():this.readable=!0})}_begin(e){e()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const e=this._buffer;let t;return e.empty?(t=null,this.readable=!1):t=e.shift(),!this._reading&&e.length<this._maxBufferSize&&(this.closed?e.empty&&this._endAsync():this._fillBufferAsync()),t}_read(e,t){t()}_push(e){this.done||(this._pushedCount++,this._buffer.push(e),this.readable=!0)}_fillBuffer(){let e;this._reading||(this.closed?this._completeClose():(e=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(e,()=>{if(!e)throw new Error("done callback called multiple times");e=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,taskScheduler(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(CLOSING):this._completeClose()}_completeClose(){this._changeState(CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(e,t){this._buffer.clear(),t()}_flush(e){e()}_toStringDetails(){const e=this._buffer;return`{${e.empty?"":`next: ${e.first}, `}buffer: ${e.length}}`}}class TransformIterator extends BufferedIterator{constructor(e,t=e||{}){super(t),this._boundPush=o=>this._push(o),isSourceExpression(e)||(e=t.source),isEventEmitter(e)?this.source=e:e&&(this._createSource=isPromise(e)?()=>e:e,this._sourceStarted&&this._loadSourceAsync()),this._optional=Boolean(t.optional),this._destroySource=t.destroySource!==!1}get source(){return isFunction(this._createSource)&&this._loadSourceAsync(),this._source}set source(e){const t=this._source=this._validateSource(e);t[DESTINATION]=this,this.done?this._destroySource&&t.destroy():t.done?this.close():(t.on("end",destinationCloseWhenDone),t.on("readable",destinationFillBuffer),t.on("error",destinationEmitError))}_loadSourceAsync(){isFunction(this._createSource)&&(Promise.resolve(this._createSource()).then(e=>{delete this._createSource,this.source=e,this._fillBuffer()},e=>this.emit("error",e)),this._createSource=null)}_validateSource(e,t=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return ensureSourceAvailable(e,t)}_read(e,t){const o=()=>{this._pushedCount<e&&!this.closed?taskScheduler(()=>this._readAndTransform(o,t)):t()};this._readAndTransform(o,t)}_readAndTransform(e,t){let o;const l=this.source;!l||l.done||(o=l.read())===null?t():this._optional?this._optionalTransform(o,e):this._transform(o,e,this._boundPush)}_optionalTransform(e,t){const o=this._pushedCount;this._transform(e,()=>{o===this._pushedCount&&this._push(e),t()},this._boundPush)}_transform(e,t,o){o(e),t()}_closeWhenDone(){this.close()}_end(e){const t=this._source;t&&(t.removeListener("end",destinationCloseWhenDone),t.removeListener("error",destinationEmitError),t.removeListener("readable",destinationFillBuffer),delete t[DESTINATION],this._destroySource&&t.destroy()),super._end(e)}}function destinationSetReadable(){this[DESTINATION].readable=!0}function destinationEmitError(n){this[DESTINATION].emit("error",n)}function destinationClose(){this[DESTINATION].close()}function destinationCloseWhenDone(){this[DESTINATION]._closeWhenDone()}function destinationFillBuffer(){this[DESTINATION]._sourceStarted!==!1&&this[DESTINATION]._fillBuffer()}class SimpleTransformIterator extends TransformIterator{constructor(e,t){if(super(e,t),this._offset=0,this._limit=1/0,this._filter=o=>!0,t=t||(isSourceExpression(e)?null:e),t){const o=isFunction(t)?t:t.transform,{limit:l,offset:d,filter:u,map:a,prepend:c,append:p}=t;d===1/0||l===-1/0?this._limit=0:(Number.isFinite(d)&&(this._offset=Math.max(Math.trunc(d),0)),Number.isFinite(l)&&(this._limit=Math.max(Math.trunc(l),0)),isFunction(u)&&(this._filter=u),isFunction(a)&&(this._map=a),this._transform=isFunction(o)?o:null),c&&(this._prepender=isEventEmitter(c)?c:fromArray(c)),p&&(this._appender=isEventEmitter(p)?p:fromArray(p))}}_read(e,t){const o=()=>this._readAndTransformSimple(e,l,t);this._readAndTransformSimple(e,l,t);function l(){taskScheduler(o)}}_readAndTransformSimple(e,t,o){let l;const{source:d}=this;if(!d||d.done){o();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<e&&(l=d.read())!==null;){if(!this._filter(l)||this._offset!==0&&this._offset--)continue;const u=typeof this._map>"u"?l:this._map(l);if(u===null)this._optional&&this._push(l);else if(!isFunction(this._transform))this._push(u);else{this._optional?this._optionalTransform(u,t):this._transform(u,t,this._boundPush);return}--this._limit===0&&this.close()}o()}_begin(e){this._insert(this._prepender,e),delete this._prepender}_flush(e){this._insert(this._appender,e),delete this._appender}_insert(e,t){const o=d=>this._push(d);!e||e.done?t():(e.on("data",o),e.on("end",l));function l(){e.removeListener("data",o),e.removeListener("end",l),t()}}}class MultiTransformIterator extends TransformIterator{constructor(e,t){if(super(e,t),this._transformerQueue=[],t){const o=isFunction(t)?t:t.multiTransform;o&&(this._createTransformer=o)}}_read(e,t){const o=this._transformerQueue,l=this._optional;let d,u;for(;(d=o[0])&&d.transformer.done;){l&&d.item!==null&&(e--,this._push(d.item)),o.shift();const{transformer:c}=d;c.removeListener("end",destinationFillBuffer),c.removeListener("readable",destinationFillBuffer),c.removeListener("error",destinationEmitError)}const{source:a}=this;for(;a&&!a.done&&o.length<this.maxBufferSize&&(u=a.read(),u!==null);){const c=this._createTransformer(u)||new EmptyIterator;c[DESTINATION]=this,c.on("end",destinationFillBuffer),c.on("readable",destinationFillBuffer),c.on("error",destinationEmitError),o.push({transformer:c,item:u})}if(d=o[0],d){const{transformer:c}=d;for(;e-- >0&&(u=c.read())!==null;)this._push(u),l&&(d.item=null)}else a&&a.done&&this.close();t()}_createTransformer(e){return new SingletonIterator(e)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(e){if(super._end(e),this._destroySource)for(const t of this._transformerQueue)t.transformer.destroy()}}class UnionIterator extends BufferedIterator{constructor(e,t={}){super(t),this._sources=[],this._currentSource=-1;const o=t.autoStart!==!1;if(isEventEmitter(e))e.on("error",l=>this.emit("error",l)),this._pending={loading:!1,sources:e},o&&this._loadSources();else if(Array.isArray(e)&&e.length>0)for(const l of e)this._addSource(l);else o&&this.close();this._destroySources=t.destroySources!==!1}_loadSources(){const e=this._pending.sources;this._pending.loading=!0,e.done?(delete this._pending,this.close()):(e.on("data",t=>{this._addSource(t),this._fillBufferAsync()}),e.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(e){isPromise(e)&&(e=wrap$1(e)),e.done||(this._sources.push(e),e[DESTINATION]=this,e.on("error",destinationEmitError),e.on("readable",destinationFillBuffer),e.on("end",destinationRemoveEmptySources))}_removeEmptySources(){this._sources=this._sources.filter((e,t)=>(e.done&&t<=this._currentSource&&this._currentSource--,!e.done)),this._fillBuffer()}_read(e,t){var o;((o=this._pending)===null||o===void 0?void 0:o.loading)===!1&&this._loadSources();let l=0,d;for(;l!==(l=e);)for(let u=0;u<this._sources.length&&e>0;u++)this._currentSource=(this._currentSource+1)%this._sources.length,(d=this._sources[this._currentSource].read())!==null&&(e--,this._push(d));!this._pending&&this._sources.length===0&&this.close(),t()}_end(e=!1){if(super._end(e),this._destroySources){for(const t of this._sources)t.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}function destinationRemoveEmptySources(){this[DESTINATION]._removeEmptySources()}class ClonedIterator extends TransformIterator{constructor(e){super(e,{autoStart:!1}),this._readPosition=0,this._reading=!1}_init(){}close(){AsyncIterator.prototype.close.call(this)}get source(){return super.source}set source(e){const t=this._source=this._validateSource(e),o=t&&t[DESTINATION]||(t[DESTINATION]=new HistoryReader(t));this.done?this._destroySource&&t.destroy():o.endsAt(0)?this.close():(o.register(this),(t._sourceStarted===!1||o.readAt(0)!==null)&&(this.readable=!0));const l=this._propertyCallbacks;for(const d in l){const u=l[d];for(const a of u)this._getSourceProperty(d,a)}}_validateSource(e,t=!1){const o=e&&e[DESTINATION];return super._validateSource(e,!o||o instanceof HistoryReader)}getProperty(e,t){const{source:o}=this,l=this._properties,d=l&&e in l;if(!t)return d?l&&l[e]:o&&o.getProperty(e);super.getProperty(e,t),o&&!d&&this._getSourceProperty(e,t)}_getSourceProperty(e,t){this.source.getProperty(e,o=>{(!this._properties||!(e in this._properties))&&t(o)})}getProperties(){const e=this.source?this.source.getProperties():{},t=this._properties;for(const o in t)e[o]=t[o];return e}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const e=this.source;let t=null;if(!this.done&&e){const o=e[DESTINATION];(t=o.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,o.endsAt(this._readPosition)&&this.close()}return t}_end(e){const t=this.source,o=t?.[DESTINATION];o&&o.unregister(this),BufferedIterator.prototype._end.call(this,e)}}class HistoryReader{constructor(e){if(this._history=[],this._trackers=new Set,this._source=e,!e.done){const t=()=>{for(const d of this._trackers)d.readable=!0},o=d=>{for(const u of this._trackers)u.emit("error",d)},l=()=>{for(const d of this._trackers)d._sourceStarted!==!1&&d._readPosition===this._history.length&&d.close();this._trackers.clear(),e.removeListener("end",l),e.removeListener("error",o),e.removeListener("readable",t)};e.on("end",l),e.on("error",o),e.on("readable",t)}}register(e){this._source.done||this._trackers.add(e)}unregister(e){this._trackers.delete(e)}readAt(e){let t=null;return e<this._history.length?t=this._history[e]:!this._source.done&&(t=this._source.read())!==null&&(this._history[e]=t),t}endsAt(e){return this._source.done&&this._history.length===e}}class WrappingIterator extends AsyncIterator{constructor(e,t){super(),this._source=null,this._destroySource=t?.destroySource!==!1,isPromise(e)?(this._source=new AsyncIterator,e.then(o=>{this._source=null,this.source=o}).catch(o=>this.emit("error",o))):e&&(this.source=e)}set source(e){let t=e;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(isIterable(t)&&(t=t[Symbol.iterator]()),isIterator(t)){let o=t;t=new eventsExports.EventEmitter,t.read=()=>{if(o!==null){let l;for(;!(l=o.next()).done;)if(l.value!==null)return l.value;o=null,this.close()}return null}}else t=ensureSourceAvailable(t);if(this.done){this._destroySource&&isFunction(t.destroy)&&t.destroy();return}t[DESTINATION]=this,t.on("end",destinationClose),t.on("error",destinationEmitError),t.on("readable",destinationSetReadable),this._source=t,this.readable=t.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const e=this._source.read();if(e!==null)return e;this.readable=!1}return null}_end(e=!1){this._source!==null&&(this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&isFunction(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(e)}}function wrap$1(n,e){if(e&&("autoStart"in e||"optional"in e||"source"in e||"maxBufferSize"in e))return n&&!isEventEmitter(n)&&(n=new WrappingIterator(n)),new TransformIterator(n,e);if(!n)return empty();if(isPromise(n))return new WrappingIterator(n,e);if(n instanceof AsyncIterator)return n;if(Array.isArray(n))return fromArray(n);if(isIterable(n)||isIterator(n)||isEventEmitter(n))return new WrappingIterator(n,e);throw new TypeError(`Invalid source: ${n}`)}function empty(){return new EmptyIterator}function single(n){return new SingletonIterator(n)}function fromArray(n){return new ArrayIterator(n)}function fromIterator(n){return new WrappingIterator(n)}function fromIterable(n){return new WrappingIterator(n)}function union(n){return new UnionIterator(n)}function range(n,e,t){return new IntegerIterator({start:n,end:e,step:t})}function bind(n,e){return e?n.bind(e):n}function isFunction(n){return typeof n=="function"}function isEventEmitter(n){return isFunction(n?.on)}function isPromise(n){return isFunction(n?.then)}function isSourceExpression(n){return n&&(isEventEmitter(n)||isPromise(n)||isFunction(n))}function isIterable(n){return n&&Symbol.iterator in n}function isIterator(n){return isFunction(n?.next)}var __QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__=Object.freeze({__proto__:null,ArrayIterator,AsyncIterator,BufferedIterator,CLOSED,CLOSING,ClonedIterator,DESTINATION,DESTROYED,ENDED,EmptyIterator,INIT,IntegerIterator,LinkedList,MappingIterator,MultiTransformIterator,OPEN,SimpleTransformIterator,SingletonIterator,TransformIterator,UnionIterator,WrappingIterator,empty,fromArray,fromIterable,fromIterator,getTaskScheduler,identity,isEventEmitter,isFunction,isIterable,isIterator,isPromise,isSourceExpression,range,scheduleTask,setTaskScheduler,single,union,wrap:wrap$1});const isObject$1=n=>typeof n=="object"&&n!==null,isAbstractLevel=n=>isObject$1(n)&&typeof n.open=="function"&&typeof n.batch=="function",ensureAbstractLevel=(n,e)=>{if(!isAbstractLevel(n))throw new Error(`${e} is not an AbstractLevel instance`)},streamToArray=n=>new Promise((e,t)=>{const o=[],l=c=>{o.push(c)},d=()=>{n.removeListener("data",l),n.removeListener("error",a),n.destroy()},u=()=>{d(),e(o)},a=c=>{d(),t(c)};n.on("error",a),n.on("end",u),n.on("data",l)}),arrStartsWith=(n,e)=>{for(let t=0;t<e.length;t+=1)if(e[t]!==n[t])return!1;return!0},RESOLVED=Promise.resolve(),emptyObject={},boundary="",separator="\0\0",defaultIndexes=[["subject","predicate","object","graph"],["object","graph","subject","predicate"],["graph","subject","predicate","object"],["subject","object","predicate","graph"],["predicate","object","graph","subject"],["graph","predicate","object","subject"]],levelPutOpts={keyEncoding:"utf8",valueEncoding:"view"},levelDelOpts={keyEncoding:"utf8"},consumeOneByOne=async(n,e)=>new Promise((t,o)=>{let l,d=!1,u=!1;const a=()=>{if(u=!0,(l=n.read())!==null){Promise.resolve(e(l)).then(a).catch(c);return}u=!1,d&&t()},c=h=>{o(h),y()},p=()=>{d=!0,u||t(),y()},m=()=>{u||a()},y=()=>{n.removeListener("end",p),n.removeListener("error",c),n.removeListener("readable",m),typeof n.destroy=="function"&&n.destroy()};n.on("end",p),n.on("error",c),n.on("readable",m),n.readable!==!1&&a()}),consumeInBatches=async(n,e,t)=>new Promise((o,l)=>{let d=0,u=!1,a=!1,c=new Array(e);const p=()=>{if(v(),d>0){Promise.resolve(t(c.slice(0,d))).then(o).catch(y);return}o()},m=()=>{a=!0,u||p()},y=S=>{v(),l(S)},h=()=>{u||g()};let T=null;const g=()=>{if(u=!0,a){p();return}for(;d<e&&(T=n.read())!==null;)c[d++]=T;if(T===null){u=!1;return}d===e&&(Promise.resolve(t(c.slice())).then(g).catch(y),d=0)},v=()=>{n.removeListener("end",m),n.removeListener("error",y),n.removeListener("readable",h),typeof n.destroy=="function"&&n.destroy()};n.on("end",m),n.on("error",y),n.on("readable",h),n.readable!==!1&&g()});let IDX=256;const HEX=[];for(;IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);const createUid=n=>{n=n||16;let e="",t=0;return()=>{if(!e||t===256){for(e="",t=(1+n)/2|0;t--;)e+=HEX[256*Math.random()|0];e=e.substring(t=0,n-2)}return e+HEX[t++]}},uid=createUid(11);class LevelIterator extends BufferedIterator{level;mapFn;levelEnded;constructor(e,t){super({maxBufferSize:64}),this.mapFn=t,this.level=e,this.levelEnded=!1}_read(e,t){const o={remaining:e};o.next=this._onNextValue.bind(this,o,t),this.level.next(o.next)}_onNextValue(e,t,o,l,d){if(o){t(o);return}if(l===void 0&&d===void 0){this.close(),this.levelEnded=!0,t();return}if(this._push(this.mapFn(l,d)),e.remaining-=1,e.remaining===0){t();return}this.level.next(e.next)}_endLevel(e){if(this.levelEnded){e();return}this.level.close(t=>{t||(this.levelEnded=!0),e(t)})}_end(e){this.ended||(super._end(e),this._endLevel(t=>{t&&this.emit("error",t)}))}_destroy(e,t){if(this.destroyed){t();return}this._endLevel(o=>{if(o){t(o);return}super._destroy(e,t)})}}const xsd="http://www.w3.org/2001/XMLSchema#",string=`${xsd}string`,dateTime=`${xsd}dateTime`,integer=`${xsd}integer`,decimal=`${xsd}decimal`,double=`${xsd}double`,nonPositiveInteger=`${xsd}nonPositiveInteger`,negativeInteger=`${xsd}negativeInteger`,long=`${xsd}long`,int=`${xsd}int`,short=`${xsd}short`,byte=`${xsd}byte`,nonNegativeInteger=`${xsd}nonNegativeInteger`,unsignedLong=`${xsd}unsignedLong`,unsignedInt=`${xsd}unsignedInt`,unsignedShort=`${xsd}unsignedShort`,unsignedByte=`${xsd}unsignedByte`,positiveInteger=`${xsd}positiveInteger`,sliceString=(n,e,t)=>n.slice(e,e+t),viewUint8ArrayAsUint16Array=n=>new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),viewUint16ArrayAsUint8Array=(n,e,t)=>new Uint8Array(n.buffer,n.byteOffset+e*2,t*2),join=(n,e,t)=>{let o=""+n;return e<10?o+="00"+e:e<100?o+="0"+e:o+=e,o+=t.toFixed(17),o},ZERO=join(3,0,0),NEG_INF=join(0,0,0),POS_INF=join(6,0,0),encode=n=>{let e=typeof n!="number"?parseFloat(n):n;if(Number.isNaN(e))throw new Error("Cannot serialize NaN");if(e===-1/0)return NEG_INF;if(e===1/0)return POS_INF;if(e===0)return ZERO;let t=0,o=0;for(e<0&&(o=1,e*=-1);e>10;)e/=10,t+=1;for(;e<1;)e*=10,t-=1;return o===1?t>=0?join(1,999-t,10-e):join(2,t*-1,10-e):t<0?join(4,999+t,e):join(5,t,e)},namedNodeWriter={writtenValueLength:1,write(n,e,t,o){const l=o.compactIri(t.value);return n&&(n[e]=l.length),l}},namedNodeReader={readValueLength:1,readKeyChars:0,read(n,e,t,o,l,d){const u=t[o];return this.readKeyChars=u,l.namedNode(d.expandTerm(sliceString(n,e,u)))}},blankNodeWriter={writtenValueLength:1,write(n,e,t){return n&&(n[e]=t.value.length),t.value}},blankNodeReader={readValueLength:1,readKeyChars:0,read(n,e,t,o,l){const d=t[o];return this.readKeyChars=d,l.blankNode(sliceString(n,e,d))}},genericLiteralWriter={writtenValueLength:2,write(n,e,t,o){return n&&(n[e]=t.value.length,n[e+1]=t.datatype.value.length),t.datatype.value+o+t.value}},genericLiteralReader={readValueLength:2,readKeyChars:0,read(n,e,t,o,l,d){const u=t[o],a=t[o+1];return this.readKeyChars=u+a+d.length,l.literal(sliceString(n,e+a+d.length,u),l.namedNode(sliceString(n,e,a)))}},stringLiteralWriter={writtenValueLength:1,write(n,e,t){return n&&(n[e]=t.value.length),t.value}},stringLiteralReader={readValueLength:1,readKeyChars:0,read(n,e,t,o,l){const d=t[o];return this.readKeyChars=d,l.literal(sliceString(n,e,d))}},langStringLiteralWriter={writtenValueLength:2,write(n,e,t,o){return n&&(n[e]=t.value.length,n[e+1]=t.language.length),t.language+o+t.value}},langStringLiteralReader={readValueLength:2,readKeyChars:0,read(n,e,t,o,l,d){const u=t[o],a=t[o+1];return this.readKeyChars=u+a+d.length,l.literal(sliceString(n,e+a+d.length,u),sliceString(n,e,a))}},numericLiteralWriter={writtenValueLength:3,write(n,e,t,o,l,d){n&&(n[e]=t.value.length,n[e+1]=t.datatype.value.length,n[e+2]=l.length);let u=l;return d||(u+=o+t.datatype.value+o+t.value),u}},numericLiteralReader={readValueLength:3,readKeyChars:0,read(n,e,t,o,l,d){const u=t[o],a=t[o+1],c=t[o+2];return this.readKeyChars=c+a+u+d.length*2,l.literal(sliceString(n,e+c+d.length+a+d.length,u),l.namedNode(sliceString(n,e+c+d.length,a)))}},defaultGraphWriter={writtenValueLength:1,write(n,e,t){return n&&(n[e]=2),"dg"}},defaultGraphReader={readValueLength:1,readKeyChars:2,read(n,e,t,o,l){return l.defaultGraph()}},termWriter={writtenValueLength:0,write(n,e,t,o){let l="",d=e;switch(t.termType){case"NamedNode":n&&(n[d]=0),d+=1,l+=namedNodeWriter.write(n,d,t,o),d+=namedNodeWriter.writtenValueLength;break;case"BlankNode":n&&(n[d]=1),d+=1,l+=blankNodeWriter.write(n,d,t),d+=blankNodeWriter.writtenValueLength;break;case"DefaultGraph":n&&(n[d]=6),d+=1,l+=defaultGraphWriter.write(n,d,t),d+=defaultGraphWriter.writtenValueLength;break;case"Literal":if(t.language)n&&(n[d]=4),d+=1,l+=langStringLiteralWriter.write(n,d,t,separator),d+=langStringLiteralWriter.writtenValueLength;else if(t.datatype)switch(t.datatype.value){case string:n&&(n[d]=3),d+=1,l+=stringLiteralWriter.write(n,d,t),d+=stringLiteralWriter.writtenValueLength;break;case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:n&&(n[d]=5),d+=1,l+=numericLiteralWriter.write(n,d,t,separator,encode(t.value),!1),d+=numericLiteralWriter.writtenValueLength;break;case dateTime:n&&(n[d]=5),d+=1,l+=numericLiteralWriter.write(n,d,t,separator,encode(new Date(t.value).valueOf()),!1),d+=numericLiteralWriter.writtenValueLength;break;default:n&&(n[d]=2),d+=1,l+=genericLiteralWriter.write(n,d,t,separator),d+=genericLiteralWriter.writtenValueLength}else n&&(n[d]=3),d+=1,l+=stringLiteralWriter.write(n,d,t),d+=stringLiteralWriter.writtenValueLength}return this.writtenValueLength=d-e,l}},termReader={readKeyChars:0,readValueLength:0,read(n,e,t,o,l,d){let u=e,a=o,c;const p=t[a];switch(a+=1,p){case 0:c=namedNodeReader.read(n,u,t,a,l,d),u+=namedNodeReader.readKeyChars,a+=namedNodeReader.readValueLength;break;case 1:c=blankNodeReader.read(n,u,t,a,l),u+=blankNodeReader.readKeyChars,a+=blankNodeReader.readValueLength;break;case 2:c=genericLiteralReader.read(n,u,t,a,l,separator),u+=genericLiteralReader.readKeyChars,a+=genericLiteralReader.readValueLength;break;case 3:c=stringLiteralReader.read(n,u,t,a,l),u+=stringLiteralReader.readKeyChars,a+=stringLiteralReader.readValueLength;break;case 4:c=langStringLiteralReader.read(n,u,t,a,l,separator),u+=langStringLiteralReader.readKeyChars,a+=langStringLiteralReader.readValueLength;break;case 5:c=numericLiteralReader.read(n,u,t,a,l,separator),u+=numericLiteralReader.readKeyChars,a+=numericLiteralReader.readValueLength;break;case 6:c=defaultGraphReader.read(n,u,t,a,l),u+=defaultGraphReader.readKeyChars,a+=defaultGraphReader.readValueLength;break;default:throw new Error(`Unexpected encoded term type "${p}"`)}return this.readKeyChars=u-e,this.readValueLength=a-o,c}},quadWriter={writtenValueLength:0,write(n,e,t,o,l,d){let u=n,a=t;for(let c=0,p;c<l.length;c+=1)p=o[l[c]],u+=termWriter.write(e,a,p,d)+separator,a+=termWriter.writtenValueLength;return this.writtenValueLength=a-t,u}},quadReader={subject:null,predicate:null,object:null,graph:null,read(n,e,t,o,l,d,u){for(let a=0,c;a<l.length;a+=1)c=l[a],this[c]=termReader.read(n,e,t,o,d,u),e+=termReader.readKeyChars+separator.length,o+=termReader.readValueLength;return d.quad(this.subject,this.predicate,this.object,this.graph)}},patternLiteralWriter={write(n){if(n.language)return langStringLiteralWriter.write(void 0,0,n,separator);if(n.datatype)switch(n.datatype.value){case string:return stringLiteralWriter.write(void 0,0,n);case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:return numericLiteralWriter.write(void 0,0,n,separator,encode(n.value),!0);case dateTime:return numericLiteralWriter.write(void 0,0,n,separator,encode(new Date(n.value).valueOf()),!0);default:return genericLiteralWriter.write(void 0,0,n,separator)}return stringLiteralWriter.write(void 0,0,n)}},writePattern=(n,e,t)=>{let o=e.prefix,l=e.prefix,d=!0,u=!0,a=!1,c=!1,p=Object.entries(n).filter(([y,h])=>h).length;if(p===0)return l+=boundary,{gt:o,lt:l,gte:d,lte:u,order:e.terms,index:e};let m=0;for(;m<e.terms.length&&p>0;m+=1){const y=n[e.terms[m]];if(!y||a||c)return null;switch(y.termType){case"Range":a=!0,y.gt?(o+=patternLiteralWriter.write(y.gt),d=!1):y.gte&&(o+=patternLiteralWriter.write(y.gte),d=!0),y.lt?(l+=patternLiteralWriter.write(y.lt),u=!1):y.lte&&(l+=patternLiteralWriter.write(y.lte),u=!0);break;case"Literal":c=!0,o+=patternLiteralWriter.write(y),d=!0,l+=patternLiteralWriter.write(y),u=!0;break;case"NamedNode":o+=namedNodeWriter.write(void 0,0,y,t),d=!0,l+=namedNodeWriter.write(void 0,0,y,t),u=!0;break;case"BlankNode":o+=blankNodeWriter.write(void 0,0,y),d=!0,l+=blankNodeWriter.write(void 0,0,y),u=!0;break;case"DefaultGraph":o+=defaultGraphWriter.write(void 0,0,y),d=!0,l+=defaultGraphWriter.write(void 0,0,y),u=!0;break}p-=1,p>0&&m<e.terms.length-1&&(o+=separator,l+=separator)}return u?a||c?l+=boundary:l+=separator+boundary:l+=separator,d?!a&&!c&&(o+=separator):a||c?o+=boundary:o+=separator+boundary,{gt:o,lt:l,gte:d,lte:u,order:e.terms.slice(a?m-1:1),index:e}};let sortedSetImportErr,SortedSet=class{constructor(){throw new Error(`Failed to require module js-sorted-set: ${sortedSetImportErr?.message}`)}};import("./sorted-set-4ec84a67.js").then(function(n){return n.s}).then(n=>{SortedSet=n.default}).catch(n=>{sortedSetImportErr=n});class SortingIterator extends AsyncIterator{constructor(e,t,o,l){super();let d;const u=()=>{const a=new SortedSet({comparator:t}),c=()=>{e.removeListener("data",p),e.removeListener("error",m),e.removeListener("end",y),e.destroy()},p=h=>{a.insert(o(h))},m=h=>{c(),this.emit("error",h)},y=()=>{c(),d=a.beginIterator(),this.readable=!0};e.on("data",p),e.on("error",m),e.on("end",y)};this.read=()=>{if(d){const a=d.value();return a===null?(this.close(),null):(d=d.next(),l(a))}return this.readable=!1,null},RESOLVED.then(u).catch(a=>{RESOLVED.then(()=>this.emit("error",a))})}}const SORTING_KEY=Symbol(),compareSortableQuadsReverse=(n,e)=>n[SORTING_KEY]>e[SORTING_KEY]?-1:1,compareSortableQuads=(n,e)=>n[SORTING_KEY]>e[SORTING_KEY]?1:-1,emitSortableQuad=n=>n,getLevelQueryForIndex=(n,e,t,o)=>{const l=writePattern(n,e,t);if(l===null)return null;const d={[l.gte?"gte":"gt"]:l.gt,[l.lte?"lte":"lt"]:l.lt,keys:!0,values:!0,keyEncoding:"utf8",valueEncoding:"view"};return typeof o.limit=="number"&&(d.limit=o.limit),typeof o.reverse=="boolean"&&(d.reverse=o.reverse),{level:d,order:l.order,index:l.index}},getLevelQuery=(n,e,t,o)=>{for(let l=0,d;l<e.length;l+=1){d=e[l];const u=getLevelQueryForIndex(n,d,t,o);if(u!==null&&(!o.order||arrStartsWith(u.order,o.order)))return u}return null},getStream=async(n,e,t)=>{const{dataFactory:o,prefixes:l,indexes:d}=n,u=getLevelQuery(e,d,l,t);if(u!==null){const{index:c,level:p,order:m}=u;let y=new LevelIterator(n.db.iterator(p),(h,T)=>quadReader.read(h,c.prefix.length,viewUint8ArrayAsUint16Array(T),0,c.terms,o,l));return{type:ResultType.QUADS,order:m,iterator:y,index:c.terms,resorted:!1}}const a=getLevelQuery(e,d,l,emptyObject);if(a!==null){const{index:c,level:p,order:m}=a;let y=new LevelIterator(n.db.iterator(p),(h,T)=>quadReader.read(h,c.prefix.length,viewUint8ArrayAsUint16Array(T),0,c.terms,o,l));if(typeof t.order<"u"&&!arrStartsWith(t.order,m)){const h=g=>(g[SORTING_KEY]=quadWriter.write("",void 0,0,g,t.order,l)+separator,g),T=t.reverse===!0?compareSortableQuadsReverse:compareSortableQuads;if(y=new SortingIterator(y,T,h,emitSortableQuad),typeof t.limit<"u"){const g=function(){this.removeListener("end",g),this.removeListener("error",g),this.destroy()};y=y.take(t.limit).on("end",g).on("error",g)}}return{type:ResultType.QUADS,order:t.order||m,iterator:y,index:c.terms,resorted:!0}}throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(t)}`)},getApproximateSize=async(n,e,t)=>{if(!n.db.approximateSize)return{type:ResultType.APPROXIMATE_SIZE,approximateSize:1/0};const{indexes:o,prefixes:l}=n,d=getLevelQuery(e,o,l,t);if(d===null)throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(t)}`);const{level:u}=d,a=u.gte||u.gt,c=u.lte||u.lt;return new Promise((p,m)=>{n.db.approximateSize(a,c,(y,h)=>{if(y){m(y);return}p({type:ResultType.APPROXIMATE_SIZE,approximateSize:Math.max(1,h)})})})};class Scope{id;blankNodes;factory;static async init(e){return new Scope(e.dataFactory,uid(),new Map)}static async load(e,t){const o=Scope.getLevelIteratorOpts(!1,!0,t),l=new LevelIterator(e.db.iterator(o),(a,c)=>c),d=new Map,{dataFactory:u}=e;return await consumeOneByOne(l,a=>{const{originalLabel:c,randomLabel:p}=JSON.parse(a);d.set(c,u.blankNode(p))}),new Scope(u,t,d)}static async delete(e,t){const o=e.db.batch(),l=Scope.getLevelIteratorOpts(!0,!1,t),d=new LevelIterator(e.db.iterator(l),(u,a)=>u);await consumeOneByOne(d,u=>{o.del(u)}),await o.write()}static getLevelIteratorOpts(e,t,o){const l=o?`SCOPE${separator}${o}${separator}`:`SCOPE${separator}`;return{keys:e,values:t,keyEncoding:"utf8",valueEncoding:"utf8",gte:l,lte:`${l}${boundary}`}}static addMappingToLevelBatch(e,t,o,l){t.put(`SCOPE${separator}${e}${separator}${o}`,JSON.stringify({originalLabel:o,randomLabel:l}))}constructor(e,t,o){this.blankNodes=o,this.factory=e,this.id=t}parseBlankNode(e,t){let o=this.blankNodes.get(e.value);return o||(o=this.factory.blankNode(uid()),this.blankNodes.set(e.value,o),Scope.addMappingToLevelBatch(this.id,t,e.value,o.value)),o}parseSubject(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseObject(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseGraph(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseQuad(e,t){return this.factory.quad(this.parseSubject(e.subject,t),e.predicate,this.parseObject(e.object,t),this.parseGraph(e.graph,t))}}class Quadstore{db;indexes;id;prefixes;dataFactory;constructor(e){ensureAbstractLevel(e.backend,'"opts.backend"'),this.dataFactory=e.dataFactory,this.db=e.backend,this.indexes=[],this.id=uid(),(e.indexes||defaultIndexes).forEach(t=>this._addIndex(t)),this.prefixes=e.prefixes||{expandTerm:t=>t,compactIri:t=>t}}ensureReady(){if(this.db.status!=="open")throw new Error(`Store is not ready (status: "${this.db.status}"). Did you call store.open()?`)}async open(){this.db.status!=="open"&&await this.db.open()}async close(){this.db.status!=="closed"&&await this.db.close()}toString(){return this.toJSON()}toJSON(){return`[object ${this.constructor.name}::${this.id}]`}_addIndex(e){const t=e.map(o=>o.charAt(0).toUpperCase()).join("");this.indexes.push({terms:e,prefix:t+separator})}async clear(){if(typeof this.db.clear=="function")return new Promise((e,t)=>{this.db.clear(o=>{o?t(o):e()})});await this.delStream((await this.getStream({})).iterator,{batchSize:20})}match(e,t,o,l,d=emptyObject){if(e&&e.termType==="Literal")return new EmptyIterator;const u={subject:e,predicate:t,object:o,graph:l};return wrap$1(this.getStream(u,d).then(a=>a.iterator))}async countQuads(e,t,o,l,d=emptyObject){if(e&&e.termType==="Literal")return 0;const u={subject:e,predicate:t,object:o,graph:l};return(await this.getApproximateSize(u,d)).approximateSize}import(e){const t=new eventsExports.EventEmitter;return this.putStream(e,{}).then(()=>{t.emit("end")}).catch(o=>{t.emit("error",o)}),t}remove(e){const t=new eventsExports.EventEmitter;return this.delStream(e,{}).then(()=>t.emit("end")).catch(o=>t.emit("error",o)),t}removeMatches(e,t,o,l,d=emptyObject){const u=this.match(e,t,o,l,d);return this.remove(u)}deleteGraph(e){return this.removeMatches(void 0,void 0,void 0,e)}async getApproximateSize(e,t=emptyObject){return await this.ensureReady(),await getApproximateSize(this,e,t)}_batchPut(e,t,o,l){const{indexes:d}=this;for(let u=0,a=d.length,c,p;u<a;u+=1){p=o+u*16,c=d[u];const m=quadWriter.write(c.prefix,t,p,e,c.terms,this.prefixes);l=l.put(m,viewUint16ArrayAsUint8Array(t,p,16),levelPutOpts)}return l}async put(e,t=emptyObject){this.ensureReady();const{indexes:o,db:l}=this;let d=l.batch();t.scope&&(e=t.scope.parseQuad(e,d));const u=new Uint16Array(16*o.length);return this._batchPut(e,u,0,d),await this.writeBatch(d,t),{type:ResultType.VOID}}async multiPut(e,t=emptyObject){this.ensureReady();const{indexes:o,db:l}=this,d=new Uint16Array(16*o.length*e.length);let u=0,a=l.batch();for(let c=0,p=e.length,m;c<p;c+=1)m=e[c],u=c*o.length*16,t.scope&&(m=t.scope.parseQuad(m,a)),this._batchPut(m,d,u,a);return await this.writeBatch(a,t),{type:ResultType.VOID}}_batchDel(e,t){const{indexes:o}=this;for(let l=0,d=o.length,u;l<d;l+=1){u=o[l];const a=quadWriter.write(u.prefix,void 0,0,e,u.terms,this.prefixes);t=t.del(a,levelDelOpts)}return t}async del(e,t=emptyObject){this.ensureReady();const o=this.db.batch();return this._batchDel(e,o),await this.writeBatch(o,t),{type:ResultType.VOID}}async multiDel(e,t=emptyObject){this.ensureReady();const o=this.db.batch();for(let l=0,d=e.length,u;l<d;l+=1)u=e[l],this._batchDel(u,o);return await this.writeBatch(o,t),{type:ResultType.VOID}}async patch(e,t,o=emptyObject){this.ensureReady();const{indexes:l,db:d}=this,u=d.batch();this._batchDel(e,u);const a=new Uint16Array(16*l.length);return this._batchPut(t,a,0,u),await this.writeBatch(u,o),{type:ResultType.VOID}}async multiPatch(e,t,o=emptyObject){this.ensureReady();const{indexes:l,db:d}=this;let u=d.batch();for(let p=0,m=e.length,y;p<m;p+=1)y=e[p],this._batchDel(y,u);const a=new Uint16Array(16*l.length*t.length);let c=0;for(let p=0,m=t.length,y;p<m;p+=1)c=p*l.length*16,y=t[p],this._batchPut(y,a,c,u);return await this.writeBatch(u,o),{type:ResultType.VOID}}async writeBatch(e,t){t.preWrite&&await t.preWrite(e),await e.write()}async get(e,t=emptyObject){this.ensureReady();const o=await this.getStream(e,t);return{items:await streamToArray(o.iterator),type:o.type,order:o.order,index:o.index,resorted:o.resorted}}async getStream(e,t=emptyObject){return this.ensureReady(),await getStream(this,e,t)}async putStream(e,t=emptyObject){this.ensureReady();const o=t.batchSize||1;return o===1?await consumeOneByOne(e,l=>this.put(l,t)):await consumeInBatches(e,o,l=>this.multiPut(l,t)),{type:ResultType.VOID}}async delStream(e,t=emptyObject){this.ensureReady();const o=t.batchSize||1;return o===1?await consumeOneByOne(e,l=>this.del(l)):await consumeInBatches(e,o,l=>this.multiDel(l)),{type:ResultType.VOID}}async initScope(){return await this.ensureReady(),await Scope.init(this)}async loadScope(e){return await this.ensureReady(),await Scope.load(this,e)}async deleteScope(e){await this.ensureReady(),await Scope.delete(this,e)}async deleteAllScopes(){await this.ensureReady(),await Scope.delete(this)}}var sparqlalgebrajs={},sparqlAlgebra={},es6=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var o,l,d;if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(l=o;l--!==0;)if(!n(e[l],t[l]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;for(l of e.entries())if(!n(l[1],t.get(l[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(o=e.length,o!=t.length)return!1;for(l=o;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(d=Object.keys(e),o=d.length,o!==Object.keys(t).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,d[l]))return!1;for(l=o;l--!==0;){var u=d[l];if(!n(e[u],t[u]))return!1}return!0}return e!==e&&t!==t},rdfString={},TermUtil$1={};Object.defineProperty(TermUtil$1,"__esModule",{value:!0});TermUtil$1.stringQuadToQuad=TermUtil$1.quadToStringQuad=TermUtil$1.stringToTerm=TermUtil$1.getLiteralLanguage=TermUtil$1.getLiteralType=TermUtil$1.getLiteralValue=TermUtil$1.termToString=void 0;const rdf_data_factory_1$2=rdfDataFactory,FACTORY=new rdf_data_factory_1$2.DataFactory;function termToString(n){if(n)switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return"_:"+n.value;case"Literal":const e=n;return'"'+e.value+'"'+(e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+e.datatype.value:"")+(e.language?"@"+e.language:"");case"Quad":return`<<${termToString(n.subject)} ${termToString(n.predicate)} ${termToString(n.object)}${n.graph.termType==="DefaultGraph"?"":" "+termToString(n.graph)}>>`;case"Variable":return"?"+n.value;case"DefaultGraph":return n.value}}TermUtil$1.termToString=termToString;function getLiteralValue(n){const e=/^"([^]*)"/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]}TermUtil$1.getLiteralValue=getLiteralValue;function getLiteralType(n){const e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}TermUtil$1.getLiteralType=getLiteralType;function getLiteralLanguage(n){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]?e[1].toLowerCase():""}TermUtil$1.getLiteralLanguage=getLiteralLanguage;function stringToTerm(n,e){if(e=e||FACTORY,!n||!n.length)return e.defaultGraph();switch(n[0]){case"_":return e.blankNode(n.substr(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(n.substr(1));case'"':const t=getLiteralLanguage(n),o=e.namedNode(getLiteralType(n));return e.literal(getLiteralValue(n),t||o);case"<":default:if(n.startsWith("<<")&&n.endsWith(">>")){const l=n.slice(2,-2).trim();let d=[],u=0,a=0,c=!1;for(let p=0;p<l.length;p++){const m=l[p];if(m==="<"&&u++,m===">"){if(u===0)throw new Error("Found closing tag without opening tag in "+n);u--}if(m==='"'){let y=!1,h=p;for(;h-- >0&&l[h]==="\\";)y=!y;y||(c=!c)}if(m===" "&&!c&&u===0){for(d.push(l.slice(a,p));l[p+1]===" ";)p+=1;a=p+1}}if(u!==0)throw new Error("Found opening tag without closing tag in "+n);if(d.push(l.slice(a,l.length)),d.length!==3&&d.length!==4)throw new Error("Nested quad syntax error "+n);return d=d.map(p=>p.startsWith("<")&&!p.includes(" ")?p.slice(1,-1):p),e.quad(stringToTerm(d[0]),stringToTerm(d[1]),stringToTerm(d[2]),d[3]?stringToTerm(d[3]):void 0)}return e.namedNode(n)}}TermUtil$1.stringToTerm=stringToTerm;function quadToStringQuad(n){return{subject:termToString(n.subject),predicate:termToString(n.predicate),object:termToString(n.object),graph:termToString(n.graph)}}TermUtil$1.quadToStringQuad=quadToStringQuad;function stringQuadToQuad(n,e){return e=e||FACTORY,e.quad(stringToTerm(n.subject,e),stringToTerm(n.predicate,e),stringToTerm(n.object,e),stringToTerm(n.graph,e))}TermUtil$1.stringQuadToQuad=stringQuadToQuad;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.termToString=n.stringToTerm=n.stringQuadToQuad=n.quadToStringQuad=n.getLiteralValue=n.getLiteralType=n.getLiteralLanguage=void 0;const e=TermUtil$1;Object.defineProperty(n,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(n,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(n,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(n,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(n,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(n,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(n,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(rdfString);var algebra={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.expressionTypes=n.types=void 0,function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"}(n.types||(n.types={})),function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"}(n.expressionTypes||(n.expressionTypes={}))})(algebra);var factory$2={},Wildcard$2={};let Wildcard$1=class{constructor(){return WILDCARD||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(Wildcard$1.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(Wildcard$1.prototype,"termType",{enumerable:!0,value:"Wildcard"});var WILDCARD=new Wildcard$1;Wildcard$2.Wildcard=Wildcard$1;var SparqlParser=function(){var n=function(le,se,pe,ye){for(pe=pe||{},ye=le.length;ye--;pe[le[ye]]=se);return pe},e=[6,12,13,15,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],t=[2,211],o=[107,117,120,122,123,132,133,138,322,323,324,325,326],l=[2,389],d=[1,22],u=[1,31],a=[13,16,35,195,219,224,312],c=[6,90],p=[45,46,58],m=[45,58],y=[1,62],h=[1,64],T=[1,60],g=[1,63],v=[1,69],S=[1,70],x=[26,34,35],w=[13,16,35,195,219,312],E=[13,16,312],O=[119,141,320,327],I=[13,16,119,141,312],z=[1,96],Q=[1,100],W=[1,102],H=[119,141,320,321,327],B=[13,16,119,141,312,321],M=[1,108],V=[2,253],$=[1,107],te=[13,16,34,35,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],J=[6,45,46,58,68,75,78,86,88,90],Z=[6,13,16,34,45,46,58,68,75,78,86,88,90,312],Y=[6,13,16,26,34,35,37,38,45,46,48,58,68,75,78,86,87,88,90,93,100,116,119,132,133,135,140,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,330,331,333,334,335,336,337,338,339],oe=[34,35,45,46,58],ie=[1,139],ne=[1,140],re=[1,151],he=[1,131],we=[1,125],Te=[1,130],Ee=[1,132],_e=[1,142],ce=[1,143],je=[1,144],Ie=[1,145],Re=[1,147],Oe=[1,148],Se=[2,461],D=[1,157],k=[1,158],G=[1,159],j=[1,152],b=[1,153],_=[1,156],N=[1,166],L=[1,167],F=[1,168],U=[1,169],X=[1,170],ee=[1,171],ue=[1,172],de=[1,173],fe=[1,174],me=[1,175],ve=[1,165],be=[1,160],ge=[1,161],Ae=[1,162],Ce=[1,163],Fe=[1,164],ct=[6,13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],et=[2,312],dt=[1,199],ze=[1,197],ke=[6,191],Qe=[2,329],sr=[2,317],ot=[45,135],q=[6,48,78,86,88,90],ae=[2,257],Be=[1,213],Me=[1,215],Ve=[6,48,75,78,86,88,90],Ut=[2,255],Vt=[1,221],it=[1,233],qt=[1,231],Xe=[1,239],Wt=[1,232],Ke=[1,237],Je=[1,238],Vr=[6,68,75,78,86,88,90],or=[37,38,191,250,278],Qt=[37,38,191,250,254,278],Gt=[37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,334,335,336,337,338,339],qe=[26,37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,331,334,335,336,337,338,339],Qr=[1,267],Gr=[1,266],We=[6,13,16,26,34,35,37,38,46,48,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],$r=[1,275],Hr=[1,274],tt=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],Yt=[35,93],ur=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],Xr=[13,16,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Kr=[48,93],Jr=[34,38],Nt=[6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331],ut=[6,13,16,26,34,35,38,87,93,226,231,245,246,271,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331,333],zr=[1,299],qr=[1,300],Wr=[6,116,191],It=[48,119],Or=[6,48,86,88,90],Yr=[2,341],yt=[2,333],wt=[1,340],Ot=[1,342],Zt=[48,119,328],ft=[13,16,34,195,312],Rt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],He=[13,16,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],Er=[1,374],Sr=[1,375],Zr=[13,16,26,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],jr=[1,398],Lt=[1,399],en=[13,16,38,195,224,312],tn=[1,416],Et=[6,48,90],rn=[6,13,16,35,48,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],Ar=[6,13,16,34,35,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,226,231,245,246,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,339,340,341,342,343,344],Pt=[46,48,90,119,167,168,170,173,174],er=[1,435],tr=[1,436],nn=[1,442],an=[1,441],Dt=[48,119,191,227,328],cr=[13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],lr=[13,16,34,35,38,48,87,93,119,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],dr=[13,16,38,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],xr=[35,48],sn=[2,332],on=[1,497],un=[1,494],cn=[1,495],ln=[6,13,16,26,34,35,37,38,46,48,68,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,329,331,334,335,336,337,338,339,340,341,342,343,344],Nr=[1,515],fr=[46,48,90,119,167,168,170,173,174,328],dn=[13,16,34,35,195,219,224,312],Ct=[6,13,16,34,35,48,75,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],fn=[13,16,34,35,38,48,87,93,119,191,195,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],$t=[6,13,16,34,35,48,81,83,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],pn=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],hn=[13,16,34,312],bt=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],_t=[2,344],pr=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],mn=[13,16,34,35,37,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],vt=[2,339],yn=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],bn=[13,16,38,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],rr=[46,48,90,119,167,168,170,173,174,191,227,328],gn=[13,16,34,38,48,87,100,195,231,235,299,300,301,302,303,304,305,306,307,308,309,310,311,312],_n=[13,16,34,35,48,87,93,119,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],vn=[2,327],Ir={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClauseWildcard:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifierNoGroup:21,SelectClauseVars:22,SelectQuery_repetition1:23,SolutionModifier:24,SelectClauseBase:25,"*":26,SelectClauseVars_repetition_plus0:27,SELECT:28,SelectClauseBase_option0:29,SubSelect:30,SubSelect_option0:31,SubSelect_option1:32,SelectClauseItem:33,VAR:34,"(":35,Expression:36,AS:37,")":38,VarTriple:39,ConstructQuery:40,CONSTRUCT:41,ConstructTemplate:42,ConstructQuery_repetition0:43,ConstructQuery_repetition1:44,WHERE:45,"{":46,ConstructQuery_option0:47,"}":48,DescribeQuery:49,DESCRIBE:50,DescribeQuery_group0:51,DescribeQuery_repetition0:52,DescribeQuery_option0:53,AskQuery:54,ASK:55,AskQuery_repetition0:56,DatasetClause:57,FROM:58,DatasetClause_option0:59,iri:60,WhereClause_option0:61,GroupGraphPattern:62,SolutionModifier_option0:63,SolutionModifierNoGroup_option0:64,SolutionModifierNoGroup_option1:65,SolutionModifierNoGroup_option2:66,GroupClause:67,GROUP:68,BY:69,GroupClause_repetition_plus0:70,GroupCondition:71,BuiltInCall:72,FunctionCall:73,HavingClause:74,HAVING:75,HavingClause_repetition_plus0:76,OrderClause:77,ORDER:78,OrderClause_repetition_plus0:79,OrderCondition:80,ASC:81,BrackettedExpression:82,DESC:83,Constraint:84,LimitOffsetClauses:85,LIMIT:86,INTEGER:87,OFFSET:88,ValuesClause:89,VALUES:90,InlineData:91,InlineData_repetition0:92,NIL:93,InlineData_repetition1:94,InlineData_repetition_plus2:95,InlineData_repetition3:96,DataBlockValue:97,Literal:98,ConstTriple:99,UNDEF:100,DataBlockValueList:101,DataBlockValueList_repetition_plus0:102,Update:103,Update_repetition0:104,Update1:105,Update_option0:106,LOAD:107,Update1_option0:108,Update1_option1:109,Update1_group0:110,Update1_option2:111,GraphRefAll:112,Update1_group1:113,Update1_option3:114,GraphOrDefault:115,TO:116,CREATE:117,Update1_option4:118,GRAPH:119,INSERTDATA:120,QuadPattern:121,DELETEDATA:122,DELETEWHERE:123,Update1_option5:124,InsertClause:125,Update1_option6:126,Update1_repetition0:127,Update1_option7:128,DeleteClause:129,Update1_option8:130,Update1_repetition1:131,DELETE:132,INSERT:133,UsingClause:134,USING:135,UsingClause_option0:136,WithClause:137,WITH:138,IntoGraphClause:139,INTO:140,DEFAULT:141,GraphOrDefault_option0:142,GraphRefAll_group0:143,QuadPattern_option0:144,QuadPattern_repetition0:145,QuadsNotTriples:146,QuadsNotTriples_group0:147,QuadsNotTriples_option0:148,QuadsNotTriples_option1:149,QuadsNotTriples_option2:150,TriplesTemplate:151,TriplesTemplate_repetition0:152,TriplesSameSubject:153,TriplesTemplate_option0:154,GroupGraphPatternSub:155,GroupGraphPatternSub_option0:156,GroupGraphPatternSub_repetition0:157,GroupGraphPatternSubTail:158,GraphPatternNotTriples:159,GroupGraphPatternSubTail_option0:160,GroupGraphPatternSubTail_option1:161,TriplesBlock:162,TriplesBlock_repetition0:163,TriplesSameSubjectPath:164,TriplesBlock_option0:165,GraphPatternNotTriples_repetition0:166,OPTIONAL:167,MINUS:168,GraphPatternNotTriples_group0:169,SERVICE:170,GraphPatternNotTriples_option0:171,GraphPatternNotTriples_group1:172,FILTER:173,BIND:174,FunctionCall_option0:175,FunctionCall_repetition0:176,ExpressionList:177,ExpressionList_repetition0:178,ConstructTemplate_option0:179,ConstructTriples:180,ConstructTriples_repetition0:181,ConstructTriples_option0:182,TriplesSameSubject_group0:183,PropertyListNotEmpty:184,TriplesNode:185,PropertyList:186,PropertyList_option0:187,VerbObjectList:188,PropertyListNotEmpty_repetition0:189,SemiOptionalVerbObjectList:190,";":191,SemiOptionalVerbObjectList_option0:192,Verb:193,ObjectList:194,a:195,ObjectList_repetition0:196,GraphNode:197,ObjectListPath:198,ObjectListPath_repetition0:199,GraphNodePath:200,TriplesSameSubjectPath_group0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,PropertyListPathNotEmpty_group0:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmpty_repetition1:207,PropertyListPathNotEmptyTail:208,PropertyListPathNotEmptyTail_group0:209,Path:210,Path_repetition0:211,PathSequence:212,PathSequence_repetition0:213,PathEltOrInverse:214,PathElt:215,PathPrimary:216,PathElt_option0:217,PathEltOrInverse_option0:218,"!":219,PathNegatedPropertySet:220,PathOneInPropertySet:221,PathNegatedPropertySet_repetition0:222,PathNegatedPropertySet_option0:223,"^":224,TriplesNode_repetition_plus0:225,"[":226,"]":227,TriplesNodePath_repetition_plus0:228,GraphNode_group0:229,GraphNodePath_group0:230,"<<":231,VarTriple_group0:232,VarTriple_group1:233,VarTriple_group2:234,">>":235,VarTriple_group3:236,VarTriple_group4:237,ConstTriple_group0:238,ConstTriple_group1:239,ConstTriple_group2:240,ConstTriple_group3:241,ConstTriple_group4:242,VarOrTerm:243,Term:244,BLANK_NODE_LABEL:245,ANON:246,ConditionalAndExpression:247,Expression_repetition0:248,ExpressionTail:249,"||":250,RelationalExpression:251,ConditionalAndExpression_repetition0:252,ConditionalAndExpressionTail:253,"&&":254,AdditiveExpression:255,RelationalExpression_group0:256,RelationalExpression_option0:257,IN:258,MultiplicativeExpression:259,AdditiveExpression_repetition0:260,AdditiveExpressionTail:261,AdditiveExpressionTail_group0:262,NumericLiteralPositive:263,AdditiveExpressionTail_repetition0:264,NumericLiteralNegative:265,AdditiveExpressionTail_repetition1:266,UnaryExpression:267,MultiplicativeExpression_repetition0:268,MultiplicativeExpressionTail:269,MultiplicativeExpressionTail_group0:270,"+":271,PrimaryExpression:272,"-":273,Aggregate:274,FUNC_ARITY0:275,FUNC_ARITY1:276,FUNC_ARITY2:277,",":278,IF:279,BuiltInCall_group0:280,BOUND:281,BNODE:282,BuiltInCall_option0:283,EXISTS:284,COUNT:285,Aggregate_option0:286,Aggregate_group0:287,FUNC_AGGREGATE:288,Aggregate_option1:289,GROUP_CONCAT:290,Aggregate_option2:291,Aggregate_option3:292,GroupConcatSeparator:293,SEPARATOR:294,"=":295,String:296,LANGTAG:297,"^^":298,DECIMAL:299,DOUBLE:300,BOOLEAN:301,STRING_LITERAL1:302,STRING_LITERAL2:303,STRING_LITERAL_LONG1:304,STRING_LITERAL_LONG2:305,INTEGER_POSITIVE:306,DECIMAL_POSITIVE:307,DOUBLE_POSITIVE:308,INTEGER_NEGATIVE:309,DECIMAL_NEGATIVE:310,DOUBLE_NEGATIVE:311,PNAME_LN:312,QueryOrUpdate_group0_option0:313,Prologue_repetition0_group0:314,SelectClauseBase_option0_group0:315,DISTINCT:316,REDUCED:317,DescribeQuery_group0_repetition_plus0_group0:318,DescribeQuery_group0_repetition_plus0:319,NAMED:320,SILENT:321,CLEAR:322,DROP:323,ADD:324,MOVE:325,COPY:326,ALL:327,".":328,UNION:329,"|":330,"/":331,PathElt_option0_group0:332,"?":333,"!=":334,"<":335,">":336,"<=":337,">=":338,NOT:339,CONCAT:340,COALESCE:341,SUBSTR:342,REGEX:343,REPLACE:344,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",26:"*",28:"SELECT",34:"VAR",35:"(",37:"AS",38:")",41:"CONSTRUCT",45:"WHERE",46:"{",48:"}",50:"DESCRIBE",55:"ASK",58:"FROM",68:"GROUP",69:"BY",75:"HAVING",78:"ORDER",81:"ASC",83:"DESC",86:"LIMIT",87:"INTEGER",88:"OFFSET",90:"VALUES",93:"NIL",100:"UNDEF",107:"LOAD",116:"TO",117:"CREATE",119:"GRAPH",120:"INSERTDATA",122:"DELETEDATA",123:"DELETEWHERE",132:"DELETE",133:"INSERT",135:"USING",138:"WITH",140:"INTO",141:"DEFAULT",167:"OPTIONAL",168:"MINUS",170:"SERVICE",173:"FILTER",174:"BIND",191:";",195:"a",219:"!",224:"^",226:"[",227:"]",231:"<<",235:">>",245:"BLANK_NODE_LABEL",246:"ANON",250:"||",254:"&&",258:"IN",271:"+",273:"-",275:"FUNC_ARITY0",276:"FUNC_ARITY1",277:"FUNC_ARITY2",278:",",279:"IF",281:"BOUND",282:"BNODE",284:"EXISTS",285:"COUNT",288:"FUNC_AGGREGATE",290:"GROUP_CONCAT",294:"SEPARATOR",295:"=",297:"LANGTAG",298:"^^",299:"DECIMAL",300:"DOUBLE",301:"BOOLEAN",302:"STRING_LITERAL1",303:"STRING_LITERAL2",304:"STRING_LITERAL_LONG1",305:"STRING_LITERAL_LONG2",306:"INTEGER_POSITIVE",307:"DECIMAL_POSITIVE",308:"DOUBLE_POSITIVE",309:"INTEGER_NEGATIVE",310:"DECIMAL_NEGATIVE",311:"DOUBLE_NEGATIVE",312:"PNAME_LN",316:"DISTINCT",317:"REDUCED",320:"NAMED",321:"SILENT",322:"CLEAR",323:"DROP",324:"ADD",325:"MOVE",326:"COPY",327:"ALL",328:".",329:"UNION",330:"|",331:"/",333:"?",334:"!=",335:"<",336:">",337:"<=",338:">=",339:"NOT",340:"CONCAT",341:"COALESCE",342:"SUBSTR",343:"REGEX",344:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[17,4],[18,2],[22,2],[25,2],[30,4],[30,4],[33,1],[33,5],[33,5],[40,5],[40,7],[49,5],[54,4],[57,3],[20,2],[24,2],[21,3],[67,3],[71,1],[71,1],[71,3],[71,5],[71,1],[74,2],[77,3],[80,2],[80,2],[80,1],[80,1],[85,2],[85,2],[85,4],[85,4],[89,2],[91,4],[91,4],[91,6],[97,1],[97,1],[97,1],[97,1],[101,3],[103,3],[105,4],[105,3],[105,5],[105,4],[105,2],[105,2],[105,2],[105,6],[105,6],[129,2],[125,2],[134,3],[137,2],[139,3],[115,1],[115,2],[112,2],[112,1],[121,4],[146,7],[151,3],[62,3],[62,3],[155,2],[158,3],[162,3],[159,2],[159,2],[159,2],[159,3],[159,4],[159,2],[159,6],[159,6],[159,1],[84,1],[84,1],[84,1],[73,2],[73,6],[177,1],[177,4],[42,3],[180,3],[153,2],[153,2],[186,1],[184,2],[190,2],[188,2],[193,1],[193,1],[193,1],[194,2],[198,2],[164,2],[164,2],[202,4],[208,1],[208,3],[210,2],[212,2],[215,2],[214,2],[216,1],[216,1],[216,2],[216,3],[220,1],[220,1],[220,4],[221,1],[221,1],[221,2],[221,2],[185,3],[185,3],[203,3],[203,3],[197,1],[197,1],[200,1],[200,1],[39,9],[39,5],[99,9],[99,5],[243,1],[243,1],[244,1],[244,1],[244,1],[244,1],[244,1],[36,2],[249,2],[247,2],[253,2],[251,1],[251,3],[251,4],[255,2],[261,2],[261,2],[261,2],[259,2],[269,2],[267,2],[267,2],[267,2],[267,1],[272,1],[272,1],[272,1],[272,1],[272,1],[272,1],[82,3],[72,1],[72,2],[72,4],[72,6],[72,8],[72,2],[72,4],[72,2],[72,4],[72,3],[274,5],[274,5],[274,6],[293,4],[98,1],[98,2],[98,3],[98,1],[98,1],[98,1],[98,1],[98,1],[98,1],[296,1],[296,1],[296,1],[296,1],[263,1],[263,1],[263,1],[265,1],[265,1],[265,1],[60,1],[60,1],[60,1],[313,0],[313,1],[5,1],[5,1],[5,1],[314,1],[314,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,2],[27,1],[27,2],[315,1],[315,1],[29,0],[29,1],[31,0],[31,1],[32,0],[32,1],[43,0],[43,2],[44,0],[44,2],[47,0],[47,1],[318,1],[318,1],[319,1],[319,2],[51,1],[51,1],[52,0],[52,2],[53,0],[53,1],[56,0],[56,2],[59,0],[59,1],[61,0],[61,1],[63,0],[63,1],[64,0],[64,1],[65,0],[65,1],[66,0],[66,1],[70,1],[70,2],[76,1],[76,2],[79,1],[79,2],[92,0],[92,2],[94,0],[94,2],[95,1],[95,2],[96,0],[96,2],[102,1],[102,2],[104,0],[104,4],[106,0],[106,2],[108,0],[108,1],[109,0],[109,1],[110,1],[110,1],[111,0],[111,1],[113,1],[113,1],[113,1],[114,0],[114,1],[118,0],[118,1],[124,0],[124,1],[126,0],[126,1],[127,0],[127,2],[128,0],[128,1],[130,0],[130,1],[131,0],[131,2],[136,0],[136,1],[142,0],[142,1],[143,1],[143,1],[143,1],[144,0],[144,1],[145,0],[145,2],[147,1],[147,1],[148,0],[148,1],[149,0],[149,1],[150,0],[150,1],[152,0],[152,3],[154,0],[154,1],[156,0],[156,1],[157,0],[157,2],[160,0],[160,1],[161,0],[161,1],[163,0],[163,3],[165,0],[165,1],[166,0],[166,3],[169,1],[169,1],[171,0],[171,1],[172,1],[172,1],[175,0],[175,1],[176,0],[176,3],[178,0],[178,3],[179,0],[179,1],[181,0],[181,3],[182,0],[182,1],[183,1],[183,1],[187,0],[187,1],[189,0],[189,2],[192,0],[192,1],[196,0],[196,3],[199,0],[199,3],[201,1],[201,1],[204,0],[204,1],[205,1],[205,1],[206,0],[206,3],[207,0],[207,2],[209,1],[209,1],[211,0],[211,3],[213,0],[213,3],[332,1],[332,1],[332,1],[217,0],[217,1],[218,0],[218,1],[222,0],[222,3],[223,0],[223,1],[225,1],[225,2],[228,1],[228,2],[229,1],[229,1],[230,1],[230,1],[232,1],[232,1],[233,1],[233,1],[234,1],[234,1],[236,1],[236,1],[237,1],[237,1],[238,1],[238,1],[239,1],[239,1],[240,1],[240,1],[241,1],[241,1],[242,1],[242,1],[248,0],[248,2],[252,0],[252,2],[256,1],[256,1],[256,1],[256,1],[256,1],[256,1],[257,0],[257,1],[260,0],[260,2],[262,1],[262,1],[264,0],[264,2],[266,0],[266,2],[268,0],[268,2],[270,1],[270,1],[280,1],[280,1],[280,1],[280,1],[280,1],[283,0],[283,1],[286,0],[286,1],[287,1],[287,1],[289,0],[289,1],[291,0],[291,1],[292,0],[292,1]],performAction:function(se,pe,ye,xe,Ne,P,st){var C=P.length-1;switch(Ne){case 1:if(P[C-1]=P[C-1]||{},Pe.base&&(P[C-1].base=Pe.base),Pe.base="",P[C-1].prefixes=Pe.prefixes,Pe.prefixes=null,Pe.pathOnly){if(P[C-1].type==="path"||"termType"in P[C-1])return P[C-1];throw new Error("Received full SPARQL query in path only mode")}else if(P[C-1].type==="path"||"termType"in P[C-1])throw new Error("Received only path in full SPARQL mode");if(P[C-1].type==="update"){const De={};for(const Ue of P[C-1].updates)if(Ue.updateType==="insert"){const Le={};for(const Ye of Ue.insert)if(Ye.type==="bgp"||Ye.type==="graph")for(const Ze of Ye.triples)Ze.subject.termType==="BlankNode"&&(Le[Ze.subject.value]=!0),Ze.predicate.termType==="BlankNode"&&(Le[Ze.predicate.value]=!0),Ze.object.termType==="BlankNode"&&(Le[Ze.object.value]=!0);for(const Ye of Object.keys(Le)){if(De[Ye])throw new Error("Detected reuse blank node across different INSERT DATA clauses");De[Ye]=!0}}}return P[C-1];case 3:this.$=Ge(P[C-1],P[C],{type:"query"});break;case 4:Pe.base=nr(P[C]);break;case 5:Pe.prefixes||(Pe.prefixes={}),P[C-1]=P[C-1].substr(0,P[C-1].length-1),P[C]=nr(P[C]),Pe.prefixes[P[C-1]]=P[C];break;case 6:this.$=Ge(P[C-3],At(P[C-2]),P[C-1],P[C]);break;case 7:if(!Pe.skipValidation&&(Br(P[C-3].variables.map(Ue=>Cr(Ue.expression))).some(Ue=>Ue.aggregation==="count"&&!(Ue.expression instanceof hr))||P[C].group)){for(const Ue of P[C-3].variables)if(Ue.termType==="Variable"){if(!P[C].group||!P[C].group.map(Le=>Kt(Le)).includes(Kt(Ue)))throw Error("Projection of ungrouped variable (?"+Kt(Ue)+")")}else if(Cr(Ue.expression).length===0){const Le=Qn(Ue.expression);for(const Ye of Le)if(!P[C].group||!P[C].group.map||!P[C].group.map(Ze=>Kt(Ze)).includes(Kt(Ye)))throw Error("Use of ungrouped variable in projection of operation (?"+Kt(Ye)+")")}}const Jt=P[C-1].where.filter(De=>De.type==="query");if(Jt.length>0){const De=P[C-3].variables.filter(Le=>Le.variable&&Le.variable.value).map(Le=>Le.variable.value),Ue=Br(Jt.map(Le=>Le.variables)).map(Le=>Le.value||Le.variable.value);for(const Le of De)if(Ue.indexOf(Le)>=0)throw Error("Target id of 'AS' (?"+Le+") already used in subquery")}this.$=Ge(P[C-3],At(P[C-2]),P[C-1],P[C]);break;case 8:this.$=Ge(P[C-1],{variables:[new hr]});break;case 9:const kr=P[C].map(De=>De.value||De.variable.value),vr=Gn(kr);if(vr.length>0)throw Error("Two or more of the resulting columns have the same name (?"+vr[0]+")");this.$=Ge(P[C-1],{variables:P[C]});break;case 10:this.$=Ge({queryType:"SELECT"},P[C]&&(P[C-1]=at(P[C]),P[C]={},P[C][P[C-1]]=!0,P[C]));break;case 11:case 12:this.$=Ge(P[C-3],P[C-2],P[C-1],P[C],{type:"query"});break;case 13:case 100:case 137:case 166:this.$=rt(P[C]);break;case 14:case 28:this.$=jt(P[C-3],{variable:rt(P[C-1])});break;case 15:this.$=ar(jt(P[C-3],{variable:rt(P[C-1])}));break;case 16:this.$=Ge({queryType:"CONSTRUCT",template:P[C-3]},At(P[C-2]),P[C-1],P[C]);break;case 17:this.$=Ge({queryType:"CONSTRUCT",template:P[C-2]=P[C-2]?P[C-2].triples:[]},At(P[C-5]),{where:[{type:"bgp",triples:Ht([],P[C-2])}]},P[C]);break;case 18:this.$=Ge({queryType:"DESCRIBE",variables:P[C-3]==="*"?[new hr]:P[C-3].map(rt)},At(P[C-2]),P[C-1],P[C]);break;case 19:this.$=Ge({queryType:"ASK"},At(P[C-2]),P[C-1],P[C]);break;case 20:case 61:this.$={iri:P[C],named:!!P[C-1]};break;case 21:this.$={where:P[C].patterns};break;case 22:this.$=Ge(P[C-1],P[C]);break;case 23:this.$=Ge(P[C-2],P[C-1],P[C]);break;case 24:this.$={group:P[C]};break;case 25:case 26:case 32:case 34:this.$=jt(P[C]);break;case 27:this.$=jt(P[C-1]);break;case 29:case 35:this.$=jt(rt(P[C]));break;case 30:this.$={having:P[C]};break;case 31:this.$={order:P[C]};break;case 33:this.$=jt(P[C],{descending:!0});break;case 36:this.$={limit:Xt(P[C])};break;case 37:this.$={offset:Xt(P[C])};break;case 38:this.$={limit:Xt(P[C-2]),offset:Xt(P[C])};break;case 39:this.$={limit:Xt(P[C]),offset:Xt(P[C-2])};break;case 40:this.$={type:"values",values:P[C]};break;case 41:this.$=P[C-1].map(function(De){var Ue={};return Ue[P[C-3]]=De,Ue});break;case 42:this.$=P[C-1].map(function(){return{}});break;case 43:var xt=P[C-4].length;P[C-4]=P[C-4].map(rt),this.$=P[C-1].map(function(De){if(De.length!==xt)throw Error("Inconsistent VALUES length");for(var Ue={},Le=0;Le<xt;Le++)Ue["?"+P[C-4][Le].value]=De[Le];return Ue});break;case 46:this.$=ar(P[C]);break;case 47:this.$=void 0;break;case 48:case 92:case 117:case 167:this.$=P[C-1];break;case 49:this.$={type:"update",updates:St(P[C-2],P[C-1])};break;case 50:this.$=Ge({type:"load",silent:!!P[C-2],source:P[C-1]},P[C]&&{destination:P[C]});break;case 51:this.$={type:at(P[C-2]),silent:!!P[C-1],graph:P[C]};break;case 52:this.$={type:at(P[C-4]),silent:!!P[C-3],source:P[C-2],destination:P[C]};break;case 53:this.$={type:"create",silent:!!P[C-2],graph:{type:"graph",name:P[C]}};break;case 54:this.$={updateType:"insert",insert:Rn(P[C])};break;case 55:this.$={updateType:"delete",delete:Fr(Rn(P[C]))};break;case 56:this.$={updateType:"deletewhere",delete:Fr(P[C])};break;case 57:this.$=Ge({updateType:"insertdelete"},P[C-5],{insert:P[C-4]||[]},{delete:P[C-3]||[]},At(P[C-2],"using"),{where:P[C].patterns});break;case 58:this.$=Ge({updateType:"insertdelete"},P[C-5],{delete:P[C-4]||[]},{insert:P[C-3]||[]},At(P[C-2],"using"),{where:P[C].patterns});break;case 59:this.$=Fr(P[C]);break;case 60:case 63:case 160:case 181:this.$=P[C];break;case 62:this.$={graph:P[C]};break;case 64:this.$={type:"graph",default:!0};break;case 65:case 66:this.$={type:"graph",name:P[C]};break;case 67:this.$={},this.$[at(P[C])]=!0;break;case 68:this.$=P[C-2]?pt(P[C-1],[P[C-2]]):pt(P[C-1]);break;case 69:var br=Ge(P[C-3]||{triples:[]},{type:"graph",name:rt(P[C-5])});this.$=P[C]?[br,P[C]]:[br];break;case 70:case 75:this.$={type:"bgp",triples:pt(P[C-2],[P[C-1]])};break;case 71:this.$={type:"group",patterns:[P[C-1]]};break;case 72:for(const De of P[C-1].filter(Ue=>Ue.type==="bind")){const Ue=P[C-1].indexOf(De),Le=new Set;for(const Ye of P[C-1].slice(0,Ue))(Ye.type==="group"||Ye.type==="bgp")&&In(Ye).forEach(Ze=>Le.add(Ze));if(Le.has(De.variable.value))throw Error("Variable used to bind is already bound (?"+De.variable.value+")")}this.$={type:"group",patterns:P[C-1]};break;case 73:this.$=P[C-1]?pt([P[C-1]],P[C]):pt(P[C]);break;case 74:this.$=P[C]?[P[C-2],P[C]]:P[C-2];break;case 76:P[C-1].length?this.$={type:"union",patterns:pt(P[C-1].map(Lr),[Lr(P[C])])}:this.$=P[C];break;case 77:this.$=Ge(P[C],{type:"optional"});break;case 78:this.$=Ge(P[C],{type:"minus"});break;case 79:this.$=Ge(P[C],{type:"graph",name:rt(P[C-1])});break;case 80:this.$=Ge(P[C],{type:"service",name:rt(P[C-1]),silent:!!P[C-2]});break;case 81:this.$={type:"filter",expression:P[C]};break;case 82:this.$={type:"bind",variable:rt(P[C-1]),expression:P[C-3]};break;case 83:this.$=ar({type:"bind",variable:rt(P[C-1]),expression:P[C-3]});break;case 88:this.$={type:"functionCall",function:P[C-1],args:[]};break;case 89:this.$={type:"functionCall",function:P[C-5],args:St(P[C-2],P[C-1]),distinct:!!P[C-3]};break;case 90:case 108:case 119:case 211:case 219:case 221:case 233:case 235:case 245:case 249:case 269:case 271:case 275:case 279:case 302:case 308:case 319:case 329:case 335:case 341:case 345:case 355:case 357:case 361:case 369:case 373:case 375:case 383:case 385:case 389:case 391:case 400:case 432:case 434:case 444:case 448:case 450:case 452:this.$=[];break;case 91:this.$=St(P[C-2],P[C-1]);break;case 93:this.$=pt(P[C-2],[P[C-1]]);break;case 94:case 105:this.$=P[C].map(function(De){return Ge(Ft(P[C-1]),De)});break;case 95:this.$=Ht(P[C].map(function(De){return Ge(Ft(P[C-1].entity),De)}),P[C-1].triples);break;case 97:this.$=pt([P[C-1]],P[C]);break;case 98:this.$=pt(P[C]);break;case 99:this.$=Dr(P[C-1],P[C]);break;case 102:case 115:case 122:this.$=Pe.factory.namedNode(Tn);break;case 103:case 104:this.$=St(P[C-1],P[C]);break;case 106:this.$=P[C]?Ht(P[C].map(function(De){return Ge(Ft(P[C-1].entity),De)}),P[C-1].triples):P[C-1].triples;break;case 107:this.$=Dr(rt(P[C-3]),St(P[C-2],P[C-1]),P[C]);break;case 109:this.$=Dr(rt(P[C-1]),P[C]);break;case 110:this.$=P[C-1].length?Mt("|",St(P[C-1],P[C])):P[C];break;case 111:this.$=P[C-1].length?Mt("/",St(P[C-1],P[C])):P[C];break;case 112:this.$=P[C]?Mt(P[C],[P[C-1]]):P[C-1];break;case 113:this.$=P[C-1]?Mt(P[C-1],[P[C]]):P[C];break;case 116:case 123:this.$=Mt(P[C-1],[P[C]]);break;case 120:this.$=Mt("|",St(P[C-2],P[C-1]));break;case 124:this.$=Mt(P[C-1],[Pe.factory.namedNode(Tn)]);break;case 125:case 127:this.$=Un(P[C-1]);break;case 126:case 128:this.$=Vn(P[C-1]);break;case 129:this.$={entity:P[C],triples:[]};break;case 131:this.$={entity:P[C],triples:[]};break;case 133:case 135:this.$=ar(Pe.factory.quad(P[C-4],P[C-3],P[C-2],rt(P[C-6])));break;case 134:case 136:this.$=ar(Pe.factory.quad(P[C-3],P[C-2],P[C-1]));break;case 141:this.$=ir(P[C].replace(/^(_:)/,""));break;case 142:this.$=ir();break;case 143:this.$=Pe.factory.namedNode(wn);break;case 144:case 146:case 151:case 155:this.$=Rr(P[C-1],P[C]);break;case 145:this.$=["||",P[C]];break;case 147:this.$=["&&",P[C]];break;case 149:this.$=nt(P[C-1],[P[C-2],P[C]]);break;case 150:this.$=nt(P[C-2]?"notin":"in",[P[C-3],P[C]]);break;case 152:case 156:this.$=[P[C-1],P[C]];break;case 153:this.$=["+",Rr(P[C-1],P[C])];break;case 154:var gr=ht(P[C-1].value.replace("-",""),P[C-1].datatype);this.$=["-",Rr(gr,P[C])];break;case 157:this.$=nt("UPLUS",[P[C]]);break;case 158:this.$=nt(P[C-1],[P[C]]);break;case 159:this.$=nt("UMINUS",[P[C]]);break;case 169:this.$=nt(at(P[C-1]));break;case 170:this.$=nt(at(P[C-3]),[P[C-1]]);break;case 171:this.$=nt(at(P[C-5]),[P[C-3],P[C-1]]);break;case 172:this.$=nt(at(P[C-7]),[P[C-5],P[C-3],P[C-1]]);break;case 173:this.$=nt(at(P[C-1]),P[C]);break;case 174:this.$=nt("bound",[rt(P[C-1])]);break;case 175:this.$=nt(P[C-1],[]);break;case 176:this.$=nt(P[C-3],[P[C-1]]);break;case 177:this.$=nt(P[C-2]?"notexists":"exists",[Lr(P[C])]);break;case 178:case 179:this.$=jt(P[C-1],{type:"aggregate",aggregation:at(P[C-4]),distinct:!!P[C-2]});break;case 180:this.$=jt(P[C-2],{type:"aggregate",aggregation:at(P[C-5]),distinct:!!P[C-3],separator:typeof P[C-1]=="string"?P[C-1]:" "});break;case 182:this.$=ht(P[C]);break;case 183:this.$=Bn(P[C-1],at(P[C].substr(1)));break;case 184:this.$=ht(P[C-2],P[C]);break;case 185:case 198:this.$=ht(P[C],On);break;case 186:case 199:this.$=ht(P[C],En);break;case 187:case 200:this.$=ht(at(P[C]),Sn);break;case 190:this.$=ht(P[C].toLowerCase(),Cn);break;case 191:case 192:this.$=Nn(P[C],1);break;case 193:case 194:this.$=Nn(P[C],3);break;case 195:this.$=ht(P[C].substr(1),On);break;case 196:this.$=ht(P[C].substr(1),En);break;case 197:this.$=ht(P[C].substr(1).toLowerCase(),Sn);break;case 201:this.$=Pe.factory.namedNode(nr(P[C]));break;case 202:var _r=P[C].indexOf(":"),$e=P[C].substr(0,_r),mt=Pe.prefixes[$e];if(!mt)throw new Error("Unknown prefix: "+$e);var kt=nr(mt+P[C].substr(_r+1));this.$=Pe.factory.namedNode(kt);break;case 203:if(P[C]=P[C].substr(0,P[C].length-1),!(P[C]in Pe.prefixes))throw new Error("Unknown prefix: "+P[C]);var kt=nr(Pe.prefixes[P[C]]);this.$=Pe.factory.namedNode(kt);break;case 212:case 220:case 222:case 224:case 234:case 236:case 242:case 246:case 250:case 264:case 266:case 268:case 270:case 272:case 274:case 276:case 278:case 303:case 309:case 320:case 336:case 370:case 386:case 405:case 407:case 433:case 435:case 445:case 449:case 451:case 453:P[C-1].push(P[C]);break;case 223:case 241:case 263:case 265:case 267:case 273:case 277:case 404:case 406:this.$=[P[C]];break;case 280:P[C-3].push(P[C-2]);break;case 330:case 342:case 346:case 356:case 358:case 362:case 374:case 376:case 384:case 390:case 392:case 401:P[C-2].push(P[C-1]);break}},table:[n(e,t,{3:1,4:2,7:3}),{1:[3]},n(o,[2,279],{5:4,8:5,313:6,210:7,9:8,103:9,211:10,17:11,40:12,49:13,54:14,104:15,18:16,22:17,25:21,6:[2,204],13:l,16:l,35:l,195:l,219:l,224:l,312:l,28:d,41:[1,18],50:[1,19],55:[1,20]}),n([6,13,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],[2,2],{314:23,11:24,14:25,12:[1,26],15:[1,27]}),{6:[1,28]},{6:[2,206]},{6:[2,207]},{6:[2,208]},{6:[2,217],10:29,89:30,90:u},{6:[2,205]},n(a,[2,391],{212:32,213:33}),n(c,[2,213]),n(c,[2,214]),n(c,[2,215]),n(c,[2,216]),{105:34,107:[1,35],110:36,113:37,117:[1,38],120:[1,39],122:[1,40],123:[1,41],124:42,128:43,132:[2,304],133:[2,298],137:49,138:[1,50],322:[1,44],323:[1,45],324:[1,46],325:[1,47],326:[1,48]},n(p,[2,219],{19:51}),n(p,[2,221],{23:52}),n(m,[2,235],{42:53,44:54,46:[1,55]}),{13:y,16:h,26:[1,58],34:T,51:56,60:61,312:g,318:59,319:57},n(p,[2,249],{56:65}),{26:[1,66],27:67,33:68,34:v,35:S},n(x,[2,227],{29:71,315:72,316:[1,73],317:[1,74]}),n(e,[2,212]),n(e,[2,209]),n(e,[2,210]),{13:[1,75]},{16:[1,76]},{1:[2,1]},{6:[2,3]},{6:[2,218]},{34:[1,78],35:[1,80],91:77,93:[1,79]},n([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],[2,110],{330:[1,81]}),n(w,[2,398],{214:82,218:83,224:[1,84]}),{6:[2,281],106:85,191:[1,86]},n(E,[2,283],{108:87,321:[1,88]}),n(O,[2,289],{111:89,321:[1,90]}),n(I,[2,294],{114:91,321:[1,92]}),{118:93,119:[2,296],321:[1,94]},{46:z,121:95},{46:z,121:97},{46:z,121:98},{125:99,133:Q},{129:101,132:W},n(H,[2,287]),n(H,[2,288]),n(B,[2,291]),n(B,[2,292]),n(B,[2,293]),{132:[2,305],133:[2,299]},{13:y,16:h,60:103,312:g},{20:104,45:M,46:V,57:105,58:$,61:106},{20:109,45:M,46:V,57:110,58:$,61:106},n(p,[2,233],{43:111}),{45:[1,112],57:113,58:$},n(te,[2,361],{179:114,180:115,181:116,48:[2,359]}),n(J,[2,245],{52:117}),n(J,[2,243],{60:61,318:118,13:y,16:h,34:T,312:g}),n(J,[2,244]),n(Z,[2,241]),n(Z,[2,239]),n(Z,[2,240]),n(Y,[2,201]),n(Y,[2,202]),n(Y,[2,203]),{20:119,45:M,46:V,57:120,58:$,61:106},n(p,[2,8]),n(p,[2,9],{33:121,34:v,35:S}),n(oe,[2,223]),n(oe,[2,13]),{13:y,16:h,34:ie,35:ne,36:122,39:123,60:136,72:135,73:137,82:134,87:re,98:138,219:he,231:we,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(x,[2,10]),n(x,[2,228]),n(x,[2,225]),n(x,[2,226]),n(e,[2,4]),{13:[1,176]},n(ct,[2,40]),{46:[1,177]},{46:[1,178]},{34:[1,180],95:179},n(a,[2,390]),n([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330],[2,111],{331:[1,181]}),{13:y,16:h,35:[1,187],60:184,195:[1,185],215:182,216:183,219:[1,186],312:g},n(w,[2,399]),{6:[2,49]},n(e,t,{7:3,4:188}),{13:y,16:h,60:189,312:g},n(E,[2,284]),{112:190,119:[1,191],141:[1,193],143:192,320:[1,194],327:[1,195]},n(O,[2,290]),n(E,et,{115:196,142:198,119:dt,141:ze}),n(I,[2,295]),{119:[1,200]},{119:[2,297]},n(ke,[2,54]),n(te,Qe,{144:201,151:202,152:203,48:sr,119:sr}),n(ke,[2,55]),n(ke,[2,56]),n(ot,[2,300],{126:204,129:205,132:W}),{46:z,121:206},n(ot,[2,306],{130:207,125:208,133:Q}),{46:z,121:209},n([132,133],[2,62]),n(q,ae,{21:210,64:211,74:212,75:Be}),n(p,[2,220]),{46:Me,62:214},n(E,[2,251],{59:216,320:[1,217]}),{46:[2,254]},n(Ve,Ut,{24:218,63:219,67:220,68:Vt}),n(p,[2,222]),{20:222,45:M,46:V,57:223,58:$,61:106},{46:[1,224]},n(m,[2,236]),{48:[1,225]},{48:[2,360]},{13:y,16:h,34:it,35:qt,39:230,60:235,87:re,93:Xe,98:236,153:226,183:227,185:228,226:Wt,231:we,243:229,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(Vr,[2,247],{61:106,53:240,57:241,20:242,45:M,46:V,58:$}),n(Z,[2,242]),n(Ve,Ut,{63:219,67:220,24:243,68:Vt}),n(p,[2,250]),n(oe,[2,224]),{37:[1,244]},{37:[1,245]},n(or,[2,432],{248:246}),{13:y,16:h,34:it,39:249,60:235,87:re,93:Xe,98:236,119:[1,247],231:we,236:248,243:250,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(Qt,[2,434],{252:251}),n(Qt,[2,148],{256:252,257:253,258:[2,442],295:[1,254],334:[1,255],335:[1,256],336:[1,257],337:[1,258],338:[1,259],339:[1,260]}),n(Gt,[2,444],{260:261}),n(qe,[2,452],{268:262}),{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,263:154,265:155,272:263,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,263:154,265:155,272:264,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,263:154,265:155,272:265,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(qe,[2,160]),n(qe,[2,161]),n(qe,[2,162]),n(qe,[2,163],{35:Qr,93:Gr}),n(qe,[2,164]),n(qe,[2,165]),n(qe,[2,166]),{13:y,16:h,34:ie,35:ne,36:268,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(We,[2,168]),{93:[1,269]},{35:[1,270]},{35:[1,271]},{35:[1,272]},{35:$r,93:Hr,177:273},{35:[1,276]},{35:[1,278],93:[1,277]},{284:[1,279]},n(tt,[2,182],{297:[1,280],298:[1,281]}),n(tt,[2,185]),n(tt,[2,186]),n(tt,[2,187]),n(tt,[2,188]),n(tt,[2,189]),n(tt,[2,190]),{35:[1,282]},{35:[1,283]},{35:[1,284]},n(Yt,[2,456]),n(Yt,[2,457]),n(Yt,[2,458]),n(Yt,[2,459]),n(Yt,[2,460]),{284:[2,462]},n(ur,[2,191]),n(ur,[2,192]),n(ur,[2,193]),n(ur,[2,194]),n(tt,[2,195]),n(tt,[2,196]),n(tt,[2,197]),n(tt,[2,198]),n(tt,[2,199]),n(tt,[2,200]),n(e,[2,5]),n(Xr,[2,269],{92:285}),n(Kr,[2,271],{94:286}),{34:[1,288],38:[1,287]},n(Jr,[2,273]),n(a,[2,392]),n(Nt,[2,113]),n(Nt,[2,396],{217:289,332:290,26:[1,292],271:[1,293],333:[1,291]}),n(ut,[2,114]),n(ut,[2,115]),{13:y,16:h,35:[1,297],60:298,93:[1,296],195:zr,220:294,221:295,224:qr,312:g},n(a,l,{211:10,210:301}),n(o,[2,280],{6:[2,282]}),n(ke,[2,285],{109:302,139:303,140:[1,304]}),n(ke,[2,51]),{13:y,16:h,60:305,312:g},n(ke,[2,67]),n(ke,[2,314]),n(ke,[2,315]),n(ke,[2,316]),{116:[1,306]},n(Wr,[2,64]),{13:y,16:h,60:307,312:g},n(E,[2,313]),{13:y,16:h,60:308,312:g},n(It,[2,319],{145:309}),n(It,[2,318]),{13:y,16:h,34:it,35:qt,39:230,60:235,87:re,93:Xe,98:236,153:310,183:227,185:228,226:Wt,231:we,243:229,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(ot,[2,302],{127:311}),n(ot,[2,301]),n([45,132,135],[2,60]),n(ot,[2,308],{131:312}),n(ot,[2,307]),n([45,133,135],[2,59]),n(c,[2,6]),n(Or,[2,259],{65:313,77:314,78:[1,315]}),n(q,[2,258]),{13:y,16:h,35:ne,60:321,72:319,73:320,76:316,82:318,84:317,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n([6,48,68,75,78,86,88,90],[2,21]),n(te,Yr,{25:21,30:322,155:323,18:324,22:325,156:326,162:327,163:328,28:d,46:yt,48:yt,90:yt,119:yt,167:yt,168:yt,170:yt,173:yt,174:yt}),{13:y,16:h,60:329,312:g},n(E,[2,252]),n(c,[2,7]),n(q,ae,{64:211,74:212,21:330,75:Be}),n(Ve,[2,256]),{69:[1,331]},n(Ve,Ut,{63:219,67:220,24:332,68:Vt}),n(p,[2,234]),n(te,Qe,{152:203,47:333,151:334,48:[2,237]}),n(p,[2,92]),{48:[2,363],182:335,328:[1,336]},{13:y,16:h,34:wt,60:341,184:337,188:338,193:339,195:Ot,312:g},n(Zt,[2,367],{188:338,193:339,60:341,186:343,187:344,184:345,13:y,16:h,34:wt,195:Ot,312:g}),n(ft,[2,365]),n(ft,[2,366]),{13:y,16:h,34:it,35:qt,39:351,60:235,87:re,93:Xe,98:236,185:349,197:347,225:346,226:Wt,229:348,231:we,243:350,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},{13:y,16:h,34:wt,60:341,184:352,188:338,193:339,195:Ot,312:g},n(Rt,[2,137]),n(Rt,[2,138]),n(Rt,[2,139]),n(Rt,[2,140]),n(Rt,[2,141]),n(Rt,[2,142]),n(Rt,[2,143]),n(Ve,Ut,{63:219,67:220,24:353,68:Vt}),n(J,[2,246]),n(Vr,[2,248]),n(c,[2,19]),{34:[1,354]},{34:[1,355]},n([37,38,191,278],[2,144],{249:356,250:[1,357]}),{13:y,16:h,34:[1,359],60:360,232:358,312:g},{13:y,16:h,34:wt,60:341,193:361,195:Ot,312:g},n(ft,[2,418]),n(ft,[2,419]),n(or,[2,146],{253:362,254:[1,363]}),{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,219:he,255:364,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{258:[1,365]},n(He,[2,436]),n(He,[2,437]),n(He,[2,438]),n(He,[2,439]),n(He,[2,440]),n(He,[2,441]),{258:[2,443]},n([37,38,191,250,254,258,278,295,334,335,336,337,338,339],[2,151],{261:366,262:367,263:368,265:369,271:[1,370],273:[1,371],306:X,307:ee,308:ue,309:de,310:fe,311:me}),n(Gt,[2,155],{269:372,270:373,26:Er,331:Sr}),n(qe,[2,157]),n(qe,[2,158]),n(qe,[2,159]),n(We,[2,88]),n(He,[2,353],{175:376,316:[1,377]}),{38:[1,378]},n(We,[2,169]),{13:y,16:h,34:ie,35:ne,36:379,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{13:y,16:h,34:ie,35:ne,36:380,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{13:y,16:h,34:ie,35:ne,36:381,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(We,[2,173]),n(We,[2,90]),n(He,[2,357],{178:382}),{34:[1,383]},n(We,[2,175]),{13:y,16:h,34:ie,35:ne,36:384,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{46:Me,62:385},n(tt,[2,183]),{13:y,16:h,60:386,312:g},n(Zr,[2,463],{286:387,316:[1,388]}),n(He,[2,467],{289:389,316:[1,390]}),n(He,[2,469],{291:391,316:[1,392]}),{13:y,16:h,48:[1,393],60:395,87:re,97:394,98:396,99:397,100:jr,231:Lt,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},{48:[1,400],93:[1,401]},{46:[1,402]},n(Jr,[2,274]),n(Nt,[2,112]),n(Nt,[2,397]),n(Nt,[2,393]),n(Nt,[2,394]),n(Nt,[2,395]),n(ut,[2,116]),n(ut,[2,118]),n(ut,[2,119]),n(en,[2,400],{222:403}),n(ut,[2,121]),n(ut,[2,122]),{13:y,16:h,60:404,195:[1,405],312:g},{38:[1,406]},n(ke,[2,50]),n(ke,[2,286]),{119:[1,407]},n(ke,[2,66]),n(E,et,{142:198,115:408,119:dt,141:ze}),n(Wr,[2,65]),n(ke,[2,53]),{48:[1,409],119:[1,411],146:410},n(It,[2,331],{154:412,328:[1,413]}),{45:[1,414],134:415,135:tn},{45:[1,417],134:418,135:tn},n(Et,[2,261],{66:419,85:420,86:[1,421],88:[1,422]}),n(Or,[2,260]),{69:[1,423]},n(q,[2,30],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:424,13:y,16:h,35:ne,275:_e,276:ce,277:je,279:Ie,281:Re,282:Oe,284:Se,285:D,288:k,290:G,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe}),n(rn,[2,265]),n(Ar,[2,85]),n(Ar,[2,86]),n(Ar,[2,87]),{35:Qr,93:Gr},{48:[1,425]},{48:[1,426]},{20:427,45:M,46:V,61:106},{20:428,45:M,46:V,61:106},n(Pt,[2,335],{157:429}),n(Pt,[2,334]),{13:y,16:h,34:it,35:er,39:434,60:235,87:re,93:Xe,98:236,164:430,201:431,203:432,226:tr,231:we,243:433,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(J,[2,20]),n(Et,[2,22]),{13:y,16:h,34:nn,35:an,60:321,70:437,71:438,72:439,73:440,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(c,[2,16]),{48:[1,443]},{48:[2,238]},{48:[2,93]},n(te,[2,362],{48:[2,364]}),n(Zt,[2,94]),n(Dt,[2,369],{189:444}),n(te,[2,373],{194:445,196:446}),n(te,[2,100]),n(te,[2,101]),n(te,[2,102]),n(Zt,[2,95]),n(Zt,[2,96]),n(Zt,[2,368]),{13:y,16:h,34:it,35:qt,38:[1,447],39:351,60:235,87:re,93:Xe,98:236,185:349,197:448,226:Wt,229:348,231:we,243:350,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(cr,[2,404]),n(lr,[2,129]),n(lr,[2,130]),n(lr,[2,408]),n(lr,[2,409]),{227:[1,449]},n(c,[2,18]),{38:[1,450]},{38:[1,451]},n(or,[2,433]),{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:452,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{46:[1,453]},{46:[2,412]},{46:[2,413]},{13:y,16:h,34:it,39:455,60:235,87:re,93:Xe,98:236,231:we,237:454,243:456,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(Qt,[2,435]),{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,219:he,251:457,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(Qt,[2,149]),{35:$r,93:Hr,177:458},n(Gt,[2,445]),{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,219:he,259:459,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(qe,[2,448],{264:460}),n(qe,[2,450],{266:461}),n(He,[2,446]),n(He,[2,447]),n(qe,[2,453]),{13:y,16:h,34:ie,35:ne,60:136,72:135,73:137,82:134,87:re,98:138,219:he,263:154,265:155,267:462,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(He,[2,454]),n(He,[2,455]),n(He,[2,355],{176:463}),n(He,[2,354]),n([6,13,16,26,34,35,37,38,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],[2,167]),{38:[1,464]},{278:[1,465]},{278:[1,466]},{13:y,16:h,34:ie,35:ne,36:467,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{38:[1,468]},{38:[1,469]},n(We,[2,177]),n(tt,[2,184]),{13:y,16:h,26:[1,471],34:ie,35:ne,36:472,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,287:470,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(Zr,[2,464]),{13:y,16:h,34:ie,35:ne,36:473,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(He,[2,468]),{13:y,16:h,34:ie,35:ne,36:474,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(He,[2,470]),n(ct,[2,41]),n(Xr,[2,270]),n(dr,[2,44]),n(dr,[2,45]),n(dr,[2,46]),n(dr,[2,47]),{13:y,16:h,60:235,87:re,93:Xe,98:236,99:477,119:[1,475],231:Lt,241:476,244:478,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(ct,[2,42]),n(Kr,[2,272]),n(xr,[2,275],{96:479}),{13:y,16:h,38:[2,402],60:298,195:zr,221:481,223:480,224:qr,312:g},n(ut,[2,123]),n(ut,[2,124]),n(ut,[2,117]),{13:y,16:h,60:482,312:g},n(ke,[2,52]),n([6,45,132,133,135,191],[2,68]),n(It,[2,320]),{13:y,16:h,34:[1,484],60:485,147:483,312:g},n(It,[2,70]),n(te,[2,330],{48:sn,119:sn}),{46:Me,62:486},n(ot,[2,303]),n(E,[2,310],{136:487,320:[1,488]}),{46:Me,62:489},n(ot,[2,309]),n(Et,[2,23]),n(Et,[2,262]),{87:[1,490]},{87:[1,491]},{13:y,16:h,34:on,35:ne,60:321,72:319,73:320,79:492,80:493,81:un,82:318,83:cn,84:496,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(rn,[2,266]),n(ln,[2,71]),n(ln,[2,72]),n(q,ae,{64:211,74:212,21:498,75:Be}),n(Ve,Ut,{63:219,67:220,24:499,68:Vt}),{46:[2,345],48:[2,73],89:509,90:u,119:[1,505],158:500,159:501,166:502,167:[1,503],168:[1,504],170:[1,506],173:[1,507],174:[1,508]},n(Pt,[2,343],{165:510,328:[1,511]}),n(a,l,{211:10,202:512,205:513,210:514,34:Nr}),n(fr,[2,379],{211:10,205:513,210:514,204:516,202:517,13:l,16:l,35:l,195:l,219:l,224:l,312:l,34:Nr}),n(dn,[2,377]),n(dn,[2,378]),{13:y,16:h,34:it,35:er,39:523,60:235,87:re,93:Xe,98:236,200:519,203:521,226:tr,228:518,230:520,231:we,243:522,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(a,l,{211:10,205:513,210:514,202:524,34:Nr}),n(Ve,[2,24],{274:141,280:146,283:149,60:321,72:439,73:440,71:525,13:y,16:h,34:nn,35:an,275:_e,276:ce,277:je,279:Ie,281:Re,282:Oe,284:Se,285:D,288:k,290:G,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe}),n(Ct,[2,263]),n(Ct,[2,25]),n(Ct,[2,26]),{13:y,16:h,34:ie,35:ne,36:526,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(Ct,[2,29]),n(Ve,Ut,{63:219,67:220,24:527,68:Vt}),n([48,119,227,328],[2,97],{190:528,191:[1,529]}),n(Dt,[2,99]),{13:y,16:h,34:it,35:qt,39:351,60:235,87:re,93:Xe,98:236,185:349,197:530,226:Wt,229:348,231:we,243:350,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(fn,[2,125]),n(cr,[2,405]),n(fn,[2,126]),n(oe,[2,14]),n(oe,[2,15]),n(or,[2,145]),{13:y,16:h,34:it,39:532,60:235,87:re,93:Xe,98:236,231:we,233:531,243:533,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},{235:[1,534]},{235:[2,420]},{235:[2,421]},n(Qt,[2,147]),n(Qt,[2,150]),n(Gt,[2,152]),n(Gt,[2,153],{270:373,269:535,26:Er,331:Sr}),n(Gt,[2,154],{270:373,269:536,26:Er,331:Sr}),n(qe,[2,156]),{13:y,16:h,34:ie,35:ne,36:537,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(We,[2,170]),{13:y,16:h,34:ie,35:ne,36:538,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{13:y,16:h,34:ie,35:ne,36:539,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{38:[1,540],278:[1,541]},n(We,[2,174]),n(We,[2,176]),{38:[1,542]},{38:[2,465]},{38:[2,466]},{38:[1,543]},{38:[2,471],191:[1,546],292:544,293:545},{13:y,16:h,34:[1,548],60:549,238:547,312:g},{13:y,16:h,34:wt,60:341,193:550,195:Ot,312:g},n(ft,[2,428]),n(ft,[2,429]),{35:[1,553],48:[1,551],101:552},{38:[1,554]},{38:[2,403],330:[1,555]},n(ke,[2,63]),{46:[1,556]},{46:[2,321]},{46:[2,322]},n(ke,[2,57]),{13:y,16:h,60:557,312:g},n(E,[2,311]),n(ke,[2,58]),n(Et,[2,36],{88:[1,558]}),n(Et,[2,37],{86:[1,559]}),n(Or,[2,31],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:496,80:560,13:y,16:h,34:on,35:ne,81:un,83:cn,275:_e,276:ce,277:je,279:Ie,281:Re,282:Oe,284:Se,285:D,288:k,290:G,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe}),n($t,[2,267]),{35:ne,82:561},{35:ne,82:562},n($t,[2,34]),n($t,[2,35]),{31:563,48:[2,229],89:564,90:u},{32:565,48:[2,231],89:566,90:u},n(Pt,[2,336]),n(pn,[2,337],{160:567,328:[1,568]}),{46:Me,62:569},{46:Me,62:570},{46:Me,62:571},{13:y,16:h,34:[1,573],60:574,169:572,312:g},n(hn,[2,349],{171:575,321:[1,576]}),{13:y,16:h,35:ne,60:321,72:319,73:320,82:318,84:577,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{35:[1,578]},n(bt,[2,84]),n(Pt,[2,75]),n(te,[2,342],{46:_t,48:_t,90:_t,119:_t,167:_t,168:_t,170:_t,173:_t,174:_t}),n(fr,[2,105]),n(te,[2,383],{206:579}),n(te,[2,381]),n(te,[2,382]),n(fr,[2,106]),n(fr,[2,380]),{13:y,16:h,34:it,35:er,38:[1,580],39:523,60:235,87:re,93:Xe,98:236,200:581,203:521,226:tr,230:520,231:we,243:522,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(cr,[2,406]),n(pr,[2,131]),n(pr,[2,132]),n(pr,[2,410]),n(pr,[2,411]),{227:[1,582]},n(Ct,[2,264]),{37:[1,584],38:[1,583]},n(c,[2,17]),n(Dt,[2,370]),n(Dt,[2,371],{193:339,60:341,192:585,188:586,13:y,16:h,34:wt,195:Ot,312:g}),n(Dt,[2,103],{278:[1,587]}),{13:y,16:h,34:wt,60:341,193:588,195:Ot,312:g},n(ft,[2,414]),n(ft,[2,415]),n(mn,[2,134]),n(qe,[2,449]),n(qe,[2,451]),{38:[1,589],278:[1,590]},{38:[1,591]},{278:[1,592]},n(We,[2,91]),n(He,[2,358]),n(We,[2,178]),n(We,[2,179]),{38:[1,593]},{38:[2,472]},{294:[1,594]},{46:[1,595]},{46:[2,422]},{46:[2,423]},{13:y,16:h,60:235,87:re,93:Xe,98:236,99:597,231:Lt,242:596,244:598,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(ct,[2,43]),n(xr,[2,276]),{13:y,16:h,60:395,87:re,97:600,98:396,99:397,100:jr,102:599,231:Lt,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(ut,[2,120]),n(en,[2,401]),n(te,Qe,{152:203,148:601,151:602,48:[2,323]}),n(ot,[2,61]),{87:[1,603]},{87:[1,604]},n($t,[2,268]),n($t,[2,32]),n($t,[2,33]),{48:[2,11]},{48:[2,230]},{48:[2,12]},{48:[2,232]},n(te,Yr,{163:328,161:605,162:606,46:vt,48:vt,90:vt,119:vt,167:vt,168:vt,170:vt,173:vt,174:vt}),n(pn,[2,338]),n(bt,[2,76],{329:[1,607]}),n(bt,[2,77]),n(bt,[2,78]),{46:Me,62:608},{46:[2,347]},{46:[2,348]},{13:y,16:h,34:[1,610],60:611,172:609,312:g},n(hn,[2,350]),n(bt,[2,81]),{13:y,16:h,34:ie,35:ne,36:612,39:613,60:136,72:135,73:137,82:134,87:re,98:138,219:he,231:we,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},{13:y,16:h,34:it,35:er,39:523,60:235,87:re,93:Xe,98:236,200:614,203:521,226:tr,230:520,231:we,243:522,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(yn,[2,127]),n(cr,[2,407]),n(yn,[2,128]),n(Ct,[2,27]),{34:[1,615]},n(Dt,[2,98]),n(Dt,[2,372]),n(te,[2,374]),{13:y,16:h,34:it,39:617,60:235,87:re,93:Xe,98:236,231:we,234:616,243:618,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(We,[2,89]),n(He,[2,356]),n(We,[2,171]),{13:y,16:h,34:ie,35:ne,36:619,60:136,72:135,73:137,82:134,87:re,98:138,219:he,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Te,272:133,273:Ee,274:141,275:_e,276:ce,277:je,279:Ie,280:146,281:Re,282:Oe,283:149,284:Se,285:D,288:k,290:G,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g,339:ve,340:be,341:ge,342:Ae,343:Ce,344:Fe},n(We,[2,180]),{295:[1,620]},{13:y,16:h,60:235,87:re,93:Xe,98:236,99:622,231:Lt,239:621,244:623,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},{235:[1,624]},{235:[2,430]},{235:[2,431]},{13:y,16:h,38:[1,625],60:395,87:re,97:626,98:396,99:397,100:jr,231:Lt,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(bn,[2,277]),{48:[1,627]},{48:[2,324]},n(Et,[2,38]),n(Et,[2,39]),n(Pt,[2,74]),n(Pt,[2,340]),{46:[2,346]},n(bt,[2,79]),{46:Me,62:628},{46:[2,351]},{46:[2,352]},{37:[1,629]},{37:[1,630]},n(rr,[2,385],{207:631,278:[1,632]}),{38:[1,633]},{48:[1,634]},{48:[2,416]},{48:[2,417]},{38:[1,635]},{296:636,302:N,303:L,304:F,305:U},{13:y,16:h,34:wt,60:341,193:637,195:Ot,312:g},n(ft,[2,424]),n(ft,[2,425]),n(gn,[2,136]),n(xr,[2,48]),n(bn,[2,278]),n(_n,[2,325],{149:638,328:[1,639]}),n(bt,[2,80]),{34:[1,640]},{34:[1,641]},n([46,48,90,119,167,168,170,173,174,227,328],[2,107],{208:642,191:[1,643]}),n(te,[2,384]),n(Ct,[2,28]),{235:[1,644]},n(We,[2,172]),{38:[2,181]},{13:y,16:h,60:235,87:re,93:Xe,98:236,99:646,231:Lt,240:645,244:647,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(te,Qe,{152:203,150:648,151:649,48:vn,119:vn}),n(_n,[2,326]),{38:[1,650]},{38:[1,651]},n(rr,[2,386]),n(rr,[2,108],{211:10,209:652,210:653,13:l,16:l,35:l,195:l,219:l,224:l,312:l,34:[1,654]}),n(mn,[2,133]),{48:[1,655]},{48:[2,426]},{48:[2,427]},n(It,[2,69]),n(It,[2,328]),n(bt,[2,82]),n(bt,[2,83]),n(te,[2,375],{198:656,199:657}),n(te,[2,387]),n(te,[2,388]),{235:[1,658]},n(rr,[2,109]),{13:y,16:h,34:it,35:er,39:523,60:235,87:re,93:Xe,98:236,200:659,203:521,226:tr,230:520,231:we,243:522,244:234,245:Ke,246:Je,263:154,265:155,296:150,299:j,300:b,301:_,302:N,303:L,304:F,305:U,306:X,307:ee,308:ue,309:de,310:fe,311:me,312:g},n(gn,[2,135]),n(rr,[2,104],{278:[1,660]}),n(te,[2,376])],defaultActions:{5:[2,206],6:[2,207],7:[2,208],9:[2,205],28:[2,1],29:[2,3],30:[2,218],85:[2,49],94:[2,297],108:[2,254],115:[2,360],165:[2,462],260:[2,443],334:[2,238],335:[2,93],359:[2,412],360:[2,413],455:[2,420],456:[2,421],471:[2,465],472:[2,466],484:[2,321],485:[2,322],545:[2,472],548:[2,422],549:[2,423],563:[2,11],564:[2,230],565:[2,12],566:[2,232],573:[2,347],574:[2,348],597:[2,430],598:[2,431],602:[2,324],607:[2,346],610:[2,351],611:[2,352],617:[2,416],618:[2,417],636:[2,181],646:[2,426],647:[2,427]},parseError:function(se,pe){if(pe.recoverable)this.trace(se);else{var ye=new Error(se);throw ye.hash=pe,ye}},parse:function(se){var pe=this,ye=[0],xe=[null],Ne=[],P=this.table,st="",C=0,xt=0,br=2,gr=1,_r=Ne.slice.call(arguments,1),$e=Object.create(this.lexer),mt={yy:{}};for(var kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,kt)&&(mt.yy[kt]=this.yy[kt]);$e.setInput(se,mt.yy),mt.yy.lexer=$e,mt.yy.parser=this,typeof $e.yylloc>"u"&&($e.yylloc={});var Jt=$e.yylloc;Ne.push(Jt);var kr=$e.options&&$e.options.ranges;typeof mt.yy.parseError=="function"?this.parseError=mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var vr=function(){var zt;return zt=$e.lex()||gr,typeof zt!="number"&&(zt=pe.symbols_[zt]||zt),zt},De,Ue,Le,Ye,Ze={},Tr,Tt,Ln,wr;;){if(Ue=ye[ye.length-1],this.defaultActions[Ue]?Le=this.defaultActions[Ue]:((De===null||typeof De>"u")&&(De=vr()),Le=P[Ue]&&P[Ue][De]),typeof Le>"u"||!Le.length||!Le[0]){var Ur="";wr=[];for(Tr in P[Ue])this.terminals_[Tr]&&Tr>br&&wr.push("'"+this.terminals_[Tr]+"'");$e.showPosition?Ur="Parse error on line "+(C+1)+`:
`+$e.showPosition()+`
Expecting `+wr.join(", ")+", got '"+(this.terminals_[De]||De)+"'":Ur="Parse error on line "+(C+1)+": Unexpected "+(De==gr?"end of input":"'"+(this.terminals_[De]||De)+"'"),this.parseError(Ur,{text:$e.match,token:this.terminals_[De]||De,line:$e.yylineno,loc:Jt,expected:wr})}if(Le[0]instanceof Array&&Le.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ue+", token: "+De);switch(Le[0]){case 1:ye.push(De),xe.push($e.yytext),Ne.push($e.yylloc),ye.push(Le[1]),De=null,xt=$e.yyleng,st=$e.yytext,C=$e.yylineno,Jt=$e.yylloc;break;case 2:if(Tt=this.productions_[Le[1]][1],Ze.$=xe[xe.length-Tt],Ze._$={first_line:Ne[Ne.length-(Tt||1)].first_line,last_line:Ne[Ne.length-1].last_line,first_column:Ne[Ne.length-(Tt||1)].first_column,last_column:Ne[Ne.length-1].last_column},kr&&(Ze._$.range=[Ne[Ne.length-(Tt||1)].range[0],Ne[Ne.length-1].range[1]]),Ye=this.performAction.apply(Ze,[st,xt,C,mt.yy,Le[1],xe,Ne].concat(_r)),typeof Ye<"u")return Ye;Tt&&(ye=ye.slice(0,-1*Tt*2),xe=xe.slice(0,-1*Tt),Ne=Ne.slice(0,-1*Tt)),ye.push(this.productions_[Le[1]][0]),xe.push(Ze.$),Ne.push(Ze._$),Ln=P[ye[ye.length-2]][ye[ye.length-1]],ye.push(Ln);break;case 3:return!0}}return!0}},hr=Wildcard$2.Wildcard,mr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Tn=mr+"type",Pn=mr+"first",Dn=mr+"rest",wn=mr+"nil",yr="http://www.w3.org/2001/XMLSchema#",On=yr+"integer",En=yr+"decimal",Sn=yr+"double",Cn=yr+"boolean",Bt="",jn="",An="";function at(le){return le.toLowerCase()}function St(le,se){return le.push(se),le}function Ht(le,se){return le.push.apply(le,se),le}function Ge(le){le||(le={});for(var se=1,pe=arguments.length,ye;se<pe&&(ye=arguments[se]||{});se++)for(var xe in ye)le[xe]=ye[xe];return le}function pt(){for(var le=[],se=0,pe=arguments.length;se<pe;se++)le=le.concat.apply(le,arguments[se]);return le}function nr(le){if(le[0]==="<"&&(le=le.substring(1,le.length-1)),/^[a-z]+:/i.test(le))return le;if(!Pe.base)throw new Error("Cannot resolve relative IRI "+le+" because no base IRI was set.");switch(Bt!==Pe.base&&(Bt=Pe.base,jn=Bt.replace(/[^\/:]*$/,""),An=Bt.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),le[0]){case void 0:return Bt;case"#":return Bt+le;case"?":return Bt.replace(/(?:\?.*)?$/,le);case"/":return An+le;default:return jn+le}}function rt(le){if(le){var se=le[0];if(se==="?"||se==="$")return Pe.factory.variable(le.substr(1))}return le}function nt(le,se){return{type:"operation",operator:le,args:se||[]}}function jt(le,se){var pe={expression:le==="*"?new hr:le};if(se)for(var ye in se)pe[ye]=se[ye];return pe}function Mt(le,se){return{type:"path",pathType:le,items:se}}function Rr(le,se){for(var pe=0,ye=se.length,xe;pe<ye&&(xe=se[pe]);pe++)le=nt(xe[0],[le,xe[1]]);return le}function At(le,se){var pe=[],ye=[],xe=le.length,Ne,P={};if(!xe)return null;for(var st=0;st<xe&&(Ne=le[st]);st++)(Ne.named?ye:pe).push(Ne.iri);return P[se||"from"]={default:pe,named:ye},P}function Xt(le){return parseInt(le,10)}function Lr(le){return le.type==="group"&&le.patterns.length===1?le.patterns[0]:le}function ht(le,se){return se&&se.termType!=="NamedNode"&&(se=Pe.factory.namedNode(se)),Pe.factory.literal(le,se)}function Bn(le,se){return Pe.factory.literal(le,se)}function Ft(le,se,pe){var ye={};return le!=null&&(ye.subject=le),se!=null&&(ye.predicate=se),pe!=null&&(ye.object=pe),ye}function ir(le){return typeof le=="string"?le.startsWith("e_")?Pe.factory.blankNode(le):Pe.factory.blankNode("e_"+le):Pe.factory.blankNode("g_"+xn++)}var xn=0;Pe._resetBlanks=function(){xn=0};var Mn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Fn={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},kn=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,Pr=String.fromCharCode;function Nn(le,se){le=le.substring(se,le.length-se);try{le=le.replace(Mn,function(pe,ye,xe,Ne){var P;if(ye){if(P=parseInt(ye,16),isNaN(P))throw new Error;return Pr(P)}else if(xe){if(P=parseInt(xe,16),isNaN(P))throw new Error;return P<65535?Pr(P):Pr(55296+((P-=65536)>>10),56320+(P&1023))}else{var st=Fn[Ne];if(!st)throw new Error;return st}})}catch{return""}if(kn.exec(le))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+le);return le}function Un(le){var se=ir(),pe=se,ye=[],xe,Ne=[];le.forEach(function(xt){ye.push(xt.entity),Ht(Ne,xt.triples)});for(var P=0,st=0,C=ye.length,xe=Array(C*2);P<C;)xe[st++]=Ft(pe,Pe.factory.namedNode(Pn),ye[P]),xe[st++]=Ft(pe,Pe.factory.namedNode(Dn),pe=++P<C?ir():Pe.factory.namedNode(wn));return{entity:se,triples:Ht(xe,Ne)}}function Vn(le){var se=ir();return{entity:se,triples:le.map(function(pe){return Ge(Ft(se),pe)})}}function Dr(le,se,pe){var ye=[],xe=[];return se.forEach(function(Ne){ye.push(Ft(null,le,Ne.entity)),Ht(xe,Ne.triples)}),pt(ye,pe||[],xe)}function Kt(le){return le.variable?le.variable.value:le.value||le.expression.value}function Cr(le){if(!le)return[];if(le.type==="aggregate")return[le];if(le.type==="operation"){const se=[];for(const pe of le.args)se.push(...Cr(pe));return se}return[]}function Qn(le){const se=new Set,pe=function(ye){ye&&(ye.termType==="Variable"?se.add(ye):ye.type==="operation"&&ye.args.forEach(pe))};return pe(le),se}function Br(le,se=1,pe=[]){for(const ye of le)se>0&&ye instanceof Array?Br(ye,se-1,pe):pe.push(ye);return pe}function Mr(le){return le.termType==="Variable"}function In(le){if(le.triples){const se=[];for(const pe of le.triples)Mr(pe.subject)&&se.push(pe.subject.value),Mr(pe.predicate)&&se.push(pe.predicate.value),Mr(pe.object)&&se.push(pe.object.value);return se}else if(le.patterns){const se=[];for(const pe of le.patterns)se.push(...In(pe));return se}return[]}function Gn(le){const se=le.slice().sort(),pe=[];for(let ye=0;ye<se.length-1;ye++)se[ye+1]==se[ye]&&pe.push(se[ye]);return pe}function ar(le){if(!Pe.sparqlStar)throw new Error("SPARQL* support is not enabled");return le}function Rn(le){for(const se of le){if(se.type==="graph"&&se.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(se.type==="bgp"||se.type==="graph"){for(const pe of se.triples)if(pe.subject.termType==="Variable"||pe.predicate.termType==="Variable"||pe.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return le}function Fr(le){for(const se of le)if(se.type==="bgp"){for(const pe of se.triples)if(pe.subject.termType==="BlankNode"||pe.predicate.termType==="BlankNode"||pe.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return le}var $n=function(){var le={EOF:1,parseError:function(pe,ye){if(this.yy.parser)this.yy.parser.parseError(pe,ye);else throw new Error(pe)},setInput:function(se,pe){return this.yy=pe||this.yy||{},this._input=se,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var se=this._input[0];this.yytext+=se,this.yyleng++,this.offset++,this.match+=se,this.matched+=se;var pe=se.match(/(?:\r\n?|\n).*/g);return pe?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),se},unput:function(se){var pe=se.length,ye=se.split(/(?:\r\n?|\n)/g);this._input=se+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-pe),this.offset-=pe;var xe=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ye.length-1&&(this.yylineno-=ye.length-1);var Ne=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ye?(ye.length===xe.length?this.yylloc.first_column:0)+xe[xe.length-ye.length].length-ye[0].length:this.yylloc.first_column-pe},this.options.ranges&&(this.yylloc.range=[Ne[0],Ne[0]+this.yyleng-pe]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(se){this.unput(this.match.slice(se))},pastInput:function(){var se=this.matched.substr(0,this.matched.length-this.match.length);return(se.length>20?"...":"")+se.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var se=this.match;return se.length<20&&(se+=this._input.substr(0,20-se.length)),(se.substr(0,20)+(se.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var se=this.pastInput(),pe=new Array(se.length+1).join("-");return se+this.upcomingInput()+`
`+pe+"^"},test_match:function(se,pe){var ye,xe,Ne;if(this.options.backtrack_lexer&&(Ne={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ne.yylloc.range=this.yylloc.range.slice(0))),xe=se[0].match(/(?:\r\n?|\n).*/g),xe&&(this.yylineno+=xe.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xe?xe[xe.length-1].length-xe[xe.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+se[0].length},this.yytext+=se[0],this.match+=se[0],this.matches=se,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(se[0].length),this.matched+=se[0],ye=this.performAction.call(this,this.yy,this,pe,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ye)return ye;if(this._backtrack){for(var P in Ne)this[P]=Ne[P];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var se,pe,ye,xe;this._more||(this.yytext="",this.match="");for(var Ne=this._currentRules(),P=0;P<Ne.length;P++)if(ye=this._input.match(this.rules[Ne[P]]),ye&&(!pe||ye[0].length>pe[0].length)){if(pe=ye,xe=P,this.options.backtrack_lexer){if(se=this.test_match(ye,Ne[P]),se!==!1)return se;if(this._backtrack){pe=!1;continue}else return!1}else if(!this.options.flex)break}return pe?(se=this.test_match(pe,Ne[xe]),se!==!1?se:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var pe=this.next();return pe||this.lex()},begin:function(pe){this.conditionStack.push(pe)},popState:function(){var pe=this.conditionStack.length-1;return pe>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(pe){return pe=this.conditionStack.length-1-Math.abs(pe||0),pe>=0?this.conditionStack[pe]:"INITIAL"},pushState:function(pe){this.begin(pe)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(pe,ye,xe,Ne){switch(xe){case 0:break;case 1:return 12;case 2:return 15;case 3:return 28;case 4:return 316;case 5:return 317;case 6:return 35;case 7:return 37;case 8:return 38;case 9:return 26;case 10:return 41;case 11:return 45;case 12:return 46;case 13:return 48;case 14:return 50;case 15:return 55;case 16:return 58;case 17:return 320;case 18:return 68;case 19:return 69;case 20:return 75;case 21:return 78;case 22:return 81;case 23:return 83;case 24:return 86;case 25:return 88;case 26:return 90;case 27:return 191;case 28:return 107;case 29:return 321;case 30:return 140;case 31:return 322;case 32:return 323;case 33:return 117;case 34:return 324;case 35:return 116;case 36:return 325;case 37:return 326;case 38:return 120;case 39:return 122;case 40:return 123;case 41:return 138;case 42:return 132;case 43:return 133;case 44:return 135;case 45:return 141;case 46:return 119;case 47:return 327;case 48:return 328;case 49:return 167;case 50:return 170;case 51:return 174;case 52:return 100;case 53:return 168;case 54:return 329;case 55:return 173;case 56:return 231;case 57:return 235;case 58:return 278;case 59:return 195;case 60:return 330;case 61:return 331;case 62:return 224;case 63:return 333;case 64:return 271;case 65:return 219;case 66:return 226;case 67:return 227;case 68:return 250;case 69:return 254;case 70:return 295;case 71:return 334;case 72:return 335;case 73:return 336;case 74:return 337;case 75:return 338;case 76:return 258;case 77:return 339;case 78:return 273;case 79:return 281;case 80:return 282;case 81:return 275;case 82:return 276;case 83:return 277;case 84:return 340;case 85:return 341;case 86:return 279;case 87:return 343;case 88:return 342;case 89:return 344;case 90:return 284;case 91:return 285;case 92:return 288;case 93:return 290;case 94:return 294;case 95:return 298;case 96:return 301;case 97:return 13;case 98:return 16;case 99:return 312;case 100:return 245;case 101:return 34;case 102:return 297;case 103:return 87;case 104:return 299;case 105:return 300;case 106:return 306;case 107:return 307;case 108:return 308;case 109:return 309;case 110:return 310;case 111:return 311;case 112:return"EXPONENT";case 113:return 302;case 114:return 303;case 115:return 304;case 116:return 305;case 117:return 93;case 118:return 246;case 119:return 6;case 120:return"INVALID";case 121:console.log(ye.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121],inclusive:!0}}};return le}();Ir.lexer=$n;function Pe(){this.yy={}}return Pe.prototype=Ir,Ir.Parser=Pe,new Pe}(),SparqlParser_1=SparqlParser,XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",XSD_STRING="http://www.w3.org/2001/XMLSchema#string";function Generator$1(n){this._options=n=n||{};var e=n.prefixes||{};this._prefixByIri={};var t=[];for(var o in e){var l=e[o];isString$1(l)&&(this._prefixByIri[l]=o,t.push(l))}var d=t.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+d+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=n.sparqlStar,this._indent=isString$1(n.indent)?n.indent:"  ",this._newline=isString$1(n.newline)?n.newline:`
`,this._explicitDatatype=Boolean(n.explicitDatatype)}Generator$1.prototype.toQuery=function(n){var e="";return n.queryType&&(e+=n.queryType.toUpperCase()+" "),n.reduced&&(e+="REDUCED "),n.distinct&&(e+="DISTINCT "),n.variables?e+=mapJoin(n.variables,void 0,function(t){return isTerm$1(t)?this.toEntity(t):"("+this.toExpression(t.expression)+" AS "+variableToString(t.variable)+")"},this)+" ":n.template&&(e+=this.group(n.template,!0)+this._newline),n.from&&(e+=this.graphs("FROM ",n.from.default)+this.graphs("FROM NAMED ",n.from.named)),n.where&&(e+="WHERE "+this.group(n.where,!0)+this._newline),n.updates&&(e+=mapJoin(n.updates,";"+this._newline,this.toUpdate,this)),n.group&&(e+="GROUP BY "+mapJoin(n.group,void 0,function(t){var o=isTerm$1(t.expression)?this.toEntity(t.expression):"("+this.toExpression(t.expression)+")";return t.variable?"("+o+" AS "+variableToString(t.variable)+")":o},this)+this._newline),n.having&&(e+="HAVING ("+mapJoin(n.having,void 0,this.toExpression,this)+")"+this._newline),n.order&&(e+="ORDER BY "+mapJoin(n.order,void 0,function(t){var o="("+this.toExpression(t.expression)+")";return t.descending?"DESC "+o:o},this)+this._newline),n.offset&&(e+="OFFSET "+n.offset+this._newline),n.limit&&(e+="LIMIT "+n.limit+this._newline),n.values&&(e+=this.values(n)),e=this.baseAndPrefixes(n)+e,e.trim()};Generator$1.prototype.baseAndPrefixes=function(n){var e=n.base?"BASE <"+n.base+">"+this._newline:"",t="";for(var o in n.prefixes)(this._options.allPrefixes||this._usedPrefixes[o])&&(t+="PREFIX "+o+": <"+n.prefixes[o]+">"+this._newline);return e+t};Generator$1.prototype.toPattern=function(n){var e=n.type||n instanceof Array&&"array"||(n.subject&&n.predicate&&n.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](n)};Generator$1.prototype.triple=function(n){return this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+"."};Generator$1.prototype.array=function(n){return mapJoin(n,this._newline,this.toPattern,this)};Generator$1.prototype.bgp=function(n){return this.encodeTriples(n.triples)};Generator$1.prototype.encodeTriples=function(n){if(!n.length)return"";for(var e=[],t=void 0,o=void 0,l=0;l<n.length;l++){var d=n[l];equalTerms(d.subject,t)?equalTerms(d.predicate,o)?e.push(","):(o=d.predicate,e.push(";"+this._newline,this._indent,this.toEntity(o))):(t&&e.push("."+this._newline),t=d.subject,o=d.predicate,e.push(this.toEntity(t)," ",this.toEntity(o))),e.push(" ",this.toEntity(d.object))}return e.push("."),e.join("")};Generator$1.prototype.graph=function(n){return"GRAPH "+this.toEntity(n.name)+" "+this.group(n)};Generator$1.prototype.graphs=function(n,e){return!e||e.length===0?"":mapJoin(e,"",function(t){return n+this.toEntity(t)+this._newline},this)};Generator$1.prototype.group=function(n,e){return n=e!==!0?this.array(n.patterns||n.triples):this.toPattern(n.type!=="group"?n:n.patterns),n.indexOf(this._newline)===-1?"{ "+n+" }":"{"+this._newline+this.indent(n)+this._newline+"}"};Generator$1.prototype.query=function(n){return this.toQuery(n)};Generator$1.prototype.filter=function(n){return"FILTER("+this.toExpression(n.expression)+")"};Generator$1.prototype.bind=function(n){return"BIND("+this.toExpression(n.expression)+" AS "+variableToString(n.variable)+")"};Generator$1.prototype.optional=function(n){return"OPTIONAL "+this.group(n)};Generator$1.prototype.union=function(n){return mapJoin(n.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Generator$1.prototype.minus=function(n){return"MINUS "+this.group(n)};Generator$1.prototype.values=function(n){var e=Object.keys(n.values.reduce(function(l,d){for(var u in d)l[u]=!0;return l},{})),t,o;return e.length===1?t=o="":(t="(",o=")"),"VALUES "+t+e.join(" ")+o+" {"+this._newline+mapJoin(n.values,this._newline,function(l){return"  "+t+mapJoin(e,void 0,function(d){return l[d]?this.toEntity(l[d]):"UNDEF"},this)+o},this)+this._newline+"}"};Generator$1.prototype.service=function(n){return"SERVICE "+(n.silent?"SILENT ":"")+this.toEntity(n.name)+" "+this.group(n)};Generator$1.prototype.toExpression=function(n){if(isTerm$1(n))return this.toEntity(n);switch(n.type.toLowerCase()){case"aggregate":return n.aggregation.toUpperCase()+"("+(n.distinct?"DISTINCT ":"")+this.toExpression(n.expression)+(typeof n.separator=="string"?'; SEPARATOR = "'+n.separator.replace(escape,escapeReplacer)+'"':"")+")";case"functioncall":return this.toEntity(n.function)+"("+mapJoin(n.args,", ",this.toExpression,this)+")";case"operation":var e=n.operator.toUpperCase(),t=n.args||[];switch(n.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(isTerm$1(t[0])?this.toEntity(t[0]):"("+this.toExpression(t[0])+")")+" "+e+" "+(isTerm$1(t[1])?this.toEntity(t[1]):"("+this.toExpression(t[1])+")");case"!":return"!("+this.toExpression(t[0])+")";case"uplus":return"+("+this.toExpression(t[0])+")";case"uminus":return"-("+this.toExpression(t[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(t[0])+" "+e+"("+(isString$1(t[1])?t[1]:mapJoin(t[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(t[0],!0);default:return e+"("+mapJoin(t,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+n.type)}};Generator$1.prototype.toEntity=function(n){if(isTerm$1(n))switch(n.termType){case"Wildcard":return"*";case"Variable":return variableToString(n);case"BlankNode":return"_:"+n.value;case"Literal":var e=n.value||"",t=n.language||"",o=n.datatype;if(n='"'+e.replace(escape,escapeReplacer)+'"',t)n+="@"+t;else if(o){if(!this._explicitDatatype)switch(o.value){case XSD_STRING:return n;case XSD_INTEGER:if(/^\d+$/.test(e))return e+" "}n+="^^"+this.encodeIRI(o.value)}return n;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return n.graph&&n.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(n.graph)+" { "+this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+" }  >>":"<< "+this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+" >>";default:return this.encodeIRI(n.value)}else{var l=n.items.map(this.toEntity,this),d=n.pathType;switch(d){case"^":case"!":return d+l[0];case"*":case"+":case"?":return"("+l[0]+d+")";default:return"("+l.join(d)+")"}}};var escape=/["\\\t\n\r\b\f]/g,escapeReplacer=function(n){return escapeReplacements[n]},escapeReplacements={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Generator$1.prototype.encodeIRI=function(n){var e=this._prefixRegex.exec(n);if(e){var t=this._prefixByIri[e[1]];return this._usedPrefixes[t]=!0,t+":"+e[2]}return"<"+n+">"};Generator$1.prototype.toUpdate=function(n){switch(n.type||n.updateType){case"load":return"LOAD"+(n.source?" "+this.toEntity(n.source):"")+(n.destination?" INTO GRAPH "+this.toEntity(n.destination):"");case"insert":return"INSERT DATA "+this.group(n.insert,!0);case"delete":return"DELETE DATA "+this.group(n.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(n.delete,!0);case"insertdelete":return(n.graph?"WITH "+this.toEntity(n.graph)+this._newline:"")+(n.delete.length?"DELETE "+this.group(n.delete,!0)+this._newline:"")+(n.insert.length?"INSERT "+this.group(n.insert,!0)+this._newline:"")+(n.using?this.graphs("USING ",n.using.default):"")+(n.using?this.graphs("USING NAMED ",n.using.named):"")+"WHERE "+this.group(n.where,!0);case"add":case"copy":case"move":return n.type.toUpperCase()+" "+(n.silent?"SILENT ":"")+(n.source.default?"DEFAULT":this.toEntity(n.source.name))+" TO "+this.toEntity(n.destination.name);case"create":case"clear":case"drop":return n.type.toUpperCase()+(n.silent?" SILENT ":" ")+(n.graph.default?"DEFAULT":n.graph.named?"NAMED":n.graph.all?"ALL":"GRAPH "+this.toEntity(n.graph.name));default:throw new Error("Unknown update query type: "+n.type)}};Generator$1.prototype.indent=function(n){return n.replace(/^/gm,this._indent)};function variableToString(n){return"?"+n.value}function isString$1(n){return typeof n=="string"}function isTerm$1(n){return typeof n.termType=="string"}function equalTerms(n,e){if(!n||!isTerm$1(n)||!e||!isTerm$1(e)||n.termType!==e.termType)return!1;switch(n.termType){case"Literal":return n.value===e.value&&n.language===e.language&&equalTerms(n.datatype,e.datatype);case"Quad":return equalTerms(n.subject,e.subject)&&equalTerms(n.predicate,e.predicate)&&equalTerms(n.object,e.object)&&equalTerms(n.graph,e.graph);default:return n.value===e.value}}function mapJoin(n,e,t,o){return n.map(t,o).join(isString$1(e)?e:" ")}var SparqlGenerator=function(e={}){return{stringify:function(t){var o=Object.create(e);return o.prefixes=t.prefixes,new Generator$1(o).toQuery(t)},createGenerator:function(){return new Generator$1(e)}}},Parser$1=SparqlParser_1.Parser,Generator=SparqlGenerator,Wildcard=Wildcard$2.Wildcard,{DataFactory}=rdfDataFactory,sparql$1={Parser:function({prefixes:n,baseIRI:e,factory:t,sparqlStar:o,skipValidation:l,skipUngroupedVariableCheck:d,pathOnly:u}={}){var a={};for(var c in n||{})a[c]=n[c];var p=new Parser$1;return p.parse=function(){return Parser$1.base=e||"",Parser$1.prefixes=Object.create(a),Parser$1.factory=t||new DataFactory,Parser$1.sparqlStar=Boolean(o),Parser$1.pathOnly=Boolean(u),Parser$1.skipValidation=Boolean(l)||Boolean(d),Parser$1.prototype.parse.apply(p,arguments)},p._resetBlanks=Parser$1._resetBlanks,p},Generator,Wildcard},__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__=_mergeNamespaces({__proto__:null,default:sparql$1},[sparql$1]),__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,o){o===void 0&&(o=t);var l=Object.getOwnPropertyDescriptor(e,t);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,o,l)}:function(n,e,t,o){o===void 0&&(o=t),n[o]=e[t]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding$2(e,n,t);return __setModuleDefault$2(e,n),e};Object.defineProperty(factory$2,"__esModule",{value:!0});const A=__importStar$2(algebra),rdf_data_factory_1$1=rdfDataFactory,rdf_string_1$4=rdfString,sparqljs_1$1=sparql$1;class Factory{constructor(e){this.dataFactory=e||new rdf_data_factory_1$1.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(e,t=!0){return this.flattenMulti({type:A.types.ALT,input:e},t)}createAsk(e){return{type:A.types.ASK,input:e}}createBoundAggregate(e,t,o,l,d){const u=this.createAggregateExpression(t,o,l,d);return u.variable=e,u}createBgp(e){return{type:A.types.BGP,patterns:e}}createConstruct(e,t){return{type:A.types.CONSTRUCT,input:e,template:t}}createDescribe(e,t){return{type:A.types.DESCRIBE,input:e,terms:t}}createDistinct(e){return{type:A.types.DISTINCT,input:e}}createExtend(e,t,o){return{type:A.types.EXTEND,input:e,variable:t,expression:o}}createFrom(e,t,o){return{type:A.types.FROM,input:e,default:t,named:o}}createFilter(e,t){return{type:A.types.FILTER,input:e,expression:t}}createGraph(e,t){return{type:A.types.GRAPH,input:e,name:t}}createGroup(e,t,o){return{type:A.types.GROUP,input:e,variables:t,aggregates:o}}createInv(e){return{type:A.types.INV,path:e}}createJoin(e,t=!0){return this.flattenMulti({type:A.types.JOIN,input:e},t)}createLeftJoin(e,t,o){return o?{type:A.types.LEFT_JOIN,input:[e,t],expression:o}:{type:A.types.LEFT_JOIN,input:[e,t]}}createLink(e){return{type:A.types.LINK,iri:e}}createMinus(e,t){return{type:A.types.MINUS,input:[e,t]}}createNop(){return{type:A.types.NOP}}createNps(e){return{type:A.types.NPS,iris:e}}createOneOrMorePath(e){return{type:A.types.ONE_OR_MORE_PATH,path:e}}createOrderBy(e,t){return{type:A.types.ORDER_BY,input:e,expressions:t}}createPath(e,t,o,l){return l?{type:A.types.PATH,subject:e,predicate:t,object:o,graph:l}:{type:A.types.PATH,subject:e,predicate:t,object:o,graph:this.dataFactory.defaultGraph()}}createPattern(e,t,o,l){const d=this.dataFactory.quad(e,t,o,l);return d.type=A.types.PATTERN,d}createProject(e,t){return{type:A.types.PROJECT,input:e,variables:t}}createReduced(e){return{type:A.types.REDUCED,input:e}}createSeq(e,t=!0){return this.flattenMulti({type:A.types.SEQ,input:e},t)}createService(e,t,o){return{type:A.types.SERVICE,input:e,name:t,silent:Boolean(o)}}createSlice(e,t,o){return t=t||0,o!==void 0?{type:A.types.SLICE,input:e,start:t,length:o}:{type:A.types.SLICE,input:e,start:t}}createUnion(e,t=!0){return this.flattenMulti({type:A.types.UNION,input:e},t)}createValues(e,t){return{type:A.types.VALUES,variables:e,bindings:t}}createZeroOrMorePath(e){return{type:A.types.ZERO_OR_MORE_PATH,path:e}}createZeroOrOnePath(e){return{type:A.types.ZERO_OR_ONE_PATH,path:e}}createAggregateExpression(e,t,o,l){return l?{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:t,separator:l,distinct:o}:{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:t,distinct:o}}createExistenceExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.EXISTENCE,not:e,input:t}}createNamedExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.NAMED,name:e,args:t}}createOperatorExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.OPERATOR,operator:e,args:t}}createTermExpression(e){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.TERM,term:e}}createWildcardExpression(){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.WILDCARD,wildcard:new sparqljs_1$1.Wildcard}}createTerm(e){return(0,rdf_string_1$4.stringToTerm)(e,this.dataFactory)}createCompositeUpdate(e){return{type:A.types.COMPOSITE_UPDATE,updates:e}}createDeleteInsert(e,t,o){const l={type:A.types.DELETE_INSERT};return e&&(l.delete=e),t&&(l.insert=t),o&&(l.where=o),l}createLoad(e,t,o){const l={type:A.types.LOAD,source:e};return t&&(l.destination=t),this.addSilent(l,Boolean(o))}createClear(e,t){return this.addSilent({type:A.types.CLEAR,source:e},Boolean(t))}createCreate(e,t){return this.addSilent({type:A.types.CREATE,source:e},Boolean(t))}createDrop(e,t){return this.addSilent({type:A.types.DROP,source:e},Boolean(t))}createAdd(e,t,o){return this.addSilent({type:A.types.ADD,source:e,destination:t},Boolean(o))}createMove(e,t,o){return this.addSilent({type:A.types.MOVE,source:e,destination:t},Boolean(o))}createCopy(e,t,o){return this.addSilent({type:A.types.COPY,source:e,destination:t},Boolean(o))}addSilent(e,t){return t&&(e.silent=t),e}flattenMulti(e,t){if(!t)return e;const o=e.type,l=e.input;let d=[];for(const u of l)u.type===o?d.push(...u.input):d.push(u);return e.input=d,e}}factory$2.default=Factory;var util={},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(util,"__esModule",{value:!0});const algebra_1=algebra,factory_1$2=__importDefault$2(factory$2);class Util{static flatten(e){return Array.prototype.concat(...e).filter(t=>t)}static objectify(e){if(e.termType){if(e.termType==="Quad")return{type:"pattern",termType:"Quad",subject:Util.objectify(e.subject),predicate:Util.objectify(e.predicate),object:Util.objectify(e.object),graph:Util.objectify(e.graph)};{let t={termType:e.termType,value:e.value};return e.language&&(t.language=e.language),e.datatype&&(t.datatype=Util.objectify(e.datatype)),t}}if(Array.isArray(e))return e.map(t=>Util.objectify(t));if(e===Object(e)){let t={};for(let o of Object.keys(e))t[o]=Util.objectify(e[o]);return t}return e}static inScopeVariables(e){const t=[];function o(d){t.find(u=>d.value===u.value)||t.push(d)}function l(d){d.subject.termType==="Variable"&&o(d.subject),d.predicate.termType==="Variable"&&o(d.predicate),d.object.termType==="Variable"&&o(d.object),d.graph.termType==="Variable"&&o(d.graph),d.subject.termType==="Quad"&&l(d.subject),d.predicate.termType==="Quad"&&l(d.predicate),d.object.termType==="Quad"&&l(d.object),d.graph.termType==="Quad"&&l(d.graph)}return Util.recurseOperation(e,{[algebra_1.types.EXPRESSION]:d=>(d.expressionType===algebra_1.expressionTypes.AGGREGATE&&d.variable&&o(d.variable),!0),[algebra_1.types.EXTEND]:d=>(o(d.variable),!0),[algebra_1.types.GRAPH]:d=>(d.name.termType==="Variable"&&o(d.name),!0),[algebra_1.types.GROUP]:d=>(d.variables.forEach(o),!0),[algebra_1.types.PATH]:d=>(d.subject.termType==="Variable"&&o(d.subject),d.object.termType==="Variable"&&o(d.object),d.graph.termType==="Variable"&&o(d.graph),d.subject.termType==="Quad"&&l(d.subject),d.object.termType==="Quad"&&l(d.object),d.graph.termType==="Quad"&&l(d.graph),!0),[algebra_1.types.PATTERN]:d=>(l(d),!0),[algebra_1.types.PROJECT]:d=>(d.variables.forEach(o),!1),[algebra_1.types.SERVICE]:d=>(d.name.termType==="Variable"&&o(d.name),!0),[algebra_1.types.VALUES]:d=>(d.variables.forEach(o),!0)}),t}static recurseOperation(e,t){let o=e,l=!0;const d=t[e.type];if(d&&(l=d(e)),!l)return;let u=a=>Util.recurseOperation(a,t);switch(o.type){case algebra_1.types.ALT:o.input.map(u);break;case algebra_1.types.ASK:u(o.input);break;case algebra_1.types.BGP:o.patterns.forEach(u);break;case algebra_1.types.CONSTRUCT:u(o.input),o.template.map(u);break;case algebra_1.types.DESCRIBE:u(o.input);break;case algebra_1.types.DISTINCT:u(o.input);break;case algebra_1.types.EXPRESSION:o.expressionType===algebra_1.expressionTypes.EXISTENCE&&u(o.input);break;case algebra_1.types.EXTEND:u(o.input),u(o.expression);break;case algebra_1.types.FILTER:u(o.input),u(o.expression);break;case algebra_1.types.FROM:u(o.input);break;case algebra_1.types.GRAPH:u(o.input);break;case algebra_1.types.GROUP:u(o.input),o.aggregates.forEach(u);break;case algebra_1.types.INV:u(o.path);break;case algebra_1.types.JOIN:o.input.map(u);break;case algebra_1.types.LEFT_JOIN:o.input.map(u),o.expression&&u(o.expression);break;case algebra_1.types.LINK:break;case algebra_1.types.MINUS:o.input.map(u);break;case algebra_1.types.NOP:break;case algebra_1.types.NPS:break;case algebra_1.types.ONE_OR_MORE_PATH:u(o.path);break;case algebra_1.types.ORDER_BY:u(o.input),o.expressions.forEach(u);break;case algebra_1.types.PATH:u(o.predicate);break;case algebra_1.types.PATTERN:break;case algebra_1.types.PROJECT:u(o.input);break;case algebra_1.types.REDUCED:u(o.input);break;case algebra_1.types.SEQ:o.input.map(u);break;case algebra_1.types.SERVICE:u(o.input);break;case algebra_1.types.SLICE:u(o.input);break;case algebra_1.types.UNION:o.input.map(u);break;case algebra_1.types.VALUES:break;case algebra_1.types.ZERO_OR_MORE_PATH:u(o.path);break;case algebra_1.types.ZERO_OR_ONE_PATH:u(o.path);break;case algebra_1.types.COMPOSITE_UPDATE:o.updates.forEach(a=>u(a));break;case algebra_1.types.DELETE_INSERT:o.delete&&o.delete.forEach(a=>u(a)),o.insert&&o.insert.forEach(a=>u(a)),o.where&&u(o.where);break;case algebra_1.types.LOAD:break;case algebra_1.types.CLEAR:break;case algebra_1.types.CREATE:break;case algebra_1.types.DROP:break;case algebra_1.types.ADD:break;case algebra_1.types.MOVE:break;case algebra_1.types.COPY:break;default:throw new Error(`Unknown Operation type ${o.type}`)}}static mapOperation(e,t,o){let l=e,d=!0;o=o||new factory_1$2.default;const u=t[e.type];if(u&&({result:l,recurse:d}=u(e,o)),!d)return l;let a=c=>Util.mapOperation(c,t,o);switch(l.type){case algebra_1.types.ALT:return o.createAlt(l.input.map(a));case algebra_1.types.ASK:return o.createAsk(a(l.input));case algebra_1.types.BGP:return o.createBgp(l.patterns.map(a));case algebra_1.types.CONSTRUCT:return o.createConstruct(a(l.input),l.template.map(a));case algebra_1.types.DESCRIBE:return o.createDescribe(a(l.input),l.terms);case algebra_1.types.DISTINCT:return o.createDistinct(a(l.input));case algebra_1.types.EXPRESSION:return Util.mapExpression(l,t,o);case algebra_1.types.EXTEND:return o.createExtend(a(l.input),l.variable,a(l.expression));case algebra_1.types.FILTER:return o.createFilter(a(l.input),a(l.expression));case algebra_1.types.FROM:return o.createFrom(a(l.input),[...l.default],[...l.named]);case algebra_1.types.GRAPH:return o.createGraph(a(l.input),l.name);case algebra_1.types.GROUP:return o.createGroup(a(l.input),[].concat(l.variables),l.aggregates.map(a));case algebra_1.types.INV:return o.createInv(a(l.path));case algebra_1.types.JOIN:return o.createJoin(l.input.map(a));case algebra_1.types.LEFT_JOIN:return o.createLeftJoin(a(l.input[0]),a(l.input[1]),l.expression?a(l.expression):void 0);case algebra_1.types.LINK:return o.createLink(l.iri);case algebra_1.types.MINUS:return o.createMinus(a(l.input[0]),a(l.input[1]));case algebra_1.types.NOP:return o.createNop();case algebra_1.types.NPS:return o.createNps([].concat(l.iris));case algebra_1.types.ONE_OR_MORE_PATH:return o.createOneOrMorePath(a(l.path));case algebra_1.types.ORDER_BY:return o.createOrderBy(a(l.input),l.expressions.map(a));case algebra_1.types.PATH:return o.createPath(l.subject,a(l.predicate),l.object,l.graph);case algebra_1.types.PATTERN:return o.createPattern(l.subject,l.predicate,l.object,l.graph);case algebra_1.types.PROJECT:return o.createProject(a(l.input),[...l.variables]);case algebra_1.types.REDUCED:return o.createReduced(a(l.input));case algebra_1.types.SEQ:return o.createSeq(l.input.map(a));case algebra_1.types.SERVICE:return o.createService(a(l.input),l.name,l.silent);case algebra_1.types.SLICE:return o.createSlice(a(l.input),l.start,l.length);case algebra_1.types.UNION:return o.createUnion(l.input.map(a));case algebra_1.types.VALUES:return o.createValues([].concat(l.variables),l.bindings.map(c=>Object.assign({},c)));case algebra_1.types.ZERO_OR_MORE_PATH:return o.createZeroOrMorePath(a(l.path));case algebra_1.types.ZERO_OR_ONE_PATH:return o.createZeroOrOnePath(a(l.path));case algebra_1.types.COMPOSITE_UPDATE:return o.createCompositeUpdate(l.updates.map(a));case algebra_1.types.DELETE_INSERT:return o.createDeleteInsert(l.delete?l.delete.map(a):void 0,l.insert?l.insert.map(a):void 0,l.where?a(l.where):void 0);case algebra_1.types.LOAD:return o.createLoad(l.source,l.destination,l.silent);case algebra_1.types.CLEAR:return o.createClear(l.source,l.silent);case algebra_1.types.CREATE:return o.createCreate(l.source,l.silent);case algebra_1.types.DROP:return o.createDrop(l.source,l.silent);case algebra_1.types.ADD:return o.createAdd(l.source,l.destination);case algebra_1.types.MOVE:return o.createMove(l.source,l.destination);case algebra_1.types.COPY:return o.createCopy(l.source,l.destination);default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapExpression(e,t,o){let l=d=>Util.mapOperation(d,t,o);switch(e.expressionType){case algebra_1.expressionTypes.AGGREGATE:return e.variable?o.createBoundAggregate(e.variable,e.aggregator,l(e.expression),e.distinct,e.separator):o.createAggregateExpression(e.aggregator,l(e.expression),e.distinct,e.separator);case algebra_1.expressionTypes.EXISTENCE:return o.createExistenceExpression(e.not,l(e.input));case algebra_1.expressionTypes.NAMED:return o.createNamedExpression(e.name,e.args.map(l));case algebra_1.expressionTypes.OPERATOR:return o.createOperatorExpression(e.operator,e.args.map(l));case algebra_1.expressionTypes.TERM:return o.createTermExpression(e.term);case algebra_1.expressionTypes.WILDCARD:return o.createWildcardExpression();default:throw new Error(`Unknown Expression type ${e.expressionType}`)}}static createUniqueVariable(e,t,o){let l=0,d=e;for(;t[d];)d=`${e}${l++}`;return o.variable(d)}static isSimpleTerm(e){return e.termType!==void 0&&e.termType!=="Quad"&&e.termType!=="Wildcard"}static isQuad(e){return e.termType==="Quad"}static isWildcard(e){return e.termType==="Wildcard"}}util.default=Util;var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,o){o===void 0&&(o=t);var l=Object.getOwnPropertyDescriptor(e,t);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,o,l)}:function(n,e,t,o){o===void 0&&(o=t),n[o]=e[t]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding$1(e,n,t);return __setModuleDefault$1(e,n),e},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sparqlAlgebra,"__esModule",{value:!0});const equal=es6,rdf_string_1$3=rdfString,Algebra$1=__importStar$1(algebra),factory_1$1=__importDefault$1(factory$2),util_1$1=__importDefault$1(util),Parser=sparql$1.Parser,types$1=Algebra$1.types;let variables=new Set,varCount=0,useQuads=!1,factory$1;function translate(n,e){e=e||{},factory$1=new factory_1$1.default(e.dataFactory);let t;if(isString(n)){let o=new Parser(e);o._resetBlanks(),t=o.parse(n)}else t=n;return translateQuery(t,e.quads,e.blankToVariable)}sparqlAlgebra.default=translate;function translateQuery(n,e,t){if(variables=new Set,varCount=0,useQuads=Boolean(e),!n.type)return factory$1.createNop();if(n.type!=="query"&&n.type!=="update")throw new Error("Translate only works on complete query or update objects.");let o;if(findAllVariables(n),n.type==="query"){const l={type:"group",patterns:n.where||[]};o=translateGroupGraphPattern(l),o=translateAggregates(n,o)}else n.type==="update"&&(o=translateUpdate(n));return t&&(o=translateBlankNodesToVariables(o)),o}function isString(n){return typeof n=="string"}function isTerm(n){return Boolean(n?.termType)}function isTriple(n){return n.subject&&n.predicate&&n.object}function isVariable(n){return n?.termType==="Variable"}function findAllVariables(n){if(isTerm(n))isVariable(n)&&variables.add(`?${n.value}`);else if(Array.isArray(n))for(const e of n)findAllVariables(e);else if(n&&typeof n=="object")for(let e of Object.keys(n))e.startsWith("?")&&variables.add(e),findAllVariables(n[e])}function inScopeVariables(n){let e={};if(isTriple(n)){const t=[inScopeVariables(n.subject),inScopeVariables(n.predicate),inScopeVariables(n.object),n.graph?inScopeVariables(n.graph):{}];Object.assign(e,...t)}else if(isTerm(n))isVariable(n)&&(e[n.value]=n);else if(n.type==="bgp"){const t=n.triples;Object.assign(e,...t.map(inScopeVariables))}else if(n.type==="path")Object.assign(e,...n.items.map(inScopeVariables));else if(n.type==="group"||n.type==="union"||n.type==="optional")Object.assign(e,...n.patterns.map(inScopeVariables));else if(n.type==="service"||n.type==="graph")Object.assign(e,inScopeVariables(n.name)),Object.assign(e,...n.patterns.map(inScopeVariables));else if(n.type==="bind")Object.assign(e,inScopeVariables(n.variable));else if(n.type==="values"){if(n.values.length>0){const t=Object.keys(n.values[0]).map(o=>factory$1.createTerm(o));Object.assign(e,...t.map(inScopeVariables))}}else if(n.type==="query"&&(n.queryType==="SELECT"||n.queryType==="DESCRIBE")){n.where&&n.variables.some(util_1$1.default.isWildcard)&&Object.assign(e,...n.where.map(inScopeVariables));for(const t of n.variables)isVariable(t)?Object.assign(e,inScopeVariables(t)):t.variable&&Object.assign(e,inScopeVariables(t.variable));if(n.queryType==="SELECT"){if(n.group)for(const t of n.group)t.variable&&Object.assign(e,inScopeVariables(t.variable));if(n.values){const t={type:"values",values:n.values};Object.assign(e,inScopeVariables(t))}}}return e}function translateGroupGraphPattern(n){let e=[],t=[];if("patterns"in n)for(let l of n.patterns)(l.type==="filter"?e:t).push(l);if(n.type==="bgp")return translateBgp$1(n);let o;if(n.type==="union")o=factory$1.createUnion(t.map(l=>(l.type!=="group"&&(l={type:"group",patterns:[l]}),translateGroupGraphPattern(l))));else{if(n.type==="graph")return translateGraph$1(n);if(n.type==="group")o=t.reduce(accumulateGroupGraphPattern,factory$1.createBgp([]));else if(n.type==="values")o=translateInlineData(n);else if(n.type==="query")o=translateQuery(n,useQuads,!1);else throw new Error(`Unexpected type: ${n.type}`)}if(e.length>0){let l=e.map(d=>translateExpression$1(d.expression));l.length>0&&(o=factory$1.createFilter(o,l.reduce((d,u)=>factory$1.createOperatorExpression("&&",[d,u]))))}return o}function translateExpression$1(n){if(util_1$1.default.isSimpleTerm(n)||util_1$1.default.isQuad(n))return factory$1.createTermExpression(n);if(util_1$1.default.isWildcard(n))return factory$1.createWildcardExpression();if("aggregation"in n)return factory$1.createAggregateExpression(n.aggregation,translateExpression$1(n.expression),Boolean(n.distinct),n.separator);if("function"in n)return factory$1.createNamedExpression(n.function,n.args.map(translateExpression$1));if("operator"in n)return n.operator==="exists"||n.operator==="notexists"?factory$1.createExistenceExpression(n.operator==="notexists",translateGroupGraphPattern(n.args[0])):((n.operator==="in"||n.operator==="notin")&&(n.args=[n.args[0]].concat(n.args[1])),factory$1.createOperatorExpression(n.operator,n.args.map(translateExpression$1)));throw new Error(`Unknown expression: ${JSON.stringify(n)}`)}function translateBgp$1(n){let e=[],t=[];for(let o of n.triples)if("pathType"in o.predicate){let l=translatePath$1(o);for(let d of l)d.type===types$1.PATH?(e.length>0&&t.push(factory$1.createBgp(e)),e=[],t.push(d)):e.push(d)}else e.push(translateQuad(o));return e.length>0&&t.push(factory$1.createBgp(e)),t.length===1?t[0]:factory$1.createJoin(t)}function translatePath$1(n){let e=n.subject,t=translatePathPredicate(n.predicate),o=n.object;return simplifyPath(e,t,o)}function translatePathPredicate(n){if(util_1$1.default.isSimpleTerm(n)){if(n.termType==="NamedNode")return factory$1.createLink(n);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(n)}`)}if(n.pathType==="^")return factory$1.createInv(translatePathPredicate(n.items[0]));if(n.pathType==="!"){let e=[],t=[],o;"pathType"in n.items[0]&&n.items[0].pathType==="|"?o=n.items[0].items:o=n.items;for(let u of o)if(util_1$1.default.isSimpleTerm(u))e.push(u);else if(u.pathType==="^")t.push(u.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(u)}`);let l=factory$1.createNps(e),d=factory$1.createInv(factory$1.createNps(t));return t.length===0?l:e.length===0?d:factory$1.createAlt([l,d])}if(n.pathType==="/")return factory$1.createSeq(n.items.map(translatePathPredicate));if(n.pathType==="|")return factory$1.createAlt(n.items.map(translatePathPredicate));if(n.pathType==="*")return factory$1.createZeroOrMorePath(translatePathPredicate(n.items[0]));if(n.pathType==="+")return factory$1.createOneOrMorePath(translatePathPredicate(n.items[0]));if(n.pathType==="?")return factory$1.createZeroOrOnePath(translatePathPredicate(n.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(n)}`)}function simplifyPath(n,e,t){if(e.type===types$1.LINK)return[factory$1.createPattern(n,e.iri,t)];if(e.type===types$1.INV)return simplifyPath(t,e.path,n);if(e.type===types$1.SEQ){let o=n;return util_1$1.default.flatten(e.input.map((l,d)=>{const u=d===e.input.length-1?t:generateFreshVar(),a=simplifyPath(o,l,u);return u.termType==="Variable"&&(o=u),a}))}return[factory$1.createPath(n,e,t)]}function generateFreshVar(){let n=`?var${varCount++}`;return variables.has(n)?generateFreshVar():(variables.add(n),factory$1.createTerm(n))}function translateQuad(n){if("pathType"in n.predicate)throw new Error("Trying to translate property path to quad.");return factory$1.createPattern(n.subject,n.predicate,n.object,n.graph)}function translateGraph$1(n){const e={type:"group",patterns:n.patterns};let t=translateGroupGraphPattern(e);return useQuads?t=recurseGraph(t,n.name):t=factory$1.createGraph(t,n.name),t}let typeVals=Object.values(types$1);function recurseGraph(n,e,t){if(n.type===types$1.GRAPH){if(t)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");n=recurseGraph(n.input,n.name)}else if(n.type===types$1.BGP)n.patterns=n.patterns.map(o=>(t&&(o.subject.equals(e)&&(o.subject=t),o.predicate.equals(e)&&(o.predicate=t),o.object.equals(e)&&(o.object=t)),o.graph.termType==="DefaultGraph"&&(o.graph=e),o));else if(n.type===types$1.PATH)t&&(n.subject.equals(e)&&(n.subject=t),n.object.equals(e)&&(n.object=t)),n.graph.termType==="DefaultGraph"&&(n.graph=e);else if(n.type===types$1.PROJECT&&!t)n.variables.some(o=>o.equals(e))||(t=generateFreshVar()),n.input=recurseGraph(n.input,e,t);else if(n.type===types$1.EXTEND&&!t)n.variable.equals(e)&&(t=generateFreshVar()),n.input=recurseGraph(n.input,e,t);else for(let o of Object.keys(n))Array.isArray(n[o])?n[o]=n[o].map(l=>recurseGraph(l,e,t)):typeVals.indexOf(n[o].type)>=0?n[o]=recurseGraph(n[o],e,t):t&&isVariable(n[o])&&n[o].equals(e)&&(n[o]=t);return n}function accumulateGroupGraphPattern(n,e){if(e.type==="optional"){const t=translateGroupGraphPattern({type:"group",patterns:e.patterns});t.type===types$1.FILTER?n=factory$1.createLeftJoin(n,t.input,t.expression):n=factory$1.createLeftJoin(n,t)}else if(e.type==="minus"){const t=translateGroupGraphPattern({type:"group",patterns:e.patterns});n=factory$1.createMinus(n,t)}else if(e.type==="bind")n=factory$1.createExtend(n,e.variable,translateExpression$1(e.expression));else if(e.type==="service"){const t={type:"group",patterns:e.patterns},o=factory$1.createService(translateGroupGraphPattern(t),e.name,e.silent);n=simplifiedJoin(n,o)}else{const t=translateGroupGraphPattern(e);n=simplifiedJoin(n,t)}return n}function simplifiedJoin(n,e){return n.type===types$1.BGP&&e.type===types$1.BGP?n=factory$1.createBgp([...n.patterns,...e.patterns]):n.type===types$1.BGP&&n.patterns.length===0?n=e:e.type===types$1.BGP&&e.patterns.length===0||(n=factory$1.createJoin([n,e])),n}function translateInlineData(n){let e=(n.values.length===0?[]:Object.keys(n.values[0])).map(factory$1.createTerm.bind(factory$1)),t=n.values.map(o=>{let l=Object.keys(o);l=l.filter(u=>o[u]!==void 0);let d={};for(let u of l)d[u]=o[u];return d});return factory$1.createValues(e,t)}function translateAggregates(n,e){const t=n,o=[],l={};if(t.variables=t.variables&&t.variables.map(u=>mapAggregate(u,l)),t.having=t.having&&t.having.map(u=>mapAggregate(u,l)),t.order=t.order&&t.order.map(u=>mapAggregate(u,l)),t.group||Object.keys(l).length>0){const u=Object.keys(l).map(c=>translateBoundAggregate$1(l[c],factory$1.createTerm(c))),a=[];if(t.group)for(const c of t.group)if(util_1$1.default.isSimpleTerm(c.expression))a.push(c.expression);else{const p="variable"in c?c.variable:generateFreshVar();e=factory$1.createExtend(e,p,translateExpression$1(c.expression)),a.push(p)}e=factory$1.createGroup(e,a,u)}if(t.having)for(let u of t.having)e=factory$1.createFilter(e,translateExpression$1(u));n.values&&(e=factory$1.createJoin([e,translateInlineData(n)]));let d=[];if(n.queryType==="SELECT"||n.queryType==="DESCRIBE")if(n.variables.some(u=>u&&util_1$1.default.isWildcard(u)))d=Object.values(inScopeVariables(n)).sort((u,a)=>u.value.localeCompare(a.value));else for(let u of n.variables)isVariable(u)||!("variable"in u)?d.push(u):u.variable&&(d.push(u.variable),o.push(u));for(let u of o)e=factory$1.createExtend(e,u.variable,translateExpression$1(u.expression));return t.order&&(e=factory$1.createOrderBy(e,t.order.map(u=>{let a=translateExpression$1(u.expression);return u.descending&&(a=factory$1.createOperatorExpression("desc",[a])),a}))),n.queryType==="SELECT"&&(e=factory$1.createProject(e,d)),t.distinct&&(e=factory$1.createDistinct(e)),t.reduced&&(e=factory$1.createReduced(e)),n.queryType==="CONSTRUCT"?e=factory$1.createConstruct(e,(n.template||[]).map(translateQuad)):n.queryType==="ASK"?e=factory$1.createAsk(e):n.queryType==="DESCRIBE"&&(e=factory$1.createDescribe(e,d)),(t.offset||t.limit)&&(e=factory$1.createSlice(e,t.offset||0,t.limit)),t.from&&(e=factory$1.createFrom(e,t.from.default,t.from.named)),e}function mapAggregate(n,e){if("type"in n&&n.type==="aggregate"){let t=!1,o;for(let l of Object.keys(e))if(equal(e[l],n)){o=factory$1.createTerm(l),t=!0;break}return t||(o=generateFreshVar(),e[(0,rdf_string_1$3.termToString)(o)]=n),o}return"expression"in n&&n.expression?{...n,expression:mapAggregate(n.expression,e)}:"args"in n&&n.args?{...n,args:n.args.map(t=>mapAggregate(t,e))}:n}function translateBoundAggregate$1(n,e){if(n.type!=="aggregate"||!n.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(n)}`);const t=translateExpression$1(n);return t.variable=e,t}function translateUpdate(n){return n.updates.length===1?translateSingleUpdate(n.updates[0]):factory$1.createCompositeUpdate(n.updates.map(translateSingleUpdate))}function translateSingleUpdate(n){if("type"in n){if(n.type==="load")return translateUpdateGraphLoad(n);if(n.type==="clear"||n.type==="create"||n.type==="drop")return translateUpdateGraph(n);if(n.type==="add"||n.type==="copy"||n.type==="move")return translateUpdateGraphShortcut$1(n)}else if(n.updateType==="insertdelete"||n.updateType==="deletewhere"||n.updateType==="delete"||n.updateType==="insert")return translateInsertDelete(n);throw new Error(`Unknown update type ${JSON.stringify(n)}`)}function translateInsertDelete(n){if(!useQuads)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let e=[],t=[],o;if(n.delete&&(e=util_1$1.default.flatten(n.delete.map(l=>translateUpdateTriplesBlock(l,n.graph)))),n.insert&&(t=util_1$1.default.flatten(n.insert.map(l=>translateUpdateTriplesBlock(l,n.graph)))),n.where&&n.where.length>0){o=translateGroupGraphPattern({type:"group",patterns:n.where});const l=n.using;l?o=factory$1.createFrom(o,l.default,l.named):n.graph&&(o=recurseGraph(o,n.graph))}else n.updateType==="deletewhere"&&e.length>0&&(o=factory$1.createBgp(e));return factory$1.createDeleteInsert(e.length>0?e:void 0,t.length>0?t:void 0,o)}function translateUpdateTriplesBlock(n,e){let t=e;n.type==="graph"&&(t=n.name);let o=n.triples;return t&&(o=o.map(l=>Object.assign(l,{graph:t}))),o.map(translateQuad)}function translateUpdateGraph(n){let e;switch(util_1$1.default.isSimpleTerm(n.graph)?e=n.graph:n.graph.all?e="ALL":n.graph.default?e="DEFAULT":n.graph.named?e="NAMED":e=n.graph.name,n.type){case"clear":return factory$1.createClear(e,n.silent);case"create":return factory$1.createCreate(e,n.silent);case"drop":return factory$1.createDrop(e,n.silent)}}function translateUpdateGraphLoad(n){return factory$1.createLoad(n.source,n.destination,n.silent)}function translateUpdateGraphShortcut$1(n){const e=n.source.default?"DEFAULT":n.source.name,t=n.destination.default?"DEFAULT":n.destination.name;switch(n.type){case"copy":return factory$1.createCopy(e,t,n.silent);case"move":return factory$1.createMove(e,t,n.silent);case"add":return factory$1.createAdd(e,t,n.silent)}}function translateBlankNodesToVariables(n){const e={},t=Array.from(variables).reduce((l,d)=>(l[d]=!0,l),{});return util_1$1.default.mapOperation(n,{[Algebra$1.types.DELETE_INSERT]:l=>({result:l,recurse:!1}),[Algebra$1.types.PATH]:(l,d)=>({result:d.createPath(o(l.subject),l.predicate,o(l.object),o(l.graph)),recurse:!1}),[Algebra$1.types.PATTERN]:(l,d)=>({result:d.createPattern(o(l.subject),o(l.predicate),o(l.object),o(l.graph)),recurse:!1}),[Algebra$1.types.CONSTRUCT]:l=>({result:factory$1.createConstruct(translateBlankNodesToVariables(l.input),l.template),recurse:!1})});function o(l){if(l.termType==="BlankNode"){let d=e[l.value];return d||(d=util_1$1.default.createUniqueVariable(l.value,t,factory$1.dataFactory),t[d.value]=!0,e[l.value]=d),d}return l}}var sparql={},rdfIsomorphic={},RdfIsomorphic={},hash={},utils$9={},minimalisticAssert=assert$5;function assert$5(n,e){if(!n)throw new Error(e||"Assertion failed")}assert$5.equal=function(e,t,o){if(e!=t)throw new Error(o||"Assertion failed: "+e+" != "+t)};var inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(n){inherits_browserExports=n}};typeof Object.create=="function"?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}};var assert$4=minimalisticAssert,inherits=inherits_browserExports;utils$9.inherits=inherits;function isSurrogatePair(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function toArray(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),l=0;l<n.length;l+=2)t.push(parseInt(n[l]+n[l+1],16))}else for(var o=0,l=0;l<n.length;l++){var d=n.charCodeAt(l);d<128?t[o++]=d:d<2048?(t[o++]=d>>6|192,t[o++]=d&63|128):isSurrogatePair(n,l)?(d=65536+((d&1023)<<10)+(n.charCodeAt(++l)&1023),t[o++]=d>>18|240,t[o++]=d>>12&63|128,t[o++]=d>>6&63|128,t[o++]=d&63|128):(t[o++]=d>>12|224,t[o++]=d>>6&63|128,t[o++]=d&63|128)}else for(l=0;l<n.length;l++)t[l]=n[l]|0;return t}utils$9.toArray=toArray;function toHex(n){for(var e="",t=0;t<n.length;t++)e+=zero2(n[t].toString(16));return e}utils$9.toHex=toHex;function htonl(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}utils$9.htonl=htonl;function toHex32(n,e){for(var t="",o=0;o<n.length;o++){var l=n[o];e==="little"&&(l=htonl(l)),t+=zero8(l.toString(16))}return t}utils$9.toHex32=toHex32;function zero2(n){return n.length===1?"0"+n:n}utils$9.zero2=zero2;function zero8(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}utils$9.zero8=zero8;function join32(n,e,t,o){var l=t-e;assert$4(l%4===0);for(var d=new Array(l/4),u=0,a=e;u<d.length;u++,a+=4){var c;o==="big"?c=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:c=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],d[u]=c>>>0}return d}utils$9.join32=join32;function split32(n,e){for(var t=new Array(n.length*4),o=0,l=0;o<n.length;o++,l+=4){var d=n[o];e==="big"?(t[l]=d>>>24,t[l+1]=d>>>16&255,t[l+2]=d>>>8&255,t[l+3]=d&255):(t[l+3]=d>>>24,t[l+2]=d>>>16&255,t[l+1]=d>>>8&255,t[l]=d&255)}return t}utils$9.split32=split32;function rotr32$1(n,e){return n>>>e|n<<32-e}utils$9.rotr32=rotr32$1;function rotl32$2(n,e){return n<<e|n>>>32-e}utils$9.rotl32=rotl32$2;function sum32$3(n,e){return n+e>>>0}utils$9.sum32=sum32$3;function sum32_3$1(n,e,t){return n+e+t>>>0}utils$9.sum32_3=sum32_3$1;function sum32_4$2(n,e,t,o){return n+e+t+o>>>0}utils$9.sum32_4=sum32_4$2;function sum32_5$2(n,e,t,o,l){return n+e+t+o+l>>>0}utils$9.sum32_5=sum32_5$2;function sum64$1(n,e,t,o){var l=n[e],d=n[e+1],u=o+d>>>0,a=(u<o?1:0)+t+l;n[e]=a>>>0,n[e+1]=u}utils$9.sum64=sum64$1;function sum64_hi$1(n,e,t,o){var l=e+o>>>0,d=(l<e?1:0)+n+t;return d>>>0}utils$9.sum64_hi=sum64_hi$1;function sum64_lo$1(n,e,t,o){var l=e+o;return l>>>0}utils$9.sum64_lo=sum64_lo$1;function sum64_4_hi$1(n,e,t,o,l,d,u,a){var c=0,p=e;p=p+o>>>0,c+=p<e?1:0,p=p+d>>>0,c+=p<d?1:0,p=p+a>>>0,c+=p<a?1:0;var m=n+t+l+u+c;return m>>>0}utils$9.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(n,e,t,o,l,d,u,a){var c=e+o+d+a;return c>>>0}utils$9.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(n,e,t,o,l,d,u,a,c,p){var m=0,y=e;y=y+o>>>0,m+=y<e?1:0,y=y+d>>>0,m+=y<d?1:0,y=y+a>>>0,m+=y<a?1:0,y=y+p>>>0,m+=y<p?1:0;var h=n+t+l+u+c+m;return h>>>0}utils$9.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(n,e,t,o,l,d,u,a,c,p){var m=e+o+d+a+p;return m>>>0}utils$9.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(n,e,t){var o=e<<32-t|n>>>t;return o>>>0}utils$9.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$9.rotr64_lo=rotr64_lo$1;function shr64_hi$1(n,e,t){return n>>>t}utils$9.shr64_hi=shr64_hi$1;function shr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$9.shr64_lo=shr64_lo$1;var common$5={},utils$8=utils$9,assert$3=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,t){if(e=utils$8.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var o=e.length%this._delta8;this.pending=e.slice(e.length-o,e.length),this.pending.length===0&&(this.pending=null),e=utils$8.join32(e,0,e.length-o,this.endian);for(var l=0;l<e.length;l+=this._delta32)this._update(e,l,l+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$3(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,o=t-(e+this.padLength)%t,l=new Array(o+this.padLength);l[0]=128;for(var d=1;d<o;d++)l[d]=0;if(e<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)l[d++]=0;l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=e>>>24&255,l[d++]=e>>>16&255,l[d++]=e>>>8&255,l[d++]=e&255}else for(l[d++]=e&255,l[d++]=e>>>8&255,l[d++]=e>>>16&255,l[d++]=e>>>24&255,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,u=8;u<this.padLength;u++)l[d++]=0;return l};var sha={},common$4={},utils$7=utils$9,rotr32=utils$7.rotr32;function ft_1$1(n,e,t,o){if(n===0)return ch32$1(e,t,o);if(n===1||n===3)return p32(e,t,o);if(n===2)return maj32$1(e,t,o)}common$4.ft_1=ft_1$1;function ch32$1(n,e,t){return n&e^~n&t}common$4.ch32=ch32$1;function maj32$1(n,e,t){return n&e^n&t^e&t}common$4.maj32=maj32$1;function p32(n,e,t){return n^e^t}common$4.p32=p32;function s0_256$1(n){return rotr32(n,2)^rotr32(n,13)^rotr32(n,22)}common$4.s0_256=s0_256$1;function s1_256$1(n){return rotr32(n,6)^rotr32(n,11)^rotr32(n,25)}common$4.s1_256=s1_256$1;function g0_256$1(n){return rotr32(n,7)^rotr32(n,18)^n>>>3}common$4.g0_256=g0_256$1;function g1_256$1(n){return rotr32(n,17)^rotr32(n,19)^n>>>10}common$4.g1_256=g1_256$1;var utils$6=utils$9,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$6.rotl32,sum32$2=utils$6.sum32,sum32_5$1=utils$6.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$6.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,t){for(var o=this.W,l=0;l<16;l++)o[l]=e[t+l];for(;l<o.length;l++)o[l]=rotl32$1(o[l-3]^o[l-8]^o[l-14]^o[l-16],1);var d=this.h[0],u=this.h[1],a=this.h[2],c=this.h[3],p=this.h[4];for(l=0;l<o.length;l++){var m=~~(l/20),y=sum32_5$1(rotl32$1(d,5),ft_1(m,u,a,c),p,o[l],sha1_K[m]);p=c,c=a,a=rotl32$1(u,30),u=d,d=y}this.h[0]=sum32$2(this.h[0],d),this.h[1]=sum32$2(this.h[1],u),this.h[2]=sum32$2(this.h[2],a),this.h[3]=sum32$2(this.h[3],c),this.h[4]=sum32$2(this.h[4],p)};SHA1.prototype._digest=function(e){return e==="hex"?utils$6.toHex32(this.h,"big"):utils$6.split32(this.h,"big")};var utils$5=utils$9,common$2=common$5,shaCommon=common$4,assert$2=minimalisticAssert,sum32$1=utils$5.sum32,sum32_4$1=utils$5.sum32_4,sum32_5=utils$5.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$5.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(e,t){for(var o=this.W,l=0;l<16;l++)o[l]=e[t+l];for(;l<o.length;l++)o[l]=sum32_4$1(g1_256(o[l-2]),o[l-7],g0_256(o[l-15]),o[l-16]);var d=this.h[0],u=this.h[1],a=this.h[2],c=this.h[3],p=this.h[4],m=this.h[5],y=this.h[6],h=this.h[7];for(assert$2(this.k.length===o.length),l=0;l<o.length;l++){var T=sum32_5(h,s1_256(p),ch32(p,m,y),this.k[l],o[l]),g=sum32$1(s0_256(d),maj32(d,u,a));h=y,y=m,m=p,p=sum32$1(c,T),c=a,a=u,u=d,d=sum32$1(T,g)}this.h[0]=sum32$1(this.h[0],d),this.h[1]=sum32$1(this.h[1],u),this.h[2]=sum32$1(this.h[2],a),this.h[3]=sum32$1(this.h[3],c),this.h[4]=sum32$1(this.h[4],p),this.h[5]=sum32$1(this.h[5],m),this.h[6]=sum32$1(this.h[6],y),this.h[7]=sum32$1(this.h[7],h)};SHA256$1.prototype._digest=function(e){return e==="hex"?utils$5.toHex32(this.h,"big"):utils$5.split32(this.h,"big")};var utils$4=utils$9,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$4.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(e){return e==="hex"?utils$4.toHex32(this.h.slice(0,7),"big"):utils$4.split32(this.h.slice(0,7),"big")};var utils$3=utils$9,common$1=common$5,assert$1=minimalisticAssert,rotr64_hi=utils$3.rotr64_hi,rotr64_lo=utils$3.rotr64_lo,shr64_hi=utils$3.shr64_hi,shr64_lo=utils$3.shr64_lo,sum64=utils$3.sum64,sum64_hi=utils$3.sum64_hi,sum64_lo=utils$3.sum64_lo,sum64_4_hi=utils$3.sum64_4_hi,sum64_4_lo=utils$3.sum64_4_lo,sum64_5_hi=utils$3.sum64_5_hi,sum64_5_lo=utils$3.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$3.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(e,t){for(var o=this.W,l=0;l<32;l++)o[l]=e[t+l];for(;l<o.length;l+=2){var d=g1_512_hi(o[l-4],o[l-3]),u=g1_512_lo(o[l-4],o[l-3]),a=o[l-14],c=o[l-13],p=g0_512_hi(o[l-30],o[l-29]),m=g0_512_lo(o[l-30],o[l-29]),y=o[l-32],h=o[l-31];o[l]=sum64_4_hi(d,u,a,c,p,m,y,h),o[l+1]=sum64_4_lo(d,u,a,c,p,m,y,h)}};SHA512$1.prototype._update=function(e,t){this._prepareBlock(e,t);var o=this.W,l=this.h[0],d=this.h[1],u=this.h[2],a=this.h[3],c=this.h[4],p=this.h[5],m=this.h[6],y=this.h[7],h=this.h[8],T=this.h[9],g=this.h[10],v=this.h[11],S=this.h[12],x=this.h[13],w=this.h[14],E=this.h[15];assert$1(this.k.length===o.length);for(var O=0;O<o.length;O+=2){var I=w,z=E,Q=s1_512_hi(h,T),W=s1_512_lo(h,T),H=ch64_hi(h,T,g,v,S),B=ch64_lo(h,T,g,v,S,x),M=this.k[O],V=this.k[O+1],$=o[O],te=o[O+1],J=sum64_5_hi(I,z,Q,W,H,B,M,V,$,te),Z=sum64_5_lo(I,z,Q,W,H,B,M,V,$,te);I=s0_512_hi(l,d),z=s0_512_lo(l,d),Q=maj64_hi(l,d,u,a,c),W=maj64_lo(l,d,u,a,c,p);var Y=sum64_hi(I,z,Q,W),oe=sum64_lo(I,z,Q,W);w=S,E=x,S=g,x=v,g=h,v=T,h=sum64_hi(m,y,J,Z),T=sum64_lo(y,y,J,Z),m=c,y=p,c=u,p=a,u=l,a=d,l=sum64_hi(J,Z,Y,oe),d=sum64_lo(J,Z,Y,oe)}sum64(this.h,0,l,d),sum64(this.h,2,u,a),sum64(this.h,4,c,p),sum64(this.h,6,m,y),sum64(this.h,8,h,T),sum64(this.h,10,g,v),sum64(this.h,12,S,x),sum64(this.h,14,w,E)};SHA512$1.prototype._digest=function(e){return e==="hex"?utils$3.toHex32(this.h,"big"):utils$3.split32(this.h,"big")};function ch64_hi(n,e,t,o,l){var d=n&t^~n&l;return d<0&&(d+=4294967296),d}function ch64_lo(n,e,t,o,l,d){var u=e&o^~e&d;return u<0&&(u+=4294967296),u}function maj64_hi(n,e,t,o,l){var d=n&t^n&l^t&l;return d<0&&(d+=4294967296),d}function maj64_lo(n,e,t,o,l,d){var u=e&o^e&d^o&d;return u<0&&(u+=4294967296),u}function s0_512_hi(n,e){var t=rotr64_hi(n,e,28),o=rotr64_hi(e,n,2),l=rotr64_hi(e,n,7),d=t^o^l;return d<0&&(d+=4294967296),d}function s0_512_lo(n,e){var t=rotr64_lo(n,e,28),o=rotr64_lo(e,n,2),l=rotr64_lo(e,n,7),d=t^o^l;return d<0&&(d+=4294967296),d}function s1_512_hi(n,e){var t=rotr64_hi(n,e,14),o=rotr64_hi(n,e,18),l=rotr64_hi(e,n,9),d=t^o^l;return d<0&&(d+=4294967296),d}function s1_512_lo(n,e){var t=rotr64_lo(n,e,14),o=rotr64_lo(n,e,18),l=rotr64_lo(e,n,9),d=t^o^l;return d<0&&(d+=4294967296),d}function g0_512_hi(n,e){var t=rotr64_hi(n,e,1),o=rotr64_hi(n,e,8),l=shr64_hi(n,e,7),d=t^o^l;return d<0&&(d+=4294967296),d}function g0_512_lo(n,e){var t=rotr64_lo(n,e,1),o=rotr64_lo(n,e,8),l=shr64_lo(n,e,7),d=t^o^l;return d<0&&(d+=4294967296),d}function g1_512_hi(n,e){var t=rotr64_hi(n,e,19),o=rotr64_hi(e,n,29),l=shr64_hi(n,e,6),d=t^o^l;return d<0&&(d+=4294967296),d}function g1_512_lo(n,e){var t=rotr64_lo(n,e,19),o=rotr64_lo(e,n,29),l=shr64_lo(n,e,6),d=t^o^l;return d<0&&(d+=4294967296),d}var utils$2=utils$9,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$2.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(e){return e==="hex"?utils$2.toHex32(this.h.slice(0,12),"big"):utils$2.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$1=utils$9,common=common$5,rotl32=utils$1.rotl32,sum32=utils$1.sum32,sum32_3=utils$1.sum32_3,sum32_4=utils$1.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$1.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,t){for(var o=this.h[0],l=this.h[1],d=this.h[2],u=this.h[3],a=this.h[4],c=o,p=l,m=d,y=u,h=a,T=0;T<80;T++){var g=sum32(rotl32(sum32_4(o,f(T,l,d,u),e[r[T]+t],K(T)),s[T]),a);o=a,a=u,u=rotl32(d,10),d=l,l=g,g=sum32(rotl32(sum32_4(c,f(79-T,p,m,y),e[rh[T]+t],Kh(T)),sh[T]),h),c=h,h=y,y=rotl32(m,10),m=p,p=g}g=sum32_3(this.h[1],d,y),this.h[1]=sum32_3(this.h[2],u,h),this.h[2]=sum32_3(this.h[3],a,c),this.h[3]=sum32_3(this.h[4],o,p),this.h[4]=sum32_3(this.h[0],l,m),this.h[0]=g};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$1.toHex32(this.h,"little"):utils$1.split32(this.h,"little")};function f(n,e,t,o){return n<=15?e^t^o:n<=31?e&t|~e&o:n<=47?(e|~t)^o:n<=63?e&o|t&~o:e^(t|~o)}function K(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Kh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils=utils$9,assert=minimalisticAssert;function Hmac(n,e,t){if(!(this instanceof Hmac))return new Hmac(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(e,t))}var hmac=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,t){return this.inner.update(e,t),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=utils$9,e.common=common$5,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash);var rdfTerms={},QuadTermUtil={};Object.defineProperty(QuadTermUtil,"__esModule",{value:!0});QuadTermUtil.matchPatternMappings=QuadTermUtil.matchPatternComplete=QuadTermUtil.matchPattern=QuadTermUtil.matchTerm=QuadTermUtil.someTerms=QuadTermUtil.everyTerms=QuadTermUtil.reduceTerms=QuadTermUtil.mapTerms=QuadTermUtil.filterQuadTermNames=QuadTermUtil.filterTerms=QuadTermUtil.forEachTerms=QuadTermUtil.collectNamedTerms=QuadTermUtil.getNamedTerms=QuadTermUtil.getTermsNested=QuadTermUtil.getTerms=QuadTermUtil.TRIPLE_TERM_NAMES=QuadTermUtil.QUAD_TERM_NAMES=void 0;const rdf_data_factory_1=rdfDataFactory,DF=new rdf_data_factory_1.DataFactory;QuadTermUtil.QUAD_TERM_NAMES=["subject","predicate","object","graph"];QuadTermUtil.TRIPLE_TERM_NAMES=["subject","predicate","object"];function getTerms(n,e){return e&&n.graph.termType==="DefaultGraph"?[n.subject,n.predicate,n.object]:[n.subject,n.predicate,n.object,n.graph]}QuadTermUtil.getTerms=getTerms;function getTermsNested(n,e){const t=[];for(const o of getTerms(n,e))o.termType==="Quad"?getTermsNested(o,e).forEach(l=>t.push(l)):t.push(o);return t}QuadTermUtil.getTermsNested=getTermsNested;function getNamedTerms(n){return[{key:"subject",value:n.subject},{key:"predicate",value:n.predicate},{key:"object",value:n.object},{key:"graph",value:n.graph}]}QuadTermUtil.getNamedTerms=getNamedTerms;function collectNamedTerms(n,e,t){const o={};return n.forEach(l=>o[l.key]=l.value),e&&(o.subject=o.subject||e("subject"),o.predicate=o.predicate||e("predicate"),o.object=o.object||e("object"),o.graph=o.graph||e("graph")),(t||DF).quad(o.subject,o.predicate,o.object,o.graph)}QuadTermUtil.collectNamedTerms=collectNamedTerms;function forEachTerms(n,e){e(n.subject,"subject"),e(n.predicate,"predicate"),e(n.object,"object"),e(n.graph,"graph")}QuadTermUtil.forEachTerms=forEachTerms;function filterTerms(n,e){const t=[];return e(n.subject,"subject")&&t.push(n.subject),e(n.predicate,"predicate")&&t.push(n.predicate),e(n.object,"object")&&t.push(n.object),e(n.graph,"graph")&&t.push(n.graph),t}QuadTermUtil.filterTerms=filterTerms;function filterQuadTermNames(n,e){const t=[];return e(n.subject,"subject")&&t.push("subject"),e(n.predicate,"predicate")&&t.push("predicate"),e(n.object,"object")&&t.push("object"),e(n.graph,"graph")&&t.push("graph"),t}QuadTermUtil.filterQuadTermNames=filterQuadTermNames;function mapTerms(n,e,t){return(t||DF).quad(e(n.subject,"subject"),e(n.predicate,"predicate"),e(n.object,"object"),e(n.graph,"graph"))}QuadTermUtil.mapTerms=mapTerms;function reduceTerms(n,e,t){let o=t;return o=e(o,n.subject,"subject"),o=e(o,n.predicate,"predicate"),o=e(o,n.object,"object"),e(o,n.graph,"graph")}QuadTermUtil.reduceTerms=reduceTerms;function everyTerms(n,e){return e(n.subject,"subject")&&e(n.predicate,"predicate")&&e(n.object,"object")&&e(n.graph,"graph")}QuadTermUtil.everyTerms=everyTerms;function someTerms(n,e){return e(n.subject,"subject")||e(n.predicate,"predicate")||e(n.object,"object")||e(n.graph,"graph")}QuadTermUtil.someTerms=someTerms;function matchTerm(n,e){return!e||e.termType==="Variable"||e.termType==="Quad"&&n.termType==="Quad"&&matchPatternComplete(n,e)||e.equals(n)}QuadTermUtil.matchTerm=matchTerm;function matchPattern(n,e,t,o,l){return matchTerm(n.subject,e)&&matchTerm(n.predicate,t)&&matchTerm(n.object,o)&&matchTerm(n.graph,l)}QuadTermUtil.matchPattern=matchPattern;function matchPatternComplete(n,e){return matchPattern(n,e.subject,e.predicate,e.object,e.graph)}QuadTermUtil.matchPatternComplete=matchPatternComplete;function matchPatternMappings(n,e,t={}){const o={};function l(d,u){return everyTerms(d,(a,c)=>{var p,m;const y=u[c];switch(a.termType){case"Variable":return t.skipVarMapping&&y.termType==="Variable"||((m=(p=o[a.value])===null||p===void 0?void 0:p.equals(y))!==null&&m!==void 0?m:(o[a.value]=y,!0));case"Quad":return y.termType==="Quad"&&l(a,y);default:return a.equals(y)}})}return l(e,n)&&(t.returnMappings?o:!0)}QuadTermUtil.matchPatternMappings=matchPatternMappings;var TermUtil={};Object.defineProperty(TermUtil,"__esModule",{value:!0});TermUtil.getQuads=TermUtil.getDefaultGraphs=TermUtil.getVariables=TermUtil.getLiterals=TermUtil.getBlankNodes=TermUtil.getNamedNodes=TermUtil.getTermsOfType=TermUtil.uniqTerms=TermUtil.TERM_TYPES=void 0;const rdf_string_1$2=rdfString;TermUtil.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function uniqTerms(n){const e={};return n.filter(t=>{const o=rdf_string_1$2.termToString(t);return!(o in e)&&(e[o]=!0)})}TermUtil.uniqTerms=uniqTerms;function getTermsOfType(n,e){return n.filter(t=>t.termType===e)}TermUtil.getTermsOfType=getTermsOfType;function getNamedNodes(n){return getTermsOfType(n,"NamedNode")}TermUtil.getNamedNodes=getNamedNodes;function getBlankNodes(n){return getTermsOfType(n,"BlankNode")}TermUtil.getBlankNodes=getBlankNodes;function getLiterals(n){return getTermsOfType(n,"Literal")}TermUtil.getLiterals=getLiterals;function getVariables(n){return getTermsOfType(n,"Variable")}TermUtil.getVariables=getVariables;function getDefaultGraphs(n){return getTermsOfType(n,"DefaultGraph")}TermUtil.getDefaultGraphs=getDefaultGraphs;function getQuads(n){return getTermsOfType(n,"Quad")}TermUtil.getQuads=getQuads;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,l,d,u){u===void 0&&(u=d),Object.defineProperty(o,u,{enumerable:!0,get:function(){return l[d]}})}:function(o,l,d,u){u===void 0&&(u=d),o[u]=l[d]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,l){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,o,d)};Object.defineProperty(n,"__esModule",{value:!0}),t(QuadTermUtil,n),t(TermUtil,n)})(rdfTerms);Object.defineProperty(RdfIsomorphic,"__esModule",{value:!0});RdfIsomorphic.isTermGrounded=RdfIsomorphic.termToSignature=RdfIsomorphic.quadToSignature=RdfIsomorphic.sha1hex=RdfIsomorphic.hashTerm=RdfIsomorphic.hashTerms=RdfIsomorphic.getGraphBlankNodes=RdfIsomorphic.uniqGraph=RdfIsomorphic.deindexGraph=RdfIsomorphic.indexGraph=RdfIsomorphic.getQuadsWithoutBlankNodes=RdfIsomorphic.getQuadsWithBlankNodes=RdfIsomorphic.hasValue=RdfIsomorphic.hashValues=RdfIsomorphic.getBijectionInner=RdfIsomorphic.getBijection=RdfIsomorphic.isomorphic=void 0;const hash_js_1=hash,rdf_string_1$1=rdfString,rdf_terms_1=rdfTerms;function isomorphic(n,e){return!!getBijection(n,e)}RdfIsomorphic.isomorphic=isomorphic;function getBijection(n,e){const t=indexGraph(getQuadsWithoutBlankNodes(n)),o=indexGraph(getQuadsWithoutBlankNodes(e));if(Object.keys(t).length!==Object.keys(o).length)return null;for(const c in t)if(t[c]!==o[c])return null;const l=uniqGraph(getQuadsWithBlankNodes(n)),d=uniqGraph(getQuadsWithBlankNodes(e)),u=getGraphBlankNodes(n),a=getGraphBlankNodes(e);return getBijectionInner(l,d,u,a)}RdfIsomorphic.getBijection=getBijection;function getBijectionInner(n,e,t,o,l,d){l||(l={}),d||(d={});const[u,a]=hashTerms(n,t,l),[c,p]=hashTerms(e,o,d);if(Object.keys(u).length!==Object.keys(c).length)return null;for(const y in u)if(!hasValue(c,u[y]))return null;let m={};for(const y of t){const h=rdf_string_1$1.termToString(y),T=a[h];for(const g in p)if(p[g]===T){m[h]=g,delete p[g];break}}if(!arraysEqual(Object.keys(m).sort(),t.map(rdf_string_1$1.termToString).sort())||!arraysEqual(hashValues(m).sort(),o.map(rdf_string_1$1.termToString).sort())){m=null;for(const y of t){const h=rdf_string_1$1.termToString(y);if(!u[h])for(const T of o){const g=rdf_string_1$1.termToString(T);if(!c[g]&&a[h]===p[g]){const v=sha1hex(h);m=getBijectionInner(n,e,t,o,Object.assign(Object.assign({},u),{[h]:v}),Object.assign(Object.assign({},c),{[g]:v}))}}}}return m}RdfIsomorphic.getBijectionInner=getBijectionInner;function arraysEqual(n,e){if(n.length!==e.length)return!1;for(let t=n.length;t--;)if(n[t]!==e[t])return!1;return!0}function hashValues(n){const e=[];for(const t in n)e.push(n[t]);return e}RdfIsomorphic.hashValues=hashValues;function hasValue(n,e){for(const t in n)if(n[t]===e)return!0;return!1}RdfIsomorphic.hasValue=hasValue;function getQuadsWithBlankNodes(n){return n.filter(e=>rdf_terms_1.someTerms(e,t=>t.termType==="BlankNode"||t.termType==="Quad"&&rdf_terms_1.getTermsNested(t).some(o=>o.termType==="BlankNode")))}RdfIsomorphic.getQuadsWithBlankNodes=getQuadsWithBlankNodes;function getQuadsWithoutBlankNodes(n){return n.filter(e=>rdf_terms_1.everyTerms(e,t=>t.termType!=="BlankNode"&&!(t.termType==="Quad"&&rdf_terms_1.getTermsNested(t).some(o=>o.termType==="BlankNode"))))}RdfIsomorphic.getQuadsWithoutBlankNodes=getQuadsWithoutBlankNodes;function indexGraph(n){const e={};for(const t of n)e[JSON.stringify(rdf_string_1$1.quadToStringQuad(t))]=!0;return e}RdfIsomorphic.indexGraph=indexGraph;function deindexGraph(n){return Object.keys(n).map(e=>rdf_string_1$1.stringQuadToQuad(JSON.parse(e)))}RdfIsomorphic.deindexGraph=deindexGraph;function uniqGraph(n){return deindexGraph(indexGraph(n))}RdfIsomorphic.uniqGraph=uniqGraph;function getGraphBlankNodes(n){return rdf_terms_1.uniqTerms(n.map(e=>rdf_terms_1.getBlankNodes(rdf_terms_1.getTermsNested(e))).reduce((e,t)=>e.concat(t),[]))}RdfIsomorphic.getGraphBlankNodes=getGraphBlankNodes;function hashTerms(n,e,t){const o=Object.assign({},t),l={};let d=!0;for(;d;){const u=Object.keys(o).length;for(const c of e){const p=rdf_string_1$1.termToString(c);if(!o[p]){const[m,y]=hashTerm(c,n,o);m&&(o[p]=y),l[p]=y}}const a={};for(const c in l){const p=l[c];a[p]===void 0?a[p]=c:a[p]=!1}for(const c in a){const p=a[c];p&&(o[p]=c)}d=u!==Object.keys(o).length}return[o,l]}RdfIsomorphic.hashTerms=hashTerms;function hashTerm(n,e,t){const o=[];let l=!0;for(const u of e){const a=rdf_terms_1.getTermsNested(u);if(a.some(c=>c.equals(n))){o.push(quadToSignature(u,t,n));for(const c of a)!isTermGrounded(c,t)&&!c.equals(n)&&(l=!1)}}const d=sha1hex(o.sort().join(""));return[l,d]}RdfIsomorphic.hashTerm=hashTerm;function sha1hex(n){return hash_js_1.sha1().update(n).digest("hex")}RdfIsomorphic.sha1hex=sha1hex;function quadToSignature(n,e,t){return rdf_terms_1.getTerms(n).map(o=>termToSignature(o,e,t)).join("|")}RdfIsomorphic.quadToSignature=quadToSignature;function termToSignature(n,e,t){return n.equals(t)?"@self":n.termType==="BlankNode"?e[rdf_string_1$1.termToString(n)]||"@blank":n.termType==="Quad"?`<${quadToSignature(n,e,t)}>`:rdf_string_1$1.termToString(n)}RdfIsomorphic.termToSignature=termToSignature;function isTermGrounded(n,e){return n.termType!=="BlankNode"&&!(n.termType==="Quad"&&rdf_terms_1.getTermsNested(n).some(t=>!isTermGrounded(t,e)))||!!e[rdf_string_1$1.termToString(n)]}RdfIsomorphic.isTermGrounded=isTermGrounded;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,l,d,u){u===void 0&&(u=d),Object.defineProperty(o,u,{enumerable:!0,get:function(){return l[d]}})}:function(o,l,d,u){u===void 0&&(u=d),o[u]=l[d]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,l){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,o,d)};Object.defineProperty(n,"__esModule",{value:!0}),t(RdfIsomorphic,n)})(rdfIsomorphic);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,o){o===void 0&&(o=t);var l=Object.getOwnPropertyDescriptor(e,t);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,o,l)}:function(n,e,t,o){o===void 0&&(o=t),n[o]=e[t]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding(e,n,t);return __setModuleDefault(e,n),e},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sparql,"__esModule",{value:!0});sparql.toSparqlJs=sparql.toSparql=void 0;const rdf_isomorphic_1=rdfIsomorphic,rdf_string_1=rdfString,sparqljs_1=sparql$1,Algebra=__importStar(algebra),factory_1=__importDefault(factory$2),util_1=__importDefault(util),types=Algebra.types,eTypes=Algebra.expressionTypes;let context;const factory=new factory_1.default;function toSparql(n,e={}){return new sparqljs_1.Generator(e).stringify(toSparqlJs(n))}sparql.toSparql=toSparql;function toSparqlJs(n){resetContext(),n=removeQuads(n);let e=translateOperation(n);return e.type==="group"?e.patterns[0]:e}sparql.toSparqlJs=toSparqlJs;function resetContext(){context={project:!1,extend:[],group:[],aggregates:[],order:[]}}function translateOperation(n){switch(n.type!==types.EXTEND&&n.type!==types.ORDER_BY&&n.type!==types.GRAPH&&(context.project=!1),n.type){case types.EXPRESSION:return translateExpression(n);case types.ASK:return translateProject(n,types.ASK);case types.BGP:return translateBgp(n);case types.CONSTRUCT:return translateConstruct(n);case types.DESCRIBE:return translateProject(n,types.DESCRIBE);case types.DISTINCT:return translateDistinct(n);case types.EXTEND:return translateExtend(n);case types.FROM:return translateFrom(n);case types.FILTER:return translateFilter(n);case types.GRAPH:return translateGraph(n);case types.GROUP:return translateGroup(n);case types.JOIN:return translateJoin(n);case types.LEFT_JOIN:return translateLeftJoin(n);case types.MINUS:return translateMinus(n);case types.NOP:return{};case types.ORDER_BY:return translateOrderBy(n);case types.PATH:return translatePath(n);case types.PATTERN:return translatePattern(n);case types.PROJECT:return translateProject(n,types.PROJECT);case types.REDUCED:return translateReduced(n);case types.SERVICE:return translateService(n);case types.SLICE:return translateSlice(n);case types.UNION:return translateUnion(n);case types.VALUES:return translateValues(n);case types.COMPOSITE_UPDATE:return translateCompositeUpdate(n);case types.DELETE_INSERT:return translateDeleteInsert(n);case types.LOAD:return translateLoad(n);case types.CLEAR:return translateClear(n);case types.CREATE:return translateCreate(n);case types.DROP:return translateDrop(n);case types.ADD:return translateAdd(n);case types.MOVE:return translateMove(n);case types.COPY:return translateCopy(n)}throw new Error(`Unknown Operation type ${n.type}`)}function translateExpression(n){switch(n.expressionType){case eTypes.AGGREGATE:return translateAggregateExpression(n);case eTypes.EXISTENCE:return translateExistenceExpression(n);case eTypes.NAMED:return translateNamedExpression(n);case eTypes.OPERATOR:return translateOperatorExpression(n);case eTypes.TERM:return translateTermExpression(n);case eTypes.WILDCARD:return translateWildcardExpression(n)}throw new Error(`Unknown Expression Operation type ${n.expressionType}`)}function translatePathComponent(n){switch(n.type){case types.ALT:return translateAlt(n);case types.INV:return translateInv(n);case types.LINK:return translateLink(n);case types.NPS:return translateNps(n);case types.ONE_OR_MORE_PATH:return translateOneOrMorePath(n);case types.SEQ:return translateSeq(n);case types.ZERO_OR_MORE_PATH:return translateZeroOrMorePath(n);case types.ZERO_OR_ONE_PATH:return translateZeroOrOnePath(n)}throw new Error(`Unknown Path type ${n.type}`)}function translateTerm(n){return(0,rdf_string_1.termToString)(n)}function translateAggregateExpression(n){const e={expression:translateExpression(n.expression),type:"aggregate",aggregation:n.aggregator,distinct:n.distinct};return n.separator&&(e.separator=n.separator),e}function translateExistenceExpression(n){return{type:"operation",operator:n.not?"notexists":"exists",args:util_1.default.flatten([translateOperation(n.input)])}}function translateNamedExpression(n){return{type:"functionCall",function:n.name,args:n.args.map(translateExpression)}}function translateOperatorExpression(n){if(n.operator==="desc"){const t={expression:translateExpression(n.args[0])};return t.descending=!0,t}const e={type:"operation",operator:n.operator,args:n.args.map(translateExpression)};return(e.operator==="in"||e.operator==="notin")&&(e.args=[e.args[0]].concat([e.args.slice(1)])),e}function translateTermExpression(n){return n.term}function translateWildcardExpression(n){return n.wildcard}function translateBoundAggregate(n){return n}function translateBgp(n){let e=n.patterns.map(translatePattern);return e.length===0?null:{type:"bgp",triples:e}}function translateConstruct(n){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:n.template.map(translatePattern),where:util_1.default.flatten([translateOperation(n.input)])}}function translateDistinct(n){let e=translateOperation(n.input);return e.patterns[0].distinct=!0,e}function translateExtend(n){return context.project?(context.extend.push(n),translateOperation(n.input)):util_1.default.flatten([translateOperation(n.input),{type:"bind",variable:n.variable,expression:translateExpression(n.expression)}])}function translateFrom(n){const e=translateOperation(n.input),t=e.patterns[0];return t.from={default:n.default,named:n.named},e}function translateFilter(n){return{type:"group",patterns:util_1.default.flatten([translateOperation(n.input),{type:"filter",expression:translateExpression(n.expression)}])}}function translateGraph(n){return{type:"graph",patterns:util_1.default.flatten([translateOperation(n.input)]),name:n.name}}function translateGroup(n){const e=translateOperation(n.input),t=n.aggregates.map(translateBoundAggregate);return context.aggregates.push(...t),context.group.push(...n.variables),e}function translateJoin(n){return util_1.default.flatten(n.input.map(translateOperation)).reduce((t,o)=>(o.type!=="bgp"||t.length==0||t[t.length-1].type!=="bgp"?t.push(o):t[t.length-1].triples.push(...o.triples),t),[])}function translateLeftJoin(n){const e={type:"optional",patterns:[translateOperation(n.input[1])]};return n.expression&&e.patterns.push({type:"filter",expression:translateExpression(n.expression)}),e.patterns=util_1.default.flatten(e.patterns),util_1.default.flatten([translateOperation(n.input[0]),e])}function translateMinus(n){let e=translateOperation(n.input[1]);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),util_1.default.flatten([translateOperation(n.input[0]),{type:"minus",patterns:e}])}function translateOrderBy(n){return context.order.push(...n.expressions),translateOperation(n.input)}function translatePath(n){return{type:"bgp",triples:[{subject:n.subject,predicate:translatePathComponent(n.predicate),object:n.object}]}}function translatePattern(n){return{subject:n.subject,predicate:n.predicate,object:n.object}}function replaceAggregatorVariables(n,e){let t=util_1.default.isSimpleTerm(n)?translateTerm(n):n;if(typeof t=="string"){if(e[t])return e[t]}else if(Array.isArray(n))n=n.map(o=>replaceAggregatorVariables(o,e));else for(let o of Object.keys(n))n[o]=replaceAggregatorVariables(n[o],e);return n}function translateProject(n,e){const t={type:"query",prefixes:{}},o=t;let l;e===types.PROJECT?(t.queryType="SELECT",l=n.variables):e===types.ASK?t.queryType="ASK":e===types.DESCRIBE&&(t.queryType="DESCRIBE",l=n.terms);const d=context.extend,u=context.group,a=context.aggregates,c=context.order;resetContext(),context.project=!0;let p=util_1.default.flatten([translateOperation(n.input)]);p.length===1&&p[0].type==="group"&&(p=p[0].patterns),t.where=p;let m={};for(let h of context.aggregates)m[translateTerm(h.variable)]=translateExpression(h);let y={};for(let h=context.extend.length-1;h>=0;--h){let T=context.extend[h];y[translateTerm(T.variable)]=replaceAggregatorVariables(translateExpression(T.expression),m)}if(context.group.length>0&&(o.group=context.group.map(h=>{let T=translateTerm(h);if(y[T]){let g=y[T];return delete y[T],{variable:h,expression:g}}return{expression:h}})),context.order.length>0&&(o.order=context.order.map(translateOperation).map(h=>h.descending?h:{expression:h})),l&&(o.variables=l.map(h=>{let T=translateTerm(h);return y[T]?{variable:h,expression:y[T]}:h}),o.variables.length===0&&(o.variables=[new sparqljs_1.Wildcard])),t.where.length>0&&t.where[t.where.length-1].type==="filter"){const h=t.where[t.where.length-1];objectContainsValues(h,Object.keys(m))&&(o.having=util_1.default.flatten([replaceAggregatorVariables(h.expression,m)]),t.where.splice(-1))}return context.extend=d,context.group=u,context.aggregates=a,context.order=c,{type:"group",patterns:[o]}}function objectContainsValues(n,e){return util_1.default.isSimpleTerm(n)?e.indexOf(translateTerm(n))>=0:Array.isArray(n)?n.some(t=>objectContainsValues(t,e)):n===Object(n)?Object.keys(n).some(t=>objectContainsValues(n[t],e)):e.indexOf(n)>=0}function translateReduced(n){let e=translateOperation(n.input);return e.patterns[0].reduced=!0,e}function translateService(n){let e=translateOperation(n.input);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),{type:"service",name:n.name,silent:n.silent,patterns:e}}function translateSlice(n){let e=translateOperation(n.input),t=e;return e.type&&e.type==="group"&&(t=e.patterns[0]),n.start!==0&&(t.offset=n.start),n.length!==void 0&&(t.limit=n.length),e}function translateUnion(n){return{type:"union",patterns:util_1.default.flatten(n.input.map(translateOperation))}}function translateValues(n){return{type:"values",values:n.bindings.map(e=>{let t={};for(let o of n.variables){let l=`?${o.value}`;e[l]?t[l]=e[l]:t[l]=void 0}return t})}}function translateAlt(n){const e=n.input.map(translatePathComponent);return e.every(t=>"pathType"in t&&t.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:util_1.default.flatten(e.map(t=>t.items))}]}:{type:"path",pathType:"|",items:e}}function translateInv(n){if(n.path.type===types.NPS){const e=n.path.iris.map(t=>({type:"path",pathType:"^",items:[t]}));return e.length<=1?{type:"path",pathType:"!",items:e}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e}]}}return{type:"path",pathType:"^",items:[translatePathComponent(n.path)]}}function translateLink(n){return n.iri}function translateNps(n){return n.iris.length<=1?{type:"path",pathType:"!",items:n.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:n.iris}]}}function translateOneOrMorePath(n){return{type:"path",pathType:"+",items:[translatePathComponent(n.path)]}}function translateSeq(n){return{type:"path",pathType:"/",items:n.input.map(translatePathComponent)}}function translateZeroOrMorePath(n){return{type:"path",pathType:"*",items:[translatePathComponent(n.path)]}}function translateZeroOrOnePath(n){return{type:"path",pathType:"?",items:[translatePathComponent(n.path)]}}function translateCompositeUpdate(n){const e=n.updates.map(t=>translateOperation(t).updates[0]);return{prefixes:{},type:"update",updates:e}}function translateDeleteInsert(n){var e;let t=n.where,o;if(t&&t.type===types.FROM){let d=t;t=d.input,o={default:d.default,named:d.named}}const l=[{updateType:"insertdelete",delete:convertUpdatePatterns(n.delete||[]),insert:convertUpdatePatterns(n.insert||[])}];if(o&&(l[0].using=o),!t||t.type===types.BGP&&t.patterns.length===0)l[0].where=[];else{const d={};let u=translateOperation(removeQuadsRecursive(t,d));u.type==="group"?l[0].where=u.patterns:l[0].where=[u];const a=Object.keys(d);if(a.length>0){if(a.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");const c=(e=d[a[0]])===null||e===void 0?void 0:e.graph;c&&c.value!==""&&(l[0].where=[{type:"graph",patterns:l[0].where,name:c}])}}return!n.delete&&!n.where?(l[0].updateType="insert",delete l[0].delete,delete l[0].where):!n.insert&&!n.where?(delete l[0].insert,delete l[0].where,n.delete.some(d=>d.subject.termType==="Variable"||d.predicate.termType==="Variable"||d.object.termType==="Variable")?l[0].updateType="deletewhere":l[0].updateType="delete"):!n.insert&&n.where&&n.where.type==="bgp"&&(0,rdf_isomorphic_1.isomorphic)(n.delete,n.where.patterns)&&(delete l[0].where,l[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:l}}function translateLoad(n){const e=[{type:"load",silent:Boolean(n.silent),source:n.source}];return n.destination&&(e[0].destination=n.destination),{prefixes:{},type:"update",updates:e}}function translateClear(n){return translateClearCreateDrop(n,"clear")}function translateCreate(n){return translateClearCreateDrop(n,"create")}function translateDrop(n){return translateClearCreateDrop(n,"drop")}function translateClearCreateDrop(n,e){const t=[{type:e,silent:Boolean(n.silent)}];return n.source==="DEFAULT"?t[0].graph={default:!0}:n.source==="NAMED"?t[0].graph={named:!0}:n.source==="ALL"?t[0].graph={all:!0}:t[0].graph={type:"graph",name:n.source},{prefixes:{},type:"update",updates:t}}function translateAdd(n){return translateUpdateGraphShortcut(n,"add")}function translateMove(n){return translateUpdateGraphShortcut(n,"move")}function translateCopy(n){return translateUpdateGraphShortcut(n,"copy")}function translateUpdateGraphShortcut(n,e){const t=[{type:e,silent:Boolean(n.silent)}];return t[0].source=n.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:n.source},t[0].destination=n.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:n.destination},{prefixes:{},type:"update",updates:t}}function convertUpdatePatterns(n){if(!n)return[];const e={};return n.forEach(t=>{const o=t.graph.value;e[o]||(e[o]=[]),e[o].push(t)}),Object.keys(e).map(t=>t===""?{type:"bgp",triples:e[t].map(translatePattern)}:{type:"graph",triples:e[t].map(translatePattern),name:e[t][0].graph})}function removeQuads(n){return removeQuadsRecursive(n,{})}function removeQuadsRecursive(n,e){if(Array.isArray(n))return n.map(u=>removeQuadsRecursive(u,e));if(!n.type||n.type===types.DELETE_INSERT)return n;if((n.type===types.PATTERN||n.type===types.PATH)&&n.graph)return e[n.graph.value]||(e[n.graph.value]={graph:n.graph,values:[]}),e[n.graph.value].values.push(n),n;const t={},o={},l={};for(let u of Object.keys(n)){const a={};t[u]=removeQuadsRecursive(n[u],a);const c=Object.keys(a);if(c.length>1){let p=potentialGraphFromPatterns(a[c[0]].values);for(let m=1;m<c.length;++m){const y=potentialGraphFromPatterns(a[c[m]].values);p=factory.createJoin([p,y])}return c.map(m=>delete a[m]),p}else if(c.length===1){const p=a[c[0]].graph;o[u]=p,l[p.value]=p}}const d=Object.keys(l);if(d.length>0)if(d.length===1&&n.type!==types.PROJECT)e[d[0]]={graph:l[d[0]],values:[t]};else for(let u of Object.keys(o))o[u].value.length>0&&(t[u]=factory.createGraph(t[u],o[u]));return t}function potentialGraphFromPatterns(n){const e=factory.createBgp(n),t=n[0].graph;return t.value.length===0?e:factory.createGraph(e,t)}(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(m,y,h,T){T===void 0&&(T=h);var g=Object.getOwnPropertyDescriptor(y,h);(!g||("get"in g?!y.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return y[h]}}),Object.defineProperty(m,T,g)}:function(m,y,h,T){T===void 0&&(T=h),m[T]=y[h]}),t=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),o=commonjsGlobal&&commonjsGlobal.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var h in m)h!=="default"&&Object.prototype.hasOwnProperty.call(m,h)&&e(y,m,h);return t(y,m),y},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.toSparqlJs=n.toSparql=n.Factory=n.Algebra=n.translate=void 0;const d=l(sparqlAlgebra);n.translate=d.default;const u=o(algebra);n.Algebra=u;const a=l(factory$2);n.Factory=a.default;const c=sparql;Object.defineProperty(n,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(n,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const p=l(util);n.Util=p.default})(sparqlalgebrajs);var index=getDefaultExportFromCjs(sparqlalgebrajs),__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__=_mergeNamespaces({__proto__:null,default:index},[sparqlalgebrajs]),__quadstore_comunica_modules__={"../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorAbstractPath=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=t("../node_modules/rdf-data-factory/index.js"),c=t("../node_modules/rdf-string/index.js"),p=t("sparqlalgebrajs"),m=t("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),y=new a.DataFactory,h=new o.BindingsFactory;class T extends l.ActorQueryOperationTypedMediated{constructor(v,S){super(v,"path"),this.predicateType=S}async testOperation(v,S){if(v.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(v,S){return S?v&&(v.subject.value===S||v.object.value===S)?this.generateVariable(v,`${S}b`):y.variable(S):this.generateVariable(v,"b")}async isPathArbitraryLengthDistinct(v,S){return v.get(d.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(v=v.set(d.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:v,operation:void 0}):(v=v.set(d.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:v,operation:l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:T.FACTORY.createDistinct(S),context:v}))})}async predicateStarGraphVariable(v,S,x,w,E){const O=this.generateVariable(T.FACTORY.createPath(v,x,S,w)),I=T.FACTORY.createUnion([T.FACTORY.createPattern(v,O,S,w),T.FACTORY.createPattern(S,O,v,w)]),z=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:E,operation:I})),Q=new Set;return{bindingsStream:new u.MultiTransformIterator(z.bindingsStream,{multiTransform:H=>{const B=H.get(w);return Q.has(B.value)?new u.EmptyIterator:(Q.add(B.value),new u.TransformIterator(async()=>{const M=new u.BufferedIterator;return await this.getObjectsPredicateStar(v,x,B,E,{},M,{count:0}),M.transform({transform(V,$,te){te(h.bindings([[S,V],[w,B]])),$()}})},{maxBufferSize:128}))},autoStart:!1}),metadata:z.metadata}}async getObjectsPredicateStarEval(v,S,x,w,E,O){if(w.termType==="Variable")return this.predicateStarGraphVariable(v,x,S,w,E);const I=new m.PathVariableObjectIterator(v,S,w,E,this.mediatorQueryOperation,O);return{bindingsStream:I.transform({autoStart:!1,transform(Q,W,H){H(h.bindings([[x,Q]])),W()}}),metadata:()=>new Promise(Q=>I.getProperty("metadata",W=>Q(W())))}}async getObjectsPredicateStar(v,S,x,w,E,O,I){const z=(0,c.termToString)(v);if(E[z])return;O._push(v),E[z]=v,I.count++;const Q=this.generateVariable(),W=T.FACTORY.createPath(v,S,Q,x),H=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:W,context:w}));return H.bindingsStream.on("data",async B=>{const M=B.get(Q);await this.getObjectsPredicateStar(M,S,x,w,E,O,I)}),H.bindingsStream.on("end",()=>{--I.count===0&&O.close()}),H.metadata}async getSubjectAndObjectBindingsPredicateStar(v,S,x,w,E,O,I,z,Q,W,H){const B=(0,c.termToString)(w)+(0,c.termToString)(O);if(Q[B])return;if(H.count++,Q[B]=!0,W._push(h.bindings([[v,x],[S,w]])),B in z){const V=await z[B];for(const $ of V)await this.getSubjectAndObjectBindingsPredicateStar(v,S,x,$,E,O,I,z,Q,W,H);--H.count===0&&W.close();return}const M=new Promise(async(V,$)=>{const te=[],J=this.generateVariable(),Z=T.FACTORY.createPath(w,E,J,O),Y=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:Z,context:I}));Y.bindingsStream.on("data",async oe=>{const ie=oe.get(J);te.push(ie),await this.getSubjectAndObjectBindingsPredicateStar(v,S,x,ie,E,O,I,z,Q,W,H)}),Y.bindingsStream.on("error",$),Y.bindingsStream.on("end",()=>{--H.count===0&&W.close(),V(te)})});z[B]=M}}e.ActorAbstractPath=T,T.FACTORY=new p.Factory},"../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathVariableObjectIterator=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),d=t("../node_modules/rdf-data-factory/index.js"),u=t("../node_modules/rdf-string/index.js"),a=t("sparqlalgebrajs"),c=new d.DataFactory,p=new a.Factory;class m extends l.BufferedIterator{constructor(h,T,g,v,S,x,w=16){super({autoStart:!0}),this.subject=h,this.predicate=T,this.graph=g,this.context=v,this.mediatorQueryOperation=S,this.maxRunningOperations=w,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this._push(this.subject,x)}_end(h){for(const T of this.runningOperations)T.destroy();super._end(h)}_push(h,T=!0){let g;if(T&&(g=(0,u.termToString)(h),this.termHashes.has(g)))return;const v=c.variable("b");this.pendingOperations.push({variable:v,operation:p.createPath(h,this.predicate,v,this.graph)}),g&&(this.termHashes.set(g,h),super._push(h))}_read(h,T){const g=this;(async function(){for(;g.runningOperations.length<g.maxRunningOperations&&g.pendingOperations.length!==0;){const x=g.pendingOperations.pop(),w=o.ActorQueryOperation.getSafeBindings(await g.mediatorQueryOperation.mediate({operation:x.operation,context:g.context})),E=w.bindingsStream.transform({autoStart:!1,transform(O,I,z){const Q=O.get(x.variable);z(Q),I()}});E.done||(g.runningOperations.push(E),E.on("error",O=>g.destroy(O)),E.on("readable",()=>{g.readable=!0,g._fillBufferAsync()}),E.on("end",()=>{g.runningOperations.splice(g.runningOperations.indexOf(E),1),g.readable=!0,g._fillBufferAsync()})),g.setProperty("metadata",w.metadata)}let v=0,S;for(;v!==(v=h);)for(let x=0;x<g.runningOperations.length&&h>0;x++)(S=g.runningOperations[x].read())!==null&&(h--,g._push(S));g.runningOperations.length===0&&g.pendingOperations.length===0&&g.close()})().then(()=>{T()},v=>this.destroy(v))}}e.PathVariableObjectIterator=m},"../node_modules/@comunica/actor-abstract-path/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js"),e),l(t("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),e)},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocessSourceToDestination=void 0;const o=t("../node_modules/@comunica/bus-context-preprocess/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js");class d extends o.ActorContextPreprocess{constructor(a){super(a)}async test(a){return!0}async run(a){if(a.context.get(l.KeysRdfResolveQuadPattern.sources)&&!a.context.get(l.KeysRdfUpdateQuads.destination)){const c=a.context.get(l.KeysRdfResolveQuadPattern.sources);if(c.length===1)return{context:a.context.set(l.KeysRdfUpdateQuads.destination,c[0])}}return a}}e.ActorContextPreprocessSourceToDestination=d},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js"),e)},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindingsSha1=void 0;const o=t("../node_modules/@comunica/bus-hash-bindings/lib/index.js"),l=t("../node_modules/hash.js/lib/hash.js"),d=t("../node_modules/rdf-string/index.js"),u=t("../node_modules/canonicalize/lib/canonicalize.js");class a extends o.ActorHashBindings{async test(p){if(!p.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(p){return{hashFunction:m=>(0,l.sha1)().update(u(Object.fromEntries([...m].map(([y,h])=>[(0,d.termToString)(y),(0,d.termToString)(h)])))).digest("hex"),hashCollisions:!0}}}e.ActorHashBindingsSha1=a},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js"),e)},"../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQuery=void 0;const o=t("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js");typeof browserExports>"u"&&(t.g.process=t("./require-empty.js"));class l extends o.ActorInitQueryBase{}e.ActorInitQuery=l},"../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQueryBase=void 0;const o=t("../node_modules/@comunica/bus-init/lib/index.js");class l extends o.ActorInit{constructor(u){u.contextKeyShortcutsExtensions?.forEach(a=>{if(Object.keys(u.contextKeyShortcuts).some(c=>Object.keys(a).includes(c)))throw new Error("Duplicate keys found while adding `contextKeyShortcutsExtensions`.");u.contextKeyShortcuts={...u.contextKeyShortcuts,...a}}),super(u)}async test(u){return!0}async run(u){throw new Error("ActorInitSparql#run is not supported in the browser.")}}e.ActorInitQueryBase=l},"../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryPhysicalQueryPlanLogger=void 0;const o=t("../node_modules/rdf-string/index.js");class l{constructor(){this.children=new Map}logOperation(u,a,c,p,m,y){const h={actor:m,logicalOperator:u,physicalOperator:a,rawNode:c,children:[],metadata:y};if(this.children.set(c,h.children),this.rootNode){if(!p)throw new Error("Detected more than one parent-less node");const T=this.children.get(p);if(!T)throw new Error("Could not find parent node");T.push(h)}else{if(p)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=h}}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(u){return{logical:u.logicalOperator,physical:u.physicalOperator,...this.getLogicalMetadata(u.rawNode),...u.metadata,...u.children.length>0?{children:u.children.map(a=>this.planNodeToJson(a))}:{}}}getLogicalMetadata(u){if("type"in u){const a=u;switch(a.type){case"pattern":return{pattern:this.quadToString(a)};case"project":return{variables:a.variables.map(c=>c.value)}}}return{}}quadToString(u){return`${(0,o.termToString)(u.subject)} ${(0,o.termToString)(u.predicate)} ${(0,o.termToString)(u.object)}${u.graph.termType==="DefaultGraph"?"":` ${(0,o.termToString)(u.graph)}`}`}}e.MemoryPhysicalQueryPlanLogger=l},"../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/@comunica/core/lib/index.js"),u=t("../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js");class a{constructor(p){this.actorInitQuery=p}async queryBindings(p,m){return this.queryOfType(p,m,"bindings")}async queryQuads(p,m){return this.queryOfType(p,m,"quads")}async queryBoolean(p,m){return this.queryOfType(p,m,"boolean")}async queryVoid(p,m){return this.queryOfType(p,m,"void")}async queryOfType(p,m,y){const h=await this.query(p,m);if(h.resultType===y)return h.execute();throw new Error(`Query result type '${y}' was expected, while '${h.resultType}' was found.`)}async query(p,m){const y=await this.queryOrExplain(p,m);if("explain"in y)throw new Error("Tried to explain a query when in query-only mode");return y}async explain(p,m,y){return m.explain=y,await this.queryOrExplain(p,m)}async queryOrExplain(p,m){m=m||{};for(const O in m)this.actorInitQuery.contextKeyShortcuts[O]&&(m[this.actorInitQuery.contextKeyShortcuts[O]]=m[O],delete m[O]);let y=new d.ActionContext(m),h={language:"sparql",version:"1.1"};y.has(l.KeysInitQuery.queryFormat)&&(h=y.get(l.KeysInitQuery.queryFormat),y=y.delete(l.KeysInitQuery.queryFormat),h.language==="graphql"&&(y=y.setDefault(l.KeysInitQuery.graphqlSingularizeVariables,{})));const T=y.get(l.KeysInitQuery.baseIRI);y=y.setDefault(l.KeysInitQuery.queryTimestamp,new Date).setDefault(l.KeysRdfResolveQuadPattern.sourceIds,new Map).setDefault(l.KeysCore.log,this.actorInitQuery.logger),y=(await this.actorInitQuery.mediatorContextPreprocess.mediate({context:y})).context;const g=y.get(l.KeysInitQuery.explain);let v;if(typeof p=="string"){y=y.set(l.KeysInitQuery.queryString,p);const O=await this.actorInitQuery.mediatorQueryParse.mediate({context:y,query:p,queryFormat:h,baseIRI:T});v=O.operation,O.baseIRI&&(y=y.set(l.KeysInitQuery.baseIRI,O.baseIRI))}else v=p;if(g==="parsed")return{explain:!0,type:g,data:v};y.has(l.KeysInitQuery.initialBindings)&&(v=(0,o.materializeOperation)(v,y.get(l.KeysInitQuery.initialBindings)),y=y.delete(l.KeysInitQuery.queryString));const S=await this.actorInitQuery.mediatorOptimizeQueryOperation.mediate({context:y,operation:v});if(v=S.operation,y=S.context||y,g==="logical")return{explain:!0,type:g,data:v};y=y.set(l.KeysInitQuery.query,v);let x;g==="physical"&&(x=new u.MemoryPhysicalQueryPlanLogger,y=y.set(l.KeysInitQuery.physicalQueryPlanLogger,x));const w=await this.actorInitQuery.mediatorQueryOperation.mediate({context:y,operation:v});w.context=y;const E=a.internalToFinalResult(w);if(x){switch(E.resultType){case"bindings":await(await E.execute()).toArray();break;case"quads":await(await E.execute()).toArray();break;case"boolean":await E.execute();break;case"void":await E.execute();break}return{explain:!0,type:g,data:x.toJson()}}return E}async getResultMediaTypes(p){return p=d.ActionContext.ensureActionContext(p),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:p,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(p){return p=d.ActionContext.ensureActionContext(p),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:p,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(p,m,y){if(y=d.ActionContext.ensureActionContext(y),!m)switch(p.resultType){case"bindings":m="application/json";break;case"quads":m="application/trig";break;default:m="simple";break}const h={...await a.finalToInternalResult(p),context:y};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:y,handle:h,handleMediaType:m})).handle}invalidateHttpCache(p,m){return m=d.ActionContext.ensureActionContext(m),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:p,context:m})}static internalToFinalResult(p){switch(p.type){case"bindings":return{resultType:"bindings",execute:async()=>p.bindingsStream,metadata:async()=>await p.metadata(),context:p.context};case"quads":return{resultType:"quads",execute:async()=>p.quadStream,metadata:async()=>await p.metadata(),context:p.context};case"boolean":return{resultType:"boolean",execute:async()=>p.execute(),context:p.context};case"void":return{resultType:"void",execute:async()=>p.execute(),context:p.context}}}static async finalToInternalResult(p){switch(p.resultType){case"bindings":return{type:"bindings",bindingsStream:await p.execute(),metadata:async()=>await p.metadata()};case"quads":return{type:"quads",quadStream:await p.execute(),metadata:async()=>await p.metadata()};case"boolean":return{type:"boolean",execute:()=>p.execute()};case"void":return{type:"void",execute:()=>p.execute()}}}}e.QueryEngineBase=a},"../node_modules/@comunica/actor-init-query/lib/index-browser.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(u,a,c,p){p===void 0&&(p=c);var m=Object.getOwnPropertyDescriptor(a,c);(!m||("get"in m?!a.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(u,p,m)}:function(u,a,c,p){p===void 0&&(p=c),u[p]=a[c]}),l=this&&this.__exportStar||function(u,a){for(var c in u)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&o(a,u,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0,l(t("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js"),e),l(t("../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js"),e);var d=t("../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js");Object.defineProperty(e,"QueryEngineBase",{enumerable:!0,get:function(){return d.QueryEngineBase}})},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationBgpToJoin=void 0;const o=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorOptimizeQueryOperation{async test(a){return!0}async run(a){return{operation:l.Util.mapOperation(a.operation,{bgp(p,m){return{recurse:!1,result:m.createJoin(p.patterns)}}}),context:a.context}}}e.ActorOptimizeQueryOperationBgpToJoin=d},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinBgp=void 0;const o=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorOptimizeQueryOperation{async test(a){return!0}async run(a){return{operation:l.Util.mapOperation(a.operation,{join(p,m){return p.input.every(y=>y.type==="bgp")?{recurse:!1,result:m.createBgp(p.input.flatMap(y=>y.patterns))}:{recurse:!1,result:p}}}),context:a.context}}}e.ActorOptimizeQueryOperationJoinBgp=d},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinConnected=void 0;const o=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorOptimizeQueryOperation{async test(a){return!0}async run(a){return{operation:l.Util.mapOperation(a.operation,{join(p,m){return{recurse:!1,result:d.cluster(p,m)}}}),context:a.context}}static cluster(a,c){const p=a.input.map(T=>({inScopeVariables:Object.fromEntries(l.Util.inScopeVariables(T).map(g=>[g.value,!0])),entries:[T]}));let m,y=p;do m=y,y=d.clusterIteration(m);while(m.length!==y.length);const h=y.map(T=>c.createJoin(T.entries));return h.length===1?h[0]:c.createJoin(h,!1)}static clusterIteration(a){const c=[];for(const p of a){let m=!1;for(const y of c)if(d.haveOverlappingVariables(p.inScopeVariables,y.inScopeVariables)){y.entries=[...y.entries,...p.entries],y.inScopeVariables={...y.inScopeVariables,...p.inScopeVariables},m=!0;break}m||c.push({inScopeVariables:p.inScopeVariables,entries:p.entries})}return c}static haveOverlappingVariables(a,c){for(const p of Object.keys(a))if(c[p])return!0;return!1}}e.ActorOptimizeQueryOperationJoinConnected=d},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js"),e)},"../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAsk=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"ask")}async testOperation(u,a){return!0}async runOperation(u,a){const c=await this.mediatorQueryOperation.mediate({operation:u.input,context:a}),{bindingsStream:p}=o.ActorQueryOperation.getSafeBindings(c);return{type:"boolean",execute:async()=>(await p.take(1).toArray()).length===1}}}e.ActorQueryOperationAsk=l},"../node_modules/@comunica/actor-query-operation-ask/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js"),e)},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationBgpJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"bgp")}async testOperation(a,c){return!0}async runOperation(a,c){return this.mediatorQueryOperation.mediate({operation:d.FACTORY.createJoin(a.patterns),context:c})}}e.ActorQueryOperationBgpJoin=d,d.FACTORY=new l.Factory},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationConstruct=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/rdf-terms/index.js"),u=t("sparqlalgebrajs"),a=t("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js");class c extends o.ActorQueryOperationTypedMediated{constructor(m){super(m,"construct")}static getVariables(m){return(0,d.uniqTerms)([].concat.apply([],m.map(y=>(0,d.getVariables)((0,d.getTerms)(y)))))}async testOperation(m,y){return!0}async runOperation(m,y){const h=c.getVariables(m.template),T={type:u.Algebra.types.PROJECT,input:m.input,variables:h},g=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:T,context:y})),v=y.get(l.KeysQueryOperation.localizeBlankNodes),S=v!==void 0?v:!0,x=new a.BindingsToQuadsIterator(m.template,g.bindingsStream,S);return{metadata:()=>g.metadata().then(E=>({...E,order:void 0,cardinality:{type:E.cardinality.type,value:E.cardinality.value*m.template.length},canContainUndefs:!1,availableOrders:void 0})),quadStream:x,type:"quads"}}}e.ActorQueryOperationConstruct=c},"../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsToQuadsIterator=void 0;const o=t("asynciterator"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("../node_modules/rdf-terms/index.js"),u=new l.DataFactory;class a extends o.MultiTransformIterator{constructor(p,m,y=!0){super(m,{autoStart:!1}),this.template=p,this.localizeBlankNodes=y,this.blankNodeCounter=0}static bindTerm(p,m){return m.termType==="Variable"?p.get(m):m}static bindQuad(p,m){try{return(0,d.mapTerms)(m,y=>{const h=a.bindTerm(p,y);if(!h)throw new Error("Unbound term");return h})}catch{}}static localizeBlankNode(p,m){return m.termType==="BlankNode"?u.blankNode(`${m.value}${p}`):m}static localizeQuad(p,m){return(0,d.mapTerms)(m,y=>a.localizeBlankNode(p,y))}bindTemplate(p,m,y){let h=m.map(T=>a.bindQuad.bind(null,p)(T)).filter(Boolean);return this.localizeBlankNodes&&(h=h.map(a.localizeQuad.bind(null,y))),h}_createTransformer(p){return new o.ArrayIterator(this.bindTemplate(p,this.template,this.blankNodeCounter++))}}e.BindingsToQuadsIterator=a},"../node_modules/@comunica/actor-query-operation-construct/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js"),e),l(t("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js"),e)},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDescribeSubject=void 0;const o=t("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=t("../node_modules/rdf-data-factory/index.js"),c=t("sparqlalgebrajs"),p=new a.DataFactory;class m extends l.ActorQueryOperationTypedMediated{constructor(h){super(h,"describe")}async testOperation(h,T){return!0}async runOperation(h,T){const g=h.terms.filter(E=>E.termType!=="Variable").map(E=>{const O=[p.quad(E,p.variable("__predicate"),p.variable("__object"))];return O.forEach(z=>z.type="pattern"),{input:{type:c.Algebra.types.BGP,patterns:O},template:O,type:"construct"}});if(g.length!==h.terms.length){let E=[];h.terms.filter(O=>O.termType==="Variable").forEach((O,I)=>{const z=[p.quad(O,p.variable(`__predicate${I}`),p.variable(`__object${I}`))];z.forEach(Q=>Q.type="pattern"),E=[...E,...z]}),g.push({input:{type:c.Algebra.types.JOIN,input:[h.input,{type:c.Algebra.types.BGP,patterns:E}]},template:E,type:c.Algebra.types.CONSTRUCT})}const v=T.get(d.KeysQueryOperation.localizeBlankNodes);T=T.set(d.KeysQueryOperation.localizeBlankNodes,v!==void 0?v:!1);const S=(await Promise.all(g.map(E=>this.mediatorQueryOperation.mediate({operation:E,context:T})))).map(l.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new u.UnionIterator(S.map(E=>E.quadStream),{autoStart:!1}),metadata:()=>Promise.all(S.map(E=>E.metadata())).then(E=>o.ActorQueryOperationUnion.unionMetadata(E,!1))}}}e.ActorQueryOperationDescribeSubject=m},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js"),e)},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDistinctHash=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"distinct")}async testOperation(u,a){return!0}async runOperation(u,a){const c=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:u.input,context:a}));return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(a)),metadata:c.metadata}}async newHashFilter(u){const{hashFunction:a}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:u}),c={};return p=>{const m=a(p);return!(m in c)&&(c[m]=!0)}}}e.ActorQueryOperationDistinctHash=l},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js"),e)},"../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationExtend=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/sparqlee/dist/index.js");class u extends l.ActorQueryOperationTypedMediated{constructor(c){super(c,"extend")}async testOperation(c,p){return Boolean(new d.AsyncEvaluator(c.expression,l.ActorQueryOperation.getAsyncExpressionContext(p,this.mediatorQueryOperation))),!0}async runOperation(c,p){const{expression:m,input:y,variable:h}=c,T=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:y,context:p})),g={...l.ActorQueryOperation.getAsyncExpressionContext(p,this.mediatorQueryOperation)},v=new d.AsyncEvaluator(m,g),S=async(w,E,O)=>{try{const I=await v.evaluate(w),z=w.set(h,I);O(z)}catch(I){(0,d.isExpressionError)(I)?(O(w),this.logWarn(p,`Expression error for extend operation with bindings '${(0,o.bindingsToString)(w)}'`)):x.emit("error",I)}E()},x=T.bindingsStream.transform({autoStart:!1,transform:S});return{type:"bindings",bindingsStream:x,async metadata(){const w=await T.metadata();return{...w,variables:[...w.variables,h]}}}}}e.ActorQueryOperationExtend=u},"../node_modules/@comunica/actor-query-operation-extend/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js"),e)},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFilterSparqlee=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/sparqlee/dist/index.js");class u extends l.ActorQueryOperationTypedMediated{constructor(c){super(c,"filter")}async testOperation(c,p){const m={...l.ActorQueryOperation.getAsyncExpressionContext(p,this.mediatorQueryOperation)};return new d.AsyncEvaluator(c.expression,m),!0}async runOperation(c,p){const m=await this.mediatorQueryOperation.mediate({operation:c.input,context:p}),y=l.ActorQueryOperation.getSafeBindings(m);l.ActorQueryOperation.validateQueryOutput(y,"bindings");const h={...l.ActorQueryOperation.getAsyncExpressionContext(p,this.mediatorQueryOperation)},T=new d.AsyncEvaluator(c.expression,h),g=async(S,x,w)=>{try{await T.evaluateAsEBV(S)&&w(S)}catch(E){(0,d.isExpressionError)(E)?this.logWarn(p,"Error occurred while filtering.",()=>({error:E,bindings:(0,o.bindingsToString)(S)})):v.emit("error",E)}x()},v=y.bindingsStream.transform({transform:g});return{type:"bindings",bindingsStream:v,metadata:y.metadata}}}e.ActorQueryOperationFilterSparqlee=u},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFromQuad=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"from")}static copyOperation(a,c){const p={};for(const m of Object.keys(a))Array.isArray(a[m])&&m!=="template"?m==="variables"?p[m]=a[m]:p[m]=a[m].map(c):d.ALGEBRA_TYPES.includes(a[m].type)?p[m]=c(a[m]):p[m]=a[m];return p}static applyOperationDefaultGraph(a,c){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){if(a.type==="bgp")return d.joinOperations(a.patterns.map(m=>{if(m.graph.termType!=="DefaultGraph")return d.FACTORY.createBgp([m]);const y=c.map(h=>d.FACTORY.createBgp([d.FACTORY.createPattern(m.subject,m.predicate,m.object,h)]));return d.unionOperations(y)}));if(a.graph.termType!=="DefaultGraph")return a;const p=c.map(m=>a.type==="path"?d.FACTORY.createPath(a.subject,a.predicate,a.object,m):d.FACTORY.createPattern(a.subject,a.predicate,a.object,m));return d.unionOperations(p)}return d.copyOperation(a,p=>this.applyOperationDefaultGraph(p,c))}static applyOperationNamedGraph(a,c,p){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){const m=a.type==="bgp"?a.patterns[0].graph:a.graph;if(m.termType==="DefaultGraph")return{type:l.Algebra.types.BGP,patterns:[]};if(m.termType==="Variable"){if(c.length===1){const h=c[0],T={};T[`?${m.value}`]=h;const g=d.FACTORY.createValues([m],[T]);let v;return a.type==="bgp"?v=d.FACTORY.createBgp(a.patterns.map(S=>d.FACTORY.createPattern(S.subject,S.predicate,S.object,h))):a.type==="path"?v=d.FACTORY.createPath(a.subject,a.predicate,a.object,h):v=d.FACTORY.createPattern(a.subject,a.predicate,a.object,h),d.FACTORY.createJoin([g,v])}return d.unionOperations(c.map(h=>d.applyOperationNamedGraph(a,[h],p)))}return[...c,...p].some(h=>h.equals(m))?a:{type:l.Algebra.types.BGP,patterns:[]}}return d.copyOperation(a,m=>this.applyOperationNamedGraph(m,c,p))}static joinOperations(a){if(a.length===1)return a[0];if(a.length>1)return d.FACTORY.createJoin(a);throw new Error("A join can only be applied on at least one operation")}static unionOperations(a){if(a.length===1)return a[0];if(a.length>1)return d.FACTORY.createUnion(a);throw new Error("A union can only be applied on at least one operation")}static createOperation(a){let c=a.input;return a.default.length>0&&(c=d.applyOperationDefaultGraph(c,a.default)),(a.named.length>0||a.default.length>0)&&(c=d.applyOperationNamedGraph(c,a.named,a.default)),c}async testOperation(a,c){return!0}async runOperation(a,c){const p=d.createOperation(a);return this.mediatorQueryOperation.mediate({operation:p,context:c})}}e.ActorQueryOperationFromQuad=d,d.FACTORY=new l.Factory,d.ALGEBRA_TYPES=Object.keys(l.Algebra.types).map(u=>l.Algebra.types[u])},"../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js"),e)},"../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationGroup=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),d=t("../node_modules/sparqlee/dist/index.js"),u=t("../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js");class a extends o.ActorQueryOperationTypedMediated{constructor(p){super(p,"group")}async testOperation(p,m){for(const y of p.aggregates)new d.AsyncEvaluator(y.expression,o.ActorQueryOperation.getAsyncExpressionContext(m));return!0}async runOperation(p,m){const{hashFunction:y}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:m}),{input:h,aggregates:T}=p,g=await this.mediatorQueryOperation.mediate({operation:h,context:m}),v=o.ActorQueryOperation.getSafeBindings(g),S=[...p.variables,...T.map(w=>w.variable)],x=o.ActorQueryOperation.getAsyncExpressionContext(m);return new Promise((w,E)=>{const O=new u.GroupsState(y,p,x);v.bindingsStream.on("end",async()=>{try{const I=new l.ArrayIterator(await O.collectResults(),{autoStart:!1});w({type:"bindings",bindingsStream:I,metadata:async()=>({...await v.metadata(),variables:S})})}catch(I){E(I)}}),v.bindingsStream.on("error",E),v.bindingsStream.on("data",I=>{O.consumeBindings(I).catch(E)})})}}e.ActorQueryOperationGroup=a},"../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupsState=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("../node_modules/sparqlee/dist/index.js"),u=new l.DataFactory,a=new o.BindingsFactory;class c{constructor(m,y,h){this.hashFunction=m,this.pattern=y,this.sparqleeConfig=h,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(T=>T.value)),this.distinctHashes=y.aggregates.some(({distinct:T})=>T)?new Map:null,this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(m){const y=this.resultCheck();if(y)return y;this.waitCounter++;const h=m.filter((S,x)=>this.groupVariables.has(x.value)),T=this.hashBindings(h);let g=this.groupsInitializer.get(T),v;if(!g)g=(async()=>{const S={};if(await Promise.all(this.pattern.aggregates.map(async w=>{const E=w.variable.value;S[E]=new d.AsyncAggregateEvaluator(w,this.sparqleeConfig),await S[E].put(m)})),this.distinctHashes){const w=this.hashBindings(m);this.distinctHashes.set(T,new Set([w]))}const x={aggregators:S,bindings:h};return this.groups.set(T,x),this.subtractWaitCounterAndCollect(),x})(),this.groupsInitializer.set(T,g),v=g;else{const S=g;v=(async()=>{const x=await S;await Promise.all(this.pattern.aggregates.map(async w=>{if(w.distinct){const O=this.hashBindings(m);if(this.distinctHashes.get(T).has(O))return;this.distinctHashes.get(T).add(O)}const E=w.variable.value;await x.aggregators[E].put(m)}))})().then(()=>{this.subtractWaitCounterAndCollect()})}return v}subtractWaitCounterAndCollect(){--this.waitCounter===0&&this.handleResultCollection()}handleResultCollection(){let m=[...this.groups].map(([y,h])=>{const{bindings:T,aggregators:g}=h;let v=T;for(const S in g){const x=g[S].result();x&&(v=v.set(u.variable(S),x))}return v});if(m.length===0&&this.groupVariables.size===0){const y=[];for(const h of this.pattern.aggregates){const T=h.variable,g=d.AsyncAggregateEvaluator.emptyValue(h);g!==void 0&&y.push([T,g])}m=[a.bindings(y)]}this.waitResolver(m)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const m=this.resultCheck();if(m)return m;this.resultHasBeenCalled=!0;const y=new Promise(h=>{this.waitResolver=h});return this.subtractWaitCounterAndCollect(),y}hashBindings(m){return this.hashFunction(m)}}e.GroupsState=c},"../node_modules/@comunica/actor-query-operation-group/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js"),e)},"../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"join")}async testOperation(u,a){return!0}async runOperation(u,a){const c=(await Promise.all(u.input.map(async p=>({output:await this.mediatorQueryOperation.mediate({operation:p,context:a}),operation:p})))).map(({output:p,operation:m})=>({output:o.ActorQueryOperation.getSafeBindings(p),operation:m}));return this.mediatorJoin.mediate({type:"inner",entries:c,context:a})}}e.ActorQueryOperationJoin=l},"../node_modules/@comunica/actor-query-operation-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLeftJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/sparqlee/dist/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"leftjoin")}async testOperation(a,c){return!0}async runOperation(a,c){const p=(await Promise.all(a.input.map(async y=>({output:await this.mediatorQueryOperation.mediate({operation:y,context:c}),operation:y})))).map(({output:y,operation:h})=>({output:o.ActorQueryOperation.getSafeBindings(y),operation:h})),m=await this.mediatorJoin.mediate({type:"optional",entries:p,context:c});if(a.expression){const y={...o.ActorQueryOperation.getAsyncExpressionContext(c)},h=new l.AsyncEvaluator(a.expression,y),T=m.bindingsStream.transform({autoStart:!1,transform:async(g,v,S)=>{try{await h.evaluateAsEBV(g)&&S(g)}catch(x){(0,l.isExpressionError)(x)?this.logWarn(c,"Error occurred while filtering.",()=>({error:x,bindings:g})):T.emit("error",x)}v()}});m.bindingsStream=T}return m}}e.ActorQueryOperationLeftJoin=d},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMinus=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"minus")}async testOperation(u,a){return!0}async runOperation(u,a){const c=(await Promise.all(u.input.map(async p=>({output:await this.mediatorQueryOperation.mediate({operation:p,context:a}),operation:p})))).map(({output:p,operation:m})=>({output:o.ActorQueryOperation.getSafeBindings(p),operation:m}));return this.mediatorJoin.mediate({type:"minus",entries:c,context:a})}}e.ActorQueryOperationMinus=l},"../node_modules/@comunica/actor-query-operation-minus/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js"),e)},"../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationNop=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("asynciterator"),u=new o.BindingsFactory;class a extends l.ActorQueryOperationTypedMediated{constructor(p){super(p,"nop")}async testOperation(p,m){return!0}async runOperation(p,m){return{bindingsStream:new d.SingletonIterator(u.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}e.ActorQueryOperationNop=a},"../node_modules/@comunica/actor-query-operation-nop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js"),e)},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationOrderBySparqlee=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs"),d=t("../node_modules/sparqlee/dist/index.js"),u=t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js");class a extends o.ActorQueryOperationTypedMediated{constructor(p){super(p,"orderby"),this.window=p.window??Number.POSITIVE_INFINITY}async testOperation(p,m){for(let y of p.expressions)y=this.extractSortExpression(y),new d.AsyncEvaluator(y,o.ActorQueryOperation.getAsyncExpressionContext(m));return!0}async runOperation(p,m){const y=await this.mediatorQueryOperation.mediate({operation:p.input,context:m}),h=o.ActorQueryOperation.getSafeBindings(y),T={window:this.window},g={...o.ActorQueryOperation.getAsyncExpressionContext(m)};let{bindingsStream:v}=h;for(let S=p.expressions.length-1;S>=0;S--){let x=p.expressions[S];const w=this.isAscending(x);x=this.extractSortExpression(x);const E=new d.AsyncEvaluator(x,g),O=async(Q,W,H)=>{try{const B=await E.evaluate(Q);H({bindings:Q,result:B})}catch(B){(0,d.isExpressionError)(B)||v.emit("error",B),H({bindings:Q,result:void 0})}W()},I=v.transform({transform:O});v=new u.SortIterator(I,(Q,W)=>(0,d.orderTypes)(Q.result,W.result,w),T).map(({bindings:Q,result:W})=>Q)}return{type:"bindings",bindingsStream:v,metadata:h.metadata}}extractSortExpression(p){const{expressionType:m,operator:y}=p;return m!==l.Algebra.expressionTypes.OPERATOR?p:y==="desc"?p.args[0]:p}isAscending(p){const{expressionType:m,operator:y}=p;return m!==l.Algebra.expressionTypes.OPERATOR?!0:y!=="desc"}}e.ActorQueryOperationOrderBySparqlee=a},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortIterator=void 0;const o=t("asynciterator");class l extends o.TransformIterator{constructor(u,a,c){super(u,c);const p=c&&c.window;this.windowLength=Number.isFinite(p)&&p>0?p:Number.POSITIVE_INFINITY,this.sort=a,this.sorted=[]}_read(u,a){let c,{length:p}=this.sorted;for(;p!==this.windowLength&&(c=this.source.read(),c!==null);){let m=0,y=p-1,h,T;for(;m<=y;)h=Math.trunc((m+y)/2),T=this.sort(c,this.sorted[h]),T<0?m=h+1:T>0?y=h-1:(m=h,y=-1);this.sorted.splice(m,0,c),p++}p===this.windowLength&&this._push(this.sorted.pop()),a()}_flush(u){let{length:a}=this.sorted;for(;a--;)this._push(this.sorted.pop());u()}}e.SortIterator=l},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathAlt=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs");class c extends o.ActorAbstractPath{constructor(m){super(m,a.Algebra.types.ALT)}async runOperation(m,y){const h=m.predicate,T=(await Promise.all(h.input.map(S=>this.mediatorQueryOperation.mediate({context:y,operation:o.ActorAbstractPath.FACTORY.createPath(m.subject,S,m.object,m.graph)})))).map(d.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new u.UnionIterator(T.map(S=>S.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(T.map(S=>S.metadata())).then(S=>l.ActorQueryOperationUnion.unionMetadata(S,!0))}}}e.ActorQueryOperationPathAlt=c},"../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js"),e)},"../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathInv=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorAbstractPath{constructor(a){super(a,l.Algebra.types.INV)}async runOperation(a,c){const p=a.predicate,m=o.ActorAbstractPath.FACTORY.createPath(a.object,p.path,a.subject,a.graph);return this.mediatorQueryOperation.mediate({operation:m,context:c})}}e.ActorQueryOperationPathInv=d},"../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js"),e)},"../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathLink=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorAbstractPath{constructor(a){super(a,l.Algebra.types.LINK)}async runOperation(a,c){const p=a.predicate,m=o.ActorAbstractPath.FACTORY.createPattern(a.subject,p.iri,a.object,a.graph);return this.mediatorQueryOperation.mediate({operation:m,context:c})}}e.ActorQueryOperationPathLink=d},"../node_modules/@comunica/actor-query-operation-path-link/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js"),e)},"../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathNps=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("sparqlalgebrajs");class u extends o.ActorAbstractPath{constructor(c){super(c,d.Algebra.types.NPS)}async runOperation(c,p){const m=c.predicate,y=this.generateVariable(c),h=o.ActorAbstractPath.FACTORY.createPattern(c.subject,y,c.object,c.graph),T=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:h,context:p}));return{type:"bindings",bindingsStream:T.bindingsStream.transform({filter(v){return!m.iris.some(S=>S.equals(v.get(y)))},transform(v,S,x){x(v.delete(y)),S()}}),metadata:T.metadata}}}e.ActorQueryOperationPathNps=u},"../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js"),e)},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathOneOrMore=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs"),c=new l.BindingsFactory;class p extends o.ActorAbstractPath{constructor(y){super(y,a.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(y,h){const T=await this.isPathArbitraryLengthDistinct(h,y);if(T.operation)return T.operation;h=T.context;const g=y.predicate;if(y.subject.termType!=="Variable"&&y.object.termType==="Variable"){const w=y.object,E=await this.getObjectsPredicateStarEval(y.subject,g.path,w,y.graph,h,!1),O=y.graph.termType==="Variable"?[w,y.graph]:[w];return{type:"bindings",bindingsStream:E.bindingsStream,metadata:async()=>({...await E.metadata(),variables:O})}}if(y.subject.termType==="Variable"&&y.object.termType==="Variable"){const w=o.ActorAbstractPath.FACTORY.createDistinct(o.ActorAbstractPath.FACTORY.createPath(y.subject,y.predicate.path,y.object,y.graph)),E=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:h,operation:w})),O=y.subject,I=y.object,z={},Q=new u.MultiTransformIterator(E.bindingsStream,{multiTransform:H=>{const B=H.get(O),M=H.get(I),V=y.graph.termType==="Variable"?H.get(y.graph):y.graph;return new u.TransformIterator(async()=>{const $=new u.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(O,I,B,M,g.path,V,h,z,{},$,{count:0}),$.transform({transform(te,J,Z){y.graph.termType==="Variable"&&(te=te.set(y.graph,V)),Z(te),J()}})},{maxBufferSize:128})},autoStart:!1}),W=y.graph.termType==="Variable"?[O,I,y.graph]:[O,I];return{type:"bindings",bindingsStream:Q,metadata:async()=>({...await E.metadata(),variables:W})}}if(y.subject.termType==="Variable"&&y.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:h,operation:o.ActorAbstractPath.FACTORY.createPath(y.object,o.ActorAbstractPath.FACTORY.createOneOrMorePath(o.ActorAbstractPath.FACTORY.createInv(g.path)),y.subject,y.graph)});const v=this.generateVariable(),S=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:h,operation:o.ActorAbstractPath.FACTORY.createPath(y.subject,g,v,y.graph)}));return{type:"bindings",bindingsStream:S.bindingsStream.transform({filter:w=>y.object.equals(w.get(v)),transform(w,E,O){const I=y.graph.termType==="Variable"?c.bindings([[y.graph,w.get(y.graph)]]):c.bindings();O(I),E()}}),metadata:async()=>({...await S.metadata(),variables:y.graph.termType==="Variable"?[y.graph]:[]})}}}e.ActorQueryOperationPathOneOrMore=p},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathSeq=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("sparqlalgebrajs");class u extends o.ActorAbstractPath{constructor(c){super(c,d.Algebra.types.SEQ)}async runOperation(c,p){const m=c.predicate;let y=c.subject;const h=[],T=await Promise.all(m.input.map((S,x)=>{const w=x===m.input.length-1?c.object:this.generateVariable(c,`b${x}`),E=o.ActorAbstractPath.FACTORY.createPath(y,S,w,c.graph),O=this.mediatorQueryOperation.mediate({context:p,operation:E});return y=w,x<m.input.length-1&&h.push(w),{output:O,operation:E}}).map(async({output:S,operation:x})=>({output:l.ActorQueryOperation.getSafeBindings(await S),operation:x}))),g=l.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:T,context:p}));return{type:"bindings",bindingsStream:g.bindingsStream.transform({transform(S,x,w){for(const E of h)S=S.delete(E);w(S),x()}}),async metadata(){const S=await g.metadata(),x=S.variables.filter(w=>!h.some(E=>E.value===w.value));return{...S,variables:x}}}}}e.ActorQueryOperationPathSeq=u},"../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrMore=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("../node_modules/rdf-string/index.js"),c=t("sparqlalgebrajs"),p=new l.BindingsFactory;class m extends o.ActorAbstractPath{constructor(h){super(h,c.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(h,T){const g=await this.isPathArbitraryLengthDistinct(T,h);if(g.operation)return g.operation;T=g.context;const v=h.predicate,S=h.subject.termType==="Variable",x=h.object.termType==="Variable";if(h.subject.termType==="Variable"&&h.object.termType==="Variable"){const Q=this.generateVariable(h),W=o.ActorAbstractPath.FACTORY.createPattern(h.subject,Q,h.object,h.graph),H=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:T,operation:W})),B=h.subject,M=h.object,V=new Set,$={},te=new u.MultiTransformIterator(H.bindingsStream,{multiTransform:Z=>{const Y=Z.get(B),oe=Z.get(M),ie=h.graph.termType==="Variable"?Z.get(h.graph):h.graph,ne=(0,a.termToString)(Y)+(0,a.termToString)(ie),re=(0,a.termToString)(oe)+(0,a.termToString)(ie);return new u.TransformIterator(async()=>{if(V.has(ne)&&V.has(re))return new u.EmptyIterator;const he=new u.BufferedIterator,we={count:0};return V.has(ne)||(V.add(ne),await this.getSubjectAndObjectBindingsPredicateStar(B,M,Y,Y,v.path,ie,T,$,{},he,we)),V.has(re)||(V.add(re),await this.getSubjectAndObjectBindingsPredicateStar(B,M,oe,oe,v.path,ie,T,$,{},he,we)),he.transform({transform(Te,Ee,_e){h.graph.termType==="Variable"&&(Te=Te.set(h.graph,ie)),_e(Te),Ee()}})})}}),J=h.graph.termType==="Variable"?[B,h.object,h.graph]:[B,h.object];return{type:"bindings",bindingsStream:te,metadata:async()=>({...await H.metadata(),variables:J})}}if(!S&&!x){const Q=this.generateVariable(),W=await this.getObjectsPredicateStarEval(h.subject,v.path,Q,h.graph,T,!0);return{type:"bindings",bindingsStream:W.bindingsStream.transform({filter:B=>h.object.equals(B.get(Q)),transform(B,M,V){const $=h.graph.termType==="Variable"?p.bindings([[h.graph,B.get(h.graph)]]):p.bindings();V($),M()}}),metadata:async()=>({...await W.metadata(),variables:h.graph.termType==="Variable"?[h.graph]:[]})}}const w=S?h.object:h.subject,E=S?h.subject:h.object,O=S?o.ActorAbstractPath.FACTORY.createInv(v.path):v.path,I=await this.getObjectsPredicateStarEval(w,O,E,h.graph,T,!0),z=h.graph.termType==="Variable"?[E,h.graph]:[E];return{type:"bindings",bindingsStream:I.bindingsStream,metadata:async()=>({...await I.metadata(),variables:z})}}}e.ActorQueryOperationPathZeroOrMore=m},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrOne=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs"),c=new l.BindingsFactory;class p extends o.ActorAbstractPath{constructor(y){super(y,a.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(y,h){const T=y.predicate,g=y.subject.termType==="Variable",v=y.object.termType==="Variable",S=[];if(!g&&!v&&y.subject.equals(y.object))return{type:"bindings",bindingsStream:new u.SingletonIterator(c.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};if(g&&v)throw new Error("ZeroOrOne path expressions with 2 variables not supported yet");const x=await this.isPathArbitraryLengthDistinct(h,y);if(x.operation)return x.operation;h=x.context,y.subject.termType==="Variable"&&S.push(c.bindings([[y.subject,y.object]])),y.object.termType==="Variable"&&S.push(c.bindings([[y.object,y.subject]]));const w=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:h,operation:o.ActorAbstractPath.FACTORY.createPath(y.subject,T.path,y.object,y.graph)}));return{type:"bindings",bindingsStream:w.bindingsStream.prepend(S),metadata:w.metadata}}}e.ActorQueryOperationPathZeroOrOne=p},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js"),e)},"../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationProject=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/data-factory/lib/index.js"),d=t("../node_modules/rdf-data-factory/index.js"),u=new d.DataFactory;class a extends o.ActorQueryOperationTypedMediated{constructor(p){super(p,"project")}async testOperation(p,m){return!0}async runOperation(p,m){const y=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:p.input,context:m})),h=await y.metadata(),T=p.variables,g=h.variables.filter(w=>!T.some(E=>w.value===E.value)),v=T.filter(w=>!h.variables.some(E=>w.value===E.value));if(v.length>0)throw new Error(`Variables '${v.map(w=>`?${w.value}`)}' are used in the projection result, but are not assigned.`);let S=g.length===0?y.bindingsStream:y.bindingsStream.transform({map(w){for(const E of g)w=w.delete(E);return w},autoStart:!1}),x=0;return S=S.transform({map(w){x++;const E=new Map;return w.map(O=>{if(O instanceof l.BlankNodeBindingsScoped){let I=E.get(O.value);return I||(I=u.blankNode(`${O.value}${x}`),E.set(O.value,I)),I}return O})},autoStart:!1}),{type:"bindings",bindingsStream:S,metadata:async()=>({...h,variables:T})}}}e.ActorQueryOperationProject=a},"../node_modules/@comunica/actor-query-operation-project/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js"),e)},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationQuadpattern=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("../node_modules/rdf-data-factory/index.js"),a=t("../node_modules/rdf-terms/index.js"),c=t("sparqlalgebrajs"),p=new o.BindingsFactory,m=new u.DataFactory,y=new c.Factory;class h extends l.ActorQueryOperationTyped{constructor(g){super(g,"pattern")}static isTermVariable(g){return g.termType==="Variable"}static getVariables(g){return(0,a.uniqTerms)((0,a.getTerms)(g).filter(h.isTermVariable))}static getDuplicateElementLinks(g){const v={};let S=!1;for(const w of a.QUAD_TERM_NAMES)if(g[w].termType==="Variable"){const E=g[w].value,O=(v[E]||(v[E]=[])).push(w);S=S||O>1}if(!S)return;const x={};for(const w in v){const E=v[w],O=E.slice(1);O.length>0&&(x[E[0]]=O)}return x}static validateMetadata(g){for(const v of["cardinality","canContainUndefs"])if(!(v in g))throw new Error(`Invalid metadata: missing ${v} in ${JSON.stringify(g)}`);return g}static getMetadata(g,v,S){return()=>new Promise((x,w)=>{g.getProperty("metadata",E=>x(E)),g.on("error",w)}).then(x=>("canContainUndefs"in x||(x.canContainUndefs=!1),h.quadsMetadataToBindingsMetadata(h.validateMetadata(x),v,S)))}static quadsMetadataToBindingsMetadata(g,v,S){return{...g,order:g.order?h.quadsOrderToBindingsOrder(g.order,v):void 0,availableOrders:g.availableOrders?g.availableOrders.map(x=>({cost:x.cost,terms:h.quadsOrderToBindingsOrder(x.terms,v)})):void 0,variables:S}}static quadsOrderToBindingsOrder(g,v){const S={};return g.map(x=>{const w=v[x.term];if(w&&!S[w])return S[w]=!0,{term:m.variable(w),direction:x.direction}}).filter(x=>Boolean(x))}async testOperation(g,v){return!0}async runOperation(g,v){g.context&&(v=v.merge(g.context));let S=g;const x=this.unionDefaultGraph||v.get(d.KeysQueryOperation.unionDefaultGraph);g.graph.termType==="DefaultGraph"&&x&&(S=y.createPattern(g.subject,g.predicate,g.object,m.variable("__comunica:defaultGraph")));const w=await this.mediatorResolveQuadPattern.mediate({pattern:S,context:v}),E=h.getVariables(g),O=(0,a.reduceTerms)(g,(W,H,B)=>(H.termType==="Variable"&&(W[B]=H.value),W),{}),I=(W,H,B)=>{const M=O[B];return M&&W.push([m.variable(M),H]),W},z=h.getMetadata(w.data,O,E);return{type:"bindings",bindingsStream:new l.ClosableTransformIterator(async()=>{let W=w.data;const H=h.getDuplicateElementLinks(g);return g.graph.termType==="Variable"&&!x&&(W=W.filter(B=>B.graph.termType!=="DefaultGraph")),H&&(W=W.filter(B=>{for(const M of a.TRIPLE_TERM_NAMES)for(const V of H[M]||[])if(!B[M].equals(B[V]))return!1;return!0})),W.map(B=>p.bindings((0,a.reduceTerms)(B,I,[])))},{autoStart:!1,onClose:()=>w.data.destroy()}),metadata:z}}}e.ActorQueryOperationQuadpattern=h},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js"),e)},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationReducedHash=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/lru-cache/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"reduced")}async testOperation(a,c){return!0}async runOperation(a,c){const p=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a.input,context:c}));return{type:"bindings",bindingsStream:p.bindingsStream.filter(await this.newHashFilter(c)),metadata:p.metadata}}async newHashFilter(a){const{hashFunction:c}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:a}),p=new l({max:this.cacheSize});return m=>{const y=c(m);return!p.has(y)&&p.set(y,!0)}}}e.ActorQueryOperationReducedHash=d},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js"),e)},"../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationService=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=new o.BindingsFactory;class c extends l.ActorQueryOperationTypedMediated{constructor(m){super(m,"service")}async testOperation(m,y){if(m.name.termType!=="NamedNode")throw new Error(`${this.name} can only query services by IRI, while a ${m.name.termType} was given.`);return!0}async runOperation(m,y){const h=m.name.value;let T=y.delete(d.KeysRdfResolveQuadPattern.source).delete(d.KeysRdfResolveQuadPattern.sources).delete(d.KeysInitQuery.queryString);const g=this.forceSparqlEndpoint?"sparql":void 0;T=T.set(d.KeysRdfResolveQuadPattern.sources,[{type:g,value:h}]);let v;try{v=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:m.input,context:T}))}catch(S){if(m.silent)v={bindingsStream:new u.SingletonIterator(a.bindings()),type:"bindings",metadata:async()=>({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};else throw S}return v}}e.ActorQueryOperationService=c},"../node_modules/@comunica/actor-query-operation-service/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js"),e)},"../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationSlice=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"slice")}async testOperation(a,c){return!0}async runOperation(a,c){a.length&&(c=c.set(l.KeysQueryOperation.limitIndicator,a.length));const p=await this.mediatorQueryOperation.mediate({operation:a.input,context:c});if(p.type==="bindings")return{type:"bindings",bindingsStream:this.sliceStream(p.bindingsStream,a),metadata:this.sliceMetadata(p,a)};if(p.type==="quads")return{type:"quads",quadStream:this.sliceStream(p.quadStream,a),metadata:this.sliceMetadata(p,a)};throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${p.type}'`)}sliceStream(a,c){const p=Boolean(c.length)||c.length===0,{start:m}=c,y=p?c.start+c.length-1:Number.POSITIVE_INFINITY;return a.transform({offset:m,limit:Math.max(y-m+1,0),autoStart:!1})}sliceMetadata(a,c){const p=Boolean(c.length)||c.length===0;return()=>a.metadata().then(m=>{const y={...m.cardinality};return Number.isFinite(y.value)&&(y.value=Math.max(0,y.value-c.start),p&&(y.value=Math.min(y.value,c.length))),{...m,cardinality:y}})}}e.ActorQueryOperationSlice=d},"../node_modules/@comunica/actor-query-operation-slice/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js"),e)},"../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUnion=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),d=t("../node_modules/rdf-terms/index.js");class u extends o.ActorQueryOperationTypedMediated{constructor(c){super(c,"union")}static unionVariables(c){return(0,d.uniqTerms)(c.flat())}static unionMetadata(c,p){const m={type:"exact",value:0};for(const h of c)if(h.cardinality.value&&Number.isFinite(h.cardinality.value)||h.cardinality.value===0)h.cardinality.type==="estimate"&&(m.type="estimate"),m.value+=h.cardinality.value;else{m.type="estimate",m.value=Number.POSITIVE_INFINITY;break}const y={cardinality:m,canContainUndefs:c.some(h=>h.canContainUndefs)};return p&&(y.variables=u.unionVariables(c.map(h=>h.variables))),y}async testOperation(c,p){return!0}async runOperation(c,p){const m=(await Promise.all(c.input.map(T=>this.mediatorQueryOperation.mediate({operation:T,context:p})))).map(o.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new l.UnionIterator(m.map(T=>T.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(m.map(T=>T.metadata())).then(T=>u.unionMetadata(T,!0))}}}e.ActorQueryOperationUnion=u},"../node_modules/@comunica/actor-query-operation-union/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js"),e)},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAddRewrite=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("sparqlalgebrajs"),u=new l.DataFactory;class a extends o.ActorQueryOperationTypedMediated{constructor(p){super(p,"add"),this.factory=new d.Factory}async testOperation(p,m){return o.ActorQueryOperation.throwOnReadOnly(m),!0}runOperation(p,m){const y=p.destination==="DEFAULT"?u.defaultGraph():p.destination,h=p.source==="DEFAULT"?u.defaultGraph():p.source,T=this.factory.createDeleteInsert(void 0,[this.factory.createPattern(u.variable("s"),u.variable("p"),u.variable("o"),y)],this.factory.createPattern(u.variable("s"),u.variable("p"),u.variable("o"),h));return this.mediatorQueryOperation.mediate({operation:T,context:m})}}e.ActorQueryOperationAddRewrite=a},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationClear=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=new l.DataFactory;class u extends o.ActorQueryOperationTypedMediated{constructor(c){super(c,"clear")}async testOperation(c,p){return o.ActorQueryOperation.throwOnReadOnly(p),!0}async runOperation(c,p){let m;c.source==="DEFAULT"?m=d.defaultGraph():typeof c.source=="string"?m=c.source:m=[c.source];const{execute:y}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:m,requireExistence:!c.silent,dropGraphs:!1},context:p});return{type:"void",execute:y}}}e.ActorQueryOperationClear=u},"../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js"),e)},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateCompositeUpdate=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"compositeupdate")}async testOperation(u,a){return o.ActorQueryOperation.throwOnReadOnly(a),!0}async runOperation(u,a){return{type:"void",execute:()=>(async()=>{for(const p of u.updates)await o.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:p,context:a})).execute()})()}}}e.ActorQueryOperationUpdateCompositeUpdate=l},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCopyRewrite=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"copy"),this.factory=new l.Factory}async testOperation(a,c){return o.ActorQueryOperation.throwOnReadOnly(c),!0}runOperation(a,c){if(typeof a.destination=="string"&&typeof a.source=="string"&&a.destination===a.source||typeof a.destination!="string"&&typeof a.source!="string"&&a.destination.equals(a.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const p=this.factory.createCompositeUpdate([this.factory.createDrop(a.destination,!0),this.factory.createAdd(a.source,a.destination,a.silent)]);return this.mediatorQueryOperation.mediate({operation:p,context:c})}}e.ActorQueryOperationCopyRewrite=d},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCreate=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"create")}async testOperation(u,a){return o.ActorQueryOperation.throwOnReadOnly(a),!0}async runOperation(u,a){const{execute:c}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[u.source],requireNonExistence:!u.silent},context:a});return{type:"void",execute:c}}}e.ActorQueryOperationCreate=l},"../node_modules/@comunica/actor-query-operation-update-create/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateDeleteInsert=void 0;const o=t("../node_modules/@comunica/actor-query-operation-construct/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=new l.BindingsFactory;class c extends d.ActorQueryOperationTypedMediated{constructor(m){super(m,"deleteinsert"),this.blankNodeCounter=0}async testOperation(m,y){return d.ActorQueryOperation.throwOnReadOnly(y),!0}async runOperation(m,y){const h=m.where?d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:m.where,context:y})).bindingsStream:new u.ArrayIterator([a.bindings()],{autoStart:!1});let T,g;m.insert&&(T=new o.BindingsToQuadsIterator(m.insert.map(o.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),h.clone(),!1),this.blankNodeCounter++),m.delete&&(g=new o.BindingsToQuadsIterator(m.delete.map(o.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),h.clone(),!1),this.blankNodeCounter++);const{execute:v}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:T,quadStreamDelete:g,context:y});return{type:"void",execute:v}}}e.ActorQueryOperationUpdateDeleteInsert=c},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js"),e)},"../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDrop=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=new l.DataFactory;class u extends o.ActorQueryOperationTypedMediated{constructor(c){super(c,"drop")}async testOperation(c,p){return o.ActorQueryOperation.throwOnReadOnly(p),!0}async runOperation(c,p){let m;c.source==="DEFAULT"?m=d.defaultGraph():typeof c.source=="string"?m=c.source:m=[c.source];const{execute:y}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:m,requireExistence:!c.silent,dropGraphs:!0},context:p});return{type:"void",execute:y}}}e.ActorQueryOperationDrop=u},"../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js"),e)},"../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLoad=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/rdf-data-factory/index.js"),u=t("sparqlalgebrajs"),a=new d.DataFactory;class c extends o.ActorQueryOperationTypedMediated{constructor(m){super(m,"load"),this.factory=new u.Factory,this.constructOperation=this.factory.createConstruct(this.factory.createPattern(a.variable("s"),a.variable("p"),a.variable("o")),[this.factory.createPattern(a.variable("s"),a.variable("p"),a.variable("o"))])}async testOperation(m,y){return o.ActorQueryOperation.throwOnReadOnly(y),!0}async runOperation(m,y){let h=y.set(l.KeysRdfResolveQuadPattern.sources,[m.source.value]);m.silent&&(h=h.set(l.KeysInitQuery.lenient,!0));let g=c.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.constructOperation,context:h})).quadStream;m.destination&&(g=g.map(S=>a.quad(S.subject,S.predicate,S.object,m.destination)));const{execute:v}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:g,context:y});return{type:"void",execute:v}}}e.ActorQueryOperationLoad=c},"../node_modules/@comunica/actor-query-operation-update-load/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js"),e)},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMoveRewrite=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"move"),this.factory=new l.Factory}async testOperation(a,c){return o.ActorQueryOperation.throwOnReadOnly(c),!0}runOperation(a,c){if(typeof a.destination=="string"&&typeof a.source=="string"&&a.destination===a.source||typeof a.destination!="string"&&typeof a.source!="string"&&a.destination.equals(a.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const p=[this.factory.createDrop(a.destination,!0),this.factory.createAdd(a.source,a.destination,a.silent),this.factory.createDrop(a.source)],m=this.factory.createCompositeUpdate(p);return this.mediatorQueryOperation.mediate({operation:m,context:c})}}e.ActorQueryOperationMoveRewrite=d},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationValues=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("asynciterator"),u=t("../node_modules/rdf-data-factory/index.js"),a=new o.BindingsFactory,c=new u.DataFactory;class p extends l.ActorQueryOperationTyped{constructor(y){super(y,"values")}async testOperation(y,h){return!0}async runOperation(y,h){const T=new d.ArrayIterator(y.bindings.map(S=>a.bindings(Object.entries(S).map(([x,w])=>[c.variable(x.slice(1)),w])))),g=y.variables;return{type:"bindings",bindingsStream:T,metadata:()=>Promise.resolve({cardinality:{type:"exact",value:y.bindings.length},canContainUndefs:y.bindings.some(S=>g.some(x=>!(`?${x.value}`in S))),variables:g})}}}e.ActorQueryOperationValues=p},"../node_modules/@comunica/actor-query-operation-values/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js"),e)},"../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParseSparql=void 0;const o=t("../node_modules/@comunica/bus-query-parse/lib/index.js"),l=t("sparqlalgebrajs"),d=t("sparqljs");class u extends o.ActorQueryParse{constructor(c){super(c),this.prefixes=Object.freeze(this.prefixes)}async test(c){if(c.queryFormat&&c.queryFormat.language!=="sparql")throw new Error("This actor can only parse SPARQL queries");return!0}async run(c){const m=new d.Parser({prefixes:this.prefixes,baseIRI:c.baseIRI}).parse(c.query);return{baseIRI:m.type==="query"?m.base:void 0,operation:(0,l.translate)(m,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:c.baseIRI})}}}e.ActorQueryParseSparql=u},"../node_modules/@comunica/actor-query-parse-sparql/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js"),e)},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSortCardinality=void 0;const o=t("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js");class l extends o.ActorRdfJoinEntriesSort{constructor(u){super(u)}async test(u){return!0}async run(u){return{entries:[...u.entries].sort((c,p)=>c.metadata.cardinality.value-p.metadata.cardinality.value)}}}e.ActorRdfJoinEntriesSortCardinality=l},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinHash=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"hash",limitEntries:2})}async getOutput(a){const c=await o.ActorRdfJoin.getMetadatas(a.entries),p=o.ActorRdfJoin.overlappingVariables(c);return{result:{type:"bindings",bindingsStream:new l.HashJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,y=>o.ActorRdfJoin.hash(y,p),o.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(a.entries,c,a.context)}}}async getJoinCoefficients(a,c){const p=o.ActorRdfJoin.getRequestInitialTimes(c),m=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value+c[1].cardinality.value,persistedItems:c[0].cardinality.value,blockingItems:c[0].cardinality.value,requestTime:p[0]+c[0].cardinality.value*m[0]+p[1]+c[1].cardinality.value*m[1]}}}e.ActorRdfJoinHash=d},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiBind=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs");class c extends l.ActorRdfJoin{constructor(m){super(m,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0})}static createBindStream(m,y,h,T,g){const v=S=>{const x=h.map(E=>(0,o.materializeOperation)(E,S,{bindFilter:!1})),w=E=>E.merge(S);return new u.TransformIterator(async()=>(await T(x,S)).transform({map:w}),{maxBufferSize:128,autoStart:!1})};switch(m){case"depth-first":return new u.MultiTransformIterator(y,{autoStart:!1,multiTransform:v,optional:g});case"breadth-first":return new u.UnionIterator(y.transform({map:v,optional:g}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${m}`)}}async sortJoinEntries(m,y){if(m.some(S=>S.metadata.canContainUndefs))return m;const T={};for(const S of m)for(const x of S.metadata.variables){let w=T[x.value];w||(w=0),T[x.value]=++w}const g=[];for(const[S,x]of Object.entries(T))x>=2&&g.push(S);if(g.length===0)throw new Error("Bind join can only join entries with at least one common variable");const v=[];for(const S of m){let x=!1;for(const w of S.metadata.variables)if(g.includes(w.value)){x=!0;break}x||v.push(S)}return(await this.mediatorJoinEntriesSort.mediate({entries:m,context:y})).entries.sort((S,x)=>{const w=v.includes(S),E=v.includes(x);return w===E?0:w?1:-1})}async getOutput(m){const y=await l.ActorRdfJoin.getEntriesWithMetadatas(m.entries),h=await this.sortJoinEntries(y,m.context);this.logDebug(m.context,"First entry for Bind Join: ",()=>({entry:h[0].operation,metadata:h[0].metadata}));for(const[x,w]of h.entries())x!==0&&w.output.bindingsStream.close();const T=h[0].output,g=[...h];g.splice(0,1);const v=m.context.set(d.KeysQueryOperation.joinLeftMetadata,h[0].metadata).set(d.KeysQueryOperation.joinRightMetadatas,g.map(x=>x.metadata));return{result:{type:"bindings",bindingsStream:c.createBindStream(this.bindOrder,T.bindingsStream,g.map(x=>x.operation),async(x,w)=>{const E=x.length===1?x[0]:c.FACTORY.createJoin(x);return o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:E,context:v?.set(d.KeysQueryOperation.joinBindings,w)})).bindingsStream},!1),metadata:()=>this.constructResultMetadata(h,h.map(x=>x.metadata),m.context)},physicalPlanMetadata:{bindIndex:y.indexOf(h[0]),bindOrder:this.bindOrder}}}async getJoinCoefficients(m,y){const h=await this.sortJoinEntries(m.entries.map((z,Q)=>({...z,metadata:y[Q]})),m.context);y=h.map(z=>z.metadata);const T=l.ActorRdfJoin.getRequestInitialTimes(y),g=l.ActorRdfJoin.getRequestItemTimes(y),v=[...h],S=[...T],x=[...g];if(v.splice(0,1),S.splice(0,1),x.splice(0,1),v.some(z=>z.operation.type===a.Algebra.types.EXTEND||z.operation.type===a.Algebra.types.GROUP))throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const w=await Promise.all(v.map(async z=>(await this.mediatorJoinSelectivity.mediate({entries:[h[0],z],context:m.context})).selectivity*this.selectivityModifier)),E=v.map((z,Q)=>z.metadata.cardinality.value*w[Q]).reduce((z,Q)=>z+Q,0),O=S.reduce((z,Q,W)=>z+Q*w[W],0),I=x.reduce((z,Q,W)=>z+Q*w[W],0);return{iterations:y[0].cardinality.value*E,persistedItems:0,blockingItems:0,requestTime:T[0]+y[0].cardinality.value*(g[0]+O+E*I)}}}e.ActorRdfJoinMultiBind=c,c.FACTORY=new a.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiEmpty=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("asynciterator");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"multi-empty"})}async test(a){if((await o.ActorRdfJoin.getMetadatas(a.entries)).every(c=>o.ActorRdfJoin.getCardinality(c).value>0))throw new Error(`Actor ${this.name} can only join entries where at least one is empty`);return super.test(a)}async getOutput(a){for(const c of a.entries)c.output.bindingsStream.close();return{result:{bindingsStream:new l.ArrayIterator([],{autoStart:!1}),metadata:async()=>({cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:o.ActorRdfJoin.joinVariables(await o.ActorRdfJoin.getMetadatas(a.entries))}),type:"bindings"}}}async getJoinCoefficients(a,c){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinMultiEmpty=d},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiSmallest=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("sparqlalgebrajs");class u extends l.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0})}async sortJoinEntries(c,p){return(await this.mediatorJoinEntriesSort.mediate({entries:c,context:p})).entries}async getOutput(c){const p=await this.sortJoinEntries(await l.ActorRdfJoin.getEntriesWithMetadatas([...c.entries]),c.context),m=p[0],y=p[1];p.splice(0,2);const h={output:o.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:c.type,entries:[m,y],context:c.context})),operation:u.FACTORY.createJoin([m.operation,y.operation],!1)};return p.push(h),{result:await this.mediatorJoin.mediate({type:c.type,entries:p,context:c.context})}}async getJoinCoefficients(c,p){p=[...p],p=(await this.sortJoinEntries(c.entries.map((T,g)=>({...T,metadata:p[g]})),c.context)).map(T=>T.metadata);const y=l.ActorRdfJoin.getRequestInitialTimes(p),h=l.ActorRdfJoin.getRequestItemTimes(p);return{iterations:p[0].cardinality.value*p[1].cardinality.value*p.slice(2).reduce((T,g)=>T*g.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:y[0]+p[0].cardinality.value*h[0]+y[1]+p[1].cardinality.value*h[1]+p.slice(2).reduce((T,g,v)=>T+y.slice(2)[v]+g.cardinality.value*h.slice(2)[v],0)}}}e.ActorRdfJoinMultiSmallest=u,u.FACTORY=new d.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNestedLoop=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(a){return{result:{type:"bindings",bindingsStream:new l.NestedLoopJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,o.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(a.entries,await o.ActorRdfJoin.getMetadatas(a.entries),a.context)}}}async getJoinCoefficients(a,c){const p=o.ActorRdfJoin.getRequestInitialTimes(c),m=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value*c[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:p[0]+c[0].cardinality.value*m[0]+p[1]+c[1].cardinality.value*m[1]}}}e.ActorRdfJoinNestedLoop=d},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNone=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("asynciterator"),u=new o.BindingsFactory;class a extends l.ActorRdfJoin{constructor(p){super(p,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(p){if(p.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(p){return{result:{bindingsStream:new d.ArrayIterator([u.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinNone=a},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSingle=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js");class l extends o.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(u){if(u.entries.length!==1)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(u){return{result:u.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinSingle=l},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSymmetricHash=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2})}async getOutput(a){const c=await o.ActorRdfJoin.getMetadatas(a.entries),p=o.ActorRdfJoin.overlappingVariables(c);return{result:{type:"bindings",bindingsStream:new l.SymmetricHashJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,y=>d.hash(y,p),o.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(a.entries,c,a.context)}}}async getJoinCoefficients(a,c){const p=o.ActorRdfJoin.getRequestInitialTimes(c),m=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value+c[1].cardinality.value,persistedItems:c[0].cardinality.value+c[1].cardinality.value,blockingItems:0,requestTime:p[0]+c[0].cardinality.value*m[0]+p[1]+c[1].cardinality.value*m[1]}}}e.ActorRdfJoinSymmetricHash=d},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHashUndef=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js");class u extends l.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(c){const p=c.entries[1].output,m=c.entries[0].output,y=await l.ActorRdfJoin.getMetadatas(c.entries),h=l.ActorRdfJoin.overlappingVariables(y);if(h.length>0){const T=new d.BindingsIndex(h);return{result:{type:"bindings",bindingsStream:new o.ClosableTransformIterator(async()=>(await new Promise(v=>{p.bindingsStream.on("data",S=>T.add(S)),p.bindingsStream.on("end",v)}),m.bindingsStream.filter(v=>!T.contains(v))),{autoStart:!1,onClose(){p.bindingsStream.destroy(),m.bindingsStream.destroy()}}),async metadata(){const v=await m.metadata(),S=await m.metadata();return{...S,canContainUndefs:v.canContainUndefs||S.canContainUndefs}}}}}return{result:m}}async getJoinCoefficients(c,p){const m=l.ActorRdfJoin.getRequestInitialTimes(p),y=l.ActorRdfJoin.getRequestItemTimes(p);return{iterations:(p[0].cardinality.value+p[1].cardinality.value)*1.01,persistedItems:p[0].cardinality.value,blockingItems:p[0].cardinality.value,requestTime:m[0]+p[0].cardinality.value*y[0]+m[1]+p[1].cardinality.value*y[1]}}}e.ActorRdfJoinMinusHashUndef=u},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsIndex=void 0;const o=t("../node_modules/rdf-string/index.js");class l{constructor(u){this.data={},this.keys=u}static hashTerm(u){return u&&u.termType!=="Variable"?(0,o.termToString)(u):""}add(u){if(this.isBindingsValid(u)){let a=this.data;for(const c of this.keys){const p=l.hashTerm(u.get(c));let m=a[p];m||(m=a[p]={}),a=m}}}contains(u){return this.isBindingsValid(u)?this.containsRecursive(u,this.keys,[this.data]):!1}isBindingsValid(u){let a=!1;for(const c of this.keys)if(u.get(c)){a=!0;break}return a}containsRecursive(u,a,c){if(a.length===0)return!0;let p;[p,...a]=a;for(const m of c){const y=l.hashTerm(u.get(p));if(y){const h=[m[y],m[""]].filter(Boolean);if(h.length===0)continue;if(this.containsRecursive(u,a,h))return!0}else{let h=Object.keys(m).map(T=>m[T]);if(h.length===0&&(h=[{}]),this.containsRecursive(u,a,h))return!0}}return!1}}e.BindingsIndex=l},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHash=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js");class d extends l.ActorRdfJoin{constructor(a){super(a,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(a){const c=a.entries[1].output,p=a.entries[0].output,m=await l.ActorRdfJoin.getMetadatas(a.entries),y=l.ActorRdfJoin.overlappingVariables(m);if(y.length>0){const h={};return{result:{type:"bindings",bindingsStream:new o.ClosableTransformIterator(async()=>(await new Promise(g=>{c.bindingsStream.on("data",v=>{h[l.ActorRdfJoin.hash(v,y)]=!0}),c.bindingsStream.on("end",g)}),p.bindingsStream.filter(g=>!h[l.ActorRdfJoin.hash(g,y)])),{autoStart:!1,onClose(){c.bindingsStream.destroy(),p.bindingsStream.destroy()}}),metadata:p.metadata}}}return{result:p}}async getJoinCoefficients(a,c){const p=l.ActorRdfJoin.getRequestInitialTimes(c),m=l.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value+c[1].cardinality.value,persistedItems:c[0].cardinality.value,blockingItems:c[0].cardinality.value,requestTime:p[0]+c[0].cardinality.value*m[0]+p[1]+c[1].cardinality.value*m[1]}}}e.ActorRdfJoinMinusHash=d},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalBind=void 0;const o=t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),u=t("../node_modules/@comunica/context-entries/lib/index.js"),a=t("sparqlalgebrajs");class c extends d.ActorRdfJoin{constructor(m){super(m,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0})}async getOutput(m){m.entries[1].output.bindingsStream.close();const y=m.context.set(u.KeysQueryOperation.joinLeftMetadata,await m.entries[0].output.metadata()).set(u.KeysQueryOperation.joinRightMetadatas,[await m.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:o.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,m.entries[0].output.bindingsStream,[m.entries[1].operation],async(T,g)=>{const v=T[0];return l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:v,context:y?.set(u.KeysQueryOperation.joinBindings,g)})).bindingsStream},!0),metadata:async()=>await this.constructResultMetadata(m.entries,await d.ActorRdfJoin.getMetadatas(m.entries),m.context,{canContainUndefs:!0})}}}async getJoinCoefficients(m,y){const h=d.ActorRdfJoin.getRequestInitialTimes(y),T=d.ActorRdfJoin.getRequestItemTimes(y);if(m.entries[1].operation.type===a.Algebra.types.EXTEND||m.entries[1].operation.type===a.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const g=(await this.mediatorJoinSelectivity.mediate({entries:m.entries,context:m.context})).selectivity*this.selectivityModifier;return{iterations:y[0].cardinality.value*y[1].cardinality.value*g,persistedItems:0,blockingItems:0,requestTime:h[0]+y[0].cardinality.value*g*(T[0]+h[1]+y[1].cardinality.value*T[1])}}}e.ActorRdfJoinOptionalBind=c},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalNestedLoop=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(a){return{result:{type:"bindings",bindingsStream:new l.NestedLoopJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,o.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(a.entries,await o.ActorRdfJoin.getMetadatas(a.entries),a.context,{canContainUndefs:!0})}}}async getJoinCoefficients(a,c){const p=o.ActorRdfJoin.getRequestInitialTimes(c),m=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value*c[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:p[0]+c[0].cardinality.value*m[0]+p[1]+c[1].cardinality.value*m[1]}}}e.ActorRdfJoinOptionalNestedLoop=d},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JoinTypes=e.ActorRdfJoinSelectivityVariableCounting=void 0;const o=t("../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorRdfJoinSelectivity{constructor(c){super(c)}async test(c){return{accuracy:.5}}static getPatternCost(c){let p=1;return c.subject.termType==="Variable"&&(p+=4),(c.predicate.termType==="Variable"||c.type===l.Algebra.types.PATH)&&(p+=1),c.object.termType==="Variable"&&(p+=2),c.graph.termType==="Variable"&&(p+=1),p/9}static getJoinTypes(c,p){const m=[];return c.subject.termType==="Variable"?(c.subject.equals(p.subject)&&m.push(u.unboundSS),p.type==="pattern"&&c.subject.equals(p.predicate)&&m.push(u.unboundSP),c.subject.equals(p.object)&&m.push(u.unboundSO),c.subject.equals(p.graph)&&m.push(u.unboundSG)):(c.subject.equals(p.subject)&&m.push(u.boundSS),p.type==="pattern"&&c.subject.equals(p.predicate)&&m.push(u.boundSP),c.subject.equals(p.object)&&m.push(u.boundSO),c.subject.equals(p.graph)&&m.push(u.boundSG)),c.type==="pattern"&&(c.predicate.termType==="Variable"?(c.predicate.equals(p.subject)&&m.push(u.unboundPS),p.type==="pattern"&&c.predicate.equals(p.predicate)&&m.push(u.unboundPP),c.predicate.equals(p.object)&&m.push(u.unboundPO),c.predicate.equals(p.graph)&&m.push(u.unboundPG)):(c.predicate.equals(p.subject)&&m.push(u.boundPS),p.type==="pattern"&&c.predicate.equals(p.predicate)&&m.push(u.boundPP),c.predicate.equals(p.object)&&m.push(u.boundPO),c.predicate.equals(p.graph)&&m.push(u.boundPG))),c.object.termType==="Variable"?(c.object.equals(p.subject)&&m.push(u.unboundOS),p.type==="pattern"&&c.object.equals(p.predicate)&&m.push(u.unboundOP),c.object.equals(p.object)&&m.push(u.unboundOO),c.object.equals(p.graph)&&m.push(u.unboundOG)):(c.object.equals(p.subject)&&m.push(u.boundOS),p.type==="pattern"&&c.object.equals(p.predicate)&&m.push(u.boundOP),c.object.equals(p.object)&&m.push(u.boundOO),c.object.equals(p.graph)&&m.push(u.boundOG)),c.graph.termType==="Variable"?(c.graph.equals(p.subject)&&m.push(u.unboundGS),p.type==="pattern"&&c.graph.equals(p.predicate)&&m.push(u.unboundGP),c.graph.equals(p.object)&&m.push(u.unboundGO),c.graph.equals(p.graph)&&m.push(u.unboundGG)):(c.graph.equals(p.subject)&&m.push(u.boundGS),p.type==="pattern"&&c.graph.equals(p.predicate)&&m.push(u.boundGP),c.graph.equals(p.object)&&m.push(u.boundGO),c.graph.equals(p.graph)&&m.push(u.boundGG)),m}static getOperationsPairwiseJoinCost(c,p){let m=d.MAX_PAIRWISE_COST;for(const y of d.getJoinTypes(c,p))switch(y){case u.boundSS:m-=2*2;break;case u.boundSP:m-=3*2;break;case u.boundSO:m-=1*2;break;case u.boundSG:m-=3*2;break;case u.boundPS:m-=3*2;break;case u.boundPP:return 1;case u.boundPO:m-=3*2;break;case u.boundPG:m-=3*2;break;case u.boundOS:m-=1*2;break;case u.boundOP:m-=3*2;break;case u.boundOO:m-=1*2;break;case u.boundOG:m-=3*2;break;case u.boundGS:m-=3*2;break;case u.boundGP:m-=3*2;break;case u.boundGO:m-=3*2;break;case u.boundGG:m-=3*2;break;case u.unboundSS:m-=2;break;case u.unboundSP:m-=3;break;case u.unboundSO:m-=1;break;case u.unboundSG:m-=3;break;case u.unboundPS:m-=3;break;case u.unboundPP:m-=3;break;case u.unboundPO:m-=3;break;case u.unboundPG:m-=3;break;case u.unboundOS:m-=1;break;case u.unboundOP:m-=3;break;case u.unboundOO:m-=1;break;case u.unboundOG:m-=3;break;case u.unboundGS:m-=3;break;case u.unboundGP:m-=3;break;case u.unboundGO:m-=3;break;case u.unboundGG:m-=3;break}return m/d.MAX_PAIRWISE_COST}static getOperationsJoinCost(c){const p=[];for(const h of c)l.Util.recurseOperation(h,{[l.Algebra.types.PATTERN](T){return p.push(T),!1},[l.Algebra.types.PATH](T){return p.push(T),!1}});let m=0,y=0;for(const h of p)for(const T of p)h!==T&&(m+=d.getOperationsPairwiseJoinCost(h,T),y++);return m/y*p.reduce((h,T)=>h*d.getPatternCost(T),1)}async run(c){return c.entries.length<=1?{selectivity:1}:{selectivity:d.getOperationsJoinCost(c.entries.map(p=>p.operation))}}}e.ActorRdfJoinSelectivityVariableCounting=d,d.MAX_PAIRWISE_COST=41*2;var u;(function(a){a[a.boundSS=0]="boundSS",a[a.boundSP=1]="boundSP",a[a.boundSO=2]="boundSO",a[a.boundSG=3]="boundSG",a[a.boundPS=4]="boundPS",a[a.boundPP=5]="boundPP",a[a.boundPO=6]="boundPO",a[a.boundPG=7]="boundPG",a[a.boundOS=8]="boundOS",a[a.boundOP=9]="boundOP",a[a.boundOO=10]="boundOO",a[a.boundOG=11]="boundOG",a[a.boundGS=12]="boundGS",a[a.boundGP=13]="boundGP",a[a.boundGO=14]="boundGO",a[a.boundGG=15]="boundGG",a[a.unboundSS=16]="unboundSS",a[a.unboundSP=17]="unboundSP",a[a.unboundSO=18]="unboundSO",a[a.unboundSG=19]="unboundSG",a[a.unboundPS=20]="unboundPS",a[a.unboundPP=21]="unboundPP",a[a.unboundPO=22]="unboundPO",a[a.unboundPG=23]="unboundPG",a[a.unboundOS=24]="unboundOS",a[a.unboundOP=25]="unboundOP",a[a.unboundOO=26]="unboundOO",a[a.unboundOG=27]="unboundOG",a[a.unboundGS=28]="unboundGS",a[a.unboundGP=29]="unboundGP",a[a.unboundGO=30]="unboundGO",a[a.unboundGG=31]="unboundGG"})(u=e.JoinTypes||(e.JoinTypes={}))},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternFederated=void 0;const o=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),l=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js");class d extends o.ActorRdfResolveQuadPatternSource{constructor(a){super(a),this.emptyPatterns=new Map}async test(a){if(!(0,o.getContextSources)(a.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a sources array.`);return!0}async getSource(a){return new l.FederatedQuadSource(this.mediatorResolveQuadPattern,a,this.emptyPatterns,this.skipEmptyPatterns)}}e.ActorRdfResolveQuadPatternFederated=d},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FederatedQuadSource=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("../node_modules/@comunica/data-factory/lib/index.js"),a=t("asynciterator"),c=t("../node_modules/rdf-data-factory/index.js"),p=t("../node_modules/rdf-terms/index.js"),m=t("sparqlalgebrajs"),y=new c.DataFactory;class h{constructor(g,v,S,x){if(this.mediatorResolveQuadPattern=g,this.sources=v.get(d.KeysRdfResolveQuadPattern.sources),this.contextDefault=v.delete(d.KeysRdfResolveQuadPattern.sources),this.emptyPatterns=S,this.sourceIds=v.get(d.KeysRdfResolveQuadPattern.sourceIds)??new Map,this.skipEmptyPatterns=x,this.algebraFactory=new m.Factory,this.skipEmptyPatterns)for(const w of this.sources)this.emptyPatterns.has(w)||this.emptyPatterns.set(w,[])}static isTermBound(g){return g.termType!=="Variable"}static isSubPatternOf(g,v){return(!h.isTermBound(v.subject)||v.subject.equals(g.subject))&&(!h.isTermBound(v.predicate)||v.predicate.equals(g.predicate))&&(!h.isTermBound(v.object)||v.object.equals(g.object))&&(!h.isTermBound(v.graph)||v.graph.equals(g.graph))}static skolemizeTerm(g,v){return g.termType==="BlankNode"?new u.BlankNodeScoped(`bc_${v}_${g.value}`,y.namedNode(`${h.SKOLEM_PREFIX}${v}:${g.value}`)):g}static skolemizeQuad(g,v){return(0,p.mapTerms)(g,S=>h.skolemizeTerm(S,v))}static deskolemizeTerm(g,v){if(g.termType==="BlankNode"&&"skolemized"in g&&(g=g.skolemized),g.termType==="NamedNode"&&g.value.startsWith(h.SKOLEM_PREFIX)){const S=g.value.indexOf(":",h.SKOLEM_PREFIX.length);if(g.value.slice(h.SKOLEM_PREFIX.length,S)===v){const w=g.value.slice(S+1,g.value.length);return y.blankNode(w)}return null}return g}static deskolemizeQuad(g,v){return(0,p.mapTerms)(g,S=>{const x=h.deskolemizeTerm(S,v);return x||S})}isSourceEmpty(g,v){if(!this.skipEmptyPatterns)return!1;const S=this.emptyPatterns.get(g);if(S){for(const x of S)if(h.isSubPatternOf(v,x))return!0}return!1}getSourceId(g){let v=this.sourceIds.get(g);return v===void 0&&(v=`${this.sourceIds.size}`,this.sourceIds.set(g,v)),v}match(g,v,S,x){const w={cardinality:{type:"exact",value:0},canContainUndefs:!1};let E=this.sources.length;const O=(Q,W,H,B)=>{this.skipEmptyPatterns&&!Q&&H&&!this.isSourceEmpty(W,H)&&this.emptyPatterns.get(W).push(H),E||(B&&this.sources.length===1?z.setProperty("metadata",B):z.setProperty("metadata",w))},I=Promise.all(this.sources.map(async Q=>{const W=this.getSourceId(Q),H=h.deskolemizeTerm(g,W),B=h.deskolemizeTerm(v,W),M=h.deskolemizeTerm(S,W),V=h.deskolemizeTerm(x,W);let $,te=(0,l.getDataSourceContext)(Q,this.contextDefault);te=te.set(d.KeysRdfResolveQuadPattern.source,Q);let J;!H||!B||!M||!V||this.isSourceEmpty(Q,$=this.algebraFactory.createPattern(H,B,M,V))?(J={data:new a.ArrayIterator([],{autoStart:!1})},J.data.setProperty("metadata",{cardinality:0,canContainUndefs:!1})):J=await this.mediatorResolveQuadPattern.mediate({pattern:$,context:te}),J.data.getProperty("metadata",Y=>{!Y.cardinality||!Number.isFinite(Y.cardinality.value)?(w.cardinality.type="estimate",w.cardinality.value=Number.POSITIVE_INFINITY,E=0):(Y.cardinality.type==="estimate"&&(w.cardinality.type="estimate"),w.cardinality.value+=Y.cardinality.value,E--),(w.requestTime||Y.requestTime)&&(w.requestTime=w.requestTime||0,Y.requestTime=Y.requestTime||0,w.requestTime+=Y.requestTime),(w.pageSize||Y.pageSize)&&(w.pageSize=w.pageSize||0,Y.pageSize=Y.pageSize||0,w.pageSize+=Y.pageSize),Y.canContainUndefs&&(w.canContainUndefs=!0),O(w.cardinality.value,Q,$,Y)});const Z=J.data.map(Y=>h.skolemizeQuad(Y,W));return Z.on("error",Y=>z.emit("error",Y)),Z})),z=new o.ClosableTransformIterator(async()=>new a.UnionIterator(await I),{autoStart:!1,onClose(){I.then(Q=>{for(const W of Q)W.destroy()},()=>{})}});return this.sources.length===0&&z.setProperty("metadata",w),z}}e.FederatedQuadSource=h,h.SKOLEM_PREFIX="urn:comunica_skolem:source_"},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js"),e),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternRdfJsSource=void 0;const o=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),l=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js");class d extends o.ActorRdfResolveQuadPatternSource{constructor(a){super(a)}async test(a){if(!(0,o.hasContextSingleSourceOfType)("rdfjsSource",a.context))throw new Error(`${this.name} requires a single source with an rdfjsSource to be present in the context.`);const c=(0,o.getContextSource)(a.context);if(!c||typeof c=="string"||!("match"in c)&&!c.value.match)throw new Error(`${this.name} received an invalid rdfjsSource.`);return!0}async getSource(a){const c=(0,o.getContextSource)(a);return new l.RdfJsQuadSource("match"in c?c:c.value)}}e.ActorRdfResolveQuadPatternRdfJsSource=d},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadSource=void 0;const o=t("asynciterator");class l{constructor(u){this.source=u}static nullifyVariables(u){return!u||u.termType==="Variable"?void 0:u}match(u,a,c,p){const m=this.source.match(l.nullifyVariables(u),l.nullifyVariables(a),l.nullifyVariables(c),l.nullifyVariables(p)),y=(0,o.wrap)(m,{autoStart:!1});return this.setMetadata(y,u,a,c,p).catch(h=>y.destroy(h)),y}async setMetadata(u,a,c,p,m){let y;if(this.source.countQuads)y=await this.source.countQuads(l.nullifyVariables(a),l.nullifyVariables(c),l.nullifyVariables(p),l.nullifyVariables(m));else{let h=0;y=await new Promise((T,g)=>{const v=this.source.match(l.nullifyVariables(a),l.nullifyVariables(c),l.nullifyVariables(p),l.nullifyVariables(m));v.on("error",g),v.on("end",()=>T(h)),v.on("data",()=>h++)})}u.setProperty("metadata",{cardinality:{type:"exact",value:y},canContainUndefs:!1})}}e.RdfJsQuadSource=l},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js"),e),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js"),e),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsRdfJsStore=void 0;const o=t("../node_modules/@comunica/bus-rdf-update-quads/lib/index.js"),l=t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js");class d extends o.ActorRdfUpdateQuadsDestination{constructor(a){super(a)}async test(a){const c=(0,o.getContextDestination)(a.context);if(!c||typeof c=="string"||!("remove"in c)&&"value"in c&&!c.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(a){const c=(0,o.getContextDestination)(a);return new l.RdfJsQuadDestination("remove"in c?c:c.value)}}e.ActorRdfUpdateQuadsRdfJsStore=d},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadDestination=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/rdf-string/index.js"),d=new o.DataFactory;class u{constructor(c){this.store=c}promisifyEventEmitter(c){return new Promise((p,m)=>{c.on("end",p),c.on("error",m)})}delete(c){return this.promisifyEventEmitter(this.store.remove(c))}insert(c){return this.promisifyEventEmitter(this.store.import(c))}async deleteGraphs(c,p,m){switch(c){case"ALL":await this.promisifyEventEmitter(this.store.deleteGraph(d.defaultGraph()));case"NAMED":const y=this.store.match(),h={};y.on("data",T=>{T.graph.termType!=="DefaultGraph"&&(h[(0,l.termToString)(T.graph)]=!0)}),await this.promisifyEventEmitter(y),await Promise.all(Object.keys(h).map(T=>this.promisifyEventEmitter(this.store.deleteGraph((0,l.stringToTerm)(T)))));break;default:for(const T of Array.isArray(c)?c:[c])await this.promisifyEventEmitter(this.store.deleteGraph(T))}}async createGraphs(c,p){if(p)for(const m of c){const y=this.store.match(void 0,void 0,void 0,m);await new Promise((h,T)=>{y.once("data",()=>{T(new Error(`Unable to create graph ${m.value} as it already exists`))}),y.on("end",h),y.on("error",T)})}}}e.RdfJsQuadDestination=u},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js"),e)},"../node_modules/@comunica/bindings-factory/lib/Bindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bindings=void 0;const o=t("../packages/immutable/dist/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js");class d{constructor(a,c){this.type="bindings",this.dataFactory=a,this.entries=c}has(a){return this.entries.has(typeof a=="string"?a:a.value)}get(a){return this.entries.get(typeof a=="string"?a:a.value)}set(a,c){return new d(this.dataFactory,this.entries.set(typeof a=="string"?a:a.value,c))}delete(a){return new d(this.dataFactory,this.entries.delete(typeof a=="string"?a:a.value))}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),a=>this.dataFactory.variable(a))}values(){return this.iteratorToIterable(this.entries.values())}forEach(a){this.entries.forEach((c,p)=>a(c,this.dataFactory.variable(p)))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([a,c])=>[this.dataFactory.variable(a),c])[Symbol.iterator]()}equals(a){if(!a)return!1;if(this===a)return!0;if(this.size!==a.size)return!1;for(const c of this.keys())if(!this.get(c)?.equals(a.get(c)))return!1;return!0}filter(a){return new d(this.dataFactory,(0,o.Map)(this.entries.filter((c,p)=>a(c,this.dataFactory.variable(p)))))}map(a){return new d(this.dataFactory,(0,o.Map)(this.entries.map((c,p)=>a(c,this.dataFactory.variable(p)))))}merge(a){const c=new Set([...this.iteratorToIterable(this.entries.keys()),...[...a.keys()].map(m=>m.value)]),p=[];for(const m of c){const y=this.entries.get(m),h=a.get(this.dataFactory.variable(m));if(y&&h&&!y.equals(h))return;const T=y||h;p.push([m,T])}return new d(this.dataFactory,(0,o.Map)(p))}mergeWith(a,c){const p=new Set([...this.iteratorToIterable(this.entries.keys()),...[...c.keys()].map(y=>y.value)]),m=[];for(const y of p){const h=this.dataFactory.variable(y),T=this.entries.get(y),g=c.get(h);let v;T&&g&&!T.equals(g)?v=a(T,g,h):v=T||g,m.push([y,v])}return new d(this.dataFactory,(0,o.Map)(m))}toString(){return(0,l.bindingsToString)(this)}*mapIterable(a,c){for(const p of a)yield c(p)}iteratorToIterable(a){return{[Symbol.iterator]:()=>a}}}e.Bindings=d},"../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsFactory=void 0;const o=t("../packages/immutable/dist/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("../node_modules/@comunica/bindings-factory/lib/Bindings.js");class u{constructor(c=new l.DataFactory){this.dataFactory=c}bindings(c=[]){return new d.Bindings(this.dataFactory,(0,o.Map)(c.map(([p,m])=>[p.value,m])))}fromBindings(c){return this.bindings([...c])}fromRecord(c){return this.bindings(Object.entries(c).map(([p,m])=>[this.dataFactory.variable(p),m]))}}e.BindingsFactory=u},"../node_modules/@comunica/bindings-factory/lib/bindingsToString.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindingsToString=void 0;const o=t("../node_modules/rdf-string/index.js");function l(d){const u={};for(const a of d.keys())u[a.value]=(0,o.termToString)(d.get(a));return JSON.stringify(u,null,"  ")}e.bindingsToString=l},"../node_modules/@comunica/bindings-factory/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bindings-factory/lib/Bindings.js"),e),l(t("../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js"),e),l(t("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js"),e)},"../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocess=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorContextPreprocess=l},"../node_modules/@comunica/bus-context-preprocess/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js"),e)},"../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindings=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorHashBindings=l},"../node_modules/@comunica/bus-hash-bindings/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js"),e)},"../node_modules/@comunica/bus-init/lib/ActorInit.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInit=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorInit=l},"../node_modules/@comunica/bus-init/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-init/lib/ActorInit.js"),e)},"../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperation=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorOptimizeQueryOperation=l},"../node_modules/@comunica/bus-optimize-query-operation/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js"),e)},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperation=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/core/lib/index.js"),d=t("../node_modules/@comunica/data-factory/lib/index.js"),u=t("../node_modules/@comunica/bus-query-operation/lib/Bindings.js");let a=0;class c extends l.Actor{constructor(m){super(m)}static getSafeBindings(m){return c.validateQueryOutput(m,"bindings"),m}static getSafeQuads(m){return c.validateQueryOutput(m,"quads"),m}static getSafeBoolean(m){return c.validateQueryOutput(m,"boolean"),m}static getSafeVoid(m){return c.validateQueryOutput(m,"void"),m}static cachifyMetadata(m){let y;return()=>y||(y=m())}static validateQueryOutput(m,y){if(m.type!==y)throw new Error(`Invalid query output type: Expected '${y}' but got '${m.type}'`)}static getBaseExpressionContext(m){const y=m.get(o.KeysInitQuery.queryTimestamp),h=m.get(o.KeysInitQuery.baseIRI);if(m.has(o.KeysInitQuery.extensionFunctionCreator)&&m.has(o.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let T=m.get(o.KeysInitQuery.extensionFunctionCreator);const g=m.get(o.KeysInitQuery.extensionFunctions);return g&&(T=v=>g[v.value]),{now:y,baseIRI:h,extensionFunctionCreator:T}}static getExpressionContext(m,y){return{...this.getBaseExpressionContext(m),bnode:h=>new d.BlankNodeBindingsScoped(h||`BNODE_${a++}`)}}static getAsyncExpressionContext(m,y){const h={...this.getBaseExpressionContext(m),bnode:T=>Promise.resolve(new d.BlankNodeBindingsScoped(T||`BNODE_${a++}`))};return y&&(h.exists=c.createExistenceResolver(m,y)),h}static createExistenceResolver(m,y){return async(h,T)=>{const g=(0,u.materializeOperation)(h.input,T),v=await y.mediate({operation:g,context:m}),S=c.getSafeBindings(v);return new Promise((x,w)=>{S.bindingsStream.on("end",()=>{x(!1)}),S.bindingsStream.on("error",w),S.bindingsStream.on("data",()=>{S.bindingsStream.close(),x(!0)})}).then(x=>h.not?!x:x)}}static throwOnReadOnly(m){if(m.get(o.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}}e.ActorQueryOperation=c},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTyped=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js");class d extends l.ActorQueryOperation{constructor(a,c){if(super({...a,operationName:c}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(a){if(!a.operation)throw new Error("Missing field 'operation' in a query operation action.");if(a.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${a.operation.type}`);const c=a.operation;return this.testOperation(c,a.context)}async run(a){const c=a.context.get(o.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(a.operation.type,void 0,a.operation,a.context.get(o.KeysInitQuery.physicalQueryPlanNode),this.name,{}),a.context=a.context.set(o.KeysInitQuery.physicalQueryPlanNode,a.operation));const p=a.operation,m=a.context.set(o.KeysQueryOperation.operation,p),y=await this.runOperation(p,m);return"metadata"in y&&(y.metadata=l.ActorQueryOperation.cachifyMetadata(y.metadata)),y}}e.ActorQueryOperationTyped=d},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTypedMediated=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js");class l extends o.ActorQueryOperationTyped{constructor(u,a){super(u,a)}}e.ActorQueryOperationTypedMediated=l},"../node_modules/@comunica/bus-query-operation/lib/Bindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materializeOperation=e.materializeTerm=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/rdf-string/index.js"),d=t("sparqlalgebrajs"),u=new o.BindingsFactory;function a(p,m){if(p.termType==="Variable"){const y=m.get(p);if(y)return y}return p}e.materializeTerm=a;function c(p,m,y={}){return y={strictTargetVariables:"strictTargetVariables"in y?y.strictTargetVariables:!1,bindFilter:"bindFilter"in y?y.bindFilter:!0},d.Util.mapOperation(p,{path(h,T){return{recurse:!1,result:T.createPath(a(h.subject,m),h.predicate,a(h.object,m),a(h.graph,m))}},pattern(h,T){return{recurse:!1,result:T.createPattern(a(h.subject,m),a(h.predicate,m),a(h.object,m),a(h.graph,m))}},extend(h){if(m.has(h.variable)){if(y.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,l.termToString)(h.variable)} in a BIND operator.`);return{recurse:!0,result:c(h.input,m,y)}}return{recurse:!0,result:h}},group(h,T){if(y.strictTargetVariables){for(const v of h.variables)if(m.has(v))throw new Error(`Tried to bind variable ${(0,l.termToString)(v)} in a GROUP BY operator.`);return{recurse:!0,result:h}}const g=h.variables.filter(v=>!m.has(v));return{recurse:!0,result:T.createGroup(h.input,g,h.aggregates)}},project(h,T){if(y.strictTargetVariables){for(const S of h.variables)if(m.has(S))throw new Error(`Tried to bind variable ${(0,l.termToString)(S)} in a SELECT operator.`);return{recurse:!0,result:h}}const g=h.variables.filter(S=>!m.has(S)),v=u.bindings(h.variables.map(S=>{const x=m.get(S);if(x)return[S,x]}).filter(S=>Boolean(S)));return{recurse:!1,result:T.createProject(c(h.input,v,y),g)}},values(h,T){if(y.strictTargetVariables){for(const g of h.variables)if(m.has(g))throw new Error(`Tried to bind variable ${(0,l.termToString)(g)} in a VALUES operator.`)}else{const g=h.variables.filter(S=>!m.has(S)),v=h.bindings.map(S=>{const x={...S};let w=!0;return m.forEach((E,O)=>{const I=(0,l.termToString)(O);I in x&&(E.equals(x[I])||(w=!1),delete x[I])}),w?x:void 0}).filter(Boolean);return{recurse:!0,result:T.createValues(g,v)}}return{recurse:!1,result:h}},expression(h,T){if(!y.bindFilter)return{recurse:!1,result:h};if(h.expressionType==="term")return{recurse:!1,result:T.createTermExpression(a(h.term,m))};if(h.expressionType==="aggregate"&&"variable"in h&&m.has(h.variable)){if(y.strictTargetVariables)throw new Error(`Tried to bind ${(0,l.termToString)(h.variable)} in a ${h.aggregator} aggregate.`);return{recurse:!0,result:h}}return{recurse:!0,result:h}}})}e.materializeOperation=c},"../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusQueryOperation=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.BusIndexed{constructor(u){super({...u,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}}e.BusQueryOperation=l},"../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ClosableTransformIterator=void 0;const o=t("asynciterator");class l extends o.TransformIterator{constructor(u,a){super(u,a),this.onClose=a.onClose}_end(u){this.onClose(),super._end(u)}}e.ClosableTransformIterator=l},"../node_modules/@comunica/bus-query-operation/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/Bindings.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js"),e)},"../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParse=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorQueryParse=l},"../node_modules/@comunica/bus-query-parse/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js"),e)},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSort=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfJoinEntriesSort=l},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js"),e)},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSelectivity=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfJoinSelectivity=l},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js"),e)},"../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/@comunica/core/lib/index.js"),u=t("../node_modules/rdf-data-factory/index.js"),a=t("../node_modules/rdf-string/index.js"),c=new u.DataFactory;class p extends d.Actor{constructor(y,h){super(y),this.includeInLogs=!0,this.logicalType=h.logicalType,this.physicalName=h.physicalName,this.limitEntries=h.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=h.limitEntriesMin??!1,this.canHandleUndefs=h.canHandleUndefs??!1}static hash(y,h){return h.filter(T=>y.has(T)).map(T=>(0,a.termToString)(y.get(T))).join("")}static overlappingVariables(y){const h=y.map(g=>g.variables);let T=h[0];for(const g of h.slice(1))T=T.filter(v=>g.some(S=>S.value===v.value));return T}static joinVariables(y){return[...new Set(y.flatMap(h=>h.variables.map(T=>T.value)))].map(h=>c.variable(h))}static joinBindings(...y){if(y.length===0)return null;if(y.length===1)return y[0];let h=y[0];for(const T of y.slice(1)){const g=h.merge(T);if(!g)return null;h=g}return h}static getCardinality(y){return y.cardinality}static async getMetadatas(y){return await Promise.all(y.map(h=>h.output.metadata()))}static async getEntriesWithMetadatas(y){const h=await p.getMetadatas(y);return y.map((T,g)=>({...T,metadata:h[g]}))}static getRequestInitialTimes(y){return y.map(h=>h.pageSize?0:h.requestTime||0)}static getRequestItemTimes(y){return y.map(h=>h.pageSize?(h.requestTime||0)/h.pageSize:0)}async constructResultMetadata(y,h,T,g={}){let v;return g.cardinality?v=g.cardinality:(v=h.reduce((S,x)=>{const w=p.getCardinality(x);return{type:w.type==="estimate"?"estimate":S.type,value:S.value*w.value}},{type:"exact",value:1}),v.value*=(await this.mediatorJoinSelectivity.mediate({entries:y,context:T})).selectivity),{...g,cardinality:{type:v.type,value:v.value},canContainUndefs:g.canContainUndefs??h.some(S=>S.canContainUndefs),variables:p.joinVariables(h)}}async test(y){if(y.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${y.type}' was given.`);if(y.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?y.entries.length<this.limitEntries:y.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${y.entries.length}.`);for(const T of y.entries)if(T.output.type!=="bindings")throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${T.output.type}'`);const h=await p.getMetadatas(y.entries);if(!this.canHandleUndefs){for(const T of h)if(T.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`)}return await this.getJoinCoefficients(y,h)}async run(y){let h;y.context.has(l.KeysInitQuery.physicalQueryPlanLogger)&&(h=y.context.get(l.KeysInitQuery.physicalQueryPlanNode),y.context=y.context.set(l.KeysInitQuery.physicalQueryPlanNode,y));const T=y.context.get(l.KeysInitQuery.physicalQueryPlanLogger);let g;this.includeInLogs&&T&&(g={},T.logOperation(`join-${this.logicalType}`,this.physicalName,y,h,this.name,g));const{result:v,physicalPlanMetadata:S}=await this.getOutput(y),x=await p.getMetadatas(y.entries);return g&&(Object.assign(g,S),g.cardinalities=x.map(p.getCardinality),g.joinCoefficients=await this.getJoinCoefficients(y,x)),v.metadata=o.ActorQueryOperation.cachifyMetadata(v.metadata),v}}e.ActorRdfJoin=p},"../node_modules/@comunica/bus-rdf-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPattern=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfResolveQuadPattern=l},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternSource=void 0;const o=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js");class l extends o.ActorRdfResolveQuadPattern{constructor(u){super(u)}async test(u){return!0}async run(u){const a=await this.getSource(u.context,u.pattern);return await this.getOutput(a,u.pattern,u.context)}async getOutput(u,a,c){return{data:u.match(a.subject,a.predicate,a.object,a.graph)}}}e.ActorRdfResolveQuadPatternSource=l},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js"),e),l(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js"),e),l(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hasContextSingleSourceOfType=e.hasContextSingleSource=e.getContextSourceUrl=e.getContextSourceFirst=e.getContextSource=e.getContextSources=e.getDataSourceContext=e.getDataSourceValue=e.getDataSourceType=e.isDataSourceRawType=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js");function l(g){return typeof g=="string"||"match"in g}e.isDataSourceRawType=l;function d(g){return typeof g=="string"?"":"match"in g?"rdfjsSource":g.type}e.getDataSourceType=d;function u(g){return l(g)?g:g.value}e.getDataSourceValue=u;function a(g,v){return typeof g=="string"||"match"in g||!g.context?v:v.merge(g.context)}e.getDataSourceContext=a;function c(g){return g.get(o.KeysRdfResolveQuadPattern.sources)}e.getContextSources=c;function p(g){return g.get(o.KeysRdfResolveQuadPattern.source)}e.getContextSource=p;function m(g){if(g.has(o.KeysRdfResolveQuadPattern.source))return g.get(o.KeysRdfResolveQuadPattern.source);const v=g.get(o.KeysRdfResolveQuadPattern.sources);if(v?.length===1)return v[0]}e.getContextSourceFirst=m;function y(g){if(g){let v=u(g);if(typeof v=="string"){const S=v.indexOf("#");return S>=0&&(v=v.slice(0,S)),v}}}e.getContextSourceUrl=y;function h(g){const v=p(g);return Boolean(v&&(l(v)||v.value))}e.hasContextSingleSource=h;function T(g,v){const S=p(v);return Boolean(S&&d(S)===g&&u(S))}e.hasContextSingleSourceOfType=T},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuads=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfUpdateQuads=l},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsDestination=e.deskolemize=e.deskolemizeStream=void 0;const o=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js");function u(p,m){return p?.map(y=>o.FederatedQuadSource.deskolemizeQuad(y,m))}e.deskolemizeStream=u;function a(p){const m=p.context.get(l.KeysRdfUpdateQuads.destination),y=p.context.get(l.KeysRdfResolveQuadPattern.sourceIds)?.get(m);return y?{...p,quadStreamInsert:u(p.quadStreamInsert,y),quadStreamDelete:u(p.quadStreamDelete,y)}:p}e.deskolemize=a;class c extends d.ActorRdfUpdateQuads{async test(m){return!0}async run(m){const y=await this.getDestination(m.context);return await this.getOutput(y,a(m),m.context)}async getOutput(m,y,h){return{execute:()=>Promise.all([y.quadStreamInsert?m.insert(y.quadStreamInsert):Promise.resolve(),y.quadStreamDelete?m.delete(y.quadStreamDelete):Promise.resolve(),y.deleteGraphs?m.deleteGraphs(y.deleteGraphs.graphs,y.deleteGraphs.requireExistence,y.deleteGraphs.dropGraphs):Promise.resolve(),y.createGraphs?m.createGraphs(y.createGraphs.graphs,y.createGraphs.requireNonExistence):Promise.resolve()]).then(()=>{})}}}e.ActorRdfUpdateQuadsDestination=c},"../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateHttpResponse=void 0;const o=t("./require-empty.js"),l=t("../node_modules/stream-to-string/index.js");async function d(u,a){if(a.status>=400){let c="empty response";if(a.body){const p=o.ActorHttp.toNodeReadable(a.body);c=await l(p)}throw new Error(`Could not update ${u} (HTTP status ${a.status}):
${c}`)}await a.body?.cancel()}e.validateHttpResponse=d},"../node_modules/@comunica/bus-rdf-update-quads/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js"),e),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js"),e),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js"),e),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getContextDestinationUrl=e.getContextDestinationFirst=e.getContextDestination=e.getDataDestinationContext=e.getDataDestinationValue=e.getDataDestinationType=e.isDataDestinationRawType=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js");function l(y){return typeof y=="string"||"remove"in y}e.isDataDestinationRawType=l;function d(y){return typeof y=="string"?"":"remove"in y?"rdfjsStore":y.type}e.getDataDestinationType=d;function u(y){return l(y)?y:y.value}e.getDataDestinationValue=u;function a(y,h){return typeof y=="string"||"remove"in y||!y.context?h:h.merge(y.context)}e.getDataDestinationContext=a;function c(y){return y.get(o.KeysRdfUpdateQuads.destination)}e.getContextDestination=c;function p(y){if(y.has(o.KeysRdfUpdateQuads.destination))return y.get(o.KeysRdfUpdateQuads.destination)}e.getContextDestinationFirst=p;function m(y){if(y){let h=u(y);if(typeof h=="string"){const T=h.indexOf("#");return T>=0&&(h=h.slice(0,T)),h}}}e.getContextDestinationUrl=m},"../node_modules/@comunica/context-entries/lib/Keys.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeysRdfUpdateQuads=e.KeysRdfResolveQuadPattern=e.KeysRdfParseHtmlScript=e.KeysRdfParseJsonLd=e.KeysQueryOperation=e.KeysInitQuery=e.KeysHttpProxy=e.KeysHttpMemento=e.KeysHttpWayback=e.KeysHttp=e.KeysCore=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");e.KeysCore={log:o.CONTEXT_KEY_LOGGER},e.KeysHttp={includeCredentials:new o.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new o.ActionContextKey("@comunica/bus-http:auth"),fetch:new o.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new o.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new o.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new o.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new o.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new o.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")},e.KeysHttpWayback={recoverBrokenLinks:new o.ActionContextKey("@comunica/bus-http:recover-broken-links")},e.KeysHttpMemento={datetime:new o.ActionContextKey("@comunica/actor-http-memento:datetime")},e.KeysHttpProxy={httpProxyHandler:new o.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},e.KeysInitQuery={initialBindings:new o.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new o.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new o.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new o.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new o.ActionContextKey("@comunica/actor-init-query:queryString"),query:new o.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new o.ActionContextKey("@comunica/actor-init-query:baseIRI"),queryTimestamp:new o.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new o.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new o.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new o.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new o.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new o.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new o.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new o.ActionContextKey("@context")},e.KeysQueryOperation={operation:new o.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new o.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new o.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new o.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new o.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new o.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new o.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new o.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),localizeBlankNodes:new o.ActionContextKey("@comunica/actor-query-operation:localizeBlankNodes")},e.KeysRdfParseJsonLd={documentLoader:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},e.KeysRdfParseHtmlScript={processingHtmlScript:new o.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new o.ActionContextKey("extractAllScripts")},e.KeysRdfResolveQuadPattern={sources:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds")},e.KeysRdfUpdateQuads={destination:new o.ActionContextKey("@comunica/bus-rdf-update-quads:destination")}},"../node_modules/@comunica/context-entries/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/context-entries/lib/Keys.js"),e)},"../node_modules/@comunica/core/lib/ActionContext.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionContextKey=e.ActionContext=void 0;const o=t("../packages/immutable/dist/index.js");class l{constructor(a={}){this.map=(0,o.Map)(a)}setDefault(a,c){return this.has(a)?this:this.set(a,c)}set(a,c){return this.setRaw(a.name,c)}setRaw(a,c){return new l(this.map.set(a,c))}delete(a){return new l(this.map.delete(a.name))}get(a){return this.getRaw(a.name)}getRaw(a){return this.map.get(a)}getSafe(a){if(!this.has(a))throw new Error(`Context entry ${a.name} is required but not available`);return this.get(a)}has(a){return this.hasRaw(a.name)}hasRaw(a){return this.map.has(a)}merge(...a){let c=this;for(const p of a)for(const m of p.keys())c=c.set(m,p.get(m));return c}keys(){return[...this.map.keys()].map(a=>new d(a))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(a){return a instanceof l?a:new l((0,o.Map)(a||{}))}}e.ActionContext=l;class d{constructor(a){this.name=a}}e.ActionContextKey=d},"../node_modules/@comunica/core/lib/ActionObserver.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionObserver=void 0;class t{constructor(l){Object.assign(this,l)}}e.ActionObserver=t},"../node_modules/@comunica/core/lib/Actor.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;const o=t("../node_modules/@comunica/core/lib/ContextEntries.js");class l{constructor(u){this.beforeActors=[],Object.assign(this,u),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(u){return u.get(o.CONTEXT_KEY_LOGGER)}runObservable(u){const a=this.run(u);return this.bus.onRun(this,u,a),a}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(u,a){const c=a?a():{};return c.actor=this.name,c}logTrace(u,a,c){const p=l.getContextLogger(u);p&&p.trace(a,this.getDefaultLogData(u,c))}logDebug(u,a,c){const p=l.getContextLogger(u);p&&p.debug(a,this.getDefaultLogData(u,c))}logInfo(u,a,c){const p=l.getContextLogger(u);p&&p.info(a,this.getDefaultLogData(u,c))}logWarn(u,a,c){const p=l.getContextLogger(u);p&&p.warn(a,this.getDefaultLogData(u,c))}logError(u,a,c){const p=l.getContextLogger(u);p&&p.error(a,this.getDefaultLogData(u,c))}logFatal(u,a,c){const p=l.getContextLogger(u);p&&p.fatal(a,this.getDefaultLogData(u,c))}}e.Actor=l},"../node_modules/@comunica/core/lib/Bus.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bus=void 0;class t{constructor(l){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,l)}subscribe(l){this.actors.push(l),this.reorderForDependencies()}subscribeObserver(l){this.observers.push(l)}unsubscribe(l){const d=this.actors.indexOf(l);return d>=0?(this.actors.splice(d,1),!0):!1}unsubscribeObserver(l){const d=this.observers.indexOf(l);return d>=0?(this.observers.splice(d,1),!0):!1}publish(l){return this.actors.map(d=>({actor:d,reply:d.test(l)}))}onRun(l,d,u){for(const a of this.observers)a.onRun(l,d,u)}addDependencies(l,d){for(const u of d){let a=this.dependencyLinks.get(u);a||(a=[],this.dependencyLinks.set(u,a)),a.push(l)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const l=[];for(const d of this.dependencyLinks.keys()){const u=this.actors.indexOf(d);u>=0&&(this.actors.splice(u,1),l.push(d))}for(;l.length>0;){let d=-1;for(let a=0;a<l.length;a++){let c=!0;for(const p of this.dependencyLinks.get(l[a]))if(!this.actors.includes(p)&&l.includes(p)){c=!1;break}if(c){d=a;break}}if(d<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const u=l.splice(d,1)[0];this.actors.push(u)}}}}e.Bus=t},"../node_modules/@comunica/core/lib/BusIndexed.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusIndexed=void 0;const o=t("../node_modules/@comunica/core/lib/Bus.js");class l extends o.Bus{constructor(u){super(u),this.actorsIndex={}}subscribe(u){const a=this.getActorIdentifier(u)||"_undefined_";let c=this.actorsIndex[a];c||(c=this.actorsIndex[a]=[]),c.push(u),super.subscribe(u)}unsubscribe(u){const a=this.getActorIdentifier(u)||"_undefined_",c=this.actorsIndex[a];if(c){const p=c.indexOf(u);p>=0&&c.splice(p,1),c.length===0&&delete this.actorsIndex[a]}return super.unsubscribe(u)}publish(u){const a=this.getActionIdentifier(u);return a?[...this.actorsIndex[a]||[],...this.actorsIndex._undefined_||[]].map(p=>({actor:p,reply:p.test(u)})):super.publish(u)}getActorIdentifier(u){return this.actorIdentifierFields.reduce((a,c)=>a[c],u)}getActionIdentifier(u){return this.actionIdentifierFields.reduce((a,c)=>a[c],u)}}e.BusIndexed=l},"../node_modules/@comunica/core/lib/ContextEntries.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_KEY_LOGGER=void 0;const o=t("../node_modules/@comunica/core/lib/ActionContext.js");e.CONTEXT_KEY_LOGGER=new o.ActionContextKey("@comunica/core:log")},"../node_modules/@comunica/core/lib/Mediator.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Mediator=void 0;class t{constructor(l){Object.assign(this,l)}publish(l){const d=this.bus.publish(l);if(d.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return d}async mediateActor(l){return await this.mediateWith(l,this.publish(l))}async mediate(l){return(await this.mediateActor(l)).runObservable(l)}}e.Mediator=t},"../node_modules/@comunica/core/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(a,c,p,m){m===void 0&&(m=p);var y=Object.getOwnPropertyDescriptor(c,p);(!y||("get"in y?!c.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return c[p]}}),Object.defineProperty(a,m,y)}:function(a,c,p,m){m===void 0&&(m=p),a[m]=c[p]}),l=this&&this.__exportStar||function(a,c){for(var p in a)p!=="default"&&!Object.prototype.hasOwnProperty.call(c,p)&&o(c,a,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;const u=t("../node_modules/@comunica/types/lib/index.js").Logger;e.Logger=u,l(t("../node_modules/@comunica/core/lib/ActionContext.js"),e),l(t("../node_modules/@comunica/core/lib/Bus.js"),e),l(t("../node_modules/@comunica/core/lib/BusIndexed.js"),e),l(t("../node_modules/@comunica/core/lib/ContextEntries.js"),e),l(t("../node_modules/@comunica/core/lib/ActionObserver.js"),e),l(t("../node_modules/@comunica/core/lib/Actor.js"),e),l(t("../node_modules/@comunica/core/lib/Mediator.js"),e)},"../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeBindingsScoped=void 0;class t{constructor(l){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=l}equals(l){return!!l&&l.termType==="BlankNode"&&l.value===this.value}}e.BlankNodeBindingsScoped=t},"../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeScoped=void 0;class t{constructor(l,d){this.termType="BlankNode",this.value=l,this.skolemized=d}equals(l){return!!l&&l.termType==="BlankNode"&&l.value===this.value}}e.BlankNodeScoped=t},"../node_modules/@comunica/data-factory/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js"),e),l(t("../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js"),e)},"../node_modules/@comunica/logger-void/lib/LoggerVoid.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoggerVoid=void 0;const o=t("../node_modules/@comunica/types/lib/index.js");class l extends o.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}e.LoggerVoid=l},"../node_modules/@comunica/logger-void/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/logger-void/lib/LoggerVoid.js"),e)},"../node_modules/@comunica/mediator-all/lib/MediatorAll.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorAll=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u)}async mediate(u){const a=[];let c;try{c=this.publish(u)}catch{c=[]}for(const m of c)try{await m.reply,a.push(m.actor)}catch{}return(await Promise.all(a.map(m=>m.runObservable(u))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}}e.MediatorAll=l},"../node_modules/@comunica/mediator-all/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-all/lib/MediatorAll.js"),e)},"../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombinePipeline=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u)}async mediate(u){let a;try{a=this.publish(u)}catch{return u}if(this.filterErrors){const p=[];for(const m of a)try{await m.reply,p.push(m)}catch{}a=p}if(a=await Promise.all(a.map(async({actor:p,reply:m})=>({actor:p,reply:await m}))),this.order){const p=m=>{const y=this.field?m[this.field]:m;if(typeof y!="number")throw new Error("Cannot order elements that are not numbers.");return y};a=a.sort((m,y)=>(this.order==="increasing"?1:-1)*(p(m.reply)-p(y.reply)))}let c=u;for(const{actor:p}of a)c={...c,...await p.runObservable(c)};return c}mediateWith(){throw new Error("Method not supported.")}}e.MediatorCombinePipeline=l},"../node_modules/@comunica/mediator-combine-pipeline/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js"),e)},"../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombineUnion=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u),this.combiner=this.createCombiner()}async mediate(u){let a;try{a=this.publish(u)}catch{a=[]}await Promise.all(a.map(({reply:p})=>p));const c=await Promise.all(a.map(p=>p.actor.runObservable(u)));return this.combiner(c)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return u=>{const a={};return a[this.field]={},[{}].concat(u.map(c=>c[this.field])).forEach((c,p,m)=>{a[this.field]={...c,...a[this.field]}}),a}}}e.MediatorCombineUnion=l},"../node_modules/@comunica/mediator-combine-union/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js"),e)},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorJoinCoefficientsFixed=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/core/lib/index.js");class d extends l.Mediator{constructor(a){super(a)}async mediateWith(a,c){const p=[],m=c.map(({reply:w})=>w).map(w=>w.catch(E=>{p.push(E)})),y=await Promise.all(m);let h=y.map((w,E)=>{if(w)return w.iterations*this.cpuWeight+w.persistedItems*this.memoryWeight+w.blockingItems*this.timeWeight+w.requestTime*this.ioWeight});const T=Math.max(...h.filter(w=>w!==void 0)),g=a.context.get(o.KeysQueryOperation.limitIndicator);g&&(h=h.map((w,E)=>w!==void 0&&y[E].persistedItems>0&&y[E].iterations>g?w+T:w));let v=-1,S=Number.POSITIVE_INFINITY;for(const[w,E]of h.entries())E!==void 0&&(v===-1||E<S)&&(v=w,S=E);if(v<0)throw new Error(`All actors rejected their test in ${this.name}
${p.map(w=>w.message).join(`
`)}`);const x=c[v].actor;return x.includeInLogs&&l.Actor.getContextLogger(a.context)?.debug(`Determined physical join operator '${x.logicalType}-${x.physicalName}'`,{entries:a.entries.length,variables:await Promise.all(a.entries.map(async w=>(await w.output.metadata()).variables.map(E=>E.value))),costs:Object.fromEntries(h.map((w,E)=>[`${c[E].actor.logicalType}-${c[E].actor.physicalName}`,w])),coefficients:Object.fromEntries(y.map((w,E)=>[`${c[E].actor.logicalType}-${c[E].actor.physicalName}`,w]))}),x}}e.MediatorJoinCoefficientsFixed=d},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js"),e)},"../node_modules/@comunica/mediator-number/lib/MediatorNumber.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorNumber=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return u=>u.reduce((a,c,p)=>{const m=this.getOrDefault(c[this.field],Number.POSITIVE_INFINITY);return m!==null&&(Number.isNaN(a[0])||a[0]>m)?[m,p]:a},[Number.NaN,-1])[1];case"max":return u=>u.reduce((a,c,p)=>{const m=this.getOrDefault(c[this.field],Number.NEGATIVE_INFINITY);return m!==null&&(Number.isNaN(a[0])||a[0]<m)?[m,p]:a},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(u,a){return u===void 0?a:u}async mediateWith(u,a){let c=a.map(({reply:h})=>h);const p=[];if(this.ignoreErrors){const h={};h[this.field]=null,c=c.map(T=>T.catch(g=>(p.push(g),h)))}const m=await Promise.all(c),y=this.indexPicker(m);if(y<0)throw new Error(`All actors rejected their test in ${this.name}
${p.map(h=>h.message).join(`
`)}`);return a[y].actor}}e.MediatorNumber=l},"../node_modules/@comunica/mediator-number/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-number/lib/MediatorNumber.js"),e)},"../node_modules/@comunica/mediator-race/lib/MediatorRace.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorRace=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u)}mediateWith(u,a){return new Promise((c,p)=>{const m=[];for(const y of a)y.reply.then(()=>{c(y.actor)}).catch(h=>{m.push(h),m.length===a.length&&p(new Error(`${this.name} mediated over all rejecting actors:
${m.map(T=>T.message).join(`
`)}`))})})}}e.MediatorRace=l},"../node_modules/@comunica/mediator-race/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-race/lib/MediatorRace.js"),e)},"../node_modules/@comunica/types/lib/Bindings.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IActionContext.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/ICliArgsHandler.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataDestination.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataSource.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IJoinEntry.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IMetadata.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IProxyHandler.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryContext.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryEngine.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryOperationResult.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/Logger.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;class t{static getLevelOrdinal(l){return t.LEVELS[l]}}e.Logger=t,t.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5}},"../node_modules/@comunica/types/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/types/lib/Bindings.js"),e),l(t("../node_modules/@comunica/types/lib/IActionContext.js"),e),l(t("../node_modules/@comunica/types/lib/ICliArgsHandler.js"),e),l(t("../node_modules/@comunica/types/lib/IDataDestination.js"),e),l(t("../node_modules/@comunica/types/lib/IDataSource.js"),e),l(t("../node_modules/@comunica/types/lib/IJoinEntry.js"),e),l(t("../node_modules/@comunica/types/lib/IMetadata.js"),e),l(t("../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js"),e),l(t("../node_modules/@comunica/types/lib/IProxyHandler.js"),e),l(t("../node_modules/@comunica/types/lib/IQueryContext.js"),e),l(t("../node_modules/@comunica/types/lib/IQueryEngine.js"),e),l(t("../node_modules/@comunica/types/lib/IQueryOperationResult.js"),e),l(t("../node_modules/@comunica/types/lib/Logger.js"),e)},"../node_modules/asyncjoin/index.js":(n,e,t)=>{const o=t("../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js"),l=t("../node_modules/asyncjoin/join/HashJoin.js"),d=t("../node_modules/asyncjoin/join/NestedLoopJoin.js"),u=t("../node_modules/asyncjoin/join/SymmetricHashJoin.js"),a=t("../node_modules/asyncjoin/util/MergeIterator.js");n.exports={DynamicNestedLoopJoin:o,HashJoin:l,NestedLoopJoin:d,SymmetricHashJoin:u,MergeStream:a}},"../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js":(n,e,t)=>{let o=t("asynciterator"),l=o.MultiTransformIterator,d=o.SimpleTransformIterator;class u extends l{constructor(c,p,m,y){super(c,y),this.funRight=p,this.funJoin=m}_createTransformer(c){return new d(this.funRight(c),{transform:(p,m,y)=>{let h=this.funJoin(c,p);h!==null&&y(h),m()}})}}n.exports=u},"../node_modules/asyncjoin/join/HashJoin.js":(n,e,t)=>{let o=t("asynciterator").AsyncIterator;class l extends o{constructor(u,a,c,p){super(),this.addedDataListener=!1,this.left=u,this.right=a,this.funHash=c,this.funJoin=p,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",y=>this.destroy(y)),this.right.on("error",y=>this.destroy(y)),this.readable=!1,this.left.on("end",m.bind(this));function m(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",y=>{y==="data"&&!this.addedDataListener&&(this.addedDataListener=!0,this._addDataListener())})}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener());;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let a=this.matches[this.matchIdx++],c=this.funJoin(a,this.match);if(c!==null)return c}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let u=this.funHash(this.match);this.matches=this.leftMap.get(u)||[],this.matchIdx=0}}_addDataListener(){this.left.on("data",u.bind(this));function u(a){let c=this.funHash(a);this.leftMap.has(c)||this.leftMap.set(c,[]),this.leftMap.get(c).push(a)}}}n.exports=l},"../node_modules/asyncjoin/join/NestedLoopJoin.js":(n,e,t)=>{const{MultiTransformIterator:o,SimpleTransformIterator:l,scheduleTask:d}=t("asynciterator");class u extends o{constructor(c,p,m,y){super(c,y),this.right=p,this.funJoin=m,this.on("end",()=>this.right.close())}_end(){super._end(),d(()=>this.right.destroy())}_createTransformer(c){return new l(this.right.clone(),{transform:(p,m,y)=>{let h=this.funJoin(c,p);h!==null&&y(h),m()}})}}n.exports=u},"../node_modules/asyncjoin/join/SymmetricHashJoin.js":(n,e,t)=>{let o=t("asynciterator").AsyncIterator;class l extends o{constructor(u,a,c,p){super(),this.left=u,this.right=a,this.funHash=c,this.funJoin=p,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",m=>this.destroy(m)),this.right.on("error",m=>this.destroy(m)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let m=this.matches[this.matchIdx++],y=this.usedLeft?this.funJoin(this.match,m):this.funJoin(m,this.match);if(y!==null)return y}this.hasResults()||this._end();let u=null;for(let m=0;m<2&&(u=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,u===null);++m);if(this.done||u===null)return this.readable=!1,null;let a=this.funHash(u),c=this.usedLeft?this.leftMap:this.rightMap;return c.has(a)||c.set(a,[]),c.get(a).push(u),this.match=u,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(a)||[],this.matchIdx=0,this.read()}}n.exports=l},"../node_modules/asyncjoin/util/MergeIterator.js":(n,e,t)=>{let o=t("asynciterator").AsyncIterator;class l extends o{constructor(u){super(),Array.isArray(u)||(u=Array.prototype.slice.call(arguments)),this.streams=u;for(let a of u)a.on("readable",()=>this.emit("readable")),a.on("end",()=>this._removeStream(a));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(u){let a=this.streams.indexOf(u);a<0||(this.streams.splice(a,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let u of this.streams)u.close()}read(){for(let u=0;u<this.streams.length;++u){this.idx=(this.idx+1)%this.streams.length;let a=this.streams[this.idx].read();if(a!==null)return a}return null}}n.exports=l},"../node_modules/bignumber.js/bignumber.js":function(n,e,t){var o;(function(l){var d,u=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,c=Math.floor,p="[BigNumber Error] ",m=p+"Number primitive has more than 15 significant digits: ",y=1e14,h=14,T=9007199254740991,g=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],v=1e7,S=1e9;function x(H){var B,M,V,$=ce.prototype={constructor:ce,toString:null,valueOf:null},te=new ce(1),J=20,Z=4,Y=-7,oe=21,ie=-1e7,ne=1e7,re=!1,he=1,we=0,Te={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ee="0123456789abcdefghijklmnopqrstuvwxyz",_e=!0;function ce(D,k){var G,j,b,_,N,L,F,U,X=this;if(!(X instanceof ce))return new ce(D,k);if(k==null){if(D&&D._isBigNumber===!0){X.s=D.s,!D.c||D.e>ne?X.c=X.e=null:D.e<ie?X.c=[X.e=0]:(X.e=D.e,X.c=D.c.slice());return}if((L=typeof D=="number")&&D*0==0){if(X.s=1/D<0?(D=-D,-1):1,D===~~D){for(_=0,N=D;N>=10;N/=10,_++);_>ne?X.c=X.e=null:(X.e=_,X.c=[D]);return}U=String(D)}else{if(!u.test(U=String(D)))return V(X,U,L);X.s=U.charCodeAt(0)==45?(U=U.slice(1),-1):1}(_=U.indexOf("."))>-1&&(U=U.replace(".","")),(N=U.search(/e/i))>0?(_<0&&(_=N),_+=+U.slice(N+1),U=U.substring(0,N)):_<0&&(_=U.length)}else{if(I(k,2,Ee.length,"Base"),k==10&&_e)return X=new ce(D),Oe(X,J+X.e+1,Z);if(U=String(D),L=typeof D=="number"){if(D*0!=0)return V(X,U,L,k);if(X.s=1/D<0?(U=U.slice(1),-1):1,ce.DEBUG&&U.replace(/^0\.0*|\./,"").length>15)throw Error(m+D)}else X.s=U.charCodeAt(0)===45?(U=U.slice(1),-1):1;for(G=Ee.slice(0,k),_=N=0,F=U.length;N<F;N++)if(G.indexOf(j=U.charAt(N))<0){if(j=="."){if(N>_){_=F;continue}}else if(!b&&(U==U.toUpperCase()&&(U=U.toLowerCase())||U==U.toLowerCase()&&(U=U.toUpperCase()))){b=!0,N=-1,_=0;continue}return V(X,String(D),L,k)}L=!1,U=M(U,k,10,X.s),(_=U.indexOf("."))>-1?U=U.replace(".",""):_=U.length}for(N=0;U.charCodeAt(N)===48;N++);for(F=U.length;U.charCodeAt(--F)===48;);if(U=U.slice(N,++F)){if(F-=N,L&&ce.DEBUG&&F>15&&(D>T||D!==c(D)))throw Error(m+X.s*D);if((_=_-N-1)>ne)X.c=X.e=null;else if(_<ie)X.c=[X.e=0];else{if(X.e=_,X.c=[],N=(_+1)%h,_<0&&(N+=h),N<F){for(N&&X.c.push(+U.slice(0,N)),F-=h;N<F;)X.c.push(+U.slice(N,N+=h));N=h-(U=U.slice(N)).length}else N-=F;for(;N--;U+="0");X.c.push(+U)}}else X.c=[X.e=0]}ce.clone=x,ce.ROUND_UP=0,ce.ROUND_DOWN=1,ce.ROUND_CEIL=2,ce.ROUND_FLOOR=3,ce.ROUND_HALF_UP=4,ce.ROUND_HALF_DOWN=5,ce.ROUND_HALF_EVEN=6,ce.ROUND_HALF_CEIL=7,ce.ROUND_HALF_FLOOR=8,ce.EUCLID=9,ce.config=ce.set=function(D){var k,G;if(D!=null)if(typeof D=="object"){if(D.hasOwnProperty(k="DECIMAL_PLACES")&&(G=D[k],I(G,0,S,k),J=G),D.hasOwnProperty(k="ROUNDING_MODE")&&(G=D[k],I(G,0,8,k),Z=G),D.hasOwnProperty(k="EXPONENTIAL_AT")&&(G=D[k],G&&G.pop?(I(G[0],-S,0,k),I(G[1],0,S,k),Y=G[0],oe=G[1]):(I(G,-S,S,k),Y=-(oe=G<0?-G:G))),D.hasOwnProperty(k="RANGE"))if(G=D[k],G&&G.pop)I(G[0],-S,-1,k),I(G[1],1,S,k),ie=G[0],ne=G[1];else if(I(G,-S,S,k),G)ie=-(ne=G<0?-G:G);else throw Error(p+k+" cannot be zero: "+G);if(D.hasOwnProperty(k="CRYPTO"))if(G=D[k],G===!!G)if(G)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))re=G;else throw re=!G,Error(p+"crypto unavailable");else re=G;else throw Error(p+k+" not true or false: "+G);if(D.hasOwnProperty(k="MODULO_MODE")&&(G=D[k],I(G,0,9,k),he=G),D.hasOwnProperty(k="POW_PRECISION")&&(G=D[k],I(G,0,S,k),we=G),D.hasOwnProperty(k="FORMAT"))if(G=D[k],typeof G=="object")Te=G;else throw Error(p+k+" not an object: "+G);if(D.hasOwnProperty(k="ALPHABET"))if(G=D[k],typeof G=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(G))_e=G.slice(0,10)=="0123456789",Ee=G;else throw Error(p+k+" invalid: "+G)}else throw Error(p+"Object expected: "+D);return{DECIMAL_PLACES:J,ROUNDING_MODE:Z,EXPONENTIAL_AT:[Y,oe],RANGE:[ie,ne],CRYPTO:re,MODULO_MODE:he,POW_PRECISION:we,FORMAT:Te,ALPHABET:Ee}},ce.isBigNumber=function(D){if(!D||D._isBigNumber!==!0)return!1;if(!ce.DEBUG)return!0;var k,G,j=D.c,b=D.e,_=D.s;e:if({}.toString.call(j)=="[object Array]"){if((_===1||_===-1)&&b>=-S&&b<=S&&b===c(b)){if(j[0]===0){if(b===0&&j.length===1)return!0;break e}if(k=(b+1)%h,k<1&&(k+=h),String(j[0]).length==k){for(k=0;k<j.length;k++)if(G=j[k],G<0||G>=y||G!==c(G))break e;if(G!==0)return!0}}}else if(j===null&&b===null&&(_===null||_===1||_===-1))return!0;throw Error(p+"Invalid BigNumber: "+D)},ce.maximum=ce.max=function(){return Ie(arguments,$.lt)},ce.minimum=ce.min=function(){return Ie(arguments,$.gt)},ce.random=function(){var D=9007199254740992,k=Math.random()*D&2097151?function(){return c(Math.random()*D)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(G){var j,b,_,N,L,F=0,U=[],X=new ce(te);if(G==null?G=J:I(G,0,S),N=a(G/h),re)if(crypto.getRandomValues){for(j=crypto.getRandomValues(new Uint32Array(N*=2));F<N;)L=j[F]*131072+(j[F+1]>>>11),L>=9e15?(b=crypto.getRandomValues(new Uint32Array(2)),j[F]=b[0],j[F+1]=b[1]):(U.push(L%1e14),F+=2);F=N/2}else if(crypto.randomBytes){for(j=crypto.randomBytes(N*=7);F<N;)L=(j[F]&31)*281474976710656+j[F+1]*1099511627776+j[F+2]*4294967296+j[F+3]*16777216+(j[F+4]<<16)+(j[F+5]<<8)+j[F+6],L>=9e15?crypto.randomBytes(7).copy(j,F):(U.push(L%1e14),F+=7);F=N/7}else throw re=!1,Error(p+"crypto unavailable");if(!re)for(;F<N;)L=k(),L<9e15&&(U[F++]=L%1e14);for(N=U[--F],G%=h,N&&G&&(L=g[h-G],U[F]=c(N/L)*L);U[F]===0;U.pop(),F--);if(F<0)U=[_=0];else{for(_=-1;U[0]===0;U.splice(0,1),_-=h);for(F=1,L=U[0];L>=10;L/=10,F++);F<h&&(_-=h-F)}return X.e=_,X.c=U,X}}(),ce.sum=function(){for(var D=1,k=arguments,G=new ce(k[0]);D<k.length;)G=G.plus(k[D++]);return G},M=function(){var D="0123456789";function k(G,j,b,_){for(var N,L=[0],F,U=0,X=G.length;U<X;){for(F=L.length;F--;L[F]*=j);for(L[0]+=_.indexOf(G.charAt(U++)),N=0;N<L.length;N++)L[N]>b-1&&(L[N+1]==null&&(L[N+1]=0),L[N+1]+=L[N]/b|0,L[N]%=b)}return L.reverse()}return function(G,j,b,_,N){var L,F,U,X,ee,ue,de,fe,me=G.indexOf("."),ve=J,be=Z;for(me>=0&&(X=we,we=0,G=G.replace(".",""),fe=new ce(j),ue=fe.pow(G.length-me),we=X,fe.c=k(W(E(ue.c),ue.e,"0"),10,b,D),fe.e=fe.c.length),de=k(G,j,b,N?(L=Ee,D):(L=D,Ee)),U=X=de.length;de[--X]==0;de.pop());if(!de[0])return L.charAt(0);if(me<0?--U:(ue.c=de,ue.e=U,ue.s=_,ue=B(ue,fe,ve,be,b),de=ue.c,ee=ue.r,U=ue.e),F=U+ve+1,me=de[F],X=b/2,ee=ee||F<0||de[F+1]!=null,ee=be<4?(me!=null||ee)&&(be==0||be==(ue.s<0?3:2)):me>X||me==X&&(be==4||ee||be==6&&de[F-1]&1||be==(ue.s<0?8:7)),F<1||!de[0])G=ee?W(L.charAt(1),-ve,L.charAt(0)):L.charAt(0);else{if(de.length=F,ee)for(--b;++de[--F]>b;)de[F]=0,F||(++U,de=[1].concat(de));for(X=de.length;!de[--X];);for(me=0,G="";me<=X;G+=L.charAt(de[me++]));G=W(G,U,L.charAt(0))}return G}}(),B=function(){function D(j,b,_){var N,L,F,U,X=0,ee=j.length,ue=b%v,de=b/v|0;for(j=j.slice();ee--;)F=j[ee]%v,U=j[ee]/v|0,N=de*F+U*ue,L=ue*F+N%v*v+X,X=(L/_|0)+(N/v|0)+de*U,j[ee]=L%_;return X&&(j=[X].concat(j)),j}function k(j,b,_,N){var L,F;if(_!=N)F=_>N?1:-1;else for(L=F=0;L<_;L++)if(j[L]!=b[L]){F=j[L]>b[L]?1:-1;break}return F}function G(j,b,_,N){for(var L=0;_--;)j[_]-=L,L=j[_]<b[_]?1:0,j[_]=L*N+j[_]-b[_];for(;!j[0]&&j.length>1;j.splice(0,1));}return function(j,b,_,N,L){var F,U,X,ee,ue,de,fe,me,ve,be,ge,Ae,Ce,Fe,ct,et,dt,ze=j.s==b.s?1:-1,ke=j.c,Qe=b.c;if(!ke||!ke[0]||!Qe||!Qe[0])return new ce(!j.s||!b.s||(ke?Qe&&ke[0]==Qe[0]:!Qe)?NaN:ke&&ke[0]==0||!Qe?ze*0:ze/0);for(me=new ce(ze),ve=me.c=[],U=j.e-b.e,ze=_+U+1,L||(L=y,U=w(j.e/h)-w(b.e/h),ze=ze/h|0),X=0;Qe[X]==(ke[X]||0);X++);if(Qe[X]>(ke[X]||0)&&U--,ze<0)ve.push(1),ee=!0;else{for(Fe=ke.length,et=Qe.length,X=0,ze+=2,ue=c(L/(Qe[0]+1)),ue>1&&(Qe=D(Qe,ue,L),ke=D(ke,ue,L),et=Qe.length,Fe=ke.length),Ce=et,be=ke.slice(0,et),ge=be.length;ge<et;be[ge++]=0);dt=Qe.slice(),dt=[0].concat(dt),ct=Qe[0],Qe[1]>=L/2&&ct++;do{if(ue=0,F=k(Qe,be,et,ge),F<0){if(Ae=be[0],et!=ge&&(Ae=Ae*L+(be[1]||0)),ue=c(Ae/ct),ue>1)for(ue>=L&&(ue=L-1),de=D(Qe,ue,L),fe=de.length,ge=be.length;k(de,be,fe,ge)==1;)ue--,G(de,et<fe?dt:Qe,fe,L),fe=de.length,F=1;else ue==0&&(F=ue=1),de=Qe.slice(),fe=de.length;if(fe<ge&&(de=[0].concat(de)),G(be,de,ge,L),ge=be.length,F==-1)for(;k(Qe,be,et,ge)<1;)ue++,G(be,et<ge?dt:Qe,ge,L),ge=be.length}else F===0&&(ue++,be=[0]);ve[X++]=ue,be[0]?be[ge++]=ke[Ce]||0:(be=[ke[Ce]],ge=1)}while((Ce++<Fe||be[0]!=null)&&ze--);ee=be[0]!=null,ve[0]||ve.splice(0,1)}if(L==y){for(X=1,ze=ve[0];ze>=10;ze/=10,X++);Oe(me,_+(me.e=X+U*h-1)+1,N,ee)}else me.e=U,me.r=+ee;return me}}();function je(D,k,G,j){var b,_,N,L,F;if(G==null?G=Z:I(G,0,8),!D.c)return D.toString();if(b=D.c[0],N=D.e,k==null)F=E(D.c),F=j==1||j==2&&(N<=Y||N>=oe)?Q(F,N):W(F,N,"0");else if(D=Oe(new ce(D),k,G),_=D.e,F=E(D.c),L=F.length,j==1||j==2&&(k<=_||_<=Y)){for(;L<k;F+="0",L++);F=Q(F,_)}else if(k-=N,F=W(F,_,"0"),_+1>L){if(--k>0)for(F+=".";k--;F+="0");}else if(k+=_-L,k>0)for(_+1==L&&(F+=".");k--;F+="0");return D.s<0&&b?"-"+F:F}function Ie(D,k){for(var G,j=1,b=new ce(D[0]);j<D.length;j++)if(G=new ce(D[j]),G.s)k.call(b,G)&&(b=G);else{b=G;break}return b}function Re(D,k,G){for(var j=1,b=k.length;!k[--b];k.pop());for(b=k[0];b>=10;b/=10,j++);return(G=j+G*h-1)>ne?D.c=D.e=null:G<ie?D.c=[D.e=0]:(D.e=G,D.c=k),D}V=function(){var D=/^(-?)0([xbo])(?=\w[\w.]*$)/i,k=/^([^.]+)\.$/,G=/^\.([^.]+)$/,j=/^-?(Infinity|NaN)$/,b=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(_,N,L,F){var U,X=L?N:N.replace(b,"");if(j.test(X))_.s=isNaN(X)?null:X<0?-1:1;else{if(!L&&(X=X.replace(D,function(ee,ue,de){return U=(de=de.toLowerCase())=="x"?16:de=="b"?2:8,!F||F==U?ue:ee}),F&&(U=F,X=X.replace(k,"$1").replace(G,"0.$1")),N!=X))return new ce(X,U);if(ce.DEBUG)throw Error(p+"Not a"+(F?" base "+F:"")+" number: "+N);_.s=null}_.c=_.e=null}}();function Oe(D,k,G,j){var b,_,N,L,F,U,X,ee=D.c,ue=g;if(ee){e:{for(b=1,L=ee[0];L>=10;L/=10,b++);if(_=k-b,_<0)_+=h,N=k,F=ee[U=0],X=F/ue[b-N-1]%10|0;else if(U=a((_+1)/h),U>=ee.length)if(j){for(;ee.length<=U;ee.push(0));F=X=0,b=1,_%=h,N=_-h+1}else break e;else{for(F=L=ee[U],b=1;L>=10;L/=10,b++);_%=h,N=_-h+b,X=N<0?0:F/ue[b-N-1]%10|0}if(j=j||k<0||ee[U+1]!=null||(N<0?F:F%ue[b-N-1]),j=G<4?(X||j)&&(G==0||G==(D.s<0?3:2)):X>5||X==5&&(G==4||j||G==6&&(_>0?N>0?F/ue[b-N]:0:ee[U-1])%10&1||G==(D.s<0?8:7)),k<1||!ee[0])return ee.length=0,j?(k-=D.e+1,ee[0]=ue[(h-k%h)%h],D.e=-k||0):ee[0]=D.e=0,D;if(_==0?(ee.length=U,L=1,U--):(ee.length=U+1,L=ue[h-_],ee[U]=N>0?c(F/ue[b-N]%ue[N])*L:0),j)for(;;)if(U==0){for(_=1,N=ee[0];N>=10;N/=10,_++);for(N=ee[0]+=L,L=1;N>=10;N/=10,L++);_!=L&&(D.e++,ee[0]==y&&(ee[0]=1));break}else{if(ee[U]+=L,ee[U]!=y)break;ee[U--]=0,L=1}for(_=ee.length;ee[--_]===0;ee.pop());}D.e>ne?D.c=D.e=null:D.e<ie&&(D.c=[D.e=0])}return D}function Se(D){var k,G=D.e;return G===null?D.toString():(k=E(D.c),k=G<=Y||G>=oe?Q(k,G):W(k,G,"0"),D.s<0?"-"+k:k)}return $.absoluteValue=$.abs=function(){var D=new ce(this);return D.s<0&&(D.s=1),D},$.comparedTo=function(D,k){return O(this,new ce(D,k))},$.decimalPlaces=$.dp=function(D,k){var G,j,b,_=this;if(D!=null)return I(D,0,S),k==null?k=Z:I(k,0,8),Oe(new ce(_),D+_.e+1,k);if(!(G=_.c))return null;if(j=((b=G.length-1)-w(this.e/h))*h,b=G[b])for(;b%10==0;b/=10,j--);return j<0&&(j=0),j},$.dividedBy=$.div=function(D,k){return B(this,new ce(D,k),J,Z)},$.dividedToIntegerBy=$.idiv=function(D,k){return B(this,new ce(D,k),0,1)},$.exponentiatedBy=$.pow=function(D,k){var G,j,b,_,N,L,F,U,X,ee=this;if(D=new ce(D),D.c&&!D.isInteger())throw Error(p+"Exponent not an integer: "+Se(D));if(k!=null&&(k=new ce(k)),L=D.e>14,!ee.c||!ee.c[0]||ee.c[0]==1&&!ee.e&&ee.c.length==1||!D.c||!D.c[0])return X=new ce(Math.pow(+Se(ee),L?2-z(D):+Se(D))),k?X.mod(k):X;if(F=D.s<0,k){if(k.c?!k.c[0]:!k.s)return new ce(NaN);j=!F&&ee.isInteger()&&k.isInteger(),j&&(ee=ee.mod(k))}else{if(D.e>9&&(ee.e>0||ee.e<-1||(ee.e==0?ee.c[0]>1||L&&ee.c[1]>=24e7:ee.c[0]<8e13||L&&ee.c[0]<=9999975e7)))return _=ee.s<0&&z(D)?-0:0,ee.e>-1&&(_=1/_),new ce(F?1/_:_);we&&(_=a(we/h+2))}for(L?(G=new ce(.5),F&&(D.s=1),U=z(D)):(b=Math.abs(+Se(D)),U=b%2),X=new ce(te);;){if(U){if(X=X.times(ee),!X.c)break;_?X.c.length>_&&(X.c.length=_):j&&(X=X.mod(k))}if(b){if(b=c(b/2),b===0)break;U=b%2}else if(D=D.times(G),Oe(D,D.e+1,1),D.e>14)U=z(D);else{if(b=+Se(D),b===0)break;U=b%2}ee=ee.times(ee),_?ee.c&&ee.c.length>_&&(ee.c.length=_):j&&(ee=ee.mod(k))}return j?X:(F&&(X=te.div(X)),k?X.mod(k):_?Oe(X,we,Z,N):X)},$.integerValue=function(D){var k=new ce(this);return D==null?D=Z:I(D,0,8),Oe(k,k.e+1,D)},$.isEqualTo=$.eq=function(D,k){return O(this,new ce(D,k))===0},$.isFinite=function(){return!!this.c},$.isGreaterThan=$.gt=function(D,k){return O(this,new ce(D,k))>0},$.isGreaterThanOrEqualTo=$.gte=function(D,k){return(k=O(this,new ce(D,k)))===1||k===0},$.isInteger=function(){return!!this.c&&w(this.e/h)>this.c.length-2},$.isLessThan=$.lt=function(D,k){return O(this,new ce(D,k))<0},$.isLessThanOrEqualTo=$.lte=function(D,k){return(k=O(this,new ce(D,k)))===-1||k===0},$.isNaN=function(){return!this.s},$.isNegative=function(){return this.s<0},$.isPositive=function(){return this.s>0},$.isZero=function(){return!!this.c&&this.c[0]==0},$.minus=function(D,k){var G,j,b,_,N=this,L=N.s;if(D=new ce(D,k),k=D.s,!L||!k)return new ce(NaN);if(L!=k)return D.s=-k,N.plus(D);var F=N.e/h,U=D.e/h,X=N.c,ee=D.c;if(!F||!U){if(!X||!ee)return X?(D.s=-k,D):new ce(ee?N:NaN);if(!X[0]||!ee[0])return ee[0]?(D.s=-k,D):new ce(X[0]?N:Z==3?-0:0)}if(F=w(F),U=w(U),X=X.slice(),L=F-U){for((_=L<0)?(L=-L,b=X):(U=F,b=ee),b.reverse(),k=L;k--;b.push(0));b.reverse()}else for(j=(_=(L=X.length)<(k=ee.length))?L:k,L=k=0;k<j;k++)if(X[k]!=ee[k]){_=X[k]<ee[k];break}if(_&&(b=X,X=ee,ee=b,D.s=-D.s),k=(j=ee.length)-(G=X.length),k>0)for(;k--;X[G++]=0);for(k=y-1;j>L;){if(X[--j]<ee[j]){for(G=j;G&&!X[--G];X[G]=k);--X[G],X[j]+=y}X[j]-=ee[j]}for(;X[0]==0;X.splice(0,1),--U);return X[0]?Re(D,X,U):(D.s=Z==3?-1:1,D.c=[D.e=0],D)},$.modulo=$.mod=function(D,k){var G,j,b=this;return D=new ce(D,k),!b.c||!D.s||D.c&&!D.c[0]?new ce(NaN):!D.c||b.c&&!b.c[0]?new ce(b):(he==9?(j=D.s,D.s=1,G=B(b,D,0,3),D.s=j,G.s*=j):G=B(b,D,0,he),D=b.minus(G.times(D)),!D.c[0]&&he==1&&(D.s=b.s),D)},$.multipliedBy=$.times=function(D,k){var G,j,b,_,N,L,F,U,X,ee,ue,de,fe,me,ve,be=this,ge=be.c,Ae=(D=new ce(D,k)).c;if(!ge||!Ae||!ge[0]||!Ae[0])return!be.s||!D.s||ge&&!ge[0]&&!Ae||Ae&&!Ae[0]&&!ge?D.c=D.e=D.s=null:(D.s*=be.s,!ge||!Ae?D.c=D.e=null:(D.c=[0],D.e=0)),D;for(j=w(be.e/h)+w(D.e/h),D.s*=be.s,F=ge.length,ee=Ae.length,F<ee&&(fe=ge,ge=Ae,Ae=fe,b=F,F=ee,ee=b),b=F+ee,fe=[];b--;fe.push(0));for(me=y,ve=v,b=ee;--b>=0;){for(G=0,ue=Ae[b]%ve,de=Ae[b]/ve|0,N=F,_=b+N;_>b;)U=ge[--N]%ve,X=ge[N]/ve|0,L=de*U+X*ue,U=ue*U+L%ve*ve+fe[_]+G,G=(U/me|0)+(L/ve|0)+de*X,fe[_--]=U%me;fe[_]=G}return G?++j:fe.splice(0,1),Re(D,fe,j)},$.negated=function(){var D=new ce(this);return D.s=-D.s||null,D},$.plus=function(D,k){var G,j=this,b=j.s;if(D=new ce(D,k),k=D.s,!b||!k)return new ce(NaN);if(b!=k)return D.s=-k,j.minus(D);var _=j.e/h,N=D.e/h,L=j.c,F=D.c;if(!_||!N){if(!L||!F)return new ce(b/0);if(!L[0]||!F[0])return F[0]?D:new ce(L[0]?j:b*0)}if(_=w(_),N=w(N),L=L.slice(),b=_-N){for(b>0?(N=_,G=F):(b=-b,G=L),G.reverse();b--;G.push(0));G.reverse()}for(b=L.length,k=F.length,b-k<0&&(G=F,F=L,L=G,k=b),b=0;k;)b=(L[--k]=L[k]+F[k]+b)/y|0,L[k]=y===L[k]?0:L[k]%y;return b&&(L=[b].concat(L),++N),Re(D,L,N)},$.precision=$.sd=function(D,k){var G,j,b,_=this;if(D!=null&&D!==!!D)return I(D,1,S),k==null?k=Z:I(k,0,8),Oe(new ce(_),D,k);if(!(G=_.c))return null;if(b=G.length-1,j=b*h+1,b=G[b]){for(;b%10==0;b/=10,j--);for(b=G[0];b>=10;b/=10,j++);}return D&&_.e+1>j&&(j=_.e+1),j},$.shiftedBy=function(D){return I(D,-T,T),this.times("1e"+D)},$.squareRoot=$.sqrt=function(){var D,k,G,j,b,_=this,N=_.c,L=_.s,F=_.e,U=J+4,X=new ce("0.5");if(L!==1||!N||!N[0])return new ce(!L||L<0&&(!N||N[0])?NaN:N?_:1/0);if(L=Math.sqrt(+Se(_)),L==0||L==1/0?(k=E(N),(k.length+F)%2==0&&(k+="0"),L=Math.sqrt(+k),F=w((F+1)/2)-(F<0||F%2),L==1/0?k="5e"+F:(k=L.toExponential(),k=k.slice(0,k.indexOf("e")+1)+F),G=new ce(k)):G=new ce(L+""),G.c[0]){for(F=G.e,L=F+U,L<3&&(L=0);;)if(b=G,G=X.times(b.plus(B(_,b,U,1))),E(b.c).slice(0,L)===(k=E(G.c)).slice(0,L))if(G.e<F&&--L,k=k.slice(L-3,L+1),k=="9999"||!j&&k=="4999"){if(!j&&(Oe(b,b.e+J+2,0),b.times(b).eq(_))){G=b;break}U+=4,L+=4,j=1}else{(!+k||!+k.slice(1)&&k.charAt(0)=="5")&&(Oe(G,G.e+J+2,1),D=!G.times(G).eq(_));break}}return Oe(G,G.e+J+1,Z,D)},$.toExponential=function(D,k){return D!=null&&(I(D,0,S),D++),je(this,D,k,1)},$.toFixed=function(D,k){return D!=null&&(I(D,0,S),D=D+this.e+1),je(this,D,k)},$.toFormat=function(D,k,G){var j,b=this;if(G==null)D!=null&&k&&typeof k=="object"?(G=k,k=null):D&&typeof D=="object"?(G=D,D=k=null):G=Te;else if(typeof G!="object")throw Error(p+"Argument not an object: "+G);if(j=b.toFixed(D,k),b.c){var _,N=j.split("."),L=+G.groupSize,F=+G.secondaryGroupSize,U=G.groupSeparator||"",X=N[0],ee=N[1],ue=b.s<0,de=ue?X.slice(1):X,fe=de.length;if(F&&(_=L,L=F,F=_,fe-=_),L>0&&fe>0){for(_=fe%L||L,X=de.substr(0,_);_<fe;_+=L)X+=U+de.substr(_,L);F>0&&(X+=U+de.slice(_)),ue&&(X="-"+X)}j=ee?X+(G.decimalSeparator||"")+((F=+G.fractionGroupSize)?ee.replace(new RegExp("\\d{"+F+"}\\B","g"),"$&"+(G.fractionGroupSeparator||"")):ee):X}return(G.prefix||"")+j+(G.suffix||"")},$.toFraction=function(D){var k,G,j,b,_,N,L,F,U,X,ee,ue,de=this,fe=de.c;if(D!=null&&(L=new ce(D),!L.isInteger()&&(L.c||L.s!==1)||L.lt(te)))throw Error(p+"Argument "+(L.isInteger()?"out of range: ":"not an integer: ")+Se(L));if(!fe)return new ce(de);for(k=new ce(te),U=G=new ce(te),j=F=new ce(te),ue=E(fe),_=k.e=ue.length-de.e-1,k.c[0]=g[(N=_%h)<0?h+N:N],D=!D||L.comparedTo(k)>0?_>0?k:U:L,N=ne,ne=1/0,L=new ce(ue),F.c[0]=0;X=B(L,k,0,1),b=G.plus(X.times(j)),b.comparedTo(D)!=1;)G=j,j=b,U=F.plus(X.times(b=U)),F=b,k=L.minus(X.times(b=k)),L=b;return b=B(D.minus(G),j,0,1),F=F.plus(b.times(U)),G=G.plus(b.times(j)),F.s=U.s=de.s,_=_*2,ee=B(U,j,_,Z).minus(de).abs().comparedTo(B(F,G,_,Z).minus(de).abs())<1?[U,j]:[F,G],ne=N,ee},$.toNumber=function(){return+Se(this)},$.toPrecision=function(D,k){return D!=null&&I(D,1,S),je(this,D,k,2)},$.toString=function(D){var k,G=this,j=G.s,b=G.e;return b===null?j?(k="Infinity",j<0&&(k="-"+k)):k="NaN":(D==null?k=b<=Y||b>=oe?Q(E(G.c),b):W(E(G.c),b,"0"):D===10&&_e?(G=Oe(new ce(G),J+b+1,Z),k=W(E(G.c),G.e,"0")):(I(D,2,Ee.length,"Base"),k=M(W(E(G.c),b,"0"),10,D,j,!0)),j<0&&G.c[0]&&(k="-"+k)),k},$.valueOf=$.toJSON=function(){return Se(this)},$._isBigNumber=!0,H!=null&&ce.set(H),ce}function w(H){var B=H|0;return H>0||H===B?B:B-1}function E(H){for(var B,M,V=1,$=H.length,te=H[0]+"";V<$;){for(B=H[V++]+"",M=h-B.length;M--;B="0"+B);te+=B}for($=te.length;te.charCodeAt(--$)===48;);return te.slice(0,$+1||1)}function O(H,B){var M,V,$=H.c,te=B.c,J=H.s,Z=B.s,Y=H.e,oe=B.e;if(!J||!Z)return null;if(M=$&&!$[0],V=te&&!te[0],M||V)return M?V?0:-Z:J;if(J!=Z)return J;if(M=J<0,V=Y==oe,!$||!te)return V?0:!$^M?1:-1;if(!V)return Y>oe^M?1:-1;for(Z=(Y=$.length)<(oe=te.length)?Y:oe,J=0;J<Z;J++)if($[J]!=te[J])return $[J]>te[J]^M?1:-1;return Y==oe?0:Y>oe^M?1:-1}function I(H,B,M,V){if(H<B||H>M||H!==c(H))throw Error(p+(V||"Argument")+(typeof H=="number"?H<B||H>M?" out of range: ":" not an integer: ":" not a primitive number: ")+String(H))}function z(H){var B=H.c.length-1;return w(H.e/h)==B&&H.c[B]%2!=0}function Q(H,B){return(H.length>1?H.charAt(0)+"."+H.slice(1):H)+(B<0?"e":"e+")+B}function W(H,B,M){var V,$;if(B<0){for($=M+".";++B;$+=M);H=$+H}else if(V=H.length,++B>V){for($=M,B-=V;--B;$+=M);H+=$}else B<V&&(H=H.slice(0,B)+"."+H.slice(B));return H}d=x(),d.default=d.BigNumber=d,o=function(){return d}.call(e,t,e,n),o!==void 0&&(n.exports=o)})()},"../node_modules/canonicalize/lib/canonicalize.js":n=>{n.exports=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((o,l,d)=>{const u=d===0?"":",",a=l===void 0||typeof l=="symbol"?null:l;return o+u+e(a)},"")+"]":"{"+Object.keys(t).sort().reduce((o,l,d)=>{if(t[l]===void 0||typeof t[l]=="symbol")return o;const u=o.length===0?"":",";return o+u+e(l)+":"+e(t[l])},"")+"}"}},"../node_modules/hash.js/lib/hash.js":(n,e,t)=>{var o=e;o.utils=t("../node_modules/hash.js/lib/hash/utils.js"),o.common=t("../node_modules/hash.js/lib/hash/common.js"),o.sha=t("../node_modules/hash.js/lib/hash/sha.js"),o.ripemd=t("../node_modules/hash.js/lib/hash/ripemd.js"),o.hmac=t("../node_modules/hash.js/lib/hash/hmac.js"),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160},"../node_modules/hash.js/lib/hash/common.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/minimalistic-assert/index.js");function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=d,d.prototype.update=function(a,c){if(a=o.toArray(a,c),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var p=a.length%this._delta8;this.pending=a.slice(a.length-p,a.length),this.pending.length===0&&(this.pending=null),a=o.join32(a,0,a.length-p,this.endian);for(var m=0;m<a.length;m+=this._delta32)this._update(a,m,m+this._delta32)}return this},d.prototype.digest=function(a){return this.update(this._pad()),l(this.pending===null),this._digest(a)},d.prototype._pad=function(){var a=this.pendingTotal,c=this._delta8,p=c-(a+this.padLength)%c,m=new Array(p+this.padLength);m[0]=128;for(var y=1;y<p;y++)m[y]=0;if(a<<=3,this.endian==="big"){for(var h=8;h<this.padLength;h++)m[y++]=0;m[y++]=0,m[y++]=0,m[y++]=0,m[y++]=0,m[y++]=a>>>24&255,m[y++]=a>>>16&255,m[y++]=a>>>8&255,m[y++]=a&255}else for(m[y++]=a&255,m[y++]=a>>>8&255,m[y++]=a>>>16&255,m[y++]=a>>>24&255,m[y++]=0,m[y++]=0,m[y++]=0,m[y++]=0,h=8;h<this.padLength;h++)m[y++]=0;return m}},"../node_modules/hash.js/lib/hash/hmac.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/minimalistic-assert/index.js");function d(u,a,c){if(!(this instanceof d))return new d(u,a,c);this.Hash=u,this.blockSize=u.blockSize/8,this.outSize=u.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(a,c))}n.exports=d,d.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),l(a.length<=this.blockSize);for(var c=a.length;c<this.blockSize;c++)a.push(0);for(c=0;c<a.length;c++)a[c]^=54;for(this.inner=new this.Hash().update(a),c=0;c<a.length;c++)a[c]^=106;this.outer=new this.Hash().update(a)},d.prototype.update=function(a,c){return this.inner.update(a,c),this},d.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},"../node_modules/hash.js/lib/hash/ripemd.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=o.rotl32,u=o.sum32,a=o.sum32_3,c=o.sum32_4,p=l.BlockHash;function m(){if(!(this instanceof m))return new m;p.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}o.inherits(m,p),e.ripemd160=m,m.blockSize=512,m.outSize=160,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(E,O){for(var I=this.h[0],z=this.h[1],Q=this.h[2],W=this.h[3],H=this.h[4],B=I,M=z,V=Q,$=W,te=H,J=0;J<80;J++){var Z=u(d(c(I,y(J,z,Q,W),E[g[J]+O],h(J)),S[J]),H);I=H,H=W,W=d(Q,10),Q=z,z=Z,Z=u(d(c(B,y(79-J,M,V,$),E[v[J]+O],T(J)),x[J]),te),B=te,te=$,$=d(V,10),V=M,M=Z}Z=a(this.h[1],Q,$),this.h[1]=a(this.h[2],W,te),this.h[2]=a(this.h[3],H,B),this.h[3]=a(this.h[4],I,M),this.h[4]=a(this.h[0],z,V),this.h[0]=Z},m.prototype._digest=function(E){return E==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};function y(w,E,O,I){return w<=15?E^O^I:w<=31?E&O|~E&I:w<=47?(E|~O)^I:w<=63?E&I|O&~I:E^(O|~I)}function h(w){return w<=15?0:w<=31?1518500249:w<=47?1859775393:w<=63?2400959708:2840853838}function T(w){return w<=15?1352829926:w<=31?1548603684:w<=47?1836072691:w<=63?2053994217:0}var g=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],S=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],x=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},"../node_modules/hash.js/lib/hash/sha.js":(n,e,t)=>{e.sha1=t("../node_modules/hash.js/lib/hash/sha/1.js"),e.sha224=t("../node_modules/hash.js/lib/hash/sha/224.js"),e.sha256=t("../node_modules/hash.js/lib/hash/sha/256.js"),e.sha384=t("../node_modules/hash.js/lib/hash/sha/384.js"),e.sha512=t("../node_modules/hash.js/lib/hash/sha/512.js")},"../node_modules/hash.js/lib/hash/sha/1.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=t("../node_modules/hash.js/lib/hash/sha/common.js"),u=o.rotl32,a=o.sum32,c=o.sum32_5,p=d.ft_1,m=l.BlockHash,y=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;m.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(h,m),n.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(g,v){for(var S=this.W,x=0;x<16;x++)S[x]=g[v+x];for(;x<S.length;x++)S[x]=u(S[x-3]^S[x-8]^S[x-14]^S[x-16],1);var w=this.h[0],E=this.h[1],O=this.h[2],I=this.h[3],z=this.h[4];for(x=0;x<S.length;x++){var Q=~~(x/20),W=c(u(w,5),p(Q,E,O,I),z,S[x],y[Q]);z=I,I=O,O=u(E,30),E=w,w=W}this.h[0]=a(this.h[0],w),this.h[1]=a(this.h[1],E),this.h[2]=a(this.h[2],O),this.h[3]=a(this.h[3],I),this.h[4]=a(this.h[4],z)},h.prototype._digest=function(g){return g==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/224.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/sha/256.js");function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(d,l),n.exports=d,d.blockSize=512,d.outSize=224,d.hmacStrength=192,d.padLength=64,d.prototype._digest=function(a){return a==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}},"../node_modules/hash.js/lib/hash/sha/256.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=t("../node_modules/hash.js/lib/hash/sha/common.js"),u=t("../node_modules/minimalistic-assert/index.js"),a=o.sum32,c=o.sum32_4,p=o.sum32_5,m=d.ch32,y=d.maj32,h=d.s0_256,T=d.s1_256,g=d.g0_256,v=d.g1_256,S=l.BlockHash,x=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function w(){if(!(this instanceof w))return new w;S.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=x,this.W=new Array(64)}o.inherits(w,S),n.exports=w,w.blockSize=512,w.outSize=256,w.hmacStrength=192,w.padLength=64,w.prototype._update=function(O,I){for(var z=this.W,Q=0;Q<16;Q++)z[Q]=O[I+Q];for(;Q<z.length;Q++)z[Q]=c(v(z[Q-2]),z[Q-7],g(z[Q-15]),z[Q-16]);var W=this.h[0],H=this.h[1],B=this.h[2],M=this.h[3],V=this.h[4],$=this.h[5],te=this.h[6],J=this.h[7];for(u(this.k.length===z.length),Q=0;Q<z.length;Q++){var Z=p(J,T(V),m(V,$,te),this.k[Q],z[Q]),Y=a(h(W),y(W,H,B));J=te,te=$,$=V,V=a(M,Z),M=B,B=H,H=W,W=a(Z,Y)}this.h[0]=a(this.h[0],W),this.h[1]=a(this.h[1],H),this.h[2]=a(this.h[2],B),this.h[3]=a(this.h[3],M),this.h[4]=a(this.h[4],V),this.h[5]=a(this.h[5],$),this.h[6]=a(this.h[6],te),this.h[7]=a(this.h[7],J)},w.prototype._digest=function(O){return O==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/384.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/sha/512.js");function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(d,l),n.exports=d,d.blockSize=1024,d.outSize=384,d.hmacStrength=192,d.padLength=128,d.prototype._digest=function(a){return a==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}},"../node_modules/hash.js/lib/hash/sha/512.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=t("../node_modules/minimalistic-assert/index.js"),u=o.rotr64_hi,a=o.rotr64_lo,c=o.shr64_hi,p=o.shr64_lo,m=o.sum64,y=o.sum64_hi,h=o.sum64_lo,T=o.sum64_4_hi,g=o.sum64_4_lo,v=o.sum64_5_hi,S=o.sum64_5_lo,x=l.BlockHash,w=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function E(){if(!(this instanceof E))return new E;x.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=w,this.W=new Array(160)}o.inherits(E,x),n.exports=E,E.blockSize=1024,E.outSize=512,E.hmacStrength=192,E.padLength=128,E.prototype._prepareBlock=function(Y,oe){for(var ie=this.W,ne=0;ne<32;ne++)ie[ne]=Y[oe+ne];for(;ne<ie.length;ne+=2){var re=te(ie[ne-4],ie[ne-3]),he=J(ie[ne-4],ie[ne-3]),we=ie[ne-14],Te=ie[ne-13],Ee=V(ie[ne-30],ie[ne-29]),_e=$(ie[ne-30],ie[ne-29]),ce=ie[ne-32],je=ie[ne-31];ie[ne]=T(re,he,we,Te,Ee,_e,ce,je),ie[ne+1]=g(re,he,we,Te,Ee,_e,ce,je)}},E.prototype._update=function(Y,oe){this._prepareBlock(Y,oe);var ie=this.W,ne=this.h[0],re=this.h[1],he=this.h[2],we=this.h[3],Te=this.h[4],Ee=this.h[5],_e=this.h[6],ce=this.h[7],je=this.h[8],Ie=this.h[9],Re=this.h[10],Oe=this.h[11],Se=this.h[12],D=this.h[13],k=this.h[14],G=this.h[15];d(this.k.length===ie.length);for(var j=0;j<ie.length;j+=2){var b=k,_=G,N=B(je,Ie),L=M(je,Ie),F=O(je,Ie,Re,Oe,Se),U=I(je,Ie,Re,Oe,Se,D),X=this.k[j],ee=this.k[j+1],ue=ie[j],de=ie[j+1],fe=v(b,_,N,L,F,U,X,ee,ue,de),me=S(b,_,N,L,F,U,X,ee,ue,de);b=W(ne,re),_=H(ne,re),N=z(ne,re,he,we,Te),L=Q(ne,re,he,we,Te,Ee);var ve=y(b,_,N,L),be=h(b,_,N,L);k=Se,G=D,Se=Re,D=Oe,Re=je,Oe=Ie,je=y(_e,ce,fe,me),Ie=h(ce,ce,fe,me),_e=Te,ce=Ee,Te=he,Ee=we,he=ne,we=re,ne=y(fe,me,ve,be),re=h(fe,me,ve,be)}m(this.h,0,ne,re),m(this.h,2,he,we),m(this.h,4,Te,Ee),m(this.h,6,_e,ce),m(this.h,8,je,Ie),m(this.h,10,Re,Oe),m(this.h,12,Se,D),m(this.h,14,k,G)},E.prototype._digest=function(Y){return Y==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")};function O(Z,Y,oe,ie,ne){var re=Z&oe^~Z&ne;return re<0&&(re+=4294967296),re}function I(Z,Y,oe,ie,ne,re){var he=Y&ie^~Y&re;return he<0&&(he+=4294967296),he}function z(Z,Y,oe,ie,ne){var re=Z&oe^Z&ne^oe&ne;return re<0&&(re+=4294967296),re}function Q(Z,Y,oe,ie,ne,re){var he=Y&ie^Y&re^ie&re;return he<0&&(he+=4294967296),he}function W(Z,Y){var oe=u(Z,Y,28),ie=u(Y,Z,2),ne=u(Y,Z,7),re=oe^ie^ne;return re<0&&(re+=4294967296),re}function H(Z,Y){var oe=a(Z,Y,28),ie=a(Y,Z,2),ne=a(Y,Z,7),re=oe^ie^ne;return re<0&&(re+=4294967296),re}function B(Z,Y){var oe=u(Z,Y,14),ie=u(Z,Y,18),ne=u(Y,Z,9),re=oe^ie^ne;return re<0&&(re+=4294967296),re}function M(Z,Y){var oe=a(Z,Y,14),ie=a(Z,Y,18),ne=a(Y,Z,9),re=oe^ie^ne;return re<0&&(re+=4294967296),re}function V(Z,Y){var oe=u(Z,Y,1),ie=u(Z,Y,8),ne=c(Z,Y,7),re=oe^ie^ne;return re<0&&(re+=4294967296),re}function $(Z,Y){var oe=a(Z,Y,1),ie=a(Z,Y,8),ne=p(Z,Y,7),re=oe^ie^ne;return re<0&&(re+=4294967296),re}function te(Z,Y){var oe=u(Z,Y,19),ie=u(Y,Z,29),ne=c(Z,Y,6),re=oe^ie^ne;return re<0&&(re+=4294967296),re}function J(Z,Y){var oe=a(Z,Y,19),ie=a(Y,Z,29),ne=p(Z,Y,6),re=oe^ie^ne;return re<0&&(re+=4294967296),re}},"../node_modules/hash.js/lib/hash/sha/common.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=o.rotr32;function d(T,g,v,S){if(T===0)return u(g,v,S);if(T===1||T===3)return c(g,v,S);if(T===2)return a(g,v,S)}e.ft_1=d;function u(T,g,v){return T&g^~T&v}e.ch32=u;function a(T,g,v){return T&g^T&v^g&v}e.maj32=a;function c(T,g,v){return T^g^v}e.p32=c;function p(T){return l(T,2)^l(T,13)^l(T,22)}e.s0_256=p;function m(T){return l(T,6)^l(T,11)^l(T,25)}e.s1_256=m;function y(T){return l(T,7)^l(T,18)^T>>>3}e.g0_256=y;function h(T){return l(T,17)^l(T,19)^T>>>10}e.g1_256=h},"../node_modules/hash.js/lib/hash/utils.js":(n,e,t)=>{var o=t("../node_modules/minimalistic-assert/index.js"),l=t("../node_modules/inherits/inherits_browser.js");e.inherits=l;function d(J,Z){return(J.charCodeAt(Z)&64512)!==55296||Z<0||Z+1>=J.length?!1:(J.charCodeAt(Z+1)&64512)===56320}function u(J,Z){if(Array.isArray(J))return J.slice();if(!J)return[];var Y=[];if(typeof J=="string")if(Z){if(Z==="hex")for(J=J.replace(/[^a-z0-9]+/ig,""),J.length%2!==0&&(J="0"+J),ie=0;ie<J.length;ie+=2)Y.push(parseInt(J[ie]+J[ie+1],16))}else for(var oe=0,ie=0;ie<J.length;ie++){var ne=J.charCodeAt(ie);ne<128?Y[oe++]=ne:ne<2048?(Y[oe++]=ne>>6|192,Y[oe++]=ne&63|128):d(J,ie)?(ne=65536+((ne&1023)<<10)+(J.charCodeAt(++ie)&1023),Y[oe++]=ne>>18|240,Y[oe++]=ne>>12&63|128,Y[oe++]=ne>>6&63|128,Y[oe++]=ne&63|128):(Y[oe++]=ne>>12|224,Y[oe++]=ne>>6&63|128,Y[oe++]=ne&63|128)}else for(ie=0;ie<J.length;ie++)Y[ie]=J[ie]|0;return Y}e.toArray=u;function a(J){for(var Z="",Y=0;Y<J.length;Y++)Z+=m(J[Y].toString(16));return Z}e.toHex=a;function c(J){var Z=J>>>24|J>>>8&65280|J<<8&16711680|(J&255)<<24;return Z>>>0}e.htonl=c;function p(J,Z){for(var Y="",oe=0;oe<J.length;oe++){var ie=J[oe];Z==="little"&&(ie=c(ie)),Y+=y(ie.toString(16))}return Y}e.toHex32=p;function m(J){return J.length===1?"0"+J:J}e.zero2=m;function y(J){return J.length===7?"0"+J:J.length===6?"00"+J:J.length===5?"000"+J:J.length===4?"0000"+J:J.length===3?"00000"+J:J.length===2?"000000"+J:J.length===1?"0000000"+J:J}e.zero8=y;function h(J,Z,Y,oe){var ie=Y-Z;o(ie%4===0);for(var ne=new Array(ie/4),re=0,he=Z;re<ne.length;re++,he+=4){var we;oe==="big"?we=J[he]<<24|J[he+1]<<16|J[he+2]<<8|J[he+3]:we=J[he+3]<<24|J[he+2]<<16|J[he+1]<<8|J[he],ne[re]=we>>>0}return ne}e.join32=h;function T(J,Z){for(var Y=new Array(J.length*4),oe=0,ie=0;oe<J.length;oe++,ie+=4){var ne=J[oe];Z==="big"?(Y[ie]=ne>>>24,Y[ie+1]=ne>>>16&255,Y[ie+2]=ne>>>8&255,Y[ie+3]=ne&255):(Y[ie+3]=ne>>>24,Y[ie+2]=ne>>>16&255,Y[ie+1]=ne>>>8&255,Y[ie]=ne&255)}return Y}e.split32=T;function g(J,Z){return J>>>Z|J<<32-Z}e.rotr32=g;function v(J,Z){return J<<Z|J>>>32-Z}e.rotl32=v;function S(J,Z){return J+Z>>>0}e.sum32=S;function x(J,Z,Y){return J+Z+Y>>>0}e.sum32_3=x;function w(J,Z,Y,oe){return J+Z+Y+oe>>>0}e.sum32_4=w;function E(J,Z,Y,oe,ie){return J+Z+Y+oe+ie>>>0}e.sum32_5=E;function O(J,Z,Y,oe){var ie=J[Z],ne=J[Z+1],re=oe+ne>>>0,he=(re<oe?1:0)+Y+ie;J[Z]=he>>>0,J[Z+1]=re}e.sum64=O;function I(J,Z,Y,oe){var ie=Z+oe>>>0,ne=(ie<Z?1:0)+J+Y;return ne>>>0}e.sum64_hi=I;function z(J,Z,Y,oe){var ie=Z+oe;return ie>>>0}e.sum64_lo=z;function Q(J,Z,Y,oe,ie,ne,re,he){var we=0,Te=Z;Te=Te+oe>>>0,we+=Te<Z?1:0,Te=Te+ne>>>0,we+=Te<ne?1:0,Te=Te+he>>>0,we+=Te<he?1:0;var Ee=J+Y+ie+re+we;return Ee>>>0}e.sum64_4_hi=Q;function W(J,Z,Y,oe,ie,ne,re,he){var we=Z+oe+ne+he;return we>>>0}e.sum64_4_lo=W;function H(J,Z,Y,oe,ie,ne,re,he,we,Te){var Ee=0,_e=Z;_e=_e+oe>>>0,Ee+=_e<Z?1:0,_e=_e+ne>>>0,Ee+=_e<ne?1:0,_e=_e+he>>>0,Ee+=_e<he?1:0,_e=_e+Te>>>0,Ee+=_e<Te?1:0;var ce=J+Y+ie+re+we+Ee;return ce>>>0}e.sum64_5_hi=H;function B(J,Z,Y,oe,ie,ne,re,he,we,Te){var Ee=Z+oe+ne+he+Te;return Ee>>>0}e.sum64_5_lo=B;function M(J,Z,Y){var oe=Z<<32-Y|J>>>Y;return oe>>>0}e.rotr64_hi=M;function V(J,Z,Y){var oe=J<<32-Y|Z>>>Y;return oe>>>0}e.rotr64_lo=V;function $(J,Z,Y){return J>>>Y}e.shr64_hi=$;function te(J,Z,Y){var oe=J<<32-Y|Z>>>Y;return oe>>>0}e.shr64_lo=te},"../node_modules/inherits/inherits_browser.js":n=>{typeof Object.create=="function"?n.exports=function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,o){if(o){t.super_=o;var l=function(){};l.prototype=o.prototype,t.prototype=new l,t.prototype.constructor=t}}},"../node_modules/lru-cache/index.js":(n,e,t)=>{const o=t("../node_modules/yallist/yallist.js"),l=Symbol("max"),d=Symbol("length"),u=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),p=Symbol("dispose"),m=Symbol("noDisposeOnSet"),y=Symbol("lruList"),h=Symbol("cache"),T=Symbol("updateAgeOnGet"),g=()=>1;class v{constructor(Q){if(typeof Q=="number"&&(Q={max:Q}),Q||(Q={}),Q.max&&(typeof Q.max!="number"||Q.max<0))throw new TypeError("max must be a non-negative number");this[l]=Q.max||1/0;const W=Q.length||g;if(this[u]=typeof W!="function"?g:W,this[a]=Q.stale||!1,Q.maxAge&&typeof Q.maxAge!="number")throw new TypeError("maxAge must be a number");this[c]=Q.maxAge||0,this[p]=Q.dispose,this[m]=Q.noDisposeOnSet||!1,this[T]=Q.updateAgeOnGet||!1,this.reset()}set max(Q){if(typeof Q!="number"||Q<0)throw new TypeError("max must be a non-negative number");this[l]=Q||1/0,w(this)}get max(){return this[l]}set allowStale(Q){this[a]=!!Q}get allowStale(){return this[a]}set maxAge(Q){if(typeof Q!="number")throw new TypeError("maxAge must be a non-negative number");this[c]=Q,w(this)}get maxAge(){return this[c]}set lengthCalculator(Q){typeof Q!="function"&&(Q=g),Q!==this[u]&&(this[u]=Q,this[d]=0,this[y].forEach(W=>{W.length=this[u](W.value,W.key),this[d]+=W.length})),w(this)}get lengthCalculator(){return this[u]}get length(){return this[d]}get itemCount(){return this[y].length}rforEach(Q,W){W=W||this;for(let H=this[y].tail;H!==null;){const B=H.prev;I(this,Q,H,W),H=B}}forEach(Q,W){W=W||this;for(let H=this[y].head;H!==null;){const B=H.next;I(this,Q,H,W),H=B}}keys(){return this[y].toArray().map(Q=>Q.key)}values(){return this[y].toArray().map(Q=>Q.value)}reset(){this[p]&&this[y]&&this[y].length&&this[y].forEach(Q=>this[p](Q.key,Q.value)),this[h]=new Map,this[y]=new o,this[d]=0}dump(){return this[y].map(Q=>x(this,Q)?!1:{k:Q.key,v:Q.value,e:Q.now+(Q.maxAge||0)}).toArray().filter(Q=>Q)}dumpLru(){return this[y]}set(Q,W,H){if(H=H||this[c],H&&typeof H!="number")throw new TypeError("maxAge must be a number");const B=H?Date.now():0,M=this[u](W,Q);if(this[h].has(Q)){if(M>this[l])return E(this,this[h].get(Q)),!1;const te=this[h].get(Q).value;return this[p]&&(this[m]||this[p](Q,te.value)),te.now=B,te.maxAge=H,te.value=W,this[d]+=M-te.length,te.length=M,this.get(Q),w(this),!0}const V=new O(Q,W,M,B,H);return V.length>this[l]?(this[p]&&this[p](Q,W),!1):(this[d]+=V.length,this[y].unshift(V),this[h].set(Q,this[y].head),w(this),!0)}has(Q){if(!this[h].has(Q))return!1;const W=this[h].get(Q).value;return!x(this,W)}get(Q){return S(this,Q,!0)}peek(Q){return S(this,Q,!1)}pop(){const Q=this[y].tail;return Q?(E(this,Q),Q.value):null}del(Q){E(this,this[h].get(Q))}load(Q){this.reset();const W=Date.now();for(let H=Q.length-1;H>=0;H--){const B=Q[H],M=B.e||0;if(M===0)this.set(B.k,B.v);else{const V=M-W;V>0&&this.set(B.k,B.v,V)}}}prune(){this[h].forEach((Q,W)=>S(this,W,!1))}}const S=(z,Q,W)=>{const H=z[h].get(Q);if(H){const B=H.value;if(x(z,B)){if(E(z,H),!z[a])return}else W&&(z[T]&&(H.value.now=Date.now()),z[y].unshiftNode(H));return B.value}},x=(z,Q)=>{if(!Q||!Q.maxAge&&!z[c])return!1;const W=Date.now()-Q.now;return Q.maxAge?W>Q.maxAge:z[c]&&W>z[c]},w=z=>{if(z[d]>z[l])for(let Q=z[y].tail;z[d]>z[l]&&Q!==null;){const W=Q.prev;E(z,Q),Q=W}},E=(z,Q)=>{if(Q){const W=Q.value;z[p]&&z[p](W.key,W.value),z[d]-=W.length,z[h].delete(W.key),z[y].removeNode(Q)}};class O{constructor(Q,W,H,B,M){this.key=Q,this.value=W,this.length=H,this.now=B,this.maxAge=M||0}}const I=(z,Q,W,H)=>{let B=W.value;x(z,B)&&(E(z,W),z[a]||(B=void 0)),B&&Q.call(H,B.value,B.key,z)};n.exports=v},"../node_modules/minimalistic-assert/index.js":n=>{n.exports=e;function e(t,o){if(!t)throw new Error(o||"Assertion failed")}e.equal=function(o,l,d){if(o!=l)throw new Error(d||"Assertion failed: "+o+" != "+l)}},"../node_modules/rdf-data-factory/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/rdf-data-factory/lib/BlankNode.js"),e),l(t("../node_modules/rdf-data-factory/lib/DataFactory.js"),e),l(t("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),e),l(t("../node_modules/rdf-data-factory/lib/Literal.js"),e),l(t("../node_modules/rdf-data-factory/lib/NamedNode.js"),e),l(t("../node_modules/rdf-data-factory/lib/Quad.js"),e),l(t("../node_modules/rdf-data-factory/lib/Variable.js"),e)},"../node_modules/rdf-data-factory/lib/BlankNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNode=void 0;class t{constructor(l){this.termType="BlankNode",this.value=l}equals(l){return!!l&&l.termType==="BlankNode"&&l.value===this.value}}e.BlankNode=t},"../node_modules/rdf-data-factory/lib/DataFactory.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataFactory=void 0;const o=t("../node_modules/rdf-data-factory/lib/BlankNode.js"),l=t("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),d=t("../node_modules/rdf-data-factory/lib/Literal.js"),u=t("../node_modules/rdf-data-factory/lib/NamedNode.js"),a=t("../node_modules/rdf-data-factory/lib/Quad.js"),c=t("../node_modules/rdf-data-factory/lib/Variable.js");let p=0;class m{constructor(h){this.blankNodeCounter=0,h=h||{},this.blankNodePrefix=h.blankNodePrefix||`df_${p++}_`}namedNode(h){return new u.NamedNode(h)}blankNode(h){return new o.BlankNode(h||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(h,T){return new d.Literal(h,T)}variable(h){return new c.Variable(h)}defaultGraph(){return l.DefaultGraph.INSTANCE}quad(h,T,g,v){return new a.Quad(h,T,g,v||this.defaultGraph())}fromTerm(h){switch(h.termType){case"NamedNode":return this.namedNode(h.value);case"BlankNode":return this.blankNode(h.value);case"Literal":return h.language?this.literal(h.value,h.language):h.datatype.equals(d.Literal.XSD_STRING)?this.literal(h.value):this.literal(h.value,this.fromTerm(h.datatype));case"Variable":return this.variable(h.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(h.subject),this.fromTerm(h.predicate),this.fromTerm(h.object),this.fromTerm(h.graph))}}fromQuad(h){return this.fromTerm(h)}resetBlankNodeCounter(){this.blankNodeCounter=0}}e.DataFactory=m},"../node_modules/rdf-data-factory/lib/DefaultGraph.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultGraph=void 0;class t{constructor(){this.termType="DefaultGraph",this.value=""}equals(l){return!!l&&l.termType==="DefaultGraph"}}e.DefaultGraph=t,t.INSTANCE=new t},"../node_modules/rdf-data-factory/lib/Literal.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Literal=void 0;const o=t("../node_modules/rdf-data-factory/lib/NamedNode.js");class l{constructor(u,a){this.termType="Literal",this.value=u,typeof a=="string"?(this.language=a,this.datatype=l.RDF_LANGUAGE_STRING):a?(this.language="",this.datatype=a):(this.language="",this.datatype=l.XSD_STRING)}equals(u){return!!u&&u.termType==="Literal"&&u.value===this.value&&u.language===this.language&&u.datatype.equals(this.datatype)}}e.Literal=l,l.RDF_LANGUAGE_STRING=new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),l.XSD_STRING=new o.NamedNode("http://www.w3.org/2001/XMLSchema#string")},"../node_modules/rdf-data-factory/lib/NamedNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedNode=void 0;class t{constructor(l){this.termType="NamedNode",this.value=l}equals(l){return!!l&&l.termType==="NamedNode"&&l.value===this.value}}e.NamedNode=t},"../node_modules/rdf-data-factory/lib/Quad.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Quad=void 0;class t{constructor(l,d,u,a){this.termType="Quad",this.value="",this.subject=l,this.predicate=d,this.object=u,this.graph=a}equals(l){return!!l&&(l.termType==="Quad"||!l.termType)&&this.subject.equals(l.subject)&&this.predicate.equals(l.predicate)&&this.object.equals(l.object)&&this.graph.equals(l.graph)}}e.Quad=t},"../node_modules/rdf-data-factory/lib/Variable.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;class t{constructor(l){this.termType="Variable",this.value=l}equals(l){return!!l&&l.termType==="Variable"&&l.value===this.value}}e.Variable=t},"../node_modules/rdf-string/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralLanguage=void 0;const o=t("../node_modules/rdf-string/lib/TermUtil.js");Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return o.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return o.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return o.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return o.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return o.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return o.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return o.termToString}})},"../node_modules/rdf-string/lib/TermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringQuadToQuad=e.quadToStringQuad=e.stringToTerm=e.getLiteralLanguage=e.getLiteralType=e.getLiteralValue=e.termToString=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=new o.DataFactory;function d(h){if(h)switch(h.termType){case"NamedNode":return h.value;case"BlankNode":return"_:"+h.value;case"Literal":const T=h;return'"'+T.value+'"'+(T.datatype&&T.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&T.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+T.datatype.value:"")+(T.language?"@"+T.language:"");case"Quad":return`<<${d(h.subject)} ${d(h.predicate)} ${d(h.object)}${h.graph.termType==="DefaultGraph"?"":" "+d(h.graph)}>>`;case"Variable":return"?"+h.value;case"DefaultGraph":return h.value}}e.termToString=d;function u(h){const T=/^"([^]*)"/.exec(h);if(!T)throw new Error(h+" is not a literal");return T[1]}e.getLiteralValue=u;function a(h){const T=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(h);if(!T)throw new Error(h+" is not a literal");return T[1]||(T[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}e.getLiteralType=a;function c(h){const T=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(h);if(!T)throw new Error(h+" is not a literal");return T[1]?T[1].toLowerCase():""}e.getLiteralLanguage=c;function p(h,T){if(T=T||l,!h||!h.length)return T.defaultGraph();switch(h[0]){case"_":return T.blankNode(h.substr(2));case"?":if(!T.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return T.variable(h.substr(1));case'"':const g=c(h),v=T.namedNode(a(h));return T.literal(u(h),g||v);case"<":default:if(h.startsWith("<<")&&h.endsWith(">>")){const S=h.slice(2,-2),x=[];let w=0,E=0;for(let O=0;O<S.length;O++){const I=S[O];if(I==="<"&&w++,I===">"){if(w===0)throw new Error("Found closing tag without opening tag in "+h);w--}I===" "&&w===0&&(x.push(S.slice(E,O)),E=O+1)}if(w!==0)throw new Error("Found opening tag without closing tag in "+h);if(x.push(S.slice(E,S.length)),x.length!==3&&x.length!==4)throw new Error("Nested quad syntax error "+h);return T.quad(p(x[0]),p(x[1]),p(x[2]),x[3]?p(x[3]):void 0)}return T.namedNode(h)}}e.stringToTerm=p;function m(h){return{subject:d(h.subject),predicate:d(h.predicate),object:d(h.object),graph:d(h.graph)}}e.quadToStringQuad=m;function y(h,T){return T=T||l,T.quad(p(h.subject,T),p(h.predicate,T),p(h.object,T),p(h.graph,T))}e.stringQuadToQuad=y},"../node_modules/rdf-terms/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/rdf-terms/lib/QuadTermUtil.js"),e),l(t("../node_modules/rdf-terms/lib/TermUtil.js"),e)},"../node_modules/rdf-terms/lib/QuadTermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.matchPatternMappings=e.matchPatternComplete=e.matchPattern=e.matchTerm=e.someTerms=e.everyTerms=e.reduceTerms=e.mapTerms=e.filterQuadTermNames=e.filterTerms=e.forEachTerms=e.collectNamedTerms=e.getNamedTerms=e.getTermsNested=e.getTerms=e.TRIPLE_TERM_NAMES=e.QUAD_TERM_NAMES=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=new o.DataFactory;e.QUAD_TERM_NAMES=["subject","predicate","object","graph"],e.TRIPLE_TERM_NAMES=["subject","predicate","object"];function d(O,I){return I&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}e.getTerms=d;function u(O,I){const z=[];for(const Q of d(O,I))Q.termType==="Quad"?u(Q,I).forEach(W=>z.push(W)):z.push(Q);return z}e.getTermsNested=u;function a(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}e.getNamedTerms=a;function c(O,I,z){const Q={};return O.forEach(W=>Q[W.key]=W.value),I&&(Q.subject=Q.subject||I("subject"),Q.predicate=Q.predicate||I("predicate"),Q.object=Q.object||I("object"),Q.graph=Q.graph||I("graph")),(z||l).quad(Q.subject,Q.predicate,Q.object,Q.graph)}e.collectNamedTerms=c;function p(O,I){I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph")}e.forEachTerms=p;function m(O,I){const z=[];return I(O.subject,"subject")&&z.push(O.subject),I(O.predicate,"predicate")&&z.push(O.predicate),I(O.object,"object")&&z.push(O.object),I(O.graph,"graph")&&z.push(O.graph),z}e.filterTerms=m;function y(O,I){const z=[];return I(O.subject,"subject")&&z.push("subject"),I(O.predicate,"predicate")&&z.push("predicate"),I(O.object,"object")&&z.push("object"),I(O.graph,"graph")&&z.push("graph"),z}e.filterQuadTermNames=y;function h(O,I,z){return(z||l).quad(I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph"))}e.mapTerms=h;function T(O,I,z){let Q=z;return Q=I(Q,O.subject,"subject"),Q=I(Q,O.predicate,"predicate"),Q=I(Q,O.object,"object"),I(Q,O.graph,"graph")}e.reduceTerms=T;function g(O,I){return I(O.subject,"subject")&&I(O.predicate,"predicate")&&I(O.object,"object")&&I(O.graph,"graph")}e.everyTerms=g;function v(O,I){return I(O.subject,"subject")||I(O.predicate,"predicate")||I(O.object,"object")||I(O.graph,"graph")}e.someTerms=v;function S(O,I){return!I||I.termType==="Variable"||I.termType==="Quad"&&O.termType==="Quad"&&w(O,I)||I.equals(O)}e.matchTerm=S;function x(O,I,z,Q,W){return S(O.subject,I)&&S(O.predicate,z)&&S(O.object,Q)&&S(O.graph,W)}e.matchPattern=x;function w(O,I){return x(O,I.subject,I.predicate,I.object,I.graph)}e.matchPatternComplete=w;function E(O,I,z={}){const Q={};function W(H,B){return g(H,(M,V)=>{var $,te;const J=B[V];switch(M.termType){case"Variable":return z.skipVarMapping&&J.termType==="Variable"||((te=($=Q[M.value])===null||$===void 0?void 0:$.equals(J))!==null&&te!==void 0?te:(Q[M.value]=J,!0));case"Quad":return J.termType==="Quad"&&W(M,J);default:return M.equals(J)}})}return W(I,O)&&(z.returnMappings?Q:!0)}e.matchPatternMappings=E},"../node_modules/rdf-terms/lib/TermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getQuads=e.getDefaultGraphs=e.getVariables=e.getLiterals=e.getBlankNodes=e.getNamedNodes=e.getTermsOfType=e.uniqTerms=e.TERM_TYPES=void 0;const o=t("../node_modules/rdf-string/index.js");e.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function l(h){const T={};return h.filter(g=>{const v=o.termToString(g);return!(v in T)&&(T[v]=!0)})}e.uniqTerms=l;function d(h,T){return h.filter(g=>g.termType===T)}e.getTermsOfType=d;function u(h){return d(h,"NamedNode")}e.getNamedNodes=u;function a(h){return d(h,"BlankNode")}e.getBlankNodes=a;function c(h){return d(h,"Literal")}e.getLiterals=c;function p(h){return d(h,"Variable")}e.getVariables=p;function m(h){return d(h,"DefaultGraph")}e.getDefaultGraphs=m;function y(h){return d(h,"Quad")}e.getQuads=y},"../node_modules/relative-to-absolute-iri/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/relative-to-absolute-iri/lib/Resolve.js"),e)},"../node_modules/relative-to-absolute-iri/lib/Resolve.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeDotSegmentsOfPath=e.removeDotSegments=e.resolve=void 0;function t(u,a){a=a||"";const c=a.indexOf("#");if(c>0&&(a=a.substr(0,c)),!u.length){if(a.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${a}' for value '${u}'`);return a}if(u.startsWith("?")){const v=a.indexOf("?");return v>0&&(a=a.substr(0,v)),a+u}if(u.startsWith("#"))return a+u;if(!a.length){const v=u.indexOf(":");if(v<0)throw new Error(`Found invalid relative IRI '${u}' for a missing baseIRI`);return l(u,v)}const p=u.indexOf(":");if(p>=0)return l(u,p);const m=a.indexOf(":");if(m<0)throw new Error(`Found invalid baseIRI '${a}' for value '${u}'`);const y=a.substr(0,m+1);if(u.indexOf("//")===0)return y+l(u,p);let h;if(a.indexOf("//",m)===m+1){if(h=a.indexOf("/",m+3),h<0)return a.length>m+3?a+"/"+l(u,p):y+l(u,p)}else if(h=a.indexOf("/",m+1),h<0)return y+l(u,p);if(u.indexOf("/")===0)return a.substr(0,h)+o(u);let T=a.substr(h);const g=T.lastIndexOf("/");return g>=0&&g<T.length-1&&(T=T.substr(0,g+1),u[0]==="."&&u[1]!=="."&&u[1]!=="/"&&u[2]&&(u=u.substr(1))),u=T+u,u=o(u),a.substr(0,h)+u}e.resolve=t;function o(u){const a=[];let c=0;for(;c<u.length;)switch(u[c]){case"/":if(u[c+1]===".")if(u[c+2]==="."){if(!d(u[c+3])){a.push([]),c++;break}a.pop(),u[c+3]||a.push([]),c+=3}else{if(!d(u[c+2])){a.push([]),c++;break}u[c+2]||a.push([]),c+=2}else a.push([]),c++;break;case"#":case"?":a.length||a.push([]),a[a.length-1].push(u.substr(c)),c=u.length;break;default:a.length||a.push([]),a[a.length-1].push(u[c]),c++;break}return"/"+a.map(p=>p.join("")).join("/")}e.removeDotSegments=o;function l(u,a){let c=a+1;a>=0?u[a+1]==="/"&&u[a+2]==="/"&&(c=a+3):u[0]==="/"&&u[1]==="/"&&(c=2);const p=u.indexOf("/",c);if(p<0)return u;const m=u.substr(0,p),y=u.substr(p);return m+o(y)}e.removeDotSegmentsOfPath=l;function d(u){return!u||u==="#"||u==="?"||u==="/"}},"../node_modules/spark-md5/spark-md5.js":n=>{(function(e){n.exports=e()})(function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(S,x){var w=S[0],E=S[1],O=S[2],I=S[3];w+=(E&O|~E&I)+x[0]-680876936|0,w=(w<<7|w>>>25)+E|0,I+=(w&E|~w&O)+x[1]-389564586|0,I=(I<<12|I>>>20)+w|0,O+=(I&w|~I&E)+x[2]+606105819|0,O=(O<<17|O>>>15)+I|0,E+=(O&I|~O&w)+x[3]-1044525330|0,E=(E<<22|E>>>10)+O|0,w+=(E&O|~E&I)+x[4]-176418897|0,w=(w<<7|w>>>25)+E|0,I+=(w&E|~w&O)+x[5]+1200080426|0,I=(I<<12|I>>>20)+w|0,O+=(I&w|~I&E)+x[6]-1473231341|0,O=(O<<17|O>>>15)+I|0,E+=(O&I|~O&w)+x[7]-45705983|0,E=(E<<22|E>>>10)+O|0,w+=(E&O|~E&I)+x[8]+1770035416|0,w=(w<<7|w>>>25)+E|0,I+=(w&E|~w&O)+x[9]-1958414417|0,I=(I<<12|I>>>20)+w|0,O+=(I&w|~I&E)+x[10]-42063|0,O=(O<<17|O>>>15)+I|0,E+=(O&I|~O&w)+x[11]-1990404162|0,E=(E<<22|E>>>10)+O|0,w+=(E&O|~E&I)+x[12]+1804603682|0,w=(w<<7|w>>>25)+E|0,I+=(w&E|~w&O)+x[13]-40341101|0,I=(I<<12|I>>>20)+w|0,O+=(I&w|~I&E)+x[14]-1502002290|0,O=(O<<17|O>>>15)+I|0,E+=(O&I|~O&w)+x[15]+1236535329|0,E=(E<<22|E>>>10)+O|0,w+=(E&I|O&~I)+x[1]-165796510|0,w=(w<<5|w>>>27)+E|0,I+=(w&O|E&~O)+x[6]-1069501632|0,I=(I<<9|I>>>23)+w|0,O+=(I&E|w&~E)+x[11]+643717713|0,O=(O<<14|O>>>18)+I|0,E+=(O&w|I&~w)+x[0]-373897302|0,E=(E<<20|E>>>12)+O|0,w+=(E&I|O&~I)+x[5]-701558691|0,w=(w<<5|w>>>27)+E|0,I+=(w&O|E&~O)+x[10]+38016083|0,I=(I<<9|I>>>23)+w|0,O+=(I&E|w&~E)+x[15]-660478335|0,O=(O<<14|O>>>18)+I|0,E+=(O&w|I&~w)+x[4]-405537848|0,E=(E<<20|E>>>12)+O|0,w+=(E&I|O&~I)+x[9]+568446438|0,w=(w<<5|w>>>27)+E|0,I+=(w&O|E&~O)+x[14]-1019803690|0,I=(I<<9|I>>>23)+w|0,O+=(I&E|w&~E)+x[3]-187363961|0,O=(O<<14|O>>>18)+I|0,E+=(O&w|I&~w)+x[8]+1163531501|0,E=(E<<20|E>>>12)+O|0,w+=(E&I|O&~I)+x[13]-1444681467|0,w=(w<<5|w>>>27)+E|0,I+=(w&O|E&~O)+x[2]-51403784|0,I=(I<<9|I>>>23)+w|0,O+=(I&E|w&~E)+x[7]+1735328473|0,O=(O<<14|O>>>18)+I|0,E+=(O&w|I&~w)+x[12]-1926607734|0,E=(E<<20|E>>>12)+O|0,w+=(E^O^I)+x[5]-378558|0,w=(w<<4|w>>>28)+E|0,I+=(w^E^O)+x[8]-2022574463|0,I=(I<<11|I>>>21)+w|0,O+=(I^w^E)+x[11]+1839030562|0,O=(O<<16|O>>>16)+I|0,E+=(O^I^w)+x[14]-35309556|0,E=(E<<23|E>>>9)+O|0,w+=(E^O^I)+x[1]-1530992060|0,w=(w<<4|w>>>28)+E|0,I+=(w^E^O)+x[4]+1272893353|0,I=(I<<11|I>>>21)+w|0,O+=(I^w^E)+x[7]-155497632|0,O=(O<<16|O>>>16)+I|0,E+=(O^I^w)+x[10]-1094730640|0,E=(E<<23|E>>>9)+O|0,w+=(E^O^I)+x[13]+681279174|0,w=(w<<4|w>>>28)+E|0,I+=(w^E^O)+x[0]-358537222|0,I=(I<<11|I>>>21)+w|0,O+=(I^w^E)+x[3]-722521979|0,O=(O<<16|O>>>16)+I|0,E+=(O^I^w)+x[6]+76029189|0,E=(E<<23|E>>>9)+O|0,w+=(E^O^I)+x[9]-640364487|0,w=(w<<4|w>>>28)+E|0,I+=(w^E^O)+x[12]-421815835|0,I=(I<<11|I>>>21)+w|0,O+=(I^w^E)+x[15]+530742520|0,O=(O<<16|O>>>16)+I|0,E+=(O^I^w)+x[2]-995338651|0,E=(E<<23|E>>>9)+O|0,w+=(O^(E|~I))+x[0]-198630844|0,w=(w<<6|w>>>26)+E|0,I+=(E^(w|~O))+x[7]+1126891415|0,I=(I<<10|I>>>22)+w|0,O+=(w^(I|~E))+x[14]-1416354905|0,O=(O<<15|O>>>17)+I|0,E+=(I^(O|~w))+x[5]-57434055|0,E=(E<<21|E>>>11)+O|0,w+=(O^(E|~I))+x[12]+1700485571|0,w=(w<<6|w>>>26)+E|0,I+=(E^(w|~O))+x[3]-1894986606|0,I=(I<<10|I>>>22)+w|0,O+=(w^(I|~E))+x[10]-1051523|0,O=(O<<15|O>>>17)+I|0,E+=(I^(O|~w))+x[1]-2054922799|0,E=(E<<21|E>>>11)+O|0,w+=(O^(E|~I))+x[8]+1873313359|0,w=(w<<6|w>>>26)+E|0,I+=(E^(w|~O))+x[15]-30611744|0,I=(I<<10|I>>>22)+w|0,O+=(w^(I|~E))+x[6]-1560198380|0,O=(O<<15|O>>>17)+I|0,E+=(I^(O|~w))+x[13]+1309151649|0,E=(E<<21|E>>>11)+O|0,w+=(O^(E|~I))+x[4]-145523070|0,w=(w<<6|w>>>26)+E|0,I+=(E^(w|~O))+x[11]-1120210379|0,I=(I<<10|I>>>22)+w|0,O+=(w^(I|~E))+x[2]+718787259|0,O=(O<<15|O>>>17)+I|0,E+=(I^(O|~w))+x[9]-343485551|0,E=(E<<21|E>>>11)+O|0,S[0]=w+S[0]|0,S[1]=E+S[1]|0,S[2]=O+S[2]|0,S[3]=I+S[3]|0}function l(S){var x=[],w;for(w=0;w<64;w+=4)x[w>>2]=S.charCodeAt(w)+(S.charCodeAt(w+1)<<8)+(S.charCodeAt(w+2)<<16)+(S.charCodeAt(w+3)<<24);return x}function d(S){var x=[],w;for(w=0;w<64;w+=4)x[w>>2]=S[w]+(S[w+1]<<8)+(S[w+2]<<16)+(S[w+3]<<24);return x}function u(S){var x=S.length,w=[1732584193,-271733879,-1732584194,271733878],E,O,I,z,Q,W;for(E=64;E<=x;E+=64)o(w,l(S.substring(E-64,E)));for(S=S.substring(E-64),O=S.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=0;E<O;E+=1)I[E>>2]|=S.charCodeAt(E)<<(E%4<<3);if(I[E>>2]|=128<<(E%4<<3),E>55)for(o(w,I),E=0;E<16;E+=1)I[E]=0;return z=x*8,z=z.toString(16).match(/(.*?)(.{0,8})$/),Q=parseInt(z[2],16),W=parseInt(z[1],16)||0,I[14]=Q,I[15]=W,o(w,I),w}function a(S){var x=S.length,w=[1732584193,-271733879,-1732584194,271733878],E,O,I,z,Q,W;for(E=64;E<=x;E+=64)o(w,d(S.subarray(E-64,E)));for(S=E-64<x?S.subarray(E-64):new Uint8Array(0),O=S.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=0;E<O;E+=1)I[E>>2]|=S[E]<<(E%4<<3);if(I[E>>2]|=128<<(E%4<<3),E>55)for(o(w,I),E=0;E<16;E+=1)I[E]=0;return z=x*8,z=z.toString(16).match(/(.*?)(.{0,8})$/),Q=parseInt(z[2],16),W=parseInt(z[1],16)||0,I[14]=Q,I[15]=W,o(w,I),w}function c(S){var x="",w;for(w=0;w<4;w+=1)x+=t[S>>w*8+4&15]+t[S>>w*8&15];return x}function p(S){var x;for(x=0;x<S.length;x+=1)S[x]=c(S[x]);return S.join("")}p(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function S(x,w){return x=x|0||0,x<0?Math.max(x+w,0):Math.min(x,w)}ArrayBuffer.prototype.slice=function(x,w){var E=this.byteLength,O=S(x,E),I=E,z,Q,W,H;return w!==e&&(I=S(w,E)),O>I?new ArrayBuffer(0):(z=I-O,Q=new ArrayBuffer(z),W=new Uint8Array(Q),H=new Uint8Array(this,O,z),W.set(H),Q)}}();function m(S){return/[\u0080-\uFFFF]/.test(S)&&(S=unescape(encodeURIComponent(S))),S}function y(S,x){var w=S.length,E=new ArrayBuffer(w),O=new Uint8Array(E),I;for(I=0;I<w;I+=1)O[I]=S.charCodeAt(I);return x?O:E}function h(S){return String.fromCharCode.apply(null,new Uint8Array(S))}function T(S,x,w){var E=new Uint8Array(S.byteLength+x.byteLength);return E.set(new Uint8Array(S)),E.set(new Uint8Array(x),S.byteLength),w?E:E.buffer}function g(S){var x=[],w=S.length,E;for(E=0;E<w-1;E+=2)x.push(parseInt(S.substr(E,2),16));return String.fromCharCode.apply(String,x)}function v(){this.reset()}return v.prototype.append=function(S){return this.appendBinary(m(S)),this},v.prototype.appendBinary=function(S){this._buff+=S,this._length+=S.length;var x=this._buff.length,w;for(w=64;w<=x;w+=64)o(this._hash,l(this._buff.substring(w-64,w)));return this._buff=this._buff.substring(w-64),this},v.prototype.end=function(S){var x=this._buff,w=x.length,E,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I;for(E=0;E<w;E+=1)O[E>>2]|=x.charCodeAt(E)<<(E%4<<3);return this._finish(O,w),I=p(this._hash),S&&(I=g(I)),this.reset(),I},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},v.prototype.setState=function(S){return this._buff=S.buff,this._length=S.length,this._hash=S.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(S,x){var w=x,E,O,I;if(S[w>>2]|=128<<(w%4<<3),w>55)for(o(this._hash,S),w=0;w<16;w+=1)S[w]=0;E=this._length*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),O=parseInt(E[2],16),I=parseInt(E[1],16)||0,S[14]=O,S[15]=I,o(this._hash,S)},v.hash=function(S,x){return v.hashBinary(m(S),x)},v.hashBinary=function(S,x){var w=u(S),E=p(w);return x?g(E):E},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(S){var x=T(this._buff.buffer,S,!0),w=x.length,E;for(this._length+=S.byteLength,E=64;E<=w;E+=64)o(this._hash,d(x.subarray(E-64,E)));return this._buff=E-64<w?new Uint8Array(x.buffer.slice(E-64)):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(S){var x=this._buff,w=x.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O,I;for(O=0;O<w;O+=1)E[O>>2]|=x[O]<<(O%4<<3);return this._finish(E,w),I=p(this._hash),S&&(I=g(I)),this.reset(),I},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var S=v.prototype.getState.call(this);return S.buff=h(S.buff),S},v.ArrayBuffer.prototype.setState=function(S){return S.buff=y(S.buff,!0),v.prototype.setState.call(this,S)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(S,x){var w=a(new Uint8Array(S)),E=p(w);return x?g(E):E},v})},"../node_modules/sparqlee/dist/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=e.orderTypes=e.isExpressionError=e.ExpressionError=e.AggregateEvaluator=e.SyncEvaluator=e.AsyncEvaluator=void 0;var o=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js");Object.defineProperty(e,"AsyncEvaluator",{enumerable:!0,get:function(){return o.AsyncEvaluator}});var l=t("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");Object.defineProperty(e,"SyncEvaluator",{enumerable:!0,get:function(){return l.SyncEvaluator}});var d=t("../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js");Object.defineProperty(e,"AggregateEvaluator",{enumerable:!0,get:function(){return d.AggregateEvaluator}});var u=t("../node_modules/sparqlee/dist/lib/util/Errors.js");Object.defineProperty(e,"ExpressionError",{enumerable:!0,get:function(){return u.ExpressionError}}),Object.defineProperty(e,"isExpressionError",{enumerable:!0,get:function(){return u.isExpressionError}});var a=t("../node_modules/sparqlee/dist/lib/util/Ordering.js");Object.defineProperty(e,"orderTypes",{enumerable:!0,get:function(){return a.orderTypes}});var c=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js");Object.defineProperty(e,"AsyncAggregateEvaluator",{enumerable:!0,get:function(){return c.AsyncAggregateEvaluator}})},"../node_modules/sparqlee/dist/lib/aggregators/Average.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Average=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/functions/index.js"),d=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class c extends a.BaseAggregator{constructor(){super(...arguments),this.summer=l.regularFunctions[u.RegularOperator.ADDITION],this.divider=l.regularFunctions[u.RegularOperator.DIVISION]}static emptyValue(){return(0,d.integer)(0).toRDF()}init(m){return{sum:this.termToNumericOrError(m),count:1}}put(m,y){const h=this.termToNumericOrError(y);return{sum:this.summer.apply([m.sum,h],this.sharedContext),count:m.count+1}}result(m){const y=new o.IntegerLiteral(m.count);return this.divider.apply([m.sum,y],this.sharedContext).toRDF()}}e.Average=c},"../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregator=void 0;const o=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),d=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class u{constructor(c,p){this.sharedContext=p,this.distinct=c.distinct,this.separator=c.separator||" ",this.termTransformer=new o.TermTransformer(p.superTypeProvider,p.enableExtendedXsdTypes)}termToNumericOrError(c){if(c.termType!=="Literal")throw new Error(`Term with value ${c.value} has type ${c.termType} and is not a numeric literal`);if(!(0,d.isSubTypeOf)(c.datatype.value,l.TypeAlias.SPARQL_NUMERIC,this.sharedContext.superTypeProvider))throw new Error(`Term datatype ${c.datatype.value} with value ${c.value} has type ${c.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(c)}extractValue(c){if(c.termType!=="Literal")throw new Error(`Term with value ${c.value} has type ${c.termType} and is not a literal`);const p=this.termTransformer.transformLiteral(c);return{type:p.dataType,value:p.typedValue}}static emptyValue(){}}e.BaseAggregator=u},"../node_modules/sparqlee/dist/lib/aggregators/Count.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Count=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class d extends l.BaseAggregator{static emptyValue(){return(0,o.integer)(0).toRDF()}init(a){return 1}put(a,c){return a+1}result(a){return(0,o.integer)(a).toRDF()}}e.Count=d},"../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupConcat=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class d extends l.BaseAggregator{static emptyValue(){return(0,o.string)("").toRDF()}init(a){return a.value}put(a,c){return a+this.separator+c.value}result(a){return(0,o.string)(a).toRDF()}}e.GroupConcat=d},"../node_modules/sparqlee/dist/lib/aggregators/Max.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Max=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends o.BaseAggregator{init(u){const{value:a}=this.extractValue(u);if(u.termType==="Literal")return{extremeValue:a,term:u};throw new Error("Term should be a literal")}put(u,a){const c=this.extractValue(a);return c.value>u.extremeValue&&a.termType==="Literal"?{extremeValue:c.value,term:a}:u}result(u){return u.term}}e.Max=l},"../node_modules/sparqlee/dist/lib/aggregators/Min.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Min=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends o.BaseAggregator{init(u){const{value:a}=this.extractValue(u);if(u.termType==="Literal")return{extremeValue:a,term:u};throw new Error("Term should be a literal")}put(u,a){const c=this.extractValue(a);return c.value<u.extremeValue&&a.termType==="Literal"?{extremeValue:c.value,term:a}:u}result(u){return u.term}}e.Min=l},"../node_modules/sparqlee/dist/lib/aggregators/Sample.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sample=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends o.BaseAggregator{init(u){return u}put(u,a){return u}result(u){return u}}e.Sample=l},"../node_modules/sparqlee/dist/lib/aggregators/Sum.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sum=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/index.js"),l=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class a extends u.BaseAggregator{constructor(){super(...arguments),this.summer=o.regularFunctions[d.RegularOperator.ADDITION]}static emptyValue(){return(0,l.integer)(0).toRDF()}init(p){return this.termToNumericOrError(p)}put(p,m){const y=this.termToNumericOrError(m);return this.summer.apply([p,y],this.sharedContext)}result(p){return p.toRDF()}}e.Sum=a},"../node_modules/sparqlee/dist/lib/aggregators/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.aggregators=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/Average.js"),l=t("../node_modules/sparqlee/dist/lib/aggregators/Count.js"),d=t("../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js"),u=t("../node_modules/sparqlee/dist/lib/aggregators/Max.js"),a=t("../node_modules/sparqlee/dist/lib/aggregators/Min.js"),c=t("../node_modules/sparqlee/dist/lib/aggregators/Sample.js"),p=t("../node_modules/sparqlee/dist/lib/aggregators/Sum.js");e.aggregators={count:l.Count,sum:p.Sum,min:a.Min,max:u.Max,avg:o.Average,group_concat:d.GroupConcat,sample:c.Sample}},"../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AggregateEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js"),l=t("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");class d extends o.BaseAggregateEvaluator{constructor(a,c,p){super(a,l.SyncEvaluator.completeContext(c||{}),p),this.evaluator=new l.SyncEvaluator(a.expression,c)}put(a){this.init(a)}__put(a){try{const c=this.evaluator.evaluate(a);this.state=this.aggregator.put(this.state,c)}catch(c){this.safeThrow(c)}}safeThrow(a){if(this.throwError)throw a;this.put=()=>{},this.result=()=>{}}init(a){try{const c=this.evaluator.evaluate(a);this.state=this.aggregator.init(c),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(c){this.safeThrow(c)}}}e.AggregateEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js"),l=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js");class d extends l.BaseAggregateEvaluator{constructor(a,c,p){super(a,o.AsyncEvaluator.completeContext(c||{}),p),this.evaluator=new o.AsyncEvaluator(a.expression,c),this.errorOccurred=!1}put(a){return this.init(a)}async __put(a){try{const c=await this.evaluator.evaluate(a);this.state=this.aggregator.put(this.state,c)}catch(c){this.safeThrow(c)}}safeThrow(a){if(this.throwError)throw a;this.put=async()=>{},this.result=()=>{},this.errorOccurred=!0}async init(a){try{const c=await this.evaluator.evaluate(a);if(!c||this.errorOccurred)return;if(this.state){this.state=this.aggregator.put(this.state,c);return}this.state=this.aggregator.init(c),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(c){this.safeThrow(c)}}}e.AsyncAggregateEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncEvaluator=void 0;const o=t("../node_modules/lru-cache/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js");class u{constructor(c,p={}){this.algExpr=c;const m=p.extensionFunctionCreator||(()=>{}),y=u.completeContext(p),h=new l.AlgebraTransformer(Object.assign({type:"async",creator:m},y));this.expr=h.transformAlgebra(c),this.evaluator=new d.AsyncRecursiveEvaluator(y,h)}static completeContext(c){return{now:c.now||new Date(Date.now()),baseIRI:c.baseIRI||void 0,overloadCache:c.overloadCache||new o,superTypeProvider:{cache:c.typeCache||new o,discoverer:c.getSuperType||(()=>"term")},extensionFunctionCreator:c.extensionFunctionCreator,exists:c.exists,aggregate:c.aggregate,bnode:c.bnode,enableExtendedXsdTypes:c.enableExtendedXsdTypes||!1}}async evaluate(c){return(await this.evaluator.evaluate(this.expr,c)).toRDF()}async evaluateAsEBV(c){return(await this.evaluator.evaluate(this.expr,c)).coerceEBV()}async evaluateAsInternal(c){return await this.evaluator.evaluate(this.expr,c)}}e.AsyncEvaluator=u},"../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncEvaluator=void 0;const o=t("../node_modules/lru-cache/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js");class u{constructor(c,p={}){this.algExpr=c,this.context=p;const m=p.extensionFunctionCreator||(()=>{}),y=u.completeContext(p),h=new l.AlgebraTransformer(Object.assign({type:"sync",creator:m},y));this.expr=h.transformAlgebra(c),this.evaluator=new d.SyncRecursiveEvaluator(y,h)}static completeContext(c){return{now:c.now||new Date(Date.now()),baseIRI:c.baseIRI||void 0,overloadCache:c.overloadCache||new o,superTypeProvider:{cache:c.typeCache||new o,discoverer:c.getSuperType||(()=>"term")},extensionFunctionCreator:c.extensionFunctionCreator,exists:c.exists,aggregate:c.aggregate,bnode:c.bnode,enableExtendedXsdTypes:c.enableExtendedXsdTypes||!1}}evaluate(c){return this.evaluator.evaluate(this.expr,c).toRDF()}evaluateAsEBV(c){return this.evaluator.evaluate(this.expr,c).coerceEBV()}evaluateAsInternal(c){return this.evaluator.evaluate(this.expr,c)}}e.SyncEvaluator=u},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncRecursiveEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class a extends u.BaseExpressionEvaluator{constructor(p,m){super(m||new l.TermTransformer(p.superTypeProvider,p.enableExtendedXsdTypes)),this.context=p,this.subEvaluators={[o.ExpressionType.Term]:this.term.bind(this),[o.ExpressionType.Variable]:this.variable.bind(this),[o.ExpressionType.Operator]:this.evalOperator.bind(this),[o.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[o.ExpressionType.Named]:this.evalNamed.bind(this),[o.ExpressionType.Existence]:this.evalExistence.bind(this),[o.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[o.ExpressionType.AsyncExtension]:this.evalAsyncExtension.bind(this)}}async evaluate(p,m){const y=this.subEvaluators[p.expressionType];if(!y)throw new d.InvalidExpressionType(p);return y.bind(this)(p,m)}async evalOperator(p,m){const y=p.args.map(T=>this.evaluate(T,m)),h=await Promise.all(y);return p.apply(h)}async evalSpecialOperator(p,m){const y=this.evaluate.bind(this),h={args:p.args,mapping:m,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,overloadCache:this.context.overloadCache,evaluate:y,bnode:this.context.bnode,enableExtendedXsdTypes:this.context.enableExtendedXsdTypes};return p.applyAsync(h)}async _evalAsyncArgs(p,m){const y=p.map(h=>this.evaluate(h,m));return await Promise.all(y)}async evalNamed(p,m){return p.apply(await this._evalAsyncArgs(p.args,m))}async evalAsyncExtension(p,m){return await p.apply(await this._evalAsyncArgs(p.args,m))}async evalExistence(p,m){if(!this.context.exists)throw new d.NoExistenceHook;return new o.BooleanLiteral(await this.context.exists(p.expression,m))}async evalAggregate(p,m){if(!this.context.aggregate)throw new d.NoExistenceHook;return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(p.expression))}}e.AsyncRecursiveEvaluator=a},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregateEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class d{constructor(a,c,p){this.throwError=!1,this.expression=a,this.aggregator=new o.aggregators[a.aggregator](a,c),this.throwError=p||!1}static emptyValue(a,c=!1){const p=o.aggregators[a.aggregator].emptyValue();if(p===void 0&&c)throw new l.EmptyAggregateError;return p}result(){return this.aggregator.constructor.emptyValue()}__result(){return this.aggregator.result(this.state)}}e.BaseAggregateEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseExpressionEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class d{constructor(a){this.termTransformer=a}term(a,c){return a}variable(a,c){const p=c.get((0,o.expressionToVar)(a));if(!p)throw new l.UnboundVariableError(a.name,c);return this.termTransformer.transformRDFTermUnsafe(p)}}e.BaseExpressionEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncRecursiveEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class a extends u.BaseExpressionEvaluator{constructor(p,m){super(m||new l.TermTransformer(p.superTypeProvider,p.enableExtendedXsdTypes)),this.context=p,this.subEvaluators={[o.ExpressionType.Term]:this.term.bind(this),[o.ExpressionType.Variable]:this.variable.bind(this),[o.ExpressionType.Operator]:this.evalOperator.bind(this),[o.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[o.ExpressionType.Named]:this.evalNamed.bind(this),[o.ExpressionType.Existence]:this.evalExistence.bind(this),[o.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[o.ExpressionType.SyncExtension]:this.evalSyncExtension.bind(this)}}evaluate(p,m){const y=this.subEvaluators[p.expressionType];if(!y)throw new d.InvalidExpressionType(p);return y.bind(this)(p,m)}evalOperator(p,m){const y=p.args.map(h=>this.evaluate(h,m));return p.apply(y)}evalSpecialOperator(p,m){const y=this.evaluate.bind(this),h={args:p.args,mapping:m,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,overloadCache:this.context.overloadCache,evaluate:y,bnode:this.context.bnode,enableExtendedXsdTypes:this.context.enableExtendedXsdTypes};return p.applySync(h)}evalNamed(p,m){const y=p.args.map(h=>this.evaluate(h,m));return p.apply(y)}evalSyncExtension(p,m){const y=p.args.map(h=>this.evaluate(h,m));return p.apply(y)}evalExistence(p,m){if(!this.context.exists)throw new d.NoExistenceHook;return new o.BooleanLiteral(this.context.exists(p.expression,m))}evalAggregate(p,m){if(!this.context.aggregate)throw new d.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(p.expression))}}e.SyncRecursiveEvaluator=a},"../node_modules/sparqlee/dist/lib/expressions/Aggregate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Aggregate=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a){this.name=u,this.expression=a,this.expressionType=o.ExpressionType.Aggregate}}e.Aggregate=l},"../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncExtension=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.name=u,this.args=a,this.apply=c,this.expressionType=o.ExpressionType.AsyncExtension}}e.AsyncExtension=l},"../node_modules/sparqlee/dist/lib/expressions/Existence.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Existence=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u){this.expression=u,this.expressionType=o.ExpressionType.Existence}}e.Existence=l},"../node_modules/sparqlee/dist/lib/expressions/Expressions.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asTermType=e.ExpressionType=void 0,function(o){o.Aggregate="aggregate",o.Existence="existence",o.Named="named",o.Operator="operator",o.SpecialOperator="specialOperator",o.Term="term",o.Variable="variable",o.AsyncExtension="asyncExtension",o.SyncExtension="syncExtension"}(e.ExpressionType||(e.ExpressionType={}));function t(o){if(o==="namedNode"||o==="literal"||o==="blankNode")return o}e.asTermType=t},"../node_modules/sparqlee/dist/lib/expressions/Named.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Named=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.name=u,this.args=a,this.apply=c,this.expressionType=o.ExpressionType.Named}}e.Named=l},"../node_modules/sparqlee/dist/lib/expressions/Operator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Operator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a){this.args=u,this.apply=a,this.expressionType=o.ExpressionType.Operator}}e.Operator=l},"../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialOperator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.args=u,this.applyAsync=a,this.applySync=c,this.expressionType=o.ExpressionType.SpecialOperator}}e.SpecialOperator=l},"../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncExtension=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.name=u,this.args=a,this.apply=c,this.expressionType=o.ExpressionType.SyncExtension}}e.SyncExtension=l},"../node_modules/sparqlee/dist/lib/expressions/Term.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNonLexicalLiteral=e.NonLexicalLiteral=e.StringLiteral=e.LangStringLiteral=e.DateTimeLiteral=e.BooleanLiteral=e.DoubleLiteral=e.FloatLiteral=e.DecimalLiteral=e.IntegerLiteral=e.NumericLiteral=e.Literal=e.isLiteralTermExpression=e.BlankNode=e.NamedNode=e.Term=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),a=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),c=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),p=new o.DataFactory;class m{constructor(){this.expressionType=c.ExpressionType.Term}str(){throw new u.InvalidArgumentTypes([this],l.RegularOperator.STR)}coerceEBV(){throw new u.EBVCoercionError(this)}}e.Term=m;class y extends m{constructor(M){super(),this.value=M,this.termType="namedNode"}toRDF(){return p.namedNode(this.value)}str(){return this.value}}e.NamedNode=y;class h extends m{constructor(M){super(),this.termType="blankNode",this.value=typeof M=="string"?p.blankNode(M):M}static nextID(){return h._nextID+=1,h.nextID.toString()}toRDF(){return this.value}}e.BlankNode=h,h._nextID=0;function T(B){if(B.termType==="literal")return B}e.isLiteralTermExpression=T;class g extends m{constructor(M,V,$,te,J){super(),this.typedValue=M,this.dataType=V,this.strValue=$,this.language=te,this.termType="literal",this.mainSparqlType=J||"other"}toRDF(){return p.literal(this.strValue||this.str(),this.language||p.namedNode(this.dataType))}str(){return this.strValue||this.typedValue.toString()}}e.Literal=g;class v extends g{constructor(M,V,$,te,J){super(M,V,$,te,J),this.typedValue=M,this.strValue=$,this.language=te}coerceEBV(){return!!this.typedValue}toRDF(){const M=super.toRDF();return Number.isFinite(this.typedValue)||(M.value=M.value.replace("Infinity","INF")),M}str(){return this.strValue||this.specificFormatter(this.typedValue)}}e.NumericLiteral=v;class S extends v{constructor(M,V,$,te){super(M,V||d.TypeURL.XSD_INTEGER,$,te,"integer"),this.typedValue=M,this.strValue=$,this.language=te}specificFormatter(M){return M.toFixed(0)}}e.IntegerLiteral=S;class x extends v{constructor(M,V,$,te){super(M,V||d.TypeURL.XSD_DECIMAL,$,te,"decimal"),this.typedValue=M,this.strValue=$,this.language=te}specificFormatter(M){return M.toString()}}e.DecimalLiteral=x;class w extends v{constructor(M,V,$,te){super(M,V||d.TypeURL.XSD_FLOAT,$,te,"float"),this.typedValue=M,this.strValue=$,this.language=te}specificFormatter(M){return M.toString()}}e.FloatLiteral=w;class E extends v{constructor(M,V,$,te){super(M,V||d.TypeURL.XSD_DOUBLE,$,te,"double"),this.typedValue=M,this.strValue=$,this.language=te}specificFormatter(M){const V=M.toExponential(),[$,te]=V.split("e"),J=te.replace(/\+/u,"");return`${$.includes(".")?$:`${$}.0`}E${J}`}}e.DoubleLiteral=E;class O extends g{constructor(M,V,$){super(M,$||d.TypeURL.XSD_BOOLEAN,V,void 0,"boolean"),this.typedValue=M,this.strValue=V}coerceEBV(){return!!this.typedValue}}e.BooleanLiteral=O;class I extends g{constructor(M,V,$){super(M,$||d.TypeURL.XSD_DATE_TIME,V,void 0,"dateTime"),this.typedValue=M,this.strValue=V}}e.DateTimeLiteral=I;class z extends g{constructor(M,V,$){super(M,$||d.TypeURL.RDF_LANG_STRING,M,V,"langString"),this.typedValue=M,this.language=V}coerceEBV(){return this.str().length>0}}e.LangStringLiteral=z;class Q extends g{constructor(M,V){super(M,V||d.TypeURL.XSD_STRING,M,void 0,"string"),this.typedValue=M}coerceEBV(){return this.str().length>0}}e.StringLiteral=Q;class W extends g{constructor(M,V,$,te,J){super({toString:()=>"undefined"},V,te,J,"nonlexical"),this.typeURL=V,this.openWorldType=$,this.typedValue={toString:()=>"undefined"},this.dataType=d.TypeAlias.SPARQL_NON_LEXICAL}coerceEBV(){if((0,a.isSubTypeOf)(this.typeURL,d.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,a.isSubTypeOf)(this.typeURL,d.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new u.EBVCoercionError(this)}toRDF(){return p.literal(this.str(),this.language||p.namedNode(this.typeURL))}str(){return this.strValue||""}}e.NonLexicalLiteral=W;function H(B){if(B.dataType===d.TypeAlias.SPARQL_NON_LEXICAL)return B}e.isNonLexicalLiteral=H},"../node_modules/sparqlee/dist/lib/expressions/Variable.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u){this.expressionType=o.ExpressionType.Variable,this.name=u}}e.Variable=l},"../node_modules/sparqlee/dist/lib/expressions/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var p=Object.getOwnPropertyDescriptor(u,a);(!p||("get"in p?!u.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,p)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Variable.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Term.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Operator.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Named.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Aggregate.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Existence.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js"),e)},"../node_modules/sparqlee/dist/lib/functions/Core.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialFunction=e.NamedFunction=e.RegularFunction=e.BaseFunction=void 0;const o=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class l{constructor(m,y){this.operator=m,this.apply=(h,T)=>(this.monomorph(h,T.superTypeProvider,T.overloadCache,T.enableExtendedXsdTypes)||this.handleInvalidTypes(h))(T)(h),this.arity=y.arity,this.overloads=y.overloads}monomorph(m,y,h,T){return T?this.overloads.experimentalTree.search(m,y,h):this.overloads.tree.search(m)}}e.BaseFunction=l;class d extends l{constructor(m,y){super(m,y),this.functionClass="regular"}handleInvalidTypes(m){throw new o.InvalidArgumentTypes(m,this.operator)}}e.RegularFunction=d;class u extends l{constructor(m,y){super(m,y),this.functionClass="named"}handleInvalidTypes(m){throw new o.InvalidArgumentTypes(m,this.operator)}}e.NamedFunction=u;class a{constructor(m,y){this.operator=m,this.functionClass="special",this.arity=y.arity,this.applySync=y.applySync,this.applyAsync=y.applyAsync,this.checkArity=y.checkArity||c(this.arity)}}e.SpecialFunction=a;function c(p){return m=>p===Number.POSITIVE_INFINITY?!0:Array.isArray(p)?p.includes(m.length):m.length===p}},"../node_modules/sparqlee/dist/lib/functions/Helpers.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expressionToVar=e.dateTime=e.langString=e.string=e.double=e.float=e.decimal=e.integer=e.bool=e.Builder=e.declare=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),c=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),p=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),m=t("../node_modules/sparqlee/dist/lib/functions/LegacyTree.js"),y=t("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js"),h=new o.DataFactory;function T(W){return new g(W)}e.declare=T;class g{constructor(H){this.overloadTree=new y.OverloadTree(H),this.legacyTree=new m.LegacyTree,this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,{experimentalTree:this.overloadTree,tree:this.legacyTree}}set(H,B){return this.overloadTree.addOverload(H,B),this.legacyTree.addOverload(H,B),this}setLegacy(H,B){return this.legacyTree.addLegacyOverload(H,B),this}copy({from:H,to:B}){const M=this.overloadTree.getImplementationExact(H);if(!M)throw new c.UnexpectedError("Tried to copy implementation, but types not found",{from:H,to:B});return this.set(B,M)}onUnary(H,B){return this.set([H],M=>([V])=>B(M)(V))}onUnaryTyped(H,B){return this.set([H],M=>([V])=>B(M)(V.typedValue))}onBinary(H,B){return this.set(H,M=>([V,$])=>B(M)(V,$))}onBinaryTyped(H,B){return this.set(H,M=>([V,$])=>B(M)(V.typedValue,$.typedValue))}onTernaryTyped(H,B){return this.set(H,M=>([V,$,te])=>B(M)(V.typedValue,$.typedValue,te.typedValue))}onTernary(H,B){return this.set(H,M=>([V,$,te])=>B(M)(V,$,te))}onQuaternaryTyped(H,B){return this.set(H,M=>([V,$,te,J])=>B(M)(V.typedValue,$.typedValue,te.typedValue,J.typedValue))}onTerm1(H){return this.set(["term"],B=>([M])=>H(B)(M))}onLiteral1(H){return this.set(["literal"],B=>([M])=>H(B)(M))}onBoolean1(H){return this.set([u.TypeURL.XSD_BOOLEAN],B=>([M])=>H(B)(M))}onBoolean1Typed(H){return this.set([u.TypeURL.XSD_BOOLEAN],B=>([M])=>H(B)(M.typedValue))}onString1(H){return this.set([u.TypeURL.XSD_STRING],B=>([M])=>H(B)(M))}onString1Typed(H){return this.set([u.TypeURL.XSD_STRING],B=>([M])=>H(B)(M.typedValue))}onLangString1(H){return this.set([u.TypeURL.RDF_LANG_STRING],B=>([M])=>H(B)(M))}onStringly1(H){return this.set([u.TypeAlias.SPARQL_STRINGLY],B=>([M])=>H(B)(M))}onStringly1Typed(H){return this.set([u.TypeAlias.SPARQL_STRINGLY],B=>([M])=>H(B)(M.typedValue))}onNumeric1(H){return this.set([u.TypeAlias.SPARQL_NUMERIC],B=>([M])=>H(B)(M)).invalidLexicalForm([u.TypeAlias.SPARQL_NON_LEXICAL],1)}onDateTime1(H){return this.set([u.TypeURL.XSD_DATE_TIME],B=>([M])=>H(B)(M)).invalidLexicalForm([u.TypeAlias.SPARQL_NON_LEXICAL],1)}numericConverter(H){const B=M=>V=>H(M)(V.typedValue);return this.onBinary([a.TypeURL.XSD_INTEGER],M=>V=>S(B(M)(V))).onBinary([a.TypeURL.XSD_DECIMAL],M=>V=>x(B(M)(V))).onBinary([a.TypeURL.XSD_FLOAT],M=>V=>w(B(M)(V))).onBinary([a.TypeURL.XSD_DOUBLE],M=>V=>E(B(M)(V))).invalidLexicalForm([u.TypeAlias.SPARQL_NON_LEXICAL],1)}arithmetic(H){const B=M=>(V,$)=>H(M)(V.typedValue,$.typedValue);return this.onBinary([a.TypeURL.XSD_INTEGER,a.TypeURL.XSD_INTEGER],M=>(V,$)=>S(B(M)(V,$))).onBinary([a.TypeURL.XSD_DECIMAL,a.TypeURL.XSD_DECIMAL],M=>(V,$)=>x(B(M)(V,$))).onBinary([a.TypeURL.XSD_FLOAT,a.TypeURL.XSD_FLOAT],M=>(V,$)=>w(B(M)(V,$))).onBinary([a.TypeURL.XSD_DOUBLE,a.TypeURL.XSD_DOUBLE],M=>(V,$)=>E(B(M)(V,$))).setLegacy([a.TypeAlias.SPARQL_NUMERIC,a.TypeAlias.SPARQL_NUMERIC],M=>([V,$])=>g.legacyArithmeticPromotion[V.mainSparqlType][$.mainSparqlType](H(M)(V.typedValue,$.typedValue)))}numberTest(H){return this.numeric(B=>([M,V])=>{const $=H(B)(M.typedValue,V.typedValue);return v($)})}stringTest(H){return this.set([u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],B=>([M,V])=>{const $=H(B)(M.typedValue,V.typedValue);return v($)}).invalidLexicalForm([u.TypeAlias.SPARQL_NON_LEXICAL,u.TypeURL.XSD_STRING],1).invalidLexicalForm([u.TypeURL.XSD_STRING,u.TypeAlias.SPARQL_NON_LEXICAL],2)}booleanTest(H){return this.set([u.TypeURL.XSD_BOOLEAN,u.TypeURL.XSD_BOOLEAN],B=>([M,V])=>{const $=H(B)(M.typedValue,V.typedValue);return v($)}).invalidLexicalForm([u.TypeAlias.SPARQL_NON_LEXICAL,u.TypeURL.XSD_BOOLEAN],1).invalidLexicalForm([u.TypeURL.XSD_BOOLEAN,u.TypeAlias.SPARQL_NON_LEXICAL],2)}dateTimeTest(H){return this.set([u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],B=>([M,V])=>{const $=H(B)(M.typedValue,V.typedValue);return v($)}).invalidLexicalForm([u.TypeAlias.SPARQL_NON_LEXICAL,u.TypeURL.XSD_DATE_TIME],1).invalidLexicalForm([u.TypeURL.XSD_DATE_TIME,u.TypeAlias.SPARQL_NON_LEXICAL],2)}numeric(H){return this.set([u.TypeAlias.SPARQL_NUMERIC,u.TypeAlias.SPARQL_NUMERIC],H).invalidLexicalForm([u.TypeAlias.SPARQL_NUMERIC,u.TypeAlias.SPARQL_NON_LEXICAL],2).invalidLexicalForm([u.TypeAlias.SPARQL_NON_LEXICAL,u.TypeAlias.SPARQL_NUMERIC],1)}invalidLexicalForm(H,B){return this.set(H,()=>M=>{throw new c.InvalidLexicalForm(M[B-1].toRDF())})}}e.Builder=g,g.legacyArithmeticPromotion={integer:{integer:W=>new d.IntegerLiteral(W),decimal:W=>new d.DecimalLiteral(W),float:W=>new d.FloatLiteral(W),double:W=>new d.DoubleLiteral(W)},decimal:{integer:W=>new d.DecimalLiteral(W),decimal:W=>new d.DecimalLiteral(W),float:W=>new d.FloatLiteral(W),double:W=>new d.DoubleLiteral(W)},float:{integer:W=>new d.FloatLiteral(W),decimal:W=>new d.FloatLiteral(W),float:W=>new d.FloatLiteral(W),double:W=>new d.DoubleLiteral(W)},double:{integer:W=>new d.DoubleLiteral(W),decimal:W=>new d.DoubleLiteral(W),float:W=>new d.DoubleLiteral(W),double:W=>new d.DoubleLiteral(W)}};function v(W){return new l.BooleanLiteral(W)}e.bool=v;function S(W,H){if(H&&!(0,p.isInternalSubType)(H,a.TypeURL.XSD_INTEGER))throw new Error("apple");return new l.IntegerLiteral(W,H)}e.integer=S;function x(W,H){if(H&&!(0,p.isInternalSubType)(H,a.TypeURL.XSD_DECIMAL))throw new Error("apple");return new l.DecimalLiteral(W,H)}e.decimal=x;function w(W,H){if(H&&!(0,p.isInternalSubType)(H,a.TypeURL.XSD_FLOAT))throw new Error("apple");return new l.FloatLiteral(W,H)}e.float=w;function E(W,H){if(H&&!(0,p.isInternalSubType)(H,a.TypeURL.XSD_DOUBLE))throw new Error("apple");return new l.DoubleLiteral(W,H)}e.double=E;function O(W){return new l.StringLiteral(W)}e.string=O;function I(W,H){return new l.LangStringLiteral(W,H)}e.langString=I;function z(W,H){return new l.DateTimeLiteral(W,H)}e.dateTime=z;function Q(W){return h.variable(W.name.slice(1))}e.expressionToVar=Q},"../node_modules/sparqlee/dist/lib/functions/LegacyTree.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LegacyTree=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class d{constructor(a){this.implementation=void 0,this.subTrees=Object.create(null),this.legacyImportance=a||0}search(a){const c=[];if(a.length===0)return this.implementation;for(c.push(...this.getSubTreeWithArg(a[0]).map(m=>({node:m,index:0+1})));c.length>0;){const{index:m,node:y}=c.pop();if(m===a.length)return y.implementation;c.push(...y.getSubTreeWithArg(a[m]).map(h=>({node:h,index:m+1})))}return this.implementation}addOverload(a,c){this._addOverload([...a],c,!1,0)}addLegacyOverload(a,c){this._addOverload([...a],c,!0,0)}_addOverload(a,c,p,m){const[y,...h]=a;if(!y){(p||this.legacyImportance<=m)&&(this.implementation=c);return}const T=(0,l.mainSparqlType)(y);for(const g of T.types)(p||!this.subTrees[g])&&(this.subTrees[g]=new d(T.prio)),this.subTrees[g]._addOverload(h,c,p,T.prio)}getSubTreeWithArg(a){const c=(0,o.isLiteralTermExpression)(a),p=[];return this.subTrees.term&&p.push(this.subTrees.term),this.subTrees[a.termType]&&p.push(this.subTrees[a.termType]),c&&this.subTrees[c.mainSparqlType]&&p.push(this.subTrees[c.mainSparqlType]),p}}e.LegacyTree=d},"../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.namedDefinitions=void 0;const o=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),d=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),u=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),a={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_STRING).onNumeric1(()=>g=>(0,u.string)((0,u.float)(g.typedValue).str())).onBoolean1Typed(()=>g=>(0,u.string)((0,u.bool)(g).str())).onTerm1(()=>g=>(0,u.string)(g.str())).collect()},c={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_FLOAT).onNumeric1(()=>g=>(0,u.float)(g.typedValue)).onBoolean1Typed(()=>g=>(0,u.float)(g?1:0)).onUnary(o.TypeURL.XSD_STRING,()=>g=>{const v=(0,d.parseXSDFloat)(g.str());if(v===void 0)throw new l.CastError(g,o.TypeURL.XSD_FLOAT);return(0,u.float)(v)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},p={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_DOUBLE).onNumeric1(()=>g=>(0,u.double)(g.typedValue)).onBoolean1Typed(()=>g=>(0,u.double)(g?1:0)).onUnary(o.TypeURL.XSD_STRING,()=>g=>{const v=(0,d.parseXSDFloat)(g.str());if(v===void 0)throw new l.CastError(g,o.TypeURL.XSD_DOUBLE);return(0,u.double)(v)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},m={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_DECIMAL).onNumeric1(()=>g=>{const v=(0,d.parseXSDDecimal)(g.str());if(v===void 0)throw new l.CastError(g,o.TypeURL.XSD_DECIMAL);return(0,u.decimal)(v)}).onString1(()=>g=>{const v=g.str(),S=/^([+-])?(\d+(\.\d+)?)$/u.test(v)?(0,d.parseXSDDecimal)(v):void 0;if(S===void 0)throw new l.CastError(g,o.TypeURL.XSD_DECIMAL);return(0,u.decimal)(S)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).onBoolean1Typed(()=>g=>(0,u.decimal)(g?1:0)).collect()},y={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>g=>(0,u.integer)(g?1:0)).onNumeric1(()=>g=>{const v=(0,d.parseXSDInteger)(g.str());if(v===void 0)throw new l.CastError(g,o.TypeURL.XSD_INTEGER);return(0,u.integer)(v)}).onString1(()=>g=>{const v=g.str(),S=/^\d+$/u.test(v)?(0,d.parseXSDInteger)(v):void 0;if(S===void 0)throw new l.CastError(g,o.TypeURL.XSD_INTEGER);return(0,u.integer)(S)}).copy({from:[o.TypeAlias.SPARQL_NUMERIC],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},h={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_DATE_TIME).onUnary(o.TypeURL.XSD_DATE_TIME,()=>g=>g).onUnary(o.TypeURL.XSD_STRING,()=>g=>{const v=new Date(g.str());if(Number.isNaN(v.getTime()))throw new l.CastError(g,o.TypeURL.XSD_DATE_TIME);return(0,u.dateTime)(v,g.str())}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},T={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_BOOLEAN).onNumeric1(()=>g=>(0,u.bool)(g.coerceEBV())).onUnary(o.TypeURL.XSD_BOOLEAN,()=>g=>(0,u.bool)(g.coerceEBV())).onUnary(o.TypeURL.XSD_STRING,()=>g=>{switch(g.str()){case"true":return(0,u.bool)(!0);case"false":return(0,u.bool)(!1);case"1":return(0,u.bool)(!0);case"0":return(0,u.bool)(!1);default:throw new l.CastError(g,o.TypeURL.XSD_BOOLEAN)}}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()};e.namedDefinitions={[o.TypeURL.XSD_STRING]:a,[o.TypeURL.XSD_FLOAT]:c,[o.TypeURL.XSD_DOUBLE]:p,[o.TypeURL.XSD_DECIMAL]:m,[o.TypeURL.XSD_INTEGER]:y,[o.TypeURL.XSD_DATE_TIME]:h,[o.TypeURL.XSD_DATE]:h,[o.TypeURL.XSD_BOOLEAN]:T}},"../node_modules/sparqlee/dist/lib/functions/OverloadTree.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),d=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),u=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js");class a{constructor(p,m){this.identifier=p,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=m||0,this.promotionCount=void 0}getSubtree(p){const m=(0,d.asGeneralType)(p);if(m)return this.generalOverloads[m];for(const[y,h]of this.literalOverLoads)if(p===y)return h}getImplementationExact(p){let m=this;for(const y of p)if(m=m.getSubtree(y),!m)return;return m.implementation}getOverloadCacheIdentifier(p){return this.identifier+p.map(m=>{const y=(0,o.isLiteralTermExpression)(m);return y?y.dataType:m.termType}).join("")}search(p,m,y){const h=this.getOverloadCacheIdentifier(p);if(y.has(h))return y.get(h);const T=[],g=0;if(p.length===0)return this.implementation;for(T.push(...this.getSubTreeWithArg(p[g],m).map(v=>({node:v,index:g+1})));T.length>0;){const{index:v,node:S}=T.pop();if(v===p.length&&S.implementation)return y.set(h,S.implementation),S.implementation;T.push(...S.getSubTreeWithArg(p[v],m).map(x=>({node:x,index:v+1})))}y.set(h,void 0)}addOverload(p,m){this._addOverload([...p],m,0)}_addOverload(p,m,y){const[h,...T]=p;if(!h){(this.promotionCount===void 0||y<=this.promotionCount)&&(this.promotionCount=y,this.implementation=m);return}let g=this.getSubtree(h);if(!g){const v=new a(this.identifier,this.depth+1),S=(0,d.asGeneralType)(h);S&&(this.generalOverloads[S]=v);const x=(0,d.asOverrideType)(h);x&&this.literalOverLoads.push([x,v]),g=v}g._addOverload(T,m,y),h===l.TypeURL.XSD_STRING&&this.addPromotedOverload(l.TypeURL.XSD_ANY_URI,m,v=>(0,u.string)(v.str()),T,y),h===l.TypeURL.XSD_DOUBLE&&(this.addPromotedOverload(l.TypeURL.XSD_FLOAT,m,v=>(0,u.double)(v.typedValue),T,y),this.addPromotedOverload(l.TypeURL.XSD_DECIMAL,m,v=>(0,u.double)(v.typedValue),T,y)),h===l.TypeURL.XSD_FLOAT&&this.addPromotedOverload(l.TypeURL.XSD_DECIMAL,m,v=>(0,u.float)(v.typedValue),T,y)}addPromotedOverload(p,m,y,h,T){let g=this.getSubtree(p);if(!g){const v=new a(this.identifier,this.depth+1);this.literalOverLoads.push([p,v]),g=v}g._addOverload(h,v=>S=>m(v)([...S.slice(0,this.depth),y(S[this.depth]),...S.slice(this.depth+1,S.length)]),T+1)}getSubTreeWithArg(p,m){const y=[],h=(0,o.isLiteralTermExpression)(p);if(this.generalOverloads.term&&y.push(this.generalOverloads.term),this.generalOverloads[p.termType]&&y.push(this.generalOverloads[p.termType]),h){const T=(0,d.asKnownLiteralType)(h.dataType);let g;T?g=d.superTypeDictTable[T]:g=(0,d.getSuperTypes)(h.dataType,m);const v=this.literalOverLoads.filter(([S,x])=>S in g).map(([S,x])=>[g[S],x]);v.sort(([S,x],[w,E])=>S-w),y.push(...v.map(([S,x])=>x))}return y}}e.OverloadTree=a},"../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.definitions=void 0;const o=t("../node_modules/bignumber.js/bignumber.js"),l=t("../node_modules/hash.js/lib/hash.js"),d=t("../node_modules/rdf-data-factory/index.js"),u=t("../node_modules/relative-to-absolute-iri/index.js"),a=t("../node_modules/spark-md5/spark-md5.js"),c=t("../packages/uuid/dist/index.js"),p=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),m=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),y=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),h=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),T=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),g=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),v=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),S=t("../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js"),x=new d.DataFactory,w={arity:1,overloads:(0,v.declare)(y.RegularOperator.NOT).onTerm1(()=>q=>(0,v.bool)(!q.coerceEBV())).collect()},E={arity:1,overloads:(0,v.declare)(y.RegularOperator.UPLUS).numericConverter(()=>q=>q).collect()},O={arity:1,overloads:(0,v.declare)(y.RegularOperator.UMINUS).numericConverter(()=>q=>-q).collect()},I={arity:2,overloads:(0,v.declare)(y.RegularOperator.MULTIPLICATION).arithmetic(()=>(q,ae)=>new o.BigNumber(q).times(ae).toNumber()).collect()},z={arity:2,overloads:(0,v.declare)(y.RegularOperator.DIVISION).arithmetic(()=>(q,ae)=>new o.BigNumber(q).div(ae).toNumber()).onBinaryTyped([h.TypeURL.XSD_INTEGER,h.TypeURL.XSD_INTEGER],()=>(q,ae)=>{if(ae===0)throw new T.ExpressionError("Integer division by 0");return(0,v.decimal)(new o.BigNumber(q).div(ae).toNumber())}).collect()},Q={arity:2,overloads:(0,v.declare)(y.RegularOperator.ADDITION).arithmetic(()=>(q,ae)=>new o.BigNumber(q).plus(ae).toNumber()).collect()},W={arity:2,overloads:(0,v.declare)(y.RegularOperator.SUBTRACTION).arithmetic(()=>(q,ae)=>new o.BigNumber(q).minus(ae).toNumber()).collect()},H={arity:2,overloads:(0,v.declare)(y.RegularOperator.EQUAL).numberTest(()=>(q,ae)=>q===ae).stringTest(()=>(q,ae)=>q.localeCompare(ae)===0).booleanTest(()=>(q,ae)=>q===ae).dateTimeTest(()=>(q,ae)=>q.getTime()===ae.getTime()).set(["term","term"],()=>([q,ae])=>(0,v.bool)(B(q,ae))).collect()};function B(q,ae){const Be=q.toRDF(),Me=ae.toRDF(),Ve=Be.equals(Me);if(Be.termType==="Literal"&&Me.termType==="Literal")throw new T.RDFEqualTypeError([q,ae]);return Ve}const M={arity:2,overloads:(0,v.declare)(y.RegularOperator.NOT_EQUAL).numberTest(()=>(q,ae)=>q!==ae).stringTest(()=>(q,ae)=>q.localeCompare(ae)!==0).booleanTest(()=>(q,ae)=>q!==ae).dateTimeTest(()=>(q,ae)=>q.getTime()!==ae.getTime()).set(["term","term"],()=>([q,ae])=>(0,v.bool)(!B(q,ae))).collect()},V={arity:2,overloads:(0,v.declare)(y.RegularOperator.LT).numberTest(()=>(q,ae)=>q<ae).stringTest(()=>(q,ae)=>q.localeCompare(ae)===-1).booleanTest(()=>(q,ae)=>q<ae).dateTimeTest(()=>(q,ae)=>q.getTime()<ae.getTime()).collect()},$={arity:2,overloads:(0,v.declare)(y.RegularOperator.GT).numberTest(()=>(q,ae)=>q>ae).stringTest(()=>(q,ae)=>q.localeCompare(ae)===1).booleanTest(()=>(q,ae)=>q>ae).dateTimeTest(()=>(q,ae)=>q.getTime()>ae.getTime()).collect()},te={arity:2,overloads:(0,v.declare)(y.RegularOperator.LTE).numberTest(()=>(q,ae)=>q<=ae).stringTest(()=>(q,ae)=>q.localeCompare(ae)!==1).booleanTest(()=>(q,ae)=>q<=ae).dateTimeTest(()=>(q,ae)=>q.getTime()<=ae.getTime()).collect()},J={arity:2,overloads:(0,v.declare)(y.RegularOperator.GTE).numberTest(()=>(q,ae)=>q>=ae).stringTest(()=>(q,ae)=>q.localeCompare(ae)!==-1).booleanTest(()=>(q,ae)=>q>=ae).dateTimeTest(()=>(q,ae)=>q.getTime()>=ae.getTime()).collect()},Z={arity:1,overloads:(0,v.declare)(y.RegularOperator.IS_IRI).onTerm1(()=>q=>(0,v.bool)(q.termType==="namedNode")).collect()},Y={arity:1,overloads:(0,v.declare)(y.RegularOperator.IS_BLANK).onTerm1(()=>q=>(0,v.bool)(q.termType==="blankNode")).collect()},oe={arity:1,overloads:(0,v.declare)(y.RegularOperator.IS_LITERAL).onTerm1(()=>q=>(0,v.bool)(q.termType==="literal")).collect()},ie={arity:1,overloads:(0,v.declare)(y.RegularOperator.IS_NUMERIC).onNumeric1(()=>q=>(0,v.bool)(!0)).onTerm1(()=>q=>(0,v.bool)(!1)).collect()},ne={arity:1,overloads:(0,v.declare)(y.RegularOperator.STR).onTerm1(()=>q=>(0,v.string)(q.str())).collect()},re={arity:1,overloads:(0,v.declare)(y.RegularOperator.LANG).onLiteral1(()=>q=>(0,v.string)(q.language||"")).collect()},he={arity:1,overloads:(0,v.declare)(y.RegularOperator.DATATYPE).onLiteral1(()=>q=>new p.NamedNode(q.dataType)).collect()},we={arity:1,overloads:(0,v.declare)(y.RegularOperator.IRI).set(["namedNode"],q=>ae=>{const Be=ae[0],Me=(0,u.resolve)(Be.str(),q.baseIRI||"");return new p.NamedNode(Me)}).onString1(q=>ae=>{const Be=(0,u.resolve)(ae.str(),q.baseIRI||"");return new p.NamedNode(Be)}).collect()},Te={arity:2,overloads:(0,v.declare)(y.RegularOperator.STRDT).set([h.TypeURL.XSD_STRING,"namedNode"],({superTypeProvider:q,enableExtendedXsdTypes:ae})=>([Be,Me])=>{const Ve=x.literal(Be.typedValue,x.namedNode(Me.value));return new m.TermTransformer(q,ae).transformLiteral(Ve)}).collect()},Ee={arity:2,overloads:(0,v.declare)(y.RegularOperator.STRLANG).onBinaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>(q,ae)=>new p.LangStringLiteral(q,ae.toLowerCase())).collect()},_e={arity:0,overloads:(0,v.declare)(y.RegularOperator.UUID).set([],()=>()=>new p.NamedNode(`urn:uuid:${c.v4()}`)).collect()},ce={arity:0,overloads:(0,v.declare)(y.RegularOperator.STRUUID).set([],()=>()=>(0,v.string)(c.v4())).collect()},je={arity:1,overloads:(0,v.declare)(y.RegularOperator.STRLEN).onStringly1(()=>q=>(0,v.integer)([...q.typedValue].length)).collect()},Ie={arity:[2,3],overloads:(0,v.declare)(y.RegularOperator.SUBSTR).onBinaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_INTEGER],()=>(q,ae)=>(0,v.string)([...q].slice(ae-1).join(""))).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.XSD_INTEGER],()=>(q,ae)=>{const Be=[...q.typedValue].slice(ae.typedValue-1).join("");return(0,v.langString)(Be,q.language)}).onTernaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_INTEGER,h.TypeURL.XSD_INTEGER],()=>(q,ae,Be)=>(0,v.string)([...q].slice(ae-1,Be+ae-1).join(""))).onTernary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.XSD_INTEGER,h.TypeURL.XSD_INTEGER],()=>(q,ae,Be)=>{const Me=[...q.typedValue].slice(ae.typedValue-1,Be.typedValue+ae.typedValue-1).join("");return(0,v.langString)(Me,q.language)}).collect()},Re={arity:1,overloads:(0,v.declare)(y.RegularOperator.UCASE).onString1Typed(()=>q=>(0,v.string)(q.toUpperCase())).onLangString1(()=>q=>(0,v.langString)(q.typedValue.toUpperCase(),q.language)).collect()},Oe={arity:1,overloads:(0,v.declare)(y.RegularOperator.LCASE).onString1Typed(()=>q=>(0,v.string)(q.toLowerCase())).onLangString1(()=>q=>(0,v.langString)(q.typedValue.toLowerCase(),q.language)).collect()},Se={arity:2,overloads:(0,v.declare)(y.RegularOperator.STRSTARTS).onBinaryTyped([h.TypeAlias.SPARQL_STRINGLY,h.TypeURL.XSD_STRING],()=>(q,ae)=>(0,v.bool)(q.startsWith(ae))).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.RDF_LANG_STRING],()=>(q,ae)=>{if(q.language!==ae.language)throw new T.IncompatibleLanguageOperation(q,ae);return(0,v.bool)(q.typedValue.startsWith(ae.typedValue))}).collect()},D={arity:2,overloads:(0,v.declare)(y.RegularOperator.STRENDS).onBinaryTyped([h.TypeAlias.SPARQL_STRINGLY,h.TypeURL.XSD_STRING],()=>(q,ae)=>(0,v.bool)(q.endsWith(ae))).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.RDF_LANG_STRING],()=>(q,ae)=>{if(q.language!==ae.language)throw new T.IncompatibleLanguageOperation(q,ae);return(0,v.bool)(q.typedValue.endsWith(ae.typedValue))}).collect()},k={arity:2,overloads:(0,v.declare)(y.RegularOperator.CONTAINS).onBinaryTyped([h.TypeAlias.SPARQL_STRINGLY,h.TypeURL.XSD_STRING],()=>(q,ae)=>(0,v.bool)(q.includes(ae))).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.RDF_LANG_STRING],()=>(q,ae)=>{if(q.language!==ae.language)throw new T.IncompatibleLanguageOperation(q,ae);return(0,v.bool)(q.typedValue.includes(ae.typedValue))}).collect()},G={arity:2,overloads:(0,v.declare)(y.RegularOperator.STRBEFORE).onBinaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>(q,ae)=>(0,v.string)(q.slice(0,Math.max(0,q.indexOf(ae))))).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.XSD_STRING],()=>(q,ae)=>{const[Be,Me]=[q.typedValue,ae.typedValue],Ve=q.typedValue.slice(0,Math.max(0,Be.indexOf(Me)));return Ve||!Me?(0,v.langString)(Ve,q.language):(0,v.string)(Ve)}).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.RDF_LANG_STRING],()=>(q,ae)=>{if(q.language!==ae.language)throw new T.IncompatibleLanguageOperation(q,ae);const[Be,Me]=[q.typedValue,ae.typedValue],Ve=q.typedValue.slice(0,Math.max(0,Be.indexOf(Me)));return Ve||!Me?(0,v.langString)(Ve,q.language):(0,v.string)(Ve)}).collect()},j={arity:2,overloads:(0,v.declare)(y.RegularOperator.STRAFTER).onBinaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>(q,ae)=>(0,v.string)(q.slice(q.indexOf(ae)).slice(ae.length))).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.XSD_STRING],()=>(q,ae)=>{const[Be,Me]=[q.typedValue,ae.typedValue],Ve=Be.slice(Be.indexOf(Me)).slice(Me.length);return Ve||!Me?(0,v.langString)(Ve,q.language):(0,v.string)(Ve)}).onBinary([h.TypeURL.RDF_LANG_STRING,h.TypeURL.RDF_LANG_STRING],()=>(q,ae)=>{if(q.language!==ae.language)throw new T.IncompatibleLanguageOperation(q,ae);const[Be,Me]=[q.typedValue,ae.typedValue],Ve=Be.slice(Be.indexOf(Me)).slice(Me.length);return Ve||!Me?(0,v.langString)(Ve,q.language):(0,v.string)(Ve)}).collect()},b={arity:1,overloads:(0,v.declare)(y.RegularOperator.ENCODE_FOR_URI).onStringly1Typed(()=>q=>(0,v.string)(encodeURI(q))).collect()},_={arity:2,overloads:(0,v.declare)(y.RegularOperator.LANG_MATCHES).onBinaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>(q,ae)=>(0,v.bool)(S.langMatches(q,ae))).collect()},N=()=>(q,ae)=>(0,v.bool)(S.matches(q,ae)),L=()=>(q,ae,Be)=>(0,v.bool)(S.matches(q,ae,Be)),F={arity:[2,3],overloads:(0,v.declare)(y.RegularOperator.REGEX).onBinaryTyped([h.TypeAlias.SPARQL_STRINGLY,h.TypeURL.XSD_STRING],N).onTernaryTyped([h.TypeAlias.SPARQL_STRINGLY,h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],L).collect()},U={arity:[3,4],overloads:(0,v.declare)(y.RegularOperator.REPLACE).onTernaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>(q,ae,Be)=>(0,v.string)(S.replace(q,ae,Be))).set([h.TypeURL.RDF_LANG_STRING,h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>([q,ae,Be])=>{const Me=S.replace(q.typedValue,ae.typedValue,Be.typedValue);return(0,v.langString)(Me,q.language)}).onQuaternaryTyped([h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>(q,ae,Be,Me)=>(0,v.string)(S.replace(q,ae,Be,Me))).set([h.TypeURL.RDF_LANG_STRING,h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING,h.TypeURL.XSD_STRING],()=>([q,ae,Be,Me])=>{const Ve=S.replace(q.typedValue,ae.typedValue,Be.typedValue,Me.typedValue);return(0,v.langString)(Ve,q.language)}).collect()},X={arity:1,overloads:(0,v.declare)(y.RegularOperator.ABS).numericConverter(()=>q=>Math.abs(q)).collect()},ee={arity:1,overloads:(0,v.declare)(y.RegularOperator.ROUND).numericConverter(()=>q=>Math.round(q)).collect()},ue={arity:1,overloads:(0,v.declare)(y.RegularOperator.CEIL).numericConverter(()=>q=>Math.ceil(q)).collect()},de={arity:1,overloads:(0,v.declare)(y.RegularOperator.FLOOR).numericConverter(()=>q=>Math.floor(q)).collect()},fe={arity:0,overloads:(0,v.declare)(y.RegularOperator.RAND).set([],()=>()=>(0,v.double)(Math.random())).collect()};function me(q){return g.parseXSDDateTime(q.str())}const ve={arity:0,overloads:(0,v.declare)(y.RegularOperator.NOW).set([],q=>()=>new p.DateTimeLiteral(q.now,q.now.toISOString())).collect()},be={arity:1,overloads:(0,v.declare)(y.RegularOperator.YEAR).onDateTime1(()=>q=>(0,v.integer)(Number(me(q).year))).collect()},ge={arity:1,overloads:(0,v.declare)(y.RegularOperator.MONTH).onDateTime1(()=>q=>(0,v.integer)(Number(me(q).month))).collect()},Ae={arity:1,overloads:(0,v.declare)(y.RegularOperator.DAY).onDateTime1(()=>q=>(0,v.integer)(Number(me(q).day))).collect()},Ce={arity:1,overloads:(0,v.declare)(y.RegularOperator.HOURS).onDateTime1(()=>q=>(0,v.integer)(Number(me(q).hours))).collect()},Fe={arity:1,overloads:(0,v.declare)(y.RegularOperator.MINUTES).onDateTime1(()=>q=>(0,v.integer)(Number(me(q).minutes))).collect()},ct={arity:1,overloads:(0,v.declare)(y.RegularOperator.SECONDS).onDateTime1(()=>q=>(0,v.decimal)(Number(me(q).seconds))).collect()},et={arity:1,overloads:(0,v.declare)(y.RegularOperator.TIMEZONE).onDateTime1(()=>q=>{const ae=S.formatDayTimeDuration(me(q).timezone);if(!ae)throw new T.InvalidTimezoneCall(q.strValue);return new p.Literal(ae,h.TypeURL.XSD_DAYTIME_DURATION,ae)}).collect()},dt={arity:1,overloads:(0,v.declare)(y.RegularOperator.TZ).onDateTime1(()=>q=>(0,v.string)(me(q).timezone)).collect()},ze={arity:1,overloads:(0,v.declare)(y.RegularOperator.MD5).onString1Typed(()=>q=>(0,v.string)((0,a.hash)(q))).collect()},ke={arity:1,overloads:(0,v.declare)(y.RegularOperator.SHA1).onString1Typed(()=>q=>(0,v.string)((0,l.sha1)().update(q).digest("hex"))).collect()},Qe={arity:1,overloads:(0,v.declare)(y.RegularOperator.SHA256).onString1Typed(()=>q=>(0,v.string)((0,l.sha256)().update(q).digest("hex"))).collect()},sr={arity:1,overloads:(0,v.declare)(y.RegularOperator.SHA384).onString1Typed(()=>q=>(0,v.string)((0,l.sha384)().update(q).digest("hex"))).collect()},ot={arity:1,overloads:(0,v.declare)(y.RegularOperator.SHA512).onString1Typed(()=>q=>(0,v.string)((0,l.sha512)().update(q).digest("hex"))).collect()};e.definitions={"!":w,UPLUS:E,UMINUS:O,"*":I,"/":z,"+":Q,"-":W,"=":H,"!=":M,"<":V,">":$,"<=":te,">=":J,isiri:Z,isblank:Y,isliteral:oe,isnumeric:ie,str:ne,lang:re,datatype:he,iri:we,uri:we,strdt:Te,strlang:Ee,uuid:_e,struuid:ce,strlen:je,substr:Ie,ucase:Re,lcase:Oe,strstarts:Se,strends:D,contains:k,strbefore:G,strafter:j,encode_for_uri:b,langmatches:_,regex:F,replace:U,abs:X,round:ee,ceil:ue,floor:de,rand:fe,now:ve,year:be,month:ge,day:Ae,hours:Ce,minutes:Fe,seconds:ct,timezone:et,tz:dt,md5:ze,sha1:ke,sha256:Qe,sha384:sr,sha512:ot}},"../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.specialDefinitions=void 0;const o=t("../packages/uuid/dist/index.js"),l=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),a=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),c=t("../node_modules/sparqlee/dist/lib/functions/index.js"),p={arity:1,async applyAsync({args:B,mapping:M}){return m({args:B,mapping:M})},applySync({args:B,mapping:M}){return m({args:B,mapping:M})}};function m({args:B,mapping:M}){const V=B[0];if(V.expressionType!==l.ExpressionType.Variable)throw new u.InvalidArgumentTypes(B,d.SpecialOperator.BOUND);const $=M.has((0,a.expressionToVar)(V));return(0,a.bool)($)}const y={arity:3,async applyAsync({args:B,mapping:M,evaluate:V}){const te=(await V(B[0],M)).coerceEBV();return V(te?B[1]:B[2],M)},applySync({args:B,mapping:M,evaluate:V}){const te=V(B[0],M).coerceEBV();return V(te?B[1]:B[2],M)}},h={arity:Number.POSITIVE_INFINITY,async applyAsync({args:B,mapping:M,evaluate:V}){const $=[];for(const te of B)try{return await V(te,M)}catch(J){$.push(J)}throw new u.CoalesceError($)},applySync({args:B,mapping:M,evaluate:V}){const $=[];for(const te of B)try{return V(te,M)}catch(J){$.push(J)}throw new u.CoalesceError($)}},T={arity:2,async applyAsync({args:B,mapping:M,evaluate:V}){const[$,te]=B;try{if((await V($,M)).coerceEBV())return(0,a.bool)(!0);const oe=(await V(te,M)).coerceEBV();return(0,a.bool)(oe)}catch(J){if(!(await V(te,M)).coerceEBV())throw J;return(0,a.bool)(!0)}},applySync({args:B,mapping:M,evaluate:V}){const[$,te]=B;try{if(V($,M).coerceEBV())return(0,a.bool)(!0);const oe=V(te,M).coerceEBV();return(0,a.bool)(oe)}catch(J){if(!V(te,M).coerceEBV())throw J;return(0,a.bool)(!0)}}},g={arity:2,async applyAsync({args:B,mapping:M,evaluate:V}){const[$,te]=B;try{if(!(await V($,M)).coerceEBV())return(0,a.bool)(!1);const oe=(await V(te,M)).coerceEBV();return(0,a.bool)(oe)}catch(J){if((await V(te,M)).coerceEBV())throw J;return(0,a.bool)(!1)}},applySync({args:B,mapping:M,evaluate:V}){const[$,te]=B;try{if(!V($,M).coerceEBV())return(0,a.bool)(!1);const oe=V(te,M).coerceEBV();return(0,a.bool)(oe)}catch(J){if(V(te,M).coerceEBV())throw J;return(0,a.bool)(!1)}}},v={arity:2,async applyAsync({args:B,mapping:M,evaluate:V}){const[$,te]=B.map(Y=>V(Y,M)),[J,Z]=await Promise.all([$,te]);return(0,a.bool)(J.toRDF().equals(Z.toRDF()))},applySync({args:B,mapping:M,evaluate:V}){const[$,te]=B.map(J=>V(J,M));return(0,a.bool)($.toRDF().equals(te.toRDF()))}},S={arity:Number.POSITIVE_INFINITY,checkArity(B){return B.length>0},async applyAsync(B){const{args:M,mapping:V,evaluate:$}=B,[te,...J]=M,Z=await $(te,V);return x(Z,Object.assign(Object.assign({},B),{args:J}),[])},applySync(B){const{args:M,mapping:V,evaluate:$}=B,[te,...J]=M,Z=$(te,V);return w(Z,Object.assign(Object.assign({},B),{args:J}),[])}};async function x(B,M,V){const{args:$,mapping:te,evaluate:J,overloadCache:Z}=M;if($.length===0)return V.every(oe=>!oe)?(0,a.bool)(!1):Promise.reject(new u.InError(V));try{const Y=$.shift(),oe=await J(Y,te);return c.regularFunctions[d.RegularOperator.EQUAL].apply([B,oe],M).typedValue?(0,a.bool)(!0):x(B,M,[...V,!1])}catch(Y){return x(B,M,[...V,Y])}}function w(B,M,V){const{args:$,mapping:te,evaluate:J,overloadCache:Z}=M;if($.length===0){if(V.every(oe=>!oe))return(0,a.bool)(!1);throw new u.InError(V)}try{const Y=$.shift(),oe=J(Y,te);return c.regularFunctions[d.RegularOperator.EQUAL].apply([B,oe],M).typedValue?(0,a.bool)(!0):w(B,M,[...V,!1])}catch(Y){return w(B,M,[...V,Y])}}const E={arity:Number.POSITIVE_INFINITY,checkArity(B){return B.length>0},async applyAsync(B){const V=await c.specialFunctions[d.SpecialOperator.IN].applyAsync(B);return(0,a.bool)(!V.typedValue)},applySync(B){const V=c.specialFunctions[d.SpecialOperator.IN].applySync(B);return(0,a.bool)(!V.typedValue)}},O=(0,a.declare)(d.SpecialOperator.CONCAT).onStringly1(()=>B=>B).collect().experimentalTree,I={arity:Number.POSITIVE_INFINITY,async applyAsync(B){const{args:M,mapping:V,evaluate:$,overloadCache:te,superTypeProvider:J}=B,Z=M.map(async re=>$(re,V)).map(async re=>{const he=O.search([await re],J,te);if(!he)throw new u.InvalidArgumentTypes(M,d.SpecialOperator.CONCAT);return he(B)([await re])}),Y=await Promise.all(Z),ie=Y.map(re=>re.typedValue).join(""),ne=z(Y)?Y[0].language:void 0;return ne?(0,a.langString)(ie,ne):(0,a.string)(ie)},applySync(B){const{args:M,mapping:V,evaluate:$,superTypeProvider:te,overloadCache:J}=B,Z=M.map(ne=>$(ne,V)).map(ne=>{const re=O.search([ne],te,J);if(!re)throw new u.InvalidArgumentTypes(M,d.SpecialOperator.CONCAT);return re(B)([ne])}),oe=Z.map(ne=>ne.typedValue).join(""),ie=z(Z)?Z[0].language:void 0;return ie?(0,a.langString)(oe,ie):(0,a.string)(oe)}};function z(B){return B.length>0&&B.every(M=>M.language===B[0].language)}const Q=(0,a.declare)(d.SpecialOperator.BNODE).onString1(()=>B=>B).collect().experimentalTree,W={arity:Number.POSITIVE_INFINITY,checkArity(B){return B.length===0||B.length===1},async applyAsync(B){const{args:M,mapping:V,evaluate:$,superTypeProvider:te,overloadCache:J}=B,Z=M.length===1?await $(M[0],V):void 0;let Y;if(Z){const oe=Q.search([Z],te,J);if(!oe)throw new u.InvalidArgumentTypes(M,d.SpecialOperator.BNODE);Y=oe(B)([Z]).str()}if(B.bnode){const oe=await B.bnode(Y);return new l.BlankNode(oe)}return H(Y)},applySync(B){const{args:M,mapping:V,evaluate:$,superTypeProvider:te,overloadCache:J}=B,Z=M.length===1?$(M[0],V):void 0;let Y;if(Z){const oe=Q.search([Z],te,J);if(!oe)throw new u.InvalidArgumentTypes(M,d.SpecialOperator.BNODE);Y=oe(B)([Z]).str()}if(B.bnode){const oe=B.bnode(Y);return new l.BlankNode(oe)}return H(Y)}};function H(B){return new l.BlankNode(B||o.v4())}e.specialDefinitions={bound:p,if:y,coalesce:h,"&&":g,"||":T,sameterm:v,in:S,notin:E,concat:I,BNODE:W}},"../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatDayTimeDuration=e.langMatches=e.replace=e.matches=void 0;function t(c,p,m){return new RegExp(p,m).test(c)}e.matches=t;function o(c,p,m,y){let h=new RegExp(p,y);if(!h.global){const T=y||"";h=new RegExp(p,`${T}g`)}return c.replace(h,m)}e.replace=o;function l(c,p){const m=c.split("-"),y=p.split("-");if(!u(y[0],m[0])&&!d(m[0]))return!1;let h=1,T=1;for(;T<y.length;){if(d(y[T])){T++;continue}if(h===m.length)return!1;if(u(y[T],m[h])){h++,T++;continue}if(m[h].length===1)return!1;h++}return!0}e.langMatches=l;function d(c){return c==="*"}function u(c,p){return new RegExp(`/${c}/`,"iu").test(`/${p}/`)}function a(c){if(!c)return;if(c.startsWith("Z"))return"PT0S";const[p,m,y,h,T,g]=c,v=m!=="0"?m:"",S=v||y!=="0"?y:"",x=v+S?`${v+S}H`:"",w=T!=="0"?T:"",E=w||g!=="0"?g:"",O=w+E?`${w+E}M`:"",I=`${x}${O}`;return`${p==="-"?"-":""}PT${I}`}e.formatDayTimeDuration=a},"../node_modules/sparqlee/dist/lib/functions/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(m,y,h,T){T===void 0&&(T=h);var g=Object.getOwnPropertyDescriptor(y,h);(!g||("get"in g?!y.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return y[h]}}),Object.defineProperty(m,T,g)}:function(m,y,h,T){T===void 0&&(T=h),m[T]=y[h]}),l=this&&this.__exportStar||function(m,y){for(var h in m)h!=="default"&&!Object.prototype.hasOwnProperty.call(y,h)&&o(y,m,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=e.namedFunctions=e.specialFunctions=e.regularFunctions=void 0;const d=t("../node_modules/sparqlee/dist/lib/functions/Core.js"),u=t("../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js"),a=t("../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js"),c=t("../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js");l(t("../node_modules/sparqlee/dist/lib/functions/Core.js"),e),e.regularFunctions=Object.fromEntries(Object.entries(a.definitions).map(([m,y])=>[m,new d.RegularFunction(m,y)])),e.specialFunctions=Object.fromEntries(Object.entries(c.specialDefinitions).map(([m,y])=>[m,new d.SpecialFunction(m,y)])),e.namedFunctions=Object.fromEntries(Object.entries(u.namedDefinitions).map(([m,y])=>[m,new d.NamedFunction(m,y)]));var p=t("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js");Object.defineProperty(e,"OverloadTree",{enumerable:!0,get:function(){return p.OverloadTree}})},"../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AlgebraTransformer=void 0;const o=t("sparqlalgebrajs"),l=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=t("../node_modules/sparqlee/dist/lib/functions/index.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),c=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),p=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js");class m extends p.TermTransformer{constructor(h){super(h.superTypeProvider,h.enableExtendedXsdTypes),this.algebraConfig=h,this.creatorConfig={type:h.type,creator:h.creator}}transformAlgebra(h){if(!h)throw new a.InvalidExpression(h);const T=o.Algebra.expressionTypes;switch(h.expressionType){case T.TERM:return this.transformTerm(h);case T.OPERATOR:return this.transformOperator(h);case T.NAMED:return this.transformNamed(h);case T.EXISTENCE:return m.transformExistence(h);case T.AGGREGATE:return m.transformAggregate(h);case T.WILDCARD:return m.transformWildcard(h);default:throw new a.InvalidExpressionType(h)}}static transformWildcard(h){if(!h.wildcard)throw new a.InvalidExpression(h);return new l.NamedNode(h.wildcard.value)}transformOperator(h){if(u.SpecialOperators.has(h.operator)){const S=h.operator,x=h.args.map(E=>this.transformAlgebra(E)),w=d.specialFunctions[S];if(!w.checkArity(x))throw new a.InvalidArity(x,S);return new l.SpecialOperator(x,w.applyAsync,w.applySync)}if(!u.Operators.has(h.operator))throw new a.UnknownOperator(h.operator);const T=h.operator,g=h.args.map(S=>this.transformAlgebra(S)),v=d.regularFunctions[T];if(!m.hasCorrectArity(g,v.arity))throw new a.InvalidArity(g,T);return new l.Operator(g,S=>v.apply(S,this.algebraConfig))}wrapSyncFunction(h,T){return g=>{try{const v=h(g.map(S=>S.toRDF()));return this.transformRDFTermUnsafe(v)}catch(v){throw new c.ExtensionFunctionError(T,v)}}}wrapAsyncFunction(h,T){return async g=>{try{const v=await h(g.map(S=>S.toRDF()));return this.transformRDFTermUnsafe(v)}catch(v){throw new c.ExtensionFunctionError(T,v)}}}transformNamed(h){const T=h.name.value,g=h.args.map(v=>this.transformAlgebra(v));if(u.NamedOperators.has(T)){const v=h.name.value,S=d.namedFunctions[v];return new l.Named(h.name,g,x=>S.apply(x,this.algebraConfig))}if(this.creatorConfig.type==="sync"){const v=this.creatorConfig.creator(h.name);if(v){const S=this.wrapSyncFunction(v,h.name.value);return new l.SyncExtension(h.name,g,S)}}else{const v=this.creatorConfig.creator(h.name);if(v){const S=this.wrapAsyncFunction(v,h.name.value);return new l.AsyncExtension(h.name,g,S)}}throw new a.UnknownNamedOperator(h.name.value)}static hasCorrectArity(h,T){return T===Number.POSITIVE_INFINITY?!0:Array.isArray(T)?T.includes(h.length):h.length===T}static transformAggregate(h){const T=h.aggregator;return new l.Aggregate(T,h)}static transformExistence(h){return new l.Existence(h)}}e.AlgebraTransformer=m},"../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TermTransformer=void 0;const o=t("../node_modules/rdf-string/index.js"),l=t("sparqlalgebrajs"),d=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),c=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),p=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class m{constructor(h,T){this.superTypeProvider=h,this.enableExtendedXSDTypes=T}transformRDFTermUnsafe(h){return this.transformTerm({term:h,type:l.Algebra.types.EXPRESSION,expressionType:l.Algebra.expressionTypes.TERM})}transformTerm(h){if(!h.term)throw new a.InvalidExpression(h);switch(h.term.termType){case"Variable":return new d.Variable(o.termToString(h.term));case"Literal":return this.transformLiteral(h.term);case"NamedNode":return new d.NamedNode(h.term.value);case"BlankNode":return new d.BlankNode(h.term.value);default:throw new a.InvalidTermType(h)}}legacyTransformLiteral(h){if(!h.datatype)return h.language?new d.LangStringLiteral(h.value,h.language):new d.StringLiteral(h.value);const T=h.datatype.value;switch(T){case null:case void 0:case"":return h.language?new d.LangStringLiteral(h.value,h.language):new d.StringLiteral(h.value);case u.TypeURL.XSD_ANY_URI:case u.TypeURL.XSD_NORMALIZED_STRING:case u.TypeURL.XSD_TOKEN:case u.TypeURL.XSD_LANGUAGE:case u.TypeURL.XSD_NM_TOKEN:case u.TypeURL.XSD_NAME:case u.TypeURL.XSD_ENTITY:case u.TypeURL.XSD_ID:case u.TypeURL.XSD_ID_REF:case u.TypeURL.XSD_STRING:return new d.StringLiteral(h.value,T);case u.TypeURL.RDF_LANG_STRING:return new d.LangStringLiteral(h.value,h.language);case u.TypeURL.XSD_DATE_TIME_STAMP:case u.TypeURL.XSD_DATE_TIME:{const g=new Date(h.value);return Number.isNaN(g.getTime())?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.DateTimeLiteral(new Date(h.value),h.value,T)}case u.TypeURL.XSD_BOOLEAN:return h.value!=="true"&&h.value!=="false"&&h.value!=="1"&&h.value!=="0"?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.BooleanLiteral(h.value==="true"||h.value==="1",h.value,T);case u.TypeURL.XSD_DECIMAL:{const g=c.parseXSDDecimal(h.value);return g===void 0?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.DecimalLiteral(g,T,h.value)}case u.TypeURL.XSD_FLOAT:{const g=c.parseXSDFloat(h.value);return g===void 0?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.FloatLiteral(g,T,h.value)}case u.TypeURL.XSD_DOUBLE:{const g=c.parseXSDFloat(h.value);return g===void 0?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.DoubleLiteral(g,T,h.value)}case u.TypeURL.XSD_NON_POSITIVE_INTEGER:case u.TypeURL.XSD_NEGATIVE_INTEGER:case u.TypeURL.XSD_LONG:case u.TypeURL.XSD_INT:case u.TypeURL.XSD_SHORT:case u.TypeURL.XSD_BYTE:case u.TypeURL.XSD_NON_NEGATIVE_INTEGER:case u.TypeURL.XSD_POSITIVE_INTEGER:case u.TypeURL.XSD_UNSIGNED_LONG:case u.TypeURL.XSD_UNSIGNED_INT:case u.TypeURL.XSD_UNSIGNED_SHORT:case u.TypeURL.XSD_UNSIGNED_BYTE:case u.TypeURL.XSD_INTEGER:{const g=c.parseXSDDecimal(h.value);return g===void 0?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.IntegerLiteral(g,T,h.value)}default:return new d.Literal(h.value,T,h.value)}}transformLiteral(h){return this.enableExtendedXSDTypes?this.experimentalTransformLiteral(h):this.legacyTransformLiteral(h)}experimentalTransformLiteral(h){if(!h.datatype||[null,void 0,""].includes(h.datatype.value))return h.language?new d.LangStringLiteral(h.value,h.language):new d.StringLiteral(h.value);const T=h.datatype.value,g=(0,p.getSuperTypeDict)(T,this.superTypeProvider);if(u.TypeURL.XSD_STRING in g)return new d.StringLiteral(h.value,T);if(u.TypeURL.RDF_LANG_STRING in g)return new d.LangStringLiteral(h.value,h.language);if(u.TypeURL.XSD_DATE_TIME in g){const x=new Date(h.value);return Number.isNaN(x.getTime())?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.DateTimeLiteral(new Date(h.value),h.value,T)}if(u.TypeURL.XSD_BOOLEAN in g)return h.value!=="true"&&h.value!=="false"&&h.value!=="1"&&h.value!=="0"?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):new d.BooleanLiteral(h.value==="true"||h.value==="1",h.value);if(u.TypeURL.XSD_DECIMAL in g){const x=c.parseXSDDecimal(h.value);return x===void 0?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):u.TypeURL.XSD_INTEGER in g?new d.IntegerLiteral(x,T,h.value):new d.DecimalLiteral(x,T,h.value)}const v=u.TypeURL.XSD_FLOAT in g,S=u.TypeURL.XSD_DOUBLE in g;if(v||S){const x=c.parseXSDFloat(h.value);return x===void 0?new d.NonLexicalLiteral(void 0,T,this.superTypeProvider,h.value):v?new d.FloatLiteral(x,T,h.value):new d.DoubleLiteral(x,T,h.value)}return new d.Literal(h.value,T,h.value)}}e.TermTransformer=m},"../node_modules/sparqlee/dist/lib/util/Consts.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedOperators=e.SetFunctions=e.SetFunction=e.Operators=e.SpecialOperators=e.RegularOperators=e.SpecialOperator=e.RegularOperator=e.TypeURL=e.TypeAlias=void 0,function(u){u.SPARQL_NUMERIC="SPARQL_NUMERIC",u.SPARQL_STRINGLY="SPARQL_STRINGLY",u.SPARQL_NON_LEXICAL="SPARQL_NON_LEXICAL"}(e.TypeAlias||(e.TypeAlias={}));var t;(function(u){u.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",u.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",u.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",u.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",u.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",u.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",u.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",u.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",u.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",u.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",u.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",u.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",u.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",u.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",u.XSD_INT="http://www.w3.org/2001/XMLSchema#int",u.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",u.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",u.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",u.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",u.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",u.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",u.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",u.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",u.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",u.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",u.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",u.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",u.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",u.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",u.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",u.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",u.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",u.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",u.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",u.XSD_DAYTIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(t=e.TypeURL||(e.TypeURL={}));var o;(function(u){u.NOT="!",u.UMINUS="UMINUS",u.UPLUS="UPLUS",u.EQUAL="=",u.NOT_EQUAL="!=",u.LT="<",u.GT=">",u.LTE="<=",u.GTE=">=",u.MULTIPLICATION="*",u.DIVISION="/",u.ADDITION="+",u.SUBTRACTION="-",u.IS_IRI="isiri",u.IS_BLANK="isblank",u.IS_LITERAL="isliteral",u.IS_NUMERIC="isnumeric",u.STR="str",u.LANG="lang",u.DATATYPE="datatype",u.IRI="iri",u.URI="uri",u.STRDT="strdt",u.STRLANG="strlang",u.UUID="uuid",u.STRUUID="struuid",u.STRLEN="strlen",u.SUBSTR="substr",u.UCASE="ucase",u.LCASE="lcase",u.STRSTARTS="strstarts",u.STRENDS="strends",u.CONTAINS="contains",u.STRBEFORE="strbefore",u.STRAFTER="strafter",u.ENCODE_FOR_URI="encode_for_uri",u.LANG_MATCHES="langmatches",u.REGEX="regex",u.REPLACE="replace",u.ABS="abs",u.ROUND="round",u.CEIL="ceil",u.FLOOR="floor",u.RAND="rand",u.NOW="now",u.YEAR="year",u.MONTH="month",u.DAY="day",u.HOURS="hours",u.MINUTES="minutes",u.SECONDS="seconds",u.TIMEZONE="timezone",u.TZ="tz",u.MD5="md5",u.SHA1="sha1",u.SHA256="sha256",u.SHA384="sha384",u.SHA512="sha512"})(o=e.RegularOperator||(e.RegularOperator={}));var l;(function(u){u.BOUND="bound",u.IF="if",u.COALESCE="coalesce",u.LOGICAL_OR="||",u.LOGICAL_AND="&&",u.SAME_TERM="sameterm",u.IN="in",u.NOT_IN="notin",u.CONCAT="concat",u.BNODE="BNODE"})(l=e.SpecialOperator||(e.SpecialOperator={})),e.RegularOperators=new Set(Object.values(o)),e.SpecialOperators=new Set(Object.values(l)),e.Operators=new Set([...e.RegularOperators,...e.SpecialOperators]);var d;(function(u){u.COUNT="count",u.SUM="sum",u.MIN="min",u.MAX="max",u.AVG="avg",u.GROUP_CONCAT="group_concat",u.SAMPLE="sample"})(d=e.SetFunction||(e.SetFunction={})),e.SetFunctions=new Set(Object.values(d)),e.NamedOperators=new Set([t.XSD_STRING,t.XSD_FLOAT,t.XSD_DOUBLE,t.XSD_DECIMAL,t.XSD_INTEGER,t.XSD_DATE_TIME,t.XSD_DATE,t.XSD_BOOLEAN])},"../node_modules/sparqlee/dist/lib/util/Errors.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NoExistenceHook=e.NoAggregator=e.ExtensionFunctionError=e.UnknownNamedOperator=e.UnknownOperator=e.InvalidTermType=e.InvalidExpressionType=e.InvalidExpression=e.InvalidArity=e.UnimplementedError=e.UnexpectedError=e.EmptyAggregateError=e.IncompatibleLanguageOperation=e.InvalidTimezoneCall=e.CastError=e.InvalidArgumentTypes=e.InError=e.CoalesceError=e.RDFEqualTypeError=e.EBVCoercionError=e.UnboundVariableError=e.InvalidLexicalForm=e.isExpressionError=e.ExpressionError=void 0;class t extends Error{}e.ExpressionError=t;function o(M){return M instanceof t}e.isExpressionError=o;class l extends t{constructor(V){super(`Invalid lexical form '${B(V)}'`),this.arg=V}}e.InvalidLexicalForm=l;class d extends t{constructor(V,$){super(`Unbound variable '${B(V)}'`),this.variable=V,this.bindings=$}}e.UnboundVariableError=d;class u extends t{constructor(V){super(`Cannot coerce term to EBV '${B(V)}'`),this.arg=V}}e.EBVCoercionError=u;class a extends t{constructor(V){super("Equality test for literals with unsupported datatypes"),this.args=V}}e.RDFEqualTypeError=a;class c extends t{constructor(V){super("All COALESCE arguments threw errors"),this.errors=V}}e.CoalesceError=c;class p extends t{constructor(V){super(`Some argument to IN errorred and none where equal. ${V.map($=>`(${$.toString()}) `).join("and ")}`),this.errors=V}}e.InError=p;class m extends t{constructor(V,$){super(`Argument types not valid for operator: '${B($)}' with '${B(V)}`),this.args=V,this.op=$}}e.InvalidArgumentTypes=m;class y extends t{constructor(V,$){super(`Invalid cast: '${B(V)}' to '${B($)}'`),this.arg=V}}e.CastError=y;class h extends t{constructor(V){super(`TIMEZONE call on ${V} which has no timezone`),this.dateString=V}}e.InvalidTimezoneCall=h;class T extends t{constructor(V,$){super(`Operation on incompatible language literals '${B(V)}' and '${B($)}'`),this.arg1=V,this.arg2=$}}e.IncompatibleLanguageOperation=T;class g extends t{constructor(){super("Empty aggregate expression")}}e.EmptyAggregateError=g;class v extends Error{constructor(V,$){super(`Programmer Error '${V}'`),this.payload=$}}e.UnexpectedError=v;class S extends Error{constructor(V){super(`Unimplemented feature '${V}!'`)}}e.UnimplementedError=S;class x extends Error{constructor(V,$){super(`The number of args does not match the arity of the operator '${B($)}'.`),this.args=V,this.op=$}}e.InvalidArity=x;class w extends Error{constructor(V){super(`Invalid SPARQL Expression '${B(V)}'`)}}e.InvalidExpression=w;class E extends Error{constructor(V){super(`Invalid expression type for SPARQL Expression '${B(V)}'`),this.expr=V}}e.InvalidExpressionType=E;class O extends Error{constructor(V){super(`Invalid term type for term '${B(V)}'`),this.term=V}}e.InvalidTermType=O;class I extends Error{constructor(V){super(`Unknown operator: '${B(V)}`)}}e.UnknownOperator=I;class z extends Error{constructor(V){super(`Unknown named operator: '${B(V)}'`)}}e.UnknownNamedOperator=z;class Q extends Error{constructor(V,$){$ instanceof Error?super(`Error thrown in ${V}: ${$.message}${$.stack?`
${$.stack}`:""}`):super(`Error thrown in ${V}`)}}e.ExtensionFunctionError=Q;class W extends Error{constructor(V){super(`Aggregate expression ${B(V)} found, but no aggregate hook provided.`)}}e.NoAggregator=W;class H extends Error{constructor(){super("EXISTS found, but no existence hook provided.")}}e.NoExistenceHook=H;function B(M){return JSON.stringify(M)}},"../node_modules/sparqlee/dist/lib/util/Ordering.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.orderTypes=void 0;const o=t("../node_modules/lru-cache/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js");function d(m,y,h,T,g,v){return m===y?0:m===void 0?h?-1:1:y===void 0?h?1:-1:m.equals(y)?0:u(m,y,T,g,v)===h?-1:1}e.orderTypes=d;function u(m,y,h,T,g){return m.termType!==y.termType?c[m.termType]<c[y.termType]:m.termType==="Literal"?a(m,y,h,T,g):m.value<y.value}function a(m,y,h,T,g){const v={discoverer:h||(()=>"term"),cache:T||new o},S=new l.TermTransformer(v,g||!1),x=S.transformLiteral(m),w=S.transformLiteral(y),E=p[x.mainSparqlType],O=p[w.mainSparqlType];if(E!==O)return E<O;switch(E){case"boolean":case"dateTime":case"decimal":case"integer":case"float":case"double":case"string":return x.typedValue<w.typedValue;case"langString":return x.typedValue<w.typedValue||x.typedValue===w.typedValue&&(x.language||"")<(w.language||"");case"other":case"nonlexical":return x.dataType<w.dataType||x.dataType===w.dataType&&x.str()<w.str()}}const c={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5},p={string:"string",langString:"langString",dateTime:"dateTime",boolean:"boolean",integer:"decimal",decimal:"decimal",float:"decimal",double:"decimal",other:"other",nonlexical:"other"}},"../node_modules/sparqlee/dist/lib/util/Parsing.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseXSDDateTime=e.parseXSDInteger=e.parseXSDDecimal=e.parseXSDFloat=void 0;function t(u){const a=Number(u);return Number.isNaN(a)?u==="NaN"?Number.NaN:u==="INF"?Number.POSITIVE_INFINITY:u==="-INF"?Number.NEGATIVE_INFINITY:void 0:a}e.parseXSDFloat=t;function o(u){const a=Number(u);return Number.isNaN(a)?void 0:a}e.parseXSDDecimal=o;function l(u){const a=Number.parseInt(u,10);return Number.isNaN(a)?void 0:a}e.parseXSDInteger=l;function d(u){const a=u.indexOf("T"),c=a>=0?u.slice(0,Math.max(0,a)):u,[p,m,y]=c.split("-");let h="",T="",g="",v="";if(a>=0){const S=u.slice(a+1),[x,w]=S.split(/[+Z-]/u);[h,T,g]=x.split(":");const E=/([+Z-].*)/u.exec(S);v=E?E[0]:""}else h="00",T="00",g="00",v="";return{year:p,month:m,day:y,hours:h,minutes:T,seconds:g,timezone:v}}e.parseXSDDateTime=d},"../node_modules/sparqlee/dist/lib/util/TypeHandling.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isSubTypeOf=e.getSuperTypeDict=e.isInternalSubType=e.asGeneralType=e.asOverrideType=e.asKnownLiteralType=e.asTypeAlias=e.typeAliasCheck=e.extensionTableInit=e.getSuperTypes=e.superTypeDictTable=e.extensionTableInput=e.mainSparqlType=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js");function d(x){switch(x){case"term":return{types:["term"],prio:0};case"namedNode":return{types:["namedNode"],prio:1};case"literal":return{types:["literal"],prio:1};case"blankNode":return{types:["blankNode"],prio:1};case l.TypeAlias.SPARQL_NON_LEXICAL:return{types:["nonlexical"],prio:2};case null:case void 0:case"":case l.TypeURL.XSD_ANY_URI:case l.TypeURL.XSD_NORMALIZED_STRING:case l.TypeURL.XSD_TOKEN:case l.TypeURL.XSD_LANGUAGE:case l.TypeURL.XSD_NM_TOKEN:case l.TypeURL.XSD_NAME:case l.TypeURL.XSD_ENTITY:case l.TypeURL.XSD_ID:case l.TypeURL.XSD_ID_REF:case l.TypeURL.XSD_STRING:return{types:["string"],prio:e.superTypeDictTable[l.TypeURL.XSD_STRING].__depth+2};case l.TypeURL.RDF_LANG_STRING:return{types:["langString"],prio:e.superTypeDictTable[l.TypeURL.RDF_LANG_STRING].__depth+2};case l.TypeURL.XSD_DATE_TIME_STAMP:case l.TypeURL.XSD_DATE_TIME:return{types:["dateTime"],prio:e.superTypeDictTable[l.TypeURL.XSD_DATE_TIME].__depth+2};case l.TypeURL.XSD_BOOLEAN:return{types:["boolean"],prio:e.superTypeDictTable[l.TypeURL.XSD_BOOLEAN].__depth+2};case l.TypeURL.XSD_DECIMAL:return{types:["decimal","integer"],prio:e.superTypeDictTable[l.TypeURL.XSD_DECIMAL].__depth+2};case l.TypeURL.XSD_FLOAT:return{types:["float"],prio:e.superTypeDictTable[l.TypeURL.XSD_FLOAT].__depth+2};case l.TypeURL.XSD_DOUBLE:return{types:["double"],prio:e.superTypeDictTable[l.TypeURL.XSD_DOUBLE].__depth+2};case l.TypeURL.XSD_NON_POSITIVE_INTEGER:case l.TypeURL.XSD_NEGATIVE_INTEGER:case l.TypeURL.XSD_LONG:case l.TypeURL.XSD_INT:case l.TypeURL.XSD_SHORT:case l.TypeURL.XSD_BYTE:case l.TypeURL.XSD_NON_NEGATIVE_INTEGER:case l.TypeURL.XSD_POSITIVE_INTEGER:case l.TypeURL.XSD_UNSIGNED_LONG:case l.TypeURL.XSD_UNSIGNED_INT:case l.TypeURL.XSD_UNSIGNED_SHORT:case l.TypeURL.XSD_UNSIGNED_BYTE:case l.TypeURL.XSD_INTEGER:return{types:["integer"],prio:e.superTypeDictTable[l.TypeURL.XSD_INTEGER].__depth+2};case l.TypeAlias.SPARQL_STRINGLY:return{types:["string","langString"],prio:e.superTypeDictTable[l.TypeAlias.SPARQL_STRINGLY].__depth+2};case l.TypeAlias.SPARQL_NUMERIC:return{types:["decimal","float","integer","double"],prio:e.superTypeDictTable[l.TypeAlias.SPARQL_NUMERIC].__depth+2};default:return{types:["other"],prio:2}}}e.mainSparqlType=d,e.extensionTableInput={[l.TypeURL.XSD_DATE_TIME_STAMP]:l.TypeURL.XSD_DATE_TIME,[l.TypeURL.XSD_DAYTIME_DURATION]:l.TypeURL.XSD_DURATION,[l.TypeURL.XSD_YEAR_MONTH_DURATION]:l.TypeURL.XSD_DURATION,[l.TypeURL.RDF_LANG_STRING]:l.TypeAlias.SPARQL_STRINGLY,[l.TypeURL.XSD_STRING]:l.TypeAlias.SPARQL_STRINGLY,[l.TypeURL.XSD_NORMALIZED_STRING]:l.TypeURL.XSD_STRING,[l.TypeURL.XSD_TOKEN]:l.TypeURL.XSD_NORMALIZED_STRING,[l.TypeURL.XSD_LANGUAGE]:l.TypeURL.XSD_TOKEN,[l.TypeURL.XSD_NM_TOKEN]:l.TypeURL.XSD_TOKEN,[l.TypeURL.XSD_NAME]:l.TypeURL.XSD_TOKEN,[l.TypeURL.XSD_NC_NAME]:l.TypeURL.XSD_NAME,[l.TypeURL.XSD_ENTITY]:l.TypeURL.XSD_NC_NAME,[l.TypeURL.XSD_ID]:l.TypeURL.XSD_NC_NAME,[l.TypeURL.XSD_ID_REF]:l.TypeURL.XSD_NC_NAME,[l.TypeURL.XSD_DOUBLE]:l.TypeAlias.SPARQL_NUMERIC,[l.TypeURL.XSD_FLOAT]:l.TypeAlias.SPARQL_NUMERIC,[l.TypeURL.XSD_DECIMAL]:l.TypeAlias.SPARQL_NUMERIC,[l.TypeURL.XSD_INTEGER]:l.TypeURL.XSD_DECIMAL,[l.TypeURL.XSD_NON_POSITIVE_INTEGER]:l.TypeURL.XSD_INTEGER,[l.TypeURL.XSD_NEGATIVE_INTEGER]:l.TypeURL.XSD_NON_POSITIVE_INTEGER,[l.TypeURL.XSD_LONG]:l.TypeURL.XSD_INTEGER,[l.TypeURL.XSD_INT]:l.TypeURL.XSD_LONG,[l.TypeURL.XSD_SHORT]:l.TypeURL.XSD_INT,[l.TypeURL.XSD_BYTE]:l.TypeURL.XSD_SHORT,[l.TypeURL.XSD_NON_NEGATIVE_INTEGER]:l.TypeURL.XSD_INTEGER,[l.TypeURL.XSD_POSITIVE_INTEGER]:l.TypeURL.XSD_NON_NEGATIVE_INTEGER,[l.TypeURL.XSD_UNSIGNED_LONG]:l.TypeURL.XSD_NON_NEGATIVE_INTEGER,[l.TypeURL.XSD_UNSIGNED_INT]:l.TypeURL.XSD_UNSIGNED_LONG,[l.TypeURL.XSD_UNSIGNED_SHORT]:l.TypeURL.XSD_UNSIGNED_INT,[l.TypeURL.XSD_UNSIGNED_BYTE]:l.TypeURL.XSD_UNSIGNED_SHORT,[l.TypeURL.XSD_DATE_TIME]:"term",[l.TypeURL.XSD_BOOLEAN]:"term",[l.TypeURL.XSD_DATE]:"term",[l.TypeURL.XSD_DURATION]:"term",[l.TypeAlias.SPARQL_NUMERIC]:"term",[l.TypeAlias.SPARQL_STRINGLY]:"term",[l.TypeAlias.SPARQL_NON_LEXICAL]:"term",[l.TypeURL.XSD_ANY_URI]:"term"};function u(x,w){const E=w.cache.get(x);if(E)return E;const O=w.discoverer(x);if(O==="term"){const Q=Object.create(null);return Q.__depth=0,Q[x]=0,w.cache.set(x,Q),Q}let I;const z=y(O);return z?I=Object.assign({},e.superTypeDictTable[z]):I=Object.assign({},u(O,w)),I.__depth++,I[x]=I.__depth,w.cache.set(x,I),I}e.getSuperTypes=u;function a(){const x=Object.create(null);for(const[w,E]of Object.entries(e.extensionTableInput)){const O=w;x[O]||c(O,E,x)}e.superTypeDictTable=x}e.extensionTableInit=a,a();function c(x,w,E){if(w==="term"||w===void 0){const O=Object.create(null);O.__depth=0,O[x]=0,E[x]=O;return}E[w]||c(w,e.extensionTableInput[w],E),E[x]=Object.assign(Object.assign({},E[w]),{[x]:E[w].__depth+1,__depth:E[w].__depth+1})}function p(){e.typeAliasCheck=Object.create(null);for(const x of Object.values(l.TypeAlias))e.typeAliasCheck[x]=!0}p();function m(x){if(x in e.typeAliasCheck)return x}e.asTypeAlias=m;function y(x){if(x in e.superTypeDictTable)return x}e.asKnownLiteralType=y;function h(x){if(y(x)||x==="term")return x}e.asOverrideType=h;function T(x){if(x==="term"||(0,o.asTermType)(x))return x}e.asGeneralType=T;function g(x,w){return x!=="term"&&e.superTypeDictTable[x]&&e.superTypeDictTable[x][w]!==void 0}e.isInternalSubType=g;function v(x,w){const E=y(x);return E?e.superTypeDictTable[E]:u(x,w)}e.getSuperTypeDict=v;function S(x,w,E){return x==="term"?!1:v(x,E)[w]!==void 0}e.isSubTypeOf=S},"../node_modules/stream-to-string/index.js":(n,e,t)=>{var o=t("./require-empty.js");n.exports=function(l,d,u){typeof d=="function"&&(u=d,d=null),u=u||function(){};var a="";return new o(function(c,p){l.on("data",function(m){a+=typeof d=="string"?m.toString(d):m.toString()}),l.on("end",function(){c(a),u(null,a)}),l.on("error",function(m){p(m),u(m)})})}},"../node_modules/typed-immutable-map/dist/HashMap/empty.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=void 0;const l={node:t("../node_modules/typed-immutable-map/dist/nodes/index.js").EMPTY,size:0};function d(){return l}e.empty=d},"../node_modules/typed-immutable-map/dist/HashMap/entries.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.entries=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(u){return(0,o.iterator)((0,o.getNode)(u),d)}e.entries=l;function d(u){return[u.key,u.value]}},"../node_modules/typed-immutable-map/dist/HashMap/filter.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),u=function(c,p){return(0,l.reduce)(function(m,y,h){return c(y,h)?(0,d.set)(h,y,m):m},(0,o.empty)(),p)};e.filter=u},"../node_modules/typed-immutable-map/dist/HashMap/forEach.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),l=function(u,a){return(0,o.reduce)((c,p,m)=>u(p,m),null,a),a};e.forEach=l},"../node_modules/typed-immutable-map/dist/HashMap/from.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromObject=e.fromIterable=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/set.js");function d(a){let c=(0,o.empty)();for(const[p,m]of a)c=(0,l.set)(p,m,c);return c}e.fromIterable=d;function u(a){let c=(0,o.empty)();for(let p in a)a.hasOwnProperty(p)&&(c=(0,l.set)(p,a[p],c));return c}e.fromObject=u},"../node_modules/typed-immutable-map/dist/HashMap/get.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.get=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(d,u,a){const c=(0,o.findHash)(d);return(0,o.getHash)(void 0,c,d,u,a)}e.get=l},"../node_modules/typed-immutable-map/dist/HashMap/has.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.has=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/index.js");function d(u,a,c){const p=(0,o.findHash)(u);return(0,o.getHash)(l.NOTHING,p,u,a,c)!==l.NOTHING}e.has=d},"../node_modules/typed-immutable-map/dist/HashMap/keys.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.keys=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(u){return(0,o.iterator)((0,o.getNode)(u),d)}e.keys=l;function d(u){return u.key}},"../node_modules/typed-immutable-map/dist/HashMap/map.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),u=function(c,p){return(0,l.reduce)(function(m,y,h){return(0,d.set)(h,c(y,h),m)},(0,o.empty)(),p)};e.map=u},"../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findHash=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/index.js");function l(d){return typeof d=="number"?d:typeof d=="string"?(0,o.stringHash)(d):Math.abs((0,o.stringHash)(JSON.stringify(d)))}e.findHash=l},"../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fold=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function l(d,u,a){const c=(0,o.getNode)(a);if(c.type===0)return u;if(c.type===1)return d(u,c.value,c.key);const p=[c.children];let m;for(;m=p.shift();)for(let y=0;y<m.length;++y){const h=m[y];h&&h.type!==0&&(h.type===1?u=d(u,h.value,h.key):p.push(h.children))}return u}e.fold=l},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/index.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js");function u(a,c,p,m,y=d.defaultKeyEquals){let h=(0,l.getNode)(m),T=0;for(;;)switch(h.type){case 1:return y(p,h.key)?h.value:a;case 2:if(c===h.hash){const g=h.children;for(let v=0;v<g.length;++v){const S=g[v];if(y(p,S.key))return S.value}return a}case 3:{const g=(0,o.hashFragment)(T,c),v=(0,o.toBitmap)(g);if(h.mask&v){const S=(0,o.bitmapToIndex)(h.mask,v);h=h.children[S],T+=o.SIZE;break}return a}case 4:{if(h=h.children[(0,o.hashFragment)(T,c)],h){T+=o.SIZE;break}return a}default:return a}}e.getHash=u},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=void 0;function t(o){return o.node}e.getNode=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSize=void 0;function t(o){return o.size}e.getSize=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js"),e)},"../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=void 0;function t(c,p){return new o(d(c,p,[]))}e.iterator=t;class o{_iterate;constructor(p){this._iterate=p}next(){if(!this._iterate)return{done:!0,value:null};const{value:p,rest:m}=this._iterate;return this._iterate=l(m),{done:!1,value:p}}[Symbol.iterator](){return this}}const l=c=>c&&u(c[0],c[1],c[2],c[3],c[4]);function d(c,p,m){switch(c.type){case 1:return{value:p(c),rest:m};case 2:case 4:case 3:const y=c.children;return u(y.length,y,0,p,m);default:return l(m)}}function u(c,p,m,y,h){for(;m<c;){const T=p[m++];if(T&&a(T))return d(T,y,[c,p,m,y,h])}return l(h)}function a(c){return c&&c.type!==0}},"../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultKeyEquals=void 0;const t=(o,l)=>o===l;e.defaultKeyEquals=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setKeyValue=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/index.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),u=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js"),a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),c=m=>()=>m;function p(m,y,h){const T=(0,l.findHash)(m),g={value:(0,u.getSize)(h)},v=(0,o.modify)((0,d.getNode)(h),0,c(y),T,m,g);return(0,a.setTree)(v,g.value,h)}e.setKeyValue=p},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setTree=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function l(d,u,a){return d===(0,o.getNode)(a)?a:{node:d,size:u}}e.setTree=l},"../node_modules/typed-immutable-map/dist/HashMap/reduce.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.reduce=o.fold},"../node_modules/typed-immutable-map/dist/HashMap/remove.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.remove=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/constants.js");function d(u,a){return(0,o.setKeyValue)(u,l.NOTHING,a)}e.remove=d},"../node_modules/typed-immutable-map/dist/HashMap/set.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.set=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.set=o.setKeyValue},"../node_modules/typed-immutable-map/dist/HashMap/size.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.size=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js");function l(d){return(0,o.getSize)(d)}e.size=l},"../node_modules/typed-immutable-map/dist/HashMap/values.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.values=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(u){return(0,o.iterator)((0,o.getNode)(u),d)}e.values=l;function d(u){return u.value}},"../node_modules/typed-immutable-map/dist/common/array-operations.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.remove=e.replace=void 0;function t(d,u,a){const c=a.length,p=Array(c);for(let m=0;m<c;++m)p[m]=a[m];return p[d]=u,p}e.replace=t;function o(d,u){const a=u.length;if(a===0||d>=a)return u;if(a===1)return[];const c=Array(a-1);let p=0;for(;p<d;++p)c[p]=u[p];for(p=p+1;p<a;++p)c[p-1]=u[p];return c}e.remove=o;function l(d,u,a){const c=a.length,p=Array(c+1);let m=0;for(;m<d;++m)p[m]=a[m];for(p[m++]=u;m<c+1;++m)p[m]=a[m-1];return p}e.insert=l},"../node_modules/typed-immutable-map/dist/common/bitwise-operations.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bitmapToIndex=e.toBitmap=e.hashFragment=e.hammingWeight=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/constants.js");function l(c){return c=c-(c>>1&1431655765),c=(c&858993459)+(c>>2&858993459),(c+(c>>4)&252645135)*16843009>>24}e.hammingWeight=l;function d(c,p){return p>>>c&o.MASK}e.hashFragment=d;function u(c){return 1<<c}e.toBitmap=u;function a(c,p){return l(c&p-1)}e.bitmapToIndex=a},"../node_modules/typed-immutable-map/dist/common/constants.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_ARRAY_NODE=e.MAX_INDEX_NODE=e.MASK=e.BUCKET_SIZE=e.SIZE=void 0,e.SIZE=5,e.BUCKET_SIZE=Math.pow(2,e.SIZE),e.MASK=e.BUCKET_SIZE-1,e.MAX_INDEX_NODE=e.BUCKET_SIZE/2,e.MIN_ARRAY_NODE=e.BUCKET_SIZE/4},"../node_modules/typed-immutable-map/dist/common/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/common/array-operations.js"),e),l(t("../node_modules/typed-immutable-map/dist/common/bitwise-operations.js"),e),l(t("../node_modules/typed-immutable-map/dist/common/constants.js"),e),l(t("../node_modules/typed-immutable-map/dist/common/stringHash.js"),e)},"../node_modules/typed-immutable-map/dist/common/stringHash.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringHash=void 0;function t(o){let l=0;for(let d=0;d<o.length;++d)l=(l<<5)-l+o.charCodeAt(d)|0;return l}e.stringHash=t},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyListNode=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),d=t("../node_modules/typed-immutable-map/dist/common/index.js"),u=t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js");function a(p,m,y,h,T,g){const{size:v,children:S}=p,x=(0,d.hashFragment)(m,h),w=S[x],E=(0,l.modify)(w||(0,o.empty)(),m+d.SIZE,y,h,T,g);return w===E?p:c(w)&&!c(E)?{type:4,size:v+1,children:(0,d.replace)(x,E,S)}:!c(w)&&c(E)?v-1<=d.MIN_ARRAY_NODE?(0,u.toIndexNode)(v,x,S):{type:4,size:v-1,children:(0,d.replace)(x,(0,o.empty)(),S)}:{type:4,size:v,children:(0,d.replace)(x,E,S)}}e.modifyListNode=a;function c(p){return p&&p.type===0}},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toIndexNode=void 0;function t(o,l,d){const u=new Array(o-1);let a=0,c=0;for(let p=0;p<d.length;++p)if(p!==l){const m=d[p];m&&m.type>0&&(u[a++]=m,c|=1<<p)}return{type:3,mask:c,children:u}}e.toIndexNode=t},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyCollisionNode=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js");function u(a,c,p,m,y,h){if(m===a.hash){const g=(0,d.newCollisionList)(a.hash,a.children,p,y,h);return g===a.children?a:g.length>1?{type:2,hash:a.hash,children:g}:g[0]}const T=p();return T===o.NOTHING?a:(++h.value,(0,l.combineLeafNodes)(c,a.hash,a,m,{type:1,hash:m,key:y,value:T}))}e.modifyCollisionNode=u},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.newCollisionList=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),l=t("../node_modules/typed-immutable-map/dist/common/index.js");function d(u,a,c,p,m){const y=a.length;for(let T=0;T<y;++T){const g=a[T];if(g.key===p){const v=g.value,S=c(v);return S===v?a:S===o.NOTHING?(--m.value,(0,l.remove)(T,a)):(0,l.insert)(T,{type:1,hash:u,key:p,value:S},a)}}const h=c();return h===o.NOTHING?a:(++m.value,(0,l.insert)(y,{type:1,hash:u,key:p,value:h},a))}e.newCollisionList=d},"../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=e.modifyEmpty=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js");function l(u,a,c,p,m,y){const h=c(void 0);return h===o.NOTHING?u:(++y.value,{type:1,hash:p,key:m,value:h})}e.modifyEmpty=l,e.EMPTY={type:0};function d(){return e.EMPTY}e.empty=d},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyIndexedNode=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),l=t("../node_modules/typed-immutable-map/dist/common/index.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),u=t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js");function a(p,m,y,h,T,g){const{mask:v,children:S}=p,x=(0,l.hashFragment)(m,h),w=(0,l.toBitmap)(x),E=(0,l.bitmapToIndex)(v,w),O=Boolean(v&w),I=O?S[E]:(0,o.empty)(),z=(0,d.modify)(I,m+l.SIZE,y,h,T,g);if(I===z)return p;if(O&&z.type===0){const Q=v&~w;return Q?S.length<=2&&c(S[E^1])?S[E^1]:{type:3,mask:Q,children:(0,l.remove)(E,S)}:(0,o.empty)()}return!O&&z.type!==0?S.length>=l.MAX_INDEX_NODE?(0,u.toArrayNode)(x,z,v,S):{type:3,mask:v|w,children:(0,l.insert)(E,z,S)}:{type:3,mask:v,children:(0,l.replace)(E,z,S)}}e.modifyIndexedNode=a;function c(p){const m=p.type;return m===0||m===1||m===2}},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArrayNode=void 0;function t(o,l,d,u){const a=[];let c=d,p=0;for(let m=0;c;++m)c&1&&(a[m]=u[p++]),c>>>=1;return a[o]=l,{type:4,size:p+1,children:a}}e.toArrayNode=t},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyLeaf=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js");function u(a,c,p,m,y,h){if(y===a.key){const g=p(a.value);return g===a.value?a:g===o.NOTHING?(--h.value,(0,l.empty)()):{type:1,hash:m,key:y,value:g}}const T=p();return T===o.NOTHING?a:(++h.value,(0,d.combineLeafNodes)(c,a.hash,a,m,{type:1,hash:m,key:y,value:T}))}e.modifyLeaf=u},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLeafNodes=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/index.js");function l(d,u,a,c,p){if(u===c)return{type:2,hash:u,children:[p,a]};const m=(0,o.hashFragment)(d,u),y=(0,o.hashFragment)(d,c);return{type:3,mask:(0,o.toBitmap)(m)|(0,o.toBitmap)(y),children:m===y?[l(d+o.SIZE,u,a,c,p)]:m<y?[a,p]:[p,a]}}e.combineLeafNodes=l},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/constants.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NOTHING=void 0,e.NOTHING=Object.create(null)},"../node_modules/typed-immutable-map/dist/nodes/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/types.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/modify.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modify=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),u=t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),a=t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js");function c(p,m,y,h,T,g){switch(p.type){case 1:return(0,o.modifyLeaf)(p,m,y,h,T,g);case 0:return(0,l.modifyEmpty)(p,m,y,h,T,g);case 4:return(0,d.modifyListNode)(p,m,y,h,T,g);case 3:return(0,u.modifyIndexedNode)(p,m,y,h,T,g);case 2:return(0,a.modifyCollisionNode)(p,m,y,h,T,g);default:throw new Error("never")}}e.modify=c},"../node_modules/typed-immutable-map/dist/nodes/types.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/uuid-random/index.js":(n,e,t)=>{(function(){var o,l=0,d=[],u;for(u=0;u<256;u++)d[u]=(u+256).toString(16).substr(1);m.BUFFER_SIZE=4096,m.bin=p,m.clearBuffer=function(){o=null,l=0},m.test=function(y){return typeof y=="string"?/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(y):!1};var a;typeof crypto<"u"?a=crypto:typeof window<"u"&&typeof window.msCrypto<"u"&&(a=window.msCrypto),a=a||t("?699d"),n.exports=m,m.randomBytes=function(){if(a){if(a.randomBytes)return a.randomBytes;if(a.getRandomValues)return typeof Uint8Array.prototype.slice!="function"?function(y){var h=new Uint8Array(y);return a.getRandomValues(h),Array.from(h)}:function(y){var h=new Uint8Array(y);return a.getRandomValues(h),h}}return function(y){var h,T=[];for(h=0;h<y;h++)T.push(Math.floor(Math.random()*256));return T}}();function c(y){return(!o||l+y>m.BUFFER_SIZE)&&(l=0,o=m.randomBytes(m.BUFFER_SIZE)),o.slice(l,l+=y)}function p(){var y=c(16);return y[6]=y[6]&15|64,y[8]=y[8]&63|128,y}function m(){var y=p();return d[y[0]]+d[y[1]]+d[y[2]]+d[y[3]]+"-"+d[y[4]]+d[y[5]]+"-"+d[y[6]]+d[y[7]]+"-"+d[y[8]]+d[y[9]]+"-"+d[y[10]]+d[y[11]]+d[y[12]]+d[y[13]]+d[y[14]]+d[y[15]]}})()},"../node_modules/yallist/iterator.js":n=>{n.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},"../node_modules/yallist/yallist.js":(n,e,t)=>{n.exports=o,o.Node=a,o.create=o;function o(c){var p=this;if(p instanceof o||(p=new o),p.tail=null,p.head=null,p.length=0,c&&typeof c.forEach=="function")c.forEach(function(h){p.push(h)});else if(arguments.length>0)for(var m=0,y=arguments.length;m<y;m++)p.push(arguments[m]);return p}o.prototype.removeNode=function(c){if(c.list!==this)throw new Error("removing node which does not belong to this list");var p=c.next,m=c.prev;return p&&(p.prev=m),m&&(m.next=p),c===this.head&&(this.head=p),c===this.tail&&(this.tail=m),c.list.length--,c.next=null,c.prev=null,c.list=null,p},o.prototype.unshiftNode=function(c){if(c!==this.head){c.list&&c.list.removeNode(c);var p=this.head;c.list=this,c.next=p,p&&(p.prev=c),this.head=c,this.tail||(this.tail=c),this.length++}},o.prototype.pushNode=function(c){if(c!==this.tail){c.list&&c.list.removeNode(c);var p=this.tail;c.list=this,c.prev=p,p&&(p.next=c),this.tail=c,this.head||(this.head=c),this.length++}},o.prototype.push=function(){for(var c=0,p=arguments.length;c<p;c++)d(this,arguments[c]);return this.length},o.prototype.unshift=function(){for(var c=0,p=arguments.length;c<p;c++)u(this,arguments[c]);return this.length},o.prototype.pop=function(){if(this.tail){var c=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,c}},o.prototype.shift=function(){if(this.head){var c=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,c}},o.prototype.forEach=function(c,p){p=p||this;for(var m=this.head,y=0;m!==null;y++)c.call(p,m.value,y,this),m=m.next},o.prototype.forEachReverse=function(c,p){p=p||this;for(var m=this.tail,y=this.length-1;m!==null;y--)c.call(p,m.value,y,this),m=m.prev},o.prototype.get=function(c){for(var p=0,m=this.head;m!==null&&p<c;p++)m=m.next;if(p===c&&m!==null)return m.value},o.prototype.getReverse=function(c){for(var p=0,m=this.tail;m!==null&&p<c;p++)m=m.prev;if(p===c&&m!==null)return m.value},o.prototype.map=function(c,p){p=p||this;for(var m=new o,y=this.head;y!==null;)m.push(c.call(p,y.value,this)),y=y.next;return m},o.prototype.mapReverse=function(c,p){p=p||this;for(var m=new o,y=this.tail;y!==null;)m.push(c.call(p,y.value,this)),y=y.prev;return m},o.prototype.reduce=function(c,p){var m,y=this.head;if(arguments.length>1)m=p;else if(this.head)y=this.head.next,m=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var h=0;y!==null;h++)m=c(m,y.value,h),y=y.next;return m},o.prototype.reduceReverse=function(c,p){var m,y=this.tail;if(arguments.length>1)m=p;else if(this.tail)y=this.tail.prev,m=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var h=this.length-1;y!==null;h--)m=c(m,y.value,h),y=y.prev;return m},o.prototype.toArray=function(){for(var c=new Array(this.length),p=0,m=this.head;m!==null;p++)c[p]=m.value,m=m.next;return c},o.prototype.toArrayReverse=function(){for(var c=new Array(this.length),p=0,m=this.tail;m!==null;p++)c[p]=m.value,m=m.prev;return c},o.prototype.slice=function(c,p){p=p||this.length,p<0&&(p+=this.length),c=c||0,c<0&&(c+=this.length);var m=new o;if(p<c||p<0)return m;c<0&&(c=0),p>this.length&&(p=this.length);for(var y=0,h=this.head;h!==null&&y<c;y++)h=h.next;for(;h!==null&&y<p;y++,h=h.next)m.push(h.value);return m},o.prototype.sliceReverse=function(c,p){p=p||this.length,p<0&&(p+=this.length),c=c||0,c<0&&(c+=this.length);var m=new o;if(p<c||p<0)return m;c<0&&(c=0),p>this.length&&(p=this.length);for(var y=this.length,h=this.tail;h!==null&&y>p;y--)h=h.prev;for(;h!==null&&y>c;y--,h=h.prev)m.push(h.value);return m},o.prototype.splice=function(c,p,...m){c>this.length&&(c=this.length-1),c<0&&(c=this.length+c);for(var y=0,h=this.head;h!==null&&y<c;y++)h=h.next;for(var T=[],y=0;h&&y<p;y++)T.push(h.value),h=this.removeNode(h);h===null&&(h=this.tail),h!==this.head&&h!==this.tail&&(h=h.prev);for(var y=0;y<m.length;y++)h=l(this,h,m[y]);return T},o.prototype.reverse=function(){for(var c=this.head,p=this.tail,m=c;m!==null;m=m.prev){var y=m.prev;m.prev=m.next,m.next=y}return this.head=p,this.tail=c,this};function l(c,p,m){var y=p===c.head?new a(m,null,p,c):new a(m,p,p.next,c);return y.next===null&&(c.tail=y),y.prev===null&&(c.head=y),c.length++,y}function d(c,p){c.tail=new a(p,c.tail,null,c),c.head||(c.head=c.tail),c.length++}function u(c,p){c.head=new a(p,null,c.head,c),c.tail||(c.tail=c.head),c.length++}function a(c,p,m,y){if(!(this instanceof a))return new a(c,p,m,y);this.list=y,this.value=c,p?(p.next=this,this.prev=p):this.prev=null,m?(m.prev=this,this.next=m):this.next=null}try{t("../node_modules/yallist/iterator.js")(o)}catch{}},"../packages/immutable/dist/Map.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/has.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/get.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),u=t("../node_modules/typed-immutable-map/dist/HashMap/forEach.js"),a=t("../node_modules/typed-immutable-map/dist/HashMap/map.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/filter.js"),p=t("../node_modules/typed-immutable-map/dist/HashMap/remove.js"),m=t("../node_modules/typed-immutable-map/dist/HashMap/entries.js"),y=t("../node_modules/typed-immutable-map/dist/HashMap/values.js"),h=t("../node_modules/typed-immutable-map/dist/HashMap/keys.js"),T=t("../node_modules/typed-immutable-map/dist/HashMap/size.js");class g{hashmap;constructor(S){this.hashmap=S}get size(){return(0,T.size)(this.hashmap)}set(S,x){return new g((0,d.set)(S,x,this.hashmap))}delete(S){return new g((0,p.remove)(S,this.hashmap))}get(S){return(0,l.get)(S,this.hashmap)}has(S){return(0,o.has)(S,this.hashmap)}forEach(S){(0,u.forEach)(S,this.hashmap)}map(S){return new g((0,a.map)(S,this.hashmap))}filter(S){return new g((0,c.filter)(S,this.hashmap))}toJS(){return Object.fromEntries(this)}toJSON(){return this.toJS()}keys(){return(0,h.keys)(this.hashmap)}values(){return(0,y.values)(this.hashmap)}entries(){return(0,m.entries)(this.hashmap)}[Symbol.iterator](){return this.entries()}}e.Map=g},"../packages/immutable/dist/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/from.js"),d=t("../packages/immutable/dist/Map.js"),u=c=>Symbol.iterator in c;function a(c){return c?u(c)?new d.Map((0,l.fromIterable)(c)):new d.Map((0,l.fromObject)(c)):new d.Map((0,o.empty)())}e.Map=a},"../packages/uuid/dist/index.js":function(n,e,t){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.v4=void 0;const l=o(t("../node_modules/uuid-random/index.js"));e.v4=l.default},asynciterator:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__},sparqlalgebrajs:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__},sparqljs:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__},"?699d":()=>{},"./require-empty.js":()=>{},"./src/crypto-polyfill.js":(__unused_webpack_module,__unused_webpack_exports,__quadstore_comunica_require__)=>{const isNode=typeof browserExports<"u"&&browserExports.versions!=null&&browserExports.versions.node!=null,polyfillCrypto=({randomFillSync:n})=>{__quadstore_comunica_require__.g.crypto={},__quadstore_comunica_require__.g.crypto.getRandomValues=e=>(n(e),e)};isNode&&typeof crypto>"u"&&(eval("typeof require === 'function'")?polyfillCrypto(eval("require('crypto');")):eval("import('crypto');").then(polyfillCrypto).catch(n=>{console.error(n),browserExports.exit(1)}))},"./src/engine.js":(n,e,t)=>{const o=new(t("../node_modules/@comunica/logger-void/lib/index.js")).LoggerVoid,l=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^2.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),d=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^2.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),u=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^2.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),a=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^2.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),c=new(t("../node_modules/@comunica/bus-query-operation/lib/index.js")).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^2.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),p=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^2.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),m=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^2.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),y=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),h=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^2.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),T=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^2.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),g=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^2.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),v=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^2.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),S=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/^2.0.0/components/ActorRdfResolveQuadPattern.jsonld#ActorRdfResolveQuadPattern_default_bus"});new(t("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js")).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:d});const x=new(t("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:d});new(t("../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js")).ActorHashBindingsSha1({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:u});const w=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:u}),E=new(t("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:a});new(t("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js")).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:a}),new(t("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js")).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:a}),new(t("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js")).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:a});const O=new(t("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:c});new(t("../node_modules/@comunica/actor-query-operation-values/lib/index.js")).ActorQueryOperationValues({name:"urn:comunica:default:query-operation/actors#values",bus:c});const I=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:p});new(t("../node_modules/@comunica/actor-query-parse-sparql/lib/index.js")).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:p});const z=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:m}),Q=new(t("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:m}),W=new(t("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:m}),H=new(t("../node_modules/@comunica/mediator-all/lib/index.js")).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:y});new(t("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js")).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:h});const B=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:h});new(t("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js")).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:T});const M=new(t("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:T});new(t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js")).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:g});const V=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:g}),$=new(t("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js")).MediatorJoinCoefficientsFixed({cpuWeight:1,memoryWeight:1,timeWeight:10,ioWeight:100,name:"urn:comunica:default:rdf-join/mediators#main",bus:v}),te=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-resolve-quad-pattern/mediators#main",bus:S});new(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js")).ActorRdfResolveQuadPatternRdfJsSource({name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#rdfjs-source",bus:S}),new(t("../node_modules/@comunica/actor-query-operation-ask/lib/index.js")).ActorQueryOperationAsk({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#ask",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-construct/lib/index.js")).ActorQueryOperationConstruct({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#construct",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js")).ActorQueryOperationDescribeSubject({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#describe",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js")).ActorQueryOperationBgpJoin({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#bgp",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js")).ActorQueryOperationFilterSparqlee({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#filter",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js")).ActorQueryOperationFromQuad({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#from",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-group/lib/index.js")).ActorQueryOperationGroup({mediatorHashBindings:w,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#group",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-extend/lib/index.js")).ActorQueryOperationExtend({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#extend",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js")).ActorQueryOperationDistinctHash({mediatorHashBindings:w,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#distinct",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js")).ActorQueryOperationOrderBySparqlee({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#orderby",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-project/lib/index.js")).ActorQueryOperationProject({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#project",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js")).ActorQueryOperationReducedHash({mediatorHashBindings:w,cacheSize:100,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#reduced",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-service/lib/index.js")).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#service",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-slice/lib/index.js")).ActorQueryOperationSlice({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#slice",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-union/lib/index.js")).ActorQueryOperationUnion({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#union",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-nop/lib/index.js")).ActorQueryOperationNop({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#nop",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js")).ActorQueryOperationPathAlt({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-alt",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js")).ActorQueryOperationPathInv({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-inv",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js")).ActorQueryOperationPathNps({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-nps",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js")).ActorQueryOperationPathOneOrMore({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-link/lib/index.js")).ActorQueryOperationPathLink({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-link",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js")).ActorQueryOperationPathZeroOrMore({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js")).ActorQueryOperationAddRewrite({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-add",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js")).ActorQueryOperationPathZeroOrOne({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js")).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-composite",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js")).ActorQueryOperationCopyRewrite({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-copy",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js")).ActorQueryOperationMoveRewrite({mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-move",bus:c});const J=new(t("../node_modules/@comunica/actor-init-query/lib/index-browser.js")).ActorInitQuery({mediatorOptimizeQueryOperation:E,mediatorQueryOperation:O,mediatorQueryParse:I,mediatorQueryResultSerialize:z,mediatorQueryResultSerializeMediaTypeCombiner:Q,mediatorQueryResultSerializeMediaTypeFormatCombiner:W,mediatorContextPreprocess:x,mediatorHttpInvalidate:H,logger:o,defaultQueryInputFormat:"sparql",contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelay:"@comunica/bus-http:http-retry-delay",httpRetryOnServerError:"@comunica/bus-http:http-retry-on-server-error",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",localizeBlankNodes:"@comunica/actor-query-operation:localizeBlankNodes",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:init/actors#query",bus:l});new(t("../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js")).ActorRdfJoinNone({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js")).ActorRdfJoinSingle({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js")).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js")).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorJoinEntriesSort:B,mediatorQueryOperation:O,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js")).ActorRdfJoinHash({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js")).ActorRdfJoinSymmetricHash({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js")).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js")).ActorRdfJoinMinusHash({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js")).ActorRdfJoinMinusHashUndef({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js")).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorQueryOperation:O,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:v}),new(t("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js")).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:v}),new(t("../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js")).ActorQueryOperationClear({mediatorUpdateQuads:V,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-clear",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-create/lib/index.js")).ActorQueryOperationCreate({mediatorUpdateQuads:V,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-create",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js")).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:V,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js")).ActorQueryOperationDrop({mediatorUpdateQuads:V,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-drop",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-load/lib/index.js")).ActorQueryOperationLoad({mediatorUpdateQuads:V,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#update-load",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-join/lib/index.js")).ActorQueryOperationJoin({mediatorJoin:$,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#join",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js")).ActorQueryOperationLeftJoin({mediatorJoin:$,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js")).ActorQueryOperationPathSeq({mediatorJoin:$,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#path-seq",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-minus/lib/index.js")).ActorQueryOperationMinus({mediatorJoin:$,mediatorQueryOperation:O,name:"urn:comunica:default:query-operation/actors#minus",bus:c}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js")).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:B,mediatorJoin:$,mediatorJoinSelectivity:M,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:v}),new(t("../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js")).ActorQueryOperationQuadpattern({mediatorResolveQuadPattern:te,unionDefaultGraph:!1,name:"urn:comunica:default:query-operation/actors#quadpattern",bus:c}),new(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js")).ActorRdfResolveQuadPatternFederated({mediatorResolveQuadPattern:te,skipEmptyPatterns:!1,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#federated",bus:S}),n.exports=J},"./src/index.js":(n,e,t)=>{t("./src/crypto-polyfill.js");const{QueryEngineBase:o}=t("../node_modules/@comunica/actor-init-query/lib/index-browser.js"),l=new o(t("./src/engine.js")),d=Object.create(null);class u{constructor(c){this.store=c,this.engine=l}getContext(c){return{...c,source:this.store,destination:this.store}}query(c,p=d){return l.query(c,this.getContext(p))}queryVoid(c,p=d){return l.queryVoid(c,this.getContext(p))}queryBindings(c,p=d){return l.queryBindings(c,this.getContext(p))}queryQuads(c,p=d){return l.queryQuads(c,this.getContext(p))}queryBoolean(c,p=d){return l.queryBoolean(c,this.getContext(p))}}n.exports.D=u,n.exports.H=l}},__quadstore_comunica_module_cache__={};function __quadstore_comunica_require__(n){var e=__quadstore_comunica_module_cache__[n];if(e!==void 0)return e.exports;var t=__quadstore_comunica_module_cache__[n]={exports:{}};return __quadstore_comunica_modules__[n].call(t.exports,t,t.exports,__quadstore_comunica_require__),t.exports}__quadstore_comunica_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var __quadstore_comunica_exports__=__quadstore_comunica_require__("./src/index.js"),__quadstore_comunica_exports__Engine=__quadstore_comunica_exports__.D;__quadstore_comunica_exports__.H;const proxyMarker=Symbol("Comlink.proxy"),createEndpoint=Symbol("Comlink.endpoint"),releaseProxy=Symbol("Comlink.releaseProxy"),throwMarker=Symbol("Comlink.thrown"),isObject=n=>typeof n=="object"&&n!==null||typeof n=="function",proxyTransferHandler={canHandle:n=>isObject(n)&&n[proxyMarker],serialize(n){const{port1:e,port2:t}=new MessageChannel;return expose(n,e),[t,[t]]},deserialize(n){return n.start(),wrap(n)}},throwTransferHandler={canHandle:n=>isObject(n)&&throwMarker in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},transferHandlers=new Map([["proxy",proxyTransferHandler],["throw",throwTransferHandler]]);function expose(n,e=self){e.addEventListener("message",function t(o){if(!o||!o.data)return;const{id:l,type:d,path:u}=Object.assign({path:[]},o.data),a=(o.data.argumentList||[]).map(fromWireValue);let c;try{const p=u.slice(0,-1).reduce((y,h)=>y[h],n),m=u.reduce((y,h)=>y[h],n);switch(d){case"GET":c=m;break;case"SET":p[u.slice(-1)[0]]=fromWireValue(o.data.value),c=!0;break;case"APPLY":c=m.apply(p,a);break;case"CONSTRUCT":{const y=new m(...a);c=proxy(y)}break;case"ENDPOINT":{const{port1:y,port2:h}=new MessageChannel;expose(n,h),c=transfer(y,[y])}break;case"RELEASE":c=void 0;break;default:return}}catch(p){c={value:p,[throwMarker]:0}}Promise.resolve(c).catch(p=>({value:p,[throwMarker]:0})).then(p=>{const[m,y]=toWireValue(p);e.postMessage(Object.assign(Object.assign({},m),{id:l}),y),d==="RELEASE"&&(e.removeEventListener("message",t),closeEndPoint(e))})}),e.start&&e.start()}function isMessagePort(n){return n.constructor.name==="MessagePort"}function closeEndPoint(n){isMessagePort(n)&&n.close()}function wrap(n,e){return createProxy(n,[],e)}function throwIfProxyReleased(n){if(n)throw new Error("Proxy has been released and is not useable")}function createProxy(n,e=[],t=function(){}){let o=!1;const l=new Proxy(t,{get(d,u){if(throwIfProxyReleased(o),u===releaseProxy)return()=>requestResponseMessage(n,{type:"RELEASE",path:e.map(a=>a.toString())}).then(()=>{closeEndPoint(n),o=!0});if(u==="then"){if(e.length===0)return{then:()=>l};const a=requestResponseMessage(n,{type:"GET",path:e.map(c=>c.toString())}).then(fromWireValue);return a.then.bind(a)}return createProxy(n,[...e,u])},set(d,u,a){throwIfProxyReleased(o);const[c,p]=toWireValue(a);return requestResponseMessage(n,{type:"SET",path:[...e,u].map(m=>m.toString()),value:c},p).then(fromWireValue)},apply(d,u,a){throwIfProxyReleased(o);const c=e[e.length-1];if(c===createEndpoint)return requestResponseMessage(n,{type:"ENDPOINT"}).then(fromWireValue);if(c==="bind")return createProxy(n,e.slice(0,-1));const[p,m]=processArguments(a);return requestResponseMessage(n,{type:"APPLY",path:e.map(y=>y.toString()),argumentList:p},m).then(fromWireValue)},construct(d,u){throwIfProxyReleased(o);const[a,c]=processArguments(u);return requestResponseMessage(n,{type:"CONSTRUCT",path:e.map(p=>p.toString()),argumentList:a},c).then(fromWireValue)}});return l}function myFlat(n){return Array.prototype.concat.apply([],n)}function processArguments(n){const e=n.map(toWireValue);return[e.map(t=>t[0]),myFlat(e.map(t=>t[1]))]}const transferCache=new WeakMap;function transfer(n,e){return transferCache.set(n,e),n}function proxy(n){return Object.assign(n,{[proxyMarker]:!0})}function toWireValue(n){for(const[e,t]of transferHandlers)if(t.canHandle(n)){const[o,l]=t.serialize(n);return[{type:"HANDLER",name:e,value:o},l]}return[{type:"RAW",value:n},transferCache.get(n)||[]]}function fromWireValue(n){switch(n.type){case"HANDLER":return transferHandlers.get(n.name).deserialize(n.value);case"RAW":return n.value}}function requestResponseMessage(n,e,t){return new Promise(o=>{const l=generateUUID();n.addEventListener("message",function d(u){!u.data||!u.data.id||u.data.id!==l||(n.removeEventListener("message",d),o(u.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:l},e),t)})}function generateUUID(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const DEPENDS_ON="http://dat-ecosystem.org#dependson",OWNS="http://dat-ecosystem.org#owns";function fromPairs(n){for(var e=-1,t=n==null?0:n.length,o={};++e<t;){var l=n[e];o[l[0]]=l[1]}return o}const backend=new MemoryLevel_1,df=new rdfDataFactory.DataFactory,store=new Quadstore({backend,dataFactory:df}),engine=new __quadstore_comunica_exports__Engine(store);async function buildGraph(n){const{valueNetworkData:e,projectsData:t,organizationsData:o}=n,l=Object.entries(e).flatMap(([c,{dependents:p,dependencies:m,owner:y}])=>[y&&c&&df.quad(df.namedNode(y),df.literal(OWNS),df.namedNode(c),df.defaultGraph()),...(p||[]).filter(h=>h).map(h=>df.quad(df.namedNode(h),df.namedNode(DEPENDS_ON),df.namedNode(c),df.defaultGraph())),...(m||[]).filter(h=>h).map(h=>df.quad(df.namedNode(c),df.namedNode(DEPENDS_ON),df.namedNode(h),df.defaultGraph()))]).filter(c=>c),d=[...Object.entries(o).flatMap(([c,p])=>Object.entries(p).flatMap(([m,y])=>y&&df.quad(df.namedNode(c),df.namedNode(m),df.literal(y))).filter(m=>m))],u=[...Object.entries(t).flatMap(([c,p])=>Object.entries(p).flatMap(([m,y])=>y&&df.quad(df.namedNode(c),df.namedNode(m),df.literal(y))).filter(m=>m))],a=[...l,...d,...u];await store.open(),await store.multiPut(a),console.log("inserted",a.length,"entries")}const getProps=n=>(e=>fromPairs([e].flat().map(t=>[t,n.get(t)]))).bind(n),doQuery=async(n,e,t,o)=>{await engine.queryBindings(n).then(l=>{e&&l.on("data",d=>e(d,proxy(getProps(d)))),t&&l.on("end",d=>t(d,d&&proxy(d.get.bind(d)))),o&&l.on("error",d=>o(d,d&&proxy(d.get.bind(d))))})};expose({buildGraph,doQuery});export{commonjsGlobal as c};
