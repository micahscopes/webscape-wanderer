const lt=Symbol("Comlink.proxy"),Dt=Symbol("Comlink.endpoint"),kt=Symbol("Comlink.releaseProxy"),Ve=Symbol("Comlink.thrown"),ht=e=>typeof e=="object"&&e!==null||typeof e=="function",Nt={canHandle:e=>ht(e)&&e[lt],serialize(e){const{port1:r,port2:n}=new MessageChannel;return We(e,r),[n,[n]]},deserialize(e){return e.start(),Yt(e)}},_t={canHandle:e=>ht(e)&&Ve in e,serialize({value:e}){let r;return e instanceof Error?r={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:r={isError:!1,value:e},[r,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},pt=new Map([["proxy",Nt],["throw",_t]]);function We(e,r=self){r.addEventListener("message",function n(t){if(!t||!t.data)return;const{id:s,type:i,path:u}=Object.assign({path:[]},t.data),l=(t.data.argumentList||[]).map(oe);let v;try{const C=u.slice(0,-1).reduce((f,c)=>f[c],e),O=u.reduce((f,c)=>f[c],e);switch(i){case"GET":v=O;break;case"SET":C[u.slice(-1)[0]]=oe(t.data.value),v=!0;break;case"APPLY":v=O.apply(C,l);break;case"CONSTRUCT":{const f=new O(...l);v=Lt(f)}break;case"ENDPOINT":{const{port1:f,port2:c}=new MessageChannel;We(e,c),v=ne(f,[f])}break;case"RELEASE":v=void 0;break;default:return}}catch(C){v={value:C,[Ve]:0}}Promise.resolve(v).catch(C=>({value:C,[Ve]:0})).then(C=>{const[O,f]=Ze(C);r.postMessage(Object.assign(Object.assign({},O),{id:s}),f),i==="RELEASE"&&(r.removeEventListener("message",n),mt(r))})}),r.start&&r.start()}function Vt(e){return e.constructor.name==="MessagePort"}function mt(e){Vt(e)&&e.close()}function Yt(e,r){return Ye(e,[],r)}function Ee(e){if(e)throw new Error("Proxy has been released and is not useable")}function Ye(e,r=[],n=function(){}){let t=!1;const s=new Proxy(n,{get(i,u){if(Ee(t),u===kt)return()=>fe(e,{type:"RELEASE",path:r.map(l=>l.toString())}).then(()=>{mt(e),t=!0});if(u==="then"){if(r.length===0)return{then:()=>s};const l=fe(e,{type:"GET",path:r.map(v=>v.toString())}).then(oe);return l.then.bind(l)}return Ye(e,[...r,u])},set(i,u,l){Ee(t);const[v,C]=Ze(l);return fe(e,{type:"SET",path:[...r,u].map(O=>O.toString()),value:v},C).then(oe)},apply(i,u,l){Ee(t);const v=r[r.length-1];if(v===Dt)return fe(e,{type:"ENDPOINT"}).then(oe);if(v==="bind")return Ye(e,r.slice(0,-1));const[C,O]=Je(l);return fe(e,{type:"APPLY",path:r.map(f=>f.toString()),argumentList:C},O).then(oe)},construct(i,u){Ee(t);const[l,v]=Je(u);return fe(e,{type:"CONSTRUCT",path:r.map(C=>C.toString()),argumentList:l},v).then(oe)}});return s}function Ht(e){return Array.prototype.concat.apply([],e)}function Je(e){const r=e.map(Ze);return[r.map(n=>n[0]),Ht(r.map(n=>n[1]))]}const dt=new WeakMap;function ne(e,r){return dt.set(e,r),e}function Lt(e){return Object.assign(e,{[lt]:!0})}function Ze(e){for(const[r,n]of pt)if(n.canHandle(e)){const[t,s]=n.serialize(e);return[{type:"HANDLER",name:r,value:t},s]}return[{type:"RAW",value:e},dt.get(e)||[]]}function oe(e){switch(e.type){case"HANDLER":return pt.get(e.name).deserialize(e.value);case"RAW":return e.value}}function fe(e,r,n){return new Promise(t=>{const s=$t();e.addEventListener("message",function i(u){!u.data||!u.data.id||u.data.id!==s||(e.removeEventListener("message",i),t(u.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:s},r),n)})}function $t(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}var Ce=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ut=Xt;function Xt(e,r,n){var t=r[0],s=r[1],i=r[2],u=n[3]*t+n[7]*s+n[11]*i+n[15];return u=u||1,e[0]=(n[0]*t+n[4]*s+n[8]*i+n[12])/u,e[1]=(n[1]*t+n[5]*s+n[9]*i+n[13])/u,e[2]=(n[2]*t+n[6]*s+n[10]*i+n[14])/u,e}var Wt=Zt;function Zt(e,r,n,t){var s=n[0],i=n[2],u=r[0]-s,l=r[2]-i,v=Math.sin(t),C=Math.cos(t);return e[0]=s+l*v+u*C,e[1]=r[1],e[2]=i+l*C-u*v,e}var Bt=Gt;function Gt(e,r,n,t){var s=n[1],i=n[2],u=r[1]-s,l=r[2]-i,v=Math.sin(t),C=Math.cos(t);return e[0]=r[0],e[1]=s+u*C-l*v,e[2]=i+u*v+l*C,e}var Jt=1e-6,Qt=er,Ie=Jt;function er(e,r){var n=e[0],t=e[1],s=e[2],i=r[0],u=r[1],l=r[2];return Math.abs(n-i)<=Ie*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(t-u)<=Ie*Math.max(1,Math.abs(t),Math.abs(u))&&Math.abs(s-l)<=Ie*Math.max(1,Math.abs(s),Math.abs(l))}var tr=rr;function rr(e,r,n){return e[0]=r[0]+n[0],e[1]=r[1]+n[1],e[2]=r[2]+n[2],e}var nr=ar;function ar(e,r,n,t){return e[0]=r[0]+n[0]*t,e[1]=r[1]+n[1]*t,e[2]=r[2]+n[2]*t,e}var ir=or;function or(e,r){return e[0]=r[0],e[1]=r[1],e[2]=r[2],e}var sr=cr;function cr(e,r){var n=r[0],t=r[1],s=r[2],i=n*n+t*t+s*s;return i>0&&(i=1/Math.sqrt(i),e[0]=r[0]*i,e[1]=r[1]*i,e[2]=r[2]*i),e}var vt=ur;function ur(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}var fr=lr;function lr(e,r){var n=r[0],t=r[1],s=r[2],i=r[3],u=r[4],l=r[5],v=r[6],C=r[7],O=r[8],f=r[9],c=r[10],m=r[11],P=r[12],M=r[13],A=r[14],K=r[15],I=n*l-t*u,w=n*v-s*u,j=n*C-i*u,R=t*v-s*l,S=t*C-i*l,q=s*C-i*v,L=O*M-f*P,V=O*A-c*P,Z=O*K-m*P,z=f*A-c*M,T=f*K-m*M,h=c*K-m*A,p=I*h-w*T+j*z+R*Z-S*V+q*L;return p?(p=1/p,e[0]=(l*h-v*T+C*z)*p,e[1]=(s*T-t*h-i*z)*p,e[2]=(M*q-A*S+K*R)*p,e[3]=(c*S-f*q-m*R)*p,e[4]=(v*Z-u*h-C*V)*p,e[5]=(n*h-s*Z+i*V)*p,e[6]=(A*j-P*q-K*w)*p,e[7]=(O*q-c*j+m*w)*p,e[8]=(u*T-l*Z+C*L)*p,e[9]=(t*Z-n*T-i*L)*p,e[10]=(P*S-M*j+K*I)*p,e[11]=(f*j-O*S-m*I)*p,e[12]=(l*V-u*z-v*L)*p,e[13]=(n*z-t*V+s*L)*p,e[14]=(M*w-P*R-A*I)*p,e[15]=(O*R-f*w+c*I)*p,e):null}var hr=pr;function pr(e,r,n){var t=n[0],s=n[1],i=n[2],u,l,v,C,O,f,c,m,P,M,A,K;return r===e?(e[12]=r[0]*t+r[4]*s+r[8]*i+r[12],e[13]=r[1]*t+r[5]*s+r[9]*i+r[13],e[14]=r[2]*t+r[6]*s+r[10]*i+r[14],e[15]=r[3]*t+r[7]*s+r[11]*i+r[15]):(u=r[0],l=r[1],v=r[2],C=r[3],O=r[4],f=r[5],c=r[6],m=r[7],P=r[8],M=r[9],A=r[10],K=r[11],e[0]=u,e[1]=l,e[2]=v,e[3]=C,e[4]=O,e[5]=f,e[6]=c,e[7]=m,e[8]=P,e[9]=M,e[10]=A,e[11]=K,e[12]=u*t+O*s+P*i+r[12],e[13]=l*t+f*s+M*i+r[13],e[14]=v*t+c*s+A*i+r[14],e[15]=C*t+m*s+K*i+r[15]),e}var mr=dr;function dr(e,r,n){var t=n[0],s=n[1],i=n[2];return e[0]=r[0]*t,e[1]=r[1]*t,e[2]=r[2]*t,e[3]=r[3]*t,e[4]=r[4]*s,e[5]=r[5]*s,e[6]=r[6]*s,e[7]=r[7]*s,e[8]=r[8]*i,e[9]=r[9]*i,e[10]=r[10]*i,e[11]=r[11]*i,e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}var vr=vt,yr=gr;function gr(e,r,n,t){var s,i,u,l,v,C,O,f,c,m,P=r[0],M=r[1],A=r[2],K=t[0],I=t[1],w=t[2],j=n[0],R=n[1],S=n[2];return Math.abs(P-j)<1e-6&&Math.abs(M-R)<1e-6&&Math.abs(A-S)<1e-6?vr(e):(O=P-j,f=M-R,c=A-S,m=1/Math.sqrt(O*O+f*f+c*c),O*=m,f*=m,c*=m,s=I*c-w*f,i=w*O-K*c,u=K*f-I*O,m=Math.sqrt(s*s+i*i+u*u),m?(m=1/m,s*=m,i*=m,u*=m):(s=0,i=0,u=0),l=f*u-c*i,v=c*s-O*u,C=O*i-f*s,m=Math.sqrt(l*l+v*v+C*C),m?(m=1/m,l*=m,v*=m,C*=m):(l=0,v=0,C=0),e[0]=s,e[1]=l,e[2]=O,e[3]=0,e[4]=i,e[5]=v,e[6]=f,e[7]=0,e[8]=u,e[9]=C,e[10]=c,e[11]=0,e[12]=-(s*P+i*M+u*A),e[13]=-(l*P+v*M+C*A),e[14]=-(O*P+f*M+c*A),e[15]=1,e)}var Cr=Ar;function Ar(e,r,n,t,s){var i=1/Math.tan(r/2),u=1/(t-s);return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(s+t)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*s*t*u,e[15]=0,e}var qe=Ut,Re=Wt,Qe=Bt,et=Qt,wr=tr,je=nr,De=ir,ke=sr,xr=vt,zr=fr,tt=hr,Er=mr,Mr=yr,br=Cr,rt=Math.PI*.5-1e-4,nt=-Math.PI*.5+1e-4,yt=function(r){r=r||{};var n=!0,t={aspectRatio:r.aspectRatio?r.aspectRatio:1,zoomAboutCursor:r.zoomAboutCursor===void 0?!0:r.zoomAboutCursor,distance:r.distance===void 0?10:r.distance,phi:r.phi===void 0?0:r.phi,theta:r.theta===void 0?0:r.theta,fovY:r.fovY===void 0?Math.PI/4:r.fovY,near:r.near===void 0?.1:r.near,far:r.far===void 0?100:r.far,panDecayTime:r.panDecayTime||100,zoomDecayTime:r.zoomDecayTime||100,rotationDecayTime:r.rotationDecayTime||100,dirty:!0,up:r.up||new Float32Array([0,1,0]),center:r.center||new Float32Array(3),rotationCenter:r.rotationCenter||r.center&&r.center.slice()||new Float32Array(3),zoom:0,panX:0,panY:0,panZ:0,pitch:0,yaw:0,dTheta:0,dPhi:0,mouseX:0,mouseY:0},s=null,i={tick:function(h){if(q.zoom&&(t.zoom=q.zoom),q.dTheta&&(t.dTheta=q.dTheta),q.dPhi&&(t.dPhi=q.dPhi),q.panX&&(t.panX=q.panX),q.panY&&(t.panY=q.panY),q.panZ&&(t.panZ=q.panZ),q.yaw&&(t.yaw=q.yaw),q.pitch&&(t.pitch=q.pitch),R(q),h){var p=t.dPhi,b=t.dTheta,k=t.zoom,F=t.panX,_=t.panY,H=t.panZ,$=t.pitch,B=t.yaw;Object.assign(t,h),h.dPhi!==void 0&&(t.dPhi+=p),h.dTheta!==void 0&&(t.dTheta+=b),h.zoom!==void 0&&(t.zoom+=k),h.panX!==void 0&&(t.panX+=F),h.panY!==void 0&&(t.panY+=_),h.panZ!==void 0&&(t.panZ+=H),h.pitch!==void 0&&(t.pitch+=$),h.yaw!==void 0&&(t.yaw+=B)}P()&&A(),j()?T(t):R(t);var X=Date.now();s!==null&&S(X-s),s=X,i.state.dirty=n,n=!1,m()},taint:I,resize:w,params:t,rotate:z,pivot:Z,pan:L,zoom:V};i.state={},i.state.projection=new Float32Array(16),i.state.viewInv=new Float32Array(16),i.state.view=new Float32Array(16),i.state.width=null,i.state.height=null,i.state.eye=new Float32Array(3);var u=new Float32Array(3),l=new Float32Array(3),v=new Float32Array(3),C=new Float32Array(3),O=new Float32Array(3),f=new Float32Array(16),c={up:new Float32Array(3),center:new Float32Array(3)};m();function m(){De(c.up,t.up),De(c.center,t.center),c.near=t.near,c.far=t.far,c.distance=t.distance,c.phi=t.phi,c.theta=t.theta,c.fovY=t.fovY}function P(){return!et(t.up,c.up)||!et(t.center,c.center)||t.near!==c.near||t.far!==c.far||t.phi!==c.phi||t.theta!==c.theta||t.distance!==c.distance||t.fovY!==c.fovY}var M={};function A(){M.dPhi=t.phi-c.phi,M.dTheta=t.theta-c.theta,M.zoom=t.distance/c.distance-1,t.theta=c.theta,t.distance=c.distance,t.phi=c.phi,M.yaw=0,M.pitch=0,M.panX=0,M.panY=0,M.panZ=0,M.mouseX=0,M.mouseY=0,T(M)}function K(){i.state.eye[0]=0,i.state.eye[1]=0,i.state.eye[2]=t.distance,Qe(i.state.eye,i.state.eye,O,-t.phi),Re(i.state.eye,i.state.eye,O,t.theta),wr(i.state.eye,i.state.eye,t.center),Mr(i.state.view,i.state.eye,t.center,t.up),br(i.state.projection,t.fovY,i.params.aspectRatio,t.near,t.far),zr(i.state.viewInv,i.state.view)}function I(){n=!0}function w(h){i.params.aspectRatio=h,K(),I()}function j(){if(Math.abs(t.zoom)>1e-4||Math.abs(t.panX)>1e-4||Math.abs(t.panY)>1e-4||Math.abs(t.panZ)>1e-4||Math.abs(t.dTheta)>1e-4||Math.abs(t.dPhi)>1e-4||Math.abs(t.yaw)>1e-4||Math.abs(t.pitch)>1e-4)return!0}function R(h){h.zoom=0,h.dTheta=0,h.dPhi=0,h.panX=0,h.panY=0,h.panZ=0,h.yaw=0,h.pitch=0}function S(h){var p=t.panDecayTime?Math.exp(-h/t.panDecayTime/Math.LN2):0,b=t.zoomDecayTime?Math.exp(-h/t.zoomDecayTime/Math.LN2):0,k=t.rotationDecayTime?Math.exp(-h/t.rotationDecayTime/Math.LN2):0;t.zoom*=b,t.panX*=p,t.panY*=p,t.panZ*=p,t.dTheta*=k,t.dPhi*=k,t.yaw*=k,t.pitch*=k}var q={};R(q);function L(h,p){var b=i.params.distance*Math.tan(i.params.fovY*.5)*2;return q.panX+=h*t.aspectRatio*b,q.panY+=p*b,i}function V(h,p,b){return q.zoom+=b,t.mouseX=h,t.mouseY=p,i}function Z(h,p){var b=i.params.fovY;q.yaw+=h*b*t.aspectRatio,q.pitch+=p*b}function z(h,p){q.dTheta+=h,q.dPhi+=p}function T(h){var p;xr(f),t.zoomAboutCursor&&(p=t.distance*Math.tan(t.fovY*.5),u[0]=h.mouseX*t.aspectRatio*p,u[1]=h.mouseY*p,u[2]=0,tt(f,f,u)),u[0]=1+h.zoom,u[1]=1+h.zoom,u[2]=1,Er(f,f,u),t.zoomAboutCursor&&(p=t.distance*Math.tan(t.fovY*.5),u[0]=-h.mouseX*t.aspectRatio*p,u[1]=-h.mouseY*p,u[2]=0,tt(f,f,u)),f[12]-=h.panX*.5,f[13]-=h.panY*.5,qe(t.center,t.center,i.state.view),qe(t.center,t.center,f),qe(t.center,t.center,i.state.viewInv),t.rotateAboutCenter&&De(t.rotationCenter,t.center),t.distance*=1+h.zoom;var b=t.phi;t.phi+=h.dPhi,t.phi=Math.min(rt,Math.max(nt,t.phi));var k=t.phi-b,F=t.theta;t.theta+=h.dTheta;var _=t.theta-F;if(Re(t.center,t.center,t.rotationCenter,_-t.theta),Qe(t.center,t.center,t.rotationCenter,-k),Re(t.center,t.center,t.rotationCenter,t.theta),h.yaw!==0||h.pitch!==0){v[0]=i.state.view[0],v[1]=i.state.view[4],v[2]=i.state.view[8],ke(v,v),l[0]=i.state.view[1],l[1]=i.state.view[5],l[2]=i.state.view[9],ke(l,l),C[0]=i.state.view[2],C[1]=i.state.view[6],C[2]=i.state.view[10],ke(C,C);var H=Math.min(rt,Math.max(nt,t.phi+h.pitch*.5)),$=H-t.phi;je(t.center,t.center,v,-Math.sin(h.yaw*.5)*t.distance),je(t.center,t.center,l,-Math.sin($)*t.distance),je(t.center,t.center,C,(2-Math.cos(h.yaw*.5)-Math.cos($))*t.distance),t.phi=H,t.theta+=h.yaw*.5}K(),I()}return w(i.params.aspectRatio),i},He={},Sr={get exports(){return He},set exports(e){He=e}},Se={},Tr={get exports(){return Se},set exports(e){Se=e}},at;function Or(){return at||(at=1,function(e,r){(function(n,t){e.exports=t()})(Ce,function(){var n={isEqual:!0,isMatchingKey:!0,isPromise:!0,maxSize:!0,onCacheAdd:!0,onCacheChange:!0,onCacheHit:!0,transformKey:!0},t=Array.prototype.slice;function s(f){var c=f.length;return c?c===1?[f[0]]:c===2?[f[0],f[1]]:c===3?[f[0],f[1],f[2]]:t.call(f,0):[]}function i(f){var c={};for(var m in f)n[m]||(c[m]=f[m]);return c}function u(f){return typeof f=="function"&&f.isMemoized}function l(f,c){return f===c||f!==f&&c!==c}function v(f,c){var m={};for(var P in f)m[P]=f[P];for(var P in c)m[P]=c[P];return m}var C=function(){function f(c){this.keys=[],this.values=[],this.options=c;var m=typeof c.isMatchingKey=="function";m?this.getKeyIndex=this._getKeyIndexFromMatchingKey:c.maxSize>1?this.getKeyIndex=this._getKeyIndexForMany:this.getKeyIndex=this._getKeyIndexForSingle,this.canTransformKey=typeof c.transformKey=="function",this.shouldCloneArguments=this.canTransformKey||m,this.shouldUpdateOnAdd=typeof c.onCacheAdd=="function",this.shouldUpdateOnChange=typeof c.onCacheChange=="function",this.shouldUpdateOnHit=typeof c.onCacheHit=="function"}return Object.defineProperty(f.prototype,"size",{get:function(){return this.keys.length},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"snapshot",{get:function(){return{keys:s(this.keys),size:this.size,values:s(this.values)}},enumerable:!1,configurable:!0}),f.prototype._getKeyIndexFromMatchingKey=function(c){var m=this.options,P=m.isMatchingKey,M=m.maxSize,A=this.keys,K=A.length;if(!K)return-1;if(P(A[0],c))return 0;if(M>1){for(var I=1;I<K;I++)if(P(A[I],c))return I}return-1},f.prototype._getKeyIndexForMany=function(c){var m=this.options.isEqual,P=this.keys,M=P.length;if(!M)return-1;if(M===1)return this._getKeyIndexForSingle(c);var A=c.length,K,I;if(A>1){for(var w=0;w<M;w++)if(K=P[w],K.length===A){for(I=0;I<A&&m(K[I],c[I]);I++);if(I===A)return w}}else for(var w=0;w<M;w++)if(K=P[w],K.length===A&&m(K[0],c[0]))return w;return-1},f.prototype._getKeyIndexForSingle=function(c){var m=this.keys;if(!m.length)return-1;var P=m[0],M=P.length;if(c.length!==M)return-1;var A=this.options.isEqual;if(M>1){for(var K=0;K<M;K++)if(!A(P[K],c[K]))return-1;return 0}return A(P[0],c[0])?0:-1},f.prototype.orderByLru=function(c,m,P){for(var M=this.keys,A=this.values,K=M.length,I=P;I--;)M[I+1]=M[I],A[I+1]=A[I];M[0]=c,A[0]=m;var w=this.options.maxSize;K===w&&P===K?(M.pop(),A.pop()):P>=w&&(M.length=A.length=w)},f.prototype.updateAsyncCache=function(c){var m=this,P=this.options,M=P.onCacheChange,A=P.onCacheHit,K=this.keys[0],I=this.values[0];this.values[0]=I.then(function(w){return m.shouldUpdateOnHit&&A(m,m.options,c),m.shouldUpdateOnChange&&M(m,m.options,c),w},function(w){var j=m.getKeyIndex(K);throw j!==-1&&(m.keys.splice(j,1),m.values.splice(j,1)),w})},f}();function O(f,c){if(c===void 0&&(c={}),u(f))return O(f.fn,v(f.options,c));if(typeof f!="function")throw new TypeError("You must pass a function to `memoize`.");var m=c.isEqual,P=m===void 0?l:m,M=c.isMatchingKey,A=c.isPromise,K=A===void 0?!1:A,I=c.maxSize,w=I===void 0?1:I,j=c.onCacheAdd,R=c.onCacheChange,S=c.onCacheHit,q=c.transformKey,L=v({isEqual:P,isMatchingKey:M,isPromise:K,maxSize:w,onCacheAdd:j,onCacheChange:R,onCacheHit:S,transformKey:q},i(c)),V=new C(L),Z=V.keys,z=V.values,T=V.canTransformKey,h=V.shouldCloneArguments,p=V.shouldUpdateOnAdd,b=V.shouldUpdateOnChange,k=V.shouldUpdateOnHit,F=function(){var _=h?s(arguments):arguments;T&&(_=q(_));var H=Z.length?V.getKeyIndex(_):-1;if(H!==-1)k&&S(V,L,F),H&&(V.orderByLru(Z[H],z[H],H),b&&R(V,L,F));else{var $=f.apply(this,arguments),B=h?_:s(arguments);V.orderByLru(B,$,Z.length),K&&V.updateAsyncCache(F),p&&j(V,L,F),b&&R(V,L,F)}return z[0]};return F.cache=V,F.fn=f,F.isMemoized=!0,F.options=L,F}return O})}(Tr)),Se}var ve={},Pr={get exports(){return ve},set exports(e){ve=e}},it;function Fr(){return it||(it=1,function(e,r){(function(n,t){t(r)})(Ce,function(n){var t=typeof WeakMap=="function",s=Object.keys;function i(z,T){return z===T||z!==z&&T!==T}function u(z){return z.constructor===Object||z.constructor==null}function l(z){return!!z&&typeof z.then=="function"}function v(z){return!!(z&&z.$$typeof)}function C(){var z=[];return{delete:function(T){for(var h=0;h<z.length;++h)if(z[h][0]===T){z.splice(h,1);return}},get:function(T){for(var h=0;h<z.length;++h)if(z[h][0]===T)return z[h][1]},set:function(T,h){for(var p=0;p<z.length;++p)if(z[p][0]===T){z[p][1]=h;return}z.push([T,h])}}}var O=function(z){return z?function(){return new WeakMap}:C}(t);function f(z){return function(h){var p=z||h;return function(k,F,_,H,$,B,X){X===void 0&&(X=O());var ae=!!k&&typeof k=="object",Ae=!!F&&typeof F=="object";if(ae!==Ae)return!1;if(!ae&&!Ae)return p(k,F,X);var we=X.get(k);if(we&&X.get(F))return we===F;X.set(k,F),X.set(F,k);var Pe=p(k,F,X);return X.delete(k),X.delete(F),Pe}}}function c(z,T,h,p){var b=z.length;if(T.length!==b)return!1;for(;b-- >0;)if(!h(z[b],T[b],b,b,z,T,p))return!1;return!0}function m(z,T,h,p){var b=z.size===T.size;if(b&&z.size){var k={},F=0;z.forEach(function(_,H){if(b){var $=!1,B=0;T.forEach(function(X,ae){!$&&!k[B]&&($=h(H,ae,F,B,z,T,p)&&h(_,X,H,ae,z,T,p),$&&(k[B]=!0)),B++}),F++,b=$}})}return b}var P="_owner",M=Function.prototype.bind.call(Function.prototype.call,Object.prototype.hasOwnProperty);function A(z,T,h,p){var b=s(z),k=b.length;if(s(T).length!==k)return!1;if(k)for(var F=void 0;k-- >0;){if(F=b[k],F===P){var _=v(z),H=v(T);if((_||H)&&_!==H)return!1}if(!M(T,F)||!h(z[F],T[F],F,F,z,T,p))return!1}return!0}var K=function(){return/foo/g.flags==="g"?function(T,h){return T.source===h.source&&T.flags===h.flags}:function(T,h){return T.source===h.source&&T.global===h.global&&T.ignoreCase===h.ignoreCase&&T.multiline===h.multiline&&T.unicode===h.unicode&&T.sticky===h.sticky&&T.lastIndex===h.lastIndex}}();function I(z,T,h,p){var b=z.size===T.size;if(b&&z.size){var k={};z.forEach(function(F,_){if(b){var H=!1,$=0;T.forEach(function(B,X){!H&&!k[$]&&(H=h(F,B,_,X,z,T,p),H&&(k[$]=!0)),$++}),b=H}})}return b}var w=typeof Map=="function",j=typeof Set=="function",R=Object.prototype.valueOf;function S(z){var T=typeof z=="function"?z(h):function(p,b,k,F,_,H,$){return h(p,b,$)};function h(p,b,k){if(p===b)return!0;if(p&&b&&typeof p=="object"&&typeof b=="object"){if(u(p)&&u(b))return A(p,b,T,k);var F=Array.isArray(p),_=Array.isArray(b);return F||_?F===_&&c(p,b,T,k):(F=p instanceof Date,_=b instanceof Date,F||_?F===_&&i(p.getTime(),b.getTime()):(F=p instanceof RegExp,_=b instanceof RegExp,F||_?F===_&&K(p,b):l(p)||l(b)?p===b:w&&(F=p instanceof Map,_=b instanceof Map,F||_)?F===_&&m(p,b,T,k):j&&(F=p instanceof Set,_=b instanceof Set,F||_)?F===_&&I(p,b,T,k):p.valueOf!==R||b.valueOf!==R?i(p.valueOf(),b.valueOf()):A(p,b,T,k)))}return p!==p&&b!==b}return h}var q=S(),L=S(function(){return i}),V=S(f()),Z=S(f(i));n.circularDeepEqual=V,n.circularShallowEqual=Z,n.createCustomEqual=S,n.deepEqual=q,n.sameValueZeroEqual=i,n.shallowEqual=L,Object.defineProperty(n,"__esModule",{value:!0})})}(Pr,ve)),ve}(function(e,r){(function(n,t){e.exports=t(Or(),Fr())})(Ce,function(n,t){function s(){return s=Object.assign?Object.assign.bind():function(a){for(var o=1;o<arguments.length;o++){var g=arguments[o];for(var d in g)Object.prototype.hasOwnProperty.call(g,d)&&(a[d]=g[d])}return a},s.apply(this,arguments)}function i(a,o){if(a==null)return{};var g={},d=Object.keys(a),x,y;for(y=0;y<d.length;y++)x=d[y],!(o.indexOf(x)>=0)&&(g[x]=a[x]);return g}var u={isDeepEqual:!1,isPromise:!1,isReact:!1,isSerialized:!1,isShallowEqual:!1,matchesArg:void 0,matchesKey:void 0,maxAge:void 0,maxArgs:void 0,maxSize:1,onExpire:void 0,profileName:void 0,serializer:void 0,updateCacheForKey:void 0,transformArgs:void 0,updateExpire:!1};function l(){for(var a=arguments.length,o=new Array(a),g=0;g<a;g++)o[g]=arguments[g];return o.reduce(function(d,x){if(typeof d=="function")return typeof x=="function"?function(){d.apply(this,arguments),x.apply(this,arguments)}:d;if(typeof x=="function")return x})}function v(){for(var a=arguments.length,o=new Array(a),g=0;g<a;g++)o[g]=arguments[g];return o.reduce(function(d,x){if(typeof d=="function")return typeof x=="function"?function(){return d(x.apply(this,arguments))}:d;if(typeof x=="function")return x})}function C(a,o){for(var g=0;g<a.length;g++)if(a[g].key===o)return g;return-1}function O(a,o){var g=typeof o=="function"?o:function(d,x){for(var y=0;y<x.length;y++)if(!a(d[y],x[y]))return!1;return!0};return function(d,x){for(var y=0;y<d.length;y++)if(d[y].length===x.length&&g(d[y],x))return y;return-1}}function f(a,o){return!o||o===u?a:s({},a,o,{onCacheAdd:l(a.onCacheAdd,o.onCacheAdd),onCacheChange:l(a.onCacheChange,o.onCacheChange),onCacheHit:l(a.onCacheHit,o.onCacheHit),transformArgs:v(a.transformArgs,o.transformArgs)})}function c(a){return typeof a=="function"&&a.isMoized}function m(a,o,g){try{var d=g||o||"anonymous";Object.defineProperty(a,"name",{configurable:!0,enumerable:!1,value:"moized("+d+")",writable:!0})}catch{}}function P(a,o,g){var d=C(a,o);d!==-1&&(clearTimeout(a[d].timeoutId),g&&a.splice(d,1))}function M(a,o){var g=setTimeout(a,o);return typeof g.unref=="function"&&g.unref(),g}function A(a,o,g,d){var x=o.maxAge;return function y(E,N,U){var Y=E.keys[0];if(C(a,Y)===-1){var W=function(){var Q=O(g,d),ee=Q(E.keys,Y),ce=E.values[ee];~ee&&(E.keys.splice(ee,1),E.values.splice(ee,1),typeof o.onCacheChange=="function"&&o.onCacheChange(E,N,U)),P(a,Y,!0),typeof o.onExpire=="function"&&o.onExpire(Y)===!1&&(E.keys.unshift(Y),E.values.unshift(ce),y(E,N,U),typeof o.onCacheChange=="function"&&o.onCacheChange(E,N,U))};a.push({expirationMethod:W,key:Y,timeoutId:M(W,x)})}}}function K(a,o){return function(d){var x=d.keys[0],y=C(a,x);~y&&(P(a,x,!1),a[y].timeoutId=M(a[y].expirationMethod,o.maxAge))}}function I(a,o,g,d){var x=typeof o.maxAge=="number"&&isFinite(o.maxAge)?A(a,o,g,d):void 0;return{onCacheAdd:x,onCacheHit:x&&o.updateExpire?K(a,o):void 0}}var w={anonymousProfileNameCounter:1,isCollectingStats:!1,profiles:{}},j=!1;function R(a){a?delete w.profiles[a]:w.profiles={}}function S(a){a===void 0&&(a=!0),w.isCollectingStats=a}function q(a){var o=a.profileName;return function(){o&&!w.profiles[o]&&(w.profiles[o]={calls:0,hits:0}),w.profiles[o].calls++}}function L(a){return function(){var o=w.profiles,g=a.profileName;o[g]||(o[g]={calls:0,hits:0}),o[g].calls++,o[g].hits++}}function V(a){return a.displayName||a.name||"Anonymous "+w.anonymousProfileNameCounter++}function Z(a,o){return a?(o/a*100).toFixed(4)+"%":"0.0000%"}function z(a){!w.isCollectingStats&&!j&&(console.warn('Stats are not currently being collected, please run "collectStats" to enable them.'),j=!0);var o=w.profiles;if(a){if(!o[a])return{calls:0,hits:0,usage:"0.0000%"};var g=o[a];return s({},g,{usage:Z(g.calls,g.hits)})}var d=Object.keys(w.profiles).reduce(function(x,y){return x.calls+=o[y].calls,x.hits+=o[y].hits,x},{calls:0,hits:0});return s({},d,{profiles:Object.keys(o).reduce(function(x,y){return x[y]=z(y),x},{}),usage:Z(d.calls,d.hits)})}function T(a){return w.isCollectingStats?{onCacheAdd:q(a),onCacheHit:L(a)}:{}}var h={arguments:!0,callee:!0,caller:!0,constructor:!0,length:!0,name:!0,prototype:!0};function p(a,o,g){g===void 0&&(g=[]),Object.getOwnPropertyNames(a).forEach(function(d){if(!h[d]&&g.indexOf(d)===-1){var x=Object.getOwnPropertyDescriptor(a,d);x.get||x.set?Object.defineProperty(o,d,x):o[d]=a[d]}})}function b(a,o){var g=o.expirations,d=a.options,x=O(d.isEqual,d.isMatchingKey),y=a;y.clear=function(){var E=y._microMemoizeOptions.onCacheChange,N=y.cache;return N.keys.length=0,N.values.length=0,E&&E(N,y.options,y),!0},y.clearStats=function(){R(y.options.profileName)},y.get=function(E){var N=y._microMemoizeOptions.transformKey,U=y.cache,Y=N?N(E):E,W=x(U.keys,Y);return W!==-1?y.apply(this,E):void 0},y.getStats=function(){return z(y.options.profileName)},y.has=function(E){var N=y._microMemoizeOptions.transformKey,U=N?N(E):E;return x(y.cache.keys,U)!==-1},y.keys=function(){return y.cacheSnapshot.keys},y.remove=function(E){var N=y._microMemoizeOptions,U=N.onCacheChange,Y=N.transformKey,W=y.cache,J=x(W.keys,Y?Y(E):E);if(J===-1)return!1;var Q=W.keys[J];return W.keys.splice(J,1),W.values.splice(J,1),U&&U(W,y.options,y),P(g,Q,!0),!0},y.set=function(E,N){var U=y._microMemoizeOptions,Y=y.cache,W=y.options,J=U.onCacheAdd,Q=U.onCacheChange,ee=U.transformKey,ce=ee?ee(E):E,re=x(Y.keys,ce);if(re===-1){var ue=W.maxSize-1;Y.size>ue&&(Y.keys.length=ue,Y.values.length=ue),Y.keys.unshift(ce),Y.values.unshift(N),W.isPromise&&Y.updateAsyncCache(y),J&&J(Y,W,y),Q&&Q(Y,W,y)}else{var xe=Y.keys[re];Y.values[re]=N,re>0&&Y.orderByLru(xe,N,re),W.isPromise&&Y.updateAsyncCache(y),typeof Q=="function"&&Q(Y,W,y)}},y.values=function(){return y.cacheSnapshot.values}}function k(a,o){var g=o.expirations,d=o.options,x=o.originalFunction,y=a.options;Object.defineProperties(a,{_microMemoizeOptions:{configurable:!0,get:function(){return y}},cacheSnapshot:{configurable:!0,get:function(){var U=a.cache;return{keys:U.keys.slice(0),size:U.size,values:U.values.slice(0)}}},expirations:{configurable:!0,get:function(){return g}},expirationsSnapshot:{configurable:!0,get:function(){return g.slice(0)}},isMoized:{configurable:!0,get:function(){return!0}},options:{configurable:!0,get:function(){return d}},originalFunction:{configurable:!0,get:function(){return x}}});var E=a;p(x,E)}function F(a,o){return b(a,o),k(a,o),a}var _=typeof Symbol=="function"&&Symbol.for?Symbol.for("react.element"):60103;function H(a,o,g){var d=a(s({maxArgs:2,isShallowEqual:!0},g,{isReact:!1}));o.displayName||(o.displayName=o.name||"Component");function x(y,E,N){this.props=y,this.context=E,this.updater=N,this.MoizedComponent=d(o)}return x.prototype.isReactComponent={},x.prototype.render=function(){return{$$typeof:_,type:this.MoizedComponent,props:this.props,ref:null,key:null,_owner:null}},p(o,x,["contextType","contextTypes"]),x.displayName="Moized("+(o.displayName||o.name||"Component")+")",m(x,o.name,g.profileName),x}function $(a){return function(o){if(a>=o.length)return o;if(a===0)return[];if(a===1)return[o[0]];if(a===2)return[o[0],o[1]];if(a===3)return[o[0],o[1],o[2]];for(var g=[],d=0;d<a;d++)g[d]=o[d];return g}}function B(a,o){for(var g=a.length,d=0;d<g;++d)if(a[d]===o)return d+1;return 0}function X(){var a=[],o=[];return function(d,x){var y=typeof x;if(y==="function"||y==="symbol")return x.toString();if(typeof x=="object"){if(a.length){var E=B(a,this);E===0?a[a.length]=this:(a.splice(E),o.splice(E)),o[o.length]=d;var N=B(a,x);if(N!==0)return"[ref="+(o.slice(0,N).join(".")||".")+"]"}else a[0]=x,o[0]=d;return x}return""+x}}function ae(a){var o=typeof a;return a&&(o==="object"||o==="function")?JSON.stringify(a,X()):a}function Ae(a){for(var o="|",g=0;g<a.length;g++)o+=ae(a[g])+"|";return[o]}function we(a){return typeof a.serializer=="function"?a.serializer:Ae}function Pe(a,o){return a[0]===o[0]}function Fe(a){if(typeof a=="function")return function(o,g,d){return a(d.cache,d.options,d)}}function Mt(a){return a.matchesArg||a.isDeepEqual&&t.deepEqual||a.isShallowEqual&&t.shallowEqual||t.sameValueZeroEqual}function bt(a){return a.matchesKey||a.isSerialized&&Pe||void 0}function St(a){return v(a.isSerialized&&we(a),typeof a.transformArgs=="function"&&a.transformArgs,typeof a.maxArgs=="number"&&$(a.maxArgs))}function Tt(a){var o=a.options.updateCacheForKey,g=function(){for(var x=arguments.length,y=new Array(x),E=0;E<x;E++)y[E]=arguments[E];if(!o(y))return a.apply(this,y);var N=a.fn.apply(this,y);return a.set(y,N),N};return p(a,g),g}var Ot=["matchesArg","isDeepEqual","isPromise","isReact","isSerialized","isShallowEqual","matchesKey","maxAge","maxArgs","maxSize","onCacheAdd","onCacheChange","onCacheHit","onExpire","profileName","serializer","updateCacheForKey","transformArgs","updateExpire"],D=function a(o,g){var d=g||u;if(c(o)){var x=o.originalFunction,y=f(o.options,d);return a(x,y)}if(typeof o=="object")return function(Ke,qt){if(typeof Ke=="function"){var Rt=f(o,qt);return a(Ke,Rt)}var jt=f(o,Ke);return a(jt)};if(d.isReact)return H(a,o,d);var E=s({},u,d,{maxAge:typeof d.maxAge=="number"&&d.maxAge>=0?d.maxAge:u.maxAge,maxArgs:typeof d.maxArgs=="number"&&d.maxArgs>=0?d.maxArgs:u.maxArgs,maxSize:typeof d.maxSize=="number"&&d.maxSize>=0?d.maxSize:u.maxSize,profileName:d.profileName||V(o)}),N=[];E.matchesArg,E.isDeepEqual;var U=E.isPromise;E.isReact,E.isSerialized,E.isShallowEqual,E.matchesKey,E.maxAge,E.maxArgs;var Y=E.maxSize,W=E.onCacheAdd,J=E.onCacheChange,Q=E.onCacheHit;E.onExpire,E.profileName,E.serializer;var ee=E.updateCacheForKey;E.transformArgs,E.updateExpire;var ce=i(E,Ot),re=Mt(E),ue=bt(E),xe=I(N,E,re,ue),Ge=T(E),Ft=St(E),Kt=s({},ce,{isEqual:re,isMatchingKey:ue,isPromise:U,maxSize:Y,onCacheAdd:Fe(l(W,xe.onCacheAdd,Ge.onCacheAdd)),onCacheChange:Fe(J),onCacheHit:Fe(l(Q,xe.onCacheHit,Ge.onCacheHit)),transformKey:Ft}),It=n(o,Kt),ze=F(It,{expirations:N,options:E,originalFunction:o});return ee&&(ze=Tt(ze)),m(ze,o.name,d.profileName),ze};D.clearStats=R,D.collectStats=S,D.compose=function(){return v.apply(void 0,arguments)||D},D.deep=D({isDeepEqual:!0}),D.getStats=z,D.infinite=D({maxSize:1/0}),D.isCollectingStats=function(){return w.isCollectingStats},D.isMoized=function(o){return typeof o=="function"&&!!o.isMoized},D.matchesArg=function(a){return D({matchesArg:a})},D.matchesKey=function(a){return D({matchesKey:a})};function Pt(a,o){if(o===!0)return D({maxAge:a,updateExpire:o});if(typeof o=="object"){var g=o.onExpire,d=o.updateExpire;return D({maxAge:a,onExpire:g,updateExpire:d})}return D(typeof o=="function"?{maxAge:a,onExpire:o,updateExpire:!0}:{maxAge:a})}return D.maxAge=Pt,D.maxArgs=function(a){return D({maxArgs:a})},D.maxSize=function(a){return D({maxSize:a})},D.profile=function(a){return D({profileName:a})},D.promise=D({isPromise:!0,updateExpire:!0}),D.react=D({isReact:!0}),D.serialize=D({isSerialized:!0}),D.serializeWith=function(a){return D({isSerialized:!0,serializer:a})},D.shallow=D({isShallowEqual:!0}),D.transformArgs=function(a){return D({transformArgs:a})},D.updateCacheForKey=function(a){return D({updateCacheForKey:a})},Object.defineProperty(D,"default",{configurable:!1,enumerable:!1,value:D,writable:!1}),D})})(Sr);var gt=He,he=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,r=arguments.length;r--;)e+=arguments[r]*arguments[r];return Math.sqrt(e)});function Kr(){var e=new he(16);return he!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function ot(e,r,n,t,s,i,u,l,v,C,O,f,c,m,P,M){var A=new he(16);return A[0]=e,A[1]=r,A[2]=n,A[3]=t,A[4]=s,A[5]=i,A[6]=u,A[7]=l,A[8]=v,A[9]=C,A[10]=O,A[11]=f,A[12]=c,A[13]=m,A[14]=P,A[15]=M,A}function Ir(e,r,n){var t=r[0],s=r[1],i=r[2],u=r[3],l=r[4],v=r[5],C=r[6],O=r[7],f=r[8],c=r[9],m=r[10],P=r[11],M=r[12],A=r[13],K=r[14],I=r[15],w=n[0],j=n[1],R=n[2],S=n[3];return e[0]=w*t+j*l+R*f+S*M,e[1]=w*s+j*v+R*c+S*A,e[2]=w*i+j*C+R*m+S*K,e[3]=w*u+j*O+R*P+S*I,w=n[4],j=n[5],R=n[6],S=n[7],e[4]=w*t+j*l+R*f+S*M,e[5]=w*s+j*v+R*c+S*A,e[6]=w*i+j*C+R*m+S*K,e[7]=w*u+j*O+R*P+S*I,w=n[8],j=n[9],R=n[10],S=n[11],e[8]=w*t+j*l+R*f+S*M,e[9]=w*s+j*v+R*c+S*A,e[10]=w*i+j*C+R*m+S*K,e[11]=w*u+j*O+R*P+S*I,w=n[12],j=n[13],R=n[14],S=n[15],e[12]=w*t+j*l+R*f+S*M,e[13]=w*s+j*v+R*c+S*A,e[14]=w*i+j*C+R*m+S*K,e[15]=w*u+j*O+R*P+S*I,e}function Le(){var e=new he(4);return he!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function qr(e,r,n,t){var s=new he(4);return s[0]=e,s[1]=r,s[2]=n,s[3]=t,s}function Rr(e,r,n){return e[0]=r[0]*n,e[1]=r[1]*n,e[2]=r[2]*n,e[3]=r[3]*n,e}function jr(e,r,n){var t=r[0],s=r[1],i=r[2],u=r[3];return e[0]=n[0]*t+n[4]*s+n[8]*i+n[12]*u,e[1]=n[1]*t+n[5]*s+n[9]*i+n[13]*u,e[2]=n[2]*t+n[6]*s+n[10]*i+n[14]*u,e[3]=n[3]*t+n[7]*s+n[11]*i+n[15]*u,e}(function(){var e=Le();return function(r,n,t,s,i,u){var l,v;for(n||(n=4),t||(t=0),s?v=Math.min(s*n+t,r.length):v=r.length,l=t;l<v;l+=n)e[0]=r[l],e[1]=r[l+1],e[2]=r[l+2],e[3]=r[l+3],i(e,e,u),r[l]=e[0],r[l+1]=e[1],r[l+2]=e[2],r[l+3]=e[3];return r}})();var se={},Dr={get exports(){return se},set exports(e){se=e}},$e={},Me={get exports(){return $e},set exports(e){$e=e}};(function(){var e,r,n,t,s,i;typeof performance<"u"&&performance!==null&&performance.now?Me.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(Me.exports=function(){return(e()-s)/1e6},r=process.hrtime,e=function(){var u;return u=r(),u[0]*1e9+u[1]},t=e(),i=process.uptime()*1e9,s=t-i):Date.now?(Me.exports=function(){return Date.now()-n},n=Date.now()):(Me.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(Ce);var kr=$e,te=typeof window>"u"?Ce:window,be=["moz","webkit"],le="AnimationFrame",pe=te["request"+le],ge=te["cancel"+le]||te["cancelRequest"+le];for(var me=0;!pe&&me<be.length;me++)pe=te[be[me]+"Request"+le],ge=te[be[me]+"Cancel"+le]||te[be[me]+"CancelRequest"+le];if(!pe||!ge){var Ne=0,st=0,ie=[],Nr=1e3/60;pe=function(e){if(ie.length===0){var r=kr(),n=Math.max(0,Nr-(r-Ne));Ne=n+r,setTimeout(function(){var t=ie.slice(0);ie.length=0;for(var s=0;s<t.length;s++)if(!t[s].cancelled)try{t[s].callback(Ne)}catch(i){setTimeout(function(){throw i},0)}},Math.round(n))}return ie.push({handle:++st,callback:e,cancelled:!1}),st},ge=function(e){for(var r=0;r<ie.length;r++)ie[r].handle===e&&(ie[r].cancelled=!0)}}Dr.exports=function(e){return pe.call(te,e)};se.cancel=function(){ge.apply(te,arguments)};se.polyfill=function(e){e||(e=te),e.requestAnimationFrame=pe,e.cancelAnimationFrame=ge};class Ct{constructor(r,n=15,t=15){this.target=r,this.stiffness=n,this.damping=t,this.velocity=this._initializeVelocity(r),this.animationFrameId=null,this.currentValues=this._clone(r),this.paused=!1}_initializeVelocity(r){if(typeof r=="number")return 0;if(Array.isArray(r)||ArrayBuffer.isView(r))return r.map(()=>0);{const n={};for(const t in r)n[t]=0;return n}}_clone(r){return Array.isArray(r)?[...r]:ArrayBuffer.isView(r)?r.slice():typeof r=="object"?{...r}:r}updateTarget(r){this.target=r}updateInitialValues(r){this.currentValues=this._clone(r)}_interpolateSpring(r,n,t,s,i,u){const l=n-r,v=s*l,C=-i*t,O=v+C,f=t+O*u;return{newCurrentValue:r+f*u,newVelocity:f}}step(r){if(this.paused)return this.currentValues;const n=(t,s,i)=>this._interpolateSpring(t,s,i,this.stiffness,this.damping,r);if(typeof this.target=="number"){const{newCurrentValue:t,newVelocity:s}=n(this.currentValues,this.target,this.velocity);this.currentValues=t,this.velocity=s}else if(Array.isArray(this.target)||ArrayBuffer.isView(this.target))for(let t=0;t<this.target.length;t++){const{newCurrentValue:s,newVelocity:i}=n(this.currentValues[t],this.target[t],this.velocity[t]);this.currentValues[t]=s,this.velocity[t]=i}else for(const t in this.target){const{newCurrentValue:s,newVelocity:i}=n(this.currentValues[t],this.target[t],this.velocity[t]);this.currentValues[t]=s,this.velocity[t]=i}return this.currentValues}animate(r){const n=.016666666666666666,t=()=>{const s=this.step(n);r(s),this.animationFrameId=se(t)};this.stop(),this.animationFrameId=se(t)}pause(){this.paused=!0}resume(){this.paused=!1}stop(){se.cancel(this.animationFrameId)}}var _r=typeof global=="object"&&global&&global.Object===Object&&global,Vr=_r,Yr=typeof self=="object"&&self&&self.Object===Object&&self,Hr=Vr||Yr||Function("return this")(),At=Hr,Lr=At.Symbol,Te=Lr,wt=Object.prototype,$r=wt.hasOwnProperty,Ur=wt.toString,de=Te?Te.toStringTag:void 0;function Xr(e){var r=$r.call(e,de),n=e[de];try{e[de]=void 0;var t=!0}catch{}var s=Ur.call(e);return t&&(r?e[de]=n:delete e[de]),s}var Wr=Object.prototype,Zr=Wr.toString;function Br(e){return Zr.call(e)}var Gr="[object Null]",Jr="[object Undefined]",ct=Te?Te.toStringTag:void 0;function Qr(e){return e==null?e===void 0?Jr:Gr:ct&&ct in Object(e)?Xr(e):Br(e)}function en(e){return e!=null&&typeof e=="object"}var tn="[object Symbol]";function rn(e){return typeof e=="symbol"||en(e)&&Qr(e)==tn}var nn=/\s/;function an(e){for(var r=e.length;r--&&nn.test(e.charAt(r)););return r}var on=/^\s+/;function sn(e){return e&&e.slice(0,an(e)+1).replace(on,"")}function Ue(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}var ut=0/0,cn=/^[-+]0x[0-9a-f]+$/i,un=/^0b[01]+$/i,fn=/^0o[0-7]+$/i,ln=parseInt;function ft(e){if(typeof e=="number")return e;if(rn(e))return ut;if(Ue(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=Ue(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=sn(e);var n=un.test(e);return n||fn.test(e)?ln(e.slice(2),n?2:8):cn.test(e)?ut:+e}var hn=function(){return At.Date.now()},_e=hn,pn="Expected a function",mn=Math.max,dn=Math.min;function xt(e,r,n){var t,s,i,u,l,v,C=0,O=!1,f=!1,c=!0;if(typeof e!="function")throw new TypeError(pn);r=ft(r)||0,Ue(n)&&(O=!!n.leading,f="maxWait"in n,i=f?mn(ft(n.maxWait)||0,r):i,c="trailing"in n?!!n.trailing:c);function m(S){var q=t,L=s;return t=s=void 0,C=S,u=e.apply(L,q),u}function P(S){return C=S,l=setTimeout(K,r),O?m(S):u}function M(S){var q=S-v,L=S-C,V=r-q;return f?dn(V,i-L):V}function A(S){var q=S-v,L=S-C;return v===void 0||q>=r||q<0||f&&L>=i}function K(){var S=_e();if(A(S))return I(S);l=setTimeout(K,M(S))}function I(S){return l=void 0,c&&t?m(S):(t=s=void 0,u)}function w(){l!==void 0&&clearTimeout(l),C=0,t=v=s=l=void 0}function j(){return l===void 0?u:I(_e())}function R(){var S=_e(),q=A(S);if(t=arguments,s=this,v=S,q){if(l===void 0)return P(v);if(f)return clearTimeout(l),l=setTimeout(K,r),m(v)}return l===void 0&&(l=setTimeout(K,r)),u}return R.cancel=w,R.flush=j,R}const Be=gt.infinite(()=>yt({panDecayTime:200,zoomDecayTime:200,rotationDecayTime:500,distance:2e3})),Xe=gt.infinite(e=>yt({phi:Math.PI/4,theta:Math.PI/4,distance:200,center:[0,0,0],fovY:.013888888888888888*(Math.PI/2),near:2,far:400})),G=Be();Xe("zoomed");const vn=(e,r,n)=>{const t=Be(),s={near:t.params.distance*.1,far:t.params.distance*5e4};t.resize(r/n),t.tick({fovY:Math.PI/3,...s});const i=Xe("zoomed");i.params.distance=t.params.distance,i.params.center=[0,0,0],i.resize(r/n),i.tick(s);const u=Xe("fixed");u.resize(r/n),u.tick({near:u.params.distance*.1,far:u.params.distance*1e4});const l=new Float32Array(t.state.projection),v=new Float32Array(t.state.view),C=new Float32Array(i.state.projection),O=new Float32Array(i.state.view),f=new Float32Array(u.state.projection),c=new Float32Array(u.state.view),m=new Float32Array([t.params.distance,t.params.rotationCenter[0],t.params.rotationCenter[1],t.params.rotationCenter[2],t.params.center[0],t.params.center[1],t.params.center[2],t.params.phi,t.params.theta]);e(ne(l,[l.buffer]),ne(v,[v.buffer]),ne(C,[C.buffer]),ne(O,[O.buffer]),ne(f,[f.buffer]),ne(c,[c.buffer]),ne(m,[m.buffer]))},yn=G.params.center,Oe=new Ct(yn),gn=e=>{G.params.center=e},zt=xt(()=>{Oe.updateInitialValues(G.params.center),Oe.animate(gn)},100),Cn=(e,r=3e3)=>{G.params.rotationCenter=e,Oe.updateTarget(e),zt()},ye=new Ct(G.params.distance),An=e=>{G.params.distance=e},Et=xt(()=>{ye.updateTarget(G.params.distance),ye.updateInitialValues(G.params.distance),ye.animate(An)},100),wn=(e,r=5e3)=>{ye.updateTarget(e)};zt();Et();const xn=()=>{Oe.stop()},zn=()=>{},En=()=>{ye.stop()},Mn=()=>{Et()},bn=(e,r,n)=>{(G.params.distance>25||n>0)&&G.zoom(e,r,n)},Sn=(...e)=>{G.pan(...e)},Tn=()=>G.params,On=([e,r,n])=>{const{projection:t,view:s}=Be().state,i=qr(e,r,n,1),u=Le(),l=Le(),v=ot(...t),C=ot(...s),O=Kr();return Ir(O,v,C),jr(u,i,O),Rr(l,u,1/u[3]),[l[0],l[1],l[2]]};We({startPanning:xn,stopPanning:zn,startZooming:En,stopZooming:Mn,globalCamera:G,getGlobalCameraParams:Tn,updateCameras:vn,setCameraCenter:Cn,setCameraDistance:wn,zoomGlobalCamera:bn,panGlobalCamera:Sn,computeScreenPosition:On});
