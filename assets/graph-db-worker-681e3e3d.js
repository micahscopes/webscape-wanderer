function _mergeNamespaces(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(o){if(o!=="default"&&!(o in n)){var l=Object.getOwnPropertyDescriptor(t,o);Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:function(){return t[o]}})}})}),Object.freeze(n)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...e){const t=e.reduce((o,l)=>Object.assign(o,l),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={},buffer$1={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup$1[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(n){var e=n.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=n.indexOf("=");t===-1&&(t=e);var o=t===e?0:4-t%4;return[t,o]}function byteLength(n){var e=getLens(n),t=e[0],o=e[1];return(t+o)*3/4-o}function _byteLength(n,e,t){return(e+t)*3/4-t}function toByteArray(n){var e,t=getLens(n),o=t[0],l=t[1],d=new Arr(_byteLength(n,o,l)),u=0,a=l>0?o-4:o,c;for(c=0;c<a;c+=4)e=revLookup[n.charCodeAt(c)]<<18|revLookup[n.charCodeAt(c+1)]<<12|revLookup[n.charCodeAt(c+2)]<<6|revLookup[n.charCodeAt(c+3)],d[u++]=e>>16&255,d[u++]=e>>8&255,d[u++]=e&255;return l===2&&(e=revLookup[n.charCodeAt(c)]<<2|revLookup[n.charCodeAt(c+1)]>>4,d[u++]=e&255),l===1&&(e=revLookup[n.charCodeAt(c)]<<10|revLookup[n.charCodeAt(c+1)]<<4|revLookup[n.charCodeAt(c+2)]>>2,d[u++]=e>>8&255,d[u++]=e&255),d}function tripletToBase64(n){return lookup$1[n>>18&63]+lookup$1[n>>12&63]+lookup$1[n>>6&63]+lookup$1[n&63]}function encodeChunk(n,e,t){for(var o,l=[],d=e;d<t;d+=3)o=(n[d]<<16&16711680)+(n[d+1]<<8&65280)+(n[d+2]&255),l.push(tripletToBase64(o));return l.join("")}function fromByteArray(n){for(var e,t=n.length,o=t%3,l=[],d=16383,u=0,a=t-o;u<a;u+=d)l.push(encodeChunk(n,u,u+d>a?a:u+d));return o===1?(e=n[t-1],l.push(lookup$1[e>>2]+lookup$1[e<<4&63]+"==")):o===2&&(e=(n[t-2]<<8)+n[t-1],l.push(lookup$1[e>>10]+lookup$1[e>>4&63]+lookup$1[e<<2&63]+"=")),l.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(n,e,t,o,l){var d,u,a=l*8-o-1,c=(1<<a)-1,h=c>>1,y=-7,b=t?l-1:0,m=t?-1:1,E=n[e+b];for(b+=m,d=E&(1<<-y)-1,E>>=-y,y+=a;y>0;d=d*256+n[e+b],b+=m,y-=8);for(u=d&(1<<-y)-1,d>>=-y,y+=o;y>0;u=u*256+n[e+b],b+=m,y-=8);if(d===0)d=1-h;else{if(d===c)return u?NaN:(E?-1:1)*(1/0);u=u+Math.pow(2,o),d=d-h}return(E?-1:1)*u*Math.pow(2,d-o)};ieee754.write=function(n,e,t,o,l,d){var u,a,c,h=d*8-l-1,y=(1<<h)-1,b=y>>1,m=l===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=o?0:d-1,v=o?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=y):(u=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-u))<1&&(u--,c*=2),u+b>=1?e+=m/c:e+=m*Math.pow(2,1-b),e*c>=2&&(u++,c/=2),u+b>=y?(a=0,u=y):u+b>=1?(a=(e*c-1)*Math.pow(2,l),u=u+b):(a=e*Math.pow(2,b-1)*Math.pow(2,l),u=0));l>=8;n[t+E]=a&255,E+=v,a/=256,l-=8);for(u=u<<l|a,h+=l;h>0;n[t+E]=u&255,E+=v,u/=256,h-=8);n[t+E-v]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=base64Js,t=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=x,n.INSPECT_MAX_BYTES=50;const l=2147483647;n.kMaxLength=l,a.TYPED_ARRAY_SUPPORT=d(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const _=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(_,p),_.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function u(_){if(_>l)throw new RangeError('The value "'+_+'" is invalid for option "size"');const p=new Uint8Array(_);return Object.setPrototypeOf(p,a.prototype),p}function a(_,p,g){if(typeof _=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(_)}return c(_,p,g)}a.poolSize=8192;function c(_,p,g){if(typeof _=="string")return m(_,p);if(ArrayBuffer.isView(_))return v(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(ne(_,ArrayBuffer)||_&&ne(_.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(_,SharedArrayBuffer)||_&&ne(_.buffer,SharedArrayBuffer)))return T(_,p,g);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=_.valueOf&&_.valueOf();if(O!=null&&O!==_)return a.from(O,p,g);const L=j(_);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return a.from(_[Symbol.toPrimitive]("string"),p,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}a.from=function(_,p,g){return c(_,p,g)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function y(_,p,g){return h(_),_<=0?u(_):p!==void 0?typeof g=="string"?u(_).fill(p,g):u(_).fill(p):u(_)}a.alloc=function(_,p,g){return y(_,p,g)};function b(_){return h(_),u(_<0?0:N(_)|0)}a.allocUnsafe=function(_){return b(_)},a.allocUnsafeSlow=function(_){return b(_)};function m(_,p){if((typeof p!="string"||p==="")&&(p="utf8"),!a.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const g=I(_,p)|0;let O=u(g);const L=O.write(_,p);return L!==g&&(O=O.slice(0,L)),O}function E(_){const p=_.length<0?0:N(_.length)|0,g=u(p);for(let O=0;O<p;O+=1)g[O]=_[O]&255;return g}function v(_){if(ne(_,Uint8Array)){const p=new Uint8Array(_);return T(p.buffer,p.byteOffset,p.byteLength)}return E(_)}function T(_,p,g){if(p<0||_.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<p+(g||0))throw new RangeError('"length" is outside of buffer bounds');let O;return p===void 0&&g===void 0?O=new Uint8Array(_):g===void 0?O=new Uint8Array(_,p):O=new Uint8Array(_,p,g),Object.setPrototypeOf(O,a.prototype),O}function j(_){if(a.isBuffer(_)){const p=N(_.length)|0,g=u(p);return g.length===0||_.copy(g,0,0,p),g}if(_.length!==void 0)return typeof _.length!="number"||se(_.length)?u(0):E(_);if(_.type==="Buffer"&&Array.isArray(_.data))return E(_.data)}function N(_){if(_>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return _|0}function x(_){return+_!=_&&(_=0),a.alloc(+_)}a.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==a.prototype},a.compare=function(p,g){if(ne(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),ne(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(p)||!a.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===g)return 0;let O=p.length,L=g.length;for(let k=0,z=Math.min(O,L);k<z;++k)if(p[k]!==g[k]){O=p[k],L=g[k];break}return O<L?-1:L<O?1:0},a.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(p,g){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return a.alloc(0);let O;if(g===void 0)for(g=0,O=0;O<p.length;++O)g+=p[O].length;const L=a.allocUnsafe(g);let k=0;for(O=0;O<p.length;++O){let z=p[O];if(ne(z,Uint8Array))k+z.length>L.length?(a.isBuffer(z)||(z=a.from(z)),z.copy(L,k)):Uint8Array.prototype.set.call(L,z,k);else if(a.isBuffer(z))z.copy(L,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=z.length}return L};function I(_,p){if(a.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||ne(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);const g=_.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&g===0)return 0;let L=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return Z(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Y(_).length;default:if(L)return O?-1:Z(_).length;p=(""+p).toLowerCase(),L=!0}}a.byteLength=I;function w(_,p,g){let O=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,p>>>=0,g<=p))return"";for(_||(_="utf8");;)switch(_){case"hex":return ue(this,p,g);case"utf8":case"utf-8":return F(this,p,g);case"ascii":return W(this,p,g);case"latin1":case"binary":return le(this,p,g);case"base64":return D(this,p,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,p,g);default:if(O)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),O=!0}}a.prototype._isBuffer=!0;function S(_,p,g){const O=_[p];_[p]=_[g],_[g]=O}a.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<p;g+=2)S(this,g,g+1);return this},a.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<p;g+=4)S(this,g,g+3),S(this,g+1,g+2);return this},a.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<p;g+=8)S(this,g,g+7),S(this,g+1,g+6),S(this,g+2,g+5),S(this,g+3,g+4);return this},a.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?F(this,0,p):w.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(p){if(!a.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:a.compare(this,p)===0},a.prototype.inspect=function(){let p="";const g=n.INSPECT_MAX_BYTES;return p=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(p+=" ... "),"<Buffer "+p+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(p,g,O,L,k){if(ne(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(g===void 0&&(g=0),O===void 0&&(O=p?p.length:0),L===void 0&&(L=0),k===void 0&&(k=this.length),g<0||O>p.length||L<0||k>this.length)throw new RangeError("out of range index");if(L>=k&&g>=O)return 0;if(L>=k)return-1;if(g>=O)return 1;if(g>>>=0,O>>>=0,L>>>=0,k>>>=0,this===p)return 0;let z=k-L,_e=O-g;const Pe=Math.min(z,_e),xe=this.slice(L,k),Le=p.slice(g,O);for(let Ee=0;Ee<Pe;++Ee)if(xe[Ee]!==Le[Ee]){z=xe[Ee],_e=Le[Ee];break}return z<_e?-1:_e<z?1:0};function P(_,p,g,O,L){if(_.length===0)return-1;if(typeof g=="string"?(O=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,se(g)&&(g=L?0:_.length-1),g<0&&(g=_.length+g),g>=_.length){if(L)return-1;g=_.length-1}else if(g<0)if(L)g=0;else return-1;if(typeof p=="string"&&(p=a.from(p,O)),a.isBuffer(p))return p.length===0?-1:B(_,p,g,O,L);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(_,p,g):Uint8Array.prototype.lastIndexOf.call(_,p,g):B(_,[p],g,O,L);throw new TypeError("val must be string, number or Buffer")}function B(_,p,g,O,L){let k=1,z=_.length,_e=p.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(_.length<2||p.length<2)return-1;k=2,z/=2,_e/=2,g/=2}function Pe(Le,Ee){return k===1?Le[Ee]:Le.readUInt16BE(Ee*k)}let xe;if(L){let Le=-1;for(xe=g;xe<z;xe++)if(Pe(_,xe)===Pe(p,Le===-1?0:xe-Le)){if(Le===-1&&(Le=xe),xe-Le+1===_e)return Le*k}else Le!==-1&&(xe-=xe-Le),Le=-1}else for(g+_e>z&&(g=z-_e),xe=g;xe>=0;xe--){let Le=!0;for(let Ee=0;Ee<_e;Ee++)if(Pe(_,xe+Ee)!==Pe(p,Ee)){Le=!1;break}if(Le)return xe}return-1}a.prototype.includes=function(p,g,O){return this.indexOf(p,g,O)!==-1},a.prototype.indexOf=function(p,g,O){return P(this,p,g,O,!0)},a.prototype.lastIndexOf=function(p,g,O){return P(this,p,g,O,!1)};function H(_,p,g,O){g=Number(g)||0;const L=_.length-g;O?(O=Number(O),O>L&&(O=L)):O=L;const k=p.length;O>k/2&&(O=k/2);let z;for(z=0;z<O;++z){const _e=parseInt(p.substr(z*2,2),16);if(se(_e))return z;_[g+z]=_e}return z}function q(_,p,g,O){return te(Z(p,_.length-g),_,g,O)}function V(_,p,g,O){return te(ie(p),_,g,O)}function $(_,p,g,O){return te(Y(p),_,g,O)}function ee(_,p,g,O){return te(oe(p,_.length-g),_,g,O)}a.prototype.write=function(p,g,O,L){if(g===void 0)L="utf8",O=this.length,g=0;else if(O===void 0&&typeof g=="string")L=g,O=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(O)?(O=O>>>0,L===void 0&&(L="utf8")):(L=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-g;if((O===void 0||O>k)&&(O=k),p.length>0&&(O<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let z=!1;for(;;)switch(L){case"hex":return H(this,p,g,O);case"utf8":case"utf-8":return q(this,p,g,O);case"ascii":case"latin1":case"binary":return V(this,p,g,O);case"base64":return $(this,p,g,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,p,g,O);default:if(z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(_,p,g){return p===0&&g===_.length?e.fromByteArray(_):e.fromByteArray(_.slice(p,g))}function F(_,p,g){g=Math.min(_.length,g);const O=[];let L=p;for(;L<g;){const k=_[L];let z=null,_e=k>239?4:k>223?3:k>191?2:1;if(L+_e<=g){let Pe,xe,Le,Ee;switch(_e){case 1:k<128&&(z=k);break;case 2:Pe=_[L+1],(Pe&192)===128&&(Ee=(k&31)<<6|Pe&63,Ee>127&&(z=Ee));break;case 3:Pe=_[L+1],xe=_[L+2],(Pe&192)===128&&(xe&192)===128&&(Ee=(k&15)<<12|(Pe&63)<<6|xe&63,Ee>2047&&(Ee<55296||Ee>57343)&&(z=Ee));break;case 4:Pe=_[L+1],xe=_[L+2],Le=_[L+3],(Pe&192)===128&&(xe&192)===128&&(Le&192)===128&&(Ee=(k&15)<<18|(Pe&63)<<12|(xe&63)<<6|Le&63,Ee>65535&&Ee<1114112&&(z=Ee))}}z===null?(z=65533,_e=1):z>65535&&(z-=65536,O.push(z>>>10&1023|55296),z=56320|z&1023),O.push(z),L+=_e}return X(O)}const Q=4096;function X(_){const p=_.length;if(p<=Q)return String.fromCharCode.apply(String,_);let g="",O=0;for(;O<p;)g+=String.fromCharCode.apply(String,_.slice(O,O+=Q));return g}function W(_,p,g){let O="";g=Math.min(_.length,g);for(let L=p;L<g;++L)O+=String.fromCharCode(_[L]&127);return O}function le(_,p,g){let O="";g=Math.min(_.length,g);for(let L=p;L<g;++L)O+=String.fromCharCode(_[L]);return O}function ue(_,p,g){const O=_.length;(!p||p<0)&&(p=0),(!g||g<0||g>O)&&(g=O);let L="";for(let k=p;k<g;++k)L+=fe[_[k]];return L}function de(_,p,g){const O=_.slice(p,g);let L="";for(let k=0;k<O.length-1;k+=2)L+=String.fromCharCode(O[k]+O[k+1]*256);return L}a.prototype.slice=function(p,g){const O=this.length;p=~~p,g=g===void 0?O:~~g,p<0?(p+=O,p<0&&(p=0)):p>O&&(p=O),g<0?(g+=O,g<0&&(g=0)):g>O&&(g=O),g<p&&(g=p);const L=this.subarray(p,g);return Object.setPrototypeOf(L,a.prototype),L};function ce(_,p,g){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+p>g)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=this[p],k=1,z=0;for(;++z<g&&(k*=256);)L+=this[p+z]*k;return L},a.prototype.readUintBE=a.prototype.readUIntBE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=this[p+--g],k=1;for(;g>0&&(k*=256);)L+=this[p+--g]*k;return L},a.prototype.readUint8=a.prototype.readUInt8=function(p,g){return p=p>>>0,g||ce(p,1,this.length),this[p]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(p,g){return p=p>>>0,g||ce(p,2,this.length),this[p]|this[p+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(p,g){return p=p>>>0,g||ce(p,2,this.length),this[p]<<8|this[p+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},a.prototype.readBigUInt64LE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,k=this[++p]+this[++p]*2**8+this[++p]*2**16+O*2**24;return BigInt(L)+(BigInt(k)<<BigInt(32))}),a.prototype.readBigUInt64BE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=g*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],k=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+O;return(BigInt(L)<<BigInt(32))+BigInt(k)}),a.prototype.readIntLE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=this[p],k=1,z=0;for(;++z<g&&(k*=256);)L+=this[p+z]*k;return k*=128,L>=k&&(L-=Math.pow(2,8*g)),L},a.prototype.readIntBE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=g,k=1,z=this[p+--L];for(;L>0&&(k*=256);)z+=this[p+--L]*k;return k*=128,z>=k&&(z-=Math.pow(2,8*g)),z},a.prototype.readInt8=function(p,g){return p=p>>>0,g||ce(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},a.prototype.readInt16LE=function(p,g){p=p>>>0,g||ce(p,2,this.length);const O=this[p]|this[p+1]<<8;return O&32768?O|4294901760:O},a.prototype.readInt16BE=function(p,g){p=p>>>0,g||ce(p,2,this.length);const O=this[p+1]|this[p]<<8;return O&32768?O|4294901760:O},a.prototype.readInt32LE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},a.prototype.readInt32BE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},a.prototype.readBigInt64LE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(O<<24);return(BigInt(L)<<BigInt(32))+BigInt(g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),a.prototype.readBigInt64BE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=(g<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(L)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+O)}),a.prototype.readFloatLE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),t.read(this,p,!0,23,4)},a.prototype.readFloatBE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),t.read(this,p,!1,23,4)},a.prototype.readDoubleLE=function(p,g){return p=p>>>0,g||ce(p,8,this.length),t.read(this,p,!0,52,8)},a.prototype.readDoubleBE=function(p,g){return p=p>>>0,g||ce(p,8,this.length),t.read(this,p,!1,52,8)};function ge(_,p,g,O,L,k){if(!a.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>L||p<k)throw new RangeError('"value" argument is out of bounds');if(g+O>_.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(p,g,O,L){if(p=+p,g=g>>>0,O=O>>>0,!L){const _e=Math.pow(2,8*O)-1;ge(this,p,g,O,_e,0)}let k=1,z=0;for(this[g]=p&255;++z<O&&(k*=256);)this[g+z]=p/k&255;return g+O},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(p,g,O,L){if(p=+p,g=g>>>0,O=O>>>0,!L){const _e=Math.pow(2,8*O)-1;ge(this,p,g,O,_e,0)}let k=O-1,z=1;for(this[g+k]=p&255;--k>=0&&(z*=256);)this[g+k]=p/z&255;return g+O},a.prototype.writeUint8=a.prototype.writeUInt8=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,1,255,0),this[g]=p&255,g+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,65535,0),this[g]=p&255,this[g+1]=p>>>8,g+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,65535,0),this[g]=p>>>8,this[g+1]=p&255,g+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,4294967295,0),this[g+3]=p>>>24,this[g+2]=p>>>16,this[g+1]=p>>>8,this[g]=p&255,g+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,4294967295,0),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4};function Oe(_,p,g,O,L){De(p,O,L,_,g,7);let k=Number(p&BigInt(4294967295));_[g++]=k,k=k>>8,_[g++]=k,k=k>>8,_[g++]=k,k=k>>8,_[g++]=k;let z=Number(p>>BigInt(32)&BigInt(4294967295));return _[g++]=z,z=z>>8,_[g++]=z,z=z>>8,_[g++]=z,z=z>>8,_[g++]=z,g}function je(_,p,g,O,L){De(p,O,L,_,g,7);let k=Number(p&BigInt(4294967295));_[g+7]=k,k=k>>8,_[g+6]=k,k=k>>8,_[g+5]=k,k=k>>8,_[g+4]=k;let z=Number(p>>BigInt(32)&BigInt(4294967295));return _[g+3]=z,z=z>>8,_[g+2]=z,z=z>>8,_[g+1]=z,z=z>>8,_[g]=z,g+8}a.prototype.writeBigUInt64LE=ye(function(p,g=0){return Oe(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ye(function(p,g=0){return je(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(p,g,O,L){if(p=+p,g=g>>>0,!L){const Pe=Math.pow(2,8*O-1);ge(this,p,g,O,Pe-1,-Pe)}let k=0,z=1,_e=0;for(this[g]=p&255;++k<O&&(z*=256);)p<0&&_e===0&&this[g+k-1]!==0&&(_e=1),this[g+k]=(p/z>>0)-_e&255;return g+O},a.prototype.writeIntBE=function(p,g,O,L){if(p=+p,g=g>>>0,!L){const Pe=Math.pow(2,8*O-1);ge(this,p,g,O,Pe-1,-Pe)}let k=O-1,z=1,_e=0;for(this[g+k]=p&255;--k>=0&&(z*=256);)p<0&&_e===0&&this[g+k+1]!==0&&(_e=1),this[g+k]=(p/z>>0)-_e&255;return g+O},a.prototype.writeInt8=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,1,127,-128),p<0&&(p=255+p+1),this[g]=p&255,g+1},a.prototype.writeInt16LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,32767,-32768),this[g]=p&255,this[g+1]=p>>>8,g+2},a.prototype.writeInt16BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,32767,-32768),this[g]=p>>>8,this[g+1]=p&255,g+2},a.prototype.writeInt32LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,2147483647,-2147483648),this[g]=p&255,this[g+1]=p>>>8,this[g+2]=p>>>16,this[g+3]=p>>>24,g+4},a.prototype.writeInt32BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4},a.prototype.writeBigInt64LE=ye(function(p,g=0){return Oe(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ye(function(p,g=0){return je(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(_,p,g,O,L,k){if(g+O>_.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Se(_,p,g,O,L){return p=+p,g=g>>>0,L||Ie(_,p,g,4),t.write(_,p,g,O,23,4),g+4}a.prototype.writeFloatLE=function(p,g,O){return Se(this,p,g,!0,O)},a.prototype.writeFloatBE=function(p,g,O){return Se(this,p,g,!1,O)};function he(_,p,g,O,L){return p=+p,g=g>>>0,L||Ie(_,p,g,8),t.write(_,p,g,O,52,8),g+8}a.prototype.writeDoubleLE=function(p,g,O){return he(this,p,g,!0,O)},a.prototype.writeDoubleBE=function(p,g,O){return he(this,p,g,!1,O)},a.prototype.copy=function(p,g,O,L){if(!a.isBuffer(p))throw new TypeError("argument should be a Buffer");if(O||(O=0),!L&&L!==0&&(L=this.length),g>=p.length&&(g=p.length),g||(g=0),L>0&&L<O&&(L=O),L===O||p.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),p.length-g<L-O&&(L=p.length-g+O);const k=L-O;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,O,L):Uint8Array.prototype.set.call(p,this.subarray(O,L),g),k},a.prototype.fill=function(p,g,O,L){if(typeof p=="string"){if(typeof g=="string"?(L=g,g=0,O=this.length):typeof O=="string"&&(L=O,O=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(p.length===1){const z=p.charCodeAt(0);(L==="utf8"&&z<128||L==="latin1")&&(p=z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(g<0||this.length<g||this.length<O)throw new RangeError("Out of range index");if(O<=g)return this;g=g>>>0,O=O===void 0?this.length:O>>>0,p||(p=0);let k;if(typeof p=="number")for(k=g;k<O;++k)this[k]=p;else{const z=a.isBuffer(p)?p:a.from(p,L),_e=z.length;if(_e===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(k=0;k<O-g;++k)this[k+g]=z[k%_e]}return this};const Ae={};function Re(_,p,g){Ae[_]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_}]`,this.stack,delete this.name}get code(){return _}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${_}]: ${this.message}`}}}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(_){return _?`${_} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(_,p){return`The "${_}" argument must be of type number. Received type ${typeof p}`},TypeError),Re("ERR_OUT_OF_RANGE",function(_,p,g){let O=`The value of "${_}" is out of range.`,L=g;return Number.isInteger(g)&&Math.abs(g)>2**32?L=Be(String(g)):typeof g=="bigint"&&(L=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(L=Be(L)),L+="n"),O+=` It must be ${p}. Received ${L}`,O},RangeError);function Be(_){let p="",g=_.length;const O=_[0]==="-"?1:0;for(;g>=O+4;g-=3)p=`_${_.slice(g-3,g)}${p}`;return`${_.slice(0,g)}${p}`}function Ne(_,p,g){M(p,"offset"),(_[p]===void 0||_[p+g]===void 0)&&G(p,_.length-(g+1))}function De(_,p,g,O,L,k){if(_>g||_<p){const z=typeof p=="bigint"?"n":"";let _e;throw k>3?p===0||p===BigInt(0)?_e=`>= 0${z} and < 2${z} ** ${(k+1)*8}${z}`:_e=`>= -(2${z} ** ${(k+1)*8-1}${z}) and < 2 ** ${(k+1)*8-1}${z}`:_e=`>= ${p}${z} and <= ${g}${z}`,new Ae.ERR_OUT_OF_RANGE("value",_e,_)}Ne(O,L,k)}function M(_,p){if(typeof _!="number")throw new Ae.ERR_INVALID_ARG_TYPE(p,"number",_)}function G(_,p,g){throw Math.floor(_)!==_?(M(_,g),new Ae.ERR_OUT_OF_RANGE(g||"offset","an integer",_)):p<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${p}`,_)}const J=/[^+/0-9A-Za-z-_]/g;function ae(_){if(_=_.split("=")[0],_=_.trim().replace(J,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function Z(_,p){p=p||1/0;let g;const O=_.length;let L=null;const k=[];for(let z=0;z<O;++z){if(g=_.charCodeAt(z),g>55295&&g<57344){if(!L){if(g>56319){(p-=3)>-1&&k.push(239,191,189);continue}else if(z+1===O){(p-=3)>-1&&k.push(239,191,189);continue}L=g;continue}if(g<56320){(p-=3)>-1&&k.push(239,191,189),L=g;continue}g=(L-55296<<10|g-56320)+65536}else L&&(p-=3)>-1&&k.push(239,191,189);if(L=null,g<128){if((p-=1)<0)break;k.push(g)}else if(g<2048){if((p-=2)<0)break;k.push(g>>6|192,g&63|128)}else if(g<65536){if((p-=3)<0)break;k.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((p-=4)<0)break;k.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return k}function ie(_){const p=[];for(let g=0;g<_.length;++g)p.push(_.charCodeAt(g)&255);return p}function oe(_,p){let g,O,L;const k=[];for(let z=0;z<_.length&&!((p-=2)<0);++z)g=_.charCodeAt(z),O=g>>8,L=g%256,k.push(L),k.push(O);return k}function Y(_){return e.toByteArray(ae(_))}function te(_,p,g,O){let L;for(L=0;L<O&&!(L+g>=p.length||L>=_.length);++L)p[L+g]=_[L];return L}function ne(_,p){return _ instanceof p||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===p.name}function se(_){return _!==_}const fe=function(){const _="0123456789abcdef",p=new Array(256);for(let g=0;g<16;++g){const O=g*16;for(let L=0;L<16;++L)p[O+L]=_[g]+_[L]}return p}();function ye(_){return typeof BigInt>"u"?ve:_}function ve(){throw new Error("BigInt not supported")}})(buffer$1);let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$1}=buffer$1||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const t=this.encode(e);return Buffer$1.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:t}=textEndec();return new ViewFormat$2({encode:o=>e.encode(this.encode(o)),decode:o=>this.decode(t.decode(o)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer}=buffer$1||{Buffer:{isBuffer:()=>!1}},{textEncoder,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$1=n=>n;encodings$1.utf8=new UTF8Format$1({encode:function(n){return Buffer.isBuffer(n)?n.toString("utf8"):ArrayBuffer.isView(n)?textDecoder.decode(n):String(n)},decode:identity$1,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder.encode(n)},decode:function(n){return textDecoder.decode(n)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:function(n){return n.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:identity$1,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:Buffer.from(String(n),"utf8")},decode:function(n){return Buffer.from(n.buffer,n.byteOffset,n.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder.encode(n)},decode:identity$1,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:identity$1,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:Buffer.from(String(n),"hex")},decode:function(n){return n.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:Buffer.from(String(n),"base64")},decode:function(n){return n.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>validFormats.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const t in encodings)try{this.encoding(t)}catch(o){if(o.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw o}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let t=this[kEncodings].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=lookup[e],!t)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=from(e)}const{name:o,format:l}=t;if(!this[kFormats].has(l))if(this[kFormats].has("view"))t=t.createViewTranscoder();else if(this[kFormats].has("buffer"))t=t.createBufferTranscoder();else if(this[kFormats].has("utf8"))t=t.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${o}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const d of[e,o,t.name,t.commonName])this[kEncodings].set(d,t)}return t}};levelTranscoder.Transcoder=Transcoder$1;function from(n){if(n instanceof Encoding)return n;const e="type"in n&&typeof n.type=="string"?n.type:void 0,t=n.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(n)){case"view":return new ViewFormat({...n,name:t});case"utf8":return new UTF8Format({...n,name:t});case"buffer":return new BufferFormat({...n,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(n){return"format"in n&&n.format!==void 0?n.format:"buffer"in n&&typeof n.buffer=="boolean"?n.buffer?"buffer":"utf8":"code"in n&&Number.isInteger(n.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup={...encodings,...aliases};let anonymousCount=0;var eventsExports={},events={get exports(){return eventsExports},set exports(n){eventsExports=n}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,t,o){return Function.prototype.apply.call(e,t,o)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;eventsExports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");defaultMaxListeners=n}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(n){return n._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:n._maxListeners}EventEmitter$1.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function(e){for(var t=[],o=1;o<arguments.length;o++)t.push(arguments[o]);var l=e==="error",d=this._events;if(d!==void 0)l=l&&d.error===void 0;else if(!l)return!1;if(l){var u;if(t.length>0&&(u=t[0]),u instanceof Error)throw u;var a=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw a.context=u,a}var c=d[e];if(c===void 0)return!1;if(typeof c=="function")ReflectApply(c,this,t);else for(var h=c.length,y=arrayClone(c,h),o=0;o<h;++o)ReflectApply(y[o],this,t);return!0};function _addListener(n,e,t,o){var l,d,u;if(checkListener(t),d=n._events,d===void 0?(d=n._events=Object.create(null),n._eventsCount=0):(d.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),d=n._events),u=d[e]),u===void 0)u=d[e]=t,++n._eventsCount;else if(typeof u=="function"?u=d[e]=o?[t,u]:[u,t]:o?u.unshift(t):u.push(t),l=_getMaxListeners(n),l>0&&u.length>l&&!u.warned){u.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=n,a.type=e,a.count=u.length,ProcessEmitWarning(a)}return n}EventEmitter$1.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(n,e,t){var o={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},l=onceWrapper.bind(o);return l.listener=t,o.wrapFn=l,l}EventEmitter$1.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.removeListener=function(e,t){var o,l,d,u,a;if(checkListener(t),l=this._events,l===void 0)return this;if(o=l[e],o===void 0)return this;if(o===t||o.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,o.listener||t));else if(typeof o!="function"){for(d=-1,u=o.length-1;u>=0;u--)if(o[u]===t||o[u].listener===t){a=o[u].listener,d=u;break}if(d<0)return this;d===0?o.shift():spliceOne(o,d),o.length===1&&(l[e]=o[0]),l.removeListener!==void 0&&this.emit("removeListener",e,a||t)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function(e){var t,o,l;if(o=this._events,o===void 0)return this;if(o.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):o[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete o[e]),this;if(arguments.length===0){var d=Object.keys(o),u;for(l=0;l<d.length;++l)u=d[l],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=o[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(l=t.length-1;l>=0;l--)this.removeListener(e,t[l]);return this};function _listeners(n,e,t){var o=n._events;if(o===void 0)return[];var l=o[e];return l===void 0?[]:typeof l=="function"?t?[l.listener||l]:[l]:t?unwrapListeners(l):arrayClone(l,l.length)}EventEmitter$1.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):listenerCount.call(n,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter$1.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(n,e){for(var t=new Array(e),o=0;o<e;++o)t[o]=n[o];return t}function spliceOne(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function unwrapListeners(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function once(n,e){return new Promise(function(t,o){function l(u){n.removeListener(e,d),o(u)}function d(){typeof n.removeListener=="function"&&n.removeListener("error",l),t([].slice.call(arguments))}eventTargetAgnosticAddListener(n,e,d,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(n,l,{once:!0})})}function addErrorHandlerIfEventEmitter(n,e,t){typeof n.on=="function"&&eventTargetAgnosticAddListener(n,"error",e,t)}function eventTargetAgnosticAddListener(n,e,t,o){if(typeof n.on=="function")o.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function l(d){o.once&&n.removeEventListener(e,l),t(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n),nextTick=nextTickBrowser$1;catering.fromCallback=function(n,e){if(n===void 0){var t=new Promise(function(o,l){n=function(d,u){d?l(d):o(u)}});n[e!==void 0?e:"promise"]=t}else if(typeof n!="function")throw new TypeError("Callback must be a function");return n};catering.fromPromise=function(n,e){if(e===void 0)return n;n.then(function(t){nextTick(()=>e(null,t))}).catch(function(t){nextTick(()=>e(t))})};var abstractIterator={},common$6={};common$6.getCallback=function(n,e){return typeof n=="function"?n:e};common$6.getOptions=function(n,e){return typeof n=="object"&&n!==null?n:e!==void 0?e:{}};const{fromCallback:fromCallback$2}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$6,kPromise$2=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,t,o){if(typeof e!="object"||e===null){const l=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${l}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=t[kKeyEncoding$1],this[kValueEncoding$1]=t[kValueEncoding$1],this[kLegacy]=o,this[kLimit]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let t;if(e===void 0)t=new Promise((o,l)=>{e=(d,u,a)=>{d?l(d):this[kLegacy]?u===void 0&&a===void 0?o():o([u,a]):o(u)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),t}_next(e){this.nextTick(e)}nextv(e,t,o){return o=getCallback$2(t,o),o=fromCallback$2(o,kPromise$2),t=getOptions$2(t,emptyOptions),Number.isInteger(e)?(this[kClosing]?this.nextTick(o,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(o,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=o,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,t,this[kHandleMany$1])),o[kPromise$2]):(this.nextTick(o,new TypeError("The first argument 'size' must be an integer")),o[kPromise$2])}_nextv(e,t,o){const l=[],d=(u,a,c)=>{if(u)return o(u);if(this[kLegacy]?a===void 0&&c===void 0:a===void 0)return o(null,l);l.push(this[kLegacy]?[a,c]:a),l.length===e?o(null,l):this._next(d)};this._next(d)}all(e,t){return t=getCallback$2(e,t),t=fromCallback$2(t,kPromise$2),e=getOptions$2(e,emptyOptions),this[kClosing]?this.nextTick(t,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(t,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=t,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),t[kPromise$2]}_all(e,t){let o=this[kCount];const l=[],d=()=>{const a=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-o):1e3;a<=0?this.nextTick(t,null,l):this._nextv(a,emptyOptions,u)},u=(a,c)=>{a?t(a):c.length===0?t(null,l):(l.push.apply(l,c),o+=c.length,d())};d()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,t,o){this[kAutoClose]?this.close(e.bind(null,t,o)):e(t,o)}seek(e,t){if(t=getOptions$2(t,emptyOptions),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const o=this.db.keyEncoding(t.keyEncoding||this[kKeyEncoding$1]),l=o.format;t.keyEncoding!==l&&(t={...t,keyEncoding:l});const d=this.db.prefixKey(o.encode(e),l);this._seek(d,t)}}}_seek(e,t){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$2(e,kPromise$2),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$2]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!0),this[kKeys]=t.keys!==!1,this[kValues]=t.values!==!1}[kHandleOne$1](e,t,o){const l=this[kFinishWork]();if(e)return l(e);try{t=this[kKeys]&&t!==void 0?this[kKeyEncoding$1].decode(t):void 0,o=this[kValues]&&o!==void 0?this[kValueEncoding$1].decode(o):void 0}catch(d){return l(new IteratorDecodeError("entry",d))}t===void 0&&o===void 0||this[kCount]++,l(null,t,o)}[kHandleMany$1](e,t){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(const l of t){const d=l[0],u=l[1];l[0]=this[kKeys]&&d!==void 0?this[kKeyEncoding$1].decode(d):void 0,l[1]=this[kValues]&&u!==void 0?this[kValueEncoding$1].decode(u):void 0}}catch(l){return this[kReturnMany](o,new IteratorDecodeError("entries",l))}this[kCount]+=t.length,this[kReturnMany](o,null,t)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const o=this[kFinishWork]();if(e)return o(e);try{t=t!==void 0?this[kKeyEncoding$1].decode(t):void 0}catch(l){return o(new IteratorDecodeError("key",l))}t!==void 0&&this[kCount]++,o(null,t)}[kHandleMany$1](e,t){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(let l=0;l<t.length;l++){const d=t[l];t[l]=d!==void 0?this[kKeyEncoding$1].decode(d):void 0}}catch(l){return this[kReturnMany](o,new IteratorDecodeError("keys",l))}this[kCount]+=t.length,this[kReturnMany](o,null,t)}},AbstractValueIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const o=this[kFinishWork]();if(e)return o(e);try{t=t!==void 0?this[kValueEncoding$1].decode(t):void 0}catch(l){return o(new IteratorDecodeError("value",l))}t!==void 0&&this[kCount]++,o(null,t)}[kHandleMany$1](e,t){const o=this[kFinishWork]();if(e)return this[kReturnMany](o,e);try{for(let l=0;l<t.length;l++){const d=t[l];t[l]=d!==void 0?this[kValueEncoding$1].decode(d):void 0}}catch(l){return this[kReturnMany](o,new IteratorDecodeError("values",l))}this[kCount]+=t.length,this[kReturnMany](o,null,t)}};class IteratorDecodeError extends ModuleError$6{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const n of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,n.split(" ")[0],{get(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$3;abstractIterator.AbstractValueIterator=AbstractValueIterator$3;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$2,AbstractValueIterator:AbstractValueIterator$2}=abstractIterator,kIterator$1=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$2{constructor(e,t){super(e,t),this[kIterator$1]=e.iterator({...t,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$2{constructor(e,t){super(e,t),this[kIterator$1]=e.iterator({...t,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const n of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=n===DefaultKeyIterator$1,t=e?o=>o[0]:o=>o[1];n.prototype._next=function(o){this[kCallback]=o,this[kIterator$1].next(this[kHandleOne])},n.prototype[kHandleOne]=function(o,l,d){const u=this[kCallback];o?u(o):u(null,e?l:d)},n.prototype._nextv=function(o,l,d){this[kCallback]=d,this[kIterator$1].nextv(o,l,this[kHandleMany])},n.prototype._all=function(o,l){this[kCallback]=l,this[kIterator$1].all(o,this[kHandleMany])},n.prototype[kHandleMany]=function(o,l){const d=this[kCallback];o?d(o):d(null,l.map(t))},n.prototype._seek=function(o,l){this[kIterator$1].seek(o,l)},n.prototype._close=function(o){this[kIterator$1].close(o)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.iterator(t),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.keys(t),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator$1{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.values(t),this.db.defer(()=>this[kUndefer$1]())}};for(const n of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])n.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},n.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._nextv=function(e,t,o){this[kNut]!==null?this[kNut].nextv(e,t,o):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,o)):this.nextTick(o,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._all=function(e,t){this[kNut]!==null?this[kNut].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._seek=function(e,t){this[kNut]!==null?this[kNut]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},n.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$1}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$6,kPromise$1=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,t,o){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const l=this.db._checkKey(e)||this.db._checkValue(t);if(l)throw l;const d=o&&o.sublevel!=null?o.sublevel:this.db,u=o,a=d.keyEncoding(o&&o.keyEncoding),c=d.valueEncoding(o&&o.valueEncoding),h=a.format;o={...o,keyEncoding:h,valueEncoding:c.format},d!==this.db&&(o.sublevel=null);const y=d.prefixKey(a.encode(e),h),b=c.encode(t);return this._put(y,b,o),this[kOperations$1].push({...u,type:"put",key:e,value:t}),this}_put(e,t,o){}del(e,t){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e);if(o)throw o;const l=t&&t.sublevel!=null?t.sublevel:this.db,d=t,u=l.keyEncoding(t&&t.keyEncoding),a=u.format;return t={...t,keyEncoding:a},l!==this.db&&(t.sublevel=null),this._del(l.prefixKey(u.encode(e),a),t),this[kOperations$1].push({...d,type:"del",key:e}),this}_del(e,t){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,t){return t=getCallback$1(e,t),t=fromCallback$1(t,kPromise$1),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(t,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[kStatus$1]="writing",this._write(e,o=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>t(o)),o||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),t[kPromise$1]}_write(e,t){}close(e){return e=fromCallback$1(e,kPromise$1),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$1]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const t of e)t()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,t,o){this[kEncoded].push({...o,type:"put",key:e,value:t})}_del(e,t){this[kEncoded].push({...t,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(t):this.db._batch(this[kEncoded],e,t):this.nextTick(t,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$2=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(n,e){const t={};for(const o in n)if(hasOwnProperty.call(n,o)&&!(o==="keyEncoding"||o==="valueEncoding")){if(o==="start"||o==="end")throw new ModuleError$2(`The legacy range option '${o}' has been removed`,{code:"LEVEL_LEGACY"});if(o==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$2.has(o)?t[o]=e.encode(n[o]):t[o]=n[o]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var queueMicrotask_1,hasRequiredQueueMicrotask;function requireQueueMicrotask(){if(hasRequiredQueueMicrotask)return queueMicrotask_1;hasRequiredQueueMicrotask=1;let n;return queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):e=>(n||(n=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),queueMicrotask_1}var nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const n=requireQueueMicrotask();return nextTickBrowser=function(e,...t){t.length===0?n(e):n(()=>e(...t))},nextTickBrowser}var buffer={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(n){const e=base64Js,t=ieee754,o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=a,n.SlowBuffer=x,n.INSPECT_MAX_BYTES=50;const l=2147483647;n.kMaxLength=l,a.TYPED_ARRAY_SUPPORT=d(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function d(){try{const _=new Uint8Array(1),p={foo:function(){return 42}};return Object.setPrototypeOf(p,Uint8Array.prototype),Object.setPrototypeOf(_,p),_.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function u(_){if(_>l)throw new RangeError('The value "'+_+'" is invalid for option "size"');const p=new Uint8Array(_);return Object.setPrototypeOf(p,a.prototype),p}function a(_,p,g){if(typeof _=="number"){if(typeof p=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return b(_)}return c(_,p,g)}a.poolSize=8192;function c(_,p,g){if(typeof _=="string")return m(_,p);if(ArrayBuffer.isView(_))return v(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(ne(_,ArrayBuffer)||_&&ne(_.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ne(_,SharedArrayBuffer)||_&&ne(_.buffer,SharedArrayBuffer)))return T(_,p,g);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const O=_.valueOf&&_.valueOf();if(O!=null&&O!==_)return a.from(O,p,g);const L=j(_);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return a.from(_[Symbol.toPrimitive]("string"),p,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}a.from=function(_,p,g){return c(_,p,g)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function h(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function y(_,p,g){return h(_),_<=0?u(_):p!==void 0?typeof g=="string"?u(_).fill(p,g):u(_).fill(p):u(_)}a.alloc=function(_,p,g){return y(_,p,g)};function b(_){return h(_),u(_<0?0:N(_)|0)}a.allocUnsafe=function(_){return b(_)},a.allocUnsafeSlow=function(_){return b(_)};function m(_,p){if((typeof p!="string"||p==="")&&(p="utf8"),!a.isEncoding(p))throw new TypeError("Unknown encoding: "+p);const g=I(_,p)|0;let O=u(g);const L=O.write(_,p);return L!==g&&(O=O.slice(0,L)),O}function E(_){const p=_.length<0?0:N(_.length)|0,g=u(p);for(let O=0;O<p;O+=1)g[O]=_[O]&255;return g}function v(_){if(ne(_,Uint8Array)){const p=new Uint8Array(_);return T(p.buffer,p.byteOffset,p.byteLength)}return E(_)}function T(_,p,g){if(p<0||_.byteLength<p)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<p+(g||0))throw new RangeError('"length" is outside of buffer bounds');let O;return p===void 0&&g===void 0?O=new Uint8Array(_):g===void 0?O=new Uint8Array(_,p):O=new Uint8Array(_,p,g),Object.setPrototypeOf(O,a.prototype),O}function j(_){if(a.isBuffer(_)){const p=N(_.length)|0,g=u(p);return g.length===0||_.copy(g,0,0,p),g}if(_.length!==void 0)return typeof _.length!="number"||se(_.length)?u(0):E(_);if(_.type==="Buffer"&&Array.isArray(_.data))return E(_.data)}function N(_){if(_>=l)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+l.toString(16)+" bytes");return _|0}function x(_){return+_!=_&&(_=0),a.alloc(+_)}a.isBuffer=function(p){return p!=null&&p._isBuffer===!0&&p!==a.prototype},a.compare=function(p,g){if(ne(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),ne(g,Uint8Array)&&(g=a.from(g,g.offset,g.byteLength)),!a.isBuffer(p)||!a.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(p===g)return 0;let O=p.length,L=g.length;for(let k=0,z=Math.min(O,L);k<z;++k)if(p[k]!==g[k]){O=p[k],L=g[k];break}return O<L?-1:L<O?1:0},a.isEncoding=function(p){switch(String(p).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(p,g){if(!Array.isArray(p))throw new TypeError('"list" argument must be an Array of Buffers');if(p.length===0)return a.alloc(0);let O;if(g===void 0)for(g=0,O=0;O<p.length;++O)g+=p[O].length;const L=a.allocUnsafe(g);let k=0;for(O=0;O<p.length;++O){let z=p[O];if(ne(z,Uint8Array))k+z.length>L.length?(a.isBuffer(z)||(z=a.from(z)),z.copy(L,k)):Uint8Array.prototype.set.call(L,z,k);else if(a.isBuffer(z))z.copy(L,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=z.length}return L};function I(_,p){if(a.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||ne(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);const g=_.length,O=arguments.length>2&&arguments[2]===!0;if(!O&&g===0)return 0;let L=!1;for(;;)switch(p){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return Z(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return Y(_).length;default:if(L)return O?-1:Z(_).length;p=(""+p).toLowerCase(),L=!0}}a.byteLength=I;function w(_,p,g){let O=!1;if((p===void 0||p<0)&&(p=0),p>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,p>>>=0,g<=p))return"";for(_||(_="utf8");;)switch(_){case"hex":return ue(this,p,g);case"utf8":case"utf-8":return F(this,p,g);case"ascii":return W(this,p,g);case"latin1":case"binary":return le(this,p,g);case"base64":return D(this,p,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return de(this,p,g);default:if(O)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),O=!0}}a.prototype._isBuffer=!0;function S(_,p,g){const O=_[p];_[p]=_[g],_[g]=O}a.prototype.swap16=function(){const p=this.length;if(p%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<p;g+=2)S(this,g,g+1);return this},a.prototype.swap32=function(){const p=this.length;if(p%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<p;g+=4)S(this,g,g+3),S(this,g+1,g+2);return this},a.prototype.swap64=function(){const p=this.length;if(p%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<p;g+=8)S(this,g,g+7),S(this,g+1,g+6),S(this,g+2,g+5),S(this,g+3,g+4);return this},a.prototype.toString=function(){const p=this.length;return p===0?"":arguments.length===0?F(this,0,p):w.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(p){if(!a.isBuffer(p))throw new TypeError("Argument must be a Buffer");return this===p?!0:a.compare(this,p)===0},a.prototype.inspect=function(){let p="";const g=n.INSPECT_MAX_BYTES;return p=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(p+=" ... "),"<Buffer "+p+">"},o&&(a.prototype[o]=a.prototype.inspect),a.prototype.compare=function(p,g,O,L,k){if(ne(p,Uint8Array)&&(p=a.from(p,p.offset,p.byteLength)),!a.isBuffer(p))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof p);if(g===void 0&&(g=0),O===void 0&&(O=p?p.length:0),L===void 0&&(L=0),k===void 0&&(k=this.length),g<0||O>p.length||L<0||k>this.length)throw new RangeError("out of range index");if(L>=k&&g>=O)return 0;if(L>=k)return-1;if(g>=O)return 1;if(g>>>=0,O>>>=0,L>>>=0,k>>>=0,this===p)return 0;let z=k-L,_e=O-g;const Pe=Math.min(z,_e),xe=this.slice(L,k),Le=p.slice(g,O);for(let Ee=0;Ee<Pe;++Ee)if(xe[Ee]!==Le[Ee]){z=xe[Ee],_e=Le[Ee];break}return z<_e?-1:_e<z?1:0};function P(_,p,g,O,L){if(_.length===0)return-1;if(typeof g=="string"?(O=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,se(g)&&(g=L?0:_.length-1),g<0&&(g=_.length+g),g>=_.length){if(L)return-1;g=_.length-1}else if(g<0)if(L)g=0;else return-1;if(typeof p=="string"&&(p=a.from(p,O)),a.isBuffer(p))return p.length===0?-1:B(_,p,g,O,L);if(typeof p=="number")return p=p&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(_,p,g):Uint8Array.prototype.lastIndexOf.call(_,p,g):B(_,[p],g,O,L);throw new TypeError("val must be string, number or Buffer")}function B(_,p,g,O,L){let k=1,z=_.length,_e=p.length;if(O!==void 0&&(O=String(O).toLowerCase(),O==="ucs2"||O==="ucs-2"||O==="utf16le"||O==="utf-16le")){if(_.length<2||p.length<2)return-1;k=2,z/=2,_e/=2,g/=2}function Pe(Le,Ee){return k===1?Le[Ee]:Le.readUInt16BE(Ee*k)}let xe;if(L){let Le=-1;for(xe=g;xe<z;xe++)if(Pe(_,xe)===Pe(p,Le===-1?0:xe-Le)){if(Le===-1&&(Le=xe),xe-Le+1===_e)return Le*k}else Le!==-1&&(xe-=xe-Le),Le=-1}else for(g+_e>z&&(g=z-_e),xe=g;xe>=0;xe--){let Le=!0;for(let Ee=0;Ee<_e;Ee++)if(Pe(_,xe+Ee)!==Pe(p,Ee)){Le=!1;break}if(Le)return xe}return-1}a.prototype.includes=function(p,g,O){return this.indexOf(p,g,O)!==-1},a.prototype.indexOf=function(p,g,O){return P(this,p,g,O,!0)},a.prototype.lastIndexOf=function(p,g,O){return P(this,p,g,O,!1)};function H(_,p,g,O){g=Number(g)||0;const L=_.length-g;O?(O=Number(O),O>L&&(O=L)):O=L;const k=p.length;O>k/2&&(O=k/2);let z;for(z=0;z<O;++z){const _e=parseInt(p.substr(z*2,2),16);if(se(_e))return z;_[g+z]=_e}return z}function q(_,p,g,O){return te(Z(p,_.length-g),_,g,O)}function V(_,p,g,O){return te(ie(p),_,g,O)}function $(_,p,g,O){return te(Y(p),_,g,O)}function ee(_,p,g,O){return te(oe(p,_.length-g),_,g,O)}a.prototype.write=function(p,g,O,L){if(g===void 0)L="utf8",O=this.length,g=0;else if(O===void 0&&typeof g=="string")L=g,O=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(O)?(O=O>>>0,L===void 0&&(L="utf8")):(L=O,O=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-g;if((O===void 0||O>k)&&(O=k),p.length>0&&(O<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let z=!1;for(;;)switch(L){case"hex":return H(this,p,g,O);case"utf8":case"utf-8":return q(this,p,g,O);case"ascii":case"latin1":case"binary":return V(this,p,g,O);case"base64":return $(this,p,g,O);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ee(this,p,g,O);default:if(z)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),z=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(_,p,g){return p===0&&g===_.length?e.fromByteArray(_):e.fromByteArray(_.slice(p,g))}function F(_,p,g){g=Math.min(_.length,g);const O=[];let L=p;for(;L<g;){const k=_[L];let z=null,_e=k>239?4:k>223?3:k>191?2:1;if(L+_e<=g){let Pe,xe,Le,Ee;switch(_e){case 1:k<128&&(z=k);break;case 2:Pe=_[L+1],(Pe&192)===128&&(Ee=(k&31)<<6|Pe&63,Ee>127&&(z=Ee));break;case 3:Pe=_[L+1],xe=_[L+2],(Pe&192)===128&&(xe&192)===128&&(Ee=(k&15)<<12|(Pe&63)<<6|xe&63,Ee>2047&&(Ee<55296||Ee>57343)&&(z=Ee));break;case 4:Pe=_[L+1],xe=_[L+2],Le=_[L+3],(Pe&192)===128&&(xe&192)===128&&(Le&192)===128&&(Ee=(k&15)<<18|(Pe&63)<<12|(xe&63)<<6|Le&63,Ee>65535&&Ee<1114112&&(z=Ee))}}z===null?(z=65533,_e=1):z>65535&&(z-=65536,O.push(z>>>10&1023|55296),z=56320|z&1023),O.push(z),L+=_e}return X(O)}const Q=4096;function X(_){const p=_.length;if(p<=Q)return String.fromCharCode.apply(String,_);let g="",O=0;for(;O<p;)g+=String.fromCharCode.apply(String,_.slice(O,O+=Q));return g}function W(_,p,g){let O="";g=Math.min(_.length,g);for(let L=p;L<g;++L)O+=String.fromCharCode(_[L]&127);return O}function le(_,p,g){let O="";g=Math.min(_.length,g);for(let L=p;L<g;++L)O+=String.fromCharCode(_[L]);return O}function ue(_,p,g){const O=_.length;(!p||p<0)&&(p=0),(!g||g<0||g>O)&&(g=O);let L="";for(let k=p;k<g;++k)L+=fe[_[k]];return L}function de(_,p,g){const O=_.slice(p,g);let L="";for(let k=0;k<O.length-1;k+=2)L+=String.fromCharCode(O[k]+O[k+1]*256);return L}a.prototype.slice=function(p,g){const O=this.length;p=~~p,g=g===void 0?O:~~g,p<0?(p+=O,p<0&&(p=0)):p>O&&(p=O),g<0?(g+=O,g<0&&(g=0)):g>O&&(g=O),g<p&&(g=p);const L=this.subarray(p,g);return Object.setPrototypeOf(L,a.prototype),L};function ce(_,p,g){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+p>g)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=this[p],k=1,z=0;for(;++z<g&&(k*=256);)L+=this[p+z]*k;return L},a.prototype.readUintBE=a.prototype.readUIntBE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=this[p+--g],k=1;for(;g>0&&(k*=256);)L+=this[p+--g]*k;return L},a.prototype.readUint8=a.prototype.readUInt8=function(p,g){return p=p>>>0,g||ce(p,1,this.length),this[p]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(p,g){return p=p>>>0,g||ce(p,2,this.length),this[p]|this[p+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(p,g){return p=p>>>0,g||ce(p,2,this.length),this[p]<<8|this[p+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),(this[p]|this[p+1]<<8|this[p+2]<<16)+this[p+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),this[p]*16777216+(this[p+1]<<16|this[p+2]<<8|this[p+3])},a.prototype.readBigUInt64LE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24,k=this[++p]+this[++p]*2**8+this[++p]*2**16+O*2**24;return BigInt(L)+(BigInt(k)<<BigInt(32))}),a.prototype.readBigUInt64BE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=g*2**24+this[++p]*2**16+this[++p]*2**8+this[++p],k=this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+O;return(BigInt(L)<<BigInt(32))+BigInt(k)}),a.prototype.readIntLE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=this[p],k=1,z=0;for(;++z<g&&(k*=256);)L+=this[p+z]*k;return k*=128,L>=k&&(L-=Math.pow(2,8*g)),L},a.prototype.readIntBE=function(p,g,O){p=p>>>0,g=g>>>0,O||ce(p,g,this.length);let L=g,k=1,z=this[p+--L];for(;L>0&&(k*=256);)z+=this[p+--L]*k;return k*=128,z>=k&&(z-=Math.pow(2,8*g)),z},a.prototype.readInt8=function(p,g){return p=p>>>0,g||ce(p,1,this.length),this[p]&128?(255-this[p]+1)*-1:this[p]},a.prototype.readInt16LE=function(p,g){p=p>>>0,g||ce(p,2,this.length);const O=this[p]|this[p+1]<<8;return O&32768?O|4294901760:O},a.prototype.readInt16BE=function(p,g){p=p>>>0,g||ce(p,2,this.length);const O=this[p+1]|this[p]<<8;return O&32768?O|4294901760:O},a.prototype.readInt32LE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),this[p]|this[p+1]<<8|this[p+2]<<16|this[p+3]<<24},a.prototype.readInt32BE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),this[p]<<24|this[p+1]<<16|this[p+2]<<8|this[p+3]},a.prototype.readBigInt64LE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=this[p+4]+this[p+5]*2**8+this[p+6]*2**16+(O<<24);return(BigInt(L)<<BigInt(32))+BigInt(g+this[++p]*2**8+this[++p]*2**16+this[++p]*2**24)}),a.prototype.readBigInt64BE=ye(function(p){p=p>>>0,M(p,"offset");const g=this[p],O=this[p+7];(g===void 0||O===void 0)&&G(p,this.length-8);const L=(g<<24)+this[++p]*2**16+this[++p]*2**8+this[++p];return(BigInt(L)<<BigInt(32))+BigInt(this[++p]*2**24+this[++p]*2**16+this[++p]*2**8+O)}),a.prototype.readFloatLE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),t.read(this,p,!0,23,4)},a.prototype.readFloatBE=function(p,g){return p=p>>>0,g||ce(p,4,this.length),t.read(this,p,!1,23,4)},a.prototype.readDoubleLE=function(p,g){return p=p>>>0,g||ce(p,8,this.length),t.read(this,p,!0,52,8)},a.prototype.readDoubleBE=function(p,g){return p=p>>>0,g||ce(p,8,this.length),t.read(this,p,!1,52,8)};function ge(_,p,g,O,L,k){if(!a.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(p>L||p<k)throw new RangeError('"value" argument is out of bounds');if(g+O>_.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(p,g,O,L){if(p=+p,g=g>>>0,O=O>>>0,!L){const _e=Math.pow(2,8*O)-1;ge(this,p,g,O,_e,0)}let k=1,z=0;for(this[g]=p&255;++z<O&&(k*=256);)this[g+z]=p/k&255;return g+O},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(p,g,O,L){if(p=+p,g=g>>>0,O=O>>>0,!L){const _e=Math.pow(2,8*O)-1;ge(this,p,g,O,_e,0)}let k=O-1,z=1;for(this[g+k]=p&255;--k>=0&&(z*=256);)this[g+k]=p/z&255;return g+O},a.prototype.writeUint8=a.prototype.writeUInt8=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,1,255,0),this[g]=p&255,g+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,65535,0),this[g]=p&255,this[g+1]=p>>>8,g+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,65535,0),this[g]=p>>>8,this[g+1]=p&255,g+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,4294967295,0),this[g+3]=p>>>24,this[g+2]=p>>>16,this[g+1]=p>>>8,this[g]=p&255,g+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,4294967295,0),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4};function Oe(_,p,g,O,L){De(p,O,L,_,g,7);let k=Number(p&BigInt(4294967295));_[g++]=k,k=k>>8,_[g++]=k,k=k>>8,_[g++]=k,k=k>>8,_[g++]=k;let z=Number(p>>BigInt(32)&BigInt(4294967295));return _[g++]=z,z=z>>8,_[g++]=z,z=z>>8,_[g++]=z,z=z>>8,_[g++]=z,g}function je(_,p,g,O,L){De(p,O,L,_,g,7);let k=Number(p&BigInt(4294967295));_[g+7]=k,k=k>>8,_[g+6]=k,k=k>>8,_[g+5]=k,k=k>>8,_[g+4]=k;let z=Number(p>>BigInt(32)&BigInt(4294967295));return _[g+3]=z,z=z>>8,_[g+2]=z,z=z>>8,_[g+1]=z,z=z>>8,_[g]=z,g+8}a.prototype.writeBigUInt64LE=ye(function(p,g=0){return Oe(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=ye(function(p,g=0){return je(this,p,g,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(p,g,O,L){if(p=+p,g=g>>>0,!L){const Pe=Math.pow(2,8*O-1);ge(this,p,g,O,Pe-1,-Pe)}let k=0,z=1,_e=0;for(this[g]=p&255;++k<O&&(z*=256);)p<0&&_e===0&&this[g+k-1]!==0&&(_e=1),this[g+k]=(p/z>>0)-_e&255;return g+O},a.prototype.writeIntBE=function(p,g,O,L){if(p=+p,g=g>>>0,!L){const Pe=Math.pow(2,8*O-1);ge(this,p,g,O,Pe-1,-Pe)}let k=O-1,z=1,_e=0;for(this[g+k]=p&255;--k>=0&&(z*=256);)p<0&&_e===0&&this[g+k+1]!==0&&(_e=1),this[g+k]=(p/z>>0)-_e&255;return g+O},a.prototype.writeInt8=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,1,127,-128),p<0&&(p=255+p+1),this[g]=p&255,g+1},a.prototype.writeInt16LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,32767,-32768),this[g]=p&255,this[g+1]=p>>>8,g+2},a.prototype.writeInt16BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,2,32767,-32768),this[g]=p>>>8,this[g+1]=p&255,g+2},a.prototype.writeInt32LE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,2147483647,-2147483648),this[g]=p&255,this[g+1]=p>>>8,this[g+2]=p>>>16,this[g+3]=p>>>24,g+4},a.prototype.writeInt32BE=function(p,g,O){return p=+p,g=g>>>0,O||ge(this,p,g,4,2147483647,-2147483648),p<0&&(p=4294967295+p+1),this[g]=p>>>24,this[g+1]=p>>>16,this[g+2]=p>>>8,this[g+3]=p&255,g+4},a.prototype.writeBigInt64LE=ye(function(p,g=0){return Oe(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=ye(function(p,g=0){return je(this,p,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ie(_,p,g,O,L,k){if(g+O>_.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function Se(_,p,g,O,L){return p=+p,g=g>>>0,L||Ie(_,p,g,4),t.write(_,p,g,O,23,4),g+4}a.prototype.writeFloatLE=function(p,g,O){return Se(this,p,g,!0,O)},a.prototype.writeFloatBE=function(p,g,O){return Se(this,p,g,!1,O)};function he(_,p,g,O,L){return p=+p,g=g>>>0,L||Ie(_,p,g,8),t.write(_,p,g,O,52,8),g+8}a.prototype.writeDoubleLE=function(p,g,O){return he(this,p,g,!0,O)},a.prototype.writeDoubleBE=function(p,g,O){return he(this,p,g,!1,O)},a.prototype.copy=function(p,g,O,L){if(!a.isBuffer(p))throw new TypeError("argument should be a Buffer");if(O||(O=0),!L&&L!==0&&(L=this.length),g>=p.length&&(g=p.length),g||(g=0),L>0&&L<O&&(L=O),L===O||p.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(O<0||O>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),p.length-g<L-O&&(L=p.length-g+O);const k=L-O;return this===p&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,O,L):Uint8Array.prototype.set.call(p,this.subarray(O,L),g),k},a.prototype.fill=function(p,g,O,L){if(typeof p=="string"){if(typeof g=="string"?(L=g,g=0,O=this.length):typeof O=="string"&&(L=O,O=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(p.length===1){const z=p.charCodeAt(0);(L==="utf8"&&z<128||L==="latin1")&&(p=z)}}else typeof p=="number"?p=p&255:typeof p=="boolean"&&(p=Number(p));if(g<0||this.length<g||this.length<O)throw new RangeError("Out of range index");if(O<=g)return this;g=g>>>0,O=O===void 0?this.length:O>>>0,p||(p=0);let k;if(typeof p=="number")for(k=g;k<O;++k)this[k]=p;else{const z=a.isBuffer(p)?p:a.from(p,L),_e=z.length;if(_e===0)throw new TypeError('The value "'+p+'" is invalid for argument "value"');for(k=0;k<O-g;++k)this[k+g]=z[k%_e]}return this};const Ae={};function Re(_,p,g){Ae[_]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:p.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_}]`,this.stack,delete this.name}get code(){return _}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${_}]: ${this.message}`}}}Re("ERR_BUFFER_OUT_OF_BOUNDS",function(_){return _?`${_} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Re("ERR_INVALID_ARG_TYPE",function(_,p){return`The "${_}" argument must be of type number. Received type ${typeof p}`},TypeError),Re("ERR_OUT_OF_RANGE",function(_,p,g){let O=`The value of "${_}" is out of range.`,L=g;return Number.isInteger(g)&&Math.abs(g)>2**32?L=Be(String(g)):typeof g=="bigint"&&(L=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(L=Be(L)),L+="n"),O+=` It must be ${p}. Received ${L}`,O},RangeError);function Be(_){let p="",g=_.length;const O=_[0]==="-"?1:0;for(;g>=O+4;g-=3)p=`_${_.slice(g-3,g)}${p}`;return`${_.slice(0,g)}${p}`}function Ne(_,p,g){M(p,"offset"),(_[p]===void 0||_[p+g]===void 0)&&G(p,_.length-(g+1))}function De(_,p,g,O,L,k){if(_>g||_<p){const z=typeof p=="bigint"?"n":"";let _e;throw k>3?p===0||p===BigInt(0)?_e=`>= 0${z} and < 2${z} ** ${(k+1)*8}${z}`:_e=`>= -(2${z} ** ${(k+1)*8-1}${z}) and < 2 ** ${(k+1)*8-1}${z}`:_e=`>= ${p}${z} and <= ${g}${z}`,new Ae.ERR_OUT_OF_RANGE("value",_e,_)}Ne(O,L,k)}function M(_,p){if(typeof _!="number")throw new Ae.ERR_INVALID_ARG_TYPE(p,"number",_)}function G(_,p,g){throw Math.floor(_)!==_?(M(_,g),new Ae.ERR_OUT_OF_RANGE(g||"offset","an integer",_)):p<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE(g||"offset",`>= ${g?1:0} and <= ${p}`,_)}const J=/[^+/0-9A-Za-z-_]/g;function ae(_){if(_=_.split("=")[0],_=_.trim().replace(J,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function Z(_,p){p=p||1/0;let g;const O=_.length;let L=null;const k=[];for(let z=0;z<O;++z){if(g=_.charCodeAt(z),g>55295&&g<57344){if(!L){if(g>56319){(p-=3)>-1&&k.push(239,191,189);continue}else if(z+1===O){(p-=3)>-1&&k.push(239,191,189);continue}L=g;continue}if(g<56320){(p-=3)>-1&&k.push(239,191,189),L=g;continue}g=(L-55296<<10|g-56320)+65536}else L&&(p-=3)>-1&&k.push(239,191,189);if(L=null,g<128){if((p-=1)<0)break;k.push(g)}else if(g<2048){if((p-=2)<0)break;k.push(g>>6|192,g&63|128)}else if(g<65536){if((p-=3)<0)break;k.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((p-=4)<0)break;k.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return k}function ie(_){const p=[];for(let g=0;g<_.length;++g)p.push(_.charCodeAt(g)&255);return p}function oe(_,p){let g,O,L;const k=[];for(let z=0;z<_.length&&!((p-=2)<0);++z)g=_.charCodeAt(z),O=g>>8,L=g%256,k.push(L),k.push(O);return k}function Y(_){return e.toByteArray(ae(_))}function te(_,p,g,O){let L;for(L=0;L<O&&!(L+g>=p.length||L>=_.length);++L)p[L+g]=_[L];return L}function ne(_,p){return _ instanceof p||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===p.name}function se(_){return _!==_}const fe=function(){const _="0123456789abcdef",p=new Array(256);for(let g=0;g<16;++g){const O=g*16;for(let L=0;L<16;++L)p[O+L]=_[g]+_[L]}return p}();function ye(_){return typeof BigInt>"u"?ve:_}function ve(){throw new Error("BigInt not supported")}}(buffer)),buffer}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:n,AbstractKeyIterator:e,AbstractValueIterator:t}=abstractIterator,o=Symbol("unfix"),l=Symbol("iterator"),d=Symbol("handleOne"),u=Symbol("handleMany"),a=Symbol("callback");class c extends n{constructor(m,E,v,T){super(m,E),this[l]=v,this[o]=T,this[d]=this[d].bind(this),this[u]=this[u].bind(this),this[a]=null}[d](m,E,v){const T=this[a];if(m)return T(m);E!==void 0&&(E=this[o](E)),T(m,E,v)}[u](m,E){const v=this[a];if(m)return v(m);for(const T of E){const j=T[0];j!==void 0&&(T[0]=this[o](j))}v(m,E)}}class h extends e{constructor(m,E,v,T){super(m,E),this[l]=v,this[o]=T,this[d]=this[d].bind(this),this[u]=this[u].bind(this),this[a]=null}[d](m,E){const v=this[a];if(m)return v(m);E!==void 0&&(E=this[o](E)),v(m,E)}[u](m,E){const v=this[a];if(m)return v(m);for(let T=0;T<E.length;T++){const j=E[T];j!==void 0&&(E[T]=this[o](j))}v(m,E)}}class y extends t{constructor(m,E,v){super(m,E),this[l]=v}}for(const b of[c,h])b.prototype._next=function(m){this[a]=m,this[l].next(this[d])},b.prototype._nextv=function(m,E,v){this[a]=v,this[l].nextv(m,E,this[u])},b.prototype._all=function(m,E){this[a]=E,this[l].all(m,this[u])};for(const b of[y])b.prototype._next=function(m){this[l].next(m)},b.prototype._nextv=function(m,E,v){this[l].nextv(m,E,v)},b.prototype._all=function(m,E){this[l].all(m,E)};for(const b of[c,h,y])b.prototype._seek=function(m,E){this[l].seek(m,E)},b.prototype._close=function(m){this[l].close(m)};return abstractSublevelIterator.AbstractSublevelIterator=c,abstractSublevelIterator.AbstractSublevelKeyIterator=h,abstractSublevelIterator.AbstractSublevelValueIterator=y,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const n=moduleError,{Buffer:e}=requireBuffer()||{},{AbstractSublevelIterator:t,AbstractSublevelKeyIterator:o,AbstractSublevelValueIterator:l}=requireAbstractSublevelIterator(),d=Symbol("prefix"),u=Symbol("upperBound"),a=Symbol("prefixRange"),c=Symbol("parent"),h=Symbol("unfix"),y=new TextEncoder,b={separator:"!"};abstractSublevel=function({AbstractLevel:N}){class x extends N{static defaults(w){if(typeof w=="string")throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(w&&w.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return w==null?b:w.separator?w:{...w,separator:"!"}}constructor(w,S,P){const{separator:B,manifest:H,...q}=x.defaults(P);S=j(S,B);const V=B.charCodeAt(0)+1,$=w[c]||w;if(!y.encode(S).every(F=>F>V&&F<127))throw new n(`Prefix must use bytes > ${V} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(m($,H),q);const ee=(w.prefix||"")+B+S+B,D=ee.slice(0,-1)+String.fromCharCode(V);this[c]=$,this[d]=new v(ee),this[u]=new v(D),this[h]=new T,this.nextTick=$.nextTick}prefixKey(w,S){if(S==="utf8")return this[d].utf8+w;if(w.byteLength===0)return this[d][S];if(S==="view"){const P=this[d].view,B=new Uint8Array(P.byteLength+w.byteLength);return B.set(P,0),B.set(w,P.byteLength),B}else{const P=this[d].buffer;return e.concat([P,w],P.byteLength+w.byteLength)}}[a](w,S){w.gte!==void 0?w.gte=this.prefixKey(w.gte,S):w.gt!==void 0?w.gt=this.prefixKey(w.gt,S):w.gte=this[d][S],w.lte!==void 0?w.lte=this.prefixKey(w.lte,S):w.lt!==void 0?w.lt=this.prefixKey(w.lt,S):w.lte=this[u][S]}get prefix(){return this[d].utf8}get db(){return this[c]}_open(w,S){this[c].open({passive:!0},S)}_put(w,S,P,B){this[c].put(w,S,P,B)}_get(w,S,P){this[c].get(w,S,P)}_getMany(w,S,P){this[c].getMany(w,S,P)}_del(w,S,P){this[c].del(w,S,P)}_batch(w,S,P){this[c].batch(w,S,P)}_clear(w,S){this[a](w,w.keyEncoding),this[c].clear(w,S)}_iterator(w){this[a](w,w.keyEncoding);const S=this[c].iterator(w),P=this[h].get(this[d].utf8.length,w.keyEncoding);return new t(this,w,S,P)}_keys(w){this[a](w,w.keyEncoding);const S=this[c].keys(w),P=this[h].get(this[d].utf8.length,w.keyEncoding);return new o(this,w,S,P)}_values(w){this[a](w,w.keyEncoding);const S=this[c].values(w);return new l(this,w,S)}}return{AbstractSublevel:x}};const m=function(N,x){return{...N.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...x,encodings:{utf8:E(N,"utf8"),buffer:E(N,"buffer"),view:E(N,"view")}}},E=function(N,x){return N.supports.encodings[x]?N.keyEncoding(x).name===x:!1};class v{constructor(x){this.utf8=x,this.view=y.encode(x),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class T{constructor(){this.cache=new Map}get(x,I){let w=this.cache.get(I);return w===void 0&&(I==="view"?w=function(S,P){return P.subarray(S)}.bind(null,x):w=function(S,P){return P.slice(S)}.bind(null,x),this.cache.set(I,w)),w}}const j=function(N,x){let I=0,w=N.length;for(;I<w&&N[I]===x;)I++;for(;w>I&&N[w-1]===x;)w--;return N.slice(I,w)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=eventsExports,{fromCallback}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$6,rangeOptions$1=rangeOptions_1,kPromise=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};let AbstractLevel$1=class extends EventEmitter{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=getOptions(t);const{keyEncoding:o,valueEncoding:l,passive:d,...u}=t;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=u,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(o||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(l||"utf8");for(const a of this[kTranscoder].encodings())this.supports.encodings[a.commonName]||(this.supports.encodings[a.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,t){t=getCallback(e,t),t=fromCallback(t,kPromise),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const o=l=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,l?()=>o(l):o):this[kStatus]!=="open"?t(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:l})):t()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,o):this.nextTick(o):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,l=>{if(l){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),o(l)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),o()})):this[kStatus]==="open"?this.nextTick(o):this.once(kLanded,()=>this.open(e,t)),t[kPromise]}_open(e,t){this.nextTick(t)}close(e){e=fromCallback(e,kPromise);const t=o=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,o?t(o):t):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:o})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const o=l=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),t(l)};this[kCloseResources](()=>{this._close(l=>{if(l)return o(l);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),t()})})}else this[kStatus]==="closed"?this.nextTick(t):this.once(kLanded,()=>this.close(e));return e[kPromise]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let t=this[kResources].size,o=!0;const l=()=>{--t===0&&(o?this.nextTick(e):e())};for(const d of this[kResources])d.close(l);o=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,t,o){if(o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];const l=this._checkKey(e);if(l)return this.nextTick(o,l),o[kPromise];const d=this.keyEncoding(t.keyEncoding),u=this.valueEncoding(t.valueEncoding),a=d.format,c=u.format;return(t.keyEncoding!==a||t.valueEncoding!==c)&&(t=Object.assign({},t,{keyEncoding:a,valueEncoding:c})),this._get(this.prefixKey(d.encode(e),a),t,(h,y)=>{if(h)return(h.code==="LEVEL_NOT_FOUND"||h.notFound||/NotFound/i.test(h))&&(h.code||(h.code="LEVEL_NOT_FOUND"),h.notFound||(h.notFound=!0),h.status||(h.status=404)),o(h);try{y=u.decode(y)}catch(b){return o(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:b}))}o(null,y)}),o[kPromise]}_get(e,t,o){this.nextTick(o,new Error("NotFound"))}getMany(e,t,o){if(o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];if(!Array.isArray(e))return this.nextTick(o,new TypeError("The first argument 'keys' must be an array")),o[kPromise];if(e.length===0)return this.nextTick(o,null,[]),o[kPromise];const l=this.keyEncoding(t.keyEncoding),d=this.valueEncoding(t.valueEncoding),u=l.format,a=d.format;(t.keyEncoding!==u||t.valueEncoding!==a)&&(t=Object.assign({},t,{keyEncoding:u,valueEncoding:a}));const c=new Array(e.length);for(let h=0;h<e.length;h++){const y=e[h],b=this._checkKey(y);if(b)return this.nextTick(o,b),o[kPromise];c[h]=this.prefixKey(l.encode(y),u)}return this._getMany(c,t,(h,y)=>{if(h)return o(h);try{for(let b=0;b<y.length;b++)y[b]!==void 0&&(y[b]=d.decode(y[b]))}catch(b){return o(new ModuleError$1(`Could not decode one or more of ${y.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:b}))}o(null,y)}),o[kPromise]}_getMany(e,t,o){this.nextTick(o,null,new Array(e.length).fill(void 0))}put(e,t,o,l){if(l=getCallback(o,l),l=fromCallback(l,kPromise),o=getOptions(o,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,t,o,l)),l[kPromise];if(maybeError(this,l))return l[kPromise];const d=this._checkKey(e)||this._checkValue(t);if(d)return this.nextTick(l,d),l[kPromise];const u=this.keyEncoding(o.keyEncoding),a=this.valueEncoding(o.valueEncoding),c=u.format,h=a.format;(o.keyEncoding!==c||o.valueEncoding!==h)&&(o=Object.assign({},o,{keyEncoding:c,valueEncoding:h}));const y=this.prefixKey(u.encode(e),c),b=a.encode(t);return this._put(y,b,o,m=>{if(m)return l(m);this.emit("put",e,t),l()}),l[kPromise]}_put(e,t,o,l){this.nextTick(l)}del(e,t,o){if(o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];const l=this._checkKey(e);if(l)return this.nextTick(o,l),o[kPromise];const d=this.keyEncoding(t.keyEncoding),u=d.format;return t.keyEncoding!==u&&(t=Object.assign({},t,{keyEncoding:u})),this._del(this.prefixKey(d.encode(e),u),t,a=>{if(a)return o(a);this.emit("del",e),o()}),o[kPromise]}_del(e,t,o){this.nextTick(o)}batch(e,t,o){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?o=e:o=getCallback(t,o),o=fromCallback(o,kPromise),t=getOptions(t,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,t,o)),o[kPromise];if(maybeError(this,o))return o[kPromise];if(!Array.isArray(e))return this.nextTick(o,new TypeError("The first argument 'operations' must be an array")),o[kPromise];if(e.length===0)return this.nextTick(o),o[kPromise];const l=new Array(e.length),{keyEncoding:d,valueEncoding:u,...a}=t;for(let c=0;c<e.length;c++){if(typeof e[c]!="object"||e[c]===null)return this.nextTick(o,new TypeError("A batch operation must be an object")),o[kPromise];const h=Object.assign({},e[c]);if(h.type!=="put"&&h.type!=="del")return this.nextTick(o,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),o[kPromise];const y=this._checkKey(h.key);if(y)return this.nextTick(o,y),o[kPromise];const b=h.sublevel!=null?h.sublevel:this,m=b.keyEncoding(h.keyEncoding||d),E=m.format;if(h.key=b.prefixKey(m.encode(h.key),E),h.keyEncoding=E,h.type==="put"){const v=this._checkValue(h.value);if(v)return this.nextTick(o,v),o[kPromise];const T=b.valueEncoding(h.valueEncoding||u);h.value=T.encode(h.value),h.valueEncoding=T.format}b!==this&&(h.sublevel=null),l[c]=h}return this._batch(l,a,c=>{if(c)return o(c);this.emit("batch",e),o()}),o[kPromise]}_batch(e,t,o){this.nextTick(o)}sublevel(e,t){return this._sublevel(e,AbstractSublevel.defaults(t))}_sublevel(e,t){return new AbstractSublevel(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=getCallback(e,t),t=fromCallback(t,kPromise),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,t)),t[kPromise];if(maybeError(this,t))return t[kPromise];const o=e,l=this.keyEncoding(e.keyEncoding);return e=rangeOptions$1(e,l),e.keyEncoding=l.format,e.limit===0?this.nextTick(t):this._clear(e,d=>{if(d)return t(d);this.emit("clear",o),t()}),t[kPromise]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=t.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=t.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),o=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=o,e.keyEncoding=t.format,e.valueEncoding=o.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(n,e){return n[kStatus]!=="open"?(n.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(n){return Object.keys(n.supports.encodings).filter(e=>!!n.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;var rbtree=createRBTree,RED=0,BLACK=1;function RBNode(n,e,t,o,l,d){this._color=n,this.key=e,this.value=t,this.left=o,this.right=l,this._count=d}function cloneNode(n){return new RBNode(n._color,n.key,n.value,n.left,n.right,n._count)}function repaint(n,e){return new RBNode(n,e.key,e.value,e.left,e.right,e._count)}function recount(n){n._count=1+(n.left?n.left._count:0)+(n.right?n.right._count:0)}function RedBlackTree(n,e){this._compare=n,this.root=e}var proto=RedBlackTree.prototype;Object.defineProperty(proto,"keys",{get:function(){var n=[];return this.forEach(function(e,t){n.push(e)}),n}});Object.defineProperty(proto,"values",{get:function(){var n=[];return this.forEach(function(e,t){n.push(t)}),n}});Object.defineProperty(proto,"length",{get:function(){return this.root?this.root._count:0}});proto.insert=function(n,e){for(var t=this._compare,o=this.root,l=[],d=[];o;){var u=t(n,o.key);l.push(o),d.push(u),u<=0?o=o.left:o=o.right}l.push(new RBNode(RED,n,e,null,null,1));for(var a=l.length-2;a>=0;--a){var o=l[a];d[a]<=0?l[a]=new RBNode(o._color,o.key,o.value,l[a+1],o.right,o._count+1):l[a]=new RBNode(o._color,o.key,o.value,o.left,l[a+1],o._count+1)}for(var a=l.length-1;a>1;--a){var c=l[a-1],o=l[a];if(c._color===BLACK||o._color===BLACK)break;var h=l[a-2];if(h.left===c)if(c.left===o){var y=h.right;if(y&&y._color===RED)c._color=BLACK,h.right=repaint(BLACK,y),h._color=RED,a-=1;else{if(h._color=RED,h.left=c.right,c._color=BLACK,c.right=h,l[a-2]=c,l[a-1]=o,recount(h),recount(c),a>=3){var b=l[a-3];b.left===h?b.left=c:b.right=c}break}}else{var y=h.right;if(y&&y._color===RED)c._color=BLACK,h.right=repaint(BLACK,y),h._color=RED,a-=1;else{if(c.right=o.left,h._color=RED,h.left=o.right,o._color=BLACK,o.left=c,o.right=h,l[a-2]=o,l[a-1]=c,recount(h),recount(c),recount(o),a>=3){var b=l[a-3];b.left===h?b.left=o:b.right=o}break}}else if(c.right===o){var y=h.left;if(y&&y._color===RED)c._color=BLACK,h.left=repaint(BLACK,y),h._color=RED,a-=1;else{if(h._color=RED,h.right=c.left,c._color=BLACK,c.left=h,l[a-2]=c,l[a-1]=o,recount(h),recount(c),a>=3){var b=l[a-3];b.right===h?b.right=c:b.left=c}break}}else{var y=h.left;if(y&&y._color===RED)c._color=BLACK,h.left=repaint(BLACK,y),h._color=RED,a-=1;else{if(c.left=o.right,h._color=RED,h.right=o.left,o._color=BLACK,o.right=c,o.left=h,l[a-2]=o,l[a-1]=c,recount(h),recount(c),recount(o),a>=3){var b=l[a-3];b.right===h?b.right=o:b.left=o}break}}}return l[0]._color=BLACK,new RedBlackTree(t,l[0])};function doVisitFull(n,e){if(e.left){var t=doVisitFull(n,e.left);if(t)return t}var t=n(e.key,e.value);if(t)return t;if(e.right)return doVisitFull(n,e.right)}function doVisitHalf(n,e,t,o){var l=e(n,o.key);if(l<=0){if(o.left){var d=doVisitHalf(n,e,t,o.left);if(d)return d}var d=t(o.key,o.value);if(d)return d}if(o.right)return doVisitHalf(n,e,t,o.right)}function doVisit(n,e,t,o,l){var d=t(n,l.key),u=t(e,l.key),a;if(d<=0&&(l.left&&(a=doVisit(n,e,t,o,l.left),a)||u>0&&(a=o(l.key,l.value),a)))return a;if(u>0&&l.right)return doVisit(n,e,t,o,l.right)}proto.forEach=function(e,t,o){if(this.root)switch(arguments.length){case 1:return doVisitFull(e,this.root);case 2:return doVisitHalf(t,this._compare,e,this.root);case 3:return this._compare(t,o)>=0?void 0:doVisit(t,o,this._compare,e,this.root)}};Object.defineProperty(proto,"begin",{get:function(){for(var n=[],e=this.root;e;)n.push(e),e=e.left;return new RedBlackTreeIterator(this,n)}});Object.defineProperty(proto,"end",{get:function(){for(var n=[],e=this.root;e;)n.push(e),e=e.right;return new RedBlackTreeIterator(this,n)}});proto.at=function(n){if(n<0)return new RedBlackTreeIterator(this,[]);for(var e=this.root,t=[];;){if(t.push(e),e.left){if(n<e.left._count){e=e.left;continue}n-=e.left._count}if(!n)return new RedBlackTreeIterator(this,t);if(n-=1,e.right){if(n>=e.right._count)break;e=e.right}else break}return new RedBlackTreeIterator(this,[])};proto.ge=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d<=0&&(l=o.length),d<=0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.gt=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d<0&&(l=o.length),d<0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.lt=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d>0&&(l=o.length),d<=0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.le=function(n){for(var e=this._compare,t=this.root,o=[],l=0;t;){var d=e(n,t.key);o.push(t),d>=0&&(l=o.length),d<0?t=t.left:t=t.right}return o.length=l,new RedBlackTreeIterator(this,o)};proto.find=function(n){for(var e=this._compare,t=this.root,o=[];t;){var l=e(n,t.key);if(o.push(t),l===0)return new RedBlackTreeIterator(this,o);l<=0?t=t.left:t=t.right}return new RedBlackTreeIterator(this,[])};proto.remove=function(n){var e=this.find(n);return e?e.remove():this};proto.get=function(n){for(var e=this._compare,t=this.root;t;){var o=e(n,t.key);if(o===0)return t.value;o<=0?t=t.left:t=t.right}};function RedBlackTreeIterator(n,e){this.tree=n,this._stack=e}var iproto=RedBlackTreeIterator.prototype;Object.defineProperty(iproto,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(iproto,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});iproto.clone=function(){return new RedBlackTreeIterator(this.tree,this._stack.slice())};function swapNode(n,e){n.key=e.key,n.value=e.value,n.left=e.left,n.right=e.right,n._color=e._color,n._count=e._count}function fixDoubleBlack(n){for(var e,t,o,l,d=n.length-1;d>=0;--d){if(e=n[d],d===0){e._color=BLACK;return}if(t=n[d-1],t.left===e){if(o=t.right,o.right&&o.right._color===RED){if(o=t.right=cloneNode(o),l=o.right=cloneNode(o.right),t.right=o.left,o.left=t,o.right=l,o._color=t._color,e._color=BLACK,t._color=BLACK,l._color=BLACK,recount(t),recount(o),d>1){var u=n[d-2];u.left===t?u.left=o:u.right=o}n[d-1]=o;return}else if(o.left&&o.left._color===RED){if(o=t.right=cloneNode(o),l=o.left=cloneNode(o.left),t.right=l.left,o.left=l.right,l.left=t,l.right=o,l._color=t._color,t._color=BLACK,o._color=BLACK,e._color=BLACK,recount(t),recount(o),recount(l),d>1){var u=n[d-2];u.left===t?u.left=l:u.right=l}n[d-1]=l;return}if(o._color===BLACK)if(t._color===RED){t._color=BLACK,t.right=repaint(RED,o);return}else{t.right=repaint(RED,o);continue}else{if(o=cloneNode(o),t.right=o.left,o.left=t,o._color=t._color,t._color=RED,recount(t),recount(o),d>1){var u=n[d-2];u.left===t?u.left=o:u.right=o}n[d-1]=o,n[d]=t,d+1<n.length?n[d+1]=e:n.push(e),d=d+2}}else{if(o=t.left,o.left&&o.left._color===RED){if(o=t.left=cloneNode(o),l=o.left=cloneNode(o.left),t.left=o.right,o.right=t,o.left=l,o._color=t._color,e._color=BLACK,t._color=BLACK,l._color=BLACK,recount(t),recount(o),d>1){var u=n[d-2];u.right===t?u.right=o:u.left=o}n[d-1]=o;return}else if(o.right&&o.right._color===RED){if(o=t.left=cloneNode(o),l=o.right=cloneNode(o.right),t.left=l.right,o.right=l.left,l.right=t,l.left=o,l._color=t._color,t._color=BLACK,o._color=BLACK,e._color=BLACK,recount(t),recount(o),recount(l),d>1){var u=n[d-2];u.right===t?u.right=l:u.left=l}n[d-1]=l;return}if(o._color===BLACK)if(t._color===RED){t._color=BLACK,t.left=repaint(RED,o);return}else{t.left=repaint(RED,o);continue}else{if(o=cloneNode(o),t.left=o.right,o.right=t,o._color=t._color,t._color=RED,recount(t),recount(o),d>1){var u=n[d-2];u.right===t?u.right=o:u.left=o}n[d-1]=o,n[d]=t,d+1<n.length?n[d+1]=e:n.push(e),d=d+2}}}}iproto.remove=function(){var n=this._stack;if(n.length===0)return this.tree;var e=new Array(n.length),t=n[n.length-1];e[e.length-1]=new RBNode(t._color,t.key,t.value,t.left,t.right,t._count);for(var o=n.length-2;o>=0;--o){var t=n[o];t.left===n[o+1]?e[o]=new RBNode(t._color,t.key,t.value,e[o+1],t.right,t._count):e[o]=new RBNode(t._color,t.key,t.value,t.left,e[o+1],t._count)}if(t=e[e.length-1],t.left&&t.right){var l=e.length;for(t=t.left;t.right;)e.push(t),t=t.right;var d=e[l-1];e.push(new RBNode(t._color,d.key,d.value,t.left,t.right,t._count)),e[l-1].key=t.key,e[l-1].value=t.value;for(var o=e.length-2;o>=l;--o)t=e[o],e[o]=new RBNode(t._color,t.key,t.value,t.left,e[o+1],t._count);e[l-1].left=e[l]}if(t=e[e.length-1],t._color===RED){var u=e[e.length-2];u.left===t?u.left=null:u.right===t&&(u.right=null),e.pop();for(var o=0;o<e.length;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}else if(t.left||t.right){t.left?swapNode(t,t.left):t.right&&swapNode(t,t.right),t._color=BLACK;for(var o=0;o<e.length-1;++o)e[o]._count--;return new RedBlackTree(this.tree._compare,e[0])}else{if(e.length===1)return new RedBlackTree(this.tree._compare,null);for(var o=0;o<e.length;++o)e[o]._count--;var a=e[e.length-2];fixDoubleBlack(e),a.left===t?a.left=null:a.right=null}return new RedBlackTree(this.tree._compare,e[0])};Object.defineProperty(iproto,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(iproto,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(iproto,"index",{get:function(){var n=0,e=this._stack;if(e.length===0){var t=this.tree.root;return t?t._count:0}else e[e.length-1].left&&(n=e[e.length-1].left._count);for(var o=e.length-2;o>=0;--o)e[o+1]===e[o].right&&(++n,e[o].left&&(n+=e[o].left._count));return n},enumerable:!0});iproto.next=function(){var n=this._stack;if(n.length!==0){var e=n[n.length-1];if(e.right)for(e=e.right;e;)n.push(e),e=e.left;else for(n.pop();n.length>0&&n[n.length-1].right===e;)e=n[n.length-1],n.pop()}};Object.defineProperty(iproto,"hasNext",{get:function(){var n=this._stack;if(n.length===0)return!1;if(n[n.length-1].right)return!0;for(var e=n.length-1;e>0;--e)if(n[e-1].left===n[e])return!0;return!1}});iproto.update=function(n){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var t=new Array(e.length),o=e[e.length-1];t[t.length-1]=new RBNode(o._color,o.key,n,o.left,o.right,o._count);for(var l=e.length-2;l>=0;--l)o=e[l],o.left===e[l+1]?t[l]=new RBNode(o._color,o.key,o.value,t[l+1],o.right,o._count):t[l]=new RBNode(o._color,o.key,o.value,o.left,t[l+1],o._count);return new RedBlackTree(this.tree._compare,t[0])};iproto.prev=function(){var n=this._stack;if(n.length!==0){var e=n[n.length-1];if(e.left)for(e=e.left;e;)n.push(e),e=e.right;else for(n.pop();n.length>0&&n[n.length-1].left===e;)e=n[n.length-1],n.pop()}};Object.defineProperty(iproto,"hasPrev",{get:function(){var n=this._stack;if(n.length===0)return!1;if(n[n.length-1].left)return!0;for(var e=n.length-1;e>0;--e)if(n[e-1].right===n[e])return!0;return!1}});function defaultCompare(n,e){return n<e?-1:n>e?1:0}function createRBTree(n){return new RedBlackTree(n||defaultCompare,null)}const{AbstractLevel,AbstractIterator,AbstractKeyIterator,AbstractValueIterator}=abstractLevel$1,ModuleError=moduleError,createRBT=rbtree,rangeOptions=new Set(["gt","gte","lt","lte"]),kNone=Symbol("none"),kTree=Symbol("tree"),kIterator=Symbol("iterator"),kLowerBound=Symbol("lowerBound"),kUpperBound=Symbol("upperBound"),kOutOfRange=Symbol("outOfRange"),kReverse=Symbol("reverse"),kOptions=Symbol("options"),kTest=Symbol("test"),kAdvance=Symbol("advance"),kInit=Symbol("init");function compare(n,e){if(typeof n=="string")return n<e?-1:n>e?1:0;const t=Math.min(n.byteLength,e.byteLength);for(let o=0;o<t;o++){const l=n[o]-e[o];if(l!==0)return l}return n.byteLength-e.byteLength}function gt(n){return compare(n,this[kUpperBound])>0}function gte(n){return compare(n,this[kUpperBound])>=0}function lt(n){return compare(n,this[kUpperBound])<0}function lte(n){return compare(n,this[kUpperBound])<=0}class MemoryIterator extends AbstractIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key,o=this[kIterator].value;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,t,o)}_nextv(e,t,o){const l=this[kIterator],d=[];for(;l.valid&&d.length<e&&this[kTest](l.key);)d.push([l.key,l.value]),l[this[kAdvance]]();this.nextTick(o,null,d)}_all(e,t){const o=this.limit-this.count,l=this[kIterator],d=[];for(;l.valid&&d.length<o&&this[kTest](l.key);)d.push([l.key,l.value]),l[this[kAdvance]]();this.nextTick(t,null,d)}}class MemoryKeyIterator extends AbstractKeyIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,t)}_nextv(e,t,o){const l=this[kIterator],d=[];for(;l.valid&&d.length<e&&this[kTest](l.key);)d.push(l.key),l[this[kAdvance]]();this.nextTick(o,null,d)}_all(e,t){const o=this.limit-this.count,l=this[kIterator],d=[];for(;l.valid&&d.length<o&&this[kTest](l.key);)d.push(l.key),l[this[kAdvance]]();this.nextTick(t,null,d)}}class MemoryValueIterator extends AbstractValueIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key,o=this[kIterator].value;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,o)}_nextv(e,t,o){const l=this[kIterator],d=[];for(;l.valid&&d.length<e&&this[kTest](l.key);)d.push(l.value),l[this[kAdvance]]();this.nextTick(o,null,d)}_all(e,t){const o=this.limit-this.count,l=this[kIterator],d=[];for(;l.valid&&d.length<o&&this[kTest](l.key);)d.push(l.value),l[this[kAdvance]]();this.nextTick(t,null,d)}}for(const n of[MemoryIterator,MemoryKeyIterator,MemoryValueIterator])n.prototype[kInit]=function(e,t){this[kReverse]=t.reverse,this[kOptions]=t,this[kReverse]?(this[kAdvance]="prev",this[kLowerBound]="lte"in t?t.lte:"lt"in t?t.lt:kNone,this[kUpperBound]="gte"in t?t.gte:"gt"in t?t.gt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.end:"lte"in t?this[kIterator]=e.le(this[kLowerBound]):this[kIterator]=e.lt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="gte"in t?gte:gt)):(this[kAdvance]="next",this[kLowerBound]="gte"in t?t.gte:"gt"in t?t.gt:kNone,this[kUpperBound]="lte"in t?t.lte:"lt"in t?t.lt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.begin:"gte"in t?this[kIterator]=e.ge(this[kLowerBound]):this[kIterator]=e.gt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="lte"in t?lte:lt))},n.prototype[kTest]=function(){return!0},n.prototype[kOutOfRange]=function(e){return this[kTest](e)?this[kLowerBound]===kNone?!1:this[kReverse]?"lte"in this[kOptions]?compare(e,this[kLowerBound])>0:compare(e,this[kLowerBound])>=0:"gte"in this[kOptions]?compare(e,this[kLowerBound])<0:compare(e,this[kLowerBound])<=0:!0},n.prototype._seek=function(e,t){this[kOutOfRange](e)?(this[kIterator]=this[kIterator].tree.end,this[kIterator].next()):this[kReverse]?this[kIterator]=this[kIterator].tree.le(e):this[kIterator]=this[kIterator].tree.ge(e)};class MemoryLevel extends AbstractLevel{constructor(e,t,o){if(typeof e=="object"&&e!==null&&(t=e),typeof e=="function"||typeof t=="function"||typeof o=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{storeEncoding:l,...d}=t||{};if(l=l||"buffer",!["buffer","view","utf8"].includes(l))throw new ModuleError("The storeEncoding option must be 'buffer', 'view' or 'utf8'",{code:"LEVEL_ENCODING_NOT_SUPPORTED"});super({seek:!0,permanence:!1,createIfMissing:!1,errorIfExists:!1,encodings:{[l]:!0}},d),this[kTree]=createRBT(compare)}_put(e,t,o,l){const d=this[kTree].find(e);d.valid?this[kTree]=d.update(t):this[kTree]=this[kTree].insert(e,t),this.nextTick(l)}_get(e,t,o){const l=this[kTree].get(e);if(typeof l>"u")return this.nextTick(o,new Error("NotFound"));this.nextTick(o,null,l)}_getMany(e,t,o){this.nextTick(o,null,e.map(l=>this[kTree].get(l)))}_del(e,t,o){this[kTree]=this[kTree].remove(e),this.nextTick(o)}_batch(e,t,o){let l=this[kTree];for(const d of e){const u=d.key,a=l.find(u);d.type==="put"?l=a.valid?a.update(d.value):l.insert(u,d.value):l=a.remove()}this[kTree]=l,this.nextTick(o)}_clear(e,t){if(e.limit===-1&&!Object.keys(e).some(isRangeOption))return this[kTree]=createRBT(compare),this.nextTick(t);const o=this._keys({...e}),l=o.limit;let d=0;const u=()=>{for(let a=0;a<500;a++){if(++d>l||!o[kIterator].valid||!o[kTest](o[kIterator].key))return t();this[kTree]=this[kTree].remove(o[kIterator].key),o[kIterator][o[kAdvance]]()}this.nextTick(u)};this.nextTick(u)}_iterator(e){return new MemoryIterator(this,e)}_keys(e){return new MemoryKeyIterator(this,e)}_values(e){return new MemoryValueIterator(this,e)}}var MemoryLevel_1=MemoryLevel;if(typeof process<"u"&&!process.browser&&typeof commonjsGlobal<"u"&&typeof commonjsGlobal.setImmediate=="function"){const n=commonjsGlobal.setImmediate;MemoryLevel.prototype.nextTick=function(e,...t){t.length===0?n(e):n(()=>e(...t))}}function isRangeOption(n){return rangeOptions.has(n)}var rdfDataFactory={},BlankNode$1={};Object.defineProperty(BlankNode$1,"__esModule",{value:!0});BlankNode$1.BlankNode=void 0;class BlankNode{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}BlankNode$1.BlankNode=BlankNode;var DataFactory$2={},DefaultGraph$1={};Object.defineProperty(DefaultGraph$1,"__esModule",{value:!0});DefaultGraph$1.DefaultGraph=void 0;class DefaultGraph{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}}DefaultGraph$1.DefaultGraph=DefaultGraph;DefaultGraph.INSTANCE=new DefaultGraph;var Literal$1={},NamedNode$1={};Object.defineProperty(NamedNode$1,"__esModule",{value:!0});NamedNode$1.NamedNode=void 0;class NamedNode{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}}NamedNode$1.NamedNode=NamedNode;Object.defineProperty(Literal$1,"__esModule",{value:!0});Literal$1.Literal=void 0;const NamedNode_1$1=NamedNode$1;class Literal{constructor(e,t){this.termType="Literal",this.value=e,typeof t=="string"?(this.language=t,this.datatype=Literal.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=Literal.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}Literal$1.Literal=Literal;Literal.RDF_LANGUAGE_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Literal.XSD_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/2001/XMLSchema#string");var Quad$1={};Object.defineProperty(Quad$1,"__esModule",{value:!0});Quad$1.Quad=void 0;class Quad{constructor(e,t,o,l){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=o,this.graph=l}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}Quad$1.Quad=Quad;var Variable$1={};Object.defineProperty(Variable$1,"__esModule",{value:!0});Variable$1.Variable=void 0;class Variable{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}}Variable$1.Variable=Variable;Object.defineProperty(DataFactory$2,"__esModule",{value:!0});DataFactory$2.DataFactory=void 0;const BlankNode_1=BlankNode$1,DefaultGraph_1=DefaultGraph$1,Literal_1=Literal$1,NamedNode_1=NamedNode$1,Quad_1=Quad$1,Variable_1=Variable$1;let dataFactoryCounter=0,DataFactory$1=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${dataFactoryCounter++}_`}namedNode(e){return new NamedNode_1.NamedNode(e)}blankNode(e){return new BlankNode_1.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new Literal_1.Literal(e,t)}variable(e){return new Variable_1.Variable(e)}defaultGraph(){return DefaultGraph_1.DefaultGraph.INSTANCE}quad(e,t,o,l){return new Quad_1.Quad(e,t,o,l||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(Literal_1.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};DataFactory$2.DataFactory=DataFactory$1;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,l,d,u){u===void 0&&(u=d),Object.defineProperty(o,u,{enumerable:!0,get:function(){return l[d]}})}:function(o,l,d,u){u===void 0&&(u=d),o[u]=l[d]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,l){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,o,d)};Object.defineProperty(n,"__esModule",{value:!0}),t(BlankNode$1,n),t(DataFactory$2,n),t(DefaultGraph$1,n),t(Literal$1,n),t(NamedNode$1,n),t(Quad$1,n),t(Variable$1,n)})(rdfDataFactory);var ResultType;(function(n){n.VOID="void",n.QUADS="quads",n.APPROXIMATE_SIZE="approximate_size"})(ResultType||(ResultType={}));class LinkedList{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}get empty(){return this._head===null}push(e){const t={value:e,next:null};this._tail===null?this._head=this._tail=t:this._tail.next=this._tail=t,this._length++}shift(){if(this._head===null)return;const{value:e,next:t}=this._head;return this._head=t,t===null&&(this._tail=null),this._length--,e}clear(){this._length=0,this._head=this._tail=null}}const resolved=Promise.resolve(void 0);function createTaskScheduler(){const n=typeof queueMicrotask=="function"?queueMicrotask:l=>resolved.then(l),e=typeof setImmediate=="function"?setImmediate:l=>setTimeout(l,0);let t=0,o=null;return l=>{o!==null?o.push(l):++t<100?n(l):(o=[l],e(()=>{for(const d of o)n(d);o=null,t=0}))}}let taskScheduler=createTaskScheduler();function scheduleTask(n){taskScheduler(n)}function getTaskScheduler(){return taskScheduler}function setTaskScheduler(n){taskScheduler=n}const INIT=1<<0,OPEN=1<<1,CLOSING=1<<2,CLOSED=1<<3,ENDED=1<<4,DESTROYED=1<<5;class AsyncIterator extends eventsExports.EventEmitter{constructor(e=OPEN){super(),this._readable=!1,this._state=e,this.on("newListener",waitForDataListener)}_changeState(e,t=!1){const o=e>this._state&&this._state<ENDED;return o&&(this._state=e,e===ENDED&&(t?taskScheduler(()=>this.emit("end")):this.emit("end"))),o}read(){return null}forEach(e,t){this.on("data",bind(e,t))}close(){this._changeState(CLOSED)&&this._endAsync()}destroy(e){this.done||this._destroy(e,t=>{e=e||t,e&&this.emit("error",e),this._end(!0)})}_destroy(e,t){t()}_end(e=!1){this._changeState(e?DESTROYED:ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){taskScheduler(()=>this._end())}get readable(){return this._readable}set readable(e){e=!!e&&!this.done,this._readable!==e&&(this._readable=e,e&&taskScheduler(()=>this.emit("readable")))}get closed(){return this._state>=CLOSING}get ended(){return this._state===ENDED}get destroyed(){return this._state===DESTROYED}get done(){return this._state>=ENDED}toString(){const e=this._toStringDetails();return`[${this.constructor.name}${e?` ${e}`:""}]`}_toStringDetails(){return""}toArray(e){const t=[],o=typeof e?.limit=="number"?e.limit:1/0;return this.ended||o<=0?Promise.resolve(t):new Promise((l,d)=>{const u=()=>l(t),a=c=>{t.push(c),t.length>=o&&(this.removeListener("error",d),this.removeListener("data",a),this.removeListener("end",u),l(t))};this.on("error",d),this.on("data",a),this.on("end",u)})}getProperty(e,t){const o=this._properties;if(!t)return o&&o[e];if(o&&e in o)taskScheduler(()=>t(o[e]));else{let l;(l=this._propertyCallbacks)||(this._propertyCallbacks=l=Object.create(null)),e in l?l[e].push(t):l[e]=[t]}}setProperty(e,t){const o=this._properties||(this._properties=Object.create(null));o[e]=t;const l=this._propertyCallbacks||{},d=l[e];if(d){delete l[e],taskScheduler(()=>{for(const u of d)u(t)});for(e in l)return;delete this._propertyCallbacks}}getProperties(){const e=this._properties,t={};for(const o in e)t[o]=e[o];return t}setProperties(e){for(const t in e)this.setProperty(t,e[t])}copyProperties(e,t){for(const o of t)e.getProperty(o,l=>this.setProperty(o,l))}transform(e){return new SimpleTransformIterator(this,e)}map(e,t){return new MappingIterator(this,bind(e,t))}filter(e,t){return this.map(function(o){return e.call(t||this,o)?o:null})}uniq(e=identity){const t=new Set;return this.filter(function(o){const l=e.call(this,o);return t.has(l)?!1:(t.add(l),!0)})}prepend(e){return this.transform({prepend:e})}append(e){return this.transform({append:e})}surround(e,t){return this.transform({prepend:e,append:t})}skip(e){return this.map(t=>e-- >0?null:t)}take(e){return this.transform({limit:e})}range(e,t){return this.transform({offset:e,limit:Math.max(t-e+1,0)})}clone(){return new ClonedIterator(this)}}function waitForDataListener(n){n==="data"&&(this.removeListener("newListener",waitForDataListener),addSingleListener(this,"readable",emitData),this.readable&&taskScheduler(()=>emitData.call(this)))}function emitData(){let n;for(;this.listenerCount("data")!==0&&(n=this.read())!==null;)this.emit("data",n);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",emitData),addSingleListener(this,"newListener",waitForDataListener))}function addSingleListener(n,e,t){n.listeners(e).includes(t)||n.on(e,t)}class EmptyIterator extends AsyncIterator{constructor(){super(),this._changeState(ENDED,!0)}}class SingletonIterator extends AsyncIterator{constructor(e){super(),this._item=e,e===null?this.close():this.readable=!0}read(){const e=this._item;return this._item=null,this.close(),e}_toStringDetails(){return this._item===null?"":`(${this._item})`}}class ArrayIterator extends AsyncIterator{constructor(e=[],{autoStart:t=!0,preserve:o=!0}={}){super();const l=o||!Array.isArray(e)?[...e]:e;this._index=0,this._sourceStarted=t!==!1,this._truncateThreshold=o?-1:64,this._sourceStarted&&l.length===0?this.close():this._buffer=l,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let e=null;return this._buffer&&(this._index<this._buffer.length&&(e=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),e}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(e,t){delete this._buffer,t()}toArray(e={}){if(!this._buffer)return Promise.resolve([]);const{length:t}=this._buffer,o=this._index,l=typeof e.limit!="number"?t:o+e.limit,d=this._buffer.slice(o,l);return this._index=l,l>=t&&this.close(),Promise.resolve(d)}}class IntegerIterator extends AsyncIterator{constructor({start:e=0,step:t=1,end:o}={}){super(),Number.isFinite(e)&&(e=Math.trunc(e)),this._next=e,Number.isFinite(t)&&(t=Math.trunc(t)),this._step=t;const l=t>=0,d=l?1/0:-1/0;Number.isFinite(o)?o=Math.trunc(o):o!==-d&&(o=d),this._last=o,!Number.isFinite(e)||(l?e>o:e<o)?this.close():this.readable=!0}read(){if(this.closed)return null;const e=this._next,t=this._step,o=this._last,l=this._next+=t;return(t>=0?l>o:l<o)&&this.close(),e}_toStringDetails(){return`(${this._next}...${this._last})`}}function identity(n){return n}const DESTINATION=Symbol("destination");class MappingIterator extends AsyncIterator{constructor(e,t=identity,o={}){super(),this._map=t,this._source=ensureSourceAvailable(e),this._destroySource=o.destroySource!==!1,e.done?this.close():(this._source[DESTINATION]=this,this._source.on("end",destinationClose),this._source.on("error",destinationEmitError),this._source.on("readable",destinationSetReadable),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let e,t;for(;(e=this._source.read())!==null;)if((t=this._map(e))!==null)return t}this.readable=!1,this._source.done&&this.close()}return null}_end(e){this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&this._source.destroy(),super._end(e)}}function ensureSourceAvailable(n,e=!1){if(!n||!isFunction(n.read)||!isFunction(n.on))throw new TypeError(`Invalid source: ${n}`);if(!e&&n[DESTINATION])throw new Error("The source already has a destination");return n}class BufferedIterator extends AsyncIterator{constructor({maxBufferSize:e=4,autoStart:t=!0}={}){super(INIT),this._buffer=new LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=e,taskScheduler(()=>this._init(t)),this._sourceStarted=t!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(e){e!==1/0&&(e=Number.isFinite(e)?Math.max(Math.trunc(e),1):4),this._maxBufferSize!==e&&(this._maxBufferSize=e,this._state===OPEN&&this._fillBuffer())}_init(e){let t=!1;this._reading=!0,this._begin(()=>{if(t)throw new Error("done callback called multiple times");t=!0,this._reading=!1,this._changeState(OPEN),e?this._fillBufferAsync():this.readable=!0})}_begin(e){e()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const e=this._buffer;let t;return e.empty?(t=null,this.readable=!1):t=e.shift(),!this._reading&&e.length<this._maxBufferSize&&(this.closed?e.empty&&this._endAsync():this._fillBufferAsync()),t}_read(e,t){t()}_push(e){this.done||(this._pushedCount++,this._buffer.push(e),this.readable=!0)}_fillBuffer(){let e;this._reading||(this.closed?this._completeClose():(e=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(e,()=>{if(!e)throw new Error("done callback called multiple times");e=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,taskScheduler(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(CLOSING):this._completeClose()}_completeClose(){this._changeState(CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(e,t){this._buffer.clear(),t()}_flush(e){e()}_toStringDetails(){const e=this._buffer;return`{${e.empty?"":`next: ${e.first}, `}buffer: ${e.length}}`}}class TransformIterator extends BufferedIterator{constructor(e,t=e||{}){super(t),this._boundPush=o=>this._push(o),isSourceExpression(e)||(e=t.source),isEventEmitter(e)?this.source=e:e&&(this._createSource=isPromise(e)?()=>e:e,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!t.optional,this._destroySource=t.destroySource!==!1}get source(){return isFunction(this._createSource)&&this._loadSourceAsync(),this._source}set source(e){const t=this._source=this._validateSource(e);t[DESTINATION]=this,this.done?this._destroySource&&t.destroy():t.done?this.close():(t.on("end",destinationCloseWhenDone),t.on("readable",destinationFillBuffer),t.on("error",destinationEmitError))}_loadSourceAsync(){isFunction(this._createSource)&&(Promise.resolve(this._createSource()).then(e=>{delete this._createSource,this.source=e,this._fillBuffer()},e=>this.emit("error",e)),this._createSource=null)}_validateSource(e,t=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return ensureSourceAvailable(e,t)}_read(e,t){const o=()=>{this._pushedCount<e&&!this.closed?taskScheduler(()=>this._readAndTransform(o,t)):t()};this._readAndTransform(o,t)}_readAndTransform(e,t){let o;const l=this.source;!l||l.done||(o=l.read())===null?t():this._optional?this._optionalTransform(o,e):this._transform(o,e,this._boundPush)}_optionalTransform(e,t){const o=this._pushedCount;this._transform(e,()=>{o===this._pushedCount&&this._push(e),t()},this._boundPush)}_transform(e,t,o){o(e),t()}_closeWhenDone(){this.close()}_end(e){const t=this._source;t&&(t.removeListener("end",destinationCloseWhenDone),t.removeListener("error",destinationEmitError),t.removeListener("readable",destinationFillBuffer),delete t[DESTINATION],this._destroySource&&t.destroy()),super._end(e)}}function destinationSetReadable(){this[DESTINATION].readable=!0}function destinationEmitError(n){this[DESTINATION].emit("error",n)}function destinationClose(){this[DESTINATION].close()}function destinationCloseWhenDone(){this[DESTINATION]._closeWhenDone()}function destinationFillBuffer(){this[DESTINATION]._sourceStarted!==!1&&this[DESTINATION]._fillBuffer()}class SimpleTransformIterator extends TransformIterator{constructor(e,t){if(super(e,t),this._offset=0,this._limit=1/0,this._filter=o=>!0,t=t||(isSourceExpression(e)?null:e),t){const o=isFunction(t)?t:t.transform,{limit:l,offset:d,filter:u,map:a,prepend:c,append:h}=t;d===1/0||l===-1/0?this._limit=0:(Number.isFinite(d)&&(this._offset=Math.max(Math.trunc(d),0)),Number.isFinite(l)&&(this._limit=Math.max(Math.trunc(l),0)),isFunction(u)&&(this._filter=u),isFunction(a)&&(this._map=a),this._transform=isFunction(o)?o:null),c&&(this._prepender=isEventEmitter(c)?c:fromArray(c)),h&&(this._appender=isEventEmitter(h)?h:fromArray(h))}}_read(e,t){const o=()=>this._readAndTransformSimple(e,l,t);this._readAndTransformSimple(e,l,t);function l(){taskScheduler(o)}}_readAndTransformSimple(e,t,o){let l;const{source:d}=this;if(!d||d.done){o();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<e&&(l=d.read())!==null;){if(!this._filter(l)||this._offset!==0&&this._offset--)continue;const u=typeof this._map>"u"?l:this._map(l);if(u===null)this._optional&&this._push(l);else if(!isFunction(this._transform))this._push(u);else{this._optional?this._optionalTransform(u,t):this._transform(u,t,this._boundPush);return}--this._limit===0&&this.close()}o()}_begin(e){this._insert(this._prepender,e),delete this._prepender}_flush(e){this._insert(this._appender,e),delete this._appender}_insert(e,t){const o=d=>this._push(d);!e||e.done?t():(e.on("data",o),e.on("end",l));function l(){e.removeListener("data",o),e.removeListener("end",l),t()}}}class MultiTransformIterator extends TransformIterator{constructor(e,t){if(super(e,t),this._transformerQueue=[],t){const o=isFunction(t)?t:t.multiTransform;o&&(this._createTransformer=o)}}_read(e,t){const o=this._transformerQueue,l=this._optional;let d,u;for(;(d=o[0])&&d.transformer.done;){l&&d.item!==null&&(e--,this._push(d.item)),o.shift();const{transformer:c}=d;c.removeListener("end",destinationFillBuffer),c.removeListener("readable",destinationFillBuffer),c.removeListener("error",destinationEmitError)}const{source:a}=this;for(;a&&!a.done&&o.length<this.maxBufferSize&&(u=a.read(),u!==null);){const c=this._createTransformer(u)||new EmptyIterator;c[DESTINATION]=this,c.on("end",destinationFillBuffer),c.on("readable",destinationFillBuffer),c.on("error",destinationEmitError),o.push({transformer:c,item:u})}if(d=o[0],d){const{transformer:c}=d;for(;e-- >0&&(u=c.read())!==null;)this._push(u),l&&(d.item=null)}else a&&a.done&&this.close();t()}_createTransformer(e){return new SingletonIterator(e)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(e){if(super._end(e),this._destroySource)for(const t of this._transformerQueue)t.transformer.destroy()}}class UnionIterator extends BufferedIterator{constructor(e,t={}){super(t),this._sources=[],this._currentSource=-1;const o=t.autoStart!==!1;if(isEventEmitter(e))e.on("error",l=>this.emit("error",l)),this._pending={loading:!1,sources:e},o&&this._loadSources();else if(Array.isArray(e)&&e.length>0)for(const l of e)this._addSource(l);else o&&this.close();this._destroySources=t.destroySources!==!1}_loadSources(){const e=this._pending.sources;this._pending.loading=!0,e.done?(delete this._pending,this.close()):(e.on("data",t=>{this._addSource(t),this._fillBufferAsync()}),e.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(e){isPromise(e)&&(e=wrap$1(e)),e.done||(this._sources.push(e),e[DESTINATION]=this,e.on("error",destinationEmitError),e.on("readable",destinationFillBuffer),e.on("end",destinationRemoveEmptySources))}_removeEmptySources(){this._sources=this._sources.filter((e,t)=>(e.done&&t<=this._currentSource&&this._currentSource--,!e.done)),this._fillBuffer()}_read(e,t){var o;((o=this._pending)===null||o===void 0?void 0:o.loading)===!1&&this._loadSources();let l=0,d;for(;l!==(l=e);)for(let u=0;u<this._sources.length&&e>0;u++)this._currentSource=(this._currentSource+1)%this._sources.length,(d=this._sources[this._currentSource].read())!==null&&(e--,this._push(d));!this._pending&&this._sources.length===0&&this.close(),t()}_end(e=!1){if(super._end(e),this._destroySources){for(const t of this._sources)t.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}function destinationRemoveEmptySources(){this[DESTINATION]._removeEmptySources()}class ClonedIterator extends TransformIterator{constructor(e){super(e,{autoStart:!1}),this._readPosition=0,this._reading=!1}_init(){}close(){AsyncIterator.prototype.close.call(this)}get source(){return super.source}set source(e){const t=this._source=this._validateSource(e),o=t&&t[DESTINATION]||(t[DESTINATION]=new HistoryReader(t));this.done?this._destroySource&&t.destroy():o.endsAt(0)?this.close():(o.register(this),(t._sourceStarted===!1||o.readAt(0)!==null)&&(this.readable=!0));const l=this._propertyCallbacks;for(const d in l){const u=l[d];for(const a of u)this._getSourceProperty(d,a)}}_validateSource(e,t=!1){const o=e&&e[DESTINATION];return super._validateSource(e,!o||o instanceof HistoryReader)}getProperty(e,t){const{source:o}=this,l=this._properties,d=l&&e in l;if(!t)return d?l&&l[e]:o&&o.getProperty(e);super.getProperty(e,t),o&&!d&&this._getSourceProperty(e,t)}_getSourceProperty(e,t){this.source.getProperty(e,o=>{(!this._properties||!(e in this._properties))&&t(o)})}getProperties(){const e=this.source?this.source.getProperties():{},t=this._properties;for(const o in t)e[o]=t[o];return e}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const e=this.source;let t=null;if(!this.done&&e){const o=e[DESTINATION];(t=o.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,o.endsAt(this._readPosition)&&this.close()}return t}_end(e){const t=this.source,o=t?.[DESTINATION];o&&o.unregister(this),BufferedIterator.prototype._end.call(this,e)}}class HistoryReader{constructor(e){if(this._history=[],this._trackers=new Set,this._source=e,!e.done){const t=()=>{for(const d of this._trackers)d.readable=!0},o=d=>{for(const u of this._trackers)u.emit("error",d)},l=()=>{for(const d of this._trackers)d._sourceStarted!==!1&&d._readPosition===this._history.length&&d.close();this._trackers.clear(),e.removeListener("end",l),e.removeListener("error",o),e.removeListener("readable",t)};e.on("end",l),e.on("error",o),e.on("readable",t)}}register(e){this._source.done||this._trackers.add(e)}unregister(e){this._trackers.delete(e)}readAt(e){let t=null;return e<this._history.length?t=this._history[e]:!this._source.done&&(t=this._source.read())!==null&&(this._history[e]=t),t}endsAt(e){return this._source.done&&this._history.length===e}}class WrappingIterator extends AsyncIterator{constructor(e,t){super(),this._source=null,this._destroySource=t?.destroySource!==!1,isPromise(e)?(this._source=new AsyncIterator,e.then(o=>{this._source=null,this.source=o}).catch(o=>this.emit("error",o))):e&&(this.source=e)}set source(e){let t=e;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(isIterable(t)&&(t=t[Symbol.iterator]()),isIterator(t)){let o=t;t=new eventsExports.EventEmitter,t.read=()=>{if(o!==null){let l;for(;!(l=o.next()).done;)if(l.value!==null)return l.value;o=null,this.close()}return null}}else t=ensureSourceAvailable(t);if(this.done){this._destroySource&&isFunction(t.destroy)&&t.destroy();return}t[DESTINATION]=this,t.on("end",destinationClose),t.on("error",destinationEmitError),t.on("readable",destinationSetReadable),this._source=t,this.readable=t.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const e=this._source.read();if(e!==null)return e;this.readable=!1}return null}_end(e=!1){this._source!==null&&(this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&isFunction(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(e)}}function wrap$1(n,e){if(e&&("autoStart"in e||"optional"in e||"source"in e||"maxBufferSize"in e))return n&&!isEventEmitter(n)&&(n=new WrappingIterator(n)),new TransformIterator(n,e);if(!n)return empty();if(isPromise(n))return new WrappingIterator(n,e);if(n instanceof AsyncIterator)return n;if(Array.isArray(n))return fromArray(n);if(isIterable(n)||isIterator(n)||isEventEmitter(n))return new WrappingIterator(n,e);throw new TypeError(`Invalid source: ${n}`)}function empty(){return new EmptyIterator}function single(n){return new SingletonIterator(n)}function fromArray(n){return new ArrayIterator(n)}function fromIterator(n){return new WrappingIterator(n)}function fromIterable(n){return new WrappingIterator(n)}function union(n){return new UnionIterator(n)}function range(n,e,t){return new IntegerIterator({start:n,end:e,step:t})}function bind(n,e){return e?n.bind(e):n}function isFunction(n){return typeof n=="function"}function isEventEmitter(n){return isFunction(n?.on)}function isPromise(n){return isFunction(n?.then)}function isSourceExpression(n){return n&&(isEventEmitter(n)||isPromise(n)||isFunction(n))}function isIterable(n){return n&&Symbol.iterator in n}function isIterator(n){return isFunction(n?.next)}var __QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__=Object.freeze({__proto__:null,ArrayIterator,AsyncIterator,BufferedIterator,CLOSED,CLOSING,ClonedIterator,DESTINATION,DESTROYED,ENDED,EmptyIterator,INIT,IntegerIterator,LinkedList,MappingIterator,MultiTransformIterator,OPEN,SimpleTransformIterator,SingletonIterator,TransformIterator,UnionIterator,WrappingIterator,empty,fromArray,fromIterable,fromIterator,getTaskScheduler,identity,isEventEmitter,isFunction,isIterable,isIterator,isPromise,isSourceExpression,range,scheduleTask,setTaskScheduler,single,union,wrap:wrap$1});const isObject$1=n=>typeof n=="object"&&n!==null,isAbstractLevel=n=>isObject$1(n)&&typeof n.open=="function"&&typeof n.batch=="function",ensureAbstractLevel=(n,e)=>{if(!isAbstractLevel(n))throw new Error(`${e} is not an AbstractLevel instance`)},streamToArray=n=>new Promise((e,t)=>{const o=[],l=c=>{o.push(c)},d=()=>{n.removeListener("data",l),n.removeListener("error",a),n.destroy()},u=()=>{d(),e(o)},a=c=>{d(),t(c)};n.on("error",a),n.on("end",u),n.on("data",l)}),arrStartsWith=(n,e)=>{for(let t=0;t<e.length;t+=1)if(e[t]!==n[t])return!1;return!0},RESOLVED=Promise.resolve(),emptyObject={},boundary="",separator="\0\0",defaultIndexes=[["subject","predicate","object","graph"],["object","graph","subject","predicate"],["graph","subject","predicate","object"],["subject","object","predicate","graph"],["predicate","object","graph","subject"],["graph","predicate","object","subject"]],levelPutOpts={keyEncoding:"utf8",valueEncoding:"view"},levelDelOpts={keyEncoding:"utf8"},emptyValue=new Uint8Array(0),consumeOneByOne=async(n,e)=>new Promise((t,o)=>{let l,d=!1,u=!1;const a=()=>{if(u=!0,(l=n.read())!==null){Promise.resolve(e(l)).then(a).catch(c);return}u=!1,d&&t()},c=m=>{o(m),b()},h=()=>{d=!0,u||t(),b()},y=()=>{u||a()},b=()=>{n.removeListener("end",h),n.removeListener("error",c),n.removeListener("readable",y),typeof n.destroy=="function"&&n.destroy()};n.on("end",h),n.on("error",c),n.on("readable",y),n.readable!==!1&&a()}),consumeInBatches=async(n,e,t)=>new Promise((o,l)=>{let d=0,u=!1,a=!1,c=new Array(e);const h=()=>{if(T(),d>0){Promise.resolve(t(c.slice(0,d))).then(o).catch(b);return}o()},y=()=>{a=!0,u||h()},b=j=>{T(),l(j)},m=()=>{u||v()};let E=null;const v=()=>{if(u=!0,a){h();return}for(;d<e&&(E=n.read())!==null;)c[d++]=E;if(E===null){u=!1;return}d===e&&(Promise.resolve(t(c.slice())).then(v).catch(b),d=0)},T=()=>{n.removeListener("end",y),n.removeListener("error",b),n.removeListener("readable",m),typeof n.destroy=="function"&&n.destroy()};n.on("end",y),n.on("error",b),n.on("readable",m),n.readable!==!1&&v()});let IDX=256;const HEX=[];for(;IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);const createUid=n=>{n=n||16;let e="",t=0;return()=>{if(!e||t===256){for(e="",t=(1+n)/2|0;t--;)e+=HEX[256*Math.random()|0];e=e.substring(t=0,n-2)}return e+HEX[t++]}},uid=createUid(11);class LevelIterator extends BufferedIterator{level;mapFn;levelEnded;constructor(e,t){super({maxBufferSize:64}),this.mapFn=t,this.level=e,this.levelEnded=!1}_read(e,t){const o={remaining:e};o.next=this._onNextValue.bind(this,o,t),this.level.next(o.next)}_onNextValue(e,t,o,l,d){if(o){t(o);return}if(l===void 0&&d===void 0){this.close(),this.levelEnded=!0,t();return}if(this._push(this.mapFn(l,d)),e.remaining-=1,e.remaining===0){t();return}this.level.next(e.next)}_endLevel(e){if(this.levelEnded){e();return}this.level.close(t=>{t||(this.levelEnded=!0),e(t)})}_end(e){this.ended||(super._end(e),this._endLevel(t=>{t&&this.emit("error",t)}))}_destroy(e,t){if(this.destroyed){t();return}this._endLevel(o=>{if(o){t(o);return}super._destroy(e,t)})}}const xsd="http://www.w3.org/2001/XMLSchema#",string=`${xsd}string`,dateTime=`${xsd}dateTime`,integer=`${xsd}integer`,decimal=`${xsd}decimal`,double=`${xsd}double`,nonPositiveInteger=`${xsd}nonPositiveInteger`,negativeInteger=`${xsd}negativeInteger`,long=`${xsd}long`,int=`${xsd}int`,short=`${xsd}short`,byte=`${xsd}byte`,nonNegativeInteger=`${xsd}nonNegativeInteger`,unsignedLong=`${xsd}unsignedLong`,unsignedInt=`${xsd}unsignedInt`,unsignedShort=`${xsd}unsignedShort`,unsignedByte=`${xsd}unsignedByte`,positiveInteger=`${xsd}positiveInteger`,sliceString=(n,e,t)=>n.slice(e,e+t),padNumStart=n=>{if(n<10)return"000"+n;if(n<100)return"00"+n;if(n<1e3)return"0"+n;if(n<1e4)return""+n;throw new Error("too long: "+n)},join=(n,e,t)=>{let o=""+n;return e<10?o+="00"+e:e<100?o+="0"+e:o+=e,o+=t.toFixed(17),o},ZERO=join(3,0,0),NEG_INF=join(0,0,0),POS_INF=join(6,0,0),encode=n=>{let e=typeof n!="number"?parseFloat(n):n;if(Number.isNaN(e))throw new Error("Cannot serialize NaN");if(e===-1/0)return NEG_INF;if(e===1/0)return POS_INF;if(e===0)return ZERO;let t=0,o=0;for(e<0&&(o=1,e*=-1);e>10;)e/=10,t+=1;for(;e<1;)e*=10,t-=1;return o===1?t>=0?join(1,999-t,10-e):join(2,t*-1,10-e):t<0?join(4,999+t,e):join(5,t,e)},namedNodeWriter={write(n,e,t){const o=t.compactIri(n.value);e.lengths=padNumStart(o.length),e.value=o}},namedNodeReader={read(n,e,t,o){const{keyOffset:l,lengthsOffset:d}=e,u=parseInt(sliceString(n,d,4));return e.lengthsOffset+=4,e.keyOffset+=u,t.namedNode(o.expandTerm(sliceString(n,l,u)))}},blankNodeWriter={write(n,e){e.lengths=padNumStart(n.value.length),e.value=n.value}},blankNodeReader={read(n,e,t){const{keyOffset:o,lengthsOffset:l}=e,d=parseInt(sliceString(n,l,4));return e.lengthsOffset+=4,e.keyOffset+=d,t.blankNode(sliceString(n,o,d))}},genericLiteralWriter={write(n,e){e.lengths=padNumStart(n.value.length)+padNumStart(n.datatype.value.length),e.value=n.datatype.value+separator+n.value}},genericLiteralReader={read(n,e,t,o){const{keyOffset:l,lengthsOffset:d}=e,u=parseInt(sliceString(n,d,4)),a=parseInt(sliceString(n,d+4,4));return e.lengthsOffset+=8,e.keyOffset+=u+a+separator.length,t.literal(sliceString(n,l+a+separator.length,u),t.namedNode(sliceString(n,l,a)))}},stringLiteralWriter={write(n,e){e.lengths=padNumStart(n.value.length),e.value=n.value}},stringLiteralReader={read(n,e,t){const{keyOffset:o,lengthsOffset:l}=e,d=parseInt(sliceString(n,l,4));return e.lengthsOffset+=4,e.keyOffset+=d,t.literal(sliceString(n,o,d))}},langStringLiteralWriter={write(n,e){e.lengths=padNumStart(n.value.length)+padNumStart(n.language.length),e.value=n.language+separator+n.value}},langStringLiteralReader={read(n,e,t,o){const{keyOffset:l,lengthsOffset:d}=e,u=parseInt(sliceString(n,d,4)),a=parseInt(sliceString(n,d+4,4));return e.lengthsOffset+=8,e.keyOffset+=u+a+separator.length,t.literal(sliceString(n,l+a+separator.length,u),sliceString(n,l,a))}},numericLiteralWriter={write(n,e,t,o,l){e.lengths=padNumStart(n.value.length)+padNumStart(n.datatype.value.length)+padNumStart(l.length),o?e.value=l:e.value=l+separator+n.datatype.value+separator+n.value}},numericLiteralReader={read(n,e,t,o){const{keyOffset:l,lengthsOffset:d}=e,u=parseInt(sliceString(n,d,4)),a=parseInt(sliceString(n,d+4,4)),c=parseInt(sliceString(n,d+8,4));return e.lengthsOffset+=12,e.keyOffset+=c+a+u+separator.length*2,t.literal(sliceString(n,l+c+separator.length+a+separator.length,u),t.namedNode(sliceString(n,l+c+separator.length,a)))}},defaultGraphWriter={write(n,e){e.value="dg",e.lengths="2"}},defaultGraphReader={read(n,e,t,o){return e.keyOffset+=2,e.lengthsOffset+=1,t.defaultGraph()}},termWriter={write(n,e,t){switch(n.termType){case"NamedNode":e.type="0",namedNodeWriter.write(n,e,t);break;case"BlankNode":e.type="1",blankNodeWriter.write(n,e,t);break;case"DefaultGraph":e.type="6",defaultGraphWriter.write(n,e,t);break;case"Literal":if(n.language)e.type="4",langStringLiteralWriter.write(n,e,t);else if(n.datatype)switch(n.datatype.value){case string:e.type="3",stringLiteralWriter.write(n,e,t);break;case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:e.type="5",numericLiteralWriter.write(n,e,t,!1,encode(n.value));break;case dateTime:e.type="7",numericLiteralWriter.write(n,e,t,!1,encode(new Date(n.value).valueOf()));break;default:e.type="2",genericLiteralWriter.write(n,e,t)}else e.type="3",stringLiteralWriter.write(n,e,t)}}},termReader={read(n,e,t,o){let l;const d=n.charAt(e.lengthsOffset);switch(e.lengthsOffset+=1,d){case"0":l=namedNodeReader.read(n,e,t,o);break;case"1":l=blankNodeReader.read(n,e,t,o);break;case"2":l=genericLiteralReader.read(n,e,t,o);break;case"3":l=stringLiteralReader.read(n,e,t,o);break;case"4":l=langStringLiteralReader.read(n,e,t,o);break;case"5":l=numericLiteralReader.read(n,e,t,o);break;case"6":l=defaultGraphReader.read(n,e,t,o);break;case"7":l=numericLiteralReader.read(n,e,t,o);break;default:throw new Error(`Unexpected encoded term type "${d}"`)}return l}},twoStepsQuadWriter={subject:{type:"",value:"",lengths:""},predicate:{type:"",value:"",lengths:""},object:{type:"",value:"",lengths:""},graph:{type:"",value:"",lengths:""},ingest(n,e){return termWriter.write(n.subject,this.subject,e),termWriter.write(n.predicate,this.predicate,e),termWriter.write(n.object,this.object,e),termWriter.write(n.graph,this.graph,e),this},write(n,e){let t=n,o="";for(let l=0,d;l<e.length;l+=1)d=this[e[l]],t+=d.value+separator,o+=d.type+d.lengths;return t+o+padNumStart(o.length)}},quadReader={subject:null,predicate:null,object:null,graph:null,keyOffset:0,lengthsOffset:0,read(n,e,t,o,l){this.lengthsOffset=n.length-parseInt(n.slice(-4))-4,this.keyOffset=e;for(let d=0,u;d<t.length;d+=1)u=t[d],this[u]=termReader.read(n,this,o,l),this.keyOffset+=separator.length;return o.quad(this.subject,this.predicate,this.object,this.graph)}},serialized={type:"",value:"",lengths:""},patternLiteralWriter={write(n,e){if(n.language){langStringLiteralWriter.write(n,serialized,e);return}if(n.datatype)switch(n.datatype.value){case string:stringLiteralWriter.write(n,serialized,e);return;case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:numericLiteralWriter.write(n,serialized,e,!0,encode(n.value));return;case dateTime:numericLiteralWriter.write(n,serialized,e,!0,encode(new Date(n.value).valueOf()));return;default:genericLiteralWriter.write(n,serialized,e);return}stringLiteralWriter.write(n,serialized,e)}},writePattern=(n,e,t)=>{let o=e.prefix,l=e.prefix,d=!0,u=!0,a=!1,c=!1,h=Object.entries(n).filter(([b,m])=>m).length;if(h===0)return l+=boundary,{gt:o,lt:l,gte:d,lte:u,order:e.terms,index:e};let y=0;for(;y<e.terms.length&&h>0;y+=1){const b=n[e.terms[y]];if(!b||a||c)return null;switch(b.termType){case"Range":a=!0,b.gt?(patternLiteralWriter.write(b.gt,t),o+=serialized.value,d=!1):b.gte&&(patternLiteralWriter.write(b.gte,t),o+=serialized.value,d=!0),b.lt?(patternLiteralWriter.write(b.lt,t),l+=serialized.value,u=!1):b.lte&&(patternLiteralWriter.write(b.lte,t),l+=serialized.value,u=!0);break;case"Literal":c=!0,patternLiteralWriter.write(b,t),o+=serialized.value,d=!0,patternLiteralWriter.write(b,t),l+=serialized.value,u=!0;break;case"NamedNode":namedNodeWriter.write(b,serialized,t),o+=serialized.value,d=!0,namedNodeWriter.write(b,serialized,t),l+=serialized.value,u=!0;break;case"BlankNode":blankNodeWriter.write(b,serialized,t),o+=serialized.value,d=!0,blankNodeWriter.write(b,serialized,t),l+=serialized.value,u=!0;break;case"DefaultGraph":defaultGraphWriter.write(b,serialized,t),o+=serialized.value,d=!0,defaultGraphWriter.write(b,serialized,t),l+=serialized.value,u=!0;break}h-=1,h>0&&y<e.terms.length-1&&(o+=separator,l+=separator)}return u?a||c?l+=boundary:l+=separator+boundary:l+=separator,d?!a&&!c&&(o+=separator):a||c?o+=boundary:o+=separator+boundary,{gt:o,lt:l,gte:d,lte:u,order:e.terms.slice(a?y-1:1),index:e}};var sortedSetExports={},sortedSet={get exports(){return sortedSetExports},set exports(n){sortedSetExports=n}};(function(n,e){(function(t,o){n.exports=o()})(commonjsGlobal,function(){class t{constructor(F){if(F?.strategy==null)throw"Must pass options.strategy, a strategy";if(F?.comparator==null)throw"Must pass options.comparator, a comparator";if(F?.onInsertConflict==null)throw"Must pass options.onInsertConflict, a function";this.priv=new F.strategy(F),this.length=0}insert(F){return this.priv.insert(F),this.length+=1,this}remove(F){return this.priv.remove(F),this.length-=1,this}clear(){return this.priv.clear(),this.length=0,this}contains(F){return this.priv.contains(F)}toArray(){return this.priv.toArray()}forEach(F,Q){return this.priv.forEachImpl(F,this,Q),this}map(F,Q){const X=[];return this.forEach(function(W,le,ue){return X.push(F.call(Q,W,le,ue))}),X}filter(F,Q){const X=[];return this.forEach(function(W,le,ue){if(F.call(Q,W,le,ue))return X.push(W)}),X}every(F,Q){let X=!0;return this.forEach(function(W,le,ue){X&&!F.call(Q,W,le,ue)&&(X=!1)}),X}some(F,Q){let X=!1;return this.forEach(function(W,le,ue){!X&&F.call(Q,W,le,ue)&&(X=!0)}),X}findIterator(F){return this.priv.findIterator(F)}beginIterator(){return this.priv.beginIterator()}endIterator(){return this.priv.endIterator()}}class o{constructor(F,Q){this.priv=F,this.index=Q,this.data=this.priv.data}hasNext(){return this.index<this.data.length}hasPrevious(){return this.index>0}value(){return this.index<this.data.length?this.data[this.index]:null}setValue(F){if(!this.priv.options.allowSetValue)throw"Must set options.allowSetValue";if(!this.hasNext())throw"Cannot set value at end of set";return this.data[this.index]=F}next(){return this.index>=this.data.length?null:new o(this.priv,this.index+1)}previous(){return this.index<=0?null:new o(this.priv,this.index-1)}}const l=(D,F,Q)=>{let X=0,W=D.length;for(;X<W;){const le=X+W>>>1;Q(D[le],F)<0?X=le+1:W=le}return X};class d{constructor(F){this.options=F,this.onInsertConflict=this.options.onInsertConflict,this.comparator=this.options.comparator,this.data=[]}toArray(){return this.data}insert(F){const Q=l(this.data,F,this.comparator);return this.data[Q]!==void 0&&this.comparator(this.data[Q],F)===0?this.data.splice(Q,1,this.onInsertConflict(this.data[Q],F)):this.data.splice(Q,0,F)}remove(F){const Q=l(this.data,F,this.comparator);if(this.comparator(this.data[Q],F)!==0)throw"Value not in set";return this.data.splice(Q,1)}clear(){return this.data.length=0}contains(F){const Q=l(this.data,F,this.comparator);return this.index!==this.data.length&&this.comparator(this.data[Q],F)===0}forEachImpl(F,Q,X){const W=this.data,le=W.length;for(let ue=0;ue<le;ue++)F.call(X,W[ue],ue,Q)}findIterator(F){const Q=l(this.data,F,this.comparator);return new o(this,Q)}beginIterator(){return new o(this,0)}endIterator(){return new o(this,this.data.length)}}const u=(D,F)=>{for(;F[D]!==null;){const Q=F;F=F[D],F._iteratorParentNode=Q}return F},a=(D,F)=>{let Q,X;if(F[D]!==null)Q=F,F=F[D],F._iteratorParentNode=Q,X=D==="left"?"right":"left",F=u(X,F);else{for(;(Q=F._iteratorParentNode)!==null&&Q[D]===F;)F=Q;F=Q}return F};class c{constructor(F,Q){this.tree=F,this.node=Q}next(){if(this.node===null)return null;{const F=a("right",this.node);return new c(this.tree,F)}}previous(){if(this.node===null){if(this.tree.root===null)return null;{this.tree.root._iteratorParentNode=null;const F=u("right",this.tree.root);return new c(this.tree,F)}}else{const F=a("left",this.node);return F===null?null:new c(this.tree,F)}}hasNext(){return this.node!==null}hasPrevious(){return this.previous()!==null}value(){return this.node===null?null:this.node.value}setValue(F){if(!this.tree.options.allowSetValue)throw"Must set options.allowSetValue";if(!this.hasNext())throw"Cannot set value at end of set";return this.node.value=F}}c.find=function(D,F,Q){const X=D.root;X!=null&&(X._iteratorParentNode=null);let W=X,le=null;for(;W!==null;){const ue=Q(F,W.value);if(ue===0)break;if(ue<0){if(W.left===null)break;le=W,W.left._iteratorParentNode=W,W=W.left}else if(W.right!==null)W.right._iteratorParentNode=W,W=W.right;else{W=le;break}}return new c(D,W)},c.left=D=>{if(D.root===null)return new c(D,null);{D.root._iteratorParentNode=null;const F=u("left",D.root);return new c(D,F)}},c.right=D=>new c(D,null);const h=(D,F)=>{D!==null&&(h(D.left,F),F(D.value),h(D.right,F))};class y{toArray(){const F=[];return h(this.root,function(Q){return F.push(Q)}),F}clear(){return this.root=null}forEachImpl(F,Q,X){let W=0;h(this.root,function(le){F.call(X,le,W,Q),W+=1})}contains(F){const Q=this.comparator;let X=this.root;for(;X!==null;){const W=Q(F,X.value);if(W===0)break;W<0?X=X.left:X=X.right}return X!==null&&Q(X.value,F)===0}findIterator(F){return c.find(this,F,this.comparator)}beginIterator(){return c.left(this)}endIterator(){return c.right(this)}}class b{constructor(F){this.value=F,this.left=null,this.right=null}}const m=(D,F)=>{for(;D[F]!==null;)D=D[F];return D},E=(D,F,Q)=>{if(D===null)throw"Value not in set";const X=Q(F,D.value);if(X<0)D.left=E(D.left,F,Q);else if(X>0)D.right=E(D.right,F,Q);else if(D.left===null&&D.right===null)D=null;else if(D.right===null)D=D.left;else if(D.left===null)D=D.right;else{const W=m(D.right,"left");D.value=W.value,D.right=E(D.right,W.value,Q)}return D};class v extends y{constructor(F){super(),this.options=F,this.comparator=this.options.comparator,this.onInsertConflict=this.options.onInsertConflict,this.root=null}insert(F){const Q=this.comparator;if(this.root!==null){let X=this.root,W=null;for(;;){const le=Q(F,X.value);if(le===0){X.value=this.onInsertConflict(X.value,F);return}else{if(W=le<0?"left":"right",X[W]===null)break;X=X[W]}}return X[W]=new b(F)}else return this.root=new b(F)}remove(F){return this.root=E(this.root,F,this.comparator)}}class T{constructor(F){this.value=F,this.left=null,this.right=null,this.isRed=!0}}const j=D=>{const F=D.right;return D.right=F.left,F.left=D,F.isRed=D.isRed,D.isRed=!0,F},N=D=>{const F=D.left;return D.left=F.right,F.right=D,F.isRed=D.isRed,D.isRed=!0,F},x=D=>{D.isRed=!D.isRed,D.left.isRed=!D.left.isRed,D.right.isRed=!D.right.isRed},I=D=>(x(D),D.right!==null&&D.right.left!==null&&D.right.left.isRed&&(D.right=N(D.right),D=j(D),x(D)),D),w=D=>(x(D),D.left!==null&&D.left.left!==null&&D.left.left.isRed&&(D=N(D),x(D)),D),S=(D,F,Q,X)=>{if(D===null)return new T(F);const W=Q(F,D.value);return W===0?D.value=X(D.value,F):W<0?D.left=S(D.left,F,Q,X):D.right=S(D.right,F,Q,X),D.right!==null&&D.right.isRed&&!(D.left!==null&&D.left.isRed)&&(D=j(D)),D.left!==null&&D.left.isRed&&D.left.left!==null&&D.left.left.isRed&&(D=N(D)),D.left!==null&&D.left.isRed&&D.right!==null&&D.right.isRed&&x(D),D},P=D=>{for(;D.left!==null;)D=D.left;return D},B=D=>(D.right!==null&&D.right.isRed&&(D=j(D)),D.left!==null&&D.left.isRed&&D.left.left!==null&&D.left.left.isRed&&(D=N(D)),D.left!==null&&D.left.isRed&&D.right!==null&&D.right.isRed&&x(D),D),H=D=>D.left===null?null:(!D.left.isRed&&!(D.left.left!==null&&D.left.left.isRed)&&(D=I(D)),D.left=H(D.left),B(D)),q=(D,F,Q)=>{if(D===null)throw"Value not in set";if(Q(F,D.value)<0){if(D.left===null)throw"Value not in set";!D.left.isRed&&!(D.left.left!==null&&D.left.left.isRed)&&(D=I(D)),D.left=q(D.left,F,Q)}else{if(D.left!==null&&D.left.isRed&&(D=N(D)),D.right===null){if(Q(F,D.value)===0)return null;throw"Value not in set"}!D.right.isRed&&!(D.right.left!==null&&D.right.left.isRed)&&(D=w(D)),Q(F,D.value)===0?(D.value=P(D.right).value,D.right=H(D.right)):D.right=q(D.right,F,Q)}return D!==null&&(D=B(D)),D};class V extends y{constructor(F){super(),this.options=F,this.comparator=this.options.comparator,this.onInsertConflict=this.options.onInsertConflict,this.root=null}insert(F){this.root=S(this.root,F,this.comparator,this.onInsertConflict),this.root.isRed=!1}remove(F){this.root=q(this.root,F,this.comparator),this.root!==null&&(this.root.isRed=!1)}}const $={OnInsertConflictThrow:(D,F)=>{throw new Error("Value already in set")},OnInsertConflictReplace:(D,F)=>F,OnInsertConflictIgnore:(D,F)=>D};class ee extends t{constructor(F){F||(F={}),F.strategy||(F.strategy=V),F.comparator||(F.comparator=function(Q,X){return(Q||0)-(X||0)}),F.onInsertConflict||(F.onInsertConflict=$.OnInsertConflictThrow),super(F)}}return ee.ArrayStrategy=d,ee.BinaryTreeStrategy=v,ee.RedBlackTreeStrategy=V,Object.assign(ee,$),ee})})(sortedSet);class SortingIterator extends AsyncIterator{constructor(e,t,o,l){super();let d;const u=()=>{const a=new sortedSetExports({comparator:t}),c=()=>{e.removeListener("data",h),e.removeListener("error",y),e.removeListener("end",b),e.destroy()},h=m=>{a.insert(o(m))},y=m=>{c(),this.emit("error",m)},b=()=>{c(),d=a.beginIterator(),this.readable=!0};e.on("data",h),e.on("error",y),e.on("end",b)};this.read=()=>{if(d){const a=d.value();return a===null?(this.close(),null):(d=d.next(),l(a))}return this.readable=!1,null},RESOLVED.then(u).catch(a=>{RESOLVED.then(()=>this.emit("error",a))})}}const SORTING_KEY=Symbol(),compareSortableQuadsReverse=(n,e)=>n[SORTING_KEY]>e[SORTING_KEY]?-1:1,compareSortableQuads=(n,e)=>n[SORTING_KEY]>e[SORTING_KEY]?1:-1,emitSortableQuad=n=>n,getLevelQueryForIndex=(n,e,t,o)=>{const l=writePattern(n,e,t);if(l===null)return null;const d={[l.gte?"gte":"gt"]:l.gt,[l.lte?"lte":"lt"]:l.lt,keys:!0,values:!1,keyEncoding:"utf8"};return typeof o.limit=="number"&&(d.limit=o.limit),typeof o.reverse=="boolean"&&(d.reverse=o.reverse),{level:d,order:l.order,index:l.index}},getLevelQuery=(n,e,t,o)=>{for(let l=0,d;l<e.length;l+=1){d=e[l];const u=getLevelQueryForIndex(n,d,t,o);if(u!==null&&(!o.order||arrStartsWith(u.order,o.order)))return u}return null},getStream=async(n,e,t)=>{const{dataFactory:o,prefixes:l,indexes:d}=n,u=getLevelQuery(e,d,l,t);if(u!==null){const{index:c,level:h,order:y}=u;let b=new LevelIterator(n.db.iterator(h),m=>quadReader.read(m,c.prefix.length,c.terms,o,l));return{type:ResultType.QUADS,order:y,iterator:b,index:c.terms,resorted:!1}}const a=getLevelQuery(e,d,l,emptyObject);if(a!==null){const{index:c,level:h,order:y}=a;let b=new LevelIterator(n.db.iterator(h),m=>quadReader.read(m,c.prefix.length,c.terms,o,l));if(typeof t.order<"u"&&!arrStartsWith(t.order,y)){const m=v=>(v[SORTING_KEY]=twoStepsQuadWriter.ingest(v,l).write("",t.order)+separator,v),E=t.reverse===!0?compareSortableQuadsReverse:compareSortableQuads;if(b=new SortingIterator(b,E,m,emitSortableQuad),typeof t.limit<"u"){const v=function(){this.removeListener("end",v),this.removeListener("error",v),this.destroy()};b=b.take(t.limit).on("end",v).on("error",v)}}return{type:ResultType.QUADS,order:t.order||y,iterator:b,index:c.terms,resorted:!0}}throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(t)}`)},getApproximateSize=async(n,e,t)=>{if(!n.db.approximateSize)return{type:ResultType.APPROXIMATE_SIZE,approximateSize:1/0};const{indexes:o,prefixes:l}=n,d=getLevelQuery(e,o,l,t);if(d===null)throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(t)}`);const{level:u}=d,a=u.gte||u.gt,c=u.lte||u.lt;return new Promise((h,y)=>{n.db.approximateSize(a,c,(b,m)=>{if(b){y(b);return}h({type:ResultType.APPROXIMATE_SIZE,approximateSize:Math.max(1,m)})})})};class Scope{id;blankNodes;factory;static async init(e){return new Scope(e.dataFactory,uid(),new Map)}static async load(e,t){const o=Scope.getLevelIteratorOpts(!1,!0,t),l=new LevelIterator(e.db.iterator(o),(a,c)=>c),d=new Map,{dataFactory:u}=e;return await consumeOneByOne(l,a=>{const{originalLabel:c,randomLabel:h}=JSON.parse(a);d.set(c,u.blankNode(h))}),new Scope(u,t,d)}static async delete(e,t){const o=e.db.batch(),l=Scope.getLevelIteratorOpts(!0,!1,t),d=new LevelIterator(e.db.iterator(l),(u,a)=>u);await consumeOneByOne(d,u=>{o.del(u)}),await o.write()}static getLevelIteratorOpts(e,t,o){const l=o?`SCOPE${separator}${o}${separator}`:`SCOPE${separator}`;return{keys:e,values:t,keyEncoding:"utf8",valueEncoding:"utf8",gte:l,lte:`${l}${boundary}`}}static addMappingToLevelBatch(e,t,o,l){t.put(`SCOPE${separator}${e}${separator}${o}`,JSON.stringify({originalLabel:o,randomLabel:l}))}constructor(e,t,o){this.blankNodes=o,this.factory=e,this.id=t}parseBlankNode(e,t){let o=this.blankNodes.get(e.value);return o||(o=this.factory.blankNode(uid()),this.blankNodes.set(e.value,o),Scope.addMappingToLevelBatch(this.id,t,e.value,o.value)),o}parseSubject(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseObject(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseGraph(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseQuad(e,t){return this.factory.quad(this.parseSubject(e.subject,t),e.predicate,this.parseObject(e.object,t),this.parseGraph(e.graph,t))}}class Quadstore{db;indexes;id;prefixes;dataFactory;constructor(e){ensureAbstractLevel(e.backend,'"opts.backend"'),this.dataFactory=e.dataFactory,this.db=e.backend,this.indexes=[],this.id=uid(),(e.indexes||defaultIndexes).forEach(t=>this._addIndex(t)),this.prefixes=e.prefixes||{expandTerm:t=>t,compactIri:t=>t}}ensureReady(){if(this.db.status!=="open")throw new Error(`Store is not ready (status: "${this.db.status}"). Did you call store.open()?`)}async open(){this.db.status!=="open"&&await this.db.open()}async close(){this.db.status!=="closed"&&await this.db.close()}toString(){return this.toJSON()}toJSON(){return`[object ${this.constructor.name}::${this.id}]`}_addIndex(e){const t=e.map(o=>o.charAt(0).toUpperCase()).join("");this.indexes.push({terms:e,prefix:t+separator})}async clear(){if(typeof this.db.clear=="function")return new Promise((e,t)=>{this.db.clear(o=>{o?t(o):e()})});await this.delStream((await this.getStream({})).iterator,{batchSize:20})}match(e,t,o,l,d=emptyObject){if(e&&e.termType==="Literal")return new EmptyIterator;const u={subject:e,predicate:t,object:o,graph:l};return wrap$1(this.getStream(u,d).then(a=>a.iterator))}async countQuads(e,t,o,l,d=emptyObject){if(e&&e.termType==="Literal")return 0;const u={subject:e,predicate:t,object:o,graph:l};return(await this.getApproximateSize(u,d)).approximateSize}import(e){const t=new eventsExports.EventEmitter;return this.putStream(e,{}).then(()=>{t.emit("end")}).catch(o=>{t.emit("error",o)}),t}remove(e){const t=new eventsExports.EventEmitter;return this.delStream(e,{}).then(()=>t.emit("end")).catch(o=>t.emit("error",o)),t}removeMatches(e,t,o,l,d=emptyObject){const u=this.match(e,t,o,l,d);return this.remove(u)}deleteGraph(e){return this.removeMatches(void 0,void 0,void 0,e)}async getApproximateSize(e,t=emptyObject){return await this.ensureReady(),await getApproximateSize(this,e,t)}_batchPut(e,t){const{indexes:o,prefixes:l}=this;twoStepsQuadWriter.ingest(e,l);for(let d=0,u=o.length,a;d<u;d+=1){a=o[d];const c=twoStepsQuadWriter.write(a.prefix,a.terms);t=t.put(c,emptyValue,levelPutOpts)}return t}async put(e,t=emptyObject){this.ensureReady();const{indexes:o,db:l}=this;let d=l.batch();return t.scope&&(e=t.scope.parseQuad(e,d)),this._batchPut(e,d),await this.writeBatch(d,t),{type:ResultType.VOID}}async multiPut(e,t=emptyObject){this.ensureReady();const{indexes:o,db:l}=this;let d=l.batch();for(let u=0,a=e.length,c;u<a;u+=1)c=e[u],t.scope&&(c=t.scope.parseQuad(c,d)),this._batchPut(c,d);return await this.writeBatch(d,t),{type:ResultType.VOID}}_batchDel(e,t){const{indexes:o,prefixes:l}=this;twoStepsQuadWriter.ingest(e,l);for(let d=0,u=o.length,a;d<u;d+=1){a=o[d];const c=twoStepsQuadWriter.write(a.prefix,a.terms);t=t.del(c,levelDelOpts)}return t}async del(e,t=emptyObject){this.ensureReady();const o=this.db.batch();return this._batchDel(e,o),await this.writeBatch(o,t),{type:ResultType.VOID}}async multiDel(e,t=emptyObject){this.ensureReady();const o=this.db.batch();for(let l=0,d=e.length,u;l<d;l+=1)u=e[l],this._batchDel(u,o);return await this.writeBatch(o,t),{type:ResultType.VOID}}async patch(e,t,o=emptyObject){this.ensureReady();const{indexes:l,db:d}=this,u=d.batch();return this._batchDel(e,u),this._batchPut(t,u),await this.writeBatch(u,o),{type:ResultType.VOID}}async multiPatch(e,t,o=emptyObject){this.ensureReady();const{indexes:l,db:d}=this;let u=d.batch();for(let a=0,c=e.length,h;a<c;a+=1)h=e[a],this._batchDel(h,u);for(let a=0,c=t.length,h;a<c;a+=1)h=t[a],this._batchPut(h,u);return await this.writeBatch(u,o),{type:ResultType.VOID}}async writeBatch(e,t){t.preWrite&&await t.preWrite(e),await e.write()}async get(e,t=emptyObject){this.ensureReady();const o=await this.getStream(e,t);return{items:await streamToArray(o.iterator),type:o.type,order:o.order,index:o.index,resorted:o.resorted}}async getStream(e,t=emptyObject){return this.ensureReady(),await getStream(this,e,t)}async putStream(e,t=emptyObject){this.ensureReady();const o=t.batchSize||1;return o===1?await consumeOneByOne(e,l=>this.put(l,t)):await consumeInBatches(e,o,l=>this.multiPut(l,t)),{type:ResultType.VOID}}async delStream(e,t=emptyObject){this.ensureReady();const o=t.batchSize||1;return o===1?await consumeOneByOne(e,l=>this.del(l)):await consumeInBatches(e,o,l=>this.multiDel(l)),{type:ResultType.VOID}}async initScope(){return await this.ensureReady(),await Scope.init(this)}async loadScope(e){return await this.ensureReady(),await Scope.load(this,e)}async deleteScope(e){await this.ensureReady(),await Scope.delete(this,e)}async deleteAllScopes(){await this.ensureReady(),await Scope.delete(this)}}var sparqlalgebrajs={},sparqlAlgebra={},es6=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var o,l,d;if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(l=o;l--!==0;)if(!n(e[l],t[l]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;for(l of e.entries())if(!n(l[1],t.get(l[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(l of e.entries())if(!t.has(l[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(o=e.length,o!=t.length)return!1;for(l=o;l--!==0;)if(e[l]!==t[l])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(d=Object.keys(e),o=d.length,o!==Object.keys(t).length)return!1;for(l=o;l--!==0;)if(!Object.prototype.hasOwnProperty.call(t,d[l]))return!1;for(l=o;l--!==0;){var u=d[l];if(!n(e[u],t[u]))return!1}return!0}return e!==e&&t!==t},rdfString={},TermUtil$1={};Object.defineProperty(TermUtil$1,"__esModule",{value:!0});TermUtil$1.stringQuadToQuad=TermUtil$1.quadToStringQuad=TermUtil$1.stringToTerm=TermUtil$1.getLiteralLanguage=TermUtil$1.getLiteralType=TermUtil$1.getLiteralValue=TermUtil$1.termToString=void 0;const rdf_data_factory_1$2=rdfDataFactory,FACTORY=new rdf_data_factory_1$2.DataFactory;function termToString(n){if(n)switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return"_:"+n.value;case"Literal":const e=n;return'"'+e.value+'"'+(e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+e.datatype.value:"")+(e.language?"@"+e.language:"");case"Quad":return`<<${termToString(n.subject)} ${termToString(n.predicate)} ${termToString(n.object)}${n.graph.termType==="DefaultGraph"?"":" "+termToString(n.graph)}>>`;case"Variable":return"?"+n.value;case"DefaultGraph":return n.value}}TermUtil$1.termToString=termToString;function getLiteralValue(n){const e=/^"([^]*)"/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]}TermUtil$1.getLiteralValue=getLiteralValue;function getLiteralType(n){const e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}TermUtil$1.getLiteralType=getLiteralType;function getLiteralLanguage(n){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]?e[1].toLowerCase():""}TermUtil$1.getLiteralLanguage=getLiteralLanguage;function stringToTerm(n,e){if(e=e||FACTORY,!n||!n.length)return e.defaultGraph();switch(n[0]){case"_":return e.blankNode(n.substr(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(n.substr(1));case'"':const t=getLiteralLanguage(n),o=e.namedNode(getLiteralType(n));return e.literal(getLiteralValue(n),t||o);case"<":default:if(n.startsWith("<<")&&n.endsWith(">>")){const l=n.slice(2,-2).trim();let d=[],u=0,a=0,c=!1;for(let h=0;h<l.length;h++){const y=l[h];if(y==="<"&&u++,y===">"){if(u===0)throw new Error("Found closing tag without opening tag in "+n);u--}if(y==='"'){let b=!1,m=h;for(;m-- >0&&l[m]==="\\";)b=!b;b||(c=!c)}if(y===" "&&!c&&u===0){for(d.push(l.slice(a,h));l[h+1]===" ";)h+=1;a=h+1}}if(u!==0)throw new Error("Found opening tag without closing tag in "+n);if(d.push(l.slice(a,l.length)),d.length!==3&&d.length!==4)throw new Error("Nested quad syntax error "+n);return d=d.map(h=>h.startsWith("<")&&!h.includes(" ")?h.slice(1,-1):h),e.quad(stringToTerm(d[0]),stringToTerm(d[1]),stringToTerm(d[2]),d[3]?stringToTerm(d[3]):void 0)}return e.namedNode(n)}}TermUtil$1.stringToTerm=stringToTerm;function quadToStringQuad(n){return{subject:termToString(n.subject),predicate:termToString(n.predicate),object:termToString(n.object),graph:termToString(n.graph)}}TermUtil$1.quadToStringQuad=quadToStringQuad;function stringQuadToQuad(n,e){return e=e||FACTORY,e.quad(stringToTerm(n.subject,e),stringToTerm(n.predicate,e),stringToTerm(n.object,e),stringToTerm(n.graph,e))}TermUtil$1.stringQuadToQuad=stringQuadToQuad;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.termToString=n.stringToTerm=n.stringQuadToQuad=n.quadToStringQuad=n.getLiteralValue=n.getLiteralType=n.getLiteralLanguage=void 0;const e=TermUtil$1;Object.defineProperty(n,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(n,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(n,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(n,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(n,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(n,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(n,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(rdfString);var algebra={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.expressionTypes=n.types=void 0,function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"}(n.types||(n.types={})),function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"}(n.expressionTypes||(n.expressionTypes={}))})(algebra);var factory$2={},Wildcard$2={};let Wildcard$1=class{constructor(){return WILDCARD||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(Wildcard$1.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(Wildcard$1.prototype,"termType",{enumerable:!0,value:"Wildcard"});var WILDCARD=new Wildcard$1;Wildcard$2.Wildcard=Wildcard$1;var SparqlParser=function(){var n=function(be,me,we,Te){for(we=we||{},Te=be.length;Te--;we[be[Te]]=me);return we},e=[6,12,13,15,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],t=[2,211],o=[107,117,120,122,123,132,133,138,322,323,324,325,326],l=[2,389],d=[1,22],u=[1,31],a=[13,16,35,195,219,224,312],c=[6,90],h=[45,46,58],y=[45,58],b=[1,62],m=[1,64],E=[1,60],v=[1,63],T=[1,69],j=[1,70],N=[26,34,35],x=[13,16,35,195,219,312],I=[13,16,312],w=[119,141,320,327],S=[13,16,119,141,312],P=[1,96],B=[1,100],H=[1,102],q=[119,141,320,321,327],V=[13,16,119,141,312,321],$=[1,108],ee=[2,253],D=[1,107],F=[13,16,34,35,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Q=[6,45,46,58,68,75,78,86,88,90],X=[6,13,16,34,45,46,58,68,75,78,86,88,90,312],W=[6,13,16,26,34,35,37,38,45,46,48,58,68,75,78,86,87,88,90,93,100,116,119,132,133,135,140,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,330,331,333,334,335,336,337,338,339],le=[34,35,45,46,58],ue=[1,139],de=[1,140],ce=[1,151],ge=[1,131],Oe=[1,125],je=[1,130],Ie=[1,132],Se=[1,142],he=[1,143],Ae=[1,144],Re=[1,145],Be=[1,147],Ne=[1,148],De=[2,461],M=[1,157],G=[1,158],J=[1,159],ae=[1,152],Z=[1,153],ie=[1,156],oe=[1,166],Y=[1,167],te=[1,168],ne=[1,169],se=[1,170],fe=[1,171],ye=[1,172],ve=[1,173],_=[1,174],p=[1,175],g=[1,165],O=[1,160],L=[1,161],k=[1,162],z=[1,163],_e=[1,164],Pe=[6,13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],xe=[2,312],Le=[1,199],Ee=[1,197],$e=[6,191],He=[2,329],ar=[2,317],ct=[45,135],re=[6,48,78,86,88,90],pe=[2,257],Ve=[1,213],Qe=[1,215],Xe=[6,48,75,78,86,88,90],Ut=[2,255],Vt=[1,221],at=[1,233],Wt=[1,231],We=[1,239],qt=[1,232],qe=[1,237],Ye=[1,238],Vr=[6,68,75,78,86,88,90],or=[37,38,191,250,278],Qt=[37,38,191,250,254,278],$t=[37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,334,335,336,337,338,339],Ze=[26,37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,331,334,335,336,337,338,339],Qr=[1,267],$r=[1,266],et=[6,13,16,26,34,35,37,38,46,48,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],Gr=[1,275],Hr=[1,274],nt=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],Yt=[35,93],ur=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],Xr=[13,16,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],zr=[48,93],Kr=[34,38],It=[6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331],dt=[6,13,16,26,34,35,38,87,93,226,231,245,246,271,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331,333],Jr=[1,299],Wr=[1,300],qr=[6,116,191],Nt=[48,119],Er=[6,48,86,88,90],Yr=[2,341],yt=[2,333],Tt=[1,340],Et=[1,342],Zt=[48,119,328],ft=[13,16,34,195,312],Rt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Je=[13,16,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],Or=[1,374],Sr=[1,375],Zr=[13,16,26,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],Ar=[1,398],Pt=[1,399],en=[13,16,38,195,224,312],tn=[1,416],Ot=[6,48,90],rn=[6,13,16,35,48,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],jr=[6,13,16,34,35,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,226,231,245,246,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,339,340,341,342,343,344],Lt=[46,48,90,119,167,168,170,173,174],er=[1,435],tr=[1,436],nn=[1,442],sn=[1,441],Dt=[48,119,191,227,328],cr=[13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],lr=[13,16,34,35,38,48,87,93,119,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],dr=[13,16,38,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],xr=[35,48],an=[2,332],on=[1,497],un=[1,494],cn=[1,495],ln=[6,13,16,26,34,35,37,38,46,48,68,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,329,331,334,335,336,337,338,339,340,341,342,343,344],Ir=[1,515],fr=[46,48,90,119,167,168,170,173,174,328],dn=[13,16,34,35,195,219,224,312],Bt=[6,13,16,34,35,48,75,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],fn=[13,16,34,35,38,48,87,93,119,191,195,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Gt=[6,13,16,34,35,48,81,83,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],hn=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],pn=[13,16,34,312],bt=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],_t=[2,344],hr=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],mn=[13,16,34,35,37,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],vt=[2,339],yn=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],bn=[13,16,38,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],rr=[46,48,90,119,167,168,170,173,174,191,227,328],gn=[13,16,34,38,48,87,100,195,231,235,299,300,301,302,303,304,305,306,307,308,309,310,311,312],_n=[13,16,34,35,48,87,93,119,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],vn=[2,327],Nr={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClauseWildcard:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifierNoGroup:21,SelectClauseVars:22,SelectQuery_repetition1:23,SolutionModifier:24,SelectClauseBase:25,"*":26,SelectClauseVars_repetition_plus0:27,SELECT:28,SelectClauseBase_option0:29,SubSelect:30,SubSelect_option0:31,SubSelect_option1:32,SelectClauseItem:33,VAR:34,"(":35,Expression:36,AS:37,")":38,VarTriple:39,ConstructQuery:40,CONSTRUCT:41,ConstructTemplate:42,ConstructQuery_repetition0:43,ConstructQuery_repetition1:44,WHERE:45,"{":46,ConstructQuery_option0:47,"}":48,DescribeQuery:49,DESCRIBE:50,DescribeQuery_group0:51,DescribeQuery_repetition0:52,DescribeQuery_option0:53,AskQuery:54,ASK:55,AskQuery_repetition0:56,DatasetClause:57,FROM:58,DatasetClause_option0:59,iri:60,WhereClause_option0:61,GroupGraphPattern:62,SolutionModifier_option0:63,SolutionModifierNoGroup_option0:64,SolutionModifierNoGroup_option1:65,SolutionModifierNoGroup_option2:66,GroupClause:67,GROUP:68,BY:69,GroupClause_repetition_plus0:70,GroupCondition:71,BuiltInCall:72,FunctionCall:73,HavingClause:74,HAVING:75,HavingClause_repetition_plus0:76,OrderClause:77,ORDER:78,OrderClause_repetition_plus0:79,OrderCondition:80,ASC:81,BrackettedExpression:82,DESC:83,Constraint:84,LimitOffsetClauses:85,LIMIT:86,INTEGER:87,OFFSET:88,ValuesClause:89,VALUES:90,InlineData:91,InlineData_repetition0:92,NIL:93,InlineData_repetition1:94,InlineData_repetition_plus2:95,InlineData_repetition3:96,DataBlockValue:97,Literal:98,ConstTriple:99,UNDEF:100,DataBlockValueList:101,DataBlockValueList_repetition_plus0:102,Update:103,Update_repetition0:104,Update1:105,Update_option0:106,LOAD:107,Update1_option0:108,Update1_option1:109,Update1_group0:110,Update1_option2:111,GraphRefAll:112,Update1_group1:113,Update1_option3:114,GraphOrDefault:115,TO:116,CREATE:117,Update1_option4:118,GRAPH:119,INSERTDATA:120,QuadPattern:121,DELETEDATA:122,DELETEWHERE:123,Update1_option5:124,InsertClause:125,Update1_option6:126,Update1_repetition0:127,Update1_option7:128,DeleteClause:129,Update1_option8:130,Update1_repetition1:131,DELETE:132,INSERT:133,UsingClause:134,USING:135,UsingClause_option0:136,WithClause:137,WITH:138,IntoGraphClause:139,INTO:140,DEFAULT:141,GraphOrDefault_option0:142,GraphRefAll_group0:143,QuadPattern_option0:144,QuadPattern_repetition0:145,QuadsNotTriples:146,QuadsNotTriples_group0:147,QuadsNotTriples_option0:148,QuadsNotTriples_option1:149,QuadsNotTriples_option2:150,TriplesTemplate:151,TriplesTemplate_repetition0:152,TriplesSameSubject:153,TriplesTemplate_option0:154,GroupGraphPatternSub:155,GroupGraphPatternSub_option0:156,GroupGraphPatternSub_repetition0:157,GroupGraphPatternSubTail:158,GraphPatternNotTriples:159,GroupGraphPatternSubTail_option0:160,GroupGraphPatternSubTail_option1:161,TriplesBlock:162,TriplesBlock_repetition0:163,TriplesSameSubjectPath:164,TriplesBlock_option0:165,GraphPatternNotTriples_repetition0:166,OPTIONAL:167,MINUS:168,GraphPatternNotTriples_group0:169,SERVICE:170,GraphPatternNotTriples_option0:171,GraphPatternNotTriples_group1:172,FILTER:173,BIND:174,FunctionCall_option0:175,FunctionCall_repetition0:176,ExpressionList:177,ExpressionList_repetition0:178,ConstructTemplate_option0:179,ConstructTriples:180,ConstructTriples_repetition0:181,ConstructTriples_option0:182,TriplesSameSubject_group0:183,PropertyListNotEmpty:184,TriplesNode:185,PropertyList:186,PropertyList_option0:187,VerbObjectList:188,PropertyListNotEmpty_repetition0:189,SemiOptionalVerbObjectList:190,";":191,SemiOptionalVerbObjectList_option0:192,Verb:193,ObjectList:194,a:195,ObjectList_repetition0:196,GraphNode:197,ObjectListPath:198,ObjectListPath_repetition0:199,GraphNodePath:200,TriplesSameSubjectPath_group0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,PropertyListPathNotEmpty_group0:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmpty_repetition1:207,PropertyListPathNotEmptyTail:208,PropertyListPathNotEmptyTail_group0:209,Path:210,Path_repetition0:211,PathSequence:212,PathSequence_repetition0:213,PathEltOrInverse:214,PathElt:215,PathPrimary:216,PathElt_option0:217,PathEltOrInverse_option0:218,"!":219,PathNegatedPropertySet:220,PathOneInPropertySet:221,PathNegatedPropertySet_repetition0:222,PathNegatedPropertySet_option0:223,"^":224,TriplesNode_repetition_plus0:225,"[":226,"]":227,TriplesNodePath_repetition_plus0:228,GraphNode_group0:229,GraphNodePath_group0:230,"<<":231,VarTriple_group0:232,VarTriple_group1:233,VarTriple_group2:234,">>":235,VarTriple_group3:236,VarTriple_group4:237,ConstTriple_group0:238,ConstTriple_group1:239,ConstTriple_group2:240,ConstTriple_group3:241,ConstTriple_group4:242,VarOrTerm:243,Term:244,BLANK_NODE_LABEL:245,ANON:246,ConditionalAndExpression:247,Expression_repetition0:248,ExpressionTail:249,"||":250,RelationalExpression:251,ConditionalAndExpression_repetition0:252,ConditionalAndExpressionTail:253,"&&":254,AdditiveExpression:255,RelationalExpression_group0:256,RelationalExpression_option0:257,IN:258,MultiplicativeExpression:259,AdditiveExpression_repetition0:260,AdditiveExpressionTail:261,AdditiveExpressionTail_group0:262,NumericLiteralPositive:263,AdditiveExpressionTail_repetition0:264,NumericLiteralNegative:265,AdditiveExpressionTail_repetition1:266,UnaryExpression:267,MultiplicativeExpression_repetition0:268,MultiplicativeExpressionTail:269,MultiplicativeExpressionTail_group0:270,"+":271,PrimaryExpression:272,"-":273,Aggregate:274,FUNC_ARITY0:275,FUNC_ARITY1:276,FUNC_ARITY2:277,",":278,IF:279,BuiltInCall_group0:280,BOUND:281,BNODE:282,BuiltInCall_option0:283,EXISTS:284,COUNT:285,Aggregate_option0:286,Aggregate_group0:287,FUNC_AGGREGATE:288,Aggregate_option1:289,GROUP_CONCAT:290,Aggregate_option2:291,Aggregate_option3:292,GroupConcatSeparator:293,SEPARATOR:294,"=":295,String:296,LANGTAG:297,"^^":298,DECIMAL:299,DOUBLE:300,BOOLEAN:301,STRING_LITERAL1:302,STRING_LITERAL2:303,STRING_LITERAL_LONG1:304,STRING_LITERAL_LONG2:305,INTEGER_POSITIVE:306,DECIMAL_POSITIVE:307,DOUBLE_POSITIVE:308,INTEGER_NEGATIVE:309,DECIMAL_NEGATIVE:310,DOUBLE_NEGATIVE:311,PNAME_LN:312,QueryOrUpdate_group0_option0:313,Prologue_repetition0_group0:314,SelectClauseBase_option0_group0:315,DISTINCT:316,REDUCED:317,DescribeQuery_group0_repetition_plus0_group0:318,DescribeQuery_group0_repetition_plus0:319,NAMED:320,SILENT:321,CLEAR:322,DROP:323,ADD:324,MOVE:325,COPY:326,ALL:327,".":328,UNION:329,"|":330,"/":331,PathElt_option0_group0:332,"?":333,"!=":334,"<":335,">":336,"<=":337,">=":338,NOT:339,CONCAT:340,COALESCE:341,SUBSTR:342,REGEX:343,REPLACE:344,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",26:"*",28:"SELECT",34:"VAR",35:"(",37:"AS",38:")",41:"CONSTRUCT",45:"WHERE",46:"{",48:"}",50:"DESCRIBE",55:"ASK",58:"FROM",68:"GROUP",69:"BY",75:"HAVING",78:"ORDER",81:"ASC",83:"DESC",86:"LIMIT",87:"INTEGER",88:"OFFSET",90:"VALUES",93:"NIL",100:"UNDEF",107:"LOAD",116:"TO",117:"CREATE",119:"GRAPH",120:"INSERTDATA",122:"DELETEDATA",123:"DELETEWHERE",132:"DELETE",133:"INSERT",135:"USING",138:"WITH",140:"INTO",141:"DEFAULT",167:"OPTIONAL",168:"MINUS",170:"SERVICE",173:"FILTER",174:"BIND",191:";",195:"a",219:"!",224:"^",226:"[",227:"]",231:"<<",235:">>",245:"BLANK_NODE_LABEL",246:"ANON",250:"||",254:"&&",258:"IN",271:"+",273:"-",275:"FUNC_ARITY0",276:"FUNC_ARITY1",277:"FUNC_ARITY2",278:",",279:"IF",281:"BOUND",282:"BNODE",284:"EXISTS",285:"COUNT",288:"FUNC_AGGREGATE",290:"GROUP_CONCAT",294:"SEPARATOR",295:"=",297:"LANGTAG",298:"^^",299:"DECIMAL",300:"DOUBLE",301:"BOOLEAN",302:"STRING_LITERAL1",303:"STRING_LITERAL2",304:"STRING_LITERAL_LONG1",305:"STRING_LITERAL_LONG2",306:"INTEGER_POSITIVE",307:"DECIMAL_POSITIVE",308:"DOUBLE_POSITIVE",309:"INTEGER_NEGATIVE",310:"DECIMAL_NEGATIVE",311:"DOUBLE_NEGATIVE",312:"PNAME_LN",316:"DISTINCT",317:"REDUCED",320:"NAMED",321:"SILENT",322:"CLEAR",323:"DROP",324:"ADD",325:"MOVE",326:"COPY",327:"ALL",328:".",329:"UNION",330:"|",331:"/",333:"?",334:"!=",335:"<",336:">",337:"<=",338:">=",339:"NOT",340:"CONCAT",341:"COALESCE",342:"SUBSTR",343:"REGEX",344:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[17,4],[18,2],[22,2],[25,2],[30,4],[30,4],[33,1],[33,5],[33,5],[40,5],[40,7],[49,5],[54,4],[57,3],[20,2],[24,2],[21,3],[67,3],[71,1],[71,1],[71,3],[71,5],[71,1],[74,2],[77,3],[80,2],[80,2],[80,1],[80,1],[85,2],[85,2],[85,4],[85,4],[89,2],[91,4],[91,4],[91,6],[97,1],[97,1],[97,1],[97,1],[101,3],[103,3],[105,4],[105,3],[105,5],[105,4],[105,2],[105,2],[105,2],[105,6],[105,6],[129,2],[125,2],[134,3],[137,2],[139,3],[115,1],[115,2],[112,2],[112,1],[121,4],[146,7],[151,3],[62,3],[62,3],[155,2],[158,3],[162,3],[159,2],[159,2],[159,2],[159,3],[159,4],[159,2],[159,6],[159,6],[159,1],[84,1],[84,1],[84,1],[73,2],[73,6],[177,1],[177,4],[42,3],[180,3],[153,2],[153,2],[186,1],[184,2],[190,2],[188,2],[193,1],[193,1],[193,1],[194,2],[198,2],[164,2],[164,2],[202,4],[208,1],[208,3],[210,2],[212,2],[215,2],[214,2],[216,1],[216,1],[216,2],[216,3],[220,1],[220,1],[220,4],[221,1],[221,1],[221,2],[221,2],[185,3],[185,3],[203,3],[203,3],[197,1],[197,1],[200,1],[200,1],[39,9],[39,5],[99,9],[99,5],[243,1],[243,1],[244,1],[244,1],[244,1],[244,1],[244,1],[36,2],[249,2],[247,2],[253,2],[251,1],[251,3],[251,4],[255,2],[261,2],[261,2],[261,2],[259,2],[269,2],[267,2],[267,2],[267,2],[267,1],[272,1],[272,1],[272,1],[272,1],[272,1],[272,1],[82,3],[72,1],[72,2],[72,4],[72,6],[72,8],[72,2],[72,4],[72,2],[72,4],[72,3],[274,5],[274,5],[274,6],[293,4],[98,1],[98,2],[98,3],[98,1],[98,1],[98,1],[98,1],[98,1],[98,1],[296,1],[296,1],[296,1],[296,1],[263,1],[263,1],[263,1],[265,1],[265,1],[265,1],[60,1],[60,1],[60,1],[313,0],[313,1],[5,1],[5,1],[5,1],[314,1],[314,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,2],[27,1],[27,2],[315,1],[315,1],[29,0],[29,1],[31,0],[31,1],[32,0],[32,1],[43,0],[43,2],[44,0],[44,2],[47,0],[47,1],[318,1],[318,1],[319,1],[319,2],[51,1],[51,1],[52,0],[52,2],[53,0],[53,1],[56,0],[56,2],[59,0],[59,1],[61,0],[61,1],[63,0],[63,1],[64,0],[64,1],[65,0],[65,1],[66,0],[66,1],[70,1],[70,2],[76,1],[76,2],[79,1],[79,2],[92,0],[92,2],[94,0],[94,2],[95,1],[95,2],[96,0],[96,2],[102,1],[102,2],[104,0],[104,4],[106,0],[106,2],[108,0],[108,1],[109,0],[109,1],[110,1],[110,1],[111,0],[111,1],[113,1],[113,1],[113,1],[114,0],[114,1],[118,0],[118,1],[124,0],[124,1],[126,0],[126,1],[127,0],[127,2],[128,0],[128,1],[130,0],[130,1],[131,0],[131,2],[136,0],[136,1],[142,0],[142,1],[143,1],[143,1],[143,1],[144,0],[144,1],[145,0],[145,2],[147,1],[147,1],[148,0],[148,1],[149,0],[149,1],[150,0],[150,1],[152,0],[152,3],[154,0],[154,1],[156,0],[156,1],[157,0],[157,2],[160,0],[160,1],[161,0],[161,1],[163,0],[163,3],[165,0],[165,1],[166,0],[166,3],[169,1],[169,1],[171,0],[171,1],[172,1],[172,1],[175,0],[175,1],[176,0],[176,3],[178,0],[178,3],[179,0],[179,1],[181,0],[181,3],[182,0],[182,1],[183,1],[183,1],[187,0],[187,1],[189,0],[189,2],[192,0],[192,1],[196,0],[196,3],[199,0],[199,3],[201,1],[201,1],[204,0],[204,1],[205,1],[205,1],[206,0],[206,3],[207,0],[207,2],[209,1],[209,1],[211,0],[211,3],[213,0],[213,3],[332,1],[332,1],[332,1],[217,0],[217,1],[218,0],[218,1],[222,0],[222,3],[223,0],[223,1],[225,1],[225,2],[228,1],[228,2],[229,1],[229,1],[230,1],[230,1],[232,1],[232,1],[233,1],[233,1],[234,1],[234,1],[236,1],[236,1],[237,1],[237,1],[238,1],[238,1],[239,1],[239,1],[240,1],[240,1],[241,1],[241,1],[242,1],[242,1],[248,0],[248,2],[252,0],[252,2],[256,1],[256,1],[256,1],[256,1],[256,1],[256,1],[257,0],[257,1],[260,0],[260,2],[262,1],[262,1],[264,0],[264,2],[266,0],[266,2],[268,0],[268,2],[270,1],[270,1],[280,1],[280,1],[280,1],[280,1],[280,1],[283,0],[283,1],[286,0],[286,1],[287,1],[287,1],[289,0],[289,1],[291,0],[291,1],[292,0],[292,1]],performAction:function(me,we,Te,Ce,Me,C,ut){var U=C.length-1;switch(Me){case 1:if(C[U-1]=C[U-1]||{},ke.base&&(C[U-1].base=ke.base),ke.base="",C[U-1].prefixes=ke.prefixes,ke.prefixes=null,ke.pathOnly){if(C[U-1].type==="path"||"termType"in C[U-1])return C[U-1];throw new Error("Received full SPARQL query in path only mode")}else if(C[U-1].type==="path"||"termType"in C[U-1])throw new Error("Received only path in full SPARQL mode");if(C[U-1].type==="update"){const Ue={};for(const Ge of C[U-1].updates)if(Ge.updateType==="insert"){const Fe={};for(const tt of Ge.insert)if(tt.type==="bgp"||tt.type==="graph")for(const rt of tt.triples)rt.subject.termType==="BlankNode"&&(Fe[rt.subject.value]=!0),rt.predicate.termType==="BlankNode"&&(Fe[rt.predicate.value]=!0),rt.object.termType==="BlankNode"&&(Fe[rt.object.value]=!0);for(const tt of Object.keys(Fe)){if(Ue[tt])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Ue[tt]=!0}}}return C[U-1];case 3:this.$=ze(C[U-1],C[U],{type:"query"});break;case 4:ke.base=nr(C[U]);break;case 5:ke.prefixes||(ke.prefixes={}),C[U-1]=C[U-1].substr(0,C[U-1].length-1),C[U]=nr(C[U]),ke.prefixes[C[U-1]]=C[U];break;case 6:this.$=ze(C[U-3],jt(C[U-2]),C[U-1],C[U]);break;case 7:if(!ke.skipValidation&&(Cr(C[U-3].variables.map(Ge=>Br(Ge.expression))).some(Ge=>Ge.aggregation==="count"&&!(Ge.expression instanceof pr))||C[U].group)){for(const Ge of C[U-3].variables)if(Ge.termType==="Variable"){if(!C[U].group||!C[U].group.map(Fe=>zt(Fe)).includes(zt(Ge)))throw Error("Projection of ungrouped variable (?"+zt(Ge)+")")}else if(Br(Ge.expression).length===0){const Fe=Qn(Ge.expression);for(const tt of Fe)if(!C[U].group||!C[U].group.map||!C[U].group.map(rt=>zt(rt)).includes(zt(tt)))throw Error("Use of ungrouped variable in projection of operation (?"+zt(tt)+")")}}const Kt=C[U-1].where.filter(Ue=>Ue.type==="query");if(Kt.length>0){const Ue=C[U-3].variables.filter(Fe=>Fe.variable&&Fe.variable.value).map(Fe=>Fe.variable.value),Ge=Cr(Kt.map(Fe=>Fe.variables)).map(Fe=>Fe.value||Fe.variable.value);for(const Fe of Ue)if(Ge.indexOf(Fe)>=0)throw Error("Target id of 'AS' (?"+Fe+") already used in subquery")}this.$=ze(C[U-3],jt(C[U-2]),C[U-1],C[U]);break;case 8:this.$=ze(C[U-1],{variables:[new pr]});break;case 9:const kr=C[U].map(Ue=>Ue.value||Ue.variable.value),vr=$n(kr);if(vr.length>0)throw Error("Two or more of the resulting columns have the same name (?"+vr[0]+")");this.$=ze(C[U-1],{variables:C[U]});break;case 10:this.$=ze({queryType:"SELECT"},C[U]&&(C[U-1]=ot(C[U]),C[U]={},C[U][C[U-1]]=!0,C[U]));break;case 11:case 12:this.$=ze(C[U-3],C[U-2],C[U-1],C[U],{type:"query"});break;case 13:case 100:case 137:case 166:this.$=it(C[U]);break;case 14:case 28:this.$=At(C[U-3],{variable:it(C[U-1])});break;case 15:this.$=sr(At(C[U-3],{variable:it(C[U-1])}));break;case 16:this.$=ze({queryType:"CONSTRUCT",template:C[U-3]},jt(C[U-2]),C[U-1],C[U]);break;case 17:this.$=ze({queryType:"CONSTRUCT",template:C[U-2]=C[U-2]?C[U-2].triples:[]},jt(C[U-5]),{where:[{type:"bgp",triples:Ht([],C[U-2])}]},C[U]);break;case 18:this.$=ze({queryType:"DESCRIBE",variables:C[U-3]==="*"?[new pr]:C[U-3].map(it)},jt(C[U-2]),C[U-1],C[U]);break;case 19:this.$=ze({queryType:"ASK"},jt(C[U-2]),C[U-1],C[U]);break;case 20:case 61:this.$={iri:C[U],named:!!C[U-1]};break;case 21:this.$={where:C[U].patterns};break;case 22:this.$=ze(C[U-1],C[U]);break;case 23:this.$=ze(C[U-2],C[U-1],C[U]);break;case 24:this.$={group:C[U]};break;case 25:case 26:case 32:case 34:this.$=At(C[U]);break;case 27:this.$=At(C[U-1]);break;case 29:case 35:this.$=At(it(C[U]));break;case 30:this.$={having:C[U]};break;case 31:this.$={order:C[U]};break;case 33:this.$=At(C[U],{descending:!0});break;case 36:this.$={limit:Xt(C[U])};break;case 37:this.$={offset:Xt(C[U])};break;case 38:this.$={limit:Xt(C[U-2]),offset:Xt(C[U])};break;case 39:this.$={limit:Xt(C[U]),offset:Xt(C[U-2])};break;case 40:this.$={type:"values",values:C[U]};break;case 41:this.$=C[U-1].map(function(Ue){var Ge={};return Ge[C[U-3]]=Ue,Ge});break;case 42:this.$=C[U-1].map(function(){return{}});break;case 43:var xt=C[U-4].length;C[U-4]=C[U-4].map(it),this.$=C[U-1].map(function(Ue){if(Ue.length!==xt)throw Error("Inconsistent VALUES length");for(var Ge={},Fe=0;Fe<xt;Fe++)Ge["?"+C[U-4][Fe].value]=Ue[Fe];return Ge});break;case 46:this.$=sr(C[U]);break;case 47:this.$=void 0;break;case 48:case 92:case 117:case 167:this.$=C[U-1];break;case 49:this.$={type:"update",updates:St(C[U-2],C[U-1])};break;case 50:this.$=ze({type:"load",silent:!!C[U-2],source:C[U-1]},C[U]&&{destination:C[U]});break;case 51:this.$={type:ot(C[U-2]),silent:!!C[U-1],graph:C[U]};break;case 52:this.$={type:ot(C[U-4]),silent:!!C[U-3],source:C[U-2],destination:C[U]};break;case 53:this.$={type:"create",silent:!!C[U-2],graph:{type:"graph",name:C[U]}};break;case 54:this.$={updateType:"insert",insert:Rn(C[U])};break;case 55:this.$={updateType:"delete",delete:Fr(Rn(C[U]))};break;case 56:this.$={updateType:"deletewhere",delete:Fr(C[U])};break;case 57:this.$=ze({updateType:"insertdelete"},C[U-5],{insert:C[U-4]||[]},{delete:C[U-3]||[]},jt(C[U-2],"using"),{where:C[U].patterns});break;case 58:this.$=ze({updateType:"insertdelete"},C[U-5],{delete:C[U-4]||[]},{insert:C[U-3]||[]},jt(C[U-2],"using"),{where:C[U].patterns});break;case 59:this.$=Fr(C[U]);break;case 60:case 63:case 160:case 181:this.$=C[U];break;case 62:this.$={graph:C[U]};break;case 64:this.$={type:"graph",default:!0};break;case 65:case 66:this.$={type:"graph",name:C[U]};break;case 67:this.$={},this.$[ot(C[U])]=!0;break;case 68:this.$=C[U-2]?ht(C[U-1],[C[U-2]]):ht(C[U-1]);break;case 69:var br=ze(C[U-3]||{triples:[]},{type:"graph",name:it(C[U-5])});this.$=C[U]?[br,C[U]]:[br];break;case 70:case 75:this.$={type:"bgp",triples:ht(C[U-2],[C[U-1]])};break;case 71:this.$={type:"group",patterns:[C[U-1]]};break;case 72:for(const Ue of C[U-1].filter(Ge=>Ge.type==="bind")){const Ge=C[U-1].indexOf(Ue),Fe=new Set;for(const tt of C[U-1].slice(0,Ge))(tt.type==="group"||tt.type==="bgp")&&Nn(tt).forEach(rt=>Fe.add(rt));if(Fe.has(Ue.variable.value))throw Error("Variable used to bind is already bound (?"+Ue.variable.value+")")}this.$={type:"group",patterns:C[U-1]};break;case 73:this.$=C[U-1]?ht([C[U-1]],C[U]):ht(C[U]);break;case 74:this.$=C[U]?[C[U-2],C[U]]:C[U-2];break;case 76:C[U-1].length?this.$={type:"union",patterns:ht(C[U-1].map(Pr),[Pr(C[U])])}:this.$=C[U];break;case 77:this.$=ze(C[U],{type:"optional"});break;case 78:this.$=ze(C[U],{type:"minus"});break;case 79:this.$=ze(C[U],{type:"graph",name:it(C[U-1])});break;case 80:this.$=ze(C[U],{type:"service",name:it(C[U-1]),silent:!!C[U-2]});break;case 81:this.$={type:"filter",expression:C[U]};break;case 82:this.$={type:"bind",variable:it(C[U-1]),expression:C[U-3]};break;case 83:this.$=sr({type:"bind",variable:it(C[U-1]),expression:C[U-3]});break;case 88:this.$={type:"functionCall",function:C[U-1],args:[]};break;case 89:this.$={type:"functionCall",function:C[U-5],args:St(C[U-2],C[U-1]),distinct:!!C[U-3]};break;case 90:case 108:case 119:case 211:case 219:case 221:case 233:case 235:case 245:case 249:case 269:case 271:case 275:case 279:case 302:case 308:case 319:case 329:case 335:case 341:case 345:case 355:case 357:case 361:case 369:case 373:case 375:case 383:case 385:case 389:case 391:case 400:case 432:case 434:case 444:case 448:case 450:case 452:this.$=[];break;case 91:this.$=St(C[U-2],C[U-1]);break;case 93:this.$=ht(C[U-2],[C[U-1]]);break;case 94:case 105:this.$=C[U].map(function(Ue){return ze(Ft(C[U-1]),Ue)});break;case 95:this.$=Ht(C[U].map(function(Ue){return ze(Ft(C[U-1].entity),Ue)}),C[U-1].triples);break;case 97:this.$=ht([C[U-1]],C[U]);break;case 98:this.$=ht(C[U]);break;case 99:this.$=Dr(C[U-1],C[U]);break;case 102:case 115:case 122:this.$=ke.factory.namedNode(wn);break;case 103:case 104:this.$=St(C[U-1],C[U]);break;case 106:this.$=C[U]?Ht(C[U].map(function(Ue){return ze(Ft(C[U-1].entity),Ue)}),C[U-1].triples):C[U-1].triples;break;case 107:this.$=Dr(it(C[U-3]),St(C[U-2],C[U-1]),C[U]);break;case 109:this.$=Dr(it(C[U-1]),C[U]);break;case 110:this.$=C[U-1].length?Mt("|",St(C[U-1],C[U])):C[U];break;case 111:this.$=C[U-1].length?Mt("/",St(C[U-1],C[U])):C[U];break;case 112:this.$=C[U]?Mt(C[U],[C[U-1]]):C[U-1];break;case 113:this.$=C[U-1]?Mt(C[U-1],[C[U]]):C[U];break;case 116:case 123:this.$=Mt(C[U-1],[C[U]]);break;case 120:this.$=Mt("|",St(C[U-2],C[U-1]));break;case 124:this.$=Mt(C[U-1],[ke.factory.namedNode(wn)]);break;case 125:case 127:this.$=Un(C[U-1]);break;case 126:case 128:this.$=Vn(C[U-1]);break;case 129:this.$={entity:C[U],triples:[]};break;case 131:this.$={entity:C[U],triples:[]};break;case 133:case 135:this.$=sr(ke.factory.quad(C[U-4],C[U-3],C[U-2],it(C[U-6])));break;case 134:case 136:this.$=sr(ke.factory.quad(C[U-3],C[U-2],C[U-1]));break;case 141:this.$=ir(C[U].replace(/^(_:)/,""));break;case 142:this.$=ir();break;case 143:this.$=ke.factory.namedNode(Tn);break;case 144:case 146:case 151:case 155:this.$=Rr(C[U-1],C[U]);break;case 145:this.$=["||",C[U]];break;case 147:this.$=["&&",C[U]];break;case 149:this.$=st(C[U-1],[C[U-2],C[U]]);break;case 150:this.$=st(C[U-2]?"notin":"in",[C[U-3],C[U]]);break;case 152:case 156:this.$=[C[U-1],C[U]];break;case 153:this.$=["+",Rr(C[U-1],C[U])];break;case 154:var gr=pt(C[U-1].value.replace("-",""),C[U-1].datatype);this.$=["-",Rr(gr,C[U])];break;case 157:this.$=st("UPLUS",[C[U]]);break;case 158:this.$=st(C[U-1],[C[U]]);break;case 159:this.$=st("UMINUS",[C[U]]);break;case 169:this.$=st(ot(C[U-1]));break;case 170:this.$=st(ot(C[U-3]),[C[U-1]]);break;case 171:this.$=st(ot(C[U-5]),[C[U-3],C[U-1]]);break;case 172:this.$=st(ot(C[U-7]),[C[U-5],C[U-3],C[U-1]]);break;case 173:this.$=st(ot(C[U-1]),C[U]);break;case 174:this.$=st("bound",[it(C[U-1])]);break;case 175:this.$=st(C[U-1],[]);break;case 176:this.$=st(C[U-3],[C[U-1]]);break;case 177:this.$=st(C[U-2]?"notexists":"exists",[Pr(C[U])]);break;case 178:case 179:this.$=At(C[U-1],{type:"aggregate",aggregation:ot(C[U-4]),distinct:!!C[U-2]});break;case 180:this.$=At(C[U-2],{type:"aggregate",aggregation:ot(C[U-5]),distinct:!!C[U-3],separator:typeof C[U-1]=="string"?C[U-1]:" "});break;case 182:this.$=pt(C[U]);break;case 183:this.$=Cn(C[U-1],ot(C[U].substr(1)));break;case 184:this.$=pt(C[U-2],C[U]);break;case 185:case 198:this.$=pt(C[U],En);break;case 186:case 199:this.$=pt(C[U],On);break;case 187:case 200:this.$=pt(ot(C[U]),Sn);break;case 190:this.$=pt(C[U].toLowerCase(),Bn);break;case 191:case 192:this.$=In(C[U],1);break;case 193:case 194:this.$=In(C[U],3);break;case 195:this.$=pt(C[U].substr(1),En);break;case 196:this.$=pt(C[U].substr(1),On);break;case 197:this.$=pt(C[U].substr(1).toLowerCase(),Sn);break;case 201:this.$=ke.factory.namedNode(nr(C[U]));break;case 202:var _r=C[U].indexOf(":"),Ke=C[U].substr(0,_r),mt=ke.prefixes[Ke];if(!mt)throw new Error("Unknown prefix: "+Ke);var kt=nr(mt+C[U].substr(_r+1));this.$=ke.factory.namedNode(kt);break;case 203:if(C[U]=C[U].substr(0,C[U].length-1),!(C[U]in ke.prefixes))throw new Error("Unknown prefix: "+C[U]);var kt=nr(ke.prefixes[C[U]]);this.$=ke.factory.namedNode(kt);break;case 212:case 220:case 222:case 224:case 234:case 236:case 242:case 246:case 250:case 264:case 266:case 268:case 270:case 272:case 274:case 276:case 278:case 303:case 309:case 320:case 336:case 370:case 386:case 405:case 407:case 433:case 435:case 445:case 449:case 451:case 453:C[U-1].push(C[U]);break;case 223:case 241:case 263:case 265:case 267:case 273:case 277:case 404:case 406:this.$=[C[U]];break;case 280:C[U-3].push(C[U-2]);break;case 330:case 342:case 346:case 356:case 358:case 362:case 374:case 376:case 384:case 390:case 392:case 401:C[U-2].push(C[U-1]);break}},table:[n(e,t,{3:1,4:2,7:3}),{1:[3]},n(o,[2,279],{5:4,8:5,313:6,210:7,9:8,103:9,211:10,17:11,40:12,49:13,54:14,104:15,18:16,22:17,25:21,6:[2,204],13:l,16:l,35:l,195:l,219:l,224:l,312:l,28:d,41:[1,18],50:[1,19],55:[1,20]}),n([6,13,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],[2,2],{314:23,11:24,14:25,12:[1,26],15:[1,27]}),{6:[1,28]},{6:[2,206]},{6:[2,207]},{6:[2,208]},{6:[2,217],10:29,89:30,90:u},{6:[2,205]},n(a,[2,391],{212:32,213:33}),n(c,[2,213]),n(c,[2,214]),n(c,[2,215]),n(c,[2,216]),{105:34,107:[1,35],110:36,113:37,117:[1,38],120:[1,39],122:[1,40],123:[1,41],124:42,128:43,132:[2,304],133:[2,298],137:49,138:[1,50],322:[1,44],323:[1,45],324:[1,46],325:[1,47],326:[1,48]},n(h,[2,219],{19:51}),n(h,[2,221],{23:52}),n(y,[2,235],{42:53,44:54,46:[1,55]}),{13:b,16:m,26:[1,58],34:E,51:56,60:61,312:v,318:59,319:57},n(h,[2,249],{56:65}),{26:[1,66],27:67,33:68,34:T,35:j},n(N,[2,227],{29:71,315:72,316:[1,73],317:[1,74]}),n(e,[2,212]),n(e,[2,209]),n(e,[2,210]),{13:[1,75]},{16:[1,76]},{1:[2,1]},{6:[2,3]},{6:[2,218]},{34:[1,78],35:[1,80],91:77,93:[1,79]},n([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],[2,110],{330:[1,81]}),n(x,[2,398],{214:82,218:83,224:[1,84]}),{6:[2,281],106:85,191:[1,86]},n(I,[2,283],{108:87,321:[1,88]}),n(w,[2,289],{111:89,321:[1,90]}),n(S,[2,294],{114:91,321:[1,92]}),{118:93,119:[2,296],321:[1,94]},{46:P,121:95},{46:P,121:97},{46:P,121:98},{125:99,133:B},{129:101,132:H},n(q,[2,287]),n(q,[2,288]),n(V,[2,291]),n(V,[2,292]),n(V,[2,293]),{132:[2,305],133:[2,299]},{13:b,16:m,60:103,312:v},{20:104,45:$,46:ee,57:105,58:D,61:106},{20:109,45:$,46:ee,57:110,58:D,61:106},n(h,[2,233],{43:111}),{45:[1,112],57:113,58:D},n(F,[2,361],{179:114,180:115,181:116,48:[2,359]}),n(Q,[2,245],{52:117}),n(Q,[2,243],{60:61,318:118,13:b,16:m,34:E,312:v}),n(Q,[2,244]),n(X,[2,241]),n(X,[2,239]),n(X,[2,240]),n(W,[2,201]),n(W,[2,202]),n(W,[2,203]),{20:119,45:$,46:ee,57:120,58:D,61:106},n(h,[2,8]),n(h,[2,9],{33:121,34:T,35:j}),n(le,[2,223]),n(le,[2,13]),{13:b,16:m,34:ue,35:de,36:122,39:123,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,231:Oe,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(N,[2,10]),n(N,[2,228]),n(N,[2,225]),n(N,[2,226]),n(e,[2,4]),{13:[1,176]},n(Pe,[2,40]),{46:[1,177]},{46:[1,178]},{34:[1,180],95:179},n(a,[2,390]),n([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330],[2,111],{331:[1,181]}),{13:b,16:m,35:[1,187],60:184,195:[1,185],215:182,216:183,219:[1,186],312:v},n(x,[2,399]),{6:[2,49]},n(e,t,{7:3,4:188}),{13:b,16:m,60:189,312:v},n(I,[2,284]),{112:190,119:[1,191],141:[1,193],143:192,320:[1,194],327:[1,195]},n(w,[2,290]),n(I,xe,{115:196,142:198,119:Le,141:Ee}),n(S,[2,295]),{119:[1,200]},{119:[2,297]},n($e,[2,54]),n(F,He,{144:201,151:202,152:203,48:ar,119:ar}),n($e,[2,55]),n($e,[2,56]),n(ct,[2,300],{126:204,129:205,132:H}),{46:P,121:206},n(ct,[2,306],{130:207,125:208,133:B}),{46:P,121:209},n([132,133],[2,62]),n(re,pe,{21:210,64:211,74:212,75:Ve}),n(h,[2,220]),{46:Qe,62:214},n(I,[2,251],{59:216,320:[1,217]}),{46:[2,254]},n(Xe,Ut,{24:218,63:219,67:220,68:Vt}),n(h,[2,222]),{20:222,45:$,46:ee,57:223,58:D,61:106},{46:[1,224]},n(y,[2,236]),{48:[1,225]},{48:[2,360]},{13:b,16:m,34:at,35:Wt,39:230,60:235,87:ce,93:We,98:236,153:226,183:227,185:228,226:qt,231:Oe,243:229,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(Vr,[2,247],{61:106,53:240,57:241,20:242,45:$,46:ee,58:D}),n(X,[2,242]),n(Xe,Ut,{63:219,67:220,24:243,68:Vt}),n(h,[2,250]),n(le,[2,224]),{37:[1,244]},{37:[1,245]},n(or,[2,432],{248:246}),{13:b,16:m,34:at,39:249,60:235,87:ce,93:We,98:236,119:[1,247],231:Oe,236:248,243:250,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(Qt,[2,434],{252:251}),n(Qt,[2,148],{256:252,257:253,258:[2,442],295:[1,254],334:[1,255],335:[1,256],336:[1,257],337:[1,258],338:[1,259],339:[1,260]}),n($t,[2,444],{260:261}),n(Ze,[2,452],{268:262}),{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,263:154,265:155,272:263,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,263:154,265:155,272:264,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,263:154,265:155,272:265,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Ze,[2,160]),n(Ze,[2,161]),n(Ze,[2,162]),n(Ze,[2,163],{35:Qr,93:$r}),n(Ze,[2,164]),n(Ze,[2,165]),n(Ze,[2,166]),{13:b,16:m,34:ue,35:de,36:268,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(et,[2,168]),{93:[1,269]},{35:[1,270]},{35:[1,271]},{35:[1,272]},{35:Gr,93:Hr,177:273},{35:[1,276]},{35:[1,278],93:[1,277]},{284:[1,279]},n(nt,[2,182],{297:[1,280],298:[1,281]}),n(nt,[2,185]),n(nt,[2,186]),n(nt,[2,187]),n(nt,[2,188]),n(nt,[2,189]),n(nt,[2,190]),{35:[1,282]},{35:[1,283]},{35:[1,284]},n(Yt,[2,456]),n(Yt,[2,457]),n(Yt,[2,458]),n(Yt,[2,459]),n(Yt,[2,460]),{284:[2,462]},n(ur,[2,191]),n(ur,[2,192]),n(ur,[2,193]),n(ur,[2,194]),n(nt,[2,195]),n(nt,[2,196]),n(nt,[2,197]),n(nt,[2,198]),n(nt,[2,199]),n(nt,[2,200]),n(e,[2,5]),n(Xr,[2,269],{92:285}),n(zr,[2,271],{94:286}),{34:[1,288],38:[1,287]},n(Kr,[2,273]),n(a,[2,392]),n(It,[2,113]),n(It,[2,396],{217:289,332:290,26:[1,292],271:[1,293],333:[1,291]}),n(dt,[2,114]),n(dt,[2,115]),{13:b,16:m,35:[1,297],60:298,93:[1,296],195:Jr,220:294,221:295,224:Wr,312:v},n(a,l,{211:10,210:301}),n(o,[2,280],{6:[2,282]}),n($e,[2,285],{109:302,139:303,140:[1,304]}),n($e,[2,51]),{13:b,16:m,60:305,312:v},n($e,[2,67]),n($e,[2,314]),n($e,[2,315]),n($e,[2,316]),{116:[1,306]},n(qr,[2,64]),{13:b,16:m,60:307,312:v},n(I,[2,313]),{13:b,16:m,60:308,312:v},n(Nt,[2,319],{145:309}),n(Nt,[2,318]),{13:b,16:m,34:at,35:Wt,39:230,60:235,87:ce,93:We,98:236,153:310,183:227,185:228,226:qt,231:Oe,243:229,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(ct,[2,302],{127:311}),n(ct,[2,301]),n([45,132,135],[2,60]),n(ct,[2,308],{131:312}),n(ct,[2,307]),n([45,133,135],[2,59]),n(c,[2,6]),n(Er,[2,259],{65:313,77:314,78:[1,315]}),n(re,[2,258]),{13:b,16:m,35:de,60:321,72:319,73:320,76:316,82:318,84:317,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n([6,48,68,75,78,86,88,90],[2,21]),n(F,Yr,{25:21,30:322,155:323,18:324,22:325,156:326,162:327,163:328,28:d,46:yt,48:yt,90:yt,119:yt,167:yt,168:yt,170:yt,173:yt,174:yt}),{13:b,16:m,60:329,312:v},n(I,[2,252]),n(c,[2,7]),n(re,pe,{64:211,74:212,21:330,75:Ve}),n(Xe,[2,256]),{69:[1,331]},n(Xe,Ut,{63:219,67:220,24:332,68:Vt}),n(h,[2,234]),n(F,He,{152:203,47:333,151:334,48:[2,237]}),n(h,[2,92]),{48:[2,363],182:335,328:[1,336]},{13:b,16:m,34:Tt,60:341,184:337,188:338,193:339,195:Et,312:v},n(Zt,[2,367],{188:338,193:339,60:341,186:343,187:344,184:345,13:b,16:m,34:Tt,195:Et,312:v}),n(ft,[2,365]),n(ft,[2,366]),{13:b,16:m,34:at,35:Wt,39:351,60:235,87:ce,93:We,98:236,185:349,197:347,225:346,226:qt,229:348,231:Oe,243:350,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},{13:b,16:m,34:Tt,60:341,184:352,188:338,193:339,195:Et,312:v},n(Rt,[2,137]),n(Rt,[2,138]),n(Rt,[2,139]),n(Rt,[2,140]),n(Rt,[2,141]),n(Rt,[2,142]),n(Rt,[2,143]),n(Xe,Ut,{63:219,67:220,24:353,68:Vt}),n(Q,[2,246]),n(Vr,[2,248]),n(c,[2,19]),{34:[1,354]},{34:[1,355]},n([37,38,191,278],[2,144],{249:356,250:[1,357]}),{13:b,16:m,34:[1,359],60:360,232:358,312:v},{13:b,16:m,34:Tt,60:341,193:361,195:Et,312:v},n(ft,[2,418]),n(ft,[2,419]),n(or,[2,146],{253:362,254:[1,363]}),{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,255:364,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{258:[1,365]},n(Je,[2,436]),n(Je,[2,437]),n(Je,[2,438]),n(Je,[2,439]),n(Je,[2,440]),n(Je,[2,441]),{258:[2,443]},n([37,38,191,250,254,258,278,295,334,335,336,337,338,339],[2,151],{261:366,262:367,263:368,265:369,271:[1,370],273:[1,371],306:se,307:fe,308:ye,309:ve,310:_,311:p}),n($t,[2,155],{269:372,270:373,26:Or,331:Sr}),n(Ze,[2,157]),n(Ze,[2,158]),n(Ze,[2,159]),n(et,[2,88]),n(Je,[2,353],{175:376,316:[1,377]}),{38:[1,378]},n(et,[2,169]),{13:b,16:m,34:ue,35:de,36:379,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{13:b,16:m,34:ue,35:de,36:380,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{13:b,16:m,34:ue,35:de,36:381,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(et,[2,173]),n(et,[2,90]),n(Je,[2,357],{178:382}),{34:[1,383]},n(et,[2,175]),{13:b,16:m,34:ue,35:de,36:384,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{46:Qe,62:385},n(nt,[2,183]),{13:b,16:m,60:386,312:v},n(Zr,[2,463],{286:387,316:[1,388]}),n(Je,[2,467],{289:389,316:[1,390]}),n(Je,[2,469],{291:391,316:[1,392]}),{13:b,16:m,48:[1,393],60:395,87:ce,97:394,98:396,99:397,100:Ar,231:Pt,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},{48:[1,400],93:[1,401]},{46:[1,402]},n(Kr,[2,274]),n(It,[2,112]),n(It,[2,397]),n(It,[2,393]),n(It,[2,394]),n(It,[2,395]),n(dt,[2,116]),n(dt,[2,118]),n(dt,[2,119]),n(en,[2,400],{222:403}),n(dt,[2,121]),n(dt,[2,122]),{13:b,16:m,60:404,195:[1,405],312:v},{38:[1,406]},n($e,[2,50]),n($e,[2,286]),{119:[1,407]},n($e,[2,66]),n(I,xe,{142:198,115:408,119:Le,141:Ee}),n(qr,[2,65]),n($e,[2,53]),{48:[1,409],119:[1,411],146:410},n(Nt,[2,331],{154:412,328:[1,413]}),{45:[1,414],134:415,135:tn},{45:[1,417],134:418,135:tn},n(Ot,[2,261],{66:419,85:420,86:[1,421],88:[1,422]}),n(Er,[2,260]),{69:[1,423]},n(re,[2,30],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:424,13:b,16:m,35:de,275:Se,276:he,277:Ae,279:Re,281:Be,282:Ne,284:De,285:M,288:G,290:J,312:v,339:g,340:O,341:L,342:k,343:z,344:_e}),n(rn,[2,265]),n(jr,[2,85]),n(jr,[2,86]),n(jr,[2,87]),{35:Qr,93:$r},{48:[1,425]},{48:[1,426]},{20:427,45:$,46:ee,61:106},{20:428,45:$,46:ee,61:106},n(Lt,[2,335],{157:429}),n(Lt,[2,334]),{13:b,16:m,34:at,35:er,39:434,60:235,87:ce,93:We,98:236,164:430,201:431,203:432,226:tr,231:Oe,243:433,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(Q,[2,20]),n(Ot,[2,22]),{13:b,16:m,34:nn,35:sn,60:321,70:437,71:438,72:439,73:440,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(c,[2,16]),{48:[1,443]},{48:[2,238]},{48:[2,93]},n(F,[2,362],{48:[2,364]}),n(Zt,[2,94]),n(Dt,[2,369],{189:444}),n(F,[2,373],{194:445,196:446}),n(F,[2,100]),n(F,[2,101]),n(F,[2,102]),n(Zt,[2,95]),n(Zt,[2,96]),n(Zt,[2,368]),{13:b,16:m,34:at,35:Wt,38:[1,447],39:351,60:235,87:ce,93:We,98:236,185:349,197:448,226:qt,229:348,231:Oe,243:350,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(cr,[2,404]),n(lr,[2,129]),n(lr,[2,130]),n(lr,[2,408]),n(lr,[2,409]),{227:[1,449]},n(c,[2,18]),{38:[1,450]},{38:[1,451]},n(or,[2,433]),{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:452,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{46:[1,453]},{46:[2,412]},{46:[2,413]},{13:b,16:m,34:at,39:455,60:235,87:ce,93:We,98:236,231:Oe,237:454,243:456,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(Qt,[2,435]),{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,251:457,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Qt,[2,149]),{35:Gr,93:Hr,177:458},n($t,[2,445]),{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,259:459,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Ze,[2,448],{264:460}),n(Ze,[2,450],{266:461}),n(Je,[2,446]),n(Je,[2,447]),n(Ze,[2,453]),{13:b,16:m,34:ue,35:de,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,263:154,265:155,267:462,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Je,[2,454]),n(Je,[2,455]),n(Je,[2,355],{176:463}),n(Je,[2,354]),n([6,13,16,26,34,35,37,38,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],[2,167]),{38:[1,464]},{278:[1,465]},{278:[1,466]},{13:b,16:m,34:ue,35:de,36:467,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{38:[1,468]},{38:[1,469]},n(et,[2,177]),n(nt,[2,184]),{13:b,16:m,26:[1,471],34:ue,35:de,36:472,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,287:470,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Zr,[2,464]),{13:b,16:m,34:ue,35:de,36:473,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Je,[2,468]),{13:b,16:m,34:ue,35:de,36:474,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Je,[2,470]),n(Pe,[2,41]),n(Xr,[2,270]),n(dr,[2,44]),n(dr,[2,45]),n(dr,[2,46]),n(dr,[2,47]),{13:b,16:m,60:235,87:ce,93:We,98:236,99:477,119:[1,475],231:Pt,241:476,244:478,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(Pe,[2,42]),n(zr,[2,272]),n(xr,[2,275],{96:479}),{13:b,16:m,38:[2,402],60:298,195:Jr,221:481,223:480,224:Wr,312:v},n(dt,[2,123]),n(dt,[2,124]),n(dt,[2,117]),{13:b,16:m,60:482,312:v},n($e,[2,52]),n([6,45,132,133,135,191],[2,68]),n(Nt,[2,320]),{13:b,16:m,34:[1,484],60:485,147:483,312:v},n(Nt,[2,70]),n(F,[2,330],{48:an,119:an}),{46:Qe,62:486},n(ct,[2,303]),n(I,[2,310],{136:487,320:[1,488]}),{46:Qe,62:489},n(ct,[2,309]),n(Ot,[2,23]),n(Ot,[2,262]),{87:[1,490]},{87:[1,491]},{13:b,16:m,34:on,35:de,60:321,72:319,73:320,79:492,80:493,81:un,82:318,83:cn,84:496,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(rn,[2,266]),n(ln,[2,71]),n(ln,[2,72]),n(re,pe,{64:211,74:212,21:498,75:Ve}),n(Xe,Ut,{63:219,67:220,24:499,68:Vt}),{46:[2,345],48:[2,73],89:509,90:u,119:[1,505],158:500,159:501,166:502,167:[1,503],168:[1,504],170:[1,506],173:[1,507],174:[1,508]},n(Lt,[2,343],{165:510,328:[1,511]}),n(a,l,{211:10,202:512,205:513,210:514,34:Ir}),n(fr,[2,379],{211:10,205:513,210:514,204:516,202:517,13:l,16:l,35:l,195:l,219:l,224:l,312:l,34:Ir}),n(dn,[2,377]),n(dn,[2,378]),{13:b,16:m,34:at,35:er,39:523,60:235,87:ce,93:We,98:236,200:519,203:521,226:tr,228:518,230:520,231:Oe,243:522,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(a,l,{211:10,205:513,210:514,202:524,34:Ir}),n(Xe,[2,24],{274:141,280:146,283:149,60:321,72:439,73:440,71:525,13:b,16:m,34:nn,35:sn,275:Se,276:he,277:Ae,279:Re,281:Be,282:Ne,284:De,285:M,288:G,290:J,312:v,339:g,340:O,341:L,342:k,343:z,344:_e}),n(Bt,[2,263]),n(Bt,[2,25]),n(Bt,[2,26]),{13:b,16:m,34:ue,35:de,36:526,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(Bt,[2,29]),n(Xe,Ut,{63:219,67:220,24:527,68:Vt}),n([48,119,227,328],[2,97],{190:528,191:[1,529]}),n(Dt,[2,99]),{13:b,16:m,34:at,35:Wt,39:351,60:235,87:ce,93:We,98:236,185:349,197:530,226:qt,229:348,231:Oe,243:350,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(fn,[2,125]),n(cr,[2,405]),n(fn,[2,126]),n(le,[2,14]),n(le,[2,15]),n(or,[2,145]),{13:b,16:m,34:at,39:532,60:235,87:ce,93:We,98:236,231:Oe,233:531,243:533,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},{235:[1,534]},{235:[2,420]},{235:[2,421]},n(Qt,[2,147]),n(Qt,[2,150]),n($t,[2,152]),n($t,[2,153],{270:373,269:535,26:Or,331:Sr}),n($t,[2,154],{270:373,269:536,26:Or,331:Sr}),n(Ze,[2,156]),{13:b,16:m,34:ue,35:de,36:537,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(et,[2,170]),{13:b,16:m,34:ue,35:de,36:538,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{13:b,16:m,34:ue,35:de,36:539,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{38:[1,540],278:[1,541]},n(et,[2,174]),n(et,[2,176]),{38:[1,542]},{38:[2,465]},{38:[2,466]},{38:[1,543]},{38:[2,471],191:[1,546],292:544,293:545},{13:b,16:m,34:[1,548],60:549,238:547,312:v},{13:b,16:m,34:Tt,60:341,193:550,195:Et,312:v},n(ft,[2,428]),n(ft,[2,429]),{35:[1,553],48:[1,551],101:552},{38:[1,554]},{38:[2,403],330:[1,555]},n($e,[2,63]),{46:[1,556]},{46:[2,321]},{46:[2,322]},n($e,[2,57]),{13:b,16:m,60:557,312:v},n(I,[2,311]),n($e,[2,58]),n(Ot,[2,36],{88:[1,558]}),n(Ot,[2,37],{86:[1,559]}),n(Er,[2,31],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:496,80:560,13:b,16:m,34:on,35:de,81:un,83:cn,275:Se,276:he,277:Ae,279:Re,281:Be,282:Ne,284:De,285:M,288:G,290:J,312:v,339:g,340:O,341:L,342:k,343:z,344:_e}),n(Gt,[2,267]),{35:de,82:561},{35:de,82:562},n(Gt,[2,34]),n(Gt,[2,35]),{31:563,48:[2,229],89:564,90:u},{32:565,48:[2,231],89:566,90:u},n(Lt,[2,336]),n(hn,[2,337],{160:567,328:[1,568]}),{46:Qe,62:569},{46:Qe,62:570},{46:Qe,62:571},{13:b,16:m,34:[1,573],60:574,169:572,312:v},n(pn,[2,349],{171:575,321:[1,576]}),{13:b,16:m,35:de,60:321,72:319,73:320,82:318,84:577,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{35:[1,578]},n(bt,[2,84]),n(Lt,[2,75]),n(F,[2,342],{46:_t,48:_t,90:_t,119:_t,167:_t,168:_t,170:_t,173:_t,174:_t}),n(fr,[2,105]),n(F,[2,383],{206:579}),n(F,[2,381]),n(F,[2,382]),n(fr,[2,106]),n(fr,[2,380]),{13:b,16:m,34:at,35:er,38:[1,580],39:523,60:235,87:ce,93:We,98:236,200:581,203:521,226:tr,230:520,231:Oe,243:522,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(cr,[2,406]),n(hr,[2,131]),n(hr,[2,132]),n(hr,[2,410]),n(hr,[2,411]),{227:[1,582]},n(Bt,[2,264]),{37:[1,584],38:[1,583]},n(c,[2,17]),n(Dt,[2,370]),n(Dt,[2,371],{193:339,60:341,192:585,188:586,13:b,16:m,34:Tt,195:Et,312:v}),n(Dt,[2,103],{278:[1,587]}),{13:b,16:m,34:Tt,60:341,193:588,195:Et,312:v},n(ft,[2,414]),n(ft,[2,415]),n(mn,[2,134]),n(Ze,[2,449]),n(Ze,[2,451]),{38:[1,589],278:[1,590]},{38:[1,591]},{278:[1,592]},n(et,[2,91]),n(Je,[2,358]),n(et,[2,178]),n(et,[2,179]),{38:[1,593]},{38:[2,472]},{294:[1,594]},{46:[1,595]},{46:[2,422]},{46:[2,423]},{13:b,16:m,60:235,87:ce,93:We,98:236,99:597,231:Pt,242:596,244:598,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(Pe,[2,43]),n(xr,[2,276]),{13:b,16:m,60:395,87:ce,97:600,98:396,99:397,100:Ar,102:599,231:Pt,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(dt,[2,120]),n(en,[2,401]),n(F,He,{152:203,148:601,151:602,48:[2,323]}),n(ct,[2,61]),{87:[1,603]},{87:[1,604]},n(Gt,[2,268]),n(Gt,[2,32]),n(Gt,[2,33]),{48:[2,11]},{48:[2,230]},{48:[2,12]},{48:[2,232]},n(F,Yr,{163:328,161:605,162:606,46:vt,48:vt,90:vt,119:vt,167:vt,168:vt,170:vt,173:vt,174:vt}),n(hn,[2,338]),n(bt,[2,76],{329:[1,607]}),n(bt,[2,77]),n(bt,[2,78]),{46:Qe,62:608},{46:[2,347]},{46:[2,348]},{13:b,16:m,34:[1,610],60:611,172:609,312:v},n(pn,[2,350]),n(bt,[2,81]),{13:b,16:m,34:ue,35:de,36:612,39:613,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,231:Oe,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},{13:b,16:m,34:at,35:er,39:523,60:235,87:ce,93:We,98:236,200:614,203:521,226:tr,230:520,231:Oe,243:522,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(yn,[2,127]),n(cr,[2,407]),n(yn,[2,128]),n(Bt,[2,27]),{34:[1,615]},n(Dt,[2,98]),n(Dt,[2,372]),n(F,[2,374]),{13:b,16:m,34:at,39:617,60:235,87:ce,93:We,98:236,231:Oe,234:616,243:618,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(et,[2,89]),n(Je,[2,356]),n(et,[2,171]),{13:b,16:m,34:ue,35:de,36:619,60:136,72:135,73:137,82:134,87:ce,98:138,219:ge,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:je,272:133,273:Ie,274:141,275:Se,276:he,277:Ae,279:Re,280:146,281:Be,282:Ne,283:149,284:De,285:M,288:G,290:J,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v,339:g,340:O,341:L,342:k,343:z,344:_e},n(et,[2,180]),{295:[1,620]},{13:b,16:m,60:235,87:ce,93:We,98:236,99:622,231:Pt,239:621,244:623,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},{235:[1,624]},{235:[2,430]},{235:[2,431]},{13:b,16:m,38:[1,625],60:395,87:ce,97:626,98:396,99:397,100:Ar,231:Pt,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(bn,[2,277]),{48:[1,627]},{48:[2,324]},n(Ot,[2,38]),n(Ot,[2,39]),n(Lt,[2,74]),n(Lt,[2,340]),{46:[2,346]},n(bt,[2,79]),{46:Qe,62:628},{46:[2,351]},{46:[2,352]},{37:[1,629]},{37:[1,630]},n(rr,[2,385],{207:631,278:[1,632]}),{38:[1,633]},{48:[1,634]},{48:[2,416]},{48:[2,417]},{38:[1,635]},{296:636,302:oe,303:Y,304:te,305:ne},{13:b,16:m,34:Tt,60:341,193:637,195:Et,312:v},n(ft,[2,424]),n(ft,[2,425]),n(gn,[2,136]),n(xr,[2,48]),n(bn,[2,278]),n(_n,[2,325],{149:638,328:[1,639]}),n(bt,[2,80]),{34:[1,640]},{34:[1,641]},n([46,48,90,119,167,168,170,173,174,227,328],[2,107],{208:642,191:[1,643]}),n(F,[2,384]),n(Bt,[2,28]),{235:[1,644]},n(et,[2,172]),{38:[2,181]},{13:b,16:m,60:235,87:ce,93:We,98:236,99:646,231:Pt,240:645,244:647,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(F,He,{152:203,150:648,151:649,48:vn,119:vn}),n(_n,[2,326]),{38:[1,650]},{38:[1,651]},n(rr,[2,386]),n(rr,[2,108],{211:10,209:652,210:653,13:l,16:l,35:l,195:l,219:l,224:l,312:l,34:[1,654]}),n(mn,[2,133]),{48:[1,655]},{48:[2,426]},{48:[2,427]},n(Nt,[2,69]),n(Nt,[2,328]),n(bt,[2,82]),n(bt,[2,83]),n(F,[2,375],{198:656,199:657}),n(F,[2,387]),n(F,[2,388]),{235:[1,658]},n(rr,[2,109]),{13:b,16:m,34:at,35:er,39:523,60:235,87:ce,93:We,98:236,200:659,203:521,226:tr,230:520,231:Oe,243:522,244:234,245:qe,246:Ye,263:154,265:155,296:150,299:ae,300:Z,301:ie,302:oe,303:Y,304:te,305:ne,306:se,307:fe,308:ye,309:ve,310:_,311:p,312:v},n(gn,[2,135]),n(rr,[2,104],{278:[1,660]}),n(F,[2,376])],defaultActions:{5:[2,206],6:[2,207],7:[2,208],9:[2,205],28:[2,1],29:[2,3],30:[2,218],85:[2,49],94:[2,297],108:[2,254],115:[2,360],165:[2,462],260:[2,443],334:[2,238],335:[2,93],359:[2,412],360:[2,413],455:[2,420],456:[2,421],471:[2,465],472:[2,466],484:[2,321],485:[2,322],545:[2,472],548:[2,422],549:[2,423],563:[2,11],564:[2,230],565:[2,12],566:[2,232],573:[2,347],574:[2,348],597:[2,430],598:[2,431],602:[2,324],607:[2,346],610:[2,351],611:[2,352],617:[2,416],618:[2,417],636:[2,181],646:[2,426],647:[2,427]},parseError:function(me,we){if(we.recoverable)this.trace(me);else{var Te=new Error(me);throw Te.hash=we,Te}},parse:function(me){var we=this,Te=[0],Ce=[null],Me=[],C=this.table,ut="",U=0,xt=0,br=2,gr=1,_r=Me.slice.call(arguments,1),Ke=Object.create(this.lexer),mt={yy:{}};for(var kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,kt)&&(mt.yy[kt]=this.yy[kt]);Ke.setInput(me,mt.yy),mt.yy.lexer=Ke,mt.yy.parser=this,typeof Ke.yylloc>"u"&&(Ke.yylloc={});var Kt=Ke.yylloc;Me.push(Kt);var kr=Ke.options&&Ke.options.ranges;typeof mt.yy.parseError=="function"?this.parseError=mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var vr=function(){var Jt;return Jt=Ke.lex()||gr,typeof Jt!="number"&&(Jt=we.symbols_[Jt]||Jt),Jt},Ue,Ge,Fe,tt,rt={},wr,wt,Pn,Tr;;){if(Ge=Te[Te.length-1],this.defaultActions[Ge]?Fe=this.defaultActions[Ge]:((Ue===null||typeof Ue>"u")&&(Ue=vr()),Fe=C[Ge]&&C[Ge][Ue]),typeof Fe>"u"||!Fe.length||!Fe[0]){var Ur="";Tr=[];for(wr in C[Ge])this.terminals_[wr]&&wr>br&&Tr.push("'"+this.terminals_[wr]+"'");Ke.showPosition?Ur="Parse error on line "+(U+1)+`:
`+Ke.showPosition()+`
Expecting `+Tr.join(", ")+", got '"+(this.terminals_[Ue]||Ue)+"'":Ur="Parse error on line "+(U+1)+": Unexpected "+(Ue==gr?"end of input":"'"+(this.terminals_[Ue]||Ue)+"'"),this.parseError(Ur,{text:Ke.match,token:this.terminals_[Ue]||Ue,line:Ke.yylineno,loc:Kt,expected:Tr})}if(Fe[0]instanceof Array&&Fe.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ge+", token: "+Ue);switch(Fe[0]){case 1:Te.push(Ue),Ce.push(Ke.yytext),Me.push(Ke.yylloc),Te.push(Fe[1]),Ue=null,xt=Ke.yyleng,ut=Ke.yytext,U=Ke.yylineno,Kt=Ke.yylloc;break;case 2:if(wt=this.productions_[Fe[1]][1],rt.$=Ce[Ce.length-wt],rt._$={first_line:Me[Me.length-(wt||1)].first_line,last_line:Me[Me.length-1].last_line,first_column:Me[Me.length-(wt||1)].first_column,last_column:Me[Me.length-1].last_column},kr&&(rt._$.range=[Me[Me.length-(wt||1)].range[0],Me[Me.length-1].range[1]]),tt=this.performAction.apply(rt,[ut,xt,U,mt.yy,Fe[1],Ce,Me].concat(_r)),typeof tt<"u")return tt;wt&&(Te=Te.slice(0,-1*wt*2),Ce=Ce.slice(0,-1*wt),Me=Me.slice(0,-1*wt)),Te.push(this.productions_[Fe[1]][0]),Ce.push(rt.$),Me.push(rt._$),Pn=C[Te[Te.length-2]][Te[Te.length-1]],Te.push(Pn);break;case 3:return!0}}return!0}},pr=Wildcard$2.Wildcard,mr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",wn=mr+"type",Ln=mr+"first",Dn=mr+"rest",Tn=mr+"nil",yr="http://www.w3.org/2001/XMLSchema#",En=yr+"integer",On=yr+"decimal",Sn=yr+"double",Bn=yr+"boolean",Ct="",An="",jn="";function ot(be){return be.toLowerCase()}function St(be,me){return be.push(me),be}function Ht(be,me){return be.push.apply(be,me),be}function ze(be){be||(be={});for(var me=1,we=arguments.length,Te;me<we&&(Te=arguments[me]||{});me++)for(var Ce in Te)be[Ce]=Te[Ce];return be}function ht(){for(var be=[],me=0,we=arguments.length;me<we;me++)be=be.concat.apply(be,arguments[me]);return be}function nr(be){if(be[0]==="<"&&(be=be.substring(1,be.length-1)),/^[a-z]+:/i.test(be))return be;if(!ke.base)throw new Error("Cannot resolve relative IRI "+be+" because no base IRI was set.");switch(Ct!==ke.base&&(Ct=ke.base,An=Ct.replace(/[^\/:]*$/,""),jn=Ct.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),be[0]){case void 0:return Ct;case"#":return Ct+be;case"?":return Ct.replace(/(?:\?.*)?$/,be);case"/":return jn+be;default:return An+be}}function it(be){if(be){var me=be[0];if(me==="?"||me==="$")return ke.factory.variable(be.substr(1))}return be}function st(be,me){return{type:"operation",operator:be,args:me||[]}}function At(be,me){var we={expression:be==="*"?new pr:be};if(me)for(var Te in me)we[Te]=me[Te];return we}function Mt(be,me){return{type:"path",pathType:be,items:me}}function Rr(be,me){for(var we=0,Te=me.length,Ce;we<Te&&(Ce=me[we]);we++)be=st(Ce[0],[be,Ce[1]]);return be}function jt(be,me){var we=[],Te=[],Ce=be.length,Me,C={};if(!Ce)return null;for(var ut=0;ut<Ce&&(Me=be[ut]);ut++)(Me.named?Te:we).push(Me.iri);return C[me||"from"]={default:we,named:Te},C}function Xt(be){return parseInt(be,10)}function Pr(be){return be.type==="group"&&be.patterns.length===1?be.patterns[0]:be}function pt(be,me){return me&&me.termType!=="NamedNode"&&(me=ke.factory.namedNode(me)),ke.factory.literal(be,me)}function Cn(be,me){return ke.factory.literal(be,me)}function Ft(be,me,we){var Te={};return be!=null&&(Te.subject=be),me!=null&&(Te.predicate=me),we!=null&&(Te.object=we),Te}function ir(be){return typeof be=="string"?be.startsWith("e_")?ke.factory.blankNode(be):ke.factory.blankNode("e_"+be):ke.factory.blankNode("g_"+xn++)}var xn=0;ke._resetBlanks=function(){xn=0};var Mn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Fn={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},kn=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,Lr=String.fromCharCode;function In(be,me){be=be.substring(me,be.length-me);try{be=be.replace(Mn,function(we,Te,Ce,Me){var C;if(Te){if(C=parseInt(Te,16),isNaN(C))throw new Error;return Lr(C)}else if(Ce){if(C=parseInt(Ce,16),isNaN(C))throw new Error;return C<65535?Lr(C):Lr(55296+((C-=65536)>>10),56320+(C&1023))}else{var ut=Fn[Me];if(!ut)throw new Error;return ut}})}catch{return""}if(kn.exec(be))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+be);return be}function Un(be){var me=ir(),we=me,Te=[],Ce,Me=[];be.forEach(function(xt){Te.push(xt.entity),Ht(Me,xt.triples)});for(var C=0,ut=0,U=Te.length,Ce=Array(U*2);C<U;)Ce[ut++]=Ft(we,ke.factory.namedNode(Ln),Te[C]),Ce[ut++]=Ft(we,ke.factory.namedNode(Dn),we=++C<U?ir():ke.factory.namedNode(Tn));return{entity:me,triples:Ht(Ce,Me)}}function Vn(be){var me=ir();return{entity:me,triples:be.map(function(we){return ze(Ft(me),we)})}}function Dr(be,me,we){var Te=[],Ce=[];return me.forEach(function(Me){Te.push(Ft(null,be,Me.entity)),Ht(Ce,Me.triples)}),ht(Te,we||[],Ce)}function zt(be){return be.variable?be.variable.value:be.value||be.expression.value}function Br(be){if(!be)return[];if(be.type==="aggregate")return[be];if(be.type==="operation"){const me=[];for(const we of be.args)me.push(...Br(we));return me}return[]}function Qn(be){const me=new Set,we=function(Te){Te&&(Te.termType==="Variable"?me.add(Te):Te.type==="operation"&&Te.args.forEach(we))};return we(be),me}function Cr(be,me=1,we=[]){for(const Te of be)me>0&&Te instanceof Array?Cr(Te,me-1,we):we.push(Te);return we}function Mr(be){return be.termType==="Variable"}function Nn(be){if(be.triples){const me=[];for(const we of be.triples)Mr(we.subject)&&me.push(we.subject.value),Mr(we.predicate)&&me.push(we.predicate.value),Mr(we.object)&&me.push(we.object.value);return me}else if(be.patterns){const me=[];for(const we of be.patterns)me.push(...Nn(we));return me}return[]}function $n(be){const me=be.slice().sort(),we=[];for(let Te=0;Te<me.length-1;Te++)me[Te+1]==me[Te]&&we.push(me[Te]);return we}function sr(be){if(!ke.sparqlStar)throw new Error("SPARQL* support is not enabled");return be}function Rn(be){for(const me of be){if(me.type==="graph"&&me.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(me.type==="bgp"||me.type==="graph"){for(const we of me.triples)if(we.subject.termType==="Variable"||we.predicate.termType==="Variable"||we.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return be}function Fr(be){for(const me of be)if(me.type==="bgp"){for(const we of me.triples)if(we.subject.termType==="BlankNode"||we.predicate.termType==="BlankNode"||we.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return be}var Gn=function(){var be={EOF:1,parseError:function(we,Te){if(this.yy.parser)this.yy.parser.parseError(we,Te);else throw new Error(we)},setInput:function(me,we){return this.yy=we||this.yy||{},this._input=me,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var me=this._input[0];this.yytext+=me,this.yyleng++,this.offset++,this.match+=me,this.matched+=me;var we=me.match(/(?:\r\n?|\n).*/g);return we?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),me},unput:function(me){var we=me.length,Te=me.split(/(?:\r\n?|\n)/g);this._input=me+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-we),this.offset-=we;var Ce=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Te.length-1&&(this.yylineno-=Te.length-1);var Me=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Te?(Te.length===Ce.length?this.yylloc.first_column:0)+Ce[Ce.length-Te.length].length-Te[0].length:this.yylloc.first_column-we},this.options.ranges&&(this.yylloc.range=[Me[0],Me[0]+this.yyleng-we]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(me){this.unput(this.match.slice(me))},pastInput:function(){var me=this.matched.substr(0,this.matched.length-this.match.length);return(me.length>20?"...":"")+me.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var me=this.match;return me.length<20&&(me+=this._input.substr(0,20-me.length)),(me.substr(0,20)+(me.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var me=this.pastInput(),we=new Array(me.length+1).join("-");return me+this.upcomingInput()+`
`+we+"^"},test_match:function(me,we){var Te,Ce,Me;if(this.options.backtrack_lexer&&(Me={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Me.yylloc.range=this.yylloc.range.slice(0))),Ce=me[0].match(/(?:\r\n?|\n).*/g),Ce&&(this.yylineno+=Ce.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Ce?Ce[Ce.length-1].length-Ce[Ce.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+me[0].length},this.yytext+=me[0],this.match+=me[0],this.matches=me,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(me[0].length),this.matched+=me[0],Te=this.performAction.call(this,this.yy,this,we,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Te)return Te;if(this._backtrack){for(var C in Me)this[C]=Me[C];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var me,we,Te,Ce;this._more||(this.yytext="",this.match="");for(var Me=this._currentRules(),C=0;C<Me.length;C++)if(Te=this._input.match(this.rules[Me[C]]),Te&&(!we||Te[0].length>we[0].length)){if(we=Te,Ce=C,this.options.backtrack_lexer){if(me=this.test_match(Te,Me[C]),me!==!1)return me;if(this._backtrack){we=!1;continue}else return!1}else if(!this.options.flex)break}return we?(me=this.test_match(we,Me[Ce]),me!==!1?me:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var we=this.next();return we||this.lex()},begin:function(we){this.conditionStack.push(we)},popState:function(){var we=this.conditionStack.length-1;return we>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(we){return we=this.conditionStack.length-1-Math.abs(we||0),we>=0?this.conditionStack[we]:"INITIAL"},pushState:function(we){this.begin(we)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(we,Te,Ce,Me){switch(Ce){case 0:break;case 1:return 12;case 2:return 15;case 3:return 28;case 4:return 316;case 5:return 317;case 6:return 35;case 7:return 37;case 8:return 38;case 9:return 26;case 10:return 41;case 11:return 45;case 12:return 46;case 13:return 48;case 14:return 50;case 15:return 55;case 16:return 58;case 17:return 320;case 18:return 68;case 19:return 69;case 20:return 75;case 21:return 78;case 22:return 81;case 23:return 83;case 24:return 86;case 25:return 88;case 26:return 90;case 27:return 191;case 28:return 107;case 29:return 321;case 30:return 140;case 31:return 322;case 32:return 323;case 33:return 117;case 34:return 324;case 35:return 116;case 36:return 325;case 37:return 326;case 38:return 120;case 39:return 122;case 40:return 123;case 41:return 138;case 42:return 132;case 43:return 133;case 44:return 135;case 45:return 141;case 46:return 119;case 47:return 327;case 48:return 328;case 49:return 167;case 50:return 170;case 51:return 174;case 52:return 100;case 53:return 168;case 54:return 329;case 55:return 173;case 56:return 231;case 57:return 235;case 58:return 278;case 59:return 195;case 60:return 330;case 61:return 331;case 62:return 224;case 63:return 333;case 64:return 271;case 65:return 219;case 66:return 226;case 67:return 227;case 68:return 250;case 69:return 254;case 70:return 295;case 71:return 334;case 72:return 335;case 73:return 336;case 74:return 337;case 75:return 338;case 76:return 258;case 77:return 339;case 78:return 273;case 79:return 281;case 80:return 282;case 81:return 275;case 82:return 276;case 83:return 277;case 84:return 340;case 85:return 341;case 86:return 279;case 87:return 343;case 88:return 342;case 89:return 344;case 90:return 284;case 91:return 285;case 92:return 288;case 93:return 290;case 94:return 294;case 95:return 298;case 96:return 301;case 97:return 13;case 98:return 16;case 99:return 312;case 100:return 245;case 101:return 34;case 102:return 297;case 103:return 87;case 104:return 299;case 105:return 300;case 106:return 306;case 107:return 307;case 108:return 308;case 109:return 309;case 110:return 310;case 111:return 311;case 112:return"EXPONENT";case 113:return 302;case 114:return 303;case 115:return 304;case 116:return 305;case 117:return 93;case 118:return 246;case 119:return 6;case 120:return"INVALID";case 121:console.log(Te.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121],inclusive:!0}}};return be}();Nr.lexer=Gn;function ke(){this.yy={}}return ke.prototype=Nr,Nr.Parser=ke,new ke}(),SparqlParser_1=SparqlParser,XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",XSD_STRING="http://www.w3.org/2001/XMLSchema#string";function Generator$1(n){this._options=n=n||{};var e=n.prefixes||{};this._prefixByIri={};var t=[];for(var o in e){var l=e[o];isString$1(l)&&(this._prefixByIri[l]=o,t.push(l))}var d=t.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+d+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=n.sparqlStar,this._indent=isString$1(n.indent)?n.indent:"  ",this._newline=isString$1(n.newline)?n.newline:`
`,this._explicitDatatype=!!n.explicitDatatype}Generator$1.prototype.toQuery=function(n){var e="";return n.queryType&&(e+=n.queryType.toUpperCase()+" "),n.reduced&&(e+="REDUCED "),n.distinct&&(e+="DISTINCT "),n.variables?e+=mapJoin(n.variables,void 0,function(t){return isTerm$1(t)?this.toEntity(t):"("+this.toExpression(t.expression)+" AS "+variableToString(t.variable)+")"},this)+" ":n.template&&(e+=this.group(n.template,!0)+this._newline),n.from&&(e+=this.graphs("FROM ",n.from.default)+this.graphs("FROM NAMED ",n.from.named)),n.where&&(e+="WHERE "+this.group(n.where,!0)+this._newline),n.updates&&(e+=mapJoin(n.updates,";"+this._newline,this.toUpdate,this)),n.group&&(e+="GROUP BY "+mapJoin(n.group,void 0,function(t){var o=isTerm$1(t.expression)?this.toEntity(t.expression):"("+this.toExpression(t.expression)+")";return t.variable?"("+o+" AS "+variableToString(t.variable)+")":o},this)+this._newline),n.having&&(e+="HAVING ("+mapJoin(n.having,void 0,this.toExpression,this)+")"+this._newline),n.order&&(e+="ORDER BY "+mapJoin(n.order,void 0,function(t){var o="("+this.toExpression(t.expression)+")";return t.descending?"DESC "+o:o},this)+this._newline),n.offset&&(e+="OFFSET "+n.offset+this._newline),n.limit&&(e+="LIMIT "+n.limit+this._newline),n.values&&(e+=this.values(n)),e=this.baseAndPrefixes(n)+e,e.trim()};Generator$1.prototype.baseAndPrefixes=function(n){var e=n.base?"BASE <"+n.base+">"+this._newline:"",t="";for(var o in n.prefixes)(this._options.allPrefixes||this._usedPrefixes[o])&&(t+="PREFIX "+o+": <"+n.prefixes[o]+">"+this._newline);return e+t};Generator$1.prototype.toPattern=function(n){var e=n.type||n instanceof Array&&"array"||(n.subject&&n.predicate&&n.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](n)};Generator$1.prototype.triple=function(n){return this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+"."};Generator$1.prototype.array=function(n){return mapJoin(n,this._newline,this.toPattern,this)};Generator$1.prototype.bgp=function(n){return this.encodeTriples(n.triples)};Generator$1.prototype.encodeTriples=function(n){if(!n.length)return"";for(var e=[],t=void 0,o=void 0,l=0;l<n.length;l++){var d=n[l];equalTerms(d.subject,t)?equalTerms(d.predicate,o)?e.push(","):(o=d.predicate,e.push(";"+this._newline,this._indent,this.toEntity(o))):(t&&e.push("."+this._newline),t=d.subject,o=d.predicate,e.push(this.toEntity(t)," ",this.toEntity(o))),e.push(" ",this.toEntity(d.object))}return e.push("."),e.join("")};Generator$1.prototype.graph=function(n){return"GRAPH "+this.toEntity(n.name)+" "+this.group(n)};Generator$1.prototype.graphs=function(n,e){return!e||e.length===0?"":mapJoin(e,"",function(t){return n+this.toEntity(t)+this._newline},this)};Generator$1.prototype.group=function(n,e){return n=e!==!0?this.array(n.patterns||n.triples):this.toPattern(n.type!=="group"?n:n.patterns),n.indexOf(this._newline)===-1?"{ "+n+" }":"{"+this._newline+this.indent(n)+this._newline+"}"};Generator$1.prototype.query=function(n){return this.toQuery(n)};Generator$1.prototype.filter=function(n){return"FILTER("+this.toExpression(n.expression)+")"};Generator$1.prototype.bind=function(n){return"BIND("+this.toExpression(n.expression)+" AS "+variableToString(n.variable)+")"};Generator$1.prototype.optional=function(n){return"OPTIONAL "+this.group(n)};Generator$1.prototype.union=function(n){return mapJoin(n.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Generator$1.prototype.minus=function(n){return"MINUS "+this.group(n)};Generator$1.prototype.values=function(n){var e=Object.keys(n.values.reduce(function(l,d){for(var u in d)l[u]=!0;return l},{})),t,o;return e.length===1?t=o="":(t="(",o=")"),"VALUES "+t+e.join(" ")+o+" {"+this._newline+mapJoin(n.values,this._newline,function(l){return"  "+t+mapJoin(e,void 0,function(d){return l[d]?this.toEntity(l[d]):"UNDEF"},this)+o},this)+this._newline+"}"};Generator$1.prototype.service=function(n){return"SERVICE "+(n.silent?"SILENT ":"")+this.toEntity(n.name)+" "+this.group(n)};Generator$1.prototype.toExpression=function(n){if(isTerm$1(n))return this.toEntity(n);switch(n.type.toLowerCase()){case"aggregate":return n.aggregation.toUpperCase()+"("+(n.distinct?"DISTINCT ":"")+this.toExpression(n.expression)+(typeof n.separator=="string"?'; SEPARATOR = "'+n.separator.replace(escape,escapeReplacer)+'"':"")+")";case"functioncall":return this.toEntity(n.function)+"("+mapJoin(n.args,", ",this.toExpression,this)+")";case"operation":var e=n.operator.toUpperCase(),t=n.args||[];switch(n.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(isTerm$1(t[0])?this.toEntity(t[0]):"("+this.toExpression(t[0])+")")+" "+e+" "+(isTerm$1(t[1])?this.toEntity(t[1]):"("+this.toExpression(t[1])+")");case"!":return"!("+this.toExpression(t[0])+")";case"uplus":return"+("+this.toExpression(t[0])+")";case"uminus":return"-("+this.toExpression(t[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(t[0])+" "+e+"("+(isString$1(t[1])?t[1]:mapJoin(t[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(t[0],!0);default:return e+"("+mapJoin(t,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+n.type)}};Generator$1.prototype.toEntity=function(n){if(isTerm$1(n))switch(n.termType){case"Wildcard":return"*";case"Variable":return variableToString(n);case"BlankNode":return"_:"+n.value;case"Literal":var e=n.value||"",t=n.language||"",o=n.datatype;if(n='"'+e.replace(escape,escapeReplacer)+'"',t)n+="@"+t;else if(o){if(!this._explicitDatatype)switch(o.value){case XSD_STRING:return n;case XSD_INTEGER:if(/^\d+$/.test(e))return e+" "}n+="^^"+this.encodeIRI(o.value)}return n;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return n.graph&&n.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(n.graph)+" { "+this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+" }  >>":"<< "+this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+" >>";default:return this.encodeIRI(n.value)}else{var l=n.items.map(this.toEntity,this),d=n.pathType;switch(d){case"^":case"!":return d+l[0];case"*":case"+":case"?":return"("+l[0]+d+")";default:return"("+l.join(d)+")"}}};var escape=/["\\\t\n\r\b\f]/g,escapeReplacer=function(n){return escapeReplacements[n]},escapeReplacements={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Generator$1.prototype.encodeIRI=function(n){var e=this._prefixRegex.exec(n);if(e){var t=this._prefixByIri[e[1]];return this._usedPrefixes[t]=!0,t+":"+e[2]}return"<"+n+">"};Generator$1.prototype.toUpdate=function(n){switch(n.type||n.updateType){case"load":return"LOAD"+(n.source?" "+this.toEntity(n.source):"")+(n.destination?" INTO GRAPH "+this.toEntity(n.destination):"");case"insert":return"INSERT DATA "+this.group(n.insert,!0);case"delete":return"DELETE DATA "+this.group(n.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(n.delete,!0);case"insertdelete":return(n.graph?"WITH "+this.toEntity(n.graph)+this._newline:"")+(n.delete.length?"DELETE "+this.group(n.delete,!0)+this._newline:"")+(n.insert.length?"INSERT "+this.group(n.insert,!0)+this._newline:"")+(n.using?this.graphs("USING ",n.using.default):"")+(n.using?this.graphs("USING NAMED ",n.using.named):"")+"WHERE "+this.group(n.where,!0);case"add":case"copy":case"move":return n.type.toUpperCase()+" "+(n.silent?"SILENT ":"")+(n.source.default?"DEFAULT":this.toEntity(n.source.name))+" TO "+this.toEntity(n.destination.name);case"create":case"clear":case"drop":return n.type.toUpperCase()+(n.silent?" SILENT ":" ")+(n.graph.default?"DEFAULT":n.graph.named?"NAMED":n.graph.all?"ALL":"GRAPH "+this.toEntity(n.graph.name));default:throw new Error("Unknown update query type: "+n.type)}};Generator$1.prototype.indent=function(n){return n.replace(/^/gm,this._indent)};function variableToString(n){return"?"+n.value}function isString$1(n){return typeof n=="string"}function isTerm$1(n){return typeof n.termType=="string"}function equalTerms(n,e){if(!n||!isTerm$1(n)||!e||!isTerm$1(e)||n.termType!==e.termType)return!1;switch(n.termType){case"Literal":return n.value===e.value&&n.language===e.language&&equalTerms(n.datatype,e.datatype);case"Quad":return equalTerms(n.subject,e.subject)&&equalTerms(n.predicate,e.predicate)&&equalTerms(n.object,e.object)&&equalTerms(n.graph,e.graph);default:return n.value===e.value}}function mapJoin(n,e,t,o){return n.map(t,o).join(isString$1(e)?e:" ")}var SparqlGenerator=function(e={}){return{stringify:function(t){var o=Object.create(e);return o.prefixes=t.prefixes,new Generator$1(o).toQuery(t)},createGenerator:function(){return new Generator$1(e)}}},Parser$1=SparqlParser_1.Parser,Generator=SparqlGenerator,Wildcard=Wildcard$2.Wildcard,{DataFactory}=rdfDataFactory,sparql$1={Parser:function({prefixes:n,baseIRI:e,factory:t,sparqlStar:o,skipValidation:l,skipUngroupedVariableCheck:d,pathOnly:u}={}){var a={};for(var c in n||{})a[c]=n[c];var h=new Parser$1;return h.parse=function(){return Parser$1.base=e||"",Parser$1.prefixes=Object.create(a),Parser$1.factory=t||new DataFactory,Parser$1.sparqlStar=!!o,Parser$1.pathOnly=!!u,Parser$1.skipValidation=!!l||!!d,Parser$1.prototype.parse.apply(h,arguments)},h._resetBlanks=Parser$1._resetBlanks,h},Generator,Wildcard},__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__=_mergeNamespaces({__proto__:null,default:sparql$1},[sparql$1]),__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,o){o===void 0&&(o=t);var l=Object.getOwnPropertyDescriptor(e,t);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,o,l)}:function(n,e,t,o){o===void 0&&(o=t),n[o]=e[t]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding$2(e,n,t);return __setModuleDefault$2(e,n),e};Object.defineProperty(factory$2,"__esModule",{value:!0});const A=__importStar$2(algebra),rdf_data_factory_1$1=rdfDataFactory,rdf_string_1$4=rdfString,sparqljs_1$1=sparql$1;class Factory{constructor(e){this.dataFactory=e||new rdf_data_factory_1$1.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(e,t=!0){return this.flattenMulti({type:A.types.ALT,input:e},t)}createAsk(e){return{type:A.types.ASK,input:e}}createBoundAggregate(e,t,o,l,d){const u=this.createAggregateExpression(t,o,l,d);return u.variable=e,u}createBgp(e){return{type:A.types.BGP,patterns:e}}createConstruct(e,t){return{type:A.types.CONSTRUCT,input:e,template:t}}createDescribe(e,t){return{type:A.types.DESCRIBE,input:e,terms:t}}createDistinct(e){return{type:A.types.DISTINCT,input:e}}createExtend(e,t,o){return{type:A.types.EXTEND,input:e,variable:t,expression:o}}createFrom(e,t,o){return{type:A.types.FROM,input:e,default:t,named:o}}createFilter(e,t){return{type:A.types.FILTER,input:e,expression:t}}createGraph(e,t){return{type:A.types.GRAPH,input:e,name:t}}createGroup(e,t,o){return{type:A.types.GROUP,input:e,variables:t,aggregates:o}}createInv(e){return{type:A.types.INV,path:e}}createJoin(e,t=!0){return this.flattenMulti({type:A.types.JOIN,input:e},t)}createLeftJoin(e,t,o){return o?{type:A.types.LEFT_JOIN,input:[e,t],expression:o}:{type:A.types.LEFT_JOIN,input:[e,t]}}createLink(e){return{type:A.types.LINK,iri:e}}createMinus(e,t){return{type:A.types.MINUS,input:[e,t]}}createNop(){return{type:A.types.NOP}}createNps(e){return{type:A.types.NPS,iris:e}}createOneOrMorePath(e){return{type:A.types.ONE_OR_MORE_PATH,path:e}}createOrderBy(e,t){return{type:A.types.ORDER_BY,input:e,expressions:t}}createPath(e,t,o,l){return l?{type:A.types.PATH,subject:e,predicate:t,object:o,graph:l}:{type:A.types.PATH,subject:e,predicate:t,object:o,graph:this.dataFactory.defaultGraph()}}createPattern(e,t,o,l){const d=this.dataFactory.quad(e,t,o,l);return d.type=A.types.PATTERN,d}createProject(e,t){return{type:A.types.PROJECT,input:e,variables:t}}createReduced(e){return{type:A.types.REDUCED,input:e}}createSeq(e,t=!0){return this.flattenMulti({type:A.types.SEQ,input:e},t)}createService(e,t,o){return{type:A.types.SERVICE,input:e,name:t,silent:!!o}}createSlice(e,t,o){return t=t||0,o!==void 0?{type:A.types.SLICE,input:e,start:t,length:o}:{type:A.types.SLICE,input:e,start:t}}createUnion(e,t=!0){return this.flattenMulti({type:A.types.UNION,input:e},t)}createValues(e,t){return{type:A.types.VALUES,variables:e,bindings:t}}createZeroOrMorePath(e){return{type:A.types.ZERO_OR_MORE_PATH,path:e}}createZeroOrOnePath(e){return{type:A.types.ZERO_OR_ONE_PATH,path:e}}createAggregateExpression(e,t,o,l){return l?{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:t,separator:l,distinct:o}:{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:t,distinct:o}}createExistenceExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.EXISTENCE,not:e,input:t}}createNamedExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.NAMED,name:e,args:t}}createOperatorExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.OPERATOR,operator:e,args:t}}createTermExpression(e){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.TERM,term:e}}createWildcardExpression(){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.WILDCARD,wildcard:new sparqljs_1$1.Wildcard}}createTerm(e){return(0,rdf_string_1$4.stringToTerm)(e,this.dataFactory)}createCompositeUpdate(e){return{type:A.types.COMPOSITE_UPDATE,updates:e}}createDeleteInsert(e,t,o){const l={type:A.types.DELETE_INSERT};return e&&(l.delete=e),t&&(l.insert=t),o&&(l.where=o),l}createLoad(e,t,o){const l={type:A.types.LOAD,source:e};return t&&(l.destination=t),this.addSilent(l,!!o)}createClear(e,t){return this.addSilent({type:A.types.CLEAR,source:e},!!t)}createCreate(e,t){return this.addSilent({type:A.types.CREATE,source:e},!!t)}createDrop(e,t){return this.addSilent({type:A.types.DROP,source:e},!!t)}createAdd(e,t,o){return this.addSilent({type:A.types.ADD,source:e,destination:t},!!o)}createMove(e,t,o){return this.addSilent({type:A.types.MOVE,source:e,destination:t},!!o)}createCopy(e,t,o){return this.addSilent({type:A.types.COPY,source:e,destination:t},!!o)}addSilent(e,t){return t&&(e.silent=t),e}flattenMulti(e,t){if(!t)return e;const o=e.type,l=e.input;let d=[];for(const u of l)u.type===o?d.push(...u.input):d.push(u);return e.input=d,e}}factory$2.default=Factory;var util={},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(util,"__esModule",{value:!0});const algebra_1=algebra,factory_1$2=__importDefault$2(factory$2);class Util{static flatten(e){return Array.prototype.concat(...e).filter(t=>t)}static objectify(e){if(e.termType){if(e.termType==="Quad")return{type:"pattern",termType:"Quad",subject:Util.objectify(e.subject),predicate:Util.objectify(e.predicate),object:Util.objectify(e.object),graph:Util.objectify(e.graph)};{let t={termType:e.termType,value:e.value};return e.language&&(t.language=e.language),e.datatype&&(t.datatype=Util.objectify(e.datatype)),t}}if(Array.isArray(e))return e.map(t=>Util.objectify(t));if(e===Object(e)){let t={};for(let o of Object.keys(e))t[o]=Util.objectify(e[o]);return t}return e}static inScopeVariables(e){const t=[];function o(d){t.find(u=>d.value===u.value)||t.push(d)}function l(d){d.subject.termType==="Variable"&&o(d.subject),d.predicate.termType==="Variable"&&o(d.predicate),d.object.termType==="Variable"&&o(d.object),d.graph.termType==="Variable"&&o(d.graph),d.subject.termType==="Quad"&&l(d.subject),d.predicate.termType==="Quad"&&l(d.predicate),d.object.termType==="Quad"&&l(d.object),d.graph.termType==="Quad"&&l(d.graph)}return Util.recurseOperation(e,{[algebra_1.types.EXPRESSION]:d=>(d.expressionType===algebra_1.expressionTypes.AGGREGATE&&d.variable&&o(d.variable),!0),[algebra_1.types.EXTEND]:d=>(o(d.variable),!0),[algebra_1.types.GRAPH]:d=>(d.name.termType==="Variable"&&o(d.name),!0),[algebra_1.types.GROUP]:d=>(d.variables.forEach(o),!0),[algebra_1.types.PATH]:d=>(d.subject.termType==="Variable"&&o(d.subject),d.object.termType==="Variable"&&o(d.object),d.graph.termType==="Variable"&&o(d.graph),d.subject.termType==="Quad"&&l(d.subject),d.object.termType==="Quad"&&l(d.object),d.graph.termType==="Quad"&&l(d.graph),!0),[algebra_1.types.PATTERN]:d=>(l(d),!0),[algebra_1.types.PROJECT]:d=>(d.variables.forEach(o),!1),[algebra_1.types.SERVICE]:d=>(d.name.termType==="Variable"&&o(d.name),!0),[algebra_1.types.VALUES]:d=>(d.variables.forEach(o),!0)}),t}static recurseOperation(e,t){let o=e,l=!0;const d=t[e.type];if(d&&(l=d(e)),!l)return;let u=a=>Util.recurseOperation(a,t);switch(o.type){case algebra_1.types.ALT:o.input.map(u);break;case algebra_1.types.ASK:u(o.input);break;case algebra_1.types.BGP:o.patterns.forEach(u);break;case algebra_1.types.CONSTRUCT:u(o.input),o.template.map(u);break;case algebra_1.types.DESCRIBE:u(o.input);break;case algebra_1.types.DISTINCT:u(o.input);break;case algebra_1.types.EXPRESSION:o.expressionType===algebra_1.expressionTypes.EXISTENCE&&u(o.input);break;case algebra_1.types.EXTEND:u(o.input),u(o.expression);break;case algebra_1.types.FILTER:u(o.input),u(o.expression);break;case algebra_1.types.FROM:u(o.input);break;case algebra_1.types.GRAPH:u(o.input);break;case algebra_1.types.GROUP:u(o.input),o.aggregates.forEach(u);break;case algebra_1.types.INV:u(o.path);break;case algebra_1.types.JOIN:o.input.map(u);break;case algebra_1.types.LEFT_JOIN:o.input.map(u),o.expression&&u(o.expression);break;case algebra_1.types.LINK:break;case algebra_1.types.MINUS:o.input.map(u);break;case algebra_1.types.NOP:break;case algebra_1.types.NPS:break;case algebra_1.types.ONE_OR_MORE_PATH:u(o.path);break;case algebra_1.types.ORDER_BY:u(o.input),o.expressions.forEach(u);break;case algebra_1.types.PATH:u(o.predicate);break;case algebra_1.types.PATTERN:break;case algebra_1.types.PROJECT:u(o.input);break;case algebra_1.types.REDUCED:u(o.input);break;case algebra_1.types.SEQ:o.input.map(u);break;case algebra_1.types.SERVICE:u(o.input);break;case algebra_1.types.SLICE:u(o.input);break;case algebra_1.types.UNION:o.input.map(u);break;case algebra_1.types.VALUES:break;case algebra_1.types.ZERO_OR_MORE_PATH:u(o.path);break;case algebra_1.types.ZERO_OR_ONE_PATH:u(o.path);break;case algebra_1.types.COMPOSITE_UPDATE:o.updates.forEach(a=>u(a));break;case algebra_1.types.DELETE_INSERT:o.delete&&o.delete.forEach(a=>u(a)),o.insert&&o.insert.forEach(a=>u(a)),o.where&&u(o.where);break;case algebra_1.types.LOAD:break;case algebra_1.types.CLEAR:break;case algebra_1.types.CREATE:break;case algebra_1.types.DROP:break;case algebra_1.types.ADD:break;case algebra_1.types.MOVE:break;case algebra_1.types.COPY:break;default:throw new Error(`Unknown Operation type ${o.type}`)}}static mapOperation(e,t,o){let l=e,d=!0;o=o||new factory_1$2.default;const u=t[e.type];if(u&&({result:l,recurse:d}=u(e,o)),!d)return l;let a=c=>Util.mapOperation(c,t,o);switch(l.type){case algebra_1.types.ALT:return o.createAlt(l.input.map(a));case algebra_1.types.ASK:return o.createAsk(a(l.input));case algebra_1.types.BGP:return o.createBgp(l.patterns.map(a));case algebra_1.types.CONSTRUCT:return o.createConstruct(a(l.input),l.template.map(a));case algebra_1.types.DESCRIBE:return o.createDescribe(a(l.input),l.terms);case algebra_1.types.DISTINCT:return o.createDistinct(a(l.input));case algebra_1.types.EXPRESSION:return Util.mapExpression(l,t,o);case algebra_1.types.EXTEND:return o.createExtend(a(l.input),l.variable,a(l.expression));case algebra_1.types.FILTER:return o.createFilter(a(l.input),a(l.expression));case algebra_1.types.FROM:return o.createFrom(a(l.input),[...l.default],[...l.named]);case algebra_1.types.GRAPH:return o.createGraph(a(l.input),l.name);case algebra_1.types.GROUP:return o.createGroup(a(l.input),[].concat(l.variables),l.aggregates.map(a));case algebra_1.types.INV:return o.createInv(a(l.path));case algebra_1.types.JOIN:return o.createJoin(l.input.map(a));case algebra_1.types.LEFT_JOIN:return o.createLeftJoin(a(l.input[0]),a(l.input[1]),l.expression?a(l.expression):void 0);case algebra_1.types.LINK:return o.createLink(l.iri);case algebra_1.types.MINUS:return o.createMinus(a(l.input[0]),a(l.input[1]));case algebra_1.types.NOP:return o.createNop();case algebra_1.types.NPS:return o.createNps([].concat(l.iris));case algebra_1.types.ONE_OR_MORE_PATH:return o.createOneOrMorePath(a(l.path));case algebra_1.types.ORDER_BY:return o.createOrderBy(a(l.input),l.expressions.map(a));case algebra_1.types.PATH:return o.createPath(l.subject,a(l.predicate),l.object,l.graph);case algebra_1.types.PATTERN:return o.createPattern(l.subject,l.predicate,l.object,l.graph);case algebra_1.types.PROJECT:return o.createProject(a(l.input),[...l.variables]);case algebra_1.types.REDUCED:return o.createReduced(a(l.input));case algebra_1.types.SEQ:return o.createSeq(l.input.map(a));case algebra_1.types.SERVICE:return o.createService(a(l.input),l.name,l.silent);case algebra_1.types.SLICE:return o.createSlice(a(l.input),l.start,l.length);case algebra_1.types.UNION:return o.createUnion(l.input.map(a));case algebra_1.types.VALUES:return o.createValues([].concat(l.variables),l.bindings.map(c=>Object.assign({},c)));case algebra_1.types.ZERO_OR_MORE_PATH:return o.createZeroOrMorePath(a(l.path));case algebra_1.types.ZERO_OR_ONE_PATH:return o.createZeroOrOnePath(a(l.path));case algebra_1.types.COMPOSITE_UPDATE:return o.createCompositeUpdate(l.updates.map(a));case algebra_1.types.DELETE_INSERT:return o.createDeleteInsert(l.delete?l.delete.map(a):void 0,l.insert?l.insert.map(a):void 0,l.where?a(l.where):void 0);case algebra_1.types.LOAD:return o.createLoad(l.source,l.destination,l.silent);case algebra_1.types.CLEAR:return o.createClear(l.source,l.silent);case algebra_1.types.CREATE:return o.createCreate(l.source,l.silent);case algebra_1.types.DROP:return o.createDrop(l.source,l.silent);case algebra_1.types.ADD:return o.createAdd(l.source,l.destination);case algebra_1.types.MOVE:return o.createMove(l.source,l.destination);case algebra_1.types.COPY:return o.createCopy(l.source,l.destination);default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapExpression(e,t,o){let l=d=>Util.mapOperation(d,t,o);switch(e.expressionType){case algebra_1.expressionTypes.AGGREGATE:return e.variable?o.createBoundAggregate(e.variable,e.aggregator,l(e.expression),e.distinct,e.separator):o.createAggregateExpression(e.aggregator,l(e.expression),e.distinct,e.separator);case algebra_1.expressionTypes.EXISTENCE:return o.createExistenceExpression(e.not,l(e.input));case algebra_1.expressionTypes.NAMED:return o.createNamedExpression(e.name,e.args.map(l));case algebra_1.expressionTypes.OPERATOR:return o.createOperatorExpression(e.operator,e.args.map(l));case algebra_1.expressionTypes.TERM:return o.createTermExpression(e.term);case algebra_1.expressionTypes.WILDCARD:return o.createWildcardExpression();default:throw new Error(`Unknown Expression type ${e.expressionType}`)}}static createUniqueVariable(e,t,o){let l=0,d=e;for(;t[d];)d=`${e}${l++}`;return o.variable(d)}static isSimpleTerm(e){return e.termType!==void 0&&e.termType!=="Quad"&&e.termType!=="Wildcard"}static isQuad(e){return e.termType==="Quad"}static isWildcard(e){return e.termType==="Wildcard"}}util.default=Util;var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,o){o===void 0&&(o=t);var l=Object.getOwnPropertyDescriptor(e,t);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,o,l)}:function(n,e,t,o){o===void 0&&(o=t),n[o]=e[t]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding$1(e,n,t);return __setModuleDefault$1(e,n),e},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sparqlAlgebra,"__esModule",{value:!0});const equal=es6,rdf_string_1$3=rdfString,Algebra$1=__importStar$1(algebra),factory_1$1=__importDefault$1(factory$2),util_1$1=__importDefault$1(util),Parser=sparql$1.Parser,types$1=Algebra$1.types;let variables=new Set,varCount=0,useQuads=!1,factory$1;function translate(n,e){e=e||{},factory$1=new factory_1$1.default(e.dataFactory);let t;if(isString(n)){let o=new Parser(e);o._resetBlanks(),t=o.parse(n)}else t=n;return translateQuery(t,e.quads,e.blankToVariable)}sparqlAlgebra.default=translate;function translateQuery(n,e,t){if(variables=new Set,varCount=0,useQuads=!!e,!n.type)return factory$1.createNop();if(n.type!=="query"&&n.type!=="update")throw new Error("Translate only works on complete query or update objects.");let o;if(findAllVariables(n),n.type==="query"){const l={type:"group",patterns:n.where||[]};o=translateGroupGraphPattern(l),o=translateAggregates(n,o)}else n.type==="update"&&(o=translateUpdate(n));return t&&(o=translateBlankNodesToVariables(o)),o}function isString(n){return typeof n=="string"}function isTerm(n){return!!n?.termType}function isTriple(n){return n.subject&&n.predicate&&n.object}function isVariable(n){return n?.termType==="Variable"}function findAllVariables(n){if(isTerm(n))isVariable(n)&&variables.add(`?${n.value}`);else if(Array.isArray(n))for(const e of n)findAllVariables(e);else if(n&&typeof n=="object")for(let e of Object.keys(n))e.startsWith("?")&&variables.add(e),findAllVariables(n[e])}function inScopeVariables(n){let e={};if(isTriple(n)){const t=[inScopeVariables(n.subject),inScopeVariables(n.predicate),inScopeVariables(n.object),n.graph?inScopeVariables(n.graph):{}];Object.assign(e,...t)}else if(isTerm(n))isVariable(n)&&(e[n.value]=n);else if(n.type==="bgp"){const t=n.triples;Object.assign(e,...t.map(inScopeVariables))}else if(n.type==="path")Object.assign(e,...n.items.map(inScopeVariables));else if(n.type==="group"||n.type==="union"||n.type==="optional")Object.assign(e,...n.patterns.map(inScopeVariables));else if(n.type==="service"||n.type==="graph")Object.assign(e,inScopeVariables(n.name)),Object.assign(e,...n.patterns.map(inScopeVariables));else if(n.type==="bind")Object.assign(e,inScopeVariables(n.variable));else if(n.type==="values"){if(n.values.length>0){const t=Object.keys(n.values[0]).map(o=>factory$1.createTerm(o));Object.assign(e,...t.map(inScopeVariables))}}else if(n.type==="query"&&(n.queryType==="SELECT"||n.queryType==="DESCRIBE")){n.where&&n.variables.some(util_1$1.default.isWildcard)&&Object.assign(e,...n.where.map(inScopeVariables));for(const t of n.variables)isVariable(t)?Object.assign(e,inScopeVariables(t)):t.variable&&Object.assign(e,inScopeVariables(t.variable));if(n.queryType==="SELECT"){if(n.group)for(const t of n.group)t.variable&&Object.assign(e,inScopeVariables(t.variable));if(n.values){const t={type:"values",values:n.values};Object.assign(e,inScopeVariables(t))}}}return e}function translateGroupGraphPattern(n){let e=[],t=[];if("patterns"in n)for(let l of n.patterns)(l.type==="filter"?e:t).push(l);if(n.type==="bgp")return translateBgp$1(n);let o;if(n.type==="union")o=factory$1.createUnion(t.map(l=>(l.type!=="group"&&(l={type:"group",patterns:[l]}),translateGroupGraphPattern(l))));else{if(n.type==="graph")return translateGraph$1(n);if(n.type==="group")o=t.reduce(accumulateGroupGraphPattern,factory$1.createBgp([]));else if(n.type==="values")o=translateInlineData(n);else if(n.type==="query")o=translateQuery(n,useQuads,!1);else throw new Error(`Unexpected type: ${n.type}`)}if(e.length>0){let l=e.map(d=>translateExpression$1(d.expression));l.length>0&&(o=factory$1.createFilter(o,l.reduce((d,u)=>factory$1.createOperatorExpression("&&",[d,u]))))}return o}function translateExpression$1(n){if(util_1$1.default.isSimpleTerm(n)||util_1$1.default.isQuad(n))return factory$1.createTermExpression(n);if(util_1$1.default.isWildcard(n))return factory$1.createWildcardExpression();if("aggregation"in n)return factory$1.createAggregateExpression(n.aggregation,translateExpression$1(n.expression),!!n.distinct,n.separator);if("function"in n)return factory$1.createNamedExpression(n.function,n.args.map(translateExpression$1));if("operator"in n)return n.operator==="exists"||n.operator==="notexists"?factory$1.createExistenceExpression(n.operator==="notexists",translateGroupGraphPattern(n.args[0])):((n.operator==="in"||n.operator==="notin")&&(n.args=[n.args[0]].concat(n.args[1])),factory$1.createOperatorExpression(n.operator,n.args.map(translateExpression$1)));throw new Error(`Unknown expression: ${JSON.stringify(n)}`)}function translateBgp$1(n){let e=[],t=[];for(let o of n.triples)if("pathType"in o.predicate){let l=translatePath$1(o);for(let d of l)d.type===types$1.PATH?(e.length>0&&t.push(factory$1.createBgp(e)),e=[],t.push(d)):e.push(d)}else e.push(translateQuad(o));return e.length>0&&t.push(factory$1.createBgp(e)),t.length===1?t[0]:factory$1.createJoin(t)}function translatePath$1(n){let e=n.subject,t=translatePathPredicate(n.predicate),o=n.object;return simplifyPath(e,t,o)}function translatePathPredicate(n){if(util_1$1.default.isSimpleTerm(n)){if(n.termType==="NamedNode")return factory$1.createLink(n);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(n)}`)}if(n.pathType==="^")return factory$1.createInv(translatePathPredicate(n.items[0]));if(n.pathType==="!"){let e=[],t=[],o;"pathType"in n.items[0]&&n.items[0].pathType==="|"?o=n.items[0].items:o=n.items;for(let u of o)if(util_1$1.default.isSimpleTerm(u))e.push(u);else if(u.pathType==="^")t.push(u.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(u)}`);let l=factory$1.createNps(e),d=factory$1.createInv(factory$1.createNps(t));return t.length===0?l:e.length===0?d:factory$1.createAlt([l,d])}if(n.pathType==="/")return factory$1.createSeq(n.items.map(translatePathPredicate));if(n.pathType==="|")return factory$1.createAlt(n.items.map(translatePathPredicate));if(n.pathType==="*")return factory$1.createZeroOrMorePath(translatePathPredicate(n.items[0]));if(n.pathType==="+")return factory$1.createOneOrMorePath(translatePathPredicate(n.items[0]));if(n.pathType==="?")return factory$1.createZeroOrOnePath(translatePathPredicate(n.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(n)}`)}function simplifyPath(n,e,t){if(e.type===types$1.LINK)return[factory$1.createPattern(n,e.iri,t)];if(e.type===types$1.INV)return simplifyPath(t,e.path,n);if(e.type===types$1.SEQ){let o=n;return util_1$1.default.flatten(e.input.map((l,d)=>{const u=d===e.input.length-1?t:generateFreshVar(),a=simplifyPath(o,l,u);return u.termType==="Variable"&&(o=u),a}))}return[factory$1.createPath(n,e,t)]}function generateFreshVar(){let n=`?var${varCount++}`;return variables.has(n)?generateFreshVar():(variables.add(n),factory$1.createTerm(n))}function translateQuad(n){if("pathType"in n.predicate)throw new Error("Trying to translate property path to quad.");return factory$1.createPattern(n.subject,n.predicate,n.object,n.graph)}function translateGraph$1(n){const e={type:"group",patterns:n.patterns};let t=translateGroupGraphPattern(e);return useQuads?t=recurseGraph(t,n.name):t=factory$1.createGraph(t,n.name),t}let typeVals=Object.values(types$1);function recurseGraph(n,e,t){if(n.type===types$1.GRAPH){if(t)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");n=recurseGraph(n.input,n.name)}else if(n.type===types$1.BGP)n.patterns=n.patterns.map(o=>(t&&(o.subject.equals(e)&&(o.subject=t),o.predicate.equals(e)&&(o.predicate=t),o.object.equals(e)&&(o.object=t)),o.graph.termType==="DefaultGraph"&&(o.graph=e),o));else if(n.type===types$1.PATH)t&&(n.subject.equals(e)&&(n.subject=t),n.object.equals(e)&&(n.object=t)),n.graph.termType==="DefaultGraph"&&(n.graph=e);else if(n.type===types$1.PROJECT&&!t)n.variables.some(o=>o.equals(e))||(t=generateFreshVar()),n.input=recurseGraph(n.input,e,t);else if(n.type===types$1.EXTEND&&!t)n.variable.equals(e)&&(t=generateFreshVar()),n.input=recurseGraph(n.input,e,t);else for(let o of Object.keys(n))Array.isArray(n[o])?n[o]=n[o].map(l=>recurseGraph(l,e,t)):typeVals.indexOf(n[o].type)>=0?n[o]=recurseGraph(n[o],e,t):t&&isVariable(n[o])&&n[o].equals(e)&&(n[o]=t);return n}function accumulateGroupGraphPattern(n,e){if(e.type==="optional"){const t=translateGroupGraphPattern({type:"group",patterns:e.patterns});t.type===types$1.FILTER?n=factory$1.createLeftJoin(n,t.input,t.expression):n=factory$1.createLeftJoin(n,t)}else if(e.type==="minus"){const t=translateGroupGraphPattern({type:"group",patterns:e.patterns});n=factory$1.createMinus(n,t)}else if(e.type==="bind")n=factory$1.createExtend(n,e.variable,translateExpression$1(e.expression));else if(e.type==="service"){const t={type:"group",patterns:e.patterns},o=factory$1.createService(translateGroupGraphPattern(t),e.name,e.silent);n=simplifiedJoin(n,o)}else{const t=translateGroupGraphPattern(e);n=simplifiedJoin(n,t)}return n}function simplifiedJoin(n,e){return n.type===types$1.BGP&&e.type===types$1.BGP?n=factory$1.createBgp([...n.patterns,...e.patterns]):n.type===types$1.BGP&&n.patterns.length===0?n=e:e.type===types$1.BGP&&e.patterns.length===0||(n=factory$1.createJoin([n,e])),n}function translateInlineData(n){let e=(n.values.length===0?[]:Object.keys(n.values[0])).map(factory$1.createTerm.bind(factory$1)),t=n.values.map(o=>{let l=Object.keys(o);l=l.filter(u=>o[u]!==void 0);let d={};for(let u of l)d[u]=o[u];return d});return factory$1.createValues(e,t)}function translateAggregates(n,e){const t=n,o=[],l={};if(t.variables=t.variables&&t.variables.map(u=>mapAggregate(u,l)),t.having=t.having&&t.having.map(u=>mapAggregate(u,l)),t.order=t.order&&t.order.map(u=>mapAggregate(u,l)),t.group||Object.keys(l).length>0){const u=Object.keys(l).map(c=>translateBoundAggregate$1(l[c],factory$1.createTerm(c))),a=[];if(t.group)for(const c of t.group)if(util_1$1.default.isSimpleTerm(c.expression))a.push(c.expression);else{const h="variable"in c?c.variable:generateFreshVar();e=factory$1.createExtend(e,h,translateExpression$1(c.expression)),a.push(h)}e=factory$1.createGroup(e,a,u)}if(t.having)for(let u of t.having)e=factory$1.createFilter(e,translateExpression$1(u));n.values&&(e=factory$1.createJoin([e,translateInlineData(n)]));let d=[];if(n.queryType==="SELECT"||n.queryType==="DESCRIBE")if(n.variables.some(u=>u&&util_1$1.default.isWildcard(u)))d=Object.values(inScopeVariables(n)).sort((u,a)=>u.value.localeCompare(a.value));else for(let u of n.variables)isVariable(u)||!("variable"in u)?d.push(u):u.variable&&(d.push(u.variable),o.push(u));for(let u of o)e=factory$1.createExtend(e,u.variable,translateExpression$1(u.expression));return t.order&&(e=factory$1.createOrderBy(e,t.order.map(u=>{let a=translateExpression$1(u.expression);return u.descending&&(a=factory$1.createOperatorExpression("desc",[a])),a}))),n.queryType==="SELECT"&&(e=factory$1.createProject(e,d)),t.distinct&&(e=factory$1.createDistinct(e)),t.reduced&&(e=factory$1.createReduced(e)),n.queryType==="CONSTRUCT"?e=factory$1.createConstruct(e,(n.template||[]).map(translateQuad)):n.queryType==="ASK"?e=factory$1.createAsk(e):n.queryType==="DESCRIBE"&&(e=factory$1.createDescribe(e,d)),(t.offset||t.limit)&&(e=factory$1.createSlice(e,t.offset||0,t.limit)),t.from&&(e=factory$1.createFrom(e,t.from.default,t.from.named)),e}function mapAggregate(n,e){if("type"in n&&n.type==="aggregate"){let t=!1,o;for(let l of Object.keys(e))if(equal(e[l],n)){o=factory$1.createTerm(l),t=!0;break}return t||(o=generateFreshVar(),e[(0,rdf_string_1$3.termToString)(o)]=n),o}return"expression"in n&&n.expression?{...n,expression:mapAggregate(n.expression,e)}:"args"in n&&n.args?{...n,args:n.args.map(t=>mapAggregate(t,e))}:n}function translateBoundAggregate$1(n,e){if(n.type!=="aggregate"||!n.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(n)}`);const t=translateExpression$1(n);return t.variable=e,t}function translateUpdate(n){return n.updates.length===1?translateSingleUpdate(n.updates[0]):factory$1.createCompositeUpdate(n.updates.map(translateSingleUpdate))}function translateSingleUpdate(n){if("type"in n){if(n.type==="load")return translateUpdateGraphLoad(n);if(n.type==="clear"||n.type==="create"||n.type==="drop")return translateUpdateGraph(n);if(n.type==="add"||n.type==="copy"||n.type==="move")return translateUpdateGraphShortcut$1(n)}else if(n.updateType==="insertdelete"||n.updateType==="deletewhere"||n.updateType==="delete"||n.updateType==="insert")return translateInsertDelete(n);throw new Error(`Unknown update type ${JSON.stringify(n)}`)}function translateInsertDelete(n){if(!useQuads)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let e=[],t=[],o;if(n.delete&&(e=util_1$1.default.flatten(n.delete.map(l=>translateUpdateTriplesBlock(l,n.graph)))),n.insert&&(t=util_1$1.default.flatten(n.insert.map(l=>translateUpdateTriplesBlock(l,n.graph)))),n.where&&n.where.length>0){o=translateGroupGraphPattern({type:"group",patterns:n.where});const l=n.using;l?o=factory$1.createFrom(o,l.default,l.named):n.graph&&(o=recurseGraph(o,n.graph))}else n.updateType==="deletewhere"&&e.length>0&&(o=factory$1.createBgp(e));return factory$1.createDeleteInsert(e.length>0?e:void 0,t.length>0?t:void 0,o)}function translateUpdateTriplesBlock(n,e){let t=e;n.type==="graph"&&(t=n.name);let o=n.triples;return t&&(o=o.map(l=>Object.assign(l,{graph:t}))),o.map(translateQuad)}function translateUpdateGraph(n){let e;switch(util_1$1.default.isSimpleTerm(n.graph)?e=n.graph:n.graph.all?e="ALL":n.graph.default?e="DEFAULT":n.graph.named?e="NAMED":e=n.graph.name,n.type){case"clear":return factory$1.createClear(e,n.silent);case"create":return factory$1.createCreate(e,n.silent);case"drop":return factory$1.createDrop(e,n.silent)}}function translateUpdateGraphLoad(n){return factory$1.createLoad(n.source,n.destination,n.silent)}function translateUpdateGraphShortcut$1(n){const e=n.source.default?"DEFAULT":n.source.name,t=n.destination.default?"DEFAULT":n.destination.name;switch(n.type){case"copy":return factory$1.createCopy(e,t,n.silent);case"move":return factory$1.createMove(e,t,n.silent);case"add":return factory$1.createAdd(e,t,n.silent)}}function translateBlankNodesToVariables(n){const e={},t=Array.from(variables).reduce((l,d)=>(l[d]=!0,l),{});return util_1$1.default.mapOperation(n,{[Algebra$1.types.DELETE_INSERT]:l=>({result:l,recurse:!1}),[Algebra$1.types.PATH]:(l,d)=>({result:d.createPath(o(l.subject),l.predicate,o(l.object),o(l.graph)),recurse:!1}),[Algebra$1.types.PATTERN]:(l,d)=>({result:d.createPattern(o(l.subject),o(l.predicate),o(l.object),o(l.graph)),recurse:!1}),[Algebra$1.types.CONSTRUCT]:l=>({result:factory$1.createConstruct(translateBlankNodesToVariables(l.input),l.template),recurse:!1})});function o(l){if(l.termType==="BlankNode"){let d=e[l.value];return d||(d=util_1$1.default.createUniqueVariable(l.value,t,factory$1.dataFactory),t[d.value]=!0,e[l.value]=d),d}return l}}var sparql={},rdfIsomorphic={},RdfIsomorphic={},hash={},utils$9={},minimalisticAssert=assert$5;function assert$5(n,e){if(!n)throw new Error(e||"Assertion failed")}assert$5.equal=function(e,t,o){if(e!=t)throw new Error(o||"Assertion failed: "+e+" != "+t)};var inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(n){inherits_browserExports=n}};typeof Object.create=="function"?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}};var assert$4=minimalisticAssert,inherits=inherits_browserExports;utils$9.inherits=inherits;function isSurrogatePair(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function toArray(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),l=0;l<n.length;l+=2)t.push(parseInt(n[l]+n[l+1],16))}else for(var o=0,l=0;l<n.length;l++){var d=n.charCodeAt(l);d<128?t[o++]=d:d<2048?(t[o++]=d>>6|192,t[o++]=d&63|128):isSurrogatePair(n,l)?(d=65536+((d&1023)<<10)+(n.charCodeAt(++l)&1023),t[o++]=d>>18|240,t[o++]=d>>12&63|128,t[o++]=d>>6&63|128,t[o++]=d&63|128):(t[o++]=d>>12|224,t[o++]=d>>6&63|128,t[o++]=d&63|128)}else for(l=0;l<n.length;l++)t[l]=n[l]|0;return t}utils$9.toArray=toArray;function toHex(n){for(var e="",t=0;t<n.length;t++)e+=zero2(n[t].toString(16));return e}utils$9.toHex=toHex;function htonl(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}utils$9.htonl=htonl;function toHex32(n,e){for(var t="",o=0;o<n.length;o++){var l=n[o];e==="little"&&(l=htonl(l)),t+=zero8(l.toString(16))}return t}utils$9.toHex32=toHex32;function zero2(n){return n.length===1?"0"+n:n}utils$9.zero2=zero2;function zero8(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}utils$9.zero8=zero8;function join32(n,e,t,o){var l=t-e;assert$4(l%4===0);for(var d=new Array(l/4),u=0,a=e;u<d.length;u++,a+=4){var c;o==="big"?c=n[a]<<24|n[a+1]<<16|n[a+2]<<8|n[a+3]:c=n[a+3]<<24|n[a+2]<<16|n[a+1]<<8|n[a],d[u]=c>>>0}return d}utils$9.join32=join32;function split32(n,e){for(var t=new Array(n.length*4),o=0,l=0;o<n.length;o++,l+=4){var d=n[o];e==="big"?(t[l]=d>>>24,t[l+1]=d>>>16&255,t[l+2]=d>>>8&255,t[l+3]=d&255):(t[l+3]=d>>>24,t[l+2]=d>>>16&255,t[l+1]=d>>>8&255,t[l]=d&255)}return t}utils$9.split32=split32;function rotr32$1(n,e){return n>>>e|n<<32-e}utils$9.rotr32=rotr32$1;function rotl32$2(n,e){return n<<e|n>>>32-e}utils$9.rotl32=rotl32$2;function sum32$3(n,e){return n+e>>>0}utils$9.sum32=sum32$3;function sum32_3$1(n,e,t){return n+e+t>>>0}utils$9.sum32_3=sum32_3$1;function sum32_4$2(n,e,t,o){return n+e+t+o>>>0}utils$9.sum32_4=sum32_4$2;function sum32_5$2(n,e,t,o,l){return n+e+t+o+l>>>0}utils$9.sum32_5=sum32_5$2;function sum64$1(n,e,t,o){var l=n[e],d=n[e+1],u=o+d>>>0,a=(u<o?1:0)+t+l;n[e]=a>>>0,n[e+1]=u}utils$9.sum64=sum64$1;function sum64_hi$1(n,e,t,o){var l=e+o>>>0,d=(l<e?1:0)+n+t;return d>>>0}utils$9.sum64_hi=sum64_hi$1;function sum64_lo$1(n,e,t,o){var l=e+o;return l>>>0}utils$9.sum64_lo=sum64_lo$1;function sum64_4_hi$1(n,e,t,o,l,d,u,a){var c=0,h=e;h=h+o>>>0,c+=h<e?1:0,h=h+d>>>0,c+=h<d?1:0,h=h+a>>>0,c+=h<a?1:0;var y=n+t+l+u+c;return y>>>0}utils$9.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(n,e,t,o,l,d,u,a){var c=e+o+d+a;return c>>>0}utils$9.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(n,e,t,o,l,d,u,a,c,h){var y=0,b=e;b=b+o>>>0,y+=b<e?1:0,b=b+d>>>0,y+=b<d?1:0,b=b+a>>>0,y+=b<a?1:0,b=b+h>>>0,y+=b<h?1:0;var m=n+t+l+u+c+y;return m>>>0}utils$9.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(n,e,t,o,l,d,u,a,c,h){var y=e+o+d+a+h;return y>>>0}utils$9.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(n,e,t){var o=e<<32-t|n>>>t;return o>>>0}utils$9.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$9.rotr64_lo=rotr64_lo$1;function shr64_hi$1(n,e,t){return n>>>t}utils$9.shr64_hi=shr64_hi$1;function shr64_lo$1(n,e,t){var o=n<<32-t|e>>>t;return o>>>0}utils$9.shr64_lo=shr64_lo$1;var common$5={},utils$8=utils$9,assert$3=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,t){if(e=utils$8.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var o=e.length%this._delta8;this.pending=e.slice(e.length-o,e.length),this.pending.length===0&&(this.pending=null),e=utils$8.join32(e,0,e.length-o,this.endian);for(var l=0;l<e.length;l+=this._delta32)this._update(e,l,l+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$3(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,o=t-(e+this.padLength)%t,l=new Array(o+this.padLength);l[0]=128;for(var d=1;d<o;d++)l[d]=0;if(e<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)l[d++]=0;l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=e>>>24&255,l[d++]=e>>>16&255,l[d++]=e>>>8&255,l[d++]=e&255}else for(l[d++]=e&255,l[d++]=e>>>8&255,l[d++]=e>>>16&255,l[d++]=e>>>24&255,l[d++]=0,l[d++]=0,l[d++]=0,l[d++]=0,u=8;u<this.padLength;u++)l[d++]=0;return l};var sha={},common$4={},utils$7=utils$9,rotr32=utils$7.rotr32;function ft_1$1(n,e,t,o){if(n===0)return ch32$1(e,t,o);if(n===1||n===3)return p32(e,t,o);if(n===2)return maj32$1(e,t,o)}common$4.ft_1=ft_1$1;function ch32$1(n,e,t){return n&e^~n&t}common$4.ch32=ch32$1;function maj32$1(n,e,t){return n&e^n&t^e&t}common$4.maj32=maj32$1;function p32(n,e,t){return n^e^t}common$4.p32=p32;function s0_256$1(n){return rotr32(n,2)^rotr32(n,13)^rotr32(n,22)}common$4.s0_256=s0_256$1;function s1_256$1(n){return rotr32(n,6)^rotr32(n,11)^rotr32(n,25)}common$4.s1_256=s1_256$1;function g0_256$1(n){return rotr32(n,7)^rotr32(n,18)^n>>>3}common$4.g0_256=g0_256$1;function g1_256$1(n){return rotr32(n,17)^rotr32(n,19)^n>>>10}common$4.g1_256=g1_256$1;var utils$6=utils$9,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$6.rotl32,sum32$2=utils$6.sum32,sum32_5$1=utils$6.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$6.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,t){for(var o=this.W,l=0;l<16;l++)o[l]=e[t+l];for(;l<o.length;l++)o[l]=rotl32$1(o[l-3]^o[l-8]^o[l-14]^o[l-16],1);var d=this.h[0],u=this.h[1],a=this.h[2],c=this.h[3],h=this.h[4];for(l=0;l<o.length;l++){var y=~~(l/20),b=sum32_5$1(rotl32$1(d,5),ft_1(y,u,a,c),h,o[l],sha1_K[y]);h=c,c=a,a=rotl32$1(u,30),u=d,d=b}this.h[0]=sum32$2(this.h[0],d),this.h[1]=sum32$2(this.h[1],u),this.h[2]=sum32$2(this.h[2],a),this.h[3]=sum32$2(this.h[3],c),this.h[4]=sum32$2(this.h[4],h)};SHA1.prototype._digest=function(e){return e==="hex"?utils$6.toHex32(this.h,"big"):utils$6.split32(this.h,"big")};var utils$5=utils$9,common$2=common$5,shaCommon=common$4,assert$2=minimalisticAssert,sum32$1=utils$5.sum32,sum32_4$1=utils$5.sum32_4,sum32_5=utils$5.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$5.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(e,t){for(var o=this.W,l=0;l<16;l++)o[l]=e[t+l];for(;l<o.length;l++)o[l]=sum32_4$1(g1_256(o[l-2]),o[l-7],g0_256(o[l-15]),o[l-16]);var d=this.h[0],u=this.h[1],a=this.h[2],c=this.h[3],h=this.h[4],y=this.h[5],b=this.h[6],m=this.h[7];for(assert$2(this.k.length===o.length),l=0;l<o.length;l++){var E=sum32_5(m,s1_256(h),ch32(h,y,b),this.k[l],o[l]),v=sum32$1(s0_256(d),maj32(d,u,a));m=b,b=y,y=h,h=sum32$1(c,E),c=a,a=u,u=d,d=sum32$1(E,v)}this.h[0]=sum32$1(this.h[0],d),this.h[1]=sum32$1(this.h[1],u),this.h[2]=sum32$1(this.h[2],a),this.h[3]=sum32$1(this.h[3],c),this.h[4]=sum32$1(this.h[4],h),this.h[5]=sum32$1(this.h[5],y),this.h[6]=sum32$1(this.h[6],b),this.h[7]=sum32$1(this.h[7],m)};SHA256$1.prototype._digest=function(e){return e==="hex"?utils$5.toHex32(this.h,"big"):utils$5.split32(this.h,"big")};var utils$4=utils$9,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$4.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(e){return e==="hex"?utils$4.toHex32(this.h.slice(0,7),"big"):utils$4.split32(this.h.slice(0,7),"big")};var utils$3=utils$9,common$1=common$5,assert$1=minimalisticAssert,rotr64_hi=utils$3.rotr64_hi,rotr64_lo=utils$3.rotr64_lo,shr64_hi=utils$3.shr64_hi,shr64_lo=utils$3.shr64_lo,sum64=utils$3.sum64,sum64_hi=utils$3.sum64_hi,sum64_lo=utils$3.sum64_lo,sum64_4_hi=utils$3.sum64_4_hi,sum64_4_lo=utils$3.sum64_4_lo,sum64_5_hi=utils$3.sum64_5_hi,sum64_5_lo=utils$3.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$3.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(e,t){for(var o=this.W,l=0;l<32;l++)o[l]=e[t+l];for(;l<o.length;l+=2){var d=g1_512_hi(o[l-4],o[l-3]),u=g1_512_lo(o[l-4],o[l-3]),a=o[l-14],c=o[l-13],h=g0_512_hi(o[l-30],o[l-29]),y=g0_512_lo(o[l-30],o[l-29]),b=o[l-32],m=o[l-31];o[l]=sum64_4_hi(d,u,a,c,h,y,b,m),o[l+1]=sum64_4_lo(d,u,a,c,h,y,b,m)}};SHA512$1.prototype._update=function(e,t){this._prepareBlock(e,t);var o=this.W,l=this.h[0],d=this.h[1],u=this.h[2],a=this.h[3],c=this.h[4],h=this.h[5],y=this.h[6],b=this.h[7],m=this.h[8],E=this.h[9],v=this.h[10],T=this.h[11],j=this.h[12],N=this.h[13],x=this.h[14],I=this.h[15];assert$1(this.k.length===o.length);for(var w=0;w<o.length;w+=2){var S=x,P=I,B=s1_512_hi(m,E),H=s1_512_lo(m,E),q=ch64_hi(m,E,v,T,j),V=ch64_lo(m,E,v,T,j,N),$=this.k[w],ee=this.k[w+1],D=o[w],F=o[w+1],Q=sum64_5_hi(S,P,B,H,q,V,$,ee,D,F),X=sum64_5_lo(S,P,B,H,q,V,$,ee,D,F);S=s0_512_hi(l,d),P=s0_512_lo(l,d),B=maj64_hi(l,d,u,a,c),H=maj64_lo(l,d,u,a,c,h);var W=sum64_hi(S,P,B,H),le=sum64_lo(S,P,B,H);x=j,I=N,j=v,N=T,v=m,T=E,m=sum64_hi(y,b,Q,X),E=sum64_lo(b,b,Q,X),y=c,b=h,c=u,h=a,u=l,a=d,l=sum64_hi(Q,X,W,le),d=sum64_lo(Q,X,W,le)}sum64(this.h,0,l,d),sum64(this.h,2,u,a),sum64(this.h,4,c,h),sum64(this.h,6,y,b),sum64(this.h,8,m,E),sum64(this.h,10,v,T),sum64(this.h,12,j,N),sum64(this.h,14,x,I)};SHA512$1.prototype._digest=function(e){return e==="hex"?utils$3.toHex32(this.h,"big"):utils$3.split32(this.h,"big")};function ch64_hi(n,e,t,o,l){var d=n&t^~n&l;return d<0&&(d+=4294967296),d}function ch64_lo(n,e,t,o,l,d){var u=e&o^~e&d;return u<0&&(u+=4294967296),u}function maj64_hi(n,e,t,o,l){var d=n&t^n&l^t&l;return d<0&&(d+=4294967296),d}function maj64_lo(n,e,t,o,l,d){var u=e&o^e&d^o&d;return u<0&&(u+=4294967296),u}function s0_512_hi(n,e){var t=rotr64_hi(n,e,28),o=rotr64_hi(e,n,2),l=rotr64_hi(e,n,7),d=t^o^l;return d<0&&(d+=4294967296),d}function s0_512_lo(n,e){var t=rotr64_lo(n,e,28),o=rotr64_lo(e,n,2),l=rotr64_lo(e,n,7),d=t^o^l;return d<0&&(d+=4294967296),d}function s1_512_hi(n,e){var t=rotr64_hi(n,e,14),o=rotr64_hi(n,e,18),l=rotr64_hi(e,n,9),d=t^o^l;return d<0&&(d+=4294967296),d}function s1_512_lo(n,e){var t=rotr64_lo(n,e,14),o=rotr64_lo(n,e,18),l=rotr64_lo(e,n,9),d=t^o^l;return d<0&&(d+=4294967296),d}function g0_512_hi(n,e){var t=rotr64_hi(n,e,1),o=rotr64_hi(n,e,8),l=shr64_hi(n,e,7),d=t^o^l;return d<0&&(d+=4294967296),d}function g0_512_lo(n,e){var t=rotr64_lo(n,e,1),o=rotr64_lo(n,e,8),l=shr64_lo(n,e,7),d=t^o^l;return d<0&&(d+=4294967296),d}function g1_512_hi(n,e){var t=rotr64_hi(n,e,19),o=rotr64_hi(e,n,29),l=shr64_hi(n,e,6),d=t^o^l;return d<0&&(d+=4294967296),d}function g1_512_lo(n,e){var t=rotr64_lo(n,e,19),o=rotr64_lo(e,n,29),l=shr64_lo(n,e,6),d=t^o^l;return d<0&&(d+=4294967296),d}var utils$2=utils$9,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$2.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(e){return e==="hex"?utils$2.toHex32(this.h.slice(0,12),"big"):utils$2.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$1=utils$9,common=common$5,rotl32=utils$1.rotl32,sum32=utils$1.sum32,sum32_3=utils$1.sum32_3,sum32_4=utils$1.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$1.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,t){for(var o=this.h[0],l=this.h[1],d=this.h[2],u=this.h[3],a=this.h[4],c=o,h=l,y=d,b=u,m=a,E=0;E<80;E++){var v=sum32(rotl32(sum32_4(o,f(E,l,d,u),e[r[E]+t],K(E)),s[E]),a);o=a,a=u,u=rotl32(d,10),d=l,l=v,v=sum32(rotl32(sum32_4(c,f(79-E,h,y,b),e[rh[E]+t],Kh(E)),sh[E]),m),c=m,m=b,b=rotl32(y,10),y=h,h=v}v=sum32_3(this.h[1],d,b),this.h[1]=sum32_3(this.h[2],u,m),this.h[2]=sum32_3(this.h[3],a,c),this.h[3]=sum32_3(this.h[4],o,h),this.h[4]=sum32_3(this.h[0],l,y),this.h[0]=v};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$1.toHex32(this.h,"little"):utils$1.split32(this.h,"little")};function f(n,e,t,o){return n<=15?e^t^o:n<=31?e&t|~e&o:n<=47?(e|~t)^o:n<=63?e&o|t&~o:e^(t|~o)}function K(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Kh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils=utils$9,assert=minimalisticAssert;function Hmac(n,e,t){if(!(this instanceof Hmac))return new Hmac(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(e,t))}var hmac=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,t){return this.inner.update(e,t),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=utils$9,e.common=common$5,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash);var rdfTerms={},QuadTermUtil={};Object.defineProperty(QuadTermUtil,"__esModule",{value:!0});QuadTermUtil.matchPatternMappings=QuadTermUtil.matchPatternComplete=QuadTermUtil.matchPattern=QuadTermUtil.matchTerm=QuadTermUtil.someTerms=QuadTermUtil.everyTerms=QuadTermUtil.reduceTerms=QuadTermUtil.mapTerms=QuadTermUtil.filterQuadTermNames=QuadTermUtil.filterTerms=QuadTermUtil.forEachTerms=QuadTermUtil.collectNamedTerms=QuadTermUtil.getNamedTerms=QuadTermUtil.getTermsNested=QuadTermUtil.getTerms=QuadTermUtil.TRIPLE_TERM_NAMES=QuadTermUtil.QUAD_TERM_NAMES=void 0;const rdf_data_factory_1=rdfDataFactory,DF=new rdf_data_factory_1.DataFactory;QuadTermUtil.QUAD_TERM_NAMES=["subject","predicate","object","graph"];QuadTermUtil.TRIPLE_TERM_NAMES=["subject","predicate","object"];function getTerms(n,e){return e&&n.graph.termType==="DefaultGraph"?[n.subject,n.predicate,n.object]:[n.subject,n.predicate,n.object,n.graph]}QuadTermUtil.getTerms=getTerms;function getTermsNested(n,e){const t=[];for(const o of getTerms(n,e))o.termType==="Quad"?getTermsNested(o,e).forEach(l=>t.push(l)):t.push(o);return t}QuadTermUtil.getTermsNested=getTermsNested;function getNamedTerms(n){return[{key:"subject",value:n.subject},{key:"predicate",value:n.predicate},{key:"object",value:n.object},{key:"graph",value:n.graph}]}QuadTermUtil.getNamedTerms=getNamedTerms;function collectNamedTerms(n,e,t){const o={};return n.forEach(l=>o[l.key]=l.value),e&&(o.subject=o.subject||e("subject"),o.predicate=o.predicate||e("predicate"),o.object=o.object||e("object"),o.graph=o.graph||e("graph")),(t||DF).quad(o.subject,o.predicate,o.object,o.graph)}QuadTermUtil.collectNamedTerms=collectNamedTerms;function forEachTerms(n,e){e(n.subject,"subject"),e(n.predicate,"predicate"),e(n.object,"object"),e(n.graph,"graph")}QuadTermUtil.forEachTerms=forEachTerms;function filterTerms(n,e){const t=[];return e(n.subject,"subject")&&t.push(n.subject),e(n.predicate,"predicate")&&t.push(n.predicate),e(n.object,"object")&&t.push(n.object),e(n.graph,"graph")&&t.push(n.graph),t}QuadTermUtil.filterTerms=filterTerms;function filterQuadTermNames(n,e){const t=[];return e(n.subject,"subject")&&t.push("subject"),e(n.predicate,"predicate")&&t.push("predicate"),e(n.object,"object")&&t.push("object"),e(n.graph,"graph")&&t.push("graph"),t}QuadTermUtil.filterQuadTermNames=filterQuadTermNames;function mapTerms(n,e,t){return(t||DF).quad(e(n.subject,"subject"),e(n.predicate,"predicate"),e(n.object,"object"),e(n.graph,"graph"))}QuadTermUtil.mapTerms=mapTerms;function reduceTerms(n,e,t){let o=t;return o=e(o,n.subject,"subject"),o=e(o,n.predicate,"predicate"),o=e(o,n.object,"object"),e(o,n.graph,"graph")}QuadTermUtil.reduceTerms=reduceTerms;function everyTerms(n,e){return e(n.subject,"subject")&&e(n.predicate,"predicate")&&e(n.object,"object")&&e(n.graph,"graph")}QuadTermUtil.everyTerms=everyTerms;function someTerms(n,e){return e(n.subject,"subject")||e(n.predicate,"predicate")||e(n.object,"object")||e(n.graph,"graph")}QuadTermUtil.someTerms=someTerms;function matchTerm(n,e){return!e||e.termType==="Variable"||e.termType==="Quad"&&n.termType==="Quad"&&matchPatternComplete(n,e)||e.equals(n)}QuadTermUtil.matchTerm=matchTerm;function matchPattern(n,e,t,o,l){return matchTerm(n.subject,e)&&matchTerm(n.predicate,t)&&matchTerm(n.object,o)&&matchTerm(n.graph,l)}QuadTermUtil.matchPattern=matchPattern;function matchPatternComplete(n,e){return matchPattern(n,e.subject,e.predicate,e.object,e.graph)}QuadTermUtil.matchPatternComplete=matchPatternComplete;function matchPatternMappings(n,e,t={}){const o={};function l(d,u){return everyTerms(d,(a,c)=>{var h,y;const b=u[c];switch(a.termType){case"Variable":return t.skipVarMapping&&b.termType==="Variable"||((y=(h=o[a.value])===null||h===void 0?void 0:h.equals(b))!==null&&y!==void 0?y:(o[a.value]=b,!0));case"Quad":return b.termType==="Quad"&&l(a,b);default:return a.equals(b)}})}return l(e,n)&&(t.returnMappings?o:!0)}QuadTermUtil.matchPatternMappings=matchPatternMappings;var TermUtil={};Object.defineProperty(TermUtil,"__esModule",{value:!0});TermUtil.getQuads=TermUtil.getDefaultGraphs=TermUtil.getVariables=TermUtil.getLiterals=TermUtil.getBlankNodes=TermUtil.getNamedNodes=TermUtil.getTermsOfType=TermUtil.uniqTerms=TermUtil.TERM_TYPES=void 0;const rdf_string_1$2=rdfString;TermUtil.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function uniqTerms(n){const e={};return n.filter(t=>{const o=rdf_string_1$2.termToString(t);return!(o in e)&&(e[o]=!0)})}TermUtil.uniqTerms=uniqTerms;function getTermsOfType(n,e){return n.filter(t=>t.termType===e)}TermUtil.getTermsOfType=getTermsOfType;function getNamedNodes(n){return getTermsOfType(n,"NamedNode")}TermUtil.getNamedNodes=getNamedNodes;function getBlankNodes(n){return getTermsOfType(n,"BlankNode")}TermUtil.getBlankNodes=getBlankNodes;function getLiterals(n){return getTermsOfType(n,"Literal")}TermUtil.getLiterals=getLiterals;function getVariables(n){return getTermsOfType(n,"Variable")}TermUtil.getVariables=getVariables;function getDefaultGraphs(n){return getTermsOfType(n,"DefaultGraph")}TermUtil.getDefaultGraphs=getDefaultGraphs;function getQuads(n){return getTermsOfType(n,"Quad")}TermUtil.getQuads=getQuads;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,l,d,u){u===void 0&&(u=d),Object.defineProperty(o,u,{enumerable:!0,get:function(){return l[d]}})}:function(o,l,d,u){u===void 0&&(u=d),o[u]=l[d]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,l){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,o,d)};Object.defineProperty(n,"__esModule",{value:!0}),t(QuadTermUtil,n),t(TermUtil,n)})(rdfTerms);Object.defineProperty(RdfIsomorphic,"__esModule",{value:!0});RdfIsomorphic.isTermGrounded=RdfIsomorphic.termToSignature=RdfIsomorphic.quadToSignature=RdfIsomorphic.sha1hex=RdfIsomorphic.hashTerm=RdfIsomorphic.hashTerms=RdfIsomorphic.getGraphBlankNodes=RdfIsomorphic.uniqGraph=RdfIsomorphic.deindexGraph=RdfIsomorphic.indexGraph=RdfIsomorphic.getQuadsWithoutBlankNodes=RdfIsomorphic.getQuadsWithBlankNodes=RdfIsomorphic.hasValue=RdfIsomorphic.hashValues=RdfIsomorphic.getBijectionInner=RdfIsomorphic.getBijection=RdfIsomorphic.isomorphic=void 0;const hash_js_1=hash,rdf_string_1$1=rdfString,rdf_terms_1=rdfTerms;function isomorphic(n,e){return!!getBijection(n,e)}RdfIsomorphic.isomorphic=isomorphic;function getBijection(n,e){const t=indexGraph(getQuadsWithoutBlankNodes(n)),o=indexGraph(getQuadsWithoutBlankNodes(e));if(Object.keys(t).length!==Object.keys(o).length)return null;for(const c in t)if(t[c]!==o[c])return null;const l=uniqGraph(getQuadsWithBlankNodes(n)),d=uniqGraph(getQuadsWithBlankNodes(e)),u=getGraphBlankNodes(n),a=getGraphBlankNodes(e);return getBijectionInner(l,d,u,a)}RdfIsomorphic.getBijection=getBijection;function getBijectionInner(n,e,t,o,l,d){l||(l={}),d||(d={});const[u,a]=hashTerms(n,t,l),[c,h]=hashTerms(e,o,d);if(Object.keys(u).length!==Object.keys(c).length)return null;for(const b in u)if(!hasValue(c,u[b]))return null;let y={};for(const b of t){const m=rdf_string_1$1.termToString(b),E=a[m];for(const v in h)if(h[v]===E){y[m]=v,delete h[v];break}}if(!arraysEqual(Object.keys(y).sort(),t.map(rdf_string_1$1.termToString).sort())||!arraysEqual(hashValues(y).sort(),o.map(rdf_string_1$1.termToString).sort())){y=null;for(const b of t){const m=rdf_string_1$1.termToString(b);if(!u[m])for(const E of o){const v=rdf_string_1$1.termToString(E);if(!c[v]&&a[m]===h[v]){const T=sha1hex(m);y=getBijectionInner(n,e,t,o,Object.assign(Object.assign({},u),{[m]:T}),Object.assign(Object.assign({},c),{[v]:T}))}}}}return y}RdfIsomorphic.getBijectionInner=getBijectionInner;function arraysEqual(n,e){if(n.length!==e.length)return!1;for(let t=n.length;t--;)if(n[t]!==e[t])return!1;return!0}function hashValues(n){const e=[];for(const t in n)e.push(n[t]);return e}RdfIsomorphic.hashValues=hashValues;function hasValue(n,e){for(const t in n)if(n[t]===e)return!0;return!1}RdfIsomorphic.hasValue=hasValue;function getQuadsWithBlankNodes(n){return n.filter(e=>rdf_terms_1.someTerms(e,t=>t.termType==="BlankNode"||t.termType==="Quad"&&rdf_terms_1.getTermsNested(t).some(o=>o.termType==="BlankNode")))}RdfIsomorphic.getQuadsWithBlankNodes=getQuadsWithBlankNodes;function getQuadsWithoutBlankNodes(n){return n.filter(e=>rdf_terms_1.everyTerms(e,t=>t.termType!=="BlankNode"&&!(t.termType==="Quad"&&rdf_terms_1.getTermsNested(t).some(o=>o.termType==="BlankNode"))))}RdfIsomorphic.getQuadsWithoutBlankNodes=getQuadsWithoutBlankNodes;function indexGraph(n){const e={};for(const t of n)e[JSON.stringify(rdf_string_1$1.quadToStringQuad(t))]=!0;return e}RdfIsomorphic.indexGraph=indexGraph;function deindexGraph(n){return Object.keys(n).map(e=>rdf_string_1$1.stringQuadToQuad(JSON.parse(e)))}RdfIsomorphic.deindexGraph=deindexGraph;function uniqGraph(n){return deindexGraph(indexGraph(n))}RdfIsomorphic.uniqGraph=uniqGraph;function getGraphBlankNodes(n){return rdf_terms_1.uniqTerms(n.map(e=>rdf_terms_1.getBlankNodes(rdf_terms_1.getTermsNested(e))).reduce((e,t)=>e.concat(t),[]))}RdfIsomorphic.getGraphBlankNodes=getGraphBlankNodes;function hashTerms(n,e,t){const o=Object.assign({},t),l={};let d=!0;for(;d;){const u=Object.keys(o).length;for(const c of e){const h=rdf_string_1$1.termToString(c);if(!o[h]){const[y,b]=hashTerm(c,n,o);y&&(o[h]=b),l[h]=b}}const a={};for(const c in l){const h=l[c];a[h]===void 0?a[h]=c:a[h]=!1}for(const c in a){const h=a[c];h&&(o[h]=c)}d=u!==Object.keys(o).length}return[o,l]}RdfIsomorphic.hashTerms=hashTerms;function hashTerm(n,e,t){const o=[];let l=!0;for(const u of e){const a=rdf_terms_1.getTermsNested(u);if(a.some(c=>c.equals(n))){o.push(quadToSignature(u,t,n));for(const c of a)!isTermGrounded(c,t)&&!c.equals(n)&&(l=!1)}}const d=sha1hex(o.sort().join(""));return[l,d]}RdfIsomorphic.hashTerm=hashTerm;function sha1hex(n){return hash_js_1.sha1().update(n).digest("hex")}RdfIsomorphic.sha1hex=sha1hex;function quadToSignature(n,e,t){return rdf_terms_1.getTerms(n).map(o=>termToSignature(o,e,t)).join("|")}RdfIsomorphic.quadToSignature=quadToSignature;function termToSignature(n,e,t){return n.equals(t)?"@self":n.termType==="BlankNode"?e[rdf_string_1$1.termToString(n)]||"@blank":n.termType==="Quad"?`<${quadToSignature(n,e,t)}>`:rdf_string_1$1.termToString(n)}RdfIsomorphic.termToSignature=termToSignature;function isTermGrounded(n,e){return n.termType!=="BlankNode"&&!(n.termType==="Quad"&&rdf_terms_1.getTermsNested(n).some(t=>!isTermGrounded(t,e)))||!!e[rdf_string_1$1.termToString(n)]}RdfIsomorphic.isTermGrounded=isTermGrounded;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(o,l,d,u){u===void 0&&(u=d),Object.defineProperty(o,u,{enumerable:!0,get:function(){return l[d]}})}:function(o,l,d,u){u===void 0&&(u=d),o[u]=l[d]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(o,l){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,o,d)};Object.defineProperty(n,"__esModule",{value:!0}),t(RdfIsomorphic,n)})(rdfIsomorphic);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,o){o===void 0&&(o=t);var l=Object.getOwnPropertyDescriptor(e,t);(!l||("get"in l?!e.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,o,l)}:function(n,e,t,o){o===void 0&&(o=t),n[o]=e[t]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding(e,n,t);return __setModuleDefault(e,n),e},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sparql,"__esModule",{value:!0});sparql.toSparqlJs=sparql.toSparql=void 0;const rdf_isomorphic_1=rdfIsomorphic,rdf_string_1=rdfString,sparqljs_1=sparql$1,Algebra=__importStar(algebra),factory_1=__importDefault(factory$2),util_1=__importDefault(util),types=Algebra.types,eTypes=Algebra.expressionTypes;let context;const factory=new factory_1.default;function toSparql(n,e={}){return new sparqljs_1.Generator(e).stringify(toSparqlJs(n))}sparql.toSparql=toSparql;function toSparqlJs(n){resetContext(),n=removeQuads(n);let e=translateOperation(n);return e.type==="group"?e.patterns[0]:e}sparql.toSparqlJs=toSparqlJs;function resetContext(){context={project:!1,extend:[],group:[],aggregates:[],order:[]}}function translateOperation(n){switch(n.type!==types.EXTEND&&n.type!==types.ORDER_BY&&n.type!==types.GRAPH&&(context.project=!1),n.type){case types.EXPRESSION:return translateExpression(n);case types.ASK:return translateProject(n,types.ASK);case types.BGP:return translateBgp(n);case types.CONSTRUCT:return translateConstruct(n);case types.DESCRIBE:return translateProject(n,types.DESCRIBE);case types.DISTINCT:return translateDistinct(n);case types.EXTEND:return translateExtend(n);case types.FROM:return translateFrom(n);case types.FILTER:return translateFilter(n);case types.GRAPH:return translateGraph(n);case types.GROUP:return translateGroup(n);case types.JOIN:return translateJoin(n);case types.LEFT_JOIN:return translateLeftJoin(n);case types.MINUS:return translateMinus(n);case types.NOP:return{};case types.ORDER_BY:return translateOrderBy(n);case types.PATH:return translatePath(n);case types.PATTERN:return translatePattern(n);case types.PROJECT:return translateProject(n,types.PROJECT);case types.REDUCED:return translateReduced(n);case types.SERVICE:return translateService(n);case types.SLICE:return translateSlice(n);case types.UNION:return translateUnion(n);case types.VALUES:return translateValues(n);case types.COMPOSITE_UPDATE:return translateCompositeUpdate(n);case types.DELETE_INSERT:return translateDeleteInsert(n);case types.LOAD:return translateLoad(n);case types.CLEAR:return translateClear(n);case types.CREATE:return translateCreate(n);case types.DROP:return translateDrop(n);case types.ADD:return translateAdd(n);case types.MOVE:return translateMove(n);case types.COPY:return translateCopy(n)}throw new Error(`Unknown Operation type ${n.type}`)}function translateExpression(n){switch(n.expressionType){case eTypes.AGGREGATE:return translateAggregateExpression(n);case eTypes.EXISTENCE:return translateExistenceExpression(n);case eTypes.NAMED:return translateNamedExpression(n);case eTypes.OPERATOR:return translateOperatorExpression(n);case eTypes.TERM:return translateTermExpression(n);case eTypes.WILDCARD:return translateWildcardExpression(n)}throw new Error(`Unknown Expression Operation type ${n.expressionType}`)}function translatePathComponent(n){switch(n.type){case types.ALT:return translateAlt(n);case types.INV:return translateInv(n);case types.LINK:return translateLink(n);case types.NPS:return translateNps(n);case types.ONE_OR_MORE_PATH:return translateOneOrMorePath(n);case types.SEQ:return translateSeq(n);case types.ZERO_OR_MORE_PATH:return translateZeroOrMorePath(n);case types.ZERO_OR_ONE_PATH:return translateZeroOrOnePath(n)}throw new Error(`Unknown Path type ${n.type}`)}function translateTerm(n){return(0,rdf_string_1.termToString)(n)}function translateAggregateExpression(n){const e={expression:translateExpression(n.expression),type:"aggregate",aggregation:n.aggregator,distinct:n.distinct};return n.separator&&(e.separator=n.separator),e}function translateExistenceExpression(n){return{type:"operation",operator:n.not?"notexists":"exists",args:util_1.default.flatten([translateOperation(n.input)])}}function translateNamedExpression(n){return{type:"functionCall",function:n.name,args:n.args.map(translateExpression)}}function translateOperatorExpression(n){if(n.operator==="desc"){const t={expression:translateExpression(n.args[0])};return t.descending=!0,t}const e={type:"operation",operator:n.operator,args:n.args.map(translateExpression)};return(e.operator==="in"||e.operator==="notin")&&(e.args=[e.args[0]].concat([e.args.slice(1)])),e}function translateTermExpression(n){return n.term}function translateWildcardExpression(n){return n.wildcard}function translateBoundAggregate(n){return n}function translateBgp(n){let e=n.patterns.map(translatePattern);return e.length===0?null:{type:"bgp",triples:e}}function translateConstruct(n){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:n.template.map(translatePattern),where:util_1.default.flatten([translateOperation(n.input)])}}function translateDistinct(n){let e=translateOperation(n.input);return e.patterns[0].distinct=!0,e}function translateExtend(n){return context.project?(context.extend.push(n),translateOperation(n.input)):util_1.default.flatten([translateOperation(n.input),{type:"bind",variable:n.variable,expression:translateExpression(n.expression)}])}function translateFrom(n){const e=translateOperation(n.input),t=e.patterns[0];return t.from={default:n.default,named:n.named},e}function translateFilter(n){return{type:"group",patterns:util_1.default.flatten([translateOperation(n.input),{type:"filter",expression:translateExpression(n.expression)}])}}function translateGraph(n){return{type:"graph",patterns:util_1.default.flatten([translateOperation(n.input)]),name:n.name}}function translateGroup(n){const e=translateOperation(n.input),t=n.aggregates.map(translateBoundAggregate);return context.aggregates.push(...t),context.group.push(...n.variables),e}function translateJoin(n){return util_1.default.flatten(n.input.map(translateOperation)).reduce((t,o)=>(o.type!=="bgp"||t.length==0||t[t.length-1].type!=="bgp"?t.push(o):t[t.length-1].triples.push(...o.triples),t),[])}function translateLeftJoin(n){const e={type:"optional",patterns:[translateOperation(n.input[1])]};return n.expression&&e.patterns.push({type:"filter",expression:translateExpression(n.expression)}),e.patterns=util_1.default.flatten(e.patterns),util_1.default.flatten([translateOperation(n.input[0]),e])}function translateMinus(n){let e=translateOperation(n.input[1]);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),util_1.default.flatten([translateOperation(n.input[0]),{type:"minus",patterns:e}])}function translateOrderBy(n){return context.order.push(...n.expressions),translateOperation(n.input)}function translatePath(n){return{type:"bgp",triples:[{subject:n.subject,predicate:translatePathComponent(n.predicate),object:n.object}]}}function translatePattern(n){return{subject:n.subject,predicate:n.predicate,object:n.object}}function replaceAggregatorVariables(n,e){let t=util_1.default.isSimpleTerm(n)?translateTerm(n):n;if(typeof t=="string"){if(e[t])return e[t]}else if(Array.isArray(n))n=n.map(o=>replaceAggregatorVariables(o,e));else for(let o of Object.keys(n))n[o]=replaceAggregatorVariables(n[o],e);return n}function translateProject(n,e){const t={type:"query",prefixes:{}},o=t;let l;e===types.PROJECT?(t.queryType="SELECT",l=n.variables):e===types.ASK?t.queryType="ASK":e===types.DESCRIBE&&(t.queryType="DESCRIBE",l=n.terms);const d=context.extend,u=context.group,a=context.aggregates,c=context.order;resetContext(),context.project=!0;let h=util_1.default.flatten([translateOperation(n.input)]);h.length===1&&h[0].type==="group"&&(h=h[0].patterns),t.where=h;let y={};for(let m of context.aggregates)y[translateTerm(m.variable)]=translateExpression(m);let b={};for(let m=context.extend.length-1;m>=0;--m){let E=context.extend[m];b[translateTerm(E.variable)]=replaceAggregatorVariables(translateExpression(E.expression),y)}if(context.group.length>0&&(o.group=context.group.map(m=>{let E=translateTerm(m);if(b[E]){let v=b[E];return delete b[E],{variable:m,expression:v}}return{expression:m}})),context.order.length>0&&(o.order=context.order.map(translateOperation).map(m=>m.descending?m:{expression:m})),l&&(o.variables=l.map(m=>{let E=translateTerm(m);return b[E]?{variable:m,expression:b[E]}:m}),o.variables.length===0&&(o.variables=[new sparqljs_1.Wildcard])),t.where.length>0&&t.where[t.where.length-1].type==="filter"){const m=t.where[t.where.length-1];objectContainsValues(m,Object.keys(y))&&(o.having=util_1.default.flatten([replaceAggregatorVariables(m.expression,y)]),t.where.splice(-1))}return context.extend=d,context.group=u,context.aggregates=a,context.order=c,{type:"group",patterns:[o]}}function objectContainsValues(n,e){return util_1.default.isSimpleTerm(n)?e.indexOf(translateTerm(n))>=0:Array.isArray(n)?n.some(t=>objectContainsValues(t,e)):n===Object(n)?Object.keys(n).some(t=>objectContainsValues(n[t],e)):e.indexOf(n)>=0}function translateReduced(n){let e=translateOperation(n.input);return e.patterns[0].reduced=!0,e}function translateService(n){let e=translateOperation(n.input);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),{type:"service",name:n.name,silent:n.silent,patterns:e}}function translateSlice(n){let e=translateOperation(n.input),t=e;return e.type&&e.type==="group"&&(t=e.patterns[0]),n.start!==0&&(t.offset=n.start),n.length!==void 0&&(t.limit=n.length),e}function translateUnion(n){return{type:"union",patterns:util_1.default.flatten(n.input.map(translateOperation))}}function translateValues(n){return{type:"values",values:n.bindings.map(e=>{let t={};for(let o of n.variables){let l=`?${o.value}`;e[l]?t[l]=e[l]:t[l]=void 0}return t})}}function translateAlt(n){const e=n.input.map(translatePathComponent);return e.every(t=>"pathType"in t&&t.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:util_1.default.flatten(e.map(t=>t.items))}]}:{type:"path",pathType:"|",items:e}}function translateInv(n){if(n.path.type===types.NPS){const e=n.path.iris.map(t=>({type:"path",pathType:"^",items:[t]}));return e.length<=1?{type:"path",pathType:"!",items:e}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e}]}}return{type:"path",pathType:"^",items:[translatePathComponent(n.path)]}}function translateLink(n){return n.iri}function translateNps(n){return n.iris.length<=1?{type:"path",pathType:"!",items:n.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:n.iris}]}}function translateOneOrMorePath(n){return{type:"path",pathType:"+",items:[translatePathComponent(n.path)]}}function translateSeq(n){return{type:"path",pathType:"/",items:n.input.map(translatePathComponent)}}function translateZeroOrMorePath(n){return{type:"path",pathType:"*",items:[translatePathComponent(n.path)]}}function translateZeroOrOnePath(n){return{type:"path",pathType:"?",items:[translatePathComponent(n.path)]}}function translateCompositeUpdate(n){const e=n.updates.map(t=>translateOperation(t).updates[0]);return{prefixes:{},type:"update",updates:e}}function translateDeleteInsert(n){var e;let t=n.where,o;if(t&&t.type===types.FROM){let d=t;t=d.input,o={default:d.default,named:d.named}}const l=[{updateType:"insertdelete",delete:convertUpdatePatterns(n.delete||[]),insert:convertUpdatePatterns(n.insert||[])}];if(o&&(l[0].using=o),!t||t.type===types.BGP&&t.patterns.length===0)l[0].where=[];else{const d={};let u=translateOperation(removeQuadsRecursive(t,d));u.type==="group"?l[0].where=u.patterns:l[0].where=[u];const a=Object.keys(d);if(a.length>0){if(a.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");const c=(e=d[a[0]])===null||e===void 0?void 0:e.graph;c&&c.value!==""&&(l[0].where=[{type:"graph",patterns:l[0].where,name:c}])}}return!n.delete&&!n.where?(l[0].updateType="insert",delete l[0].delete,delete l[0].where):!n.insert&&!n.where?(delete l[0].insert,delete l[0].where,n.delete.some(d=>d.subject.termType==="Variable"||d.predicate.termType==="Variable"||d.object.termType==="Variable")?l[0].updateType="deletewhere":l[0].updateType="delete"):!n.insert&&n.where&&n.where.type==="bgp"&&(0,rdf_isomorphic_1.isomorphic)(n.delete,n.where.patterns)&&(delete l[0].where,l[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:l}}function translateLoad(n){const e=[{type:"load",silent:!!n.silent,source:n.source}];return n.destination&&(e[0].destination=n.destination),{prefixes:{},type:"update",updates:e}}function translateClear(n){return translateClearCreateDrop(n,"clear")}function translateCreate(n){return translateClearCreateDrop(n,"create")}function translateDrop(n){return translateClearCreateDrop(n,"drop")}function translateClearCreateDrop(n,e){const t=[{type:e,silent:!!n.silent}];return n.source==="DEFAULT"?t[0].graph={default:!0}:n.source==="NAMED"?t[0].graph={named:!0}:n.source==="ALL"?t[0].graph={all:!0}:t[0].graph={type:"graph",name:n.source},{prefixes:{},type:"update",updates:t}}function translateAdd(n){return translateUpdateGraphShortcut(n,"add")}function translateMove(n){return translateUpdateGraphShortcut(n,"move")}function translateCopy(n){return translateUpdateGraphShortcut(n,"copy")}function translateUpdateGraphShortcut(n,e){const t=[{type:e,silent:!!n.silent}];return t[0].source=n.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:n.source},t[0].destination=n.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:n.destination},{prefixes:{},type:"update",updates:t}}function convertUpdatePatterns(n){if(!n)return[];const e={};return n.forEach(t=>{const o=t.graph.value;e[o]||(e[o]=[]),e[o].push(t)}),Object.keys(e).map(t=>t===""?{type:"bgp",triples:e[t].map(translatePattern)}:{type:"graph",triples:e[t].map(translatePattern),name:e[t][0].graph})}function removeQuads(n){return removeQuadsRecursive(n,{})}function removeQuadsRecursive(n,e){if(Array.isArray(n))return n.map(u=>removeQuadsRecursive(u,e));if(!n.type||n.type===types.DELETE_INSERT)return n;if((n.type===types.PATTERN||n.type===types.PATH)&&n.graph)return e[n.graph.value]||(e[n.graph.value]={graph:n.graph,values:[]}),e[n.graph.value].values.push(n),n;const t={},o={},l={};for(let u of Object.keys(n)){const a={};t[u]=removeQuadsRecursive(n[u],a);const c=Object.keys(a);if(c.length>1){let h=potentialGraphFromPatterns(a[c[0]].values);for(let y=1;y<c.length;++y){const b=potentialGraphFromPatterns(a[c[y]].values);h=factory.createJoin([h,b])}return c.map(y=>delete a[y]),h}else if(c.length===1){const h=a[c[0]].graph;o[u]=h,l[h.value]=h}}const d=Object.keys(l);if(d.length>0)if(d.length===1&&n.type!==types.PROJECT)e[d[0]]={graph:l[d[0]],values:[t]};else for(let u of Object.keys(o))o[u].value.length>0&&(t[u]=factory.createGraph(t[u],o[u]));return t}function potentialGraphFromPatterns(n){const e=factory.createBgp(n),t=n[0].graph;return t.value.length===0?e:factory.createGraph(e,t)}(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(y,b,m,E){E===void 0&&(E=m);var v=Object.getOwnPropertyDescriptor(b,m);(!v||("get"in v?!b.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(y,E,v)}:function(y,b,m,E){E===void 0&&(E=m),y[E]=b[m]}),t=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(y,b){Object.defineProperty(y,"default",{enumerable:!0,value:b})}:function(y,b){y.default=b}),o=commonjsGlobal&&commonjsGlobal.__importStar||function(y){if(y&&y.__esModule)return y;var b={};if(y!=null)for(var m in y)m!=="default"&&Object.prototype.hasOwnProperty.call(y,m)&&e(b,y,m);return t(b,y),b},l=commonjsGlobal&&commonjsGlobal.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.toSparqlJs=n.toSparql=n.Factory=n.Algebra=n.translate=void 0;const d=l(sparqlAlgebra);n.translate=d.default;const u=o(algebra);n.Algebra=u;const a=l(factory$2);n.Factory=a.default;const c=sparql;Object.defineProperty(n,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(n,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const h=l(util);n.Util=h.default})(sparqlalgebrajs);var index=getDefaultExportFromCjs(sparqlalgebrajs),__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__=_mergeNamespaces({__proto__:null,default:index},[sparqlalgebrajs]),__quadstore_comunica_modules__={"../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorAbstractPath=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=t("../node_modules/rdf-data-factory/index.js"),c=t("../node_modules/rdf-string/index.js"),h=t("sparqlalgebrajs"),y=t("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),b=new a.DataFactory,m=new o.BindingsFactory;class E extends l.ActorQueryOperationTypedMediated{constructor(T,j){super(T,"path"),this.predicateType=j}async testOperation(T,j){if(T.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(T,j){return j?T&&(T.subject.value===j||T.object.value===j)?this.generateVariable(T,`${j}b`):b.variable(j):this.generateVariable(T,"b")}async isPathArbitraryLengthDistinct(T,j){return T.get(d.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(T=T.set(d.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:T,operation:void 0}):(T=T.set(d.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:T,operation:l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:E.FACTORY.createDistinct(j),context:T}))})}async predicateStarGraphVariable(T,j,N,x,I){const w=this.generateVariable(E.FACTORY.createPath(T,N,j,x)),S=E.FACTORY.createUnion([E.FACTORY.createPattern(T,w,j,x),E.FACTORY.createPattern(j,w,T,x)]),P=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:I,operation:S})),B=new Set;return{bindingsStream:new u.MultiTransformIterator(P.bindingsStream,{multiTransform:q=>{const V=q.get(x);return B.has(V.value)?new u.EmptyIterator:(B.add(V.value),new u.TransformIterator(async()=>{const $=new u.BufferedIterator;return await this.getObjectsPredicateStar(T,N,V,I,{},$,{count:0}),$.transform({transform(ee,D,F){F(m.bindings([[j,ee],[x,V]])),D()}})},{maxBufferSize:128}))},autoStart:!1}),metadata:P.metadata}}async getObjectsPredicateStarEval(T,j,N,x,I,w){if(x.termType==="Variable")return this.predicateStarGraphVariable(T,N,j,x,I);const S=new y.PathVariableObjectIterator(T,j,x,I,this.mediatorQueryOperation,w);return{bindingsStream:S.transform({autoStart:!1,transform(B,H,q){q(m.bindings([[N,B]])),H()}}),metadata:()=>new Promise(B=>S.getProperty("metadata",H=>B(H())))}}async getObjectsPredicateStar(T,j,N,x,I,w,S){const P=(0,c.termToString)(T);if(I[P])return;w._push(T),I[P]=T,S.count++;const B=this.generateVariable(),H=E.FACTORY.createPath(T,j,B,N),q=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:H,context:x}));return q.bindingsStream.on("data",async V=>{const $=V.get(B);await this.getObjectsPredicateStar($,j,N,x,I,w,S)}),q.bindingsStream.on("end",()=>{--S.count===0&&w.close()}),q.metadata}async getSubjectAndObjectBindingsPredicateStar(T,j,N,x,I,w,S,P,B,H,q){const V=(0,c.termToString)(x)+(0,c.termToString)(w);if(B[V])return;if(q.count++,B[V]=!0,H._push(m.bindings([[T,N],[j,x]])),V in P){const ee=await P[V];for(const D of ee)await this.getSubjectAndObjectBindingsPredicateStar(T,j,N,D,I,w,S,P,B,H,q);--q.count===0&&H.close();return}const $=new Promise(async(ee,D)=>{const F=[],Q=this.generateVariable(),X=E.FACTORY.createPath(x,I,Q,w),W=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:X,context:S}));W.bindingsStream.on("data",async le=>{const ue=le.get(Q);F.push(ue),await this.getSubjectAndObjectBindingsPredicateStar(T,j,N,ue,I,w,S,P,B,H,q)}),W.bindingsStream.on("error",D),W.bindingsStream.on("end",()=>{--q.count===0&&H.close(),ee(F)})});P[V]=$}}e.ActorAbstractPath=E,E.FACTORY=new h.Factory},"../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathVariableObjectIterator=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),d=t("../node_modules/rdf-data-factory/index.js"),u=t("../node_modules/rdf-string/index.js"),a=t("sparqlalgebrajs"),c=new d.DataFactory,h=new a.Factory;class y extends l.BufferedIterator{constructor(m,E,v,T,j,N,x=16){super({autoStart:!0}),this.subject=m,this.predicate=E,this.graph=v,this.context=T,this.mediatorQueryOperation=j,this.maxRunningOperations=x,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this._push(this.subject,N)}_end(m){for(const E of this.runningOperations)E.destroy();super._end(m)}_push(m,E=!0){let v;if(E&&(v=(0,u.termToString)(m),this.termHashes.has(v)))return;const T=c.variable("b");this.pendingOperations.push({variable:T,operation:h.createPath(m,this.predicate,T,this.graph)}),v&&(this.termHashes.set(v,m),super._push(m))}_read(m,E){const v=this;(async function(){for(;v.runningOperations.length<v.maxRunningOperations&&v.pendingOperations.length!==0;){const N=v.pendingOperations.pop(),x=o.ActorQueryOperation.getSafeBindings(await v.mediatorQueryOperation.mediate({operation:N.operation,context:v.context})),I=x.bindingsStream.transform({autoStart:!1,transform(w,S,P){const B=w.get(N.variable);P(B),S()}});I.done||(v.runningOperations.push(I),I.on("error",w=>v.destroy(w)),I.on("readable",()=>{v.readable=!0,v._fillBufferAsync()}),I.on("end",()=>{v.runningOperations.splice(v.runningOperations.indexOf(I),1),v.readable=!0,v._fillBufferAsync()})),v.setProperty("metadata",x.metadata)}let T=0,j;for(;T!==(T=m);)for(let N=0;N<v.runningOperations.length&&m>0;N++)(j=v.runningOperations[N].read())!==null&&(m--,v._push(j));v.runningOperations.length===0&&v.pendingOperations.length===0&&v.close()})().then(()=>{E()},T=>this.destroy(T))}}e.PathVariableObjectIterator=y},"../node_modules/@comunica/actor-abstract-path/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js"),e),l(t("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),e)},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocessSourceToDestination=void 0;const o=t("../node_modules/@comunica/bus-context-preprocess/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js");class d extends o.ActorContextPreprocess{constructor(a){super(a)}async test(a){return!0}async run(a){if(a.context.get(l.KeysRdfResolveQuadPattern.sources)&&!a.context.get(l.KeysRdfUpdateQuads.destination)){const c=a.context.get(l.KeysRdfResolveQuadPattern.sources);if(c.length===1)return{context:a.context.set(l.KeysRdfUpdateQuads.destination,c[0])}}return a}}e.ActorContextPreprocessSourceToDestination=d},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js"),e)},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindingsSha1=void 0;const o=t("../node_modules/@comunica/bus-hash-bindings/lib/index.js"),l=t("../node_modules/hash.js/lib/hash.js"),d=t("../node_modules/rdf-string/index.js"),u=t("../node_modules/canonicalize/lib/canonicalize.js");class a extends o.ActorHashBindings{async test(h){if(!h.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(h){return{hashFunction:y=>(0,l.sha1)().update(u(Object.fromEntries([...y].map(([b,m])=>[(0,d.termToString)(b),(0,d.termToString)(m)])))).digest("hex"),hashCollisions:!0}}}e.ActorHashBindingsSha1=a},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js"),e)},"../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQuery=void 0;const o=t("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js");typeof process>"u"&&(globalThis.process=t("./require-empty.js"));class l extends o.ActorInitQueryBase{}e.ActorInitQuery=l},"../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQueryBase=void 0;const o=t("../node_modules/@comunica/bus-init/lib/index.js");class l extends o.ActorInit{constructor(u){u.contextKeyShortcutsExtensions?.forEach(a=>{if(Object.keys(u.contextKeyShortcuts).some(c=>Object.keys(a).includes(c)))throw new Error("Duplicate keys found while adding `contextKeyShortcutsExtensions`.");u.contextKeyShortcuts={...u.contextKeyShortcuts,...a}}),super(u)}async test(u){return!0}async run(u){throw new Error("ActorInitSparql#run is not supported in the browser.")}}e.ActorInitQueryBase=l},"../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryPhysicalQueryPlanLogger=void 0;const o=t("../node_modules/rdf-string/index.js");class l{constructor(){this.children=new Map}logOperation(u,a,c,h,y,b){const m={actor:y,logicalOperator:u,physicalOperator:a,rawNode:c,children:[],metadata:b};if(this.children.set(c,m.children),this.rootNode){if(!h)throw new Error("Detected more than one parent-less node");const E=this.children.get(h);if(!E)throw new Error("Could not find parent node");E.push(m)}else{if(h)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=m}}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(u){return{logical:u.logicalOperator,physical:u.physicalOperator,...this.getLogicalMetadata(u.rawNode),...u.metadata,...u.children.length>0?{children:u.children.map(a=>this.planNodeToJson(a))}:{}}}getLogicalMetadata(u){if("type"in u){const a=u;switch(a.type){case"pattern":return{pattern:this.quadToString(a)};case"project":return{variables:a.variables.map(c=>c.value)}}}return{}}quadToString(u){return`${(0,o.termToString)(u.subject)} ${(0,o.termToString)(u.predicate)} ${(0,o.termToString)(u.object)}${u.graph.termType==="DefaultGraph"?"":` ${(0,o.termToString)(u.graph)}`}`}}e.MemoryPhysicalQueryPlanLogger=l},"../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/@comunica/core/lib/index.js"),u=t("../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js");class a{constructor(h){this.actorInitQuery=h,this.defaultFunctionArgumentsCache={}}async queryBindings(h,y){return this.queryOfType(h,y,"bindings")}async queryQuads(h,y){return this.queryOfType(h,y,"quads")}async queryBoolean(h,y){return this.queryOfType(h,y,"boolean")}async queryVoid(h,y){return this.queryOfType(h,y,"void")}async queryOfType(h,y,b){const m=await this.query(h,y);if(m.resultType===b)return m.execute();throw new Error(`Query result type '${b}' was expected, while '${m.resultType}' was found.`)}async query(h,y){const b=await this.queryOrExplain(h,y);if("explain"in b)throw new Error("Tried to explain a query when in query-only mode");return b}async explain(h,y,b){return y.explain=b,await this.queryOrExplain(h,y)}async queryOrExplain(h,y){y=y||{};for(const w in y)this.actorInitQuery.contextKeyShortcuts[w]&&(y[this.actorInitQuery.contextKeyShortcuts[w]]=y[w],delete y[w]);let b=new d.ActionContext(y),m={language:"sparql",version:"1.1"};b.has(l.KeysInitQuery.queryFormat)&&(m=b.get(l.KeysInitQuery.queryFormat),b=b.delete(l.KeysInitQuery.queryFormat),m.language==="graphql"&&(b=b.setDefault(l.KeysInitQuery.graphqlSingularizeVariables,{})));const E=b.get(l.KeysInitQuery.baseIRI);b=b.setDefault(l.KeysInitQuery.queryTimestamp,new Date).setDefault(l.KeysRdfResolveQuadPattern.sourceIds,new Map).setDefault(l.KeysCore.log,this.actorInitQuery.logger).setDefault(l.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(l.KeysRdfResolveQuadPattern.hypermediaSourcesAggregatedStores,new Map),b=(await this.actorInitQuery.mediatorContextPreprocess.mediate({context:b})).context;const v=b.get(l.KeysInitQuery.explain);let T;if(typeof h=="string"){b=b.set(l.KeysInitQuery.queryString,h);const w=await this.actorInitQuery.mediatorQueryParse.mediate({context:b,query:h,queryFormat:m,baseIRI:E});T=w.operation,w.baseIRI&&(b=b.set(l.KeysInitQuery.baseIRI,w.baseIRI))}else T=h;if(v==="parsed")return{explain:!0,type:v,data:T};b.has(l.KeysInitQuery.initialBindings)&&(T=(0,o.materializeOperation)(T,b.get(l.KeysInitQuery.initialBindings)),b=b.delete(l.KeysInitQuery.queryString));const j=await this.actorInitQuery.mediatorOptimizeQueryOperation.mediate({context:b,operation:T});if(T=j.operation,b=j.context||b,v==="logical")return{explain:!0,type:v,data:T};b=b.set(l.KeysInitQuery.query,T);let N;v==="physical"&&(N=new u.MemoryPhysicalQueryPlanLogger,b=b.set(l.KeysInitQuery.physicalQueryPlanLogger,N));const x=await this.actorInitQuery.mediatorQueryOperation.mediate({context:b,operation:T});x.context=b;const I=a.internalToFinalResult(x);if(N){switch(I.resultType){case"bindings":await(await I.execute()).toArray();break;case"quads":await(await I.execute()).toArray();break;case"boolean":await I.execute();break;case"void":await I.execute();break}return{explain:!0,type:v,data:N.toJson()}}return I}async getResultMediaTypes(h){return h=d.ActionContext.ensureActionContext(h),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:h,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(h){return h=d.ActionContext.ensureActionContext(h),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:h,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(h,y,b){if(b=d.ActionContext.ensureActionContext(b),!y)switch(h.resultType){case"bindings":y="application/json";break;case"quads":y="application/trig";break;default:y="simple";break}const m={...await a.finalToInternalResult(h),context:b};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:b,handle:m,handleMediaType:y})).handle}invalidateHttpCache(h,y){return y=d.ActionContext.ensureActionContext(y),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:h,context:y})}static internalToFinalResult(h){switch(h.type){case"bindings":return{resultType:"bindings",execute:async()=>h.bindingsStream,metadata:async()=>await h.metadata(),context:h.context};case"quads":return{resultType:"quads",execute:async()=>h.quadStream,metadata:async()=>await h.metadata(),context:h.context};case"boolean":return{resultType:"boolean",execute:async()=>h.execute(),context:h.context};case"void":return{resultType:"void",execute:async()=>h.execute(),context:h.context}}}static async finalToInternalResult(h){switch(h.resultType){case"bindings":return{type:"bindings",bindingsStream:await h.execute(),metadata:async()=>await h.metadata()};case"quads":return{type:"quads",quadStream:await h.execute(),metadata:async()=>await h.metadata()};case"boolean":return{type:"boolean",execute:()=>h.execute()};case"void":return{type:"void",execute:()=>h.execute()}}}}e.QueryEngineBase=a},"../node_modules/@comunica/actor-init-query/lib/index-browser.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(u,a,c,h){h===void 0&&(h=c);var y=Object.getOwnPropertyDescriptor(a,c);(!y||("get"in y?!a.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(u,h,y)}:function(u,a,c,h){h===void 0&&(h=c),u[h]=a[c]}),l=this&&this.__exportStar||function(u,a){for(var c in u)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&o(a,u,c)};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0,l(t("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js"),e),l(t("../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js"),e);var d=t("../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js");Object.defineProperty(e,"QueryEngineBase",{enumerable:!0,get:function(){return d.QueryEngineBase}})},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationBgpToJoin=void 0;const o=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorOptimizeQueryOperation{async test(a){return!0}async run(a){return{operation:l.Util.mapOperation(a.operation,{bgp(h,y){return{recurse:!1,result:y.createJoin(h.patterns)}}}),context:a.context}}}e.ActorOptimizeQueryOperationBgpToJoin=d},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinBgp=void 0;const o=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorOptimizeQueryOperation{async test(a){return!0}async run(a){return{operation:l.Util.mapOperation(a.operation,{join(h,y){return h.input.every(b=>b.type==="bgp")?{recurse:!1,result:y.createBgp(h.input.flatMap(b=>b.patterns))}:{recurse:!1,result:h}}}),context:a.context}}}e.ActorOptimizeQueryOperationJoinBgp=d},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinConnected=void 0;const o=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorOptimizeQueryOperation{async test(a){return!0}async run(a){return{operation:l.Util.mapOperation(a.operation,{join(h,y){return{recurse:!1,result:d.cluster(h,y)}}}),context:a.context}}static cluster(a,c){const h=a.input.map(E=>({inScopeVariables:Object.fromEntries(l.Util.inScopeVariables(E).map(v=>[v.value,!0])),entries:[E]}));let y,b=h;do y=b,b=d.clusterIteration(y);while(y.length!==b.length);const m=b.map(E=>c.createJoin(E.entries));return m.length===1?m[0]:c.createJoin(m,!1)}static clusterIteration(a){const c=[];for(const h of a){let y=!1;for(const b of c)if(d.haveOverlappingVariables(h.inScopeVariables,b.inScopeVariables)){b.entries=[...b.entries,...h.entries],b.inScopeVariables={...b.inScopeVariables,...h.inScopeVariables},y=!0;break}y||c.push({inScopeVariables:h.inScopeVariables,entries:h.entries})}return c}static haveOverlappingVariables(a,c){for(const h of Object.keys(a))if(c[h])return!0;return!1}}e.ActorOptimizeQueryOperationJoinConnected=d},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js"),e)},"../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAsk=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"ask")}async testOperation(u,a){return!0}async runOperation(u,a){const c=await this.mediatorQueryOperation.mediate({operation:u.input,context:a}),{bindingsStream:h}=o.ActorQueryOperation.getSafeBindings(c);return{type:"boolean",execute:async()=>(await h.take(1).toArray()).length===1}}}e.ActorQueryOperationAsk=l},"../node_modules/@comunica/actor-query-operation-ask/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js"),e)},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationBgpJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"bgp")}async testOperation(a,c){return!0}async runOperation(a,c){return this.mediatorQueryOperation.mediate({operation:d.FACTORY.createJoin(a.patterns),context:c})}}e.ActorQueryOperationBgpJoin=d,d.FACTORY=new l.Factory},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationConstruct=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/rdf-terms/index.js"),u=t("sparqlalgebrajs"),a=t("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js");class c extends o.ActorQueryOperationTypedMediated{constructor(y){super(y,"construct")}static getVariables(y){return(0,d.uniqTerms)([].concat.apply([],y.map(b=>(0,d.getVariables)((0,d.getTerms)(b)))))}async testOperation(y,b){return!0}async runOperation(y,b){const m=c.getVariables(y.template),E={type:u.Algebra.types.PROJECT,input:y.input,variables:m},v=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:E,context:b})),T=b.get(l.KeysQueryOperation.localizeBlankNodes),j=T!==void 0?T:!0,N=new a.BindingsToQuadsIterator(y.template,v.bindingsStream,j);return{metadata:()=>v.metadata().then(I=>({...I,order:void 0,cardinality:{type:I.cardinality.type,value:I.cardinality.value*y.template.length},canContainUndefs:!1,availableOrders:void 0})),quadStream:N,type:"quads"}}}e.ActorQueryOperationConstruct=c},"../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsToQuadsIterator=void 0;const o=t("asynciterator"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("../node_modules/rdf-terms/index.js"),u=new l.DataFactory;class a extends o.MultiTransformIterator{constructor(h,y,b=!0){super(y,{autoStart:!1}),this.template=h,this.localizeBlankNodes=b,this.blankNodeCounter=0}static bindTerm(h,y){return y.termType==="Variable"?h.get(y):y}static bindQuad(h,y){try{return(0,d.mapTerms)(y,b=>{const m=a.bindTerm(h,b);if(!m)throw new Error("Unbound term");return m})}catch{}}static localizeBlankNode(h,y){return y.termType==="BlankNode"?u.blankNode(`${y.value}${h}`):y}static localizeQuad(h,y){return(0,d.mapTerms)(y,b=>a.localizeBlankNode(h,b))}bindTemplate(h,y,b){let m=y.map(E=>a.bindQuad.bind(null,h)(E)).filter(Boolean);return this.localizeBlankNodes&&(m=m.map(a.localizeQuad.bind(null,b))),m}_createTransformer(h){return new o.ArrayIterator(this.bindTemplate(h,this.template,this.blankNodeCounter++))}}e.BindingsToQuadsIterator=a},"../node_modules/@comunica/actor-query-operation-construct/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js"),e),l(t("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js"),e)},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDescribeSubject=void 0;const o=t("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=t("../node_modules/rdf-data-factory/index.js"),c=t("sparqlalgebrajs"),h=new a.DataFactory;class y extends l.ActorQueryOperationTypedMediated{constructor(m){super(m,"describe")}async testOperation(m,E){return!0}async runOperation(m,E){const v=m.terms.filter(I=>I.termType!=="Variable").map(I=>{const w=[h.quad(I,h.variable("__predicate"),h.variable("__object"))];return w.forEach(P=>P.type="pattern"),{input:{type:c.Algebra.types.BGP,patterns:w},template:w,type:"construct"}});if(v.length!==m.terms.length){let I=[];m.terms.filter(w=>w.termType==="Variable").forEach((w,S)=>{const P=[h.quad(w,h.variable(`__predicate${S}`),h.variable(`__object${S}`))];P.forEach(B=>B.type="pattern"),I=[...I,...P]}),v.push({input:{type:c.Algebra.types.JOIN,input:[m.input,{type:c.Algebra.types.BGP,patterns:I}]},template:I,type:c.Algebra.types.CONSTRUCT})}const T=E.get(d.KeysQueryOperation.localizeBlankNodes);E=E.set(d.KeysQueryOperation.localizeBlankNodes,T!==void 0?T:!1);const j=(await Promise.all(v.map(I=>this.mediatorQueryOperation.mediate({operation:I,context:E})))).map(l.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new u.UnionIterator(j.map(I=>I.quadStream),{autoStart:!1}),metadata:()=>Promise.all(j.map(I=>I.metadata())).then(I=>o.ActorQueryOperationUnion.unionMetadata(I,!1))}}}e.ActorQueryOperationDescribeSubject=y},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js"),e)},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDistinctHash=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"distinct")}async testOperation(u,a){return!0}async runOperation(u,a){const c=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:u.input,context:a}));return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(a)),metadata:c.metadata}}async newHashFilter(u){const{hashFunction:a}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:u}),c={};return h=>{const y=a(h);return!(y in c)&&(c[y]=!0)}}}e.ActorQueryOperationDistinctHash=l},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js"),e)},"../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationExtend=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/sparqlee/dist/index.js");class u extends l.ActorQueryOperationTypedMediated{constructor(c){super(c,"extend")}async testOperation(c,h){return new d.AsyncEvaluator(c.expression,l.ActorQueryOperation.getAsyncExpressionContext(h,this.mediatorQueryOperation)),!0}async runOperation(c,h){const{expression:y,input:b,variable:m}=c,E=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:b,context:h})),v={...l.ActorQueryOperation.getAsyncExpressionContext(h,this.mediatorQueryOperation)},T=new d.AsyncEvaluator(y,v),j=async(x,I,w)=>{try{const S=await T.evaluate(x),P=x.set(m,S);w(P)}catch(S){(0,d.isExpressionError)(S)?(w(x),this.logWarn(h,`Expression error for extend operation with bindings '${(0,o.bindingsToString)(x)}'`)):N.emit("error",S)}I()},N=E.bindingsStream.transform({autoStart:!1,transform:j});return{type:"bindings",bindingsStream:N,async metadata(){const x=await E.metadata();return{...x,variables:[...x.variables,m]}}}}}e.ActorQueryOperationExtend=u},"../node_modules/@comunica/actor-query-operation-extend/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js"),e)},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFilterSparqlee=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/sparqlee/dist/index.js");class u extends l.ActorQueryOperationTypedMediated{constructor(c){super(c,"filter")}async testOperation(c,h){const y={...l.ActorQueryOperation.getAsyncExpressionContext(h,this.mediatorQueryOperation)};return new d.AsyncEvaluator(c.expression,y),!0}async runOperation(c,h){const y=await this.mediatorQueryOperation.mediate({operation:c.input,context:h}),b=l.ActorQueryOperation.getSafeBindings(y);l.ActorQueryOperation.validateQueryOutput(b,"bindings");const m={...l.ActorQueryOperation.getAsyncExpressionContext(h,this.mediatorQueryOperation)},E=new d.AsyncEvaluator(c.expression,m),v=async(j,N,x)=>{try{await E.evaluateAsEBV(j)&&x(j)}catch(I){(0,d.isExpressionError)(I)?this.logWarn(h,"Error occurred while filtering.",()=>({error:I,bindings:(0,o.bindingsToString)(j)})):T.emit("error",I)}N()},T=b.bindingsStream.transform({transform:v});return{type:"bindings",bindingsStream:T,metadata:b.metadata}}}e.ActorQueryOperationFilterSparqlee=u},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFromQuad=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"from")}static copyOperation(a,c){const h={};for(const y of Object.keys(a))Array.isArray(a[y])&&y!=="template"?y==="variables"?h[y]=a[y]:h[y]=a[y].map(c):d.ALGEBRA_TYPES.includes(a[y].type)?h[y]=c(a[y]):h[y]=a[y];return h}static applyOperationDefaultGraph(a,c){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){if(a.type==="bgp")return d.joinOperations(a.patterns.map(y=>{if(y.graph.termType!=="DefaultGraph")return d.FACTORY.createBgp([y]);const b=c.map(m=>d.FACTORY.createBgp([d.FACTORY.createPattern(y.subject,y.predicate,y.object,m)]));return d.unionOperations(b)}));if(a.graph.termType!=="DefaultGraph")return a;const h=c.map(y=>a.type==="path"?d.FACTORY.createPath(a.subject,a.predicate,a.object,y):d.FACTORY.createPattern(a.subject,a.predicate,a.object,y));return d.unionOperations(h)}return d.copyOperation(a,h=>this.applyOperationDefaultGraph(h,c))}static applyOperationNamedGraph(a,c,h){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){const y=a.type==="bgp"?a.patterns[0].graph:a.graph;if(y.termType==="DefaultGraph")return{type:l.Algebra.types.BGP,patterns:[]};if(y.termType==="Variable"){if(c.length===1){const m=c[0],E={};E[`?${y.value}`]=m;const v=d.FACTORY.createValues([y],[E]);let T;return a.type==="bgp"?T=d.FACTORY.createBgp(a.patterns.map(j=>d.FACTORY.createPattern(j.subject,j.predicate,j.object,m))):a.type==="path"?T=d.FACTORY.createPath(a.subject,a.predicate,a.object,m):T=d.FACTORY.createPattern(a.subject,a.predicate,a.object,m),d.FACTORY.createJoin([v,T])}return d.unionOperations(c.map(m=>d.applyOperationNamedGraph(a,[m],h)))}return[...c,...h].some(m=>m.equals(y))?a:{type:l.Algebra.types.BGP,patterns:[]}}return d.copyOperation(a,y=>this.applyOperationNamedGraph(y,c,h))}static joinOperations(a){if(a.length===1)return a[0];if(a.length>1)return d.FACTORY.createJoin(a);throw new Error("A join can only be applied on at least one operation")}static unionOperations(a){if(a.length===1)return a[0];if(a.length>1)return d.FACTORY.createUnion(a);throw new Error("A union can only be applied on at least one operation")}static createOperation(a){let c=a.input;return a.default.length>0&&(c=d.applyOperationDefaultGraph(c,a.default)),(a.named.length>0||a.default.length>0)&&(c=d.applyOperationNamedGraph(c,a.named,a.default)),c}async testOperation(a,c){return!0}async runOperation(a,c){const h=d.createOperation(a);return this.mediatorQueryOperation.mediate({operation:h,context:c})}}e.ActorQueryOperationFromQuad=d,d.FACTORY=new l.Factory,d.ALGEBRA_TYPES=Object.keys(l.Algebra.types).map(u=>l.Algebra.types[u])},"../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js"),e)},"../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationGroup=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),d=t("../node_modules/sparqlee/dist/index.js"),u=t("../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js");class a extends o.ActorQueryOperationTypedMediated{constructor(h){super(h,"group")}async testOperation(h,y){for(const b of h.aggregates)new d.AsyncEvaluator(b.expression,o.ActorQueryOperation.getAsyncExpressionContext(y));return!0}async runOperation(h,y){const{hashFunction:b}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:y}),{input:m,aggregates:E}=h,v=await this.mediatorQueryOperation.mediate({operation:m,context:y}),T=o.ActorQueryOperation.getSafeBindings(v),j=[...h.variables,...E.map(I=>I.variable)],N=o.ActorQueryOperation.getAsyncExpressionContext(y);return{type:"bindings",bindingsStream:new l.TransformIterator(()=>new Promise((I,w)=>{const S=new u.GroupsState(b,h,N);T.bindingsStream.on("end",async()=>{try{const P=new l.ArrayIterator(await S.collectResults(),{autoStart:!1});I(P)}catch(P){w(P)}}),T.bindingsStream.on("error",w),T.bindingsStream.on("data",P=>{S.consumeBindings(P).catch(w)})}),{autoStart:!1}),metadata:async()=>({...await T.metadata(),variables:j})}}}e.ActorQueryOperationGroup=a},"../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupsState=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("../node_modules/sparqlee/dist/index.js"),u=new l.DataFactory,a=new o.BindingsFactory;class c{constructor(y,b,m){this.hashFunction=y,this.pattern=b,this.sparqleeConfig=m,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(E=>E.value)),this.distinctHashes=b.aggregates.some(({distinct:E})=>E)?new Map:null,this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(y){const b=this.resultCheck();if(b)return b;this.waitCounter++;const m=y.filter((j,N)=>this.groupVariables.has(N.value)),E=this.hashBindings(m);let v=this.groupsInitializer.get(E),T;if(!v)v=(async()=>{const j={};if(await Promise.all(this.pattern.aggregates.map(async x=>{const I=x.variable.value;j[I]=new d.AsyncAggregateEvaluator(x,this.sparqleeConfig),await j[I].put(y)})),this.distinctHashes){const x=this.hashBindings(y);this.distinctHashes.set(E,new Set([x]))}const N={aggregators:j,bindings:m};return this.groups.set(E,N),this.subtractWaitCounterAndCollect(),N})(),this.groupsInitializer.set(E,v),T=v;else{const j=v;T=(async()=>{const N=await j;await Promise.all(this.pattern.aggregates.map(async x=>{if(x.distinct){const w=this.hashBindings(y);if(this.distinctHashes.get(E).has(w))return;this.distinctHashes.get(E).add(w)}const I=x.variable.value;await N.aggregators[I].put(y)}))})().then(()=>{this.subtractWaitCounterAndCollect()})}return T}subtractWaitCounterAndCollect(){--this.waitCounter===0&&this.handleResultCollection()}handleResultCollection(){let y=[...this.groups].map(([b,m])=>{const{bindings:E,aggregators:v}=m;let T=E;for(const j in v){const N=v[j].result();N&&(T=T.set(u.variable(j),N))}return T});if(y.length===0&&this.groupVariables.size===0){const b=[];for(const m of this.pattern.aggregates){const E=m.variable,v=d.AsyncAggregateEvaluator.emptyValue(m);v!==void 0&&b.push([E,v])}y=[a.bindings(b)]}this.waitResolver(y)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const y=this.resultCheck();if(y)return y;this.resultHasBeenCalled=!0;const b=new Promise(m=>{this.waitResolver=m});return this.subtractWaitCounterAndCollect(),b}hashBindings(y){return this.hashFunction(y)}}e.GroupsState=c},"../node_modules/@comunica/actor-query-operation-group/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js"),e)},"../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"join")}async testOperation(u,a){return!0}async runOperation(u,a){const c=(await Promise.all(u.input.map(async h=>({output:await this.mediatorQueryOperation.mediate({operation:h,context:a}),operation:h})))).map(({output:h,operation:y})=>({output:o.ActorQueryOperation.getSafeBindings(h),operation:y}));return this.mediatorJoin.mediate({type:"inner",entries:c,context:a})}}e.ActorQueryOperationJoin=l},"../node_modules/@comunica/actor-query-operation-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLeftJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/sparqlee/dist/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"leftjoin")}async testOperation(a,c){return!0}async runOperation(a,c){const h=(await Promise.all(a.input.map(async b=>({output:await this.mediatorQueryOperation.mediate({operation:b,context:c}),operation:b})))).map(({output:b,operation:m})=>({output:o.ActorQueryOperation.getSafeBindings(b),operation:m})),y=await this.mediatorJoin.mediate({type:"optional",entries:h,context:c});if(a.expression){const m=(await h[1].output.metadata()).variables,E={...o.ActorQueryOperation.getAsyncExpressionContext(c)},v=new l.AsyncEvaluator(a.expression,E),T=y.bindingsStream.transform({autoStart:!1,transform:async(j,N,x)=>{if(!m.every(I=>j.has(I.value)))return x(j),N();try{await v.evaluateAsEBV(j)&&x(j)}catch(I){(0,l.isExpressionError)(I)?this.logWarn(c,"Error occurred while filtering.",()=>({error:I,bindings:j})):T.emit("error",I)}N()}});y.bindingsStream=T}return y}}e.ActorQueryOperationLeftJoin=d},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMinus=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"minus")}async testOperation(u,a){return!0}async runOperation(u,a){const c=(await Promise.all(u.input.map(async h=>({output:await this.mediatorQueryOperation.mediate({operation:h,context:a}),operation:h})))).map(({output:h,operation:y})=>({output:o.ActorQueryOperation.getSafeBindings(h),operation:y}));return this.mediatorJoin.mediate({type:"minus",entries:c,context:a})}}e.ActorQueryOperationMinus=l},"../node_modules/@comunica/actor-query-operation-minus/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js"),e)},"../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationNop=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("asynciterator"),u=new o.BindingsFactory;class a extends l.ActorQueryOperationTypedMediated{constructor(h){super(h,"nop")}async testOperation(h,y){return!0}async runOperation(h,y){return{bindingsStream:new d.SingletonIterator(u.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}e.ActorQueryOperationNop=a},"../node_modules/@comunica/actor-query-operation-nop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js"),e)},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationOrderBySparqlee=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs"),d=t("../node_modules/sparqlee/dist/index.js"),u=t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js");class a extends o.ActorQueryOperationTypedMediated{constructor(h){super(h,"orderby"),this.window=h.window??Number.POSITIVE_INFINITY}async testOperation(h,y){for(let b of h.expressions)b=this.extractSortExpression(b),new d.AsyncEvaluator(b,o.ActorQueryOperation.getAsyncExpressionContext(y));return!0}async runOperation(h,y){const b=await this.mediatorQueryOperation.mediate({operation:h.input,context:y}),m=o.ActorQueryOperation.getSafeBindings(b),E={window:this.window},v={...o.ActorQueryOperation.getAsyncExpressionContext(y)};let{bindingsStream:T}=m;for(let j=h.expressions.length-1;j>=0;j--){let N=h.expressions[j];const x=this.isAscending(N);N=this.extractSortExpression(N);const I=new d.AsyncEvaluator(N,v),w=async(B,H,q)=>{try{const V=await I.evaluate(B);q({bindings:B,result:V})}catch(V){(0,d.isExpressionError)(V)||T.emit("error",V),q({bindings:B,result:void 0})}H()},S=T.transform({transform:w});T=new u.SortIterator(S,(B,H)=>(0,d.orderTypes)(B.result,H.result,x),E).map(({bindings:B,result:H})=>B)}return{type:"bindings",bindingsStream:T,metadata:m.metadata}}extractSortExpression(h){const{expressionType:y,operator:b}=h;return y!==l.Algebra.expressionTypes.OPERATOR?h:b==="desc"?h.args[0]:h}isAscending(h){const{expressionType:y,operator:b}=h;return y!==l.Algebra.expressionTypes.OPERATOR?!0:b!=="desc"}}e.ActorQueryOperationOrderBySparqlee=a},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortIterator=void 0;const o=t("asynciterator");class l extends o.TransformIterator{constructor(u,a,c){super(u,c);const h=c&&c.window;this.windowLength=Number.isFinite(h)&&h>0?h:Number.POSITIVE_INFINITY,this.sort=a,this.sorted=[]}_read(u,a){let c,{length:h}=this.sorted;for(;h!==this.windowLength&&(c=this.source.read(),c!==null);){let y=0,b=h-1,m,E;for(;y<=b;)m=Math.trunc((y+b)/2),E=this.sort(c,this.sorted[m]),E<0?y=m+1:E>0?b=m-1:(y=m,b=-1);this.sorted.splice(y,0,c),h++}h===this.windowLength&&this._push(this.sorted.pop()),a()}_flush(u){let{length:a}=this.sorted;for(;a--;)this._push(this.sorted.pop());u()}}e.SortIterator=l},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathAlt=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs");class c extends o.ActorAbstractPath{constructor(y){super(y,a.Algebra.types.ALT)}async runOperation(y,b){const m=y.predicate,E=(await Promise.all(m.input.map(j=>this.mediatorQueryOperation.mediate({context:b,operation:o.ActorAbstractPath.FACTORY.createPath(y.subject,j,y.object,y.graph)})))).map(d.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new u.UnionIterator(E.map(j=>j.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(E.map(j=>j.metadata())).then(j=>l.ActorQueryOperationUnion.unionMetadata(j,!0))}}}e.ActorQueryOperationPathAlt=c},"../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js"),e)},"../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathInv=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorAbstractPath{constructor(a){super(a,l.Algebra.types.INV)}async runOperation(a,c){const h=a.predicate,y=o.ActorAbstractPath.FACTORY.createPath(a.object,h.path,a.subject,a.graph);return this.mediatorQueryOperation.mediate({operation:y,context:c})}}e.ActorQueryOperationPathInv=d},"../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js"),e)},"../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathLink=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorAbstractPath{constructor(a){super(a,l.Algebra.types.LINK)}async runOperation(a,c){const h=a.predicate,y=o.ActorAbstractPath.FACTORY.createPattern(a.subject,h.iri,a.object,a.graph);return this.mediatorQueryOperation.mediate({operation:y,context:c})}}e.ActorQueryOperationPathLink=d},"../node_modules/@comunica/actor-query-operation-path-link/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js"),e)},"../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathNps=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("sparqlalgebrajs");class u extends o.ActorAbstractPath{constructor(c){super(c,d.Algebra.types.NPS)}async runOperation(c,h){const y=c.predicate,b=this.generateVariable(c),m=o.ActorAbstractPath.FACTORY.createPattern(c.subject,b,c.object,c.graph),E=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:m,context:h}));return{type:"bindings",bindingsStream:E.bindingsStream.transform({filter(T){return!y.iris.some(j=>j.equals(T.get(b)))},transform(T,j,N){N(T.delete(b)),j()}}),metadata:E.metadata}}}e.ActorQueryOperationPathNps=u},"../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js"),e)},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathOneOrMore=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs"),c=new l.BindingsFactory;class h extends o.ActorAbstractPath{constructor(b){super(b,a.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(b,m){const E=await this.isPathArbitraryLengthDistinct(m,b);if(E.operation)return E.operation;m=E.context;const v=b.predicate;if(b.subject.termType!=="Variable"&&b.object.termType==="Variable"){const x=b.object,I=await this.getObjectsPredicateStarEval(b.subject,v.path,x,b.graph,m,!1),w=b.graph.termType==="Variable"?[x,b.graph]:[x];return{type:"bindings",bindingsStream:I.bindingsStream,metadata:async()=>({...await I.metadata(),variables:w})}}if(b.subject.termType==="Variable"&&b.object.termType==="Variable"){const x=o.ActorAbstractPath.FACTORY.createDistinct(o.ActorAbstractPath.FACTORY.createPath(b.subject,b.predicate.path,b.object,b.graph)),I=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:m,operation:x})),w=b.subject,S=b.object,P={},B=new u.MultiTransformIterator(I.bindingsStream,{multiTransform:q=>{const V=q.get(w),$=q.get(S),ee=b.graph.termType==="Variable"?q.get(b.graph):b.graph;return new u.TransformIterator(async()=>{const D=new u.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(w,S,V,$,v.path,ee,m,P,{},D,{count:0}),D.transform({transform(F,Q,X){b.graph.termType==="Variable"&&(F=F.set(b.graph,ee)),X(F),Q()}})},{maxBufferSize:128})},autoStart:!1}),H=b.graph.termType==="Variable"?[w,S,b.graph]:[w,S];return{type:"bindings",bindingsStream:B,metadata:async()=>({...await I.metadata(),variables:H})}}if(b.subject.termType==="Variable"&&b.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:m,operation:o.ActorAbstractPath.FACTORY.createPath(b.object,o.ActorAbstractPath.FACTORY.createOneOrMorePath(o.ActorAbstractPath.FACTORY.createInv(v.path)),b.subject,b.graph)});const T=this.generateVariable(),j=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:m,operation:o.ActorAbstractPath.FACTORY.createPath(b.subject,v,T,b.graph)}));return{type:"bindings",bindingsStream:j.bindingsStream.transform({filter:x=>b.object.equals(x.get(T)),transform(x,I,w){const S=b.graph.termType==="Variable"?c.bindings([[b.graph,x.get(b.graph)]]):c.bindings();w(S),I()}}),metadata:async()=>({...await j.metadata(),variables:b.graph.termType==="Variable"?[b.graph]:[]})}}}e.ActorQueryOperationPathOneOrMore=h},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathSeq=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("sparqlalgebrajs");class u extends o.ActorAbstractPath{constructor(c){super(c,d.Algebra.types.SEQ)}async runOperation(c,h){const y=c.predicate;let b=c.subject;const m=[],E=await Promise.all(y.input.map((j,N)=>{const x=N===y.input.length-1?c.object:this.generateVariable(c,`b${N}`),I=o.ActorAbstractPath.FACTORY.createPath(b,j,x,c.graph),w=this.mediatorQueryOperation.mediate({context:h,operation:I});return b=x,N<y.input.length-1&&m.push(x),{output:w,operation:I}}).map(async({output:j,operation:N})=>({output:l.ActorQueryOperation.getSafeBindings(await j),operation:N}))),v=l.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:E,context:h}));return{type:"bindings",bindingsStream:v.bindingsStream.transform({transform(j,N,x){for(const I of m)j=j.delete(I);x(j),N()}}),async metadata(){const j=await v.metadata(),N=j.variables.filter(x=>!m.some(I=>I.value===x.value));return{...j,variables:N}}}}}e.ActorQueryOperationPathSeq=u},"../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrMore=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("../node_modules/rdf-string/index.js"),c=t("sparqlalgebrajs"),h=new l.BindingsFactory;class y extends o.ActorAbstractPath{constructor(m){super(m,c.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(m,E){const v=await this.isPathArbitraryLengthDistinct(E,m);if(v.operation)return v.operation;E=v.context;const T=m.predicate,j=m.subject.termType==="Variable",N=m.object.termType==="Variable";if(m.subject.termType==="Variable"&&m.object.termType==="Variable"){const B=this.generateVariable(m),H=o.ActorAbstractPath.FACTORY.createPattern(m.subject,B,m.object,m.graph),q=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:E,operation:H})),V=m.subject,$=m.object,ee=new Set,D={},F=new u.MultiTransformIterator(q.bindingsStream,{multiTransform:X=>{const W=X.get(V),le=X.get($),ue=m.graph.termType==="Variable"?X.get(m.graph):m.graph,de=(0,a.termToString)(W)+(0,a.termToString)(ue),ce=(0,a.termToString)(le)+(0,a.termToString)(ue);return new u.TransformIterator(async()=>{if(ee.has(de)&&ee.has(ce))return new u.EmptyIterator;const ge=new u.BufferedIterator,Oe={count:0};return ee.has(de)||(ee.add(de),await this.getSubjectAndObjectBindingsPredicateStar(V,$,W,W,T.path,ue,E,D,{},ge,Oe)),ee.has(ce)||(ee.add(ce),await this.getSubjectAndObjectBindingsPredicateStar(V,$,le,le,T.path,ue,E,D,{},ge,Oe)),ge.transform({transform(je,Ie,Se){m.graph.termType==="Variable"&&(je=je.set(m.graph,ue)),Se(je),Ie()}})})}}),Q=m.graph.termType==="Variable"?[V,m.object,m.graph]:[V,m.object];return{type:"bindings",bindingsStream:F,metadata:async()=>({...await q.metadata(),variables:Q})}}if(!j&&!N){const B=this.generateVariable(),H=await this.getObjectsPredicateStarEval(m.subject,T.path,B,m.graph,E,!0);return{type:"bindings",bindingsStream:H.bindingsStream.transform({filter:V=>m.object.equals(V.get(B)),transform(V,$,ee){const D=m.graph.termType==="Variable"?h.bindings([[m.graph,V.get(m.graph)]]):h.bindings();ee(D),$()}}),metadata:async()=>({...await H.metadata(),variables:m.graph.termType==="Variable"?[m.graph]:[]})}}const x=j?m.object:m.subject,I=j?m.subject:m.object,w=j?o.ActorAbstractPath.FACTORY.createInv(T.path):T.path,S=await this.getObjectsPredicateStarEval(x,w,I,m.graph,E,!0),P=m.graph.termType==="Variable"?[I,m.graph]:[I];return{type:"bindings",bindingsStream:S.bindingsStream,metadata:async()=>({...await S.metadata(),variables:P})}}}e.ActorQueryOperationPathZeroOrMore=y},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrOne=void 0;const o=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs"),c=new l.BindingsFactory;class h extends o.ActorAbstractPath{constructor(b){super(b,a.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(b,m){const E=b.predicate,v=b.subject.termType==="Variable",T=b.object.termType==="Variable",j=[];if(!v&&!T&&b.subject.equals(b.object))return{type:"bindings",bindingsStream:new u.SingletonIterator(c.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};if(v&&T)throw new Error("ZeroOrOne path expressions with 2 variables not supported yet");const N=await this.isPathArbitraryLengthDistinct(m,b);if(N.operation)return N.operation;m=N.context,b.subject.termType==="Variable"&&j.push(c.bindings([[b.subject,b.object]])),b.object.termType==="Variable"&&j.push(c.bindings([[b.object,b.subject]]));const x=d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:m,operation:o.ActorAbstractPath.FACTORY.createPath(b.subject,E.path,b.object,b.graph)}));return{type:"bindings",bindingsStream:x.bindingsStream.prepend(j),metadata:x.metadata}}}e.ActorQueryOperationPathZeroOrOne=h},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js"),e)},"../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationProject=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/data-factory/lib/index.js"),d=t("../node_modules/rdf-data-factory/index.js"),u=new d.DataFactory;class a extends o.ActorQueryOperationTypedMediated{constructor(h){super(h,"project")}async testOperation(h,y){return!0}async runOperation(h,y){const b=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:h.input,context:y})),m=await b.metadata(),E=h.variables,v=m.variables.filter(x=>!E.some(I=>x.value===I.value)),T=E.filter(x=>!m.variables.some(I=>x.value===I.value));if(T.length>0)throw new Error(`Variables '${T.map(x=>`?${x.value}`)}' are used in the projection result, but are not assigned.`);let j=v.length===0?b.bindingsStream:b.bindingsStream.transform({map(x){for(const I of v)x=x.delete(I);return x},autoStart:!1}),N=0;return j=j.transform({map(x){N++;const I=new Map;return x.map(w=>{if(w instanceof l.BlankNodeBindingsScoped){let S=I.get(w.value);return S||(S=u.blankNode(`${w.value}${N}`),I.set(w.value,S)),S}return w})},autoStart:!1}),{type:"bindings",bindingsStream:j,metadata:async()=>({...m,variables:E})}}}e.ActorQueryOperationProject=a},"../node_modules/@comunica/actor-query-operation-project/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js"),e)},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationQuadpattern=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("../node_modules/rdf-data-factory/index.js"),a=t("../node_modules/rdf-terms/index.js"),c=t("sparqlalgebrajs"),h=new o.BindingsFactory,y=new u.DataFactory,b=new c.Factory;class m extends l.ActorQueryOperationTyped{constructor(v){super(v,"pattern")}static isTermVariable(v){return v.termType==="Variable"}static getVariables(v){return(0,a.uniqTerms)((0,a.getTerms)(v).filter(m.isTermVariable))}static getDuplicateElementLinks(v){const T={};let j=!1;for(const x of a.QUAD_TERM_NAMES)if(v[x].termType==="Variable"){const I=v[x].value,w=(T[I]||(T[I]=[])).push(x);j=j||w>1}if(!j)return;const N={};for(const x in T){const I=T[x],w=I.slice(1);w.length>0&&(N[I[0]]=w)}return N}static validateMetadata(v){for(const T of["cardinality","canContainUndefs"])if(!(T in v))throw new Error(`Invalid metadata: missing ${T} in ${JSON.stringify(v)}`);return v}static getMetadata(v,T,j){return()=>new Promise((N,x)=>{v.getProperty("metadata",I=>N(I)),v.on("error",x)}).then(N=>("canContainUndefs"in N||(N.canContainUndefs=!1),m.quadsMetadataToBindingsMetadata(m.validateMetadata(N),T,j)))}static quadsMetadataToBindingsMetadata(v,T,j){return{...v,order:v.order?m.quadsOrderToBindingsOrder(v.order,T):void 0,availableOrders:v.availableOrders?v.availableOrders.map(N=>({cost:N.cost,terms:m.quadsOrderToBindingsOrder(N.terms,T)})):void 0,variables:j}}static quadsOrderToBindingsOrder(v,T){const j={};return v.map(N=>{const x=T[N.term];if(x&&!j[x])return j[x]=!0,{term:y.variable(x),direction:N.direction}}).filter(N=>!!N)}async testOperation(v,T){return!0}async runOperation(v,T){v.context&&(T=T.merge(v.context));let j=v;const N=this.unionDefaultGraph||T.get(d.KeysQueryOperation.unionDefaultGraph);v.graph.termType==="DefaultGraph"&&N&&(j=b.createPattern(v.subject,v.predicate,v.object,y.variable("__comunica:defaultGraph")));const x=await this.mediatorResolveQuadPattern.mediate({pattern:j,context:T}),I=m.getVariables(v),w=(0,a.reduceTerms)(v,(H,q,V)=>(q.termType==="Variable"&&(H[V]=q.value),H),{}),S=(H,q,V)=>{const $=w[V];return $&&H.push([y.variable($),q]),H},P=m.getMetadata(x.data,w,I);return{type:"bindings",bindingsStream:new l.ClosableTransformIterator(async()=>{let H=x.data;const q=m.getDuplicateElementLinks(v);return v.graph.termType==="Variable"&&!N&&(H=H.filter(V=>V.graph.termType!=="DefaultGraph")),q&&(H=H.filter(V=>{for(const $ of a.TRIPLE_TERM_NAMES)for(const ee of q[$]||[])if(!V[$].equals(V[ee]))return!1;return!0})),H.map(V=>h.bindings((0,a.reduceTerms)(V,S,[])))},{autoStart:!1,onClose:()=>x.data.destroy()}),metadata:P}}}e.ActorQueryOperationQuadpattern=m},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js"),e)},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationReducedHash=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/actor-query-operation-reduced-hash/node_modules/lru-cache/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"reduced")}async testOperation(a,c){return!0}async runOperation(a,c){const h=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a.input,context:c}));return{type:"bindings",bindingsStream:h.bindingsStream.filter(await this.newHashFilter(c)),metadata:h.metadata}}async newHashFilter(a){const{hashFunction:c}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:a}),h=new l({max:this.cacheSize});return y=>{const b=c(y);return h.has(b)?!1:(h.set(b,!0),!0)}}}e.ActorQueryOperationReducedHash=d},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js"),e)},"../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationService=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=new o.BindingsFactory;class c extends l.ActorQueryOperationTypedMediated{constructor(y){super(y,"service")}async testOperation(y,b){if(y.name.termType!=="NamedNode")throw new Error(`${this.name} can only query services by IRI, while a ${y.name.termType} was given.`);return!0}async runOperation(y,b){const m=y.name.value;let E=b.delete(d.KeysRdfResolveQuadPattern.source).delete(d.KeysRdfResolveQuadPattern.sources).delete(d.KeysInitQuery.queryString);const v=this.forceSparqlEndpoint?"sparql":void 0;E=E.set(d.KeysRdfResolveQuadPattern.sources,[{type:v,value:m}]);let T;try{T=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:y.input,context:E}))}catch(j){if(y.silent)T={bindingsStream:new u.SingletonIterator(a.bindings()),type:"bindings",metadata:async()=>({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};else throw j}return T}}e.ActorQueryOperationService=c},"../node_modules/@comunica/actor-query-operation-service/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js"),e)},"../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationSlice=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"slice")}async testOperation(a,c){return!0}async runOperation(a,c){a.length&&(c=c.set(l.KeysQueryOperation.limitIndicator,a.length));const h=await this.mediatorQueryOperation.mediate({operation:a.input,context:c});if(h.type==="bindings")return{type:"bindings",bindingsStream:this.sliceStream(h.bindingsStream,a),metadata:this.sliceMetadata(h,a)};if(h.type==="quads")return{type:"quads",quadStream:this.sliceStream(h.quadStream,a),metadata:this.sliceMetadata(h,a)};throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${h.type}'`)}sliceStream(a,c){const h=!!c.length||c.length===0,{start:y}=c,b=h?c.start+c.length-1:Number.POSITIVE_INFINITY;return a.transform({offset:y,limit:Math.max(b-y+1,0),autoStart:!1})}sliceMetadata(a,c){const h=!!c.length||c.length===0;return()=>a.metadata().then(y=>{const b={...y.cardinality};return Number.isFinite(b.value)&&(b.value=Math.max(0,b.value-c.start),h&&(b.value=Math.min(b.value,c.length))),{...y,cardinality:b}})}}e.ActorQueryOperationSlice=d},"../node_modules/@comunica/actor-query-operation-slice/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js"),e)},"../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUnion=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),d=t("../node_modules/rdf-terms/index.js");class u extends o.ActorQueryOperationTypedMediated{constructor(c){super(c,"union")}static unionVariables(c){return(0,d.uniqTerms)(c.flat())}static unionMetadata(c,h){const y={type:"exact",value:0};for(const m of c)if(m.cardinality.value&&Number.isFinite(m.cardinality.value)||m.cardinality.value===0)m.cardinality.type==="estimate"&&(y.type="estimate"),y.value+=m.cardinality.value;else{y.type="estimate",y.value=Number.POSITIVE_INFINITY;break}const b={cardinality:y,canContainUndefs:c.some(m=>m.canContainUndefs)};return h&&(b.variables=u.unionVariables(c.map(m=>m.variables))),b}async testOperation(c,h){return!0}async runOperation(c,h){const y=(await Promise.all(c.input.map(E=>this.mediatorQueryOperation.mediate({operation:E,context:h})))).map(o.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new l.UnionIterator(y.map(E=>E.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(y.map(E=>E.metadata())).then(E=>u.unionMetadata(E,!0))}}}e.ActorQueryOperationUnion=u},"../node_modules/@comunica/actor-query-operation-union/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js"),e)},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAddRewrite=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("sparqlalgebrajs"),u=new l.DataFactory;class a extends o.ActorQueryOperationTypedMediated{constructor(h){super(h,"add"),this.factory=new d.Factory}async testOperation(h,y){return o.ActorQueryOperation.throwOnReadOnly(y),!0}runOperation(h,y){const b=h.destination==="DEFAULT"?u.defaultGraph():h.destination,m=h.source==="DEFAULT"?u.defaultGraph():h.source,E=this.factory.createDeleteInsert(void 0,[this.factory.createPattern(u.variable("s"),u.variable("p"),u.variable("o"),b)],this.factory.createPattern(u.variable("s"),u.variable("p"),u.variable("o"),m));return this.mediatorQueryOperation.mediate({operation:E,context:y})}}e.ActorQueryOperationAddRewrite=a},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationClear=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=new l.DataFactory;class u extends o.ActorQueryOperationTypedMediated{constructor(c){super(c,"clear")}async testOperation(c,h){return o.ActorQueryOperation.throwOnReadOnly(h),!0}async runOperation(c,h){let y;c.source==="DEFAULT"?y=d.defaultGraph():typeof c.source=="string"?y=c.source:y=[c.source];const{execute:b}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:y,requireExistence:!c.silent,dropGraphs:!1},context:h});return{type:"void",execute:b}}}e.ActorQueryOperationClear=u},"../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js"),e)},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateCompositeUpdate=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"compositeupdate")}async testOperation(u,a){return o.ActorQueryOperation.throwOnReadOnly(a),!0}async runOperation(u,a){return{type:"void",execute:()=>(async()=>{for(const h of u.updates)await o.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:h,context:a})).execute()})()}}}e.ActorQueryOperationUpdateCompositeUpdate=l},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCopyRewrite=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"copy"),this.factory=new l.Factory}async testOperation(a,c){return o.ActorQueryOperation.throwOnReadOnly(c),!0}runOperation(a,c){if(typeof a.destination=="string"&&typeof a.source=="string"&&a.destination===a.source||typeof a.destination!="string"&&typeof a.source!="string"&&a.destination.equals(a.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const h=this.factory.createCompositeUpdate([this.factory.createDrop(a.destination,!0),this.factory.createAdd(a.source,a.destination,a.silent)]);return this.mediatorQueryOperation.mediate({operation:h,context:c})}}e.ActorQueryOperationCopyRewrite=d},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCreate=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class l extends o.ActorQueryOperationTypedMediated{constructor(u){super(u,"create")}async testOperation(u,a){return o.ActorQueryOperation.throwOnReadOnly(a),!0}async runOperation(u,a){const{execute:c}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[u.source],requireNonExistence:!u.silent},context:a});return{type:"void",execute:c}}}e.ActorQueryOperationCreate=l},"../node_modules/@comunica/actor-query-operation-update-create/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateDeleteInsert=void 0;const o=t("../node_modules/@comunica/actor-query-operation-construct/lib/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/index.js"),d=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),u=t("asynciterator"),a=new l.BindingsFactory;class c extends d.ActorQueryOperationTypedMediated{constructor(y){super(y,"deleteinsert"),this.blankNodeCounter=0}async testOperation(y,b){return d.ActorQueryOperation.throwOnReadOnly(b),!0}async runOperation(y,b){const m=y.where?d.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:y.where,context:b})).bindingsStream:new u.ArrayIterator([a.bindings()],{autoStart:!1});let E,v;y.insert&&(E=new o.BindingsToQuadsIterator(y.insert.map(o.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),m.clone(),!1),this.blankNodeCounter++),y.delete&&(v=new o.BindingsToQuadsIterator(y.delete.map(o.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),m.clone(),!1),this.blankNodeCounter++);const{execute:T}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:E,quadStreamDelete:v,context:b});return{type:"void",execute:T}}}e.ActorQueryOperationUpdateDeleteInsert=c},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js"),e)},"../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDrop=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=new l.DataFactory;class u extends o.ActorQueryOperationTypedMediated{constructor(c){super(c,"drop")}async testOperation(c,h){return o.ActorQueryOperation.throwOnReadOnly(h),!0}async runOperation(c,h){let y;c.source==="DEFAULT"?y=d.defaultGraph():typeof c.source=="string"?y=c.source:y=[c.source];const{execute:b}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:y,requireExistence:!c.silent,dropGraphs:!0},context:h});return{type:"void",execute:b}}}e.ActorQueryOperationDrop=u},"../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js"),e)},"../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLoad=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/rdf-data-factory/index.js"),u=t("sparqlalgebrajs"),a=new d.DataFactory;class c extends o.ActorQueryOperationTypedMediated{constructor(y){super(y,"load"),this.factory=new u.Factory,this.constructOperation=this.factory.createConstruct(this.factory.createPattern(a.variable("s"),a.variable("p"),a.variable("o")),[this.factory.createPattern(a.variable("s"),a.variable("p"),a.variable("o"))])}async testOperation(y,b){return o.ActorQueryOperation.throwOnReadOnly(b),!0}async runOperation(y,b){let m=b.set(l.KeysRdfResolveQuadPattern.sources,[y.source.value]);y.silent&&(m=m.set(l.KeysInitQuery.lenient,!0));let v=c.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.constructOperation,context:m})).quadStream;y.destination&&(v=v.map(j=>a.quad(j.subject,j.predicate,j.object,y.destination)));const{execute:T}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:v,context:b});return{type:"void",execute:T}}}e.ActorQueryOperationLoad=c},"../node_modules/@comunica/actor-query-operation-update-load/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js"),e)},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMoveRewrite=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorQueryOperationTypedMediated{constructor(a){super(a,"move"),this.factory=new l.Factory}async testOperation(a,c){return o.ActorQueryOperation.throwOnReadOnly(c),!0}runOperation(a,c){if(typeof a.destination=="string"&&typeof a.source=="string"&&a.destination===a.source||typeof a.destination!="string"&&typeof a.source!="string"&&a.destination.equals(a.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const h=[this.factory.createDrop(a.destination,!0),this.factory.createAdd(a.source,a.destination,a.silent),this.factory.createDrop(a.source)],y=this.factory.createCompositeUpdate(h);return this.mediatorQueryOperation.mediate({operation:y,context:c})}}e.ActorQueryOperationMoveRewrite=d},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationValues=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("asynciterator"),u=t("../node_modules/rdf-data-factory/index.js"),a=new o.BindingsFactory,c=new u.DataFactory;class h extends l.ActorQueryOperationTyped{constructor(b){super(b,"values")}async testOperation(b,m){return!0}async runOperation(b,m){const E=new d.ArrayIterator(b.bindings.map(j=>a.bindings(Object.entries(j).map(([N,x])=>[c.variable(N.slice(1)),x])))),v=b.variables;return{type:"bindings",bindingsStream:E,metadata:()=>Promise.resolve({cardinality:{type:"exact",value:b.bindings.length},canContainUndefs:b.bindings.some(j=>v.some(N=>!(`?${N.value}`in j))),variables:v})}}}e.ActorQueryOperationValues=h},"../node_modules/@comunica/actor-query-operation-values/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js"),e)},"../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParseSparql=void 0;const o=t("../node_modules/@comunica/bus-query-parse/lib/index.js"),l=t("sparqlalgebrajs"),d=t("sparqljs");class u extends o.ActorQueryParse{constructor(c){super(c),this.prefixes=Object.freeze(this.prefixes)}async test(c){if(c.queryFormat&&c.queryFormat.language!=="sparql")throw new Error("This actor can only parse SPARQL queries");return!0}async run(c){const y=new d.Parser({prefixes:this.prefixes,baseIRI:c.baseIRI}).parse(c.query);return{baseIRI:y.type==="query"?y.base:void 0,operation:(0,l.translate)(y,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:c.baseIRI})}}}e.ActorQueryParseSparql=u},"../node_modules/@comunica/actor-query-parse-sparql/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js"),e)},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSortCardinality=void 0;const o=t("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js");class l extends o.ActorRdfJoinEntriesSort{constructor(u){super(u)}async test(u){return!0}async run(u){return{entries:[...u.entries].sort((c,h)=>c.metadata.cardinality.value-h.metadata.cardinality.value)}}}e.ActorRdfJoinEntriesSortCardinality=l},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinHash=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"hash",limitEntries:2})}async getOutput(a){const c=await o.ActorRdfJoin.getMetadatas(a.entries),h=o.ActorRdfJoin.overlappingVariables(c);return{result:{type:"bindings",bindingsStream:new l.HashJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,b=>o.ActorRdfJoin.hash(b,h),o.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(a.entries,c,a.context)}}}async getJoinCoefficients(a,c){const h=o.ActorRdfJoin.getRequestInitialTimes(c),y=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value+c[1].cardinality.value,persistedItems:c[0].cardinality.value,blockingItems:c[0].cardinality.value,requestTime:h[0]+c[0].cardinality.value*y[0]+h[1]+c[1].cardinality.value*y[1]}}}e.ActorRdfJoinHash=d},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiBind=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("asynciterator"),a=t("sparqlalgebrajs");class c extends l.ActorRdfJoin{constructor(y){super(y,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0})}static createBindStream(y,b,m,E,v){const T=j=>{const N=m.map(I=>(0,o.materializeOperation)(I,j,{bindFilter:!1})),x=I=>I.merge(j);return new u.TransformIterator(async()=>(await E(N,j)).transform({map:x}),{maxBufferSize:128,autoStart:!1})};switch(y){case"depth-first":return new u.MultiTransformIterator(b,{autoStart:!1,multiTransform:T,optional:v});case"breadth-first":return new u.UnionIterator(b.transform({map:T,optional:v}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${y}`)}}async sortJoinEntries(y,b){if(y.some(j=>j.metadata.canContainUndefs))return y;const E={};for(const j of y)for(const N of j.metadata.variables){let x=E[N.value];x||(x=0),E[N.value]=++x}const v=[];for(const[j,N]of Object.entries(E))N>=2&&v.push(j);if(v.length===0)throw new Error("Bind join can only join entries with at least one common variable");const T=[];for(const j of y){let N=!1;for(const x of j.metadata.variables)if(v.includes(x.value)){N=!0;break}N||T.push(j)}return(await this.mediatorJoinEntriesSort.mediate({entries:y,context:b})).entries.sort((j,N)=>{const x=T.includes(j),I=T.includes(N);return x===I?0:x?1:-1})}async getOutput(y){const b=await l.ActorRdfJoin.getEntriesWithMetadatas(y.entries),m=await this.sortJoinEntries(b,y.context);this.logDebug(y.context,"First entry for Bind Join: ",()=>({entry:m[0].operation,metadata:m[0].metadata}));for(const[N,x]of m.entries())N!==0&&x.output.bindingsStream.close();const E=m[0].output,v=[...m];v.splice(0,1);const T=y.context.set(d.KeysQueryOperation.joinLeftMetadata,m[0].metadata).set(d.KeysQueryOperation.joinRightMetadatas,v.map(N=>N.metadata));return{result:{type:"bindings",bindingsStream:c.createBindStream(this.bindOrder,E.bindingsStream,v.map(N=>N.operation),async(N,x)=>{const I=N.length===1?N[0]:c.FACTORY.createJoin(N);return o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:I,context:T?.set(d.KeysQueryOperation.joinBindings,x)})).bindingsStream},!1),metadata:()=>this.constructResultMetadata(m,m.map(N=>N.metadata),y.context)},physicalPlanMetadata:{bindIndex:b.indexOf(m[0]),bindOrder:this.bindOrder}}}async getJoinCoefficients(y,b){const m=await this.sortJoinEntries(y.entries.map((P,B)=>({...P,metadata:b[B]})),y.context);b=m.map(P=>P.metadata);const E=l.ActorRdfJoin.getRequestInitialTimes(b),v=l.ActorRdfJoin.getRequestItemTimes(b),T=[...m],j=[...E],N=[...v];if(T.splice(0,1),j.splice(0,1),N.splice(0,1),T.some(P=>P.operation.type===a.Algebra.types.EXTEND||P.operation.type===a.Algebra.types.GROUP))throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const x=await Promise.all(T.map(async P=>(await this.mediatorJoinSelectivity.mediate({entries:[m[0],P],context:y.context})).selectivity*this.selectivityModifier)),I=T.map((P,B)=>P.metadata.cardinality.value*x[B]).reduce((P,B)=>P+B,0),w=j.reduce((P,B,H)=>P+B*x[H],0),S=N.reduce((P,B,H)=>P+B*x[H],0);return{iterations:b[0].cardinality.value*I,persistedItems:0,blockingItems:0,requestTime:E[0]+b[0].cardinality.value*(v[0]+w+I*S)}}}e.ActorRdfJoinMultiBind=c,c.FACTORY=new a.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiEmpty=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("asynciterator");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"multi-empty"})}async test(a){if((await o.ActorRdfJoin.getMetadatas(a.entries)).every(c=>o.ActorRdfJoin.getCardinality(c).value>0))throw new Error(`Actor ${this.name} can only join entries where at least one is empty`);return super.test(a)}async getOutput(a){for(const c of a.entries)c.output.bindingsStream.close();return{result:{bindingsStream:new l.ArrayIterator([],{autoStart:!1}),metadata:async()=>({cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:o.ActorRdfJoin.joinVariables(await o.ActorRdfJoin.getMetadatas(a.entries))}),type:"bindings"}}}async getJoinCoefficients(a,c){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinMultiEmpty=d},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiSmallest=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("sparqlalgebrajs");class u extends l.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0})}async sortJoinEntries(c,h){return(await this.mediatorJoinEntriesSort.mediate({entries:c,context:h})).entries}async getOutput(c){const h=await this.sortJoinEntries(await l.ActorRdfJoin.getEntriesWithMetadatas([...c.entries]),c.context),y=h[0],b=h[1];h.splice(0,2);const m={output:o.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:c.type,entries:[y,b],context:c.context})),operation:u.FACTORY.createJoin([y.operation,b.operation],!1)};return h.push(m),{result:await this.mediatorJoin.mediate({type:c.type,entries:h,context:c.context})}}async getJoinCoefficients(c,h){h=[...h],h=(await this.sortJoinEntries(c.entries.map((E,v)=>({...E,metadata:h[v]})),c.context)).map(E=>E.metadata);const b=l.ActorRdfJoin.getRequestInitialTimes(h),m=l.ActorRdfJoin.getRequestItemTimes(h);return{iterations:h[0].cardinality.value*h[1].cardinality.value*h.slice(2).reduce((E,v)=>E*v.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:b[0]+h[0].cardinality.value*m[0]+b[1]+h[1].cardinality.value*m[1]+h.slice(2).reduce((E,v,T)=>E+b.slice(2)[T]+v.cardinality.value*m.slice(2)[T],0)}}}e.ActorRdfJoinMultiSmallest=u,u.FACTORY=new d.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNestedLoop=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(a){return{result:{type:"bindings",bindingsStream:new l.NestedLoopJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,o.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(a.entries,await o.ActorRdfJoin.getMetadatas(a.entries),a.context)}}}async getJoinCoefficients(a,c){const h=o.ActorRdfJoin.getRequestInitialTimes(c),y=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value*c[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:h[0]+c[0].cardinality.value*y[0]+h[1]+c[1].cardinality.value*y[1]}}}e.ActorRdfJoinNestedLoop=d},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNone=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("asynciterator"),u=new o.BindingsFactory;class a extends l.ActorRdfJoin{constructor(h){super(h,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(h){if(h.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(h){return{result:{bindingsStream:new d.ArrayIterator([u.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinNone=a},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSingle=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js");class l extends o.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(u){if(u.entries.length!==1)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(u){return{result:u.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinSingle=l},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSymmetricHash=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2})}async getOutput(a){const c=await o.ActorRdfJoin.getMetadatas(a.entries),h=o.ActorRdfJoin.overlappingVariables(c);return{result:{type:"bindings",bindingsStream:new l.SymmetricHashJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,b=>d.hash(b,h),o.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(a.entries,c,a.context)}}}async getJoinCoefficients(a,c){const h=o.ActorRdfJoin.getRequestInitialTimes(c),y=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value+c[1].cardinality.value,persistedItems:c[0].cardinality.value+c[1].cardinality.value,blockingItems:0,requestTime:h[0]+c[0].cardinality.value*y[0]+h[1]+c[1].cardinality.value*y[1]}}}e.ActorRdfJoinSymmetricHash=d},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHashUndef=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),d=t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js");class u extends l.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(c){const h=c.entries[1].output,y=c.entries[0].output,b=await l.ActorRdfJoin.getMetadatas(c.entries),m=l.ActorRdfJoin.overlappingVariables(b);if(m.length>0){const E=new d.BindingsIndex(m);return{result:{type:"bindings",bindingsStream:new o.ClosableTransformIterator(async()=>(await new Promise(T=>{h.bindingsStream.on("data",j=>E.add(j)),h.bindingsStream.on("end",T)}),y.bindingsStream.filter(T=>!E.contains(T))),{autoStart:!1,onClose(){h.bindingsStream.destroy(),y.bindingsStream.destroy()}}),async metadata(){const T=await y.metadata(),j=await y.metadata();return{...j,canContainUndefs:T.canContainUndefs||j.canContainUndefs}}}}}return{result:y}}async getJoinCoefficients(c,h){const y=l.ActorRdfJoin.getRequestInitialTimes(h),b=l.ActorRdfJoin.getRequestItemTimes(h);return{iterations:(h[0].cardinality.value+h[1].cardinality.value)*1.01,persistedItems:h[0].cardinality.value,blockingItems:h[0].cardinality.value,requestTime:y[0]+h[0].cardinality.value*b[0]+y[1]+h[1].cardinality.value*b[1]}}}e.ActorRdfJoinMinusHashUndef=u},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsIndex=void 0;const o=t("../node_modules/rdf-string/index.js");class l{constructor(u){this.data={},this.keys=u}static hashTerm(u){return u&&u.termType!=="Variable"?(0,o.termToString)(u):""}add(u){if(this.isBindingsValid(u)){let a=this.data;for(const c of this.keys){const h=l.hashTerm(u.get(c));let y=a[h];y||(y=a[h]={}),a=y}}}contains(u){return this.isBindingsValid(u)?this.containsRecursive(u,this.keys,[this.data]):!1}isBindingsValid(u){let a=!1;for(const c of this.keys)if(u.get(c)){a=!0;break}return a}containsRecursive(u,a,c){if(a.length===0)return!0;let h;[h,...a]=a;for(const y of c){const b=l.hashTerm(u.get(h));if(b){const m=[y[b],y[""]].filter(Boolean);if(m.length===0)continue;if(this.containsRecursive(u,a,m))return!0}else{let m=Object.keys(y).map(E=>y[E]);if(m.length===0&&(m=[{}]),this.containsRecursive(u,a,m))return!0}}return!1}}e.BindingsIndex=l},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHash=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js");class d extends l.ActorRdfJoin{constructor(a){super(a,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(a){const c=a.entries[1].output,h=a.entries[0].output,y=await l.ActorRdfJoin.getMetadatas(a.entries),b=l.ActorRdfJoin.overlappingVariables(y);if(b.length>0){const m={};return{result:{type:"bindings",bindingsStream:new o.ClosableTransformIterator(async()=>(await new Promise(v=>{c.bindingsStream.on("data",T=>{m[l.ActorRdfJoin.hash(T,b)]=!0}),c.bindingsStream.on("end",v)}),h.bindingsStream.filter(v=>!m[l.ActorRdfJoin.hash(v,b)])),{autoStart:!1,onClose(){c.bindingsStream.destroy(),h.bindingsStream.destroy()}}),metadata:h.metadata}}}return{result:h}}async getJoinCoefficients(a,c){const h=l.ActorRdfJoin.getRequestInitialTimes(c),y=l.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value+c[1].cardinality.value,persistedItems:c[0].cardinality.value,blockingItems:c[0].cardinality.value,requestTime:h[0]+c[0].cardinality.value*y[0]+h[1]+c[1].cardinality.value*y[1]}}}e.ActorRdfJoinMinusHash=d},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalBind=void 0;const o=t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),d=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),u=t("../node_modules/@comunica/context-entries/lib/index.js"),a=t("sparqlalgebrajs");class c extends d.ActorRdfJoin{constructor(y){super(y,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0})}async getOutput(y){y.entries[1].output.bindingsStream.close();const b=y.context.set(u.KeysQueryOperation.joinLeftMetadata,await y.entries[0].output.metadata()).set(u.KeysQueryOperation.joinRightMetadatas,[await y.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:o.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,y.entries[0].output.bindingsStream,[y.entries[1].operation],async(E,v)=>{const T=E[0];return l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:T,context:b?.set(u.KeysQueryOperation.joinBindings,v)})).bindingsStream},!0),metadata:async()=>await this.constructResultMetadata(y.entries,await d.ActorRdfJoin.getMetadatas(y.entries),y.context,{canContainUndefs:!0})}}}async getJoinCoefficients(y,b){const m=d.ActorRdfJoin.getRequestInitialTimes(b),E=d.ActorRdfJoin.getRequestItemTimes(b);if(y.entries[1].operation.type===a.Algebra.types.EXTEND||y.entries[1].operation.type===a.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const v=(await this.mediatorJoinSelectivity.mediate({entries:y.entries,context:y.context})).selectivity*this.selectivityModifier;return{iterations:b[0].cardinality.value*b[1].cardinality.value*v,persistedItems:0,blockingItems:0,requestTime:m[0]+b[0].cardinality.value*v*(E[0]+m[1]+b[1].cardinality.value*E[1])}}}e.ActorRdfJoinOptionalBind=c},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalNestedLoop=void 0;const o=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/asyncjoin/index.js");class d extends o.ActorRdfJoin{constructor(a){super(a,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(a){return{result:{type:"bindings",bindingsStream:new l.NestedLoopJoin(a.entries[0].output.bindingsStream,a.entries[1].output.bindingsStream,o.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(a.entries,await o.ActorRdfJoin.getMetadatas(a.entries),a.context,{canContainUndefs:!0})}}}async getJoinCoefficients(a,c){const h=o.ActorRdfJoin.getRequestInitialTimes(c),y=o.ActorRdfJoin.getRequestItemTimes(c);return{iterations:c[0].cardinality.value*c[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:h[0]+c[0].cardinality.value*y[0]+h[1]+c[1].cardinality.value*y[1]}}}e.ActorRdfJoinOptionalNestedLoop=d},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JoinTypes=e.ActorRdfJoinSelectivityVariableCounting=void 0;const o=t("../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js"),l=t("sparqlalgebrajs");class d extends o.ActorRdfJoinSelectivity{constructor(c){super(c)}async test(c){return{accuracy:.5}}static getPatternCost(c){let h=1;return c.subject.termType==="Variable"&&(h+=4),(c.predicate.termType==="Variable"||c.type===l.Algebra.types.PATH)&&(h+=1),c.object.termType==="Variable"&&(h+=2),c.graph.termType==="Variable"&&(h+=1),h/9}static getJoinTypes(c,h){const y=[];return c.subject.termType==="Variable"?(c.subject.equals(h.subject)&&y.push(u.unboundSS),h.type==="pattern"&&c.subject.equals(h.predicate)&&y.push(u.unboundSP),c.subject.equals(h.object)&&y.push(u.unboundSO),c.subject.equals(h.graph)&&y.push(u.unboundSG)):(c.subject.equals(h.subject)&&y.push(u.boundSS),h.type==="pattern"&&c.subject.equals(h.predicate)&&y.push(u.boundSP),c.subject.equals(h.object)&&y.push(u.boundSO),c.subject.equals(h.graph)&&y.push(u.boundSG)),c.type==="pattern"&&(c.predicate.termType==="Variable"?(c.predicate.equals(h.subject)&&y.push(u.unboundPS),h.type==="pattern"&&c.predicate.equals(h.predicate)&&y.push(u.unboundPP),c.predicate.equals(h.object)&&y.push(u.unboundPO),c.predicate.equals(h.graph)&&y.push(u.unboundPG)):(c.predicate.equals(h.subject)&&y.push(u.boundPS),h.type==="pattern"&&c.predicate.equals(h.predicate)&&y.push(u.boundPP),c.predicate.equals(h.object)&&y.push(u.boundPO),c.predicate.equals(h.graph)&&y.push(u.boundPG))),c.object.termType==="Variable"?(c.object.equals(h.subject)&&y.push(u.unboundOS),h.type==="pattern"&&c.object.equals(h.predicate)&&y.push(u.unboundOP),c.object.equals(h.object)&&y.push(u.unboundOO),c.object.equals(h.graph)&&y.push(u.unboundOG)):(c.object.equals(h.subject)&&y.push(u.boundOS),h.type==="pattern"&&c.object.equals(h.predicate)&&y.push(u.boundOP),c.object.equals(h.object)&&y.push(u.boundOO),c.object.equals(h.graph)&&y.push(u.boundOG)),c.graph.termType==="Variable"?(c.graph.equals(h.subject)&&y.push(u.unboundGS),h.type==="pattern"&&c.graph.equals(h.predicate)&&y.push(u.unboundGP),c.graph.equals(h.object)&&y.push(u.unboundGO),c.graph.equals(h.graph)&&y.push(u.unboundGG)):(c.graph.equals(h.subject)&&y.push(u.boundGS),h.type==="pattern"&&c.graph.equals(h.predicate)&&y.push(u.boundGP),c.graph.equals(h.object)&&y.push(u.boundGO),c.graph.equals(h.graph)&&y.push(u.boundGG)),y}static getOperationsPairwiseJoinCost(c,h){let y=d.MAX_PAIRWISE_COST;for(const b of d.getJoinTypes(c,h))switch(b){case u.boundSS:y-=2*2;break;case u.boundSP:y-=3*2;break;case u.boundSO:y-=1*2;break;case u.boundSG:y-=3*2;break;case u.boundPS:y-=3*2;break;case u.boundPP:return 1;case u.boundPO:y-=3*2;break;case u.boundPG:y-=3*2;break;case u.boundOS:y-=1*2;break;case u.boundOP:y-=3*2;break;case u.boundOO:y-=1*2;break;case u.boundOG:y-=3*2;break;case u.boundGS:y-=3*2;break;case u.boundGP:y-=3*2;break;case u.boundGO:y-=3*2;break;case u.boundGG:y-=3*2;break;case u.unboundSS:y-=2;break;case u.unboundSP:y-=3;break;case u.unboundSO:y-=1;break;case u.unboundSG:y-=3;break;case u.unboundPS:y-=3;break;case u.unboundPP:y-=3;break;case u.unboundPO:y-=3;break;case u.unboundPG:y-=3;break;case u.unboundOS:y-=1;break;case u.unboundOP:y-=3;break;case u.unboundOO:y-=1;break;case u.unboundOG:y-=3;break;case u.unboundGS:y-=3;break;case u.unboundGP:y-=3;break;case u.unboundGO:y-=3;break;case u.unboundGG:y-=3;break}return y/d.MAX_PAIRWISE_COST}static getOperationsJoinCost(c){const h=[];for(const m of c)l.Util.recurseOperation(m,{[l.Algebra.types.PATTERN](E){return h.push(E),!1},[l.Algebra.types.PATH](E){return h.push(E),!1}});let y=0,b=0;for(const m of h)for(const E of h)m!==E&&(y+=d.getOperationsPairwiseJoinCost(m,E),b++);return y/b*h.reduce((m,E)=>m*d.getPatternCost(E),1)}async run(c){return c.entries.length<=1?{selectivity:1}:{selectivity:d.getOperationsJoinCost(c.entries.map(h=>h.operation))}}}e.ActorRdfJoinSelectivityVariableCounting=d,d.MAX_PAIRWISE_COST=41*2;var u;(function(a){a[a.boundSS=0]="boundSS",a[a.boundSP=1]="boundSP",a[a.boundSO=2]="boundSO",a[a.boundSG=3]="boundSG",a[a.boundPS=4]="boundPS",a[a.boundPP=5]="boundPP",a[a.boundPO=6]="boundPO",a[a.boundPG=7]="boundPG",a[a.boundOS=8]="boundOS",a[a.boundOP=9]="boundOP",a[a.boundOO=10]="boundOO",a[a.boundOG=11]="boundOG",a[a.boundGS=12]="boundGS",a[a.boundGP=13]="boundGP",a[a.boundGO=14]="boundGO",a[a.boundGG=15]="boundGG",a[a.unboundSS=16]="unboundSS",a[a.unboundSP=17]="unboundSP",a[a.unboundSO=18]="unboundSO",a[a.unboundSG=19]="unboundSG",a[a.unboundPS=20]="unboundPS",a[a.unboundPP=21]="unboundPP",a[a.unboundPO=22]="unboundPO",a[a.unboundPG=23]="unboundPG",a[a.unboundOS=24]="unboundOS",a[a.unboundOP=25]="unboundOP",a[a.unboundOO=26]="unboundOO",a[a.unboundOG=27]="unboundOG",a[a.unboundGS=28]="unboundGS",a[a.unboundGP=29]="unboundGP",a[a.unboundGO=30]="unboundGO",a[a.unboundGG=31]="unboundGG"})(u=e.JoinTypes||(e.JoinTypes={}))},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternFederated=void 0;const o=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),l=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js");class d extends o.ActorRdfResolveQuadPatternSource{constructor(a){super(a),this.emptyPatterns=new Map}async test(a){if(!(0,o.getContextSources)(a.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a sources array.`);return!0}async getSource(a){return new l.FederatedQuadSource(this.mediatorResolveQuadPattern,a,this.emptyPatterns,this.skipEmptyPatterns)}}e.ActorRdfResolveQuadPatternFederated=d},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FederatedQuadSource=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),d=t("../node_modules/@comunica/context-entries/lib/index.js"),u=t("../node_modules/@comunica/data-factory/lib/index.js"),a=t("asynciterator"),c=t("../node_modules/rdf-data-factory/index.js"),h=t("../node_modules/rdf-terms/index.js"),y=t("sparqlalgebrajs"),b=new c.DataFactory;class m{constructor(v,T,j,N){if(this.mediatorResolveQuadPattern=v,this.sources=T.get(d.KeysRdfResolveQuadPattern.sources),this.contextDefault=T.delete(d.KeysRdfResolveQuadPattern.sources),this.emptyPatterns=j,this.sourceIds=T.get(d.KeysRdfResolveQuadPattern.sourceIds)??new Map,this.skipEmptyPatterns=N,this.algebraFactory=new y.Factory,this.skipEmptyPatterns)for(const x of this.sources)this.emptyPatterns.has(x)||this.emptyPatterns.set(x,[])}static isTermBound(v){return v.termType!=="Variable"}static isSubPatternOf(v,T){return(!m.isTermBound(T.subject)||T.subject.equals(v.subject))&&(!m.isTermBound(T.predicate)||T.predicate.equals(v.predicate))&&(!m.isTermBound(T.object)||T.object.equals(v.object))&&(!m.isTermBound(T.graph)||T.graph.equals(v.graph))}static skolemizeTerm(v,T){return v.termType==="BlankNode"?new u.BlankNodeScoped(`bc_${T}_${v.value}`,b.namedNode(`${m.SKOLEM_PREFIX}${T}:${v.value}`)):v}static skolemizeQuad(v,T){return(0,h.mapTerms)(v,j=>m.skolemizeTerm(j,T))}static deskolemizeTerm(v,T){if(v.termType==="BlankNode"&&"skolemized"in v&&(v=v.skolemized),v.termType==="NamedNode"&&v.value.startsWith(m.SKOLEM_PREFIX)){const j=v.value.indexOf(":",m.SKOLEM_PREFIX.length);if(v.value.slice(m.SKOLEM_PREFIX.length,j)===T){const x=v.value.slice(j+1,v.value.length);return b.blankNode(x)}return null}return v}static deskolemizeQuad(v,T){return(0,h.mapTerms)(v,j=>{const N=m.deskolemizeTerm(j,T);return N||j})}isSourceEmpty(v,T){if(!this.skipEmptyPatterns)return!1;const j=this.emptyPatterns.get(v);if(j){for(const N of j)if(m.isSubPatternOf(T,N))return!0}return!1}getSourceId(v){let T=this.sourceIds.get(v);return T===void 0&&(T=`${this.sourceIds.size}`,this.sourceIds.set(v,T)),T}match(v,T,j,N){const x={cardinality:{type:"exact",value:0},canContainUndefs:!1};let I=this.sources.length;const w=(B,H,q,V)=>{this.skipEmptyPatterns&&!B&&q&&!this.isSourceEmpty(H,q)&&this.emptyPatterns.get(H).push(q),I||(V&&this.sources.length===1?P.setProperty("metadata",V):P.setProperty("metadata",x))},S=Promise.all(this.sources.map(async B=>{const H=this.getSourceId(B),q=m.deskolemizeTerm(v,H),V=m.deskolemizeTerm(T,H),$=m.deskolemizeTerm(j,H),ee=m.deskolemizeTerm(N,H);let D,F=(0,l.getDataSourceContext)(B,this.contextDefault);F=F.set(d.KeysRdfResolveQuadPattern.source,B);let Q;!q||!V||!$||!ee||this.isSourceEmpty(B,D=this.algebraFactory.createPattern(q,V,$,ee))?(Q={data:new a.ArrayIterator([],{autoStart:!1})},Q.data.setProperty("metadata",{cardinality:0,canContainUndefs:!1})):Q=await this.mediatorResolveQuadPattern.mediate({pattern:D,context:F}),Q.data.getProperty("metadata",W=>{!W.cardinality||!Number.isFinite(W.cardinality.value)?(x.cardinality.type="estimate",x.cardinality.value=Number.POSITIVE_INFINITY,I=0):(W.cardinality.type==="estimate"&&(x.cardinality.type="estimate"),x.cardinality.value+=W.cardinality.value,I--),(x.requestTime||W.requestTime)&&(x.requestTime=x.requestTime||0,W.requestTime=W.requestTime||0,x.requestTime+=W.requestTime),(x.pageSize||W.pageSize)&&(x.pageSize=x.pageSize||0,W.pageSize=W.pageSize||0,x.pageSize+=W.pageSize),W.canContainUndefs&&(x.canContainUndefs=!0),w(x.cardinality.value,B,D,W)});const X=Q.data.map(W=>m.skolemizeQuad(W,H));return X.on("error",W=>P.emit("error",W)),X})),P=new o.ClosableTransformIterator(async()=>new a.UnionIterator(await S),{autoStart:!1,onClose(){S.then(B=>{for(const H of B)H.destroy()},()=>{})}});return this.sources.length===0&&P.setProperty("metadata",x),P}}e.FederatedQuadSource=m,m.SKOLEM_PREFIX="urn:comunica_skolem:source_"},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js"),e),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternRdfJsSource=void 0;const o=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),l=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js");class d extends o.ActorRdfResolveQuadPatternSource{constructor(a){super(a)}async test(a){if(!(0,o.hasContextSingleSourceOfType)("rdfjsSource",a.context))throw new Error(`${this.name} requires a single source with an rdfjsSource to be present in the context.`);const c=(0,o.getContextSource)(a.context);if(!c||typeof c=="string"||!("match"in c)&&!c.value.match)throw new Error(`${this.name} received an invalid rdfjsSource.`);return!0}async getSource(a){const c=(0,o.getContextSource)(a);return new l.RdfJsQuadSource("match"in c?c:c.value)}}e.ActorRdfResolveQuadPatternRdfJsSource=d},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadSource=void 0;const o=t("asynciterator");class l{constructor(u){this.source=u}static nullifyVariables(u){return!u||u.termType==="Variable"?void 0:u}match(u,a,c,h){const y=this.source.match(l.nullifyVariables(u),l.nullifyVariables(a),l.nullifyVariables(c),l.nullifyVariables(h)),b=(0,o.wrap)(y,{autoStart:!1});return this.setMetadata(b,u,a,c,h).catch(m=>b.destroy(m)),b}async setMetadata(u,a,c,h,y){let b;if(this.source.countQuads)b=await this.source.countQuads(l.nullifyVariables(a),l.nullifyVariables(c),l.nullifyVariables(h),l.nullifyVariables(y));else{let m=0;b=await new Promise((E,v)=>{const T=this.source.match(l.nullifyVariables(a),l.nullifyVariables(c),l.nullifyVariables(h),l.nullifyVariables(y));T.on("error",v),T.on("end",()=>E(m)),T.on("data",()=>m++)})}u.setProperty("metadata",{cardinality:{type:"exact",value:b},canContainUndefs:!1})}}e.RdfJsQuadSource=l},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js"),e),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js"),e),l(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsRdfJsStore=void 0;const o=t("../node_modules/@comunica/bus-rdf-update-quads/lib/index.js"),l=t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js");class d extends o.ActorRdfUpdateQuadsDestination{constructor(a){super(a)}async test(a){const c=(0,o.getContextDestination)(a.context);if(!c||typeof c=="string"||!("remove"in c)&&"value"in c&&!c.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(a){const c=(0,o.getContextDestination)(a);return new l.RdfJsQuadDestination("remove"in c?c:c.value)}}e.ActorRdfUpdateQuadsRdfJsStore=d},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadDestination=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/rdf-string/index.js"),d=new o.DataFactory;class u{constructor(c){this.store=c}promisifyEventEmitter(c){return new Promise((h,y)=>{c.on("end",h),c.on("error",y)})}delete(c){return this.promisifyEventEmitter(this.store.remove(c))}insert(c){return this.promisifyEventEmitter(this.store.import(c))}async deleteGraphs(c,h,y){switch(c){case"ALL":await this.promisifyEventEmitter(this.store.deleteGraph(d.defaultGraph()));case"NAMED":const b=this.store.match(),m={};b.on("data",E=>{E.graph.termType!=="DefaultGraph"&&(m[(0,l.termToString)(E.graph)]=!0)}),await this.promisifyEventEmitter(b),await Promise.all(Object.keys(m).map(E=>this.promisifyEventEmitter(this.store.deleteGraph((0,l.stringToTerm)(E)))));break;default:for(const E of Array.isArray(c)?c:[c])await this.promisifyEventEmitter(this.store.deleteGraph(E))}}async createGraphs(c,h){if(h)for(const y of c){const b=this.store.match(void 0,void 0,void 0,y);await new Promise((m,E)=>{b.once("data",()=>{E(new Error(`Unable to create graph ${y.value} as it already exists`))}),b.on("end",m),b.on("error",E)})}}}e.RdfJsQuadDestination=u},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js"),e)},"../node_modules/@comunica/bindings-factory/lib/Bindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bindings=void 0;const o=t("../packages/immutable/dist/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js");class d{constructor(a,c){this.type="bindings",this.dataFactory=a,this.entries=c}has(a){return this.entries.has(typeof a=="string"?a:a.value)}get(a){return this.entries.get(typeof a=="string"?a:a.value)}set(a,c){return new d(this.dataFactory,this.entries.set(typeof a=="string"?a:a.value,c))}delete(a){return new d(this.dataFactory,this.entries.delete(typeof a=="string"?a:a.value))}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),a=>this.dataFactory.variable(a))}values(){return this.iteratorToIterable(this.entries.values())}forEach(a){this.entries.forEach((c,h)=>a(c,this.dataFactory.variable(h)))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([a,c])=>[this.dataFactory.variable(a),c])[Symbol.iterator]()}equals(a){if(!a)return!1;if(this===a)return!0;if(this.size!==a.size)return!1;for(const c of this.keys())if(!this.get(c)?.equals(a.get(c)))return!1;return!0}filter(a){return new d(this.dataFactory,(0,o.Map)(this.entries.filter((c,h)=>a(c,this.dataFactory.variable(h)))))}map(a){return new d(this.dataFactory,(0,o.Map)(this.entries.map((c,h)=>a(c,this.dataFactory.variable(h)))))}merge(a){const c=new Set([...this.iteratorToIterable(this.entries.keys()),...[...a.keys()].map(y=>y.value)]),h=[];for(const y of c){const b=this.entries.get(y),m=a.get(this.dataFactory.variable(y));if(b&&m&&!b.equals(m))return;const E=b||m;h.push([y,E])}return new d(this.dataFactory,(0,o.Map)(h))}mergeWith(a,c){const h=new Set([...this.iteratorToIterable(this.entries.keys()),...[...c.keys()].map(b=>b.value)]),y=[];for(const b of h){const m=this.dataFactory.variable(b),E=this.entries.get(b),v=c.get(m);let T;E&&v&&!E.equals(v)?T=a(E,v,m):T=E||v,y.push([b,T])}return new d(this.dataFactory,(0,o.Map)(y))}toString(){return(0,l.bindingsToString)(this)}*mapIterable(a,c){for(const h of a)yield c(h)}iteratorToIterable(a){return{[Symbol.iterator]:()=>a}}}e.Bindings=d},"../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsFactory=void 0;const o=t("../packages/immutable/dist/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),d=t("../node_modules/@comunica/bindings-factory/lib/Bindings.js");class u{constructor(c=new l.DataFactory){this.dataFactory=c}bindings(c=[]){return new d.Bindings(this.dataFactory,(0,o.Map)(c.map(([h,y])=>[h.value,y])))}fromBindings(c){return this.bindings([...c])}fromRecord(c){return this.bindings(Object.entries(c).map(([h,y])=>[this.dataFactory.variable(h),y]))}}e.BindingsFactory=u},"../node_modules/@comunica/bindings-factory/lib/bindingsToString.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindingsToString=void 0;const o=t("../node_modules/rdf-string/index.js");function l(d){const u={};for(const a of d.keys())u[a.value]=(0,o.termToString)(d.get(a));return JSON.stringify(u,null,"  ")}e.bindingsToString=l},"../node_modules/@comunica/bindings-factory/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bindings-factory/lib/Bindings.js"),e),l(t("../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js"),e),l(t("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js"),e)},"../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocess=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorContextPreprocess=l},"../node_modules/@comunica/bus-context-preprocess/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js"),e)},"../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindings=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorHashBindings=l},"../node_modules/@comunica/bus-hash-bindings/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js"),e)},"../node_modules/@comunica/bus-init/lib/ActorInit.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInit=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorInit=l},"../node_modules/@comunica/bus-init/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-init/lib/ActorInit.js"),e)},"../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperation=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorOptimizeQueryOperation=l},"../node_modules/@comunica/bus-optimize-query-operation/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js"),e)},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperation=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/core/lib/index.js"),d=t("../node_modules/@comunica/data-factory/lib/index.js"),u=t("../node_modules/@comunica/bus-query-operation/lib/Bindings.js");let a=0;class c extends l.Actor{constructor(y){super(y)}static getSafeBindings(y){return c.validateQueryOutput(y,"bindings"),y}static getSafeQuads(y){return c.validateQueryOutput(y,"quads"),y}static getSafeBoolean(y){return c.validateQueryOutput(y,"boolean"),y}static getSafeVoid(y){return c.validateQueryOutput(y,"void"),y}static cachifyMetadata(y){let b;return()=>b||(b=y())}static validateQueryOutput(y,b){if(y.type!==b)throw new Error(`Invalid query output type: Expected '${b}' but got '${y.type}'`)}static getBaseExpressionContext(y){const b=y.get(o.KeysInitQuery.queryTimestamp),m=y.get(o.KeysInitQuery.baseIRI),E=y.get(o.KeysInitQuery.functionArgumentsCache)||{};if(y.has(o.KeysInitQuery.extensionFunctionCreator)&&y.has(o.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let v=y.get(o.KeysInitQuery.extensionFunctionCreator);const T=y.get(o.KeysInitQuery.extensionFunctions);return T&&(v=j=>T[j.value]),{now:b,baseIRI:m,extensionFunctionCreator:v,functionArgumentsCache:E}}static getExpressionContext(y,b){return{...this.getBaseExpressionContext(y),bnode:m=>new d.BlankNodeBindingsScoped(m||`BNODE_${a++}`)}}static getAsyncExpressionContext(y,b){const m={...this.getBaseExpressionContext(y),bnode:E=>Promise.resolve(new d.BlankNodeBindingsScoped(E||`BNODE_${a++}`))};return b&&(m.exists=c.createExistenceResolver(y,b)),m}static createExistenceResolver(y,b){return async(m,E)=>{const v=(0,u.materializeOperation)(m.input,E),T=await b.mediate({operation:v,context:y}),j=c.getSafeBindings(T);return new Promise((N,x)=>{j.bindingsStream.on("end",()=>{N(!1)}),j.bindingsStream.on("error",x),j.bindingsStream.on("data",()=>{j.bindingsStream.close(),N(!0)})}).then(N=>m.not?!N:N)}}static throwOnReadOnly(y){if(y.get(o.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}}e.ActorQueryOperation=c},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTyped=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js");class d extends l.ActorQueryOperation{constructor(a,c){if(super({...a,operationName:c}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(a){if(!a.operation)throw new Error("Missing field 'operation' in a query operation action.");if(a.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${a.operation.type}`);const c=a.operation;return this.testOperation(c,a.context)}async run(a){const c=a.context.get(o.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(a.operation.type,void 0,a.operation,a.context.get(o.KeysInitQuery.physicalQueryPlanNode),this.name,{}),a.context=a.context.set(o.KeysInitQuery.physicalQueryPlanNode,a.operation));const h=a.operation,y=a.context.set(o.KeysQueryOperation.operation,h),b=await this.runOperation(h,y);return"metadata"in b&&(b.metadata=l.ActorQueryOperation.cachifyMetadata(b.metadata)),b}}e.ActorQueryOperationTyped=d},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTypedMediated=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js");class l extends o.ActorQueryOperationTyped{constructor(u,a){super(u,a)}}e.ActorQueryOperationTypedMediated=l},"../node_modules/@comunica/bus-query-operation/lib/Bindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materializeOperation=e.materializeTerm=void 0;const o=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/rdf-string/index.js"),d=t("sparqlalgebrajs"),u=new o.BindingsFactory;function a(h,y){if(h.termType==="Variable"){const b=y.get(h);if(b)return b}return h}e.materializeTerm=a;function c(h,y,b={}){return b={strictTargetVariables:"strictTargetVariables"in b?b.strictTargetVariables:!1,bindFilter:"bindFilter"in b?b.bindFilter:!0},d.Util.mapOperation(h,{path(m,E){return{recurse:!1,result:E.createPath(a(m.subject,y),m.predicate,a(m.object,y),a(m.graph,y))}},pattern(m,E){return{recurse:!1,result:E.createPattern(a(m.subject,y),a(m.predicate,y),a(m.object,y),a(m.graph,y))}},extend(m){if(y.has(m.variable)){if(b.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,l.termToString)(m.variable)} in a BIND operator.`);return{recurse:!0,result:c(m.input,y,b)}}return{recurse:!0,result:m}},group(m,E){if(b.strictTargetVariables){for(const T of m.variables)if(y.has(T))throw new Error(`Tried to bind variable ${(0,l.termToString)(T)} in a GROUP BY operator.`);return{recurse:!0,result:m}}const v=m.variables.filter(T=>!y.has(T));return{recurse:!0,result:E.createGroup(m.input,v,m.aggregates)}},project(m,E){if(b.strictTargetVariables){for(const j of m.variables)if(y.has(j))throw new Error(`Tried to bind variable ${(0,l.termToString)(j)} in a SELECT operator.`);return{recurse:!0,result:m}}const v=m.variables.filter(j=>!y.has(j)),T=u.bindings(m.variables.map(j=>{const N=y.get(j);if(N)return[j,N]}).filter(j=>!!j));return{recurse:!1,result:E.createProject(c(m.input,T,b),v)}},values(m,E){if(b.strictTargetVariables){for(const v of m.variables)if(y.has(v))throw new Error(`Tried to bind variable ${(0,l.termToString)(v)} in a VALUES operator.`)}else{const v=m.variables.filter(j=>!y.has(j)),T=m.bindings.map(j=>{const N={...j};let x=!0;return y.forEach((I,w)=>{const S=(0,l.termToString)(w);S in N&&(I.equals(N[S])||(x=!1),delete N[S])}),x?N:void 0}).filter(Boolean);return{recurse:!0,result:E.createValues(v,T)}}return{recurse:!1,result:m}},expression(m,E){if(!b.bindFilter)return{recurse:!1,result:m};if(m.expressionType==="term")return{recurse:!1,result:E.createTermExpression(a(m.term,y))};if(m.expressionType==="aggregate"&&"variable"in m&&y.has(m.variable)){if(b.strictTargetVariables)throw new Error(`Tried to bind ${(0,l.termToString)(m.variable)} in a ${m.aggregator} aggregate.`);return{recurse:!0,result:m}}return{recurse:!0,result:m}}})}e.materializeOperation=c},"../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusQueryOperation=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.BusIndexed{constructor(u){super({...u,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}}e.BusQueryOperation=l},"../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ClosableTransformIterator=void 0;const o=t("asynciterator");class l extends o.TransformIterator{constructor(u,a){super(u,a),this.onClose=a.onClose}_end(u){this.onClose(),super._end(u)}}e.ClosableTransformIterator=l},"../node_modules/@comunica/bus-query-operation/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/Bindings.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js"),e),l(t("../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js"),e)},"../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParse=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorQueryParse=l},"../node_modules/@comunica/bus-query-parse/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js"),e)},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSort=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfJoinEntriesSort=l},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js"),e)},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSelectivity=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfJoinSelectivity=l},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js"),e)},"../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoin=void 0;const o=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/@comunica/core/lib/index.js"),u=t("../node_modules/rdf-data-factory/index.js"),a=t("../node_modules/rdf-string/index.js"),c=new u.DataFactory;class h extends d.Actor{constructor(b,m){super(b),this.includeInLogs=!0,this.logicalType=m.logicalType,this.physicalName=m.physicalName,this.limitEntries=m.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=m.limitEntriesMin??!1,this.canHandleUndefs=m.canHandleUndefs??!1}static hash(b,m){return m.filter(E=>b.has(E)).map(E=>(0,a.termToString)(b.get(E))).join("")}static overlappingVariables(b){const m=b.map(v=>v.variables);let E=m[0];for(const v of m.slice(1))E=E.filter(T=>v.some(j=>j.value===T.value));return E}static joinVariables(b){return[...new Set(b.flatMap(m=>m.variables.map(E=>E.value)))].map(m=>c.variable(m))}static joinBindings(...b){if(b.length===0)return null;if(b.length===1)return b[0];let m=b[0];for(const E of b.slice(1)){const v=m.merge(E);if(!v)return null;m=v}return m}static getCardinality(b){return b.cardinality}static async getMetadatas(b){return await Promise.all(b.map(m=>m.output.metadata()))}static async getEntriesWithMetadatas(b){const m=await h.getMetadatas(b);return b.map((E,v)=>({...E,metadata:m[v]}))}static getRequestInitialTimes(b){return b.map(m=>m.pageSize?0:m.requestTime||0)}static getRequestItemTimes(b){return b.map(m=>m.pageSize?(m.requestTime||0)/m.pageSize:0)}async constructResultMetadata(b,m,E,v={}){let T;return v.cardinality?T=v.cardinality:(T=m.reduce((j,N)=>{const x=h.getCardinality(N);return{type:x.type==="estimate"?"estimate":j.type,value:j.value*x.value}},{type:"exact",value:1}),T.value*=(await this.mediatorJoinSelectivity.mediate({entries:b,context:E})).selectivity),{...v,cardinality:{type:T.type,value:T.value},canContainUndefs:v.canContainUndefs??m.some(j=>j.canContainUndefs),variables:h.joinVariables(m)}}async test(b){if(b.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${b.type}' was given.`);if(b.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?b.entries.length<this.limitEntries:b.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${b.entries.length}.`);for(const E of b.entries)if(E.output.type!=="bindings")throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${E.output.type}'`);const m=await h.getMetadatas(b.entries);if(!this.canHandleUndefs){for(const E of m)if(E.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`)}return await this.getJoinCoefficients(b,m)}async run(b){let m;b.context.has(l.KeysInitQuery.physicalQueryPlanLogger)&&(m=b.context.get(l.KeysInitQuery.physicalQueryPlanNode),b.context=b.context.set(l.KeysInitQuery.physicalQueryPlanNode,b));const E=b.context.get(l.KeysInitQuery.physicalQueryPlanLogger);let v;this.includeInLogs&&E&&(v={},E.logOperation(`join-${this.logicalType}`,this.physicalName,b,m,this.name,v));const{result:T,physicalPlanMetadata:j}=await this.getOutput(b),N=await h.getMetadatas(b.entries);return v&&(Object.assign(v,j),v.cardinalities=N.map(h.getCardinality),v.joinCoefficients=await this.getJoinCoefficients(b,N)),T.metadata=o.ActorQueryOperation.cachifyMetadata(T.metadata),T}}e.ActorRdfJoin=h},"../node_modules/@comunica/bus-rdf-join/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPattern=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfResolveQuadPattern=l},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternSource=void 0;const o=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js");class l extends o.ActorRdfResolveQuadPattern{constructor(u){super(u)}async test(u){return!0}async run(u){const a=await this.getSource(u.context,u.pattern);return await this.getOutput(a,u.pattern,u.context)}async getOutput(u,a,c){return{data:u.match(a.subject,a.predicate,a.object,a.graph,c)}}}e.ActorRdfResolveQuadPatternSource=l},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js"),e),l(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js"),e),l(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hasContextSingleSourceOfType=e.hasContextSingleSource=e.getContextSourceUrl=e.getContextSourceFirst=e.getContextSource=e.getContextSources=e.getDataSourceContext=e.getDataSourceValue=e.getDataSourceType=e.isDataSourceRawType=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js");function l(v){return typeof v=="string"||"match"in v}e.isDataSourceRawType=l;function d(v){return typeof v=="string"?"":"match"in v?"rdfjsSource":v.type}e.getDataSourceType=d;function u(v){return l(v)?v:v.value}e.getDataSourceValue=u;function a(v,T){return typeof v=="string"||"match"in v||!v.context?T:T.merge(v.context)}e.getDataSourceContext=a;function c(v){return v.get(o.KeysRdfResolveQuadPattern.sources)}e.getContextSources=c;function h(v){return v.get(o.KeysRdfResolveQuadPattern.source)}e.getContextSource=h;function y(v){if(v.has(o.KeysRdfResolveQuadPattern.source))return v.get(o.KeysRdfResolveQuadPattern.source);const T=v.get(o.KeysRdfResolveQuadPattern.sources);if(T?.length===1)return T[0]}e.getContextSourceFirst=y;function b(v){if(v){let T=u(v);if(typeof T=="string"){const j=T.indexOf("#");return j>=0&&(T=T.slice(0,j)),T}}}e.getContextSourceUrl=b;function m(v){const T=h(v);return!!(T&&(l(T)||T.value))}e.hasContextSingleSource=m;function E(v,T){const j=h(T);return!!(j&&d(j)===v&&u(j))}e.hasContextSingleSourceOfType=E},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuads=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Actor{constructor(u){super(u)}}e.ActorRdfUpdateQuads=l},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsDestination=e.deskolemize=e.deskolemizeStream=void 0;const o=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),d=t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js");function u(h,y){return h?.map(b=>o.FederatedQuadSource.deskolemizeQuad(b,y))}e.deskolemizeStream=u;function a(h){const y=h.context.get(l.KeysRdfUpdateQuads.destination),b=h.context.get(l.KeysRdfResolveQuadPattern.sourceIds)?.get(y);return b?{...h,quadStreamInsert:u(h.quadStreamInsert,b),quadStreamDelete:u(h.quadStreamDelete,b)}:h}e.deskolemize=a;class c extends d.ActorRdfUpdateQuads{async test(y){return!0}async run(y){const b=await this.getDestination(y.context);return await this.getOutput(b,a(y),y.context)}async getOutput(y,b,m){return{execute:()=>Promise.all([b.quadStreamInsert?y.insert(b.quadStreamInsert):Promise.resolve(),b.quadStreamDelete?y.delete(b.quadStreamDelete):Promise.resolve(),b.deleteGraphs?y.deleteGraphs(b.deleteGraphs.graphs,b.deleteGraphs.requireExistence,b.deleteGraphs.dropGraphs):Promise.resolve(),b.createGraphs?y.createGraphs(b.createGraphs.graphs,b.createGraphs.requireNonExistence):Promise.resolve()]).then(()=>{})}}}e.ActorRdfUpdateQuadsDestination=c},"../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateHttpResponse=void 0;const o=t("./require-empty.js"),l=t("../node_modules/stream-to-string/index.js");async function d(u,a){if(a.status>=400){let c="empty response";if(a.body){const h=o.ActorHttp.toNodeReadable(a.body);c=await l(h)}throw new Error(`Could not update ${u} (HTTP status ${a.status}):
${c}`)}await a.body?.cancel()}e.validateHttpResponse=d},"../node_modules/@comunica/bus-rdf-update-quads/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js"),e),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js"),e),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js"),e),l(t("../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getContextDestinationUrl=e.getContextDestinationFirst=e.getContextDestination=e.getDataDestinationContext=e.getDataDestinationValue=e.getDataDestinationType=e.isDataDestinationRawType=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js");function l(b){return typeof b=="string"||"remove"in b}e.isDataDestinationRawType=l;function d(b){return typeof b=="string"?"":"remove"in b?"rdfjsStore":b.type}e.getDataDestinationType=d;function u(b){return l(b)?b:b.value}e.getDataDestinationValue=u;function a(b,m){return typeof b=="string"||"remove"in b||!b.context?m:m.merge(b.context)}e.getDataDestinationContext=a;function c(b){return b.get(o.KeysRdfUpdateQuads.destination)}e.getContextDestination=c;function h(b){if(b.has(o.KeysRdfUpdateQuads.destination))return b.get(o.KeysRdfUpdateQuads.destination)}e.getContextDestinationFirst=h;function y(b){if(b){let m=u(b);if(typeof m=="string"){const E=m.indexOf("#");return E>=0&&(m=m.slice(0,E)),m}}}e.getContextDestinationUrl=y},"../node_modules/@comunica/context-entries/lib/Keys.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeysRdfUpdateQuads=e.KeysRdfResolveQuadPattern=e.KeysRdfParseHtmlScript=e.KeysRdfParseJsonLd=e.KeysQueryOperation=e.KeysInitQuery=e.KeysHttpProxy=e.KeysHttpMemento=e.KeysHttpWayback=e.KeysHttp=e.KeysCore=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");e.KeysCore={log:o.CONTEXT_KEY_LOGGER},e.KeysHttp={includeCredentials:new o.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new o.ActionContextKey("@comunica/bus-http:auth"),fetch:new o.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new o.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new o.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new o.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new o.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new o.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")},e.KeysHttpWayback={recoverBrokenLinks:new o.ActionContextKey("@comunica/bus-http:recover-broken-links")},e.KeysHttpMemento={datetime:new o.ActionContextKey("@comunica/actor-http-memento:datetime")},e.KeysHttpProxy={httpProxyHandler:new o.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},e.KeysInitQuery={initialBindings:new o.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new o.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new o.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new o.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new o.ActionContextKey("@comunica/actor-init-query:queryString"),query:new o.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new o.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new o.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new o.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new o.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new o.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new o.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new o.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new o.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new o.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new o.ActionContextKey("@context")},e.KeysQueryOperation={operation:new o.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new o.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new o.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new o.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new o.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new o.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new o.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new o.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),localizeBlankNodes:new o.ActionContextKey("@comunica/actor-query-operation:localizeBlankNodes")},e.KeysRdfParseJsonLd={documentLoader:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new o.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},e.KeysRdfParseHtmlScript={processingHtmlScript:new o.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new o.ActionContextKey("extractAllScripts")},e.KeysRdfResolveQuadPattern={sources:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds"),hypermediaSourcesAggregatedStores:new o.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:hypermediaSourcesAggregatedStores")},e.KeysRdfUpdateQuads={destination:new o.ActionContextKey("@comunica/bus-rdf-update-quads:destination")}},"../node_modules/@comunica/context-entries/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/context-entries/lib/Keys.js"),e)},"../node_modules/@comunica/core/lib/ActionContext.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionContextKey=e.ActionContext=void 0;const o=t("../packages/immutable/dist/index.js");class l{constructor(a={}){this.map=(0,o.Map)(a)}setDefault(a,c){return this.has(a)?this:this.set(a,c)}set(a,c){return this.setRaw(a.name,c)}setRaw(a,c){return new l(this.map.set(a,c))}delete(a){return new l(this.map.delete(a.name))}get(a){return this.getRaw(a.name)}getRaw(a){return this.map.get(a)}getSafe(a){if(!this.has(a))throw new Error(`Context entry ${a.name} is required but not available`);return this.get(a)}has(a){return this.hasRaw(a.name)}hasRaw(a){return this.map.has(a)}merge(...a){let c=this;for(const h of a)for(const y of h.keys())c=c.set(y,h.get(y));return c}keys(){return[...this.map.keys()].map(a=>new d(a))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(a){return a instanceof l?a:new l((0,o.Map)(a||{}))}}e.ActionContext=l;class d{constructor(a){this.name=a}}e.ActionContextKey=d},"../node_modules/@comunica/core/lib/ActionObserver.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionObserver=void 0;class t{constructor(l){Object.assign(this,l)}}e.ActionObserver=t},"../node_modules/@comunica/core/lib/Actor.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;const o=t("../node_modules/@comunica/core/lib/ContextEntries.js");class l{constructor(u){this.beforeActors=[],Object.assign(this,u),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(u){return u.get(o.CONTEXT_KEY_LOGGER)}runObservable(u){const a=this.run(u);return this.bus.onRun(this,u,a),a}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(u,a){const c=a?a():{};return c.actor=this.name,c}logTrace(u,a,c){const h=l.getContextLogger(u);h&&h.trace(a,this.getDefaultLogData(u,c))}logDebug(u,a,c){const h=l.getContextLogger(u);h&&h.debug(a,this.getDefaultLogData(u,c))}logInfo(u,a,c){const h=l.getContextLogger(u);h&&h.info(a,this.getDefaultLogData(u,c))}logWarn(u,a,c){const h=l.getContextLogger(u);h&&h.warn(a,this.getDefaultLogData(u,c))}logError(u,a,c){const h=l.getContextLogger(u);h&&h.error(a,this.getDefaultLogData(u,c))}logFatal(u,a,c){const h=l.getContextLogger(u);h&&h.fatal(a,this.getDefaultLogData(u,c))}}e.Actor=l},"../node_modules/@comunica/core/lib/Bus.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bus=void 0;class t{constructor(l){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,l)}subscribe(l){this.actors.push(l),this.reorderForDependencies()}subscribeObserver(l){this.observers.push(l)}unsubscribe(l){const d=this.actors.indexOf(l);return d>=0?(this.actors.splice(d,1),!0):!1}unsubscribeObserver(l){const d=this.observers.indexOf(l);return d>=0?(this.observers.splice(d,1),!0):!1}publish(l){return this.actors.map(d=>({actor:d,reply:d.test(l)}))}onRun(l,d,u){for(const a of this.observers)a.onRun(l,d,u)}addDependencies(l,d){for(const u of d){let a=this.dependencyLinks.get(u);a||(a=[],this.dependencyLinks.set(u,a)),a.push(l)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const l=[];for(const d of this.dependencyLinks.keys()){const u=this.actors.indexOf(d);u>=0&&(this.actors.splice(u,1),l.push(d))}for(;l.length>0;){let d=-1;for(let a=0;a<l.length;a++){let c=!0;for(const h of this.dependencyLinks.get(l[a]))if(!this.actors.includes(h)&&l.includes(h)){c=!1;break}if(c){d=a;break}}if(d<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const u=l.splice(d,1)[0];this.actors.push(u)}}}}e.Bus=t},"../node_modules/@comunica/core/lib/BusIndexed.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusIndexed=void 0;const o=t("../node_modules/@comunica/core/lib/Bus.js");class l extends o.Bus{constructor(u){super(u),this.actorsIndex={}}subscribe(u){const a=this.getActorIdentifier(u)||"_undefined_";let c=this.actorsIndex[a];c||(c=this.actorsIndex[a]=[]),c.push(u),super.subscribe(u)}unsubscribe(u){const a=this.getActorIdentifier(u)||"_undefined_",c=this.actorsIndex[a];if(c){const h=c.indexOf(u);h>=0&&c.splice(h,1),c.length===0&&delete this.actorsIndex[a]}return super.unsubscribe(u)}publish(u){const a=this.getActionIdentifier(u);return a?[...this.actorsIndex[a]||[],...this.actorsIndex._undefined_||[]].map(h=>({actor:h,reply:h.test(u)})):super.publish(u)}getActorIdentifier(u){return this.actorIdentifierFields.reduce((a,c)=>a[c],u)}getActionIdentifier(u){return this.actionIdentifierFields.reduce((a,c)=>a[c],u)}}e.BusIndexed=l},"../node_modules/@comunica/core/lib/ContextEntries.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_KEY_LOGGER=void 0;const o=t("../node_modules/@comunica/core/lib/ActionContext.js");e.CONTEXT_KEY_LOGGER=new o.ActionContextKey("@comunica/core:log")},"../node_modules/@comunica/core/lib/Mediator.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Mediator=void 0;class t{constructor(l){Object.assign(this,l)}publish(l){const d=this.bus.publish(l);if(d.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return d}async mediateActor(l){return await this.mediateWith(l,this.publish(l))}async mediate(l){return(await this.mediateActor(l)).runObservable(l)}}e.Mediator=t},"../node_modules/@comunica/core/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(a,c,h,y){y===void 0&&(y=h);var b=Object.getOwnPropertyDescriptor(c,h);(!b||("get"in b?!c.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return c[h]}}),Object.defineProperty(a,y,b)}:function(a,c,h,y){y===void 0&&(y=h),a[y]=c[h]}),l=this&&this.__exportStar||function(a,c){for(var h in a)h!=="default"&&!Object.prototype.hasOwnProperty.call(c,h)&&o(c,a,h)};Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;const u=t("../node_modules/@comunica/types/lib/index.js").Logger;e.Logger=u,l(t("../node_modules/@comunica/core/lib/ActionContext.js"),e),l(t("../node_modules/@comunica/core/lib/Bus.js"),e),l(t("../node_modules/@comunica/core/lib/BusIndexed.js"),e),l(t("../node_modules/@comunica/core/lib/ContextEntries.js"),e),l(t("../node_modules/@comunica/core/lib/ActionObserver.js"),e),l(t("../node_modules/@comunica/core/lib/Actor.js"),e),l(t("../node_modules/@comunica/core/lib/Mediator.js"),e)},"../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeBindingsScoped=void 0;class t{constructor(l){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=l}equals(l){return!!l&&l.termType==="BlankNode"&&l.value===this.value}}e.BlankNodeBindingsScoped=t},"../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeScoped=void 0;class t{constructor(l,d){this.termType="BlankNode",this.value=l,this.skolemized=d}equals(l){return!!l&&l.termType==="BlankNode"&&l.value===this.value}}e.BlankNodeScoped=t},"../node_modules/@comunica/data-factory/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js"),e),l(t("../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js"),e)},"../node_modules/@comunica/logger-void/lib/LoggerVoid.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoggerVoid=void 0;const o=t("../node_modules/@comunica/types/lib/index.js");class l extends o.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}e.LoggerVoid=l},"../node_modules/@comunica/logger-void/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/logger-void/lib/LoggerVoid.js"),e)},"../node_modules/@comunica/mediator-all/lib/MediatorAll.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorAll=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u)}async mediate(u){const a=[];let c;try{c=this.publish(u)}catch{c=[]}for(const y of c)try{await y.reply,a.push(y.actor)}catch{}return(await Promise.all(a.map(y=>y.runObservable(u))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}}e.MediatorAll=l},"../node_modules/@comunica/mediator-all/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-all/lib/MediatorAll.js"),e)},"../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombinePipeline=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u)}async mediate(u){let a;try{a=this.publish(u)}catch{return u}if(this.filterErrors){const h=[];for(const y of a)try{await y.reply,h.push(y)}catch{}a=h}if(a=await Promise.all(a.map(async({actor:h,reply:y})=>({actor:h,reply:await y}))),this.order){const h=y=>{const b=this.field?y[this.field]:y;if(typeof b!="number")throw new Error("Cannot order elements that are not numbers.");return b};a=a.sort((y,b)=>(this.order==="increasing"?1:-1)*(h(y.reply)-h(b.reply)))}let c=u;for(const{actor:h}of a)c={...c,...await h.runObservable(c)};return c}mediateWith(){throw new Error("Method not supported.")}}e.MediatorCombinePipeline=l},"../node_modules/@comunica/mediator-combine-pipeline/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js"),e)},"../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombineUnion=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u),this.combiner=this.createCombiner()}async mediate(u){let a;try{a=this.publish(u)}catch{a=[]}await Promise.all(a.map(({reply:h})=>h));const c=await Promise.all(a.map(h=>h.actor.runObservable(u)));return this.combiner(c)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return u=>{const a={};return a[this.field]={},[{}].concat(u.map(c=>c[this.field])).forEach((c,h,y)=>{a[this.field]={...c,...a[this.field]}}),a}}}e.MediatorCombineUnion=l},"../node_modules/@comunica/mediator-combine-union/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js"),e)},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorJoinCoefficientsFixed=void 0;const o=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/core/lib/index.js");class d extends l.Mediator{constructor(a){super(a)}async mediateWith(a,c){const h=[],y=c.map(({reply:x})=>x).map(x=>x.catch(I=>{h.push(I)})),b=await Promise.all(y);let m=b.map((x,I)=>{if(x)return x.iterations*this.cpuWeight+x.persistedItems*this.memoryWeight+x.blockingItems*this.timeWeight+x.requestTime*this.ioWeight});const E=Math.max(...m.filter(x=>x!==void 0)),v=a.context.get(o.KeysQueryOperation.limitIndicator);v&&(m=m.map((x,I)=>x!==void 0&&b[I].persistedItems>0&&b[I].iterations>v?x+E:x));let T=-1,j=Number.POSITIVE_INFINITY;for(const[x,I]of m.entries())I!==void 0&&(T===-1||I<j)&&(T=x,j=I);if(T<0)throw new Error(`All actors rejected their test in ${this.name}
${h.map(x=>x.message).join(`
`)}`);const N=c[T].actor;return N.includeInLogs&&l.Actor.getContextLogger(a.context)?.debug(`Determined physical join operator '${N.logicalType}-${N.physicalName}'`,{entries:a.entries.length,variables:await Promise.all(a.entries.map(async x=>(await x.output.metadata()).variables.map(I=>I.value))),costs:Object.fromEntries(m.map((x,I)=>[`${c[I].actor.logicalType}-${c[I].actor.physicalName}`,x])),coefficients:Object.fromEntries(b.map((x,I)=>[`${c[I].actor.logicalType}-${c[I].actor.physicalName}`,x]))}),N}}e.MediatorJoinCoefficientsFixed=d},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js"),e)},"../node_modules/@comunica/mediator-number/lib/MediatorNumber.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorNumber=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return u=>u.reduce((a,c,h)=>{const y=this.getOrDefault(c[this.field],Number.POSITIVE_INFINITY);return y!==null&&(Number.isNaN(a[0])||a[0]>y)?[y,h]:a},[Number.NaN,-1])[1];case"max":return u=>u.reduce((a,c,h)=>{const y=this.getOrDefault(c[this.field],Number.NEGATIVE_INFINITY);return y!==null&&(Number.isNaN(a[0])||a[0]<y)?[y,h]:a},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(u,a){return u===void 0?a:u}async mediateWith(u,a){let c=a.map(({reply:m})=>m);const h=[];if(this.ignoreErrors){const m={};m[this.field]=null,c=c.map(E=>E.catch(v=>(h.push(v),m)))}const y=await Promise.all(c),b=this.indexPicker(y);if(b<0)throw new Error(`All actors rejected their test in ${this.name}
${h.map(m=>m.message).join(`
`)}`);return a[b].actor}}e.MediatorNumber=l},"../node_modules/@comunica/mediator-number/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-number/lib/MediatorNumber.js"),e)},"../node_modules/@comunica/mediator-race/lib/MediatorRace.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorRace=void 0;const o=t("../node_modules/@comunica/core/lib/index.js");class l extends o.Mediator{constructor(u){super(u)}mediateWith(u,a){return new Promise((c,h)=>{const y=[];for(const b of a)b.reply.then(()=>{c(b.actor)}).catch(m=>{y.push(m),y.length===a.length&&h(new Error(`${this.name} mediated over all rejecting actors:
${y.map(E=>E.message).join(`
`)}`))})})}}e.MediatorRace=l},"../node_modules/@comunica/mediator-race/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/mediator-race/lib/MediatorRace.js"),e)},"../node_modules/@comunica/types/lib/Bindings.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IActionContext.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IAggregatedStore.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/ICliArgsHandler.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataDestination.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataSource.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IJoinEntry.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IMetadata.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IProxyHandler.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryContext.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryEngine.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryOperationResult.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/Logger.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;class t{static getLevelOrdinal(l){return t.LEVELS[l]}}e.Logger=t,t.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5}},"../node_modules/@comunica/types/lib/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/@comunica/types/lib/Bindings.js"),e),l(t("../node_modules/@comunica/types/lib/IActionContext.js"),e),l(t("../node_modules/@comunica/types/lib/IAggregatedStore.js"),e),l(t("../node_modules/@comunica/types/lib/ICliArgsHandler.js"),e),l(t("../node_modules/@comunica/types/lib/IDataDestination.js"),e),l(t("../node_modules/@comunica/types/lib/IDataSource.js"),e),l(t("../node_modules/@comunica/types/lib/IJoinEntry.js"),e),l(t("../node_modules/@comunica/types/lib/IMetadata.js"),e),l(t("../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js"),e),l(t("../node_modules/@comunica/types/lib/IProxyHandler.js"),e),l(t("../node_modules/@comunica/types/lib/IQueryContext.js"),e),l(t("../node_modules/@comunica/types/lib/IQueryEngine.js"),e),l(t("../node_modules/@comunica/types/lib/IQueryOperationResult.js"),e),l(t("../node_modules/@comunica/types/lib/Logger.js"),e)},"../node_modules/asyncjoin/index.js":(n,e,t)=>{const o=t("../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js"),l=t("../node_modules/asyncjoin/join/HashJoin.js"),d=t("../node_modules/asyncjoin/join/NestedLoopJoin.js"),u=t("../node_modules/asyncjoin/join/SymmetricHashJoin.js"),a=t("../node_modules/asyncjoin/util/MergeIterator.js");n.exports={DynamicNestedLoopJoin:o,HashJoin:l,NestedLoopJoin:d,SymmetricHashJoin:u,MergeStream:a}},"../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js":(n,e,t)=>{let o=t("asynciterator"),l=o.MultiTransformIterator,d=o.SimpleTransformIterator;class u extends l{constructor(c,h,y,b){super(c,b),this.funRight=h,this.funJoin=y}_createTransformer(c){return new d(this.funRight(c),{transform:(h,y,b)=>{let m=this.funJoin(c,h);m!==null&&b(m),y()}})}}n.exports=u},"../node_modules/asyncjoin/join/HashJoin.js":(n,e,t)=>{let o=t("asynciterator").AsyncIterator;class l extends o{constructor(u,a,c,h){super(),this.addedDataListener=!1,this.left=u,this.right=a,this.funHash=c,this.funJoin=h,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",b=>this.destroy(b)),this.right.on("error",b=>this.destroy(b)),this.readable=!1,this.left.on("end",y.bind(this));function y(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",b=>{b==="data"&&!this.addedDataListener&&(this.addedDataListener=!0,this._addDataListener())})}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener());;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let a=this.matches[this.matchIdx++],c=this.funJoin(a,this.match);if(c!==null)return c}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let u=this.funHash(this.match);this.matches=this.leftMap.get(u)||[],this.matchIdx=0}}_addDataListener(){this.left.on("data",u.bind(this));function u(a){let c=this.funHash(a);this.leftMap.has(c)||this.leftMap.set(c,[]),this.leftMap.get(c).push(a)}}}n.exports=l},"../node_modules/asyncjoin/join/NestedLoopJoin.js":(n,e,t)=>{const{MultiTransformIterator:o,SimpleTransformIterator:l,scheduleTask:d}=t("asynciterator");class u extends o{constructor(c,h,y,b){super(c,b),this.right=h,this.funJoin=y,this.on("end",()=>this.right.close())}_end(){super._end(),d(()=>this.right.destroy())}_createTransformer(c){return new l(this.right.clone(),{transform:(h,y,b)=>{let m=this.funJoin(c,h);m!==null&&b(m),y()}})}}n.exports=u},"../node_modules/asyncjoin/join/SymmetricHashJoin.js":(n,e,t)=>{let o=t("asynciterator").AsyncIterator;class l extends o{constructor(u,a,c,h){super(),this.left=u,this.right=a,this.funHash=c,this.funJoin=h,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",y=>this.destroy(y)),this.right.on("error",y=>this.destroy(y)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let y=this.matches[this.matchIdx++],b=this.usedLeft?this.funJoin(this.match,y):this.funJoin(y,this.match);if(b!==null)return b}this.hasResults()||this._end();let u=null;for(let y=0;y<2&&(u=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,u===null);++y);if(this.done||u===null)return this.readable=!1,null;let a=this.funHash(u),c=this.usedLeft?this.leftMap:this.rightMap;return c.has(a)||c.set(a,[]),c.get(a).push(u),this.match=u,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(a)||[],this.matchIdx=0,this.read()}}n.exports=l},"../node_modules/asyncjoin/util/MergeIterator.js":(n,e,t)=>{let o=t("asynciterator").AsyncIterator;class l extends o{constructor(u){super(),Array.isArray(u)||(u=Array.prototype.slice.call(arguments)),this.streams=u;for(let a of u)a.on("readable",()=>this.emit("readable")),a.on("end",()=>this._removeStream(a));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(u){let a=this.streams.indexOf(u);a<0||(this.streams.splice(a,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let u of this.streams)u.close()}read(){for(let u=0;u<this.streams.length;++u){this.idx=(this.idx+1)%this.streams.length;let a=this.streams[this.idx].read();if(a!==null)return a}return null}}n.exports=l},"../node_modules/bignumber.js/bignumber.js":function(n,e,t){var o;(function(l){var d,u=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,a=Math.ceil,c=Math.floor,h="[BigNumber Error] ",y=h+"Number primitive has more than 15 significant digits: ",b=1e14,m=14,E=9007199254740991,v=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],T=1e7,j=1e9;function N(q){var V,$,ee,D=he.prototype={constructor:he,toString:null,valueOf:null},F=new he(1),Q=20,X=4,W=-7,le=21,ue=-1e7,de=1e7,ce=!1,ge=1,Oe=0,je={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},Ie="0123456789abcdefghijklmnopqrstuvwxyz",Se=!0;function he(M,G){var J,ae,Z,ie,oe,Y,te,ne,se=this;if(!(se instanceof he))return new he(M,G);if(G==null){if(M&&M._isBigNumber===!0){se.s=M.s,!M.c||M.e>de?se.c=se.e=null:M.e<ue?se.c=[se.e=0]:(se.e=M.e,se.c=M.c.slice());return}if((Y=typeof M=="number")&&M*0==0){if(se.s=1/M<0?(M=-M,-1):1,M===~~M){for(ie=0,oe=M;oe>=10;oe/=10,ie++);ie>de?se.c=se.e=null:(se.e=ie,se.c=[M]);return}ne=String(M)}else{if(!u.test(ne=String(M)))return ee(se,ne,Y);se.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(ie=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(oe=ne.search(/e/i))>0?(ie<0&&(ie=oe),ie+=+ne.slice(oe+1),ne=ne.substring(0,oe)):ie<0&&(ie=ne.length)}else{if(S(G,2,Ie.length,"Base"),G==10&&Se)return se=new he(M),Ne(se,Q+se.e+1,X);if(ne=String(M),Y=typeof M=="number"){if(M*0!=0)return ee(se,ne,Y,G);if(se.s=1/M<0?(ne=ne.slice(1),-1):1,he.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(y+M)}else se.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(J=Ie.slice(0,G),ie=oe=0,te=ne.length;oe<te;oe++)if(J.indexOf(ae=ne.charAt(oe))<0){if(ae=="."){if(oe>ie){ie=te;continue}}else if(!Z&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){Z=!0,oe=-1,ie=0;continue}return ee(se,String(M),Y,G)}Y=!1,ne=$(ne,G,10,se.s),(ie=ne.indexOf("."))>-1?ne=ne.replace(".",""):ie=ne.length}for(oe=0;ne.charCodeAt(oe)===48;oe++);for(te=ne.length;ne.charCodeAt(--te)===48;);if(ne=ne.slice(oe,++te)){if(te-=oe,Y&&he.DEBUG&&te>15&&(M>E||M!==c(M)))throw Error(y+se.s*M);if((ie=ie-oe-1)>de)se.c=se.e=null;else if(ie<ue)se.c=[se.e=0];else{if(se.e=ie,se.c=[],oe=(ie+1)%m,ie<0&&(oe+=m),oe<te){for(oe&&se.c.push(+ne.slice(0,oe)),te-=m;oe<te;)se.c.push(+ne.slice(oe,oe+=m));oe=m-(ne=ne.slice(oe)).length}else oe-=te;for(;oe--;ne+="0");se.c.push(+ne)}}else se.c=[se.e=0]}he.clone=N,he.ROUND_UP=0,he.ROUND_DOWN=1,he.ROUND_CEIL=2,he.ROUND_FLOOR=3,he.ROUND_HALF_UP=4,he.ROUND_HALF_DOWN=5,he.ROUND_HALF_EVEN=6,he.ROUND_HALF_CEIL=7,he.ROUND_HALF_FLOOR=8,he.EUCLID=9,he.config=he.set=function(M){var G,J;if(M!=null)if(typeof M=="object"){if(M.hasOwnProperty(G="DECIMAL_PLACES")&&(J=M[G],S(J,0,j,G),Q=J),M.hasOwnProperty(G="ROUNDING_MODE")&&(J=M[G],S(J,0,8,G),X=J),M.hasOwnProperty(G="EXPONENTIAL_AT")&&(J=M[G],J&&J.pop?(S(J[0],-j,0,G),S(J[1],0,j,G),W=J[0],le=J[1]):(S(J,-j,j,G),W=-(le=J<0?-J:J))),M.hasOwnProperty(G="RANGE"))if(J=M[G],J&&J.pop)S(J[0],-j,-1,G),S(J[1],1,j,G),ue=J[0],de=J[1];else if(S(J,-j,j,G),J)ue=-(de=J<0?-J:J);else throw Error(h+G+" cannot be zero: "+J);if(M.hasOwnProperty(G="CRYPTO"))if(J=M[G],J===!!J)if(J)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ce=J;else throw ce=!J,Error(h+"crypto unavailable");else ce=J;else throw Error(h+G+" not true or false: "+J);if(M.hasOwnProperty(G="MODULO_MODE")&&(J=M[G],S(J,0,9,G),ge=J),M.hasOwnProperty(G="POW_PRECISION")&&(J=M[G],S(J,0,j,G),Oe=J),M.hasOwnProperty(G="FORMAT"))if(J=M[G],typeof J=="object")je=J;else throw Error(h+G+" not an object: "+J);if(M.hasOwnProperty(G="ALPHABET"))if(J=M[G],typeof J=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(J))Se=J.slice(0,10)=="0123456789",Ie=J;else throw Error(h+G+" invalid: "+J)}else throw Error(h+"Object expected: "+M);return{DECIMAL_PLACES:Q,ROUNDING_MODE:X,EXPONENTIAL_AT:[W,le],RANGE:[ue,de],CRYPTO:ce,MODULO_MODE:ge,POW_PRECISION:Oe,FORMAT:je,ALPHABET:Ie}},he.isBigNumber=function(M){if(!M||M._isBigNumber!==!0)return!1;if(!he.DEBUG)return!0;var G,J,ae=M.c,Z=M.e,ie=M.s;e:if({}.toString.call(ae)=="[object Array]"){if((ie===1||ie===-1)&&Z>=-j&&Z<=j&&Z===c(Z)){if(ae[0]===0){if(Z===0&&ae.length===1)return!0;break e}if(G=(Z+1)%m,G<1&&(G+=m),String(ae[0]).length==G){for(G=0;G<ae.length;G++)if(J=ae[G],J<0||J>=b||J!==c(J))break e;if(J!==0)return!0}}}else if(ae===null&&Z===null&&(ie===null||ie===1||ie===-1))return!0;throw Error(h+"Invalid BigNumber: "+M)},he.maximum=he.max=function(){return Re(arguments,D.lt)},he.minimum=he.min=function(){return Re(arguments,D.gt)},he.random=function(){var M=9007199254740992,G=Math.random()*M&2097151?function(){return c(Math.random()*M)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(J){var ae,Z,ie,oe,Y,te=0,ne=[],se=new he(F);if(J==null?J=Q:S(J,0,j),oe=a(J/m),ce)if(crypto.getRandomValues){for(ae=crypto.getRandomValues(new Uint32Array(oe*=2));te<oe;)Y=ae[te]*131072+(ae[te+1]>>>11),Y>=9e15?(Z=crypto.getRandomValues(new Uint32Array(2)),ae[te]=Z[0],ae[te+1]=Z[1]):(ne.push(Y%1e14),te+=2);te=oe/2}else if(crypto.randomBytes){for(ae=crypto.randomBytes(oe*=7);te<oe;)Y=(ae[te]&31)*281474976710656+ae[te+1]*1099511627776+ae[te+2]*4294967296+ae[te+3]*16777216+(ae[te+4]<<16)+(ae[te+5]<<8)+ae[te+6],Y>=9e15?crypto.randomBytes(7).copy(ae,te):(ne.push(Y%1e14),te+=7);te=oe/7}else throw ce=!1,Error(h+"crypto unavailable");if(!ce)for(;te<oe;)Y=G(),Y<9e15&&(ne[te++]=Y%1e14);for(oe=ne[--te],J%=m,oe&&J&&(Y=v[m-J],ne[te]=c(oe/Y)*Y);ne[te]===0;ne.pop(),te--);if(te<0)ne=[ie=0];else{for(ie=-1;ne[0]===0;ne.splice(0,1),ie-=m);for(te=1,Y=ne[0];Y>=10;Y/=10,te++);te<m&&(ie-=m-te)}return se.e=ie,se.c=ne,se}}(),he.sum=function(){for(var M=1,G=arguments,J=new he(G[0]);M<G.length;)J=J.plus(G[M++]);return J},$=function(){var M="0123456789";function G(J,ae,Z,ie){for(var oe,Y=[0],te,ne=0,se=J.length;ne<se;){for(te=Y.length;te--;Y[te]*=ae);for(Y[0]+=ie.indexOf(J.charAt(ne++)),oe=0;oe<Y.length;oe++)Y[oe]>Z-1&&(Y[oe+1]==null&&(Y[oe+1]=0),Y[oe+1]+=Y[oe]/Z|0,Y[oe]%=Z)}return Y.reverse()}return function(J,ae,Z,ie,oe){var Y,te,ne,se,fe,ye,ve,_,p=J.indexOf("."),g=Q,O=X;for(p>=0&&(se=Oe,Oe=0,J=J.replace(".",""),_=new he(ae),ye=_.pow(J.length-p),Oe=se,_.c=G(H(I(ye.c),ye.e,"0"),10,Z,M),_.e=_.c.length),ve=G(J,ae,Z,oe?(Y=Ie,M):(Y=M,Ie)),ne=se=ve.length;ve[--se]==0;ve.pop());if(!ve[0])return Y.charAt(0);if(p<0?--ne:(ye.c=ve,ye.e=ne,ye.s=ie,ye=V(ye,_,g,O,Z),ve=ye.c,fe=ye.r,ne=ye.e),te=ne+g+1,p=ve[te],se=Z/2,fe=fe||te<0||ve[te+1]!=null,fe=O<4?(p!=null||fe)&&(O==0||O==(ye.s<0?3:2)):p>se||p==se&&(O==4||fe||O==6&&ve[te-1]&1||O==(ye.s<0?8:7)),te<1||!ve[0])J=fe?H(Y.charAt(1),-g,Y.charAt(0)):Y.charAt(0);else{if(ve.length=te,fe)for(--Z;++ve[--te]>Z;)ve[te]=0,te||(++ne,ve=[1].concat(ve));for(se=ve.length;!ve[--se];);for(p=0,J="";p<=se;J+=Y.charAt(ve[p++]));J=H(J,ne,Y.charAt(0))}return J}}(),V=function(){function M(ae,Z,ie){var oe,Y,te,ne,se=0,fe=ae.length,ye=Z%T,ve=Z/T|0;for(ae=ae.slice();fe--;)te=ae[fe]%T,ne=ae[fe]/T|0,oe=ve*te+ne*ye,Y=ye*te+oe%T*T+se,se=(Y/ie|0)+(oe/T|0)+ve*ne,ae[fe]=Y%ie;return se&&(ae=[se].concat(ae)),ae}function G(ae,Z,ie,oe){var Y,te;if(ie!=oe)te=ie>oe?1:-1;else for(Y=te=0;Y<ie;Y++)if(ae[Y]!=Z[Y]){te=ae[Y]>Z[Y]?1:-1;break}return te}function J(ae,Z,ie,oe){for(var Y=0;ie--;)ae[ie]-=Y,Y=ae[ie]<Z[ie]?1:0,ae[ie]=Y*oe+ae[ie]-Z[ie];for(;!ae[0]&&ae.length>1;ae.splice(0,1));}return function(ae,Z,ie,oe,Y){var te,ne,se,fe,ye,ve,_,p,g,O,L,k,z,_e,Pe,xe,Le,Ee=ae.s==Z.s?1:-1,$e=ae.c,He=Z.c;if(!$e||!$e[0]||!He||!He[0])return new he(!ae.s||!Z.s||($e?He&&$e[0]==He[0]:!He)?NaN:$e&&$e[0]==0||!He?Ee*0:Ee/0);for(p=new he(Ee),g=p.c=[],ne=ae.e-Z.e,Ee=ie+ne+1,Y||(Y=b,ne=x(ae.e/m)-x(Z.e/m),Ee=Ee/m|0),se=0;He[se]==($e[se]||0);se++);if(He[se]>($e[se]||0)&&ne--,Ee<0)g.push(1),fe=!0;else{for(_e=$e.length,xe=He.length,se=0,Ee+=2,ye=c(Y/(He[0]+1)),ye>1&&(He=M(He,ye,Y),$e=M($e,ye,Y),xe=He.length,_e=$e.length),z=xe,O=$e.slice(0,xe),L=O.length;L<xe;O[L++]=0);Le=He.slice(),Le=[0].concat(Le),Pe=He[0],He[1]>=Y/2&&Pe++;do{if(ye=0,te=G(He,O,xe,L),te<0){if(k=O[0],xe!=L&&(k=k*Y+(O[1]||0)),ye=c(k/Pe),ye>1)for(ye>=Y&&(ye=Y-1),ve=M(He,ye,Y),_=ve.length,L=O.length;G(ve,O,_,L)==1;)ye--,J(ve,xe<_?Le:He,_,Y),_=ve.length,te=1;else ye==0&&(te=ye=1),ve=He.slice(),_=ve.length;if(_<L&&(ve=[0].concat(ve)),J(O,ve,L,Y),L=O.length,te==-1)for(;G(He,O,xe,L)<1;)ye++,J(O,xe<L?Le:He,L,Y),L=O.length}else te===0&&(ye++,O=[0]);g[se++]=ye,O[0]?O[L++]=$e[z]||0:(O=[$e[z]],L=1)}while((z++<_e||O[0]!=null)&&Ee--);fe=O[0]!=null,g[0]||g.splice(0,1)}if(Y==b){for(se=1,Ee=g[0];Ee>=10;Ee/=10,se++);Ne(p,ie+(p.e=se+ne*m-1)+1,oe,fe)}else p.e=ne,p.r=+fe;return p}}();function Ae(M,G,J,ae){var Z,ie,oe,Y,te;if(J==null?J=X:S(J,0,8),!M.c)return M.toString();if(Z=M.c[0],oe=M.e,G==null)te=I(M.c),te=ae==1||ae==2&&(oe<=W||oe>=le)?B(te,oe):H(te,oe,"0");else if(M=Ne(new he(M),G,J),ie=M.e,te=I(M.c),Y=te.length,ae==1||ae==2&&(G<=ie||ie<=W)){for(;Y<G;te+="0",Y++);te=B(te,ie)}else if(G-=oe,te=H(te,ie,"0"),ie+1>Y){if(--G>0)for(te+=".";G--;te+="0");}else if(G+=ie-Y,G>0)for(ie+1==Y&&(te+=".");G--;te+="0");return M.s<0&&Z?"-"+te:te}function Re(M,G){for(var J,ae=1,Z=new he(M[0]);ae<M.length;ae++)if(J=new he(M[ae]),J.s)G.call(Z,J)&&(Z=J);else{Z=J;break}return Z}function Be(M,G,J){for(var ae=1,Z=G.length;!G[--Z];G.pop());for(Z=G[0];Z>=10;Z/=10,ae++);return(J=ae+J*m-1)>de?M.c=M.e=null:J<ue?M.c=[M.e=0]:(M.e=J,M.c=G),M}ee=function(){var M=/^(-?)0([xbo])(?=\w[\w.]*$)/i,G=/^([^.]+)\.$/,J=/^\.([^.]+)$/,ae=/^-?(Infinity|NaN)$/,Z=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(ie,oe,Y,te){var ne,se=Y?oe:oe.replace(Z,"");if(ae.test(se))ie.s=isNaN(se)?null:se<0?-1:1;else{if(!Y&&(se=se.replace(M,function(fe,ye,ve){return ne=(ve=ve.toLowerCase())=="x"?16:ve=="b"?2:8,!te||te==ne?ye:fe}),te&&(ne=te,se=se.replace(G,"$1").replace(J,"0.$1")),oe!=se))return new he(se,ne);if(he.DEBUG)throw Error(h+"Not a"+(te?" base "+te:"")+" number: "+oe);ie.s=null}ie.c=ie.e=null}}();function Ne(M,G,J,ae){var Z,ie,oe,Y,te,ne,se,fe=M.c,ye=v;if(fe){e:{for(Z=1,Y=fe[0];Y>=10;Y/=10,Z++);if(ie=G-Z,ie<0)ie+=m,oe=G,te=fe[ne=0],se=te/ye[Z-oe-1]%10|0;else if(ne=a((ie+1)/m),ne>=fe.length)if(ae){for(;fe.length<=ne;fe.push(0));te=se=0,Z=1,ie%=m,oe=ie-m+1}else break e;else{for(te=Y=fe[ne],Z=1;Y>=10;Y/=10,Z++);ie%=m,oe=ie-m+Z,se=oe<0?0:te/ye[Z-oe-1]%10|0}if(ae=ae||G<0||fe[ne+1]!=null||(oe<0?te:te%ye[Z-oe-1]),ae=J<4?(se||ae)&&(J==0||J==(M.s<0?3:2)):se>5||se==5&&(J==4||ae||J==6&&(ie>0?oe>0?te/ye[Z-oe]:0:fe[ne-1])%10&1||J==(M.s<0?8:7)),G<1||!fe[0])return fe.length=0,ae?(G-=M.e+1,fe[0]=ye[(m-G%m)%m],M.e=-G||0):fe[0]=M.e=0,M;if(ie==0?(fe.length=ne,Y=1,ne--):(fe.length=ne+1,Y=ye[m-ie],fe[ne]=oe>0?c(te/ye[Z-oe]%ye[oe])*Y:0),ae)for(;;)if(ne==0){for(ie=1,oe=fe[0];oe>=10;oe/=10,ie++);for(oe=fe[0]+=Y,Y=1;oe>=10;oe/=10,Y++);ie!=Y&&(M.e++,fe[0]==b&&(fe[0]=1));break}else{if(fe[ne]+=Y,fe[ne]!=b)break;fe[ne--]=0,Y=1}for(ie=fe.length;fe[--ie]===0;fe.pop());}M.e>de?M.c=M.e=null:M.e<ue&&(M.c=[M.e=0])}return M}function De(M){var G,J=M.e;return J===null?M.toString():(G=I(M.c),G=J<=W||J>=le?B(G,J):H(G,J,"0"),M.s<0?"-"+G:G)}return D.absoluteValue=D.abs=function(){var M=new he(this);return M.s<0&&(M.s=1),M},D.comparedTo=function(M,G){return w(this,new he(M,G))},D.decimalPlaces=D.dp=function(M,G){var J,ae,Z,ie=this;if(M!=null)return S(M,0,j),G==null?G=X:S(G,0,8),Ne(new he(ie),M+ie.e+1,G);if(!(J=ie.c))return null;if(ae=((Z=J.length-1)-x(this.e/m))*m,Z=J[Z])for(;Z%10==0;Z/=10,ae--);return ae<0&&(ae=0),ae},D.dividedBy=D.div=function(M,G){return V(this,new he(M,G),Q,X)},D.dividedToIntegerBy=D.idiv=function(M,G){return V(this,new he(M,G),0,1)},D.exponentiatedBy=D.pow=function(M,G){var J,ae,Z,ie,oe,Y,te,ne,se,fe=this;if(M=new he(M),M.c&&!M.isInteger())throw Error(h+"Exponent not an integer: "+De(M));if(G!=null&&(G=new he(G)),Y=M.e>14,!fe.c||!fe.c[0]||fe.c[0]==1&&!fe.e&&fe.c.length==1||!M.c||!M.c[0])return se=new he(Math.pow(+De(fe),Y?M.s*(2-P(M)):+De(M))),G?se.mod(G):se;if(te=M.s<0,G){if(G.c?!G.c[0]:!G.s)return new he(NaN);ae=!te&&fe.isInteger()&&G.isInteger(),ae&&(fe=fe.mod(G))}else{if(M.e>9&&(fe.e>0||fe.e<-1||(fe.e==0?fe.c[0]>1||Y&&fe.c[1]>=24e7:fe.c[0]<8e13||Y&&fe.c[0]<=9999975e7)))return ie=fe.s<0&&P(M)?-0:0,fe.e>-1&&(ie=1/ie),new he(te?1/ie:ie);Oe&&(ie=a(Oe/m+2))}for(Y?(J=new he(.5),te&&(M.s=1),ne=P(M)):(Z=Math.abs(+De(M)),ne=Z%2),se=new he(F);;){if(ne){if(se=se.times(fe),!se.c)break;ie?se.c.length>ie&&(se.c.length=ie):ae&&(se=se.mod(G))}if(Z){if(Z=c(Z/2),Z===0)break;ne=Z%2}else if(M=M.times(J),Ne(M,M.e+1,1),M.e>14)ne=P(M);else{if(Z=+De(M),Z===0)break;ne=Z%2}fe=fe.times(fe),ie?fe.c&&fe.c.length>ie&&(fe.c.length=ie):ae&&(fe=fe.mod(G))}return ae?se:(te&&(se=F.div(se)),G?se.mod(G):ie?Ne(se,Oe,X,oe):se)},D.integerValue=function(M){var G=new he(this);return M==null?M=X:S(M,0,8),Ne(G,G.e+1,M)},D.isEqualTo=D.eq=function(M,G){return w(this,new he(M,G))===0},D.isFinite=function(){return!!this.c},D.isGreaterThan=D.gt=function(M,G){return w(this,new he(M,G))>0},D.isGreaterThanOrEqualTo=D.gte=function(M,G){return(G=w(this,new he(M,G)))===1||G===0},D.isInteger=function(){return!!this.c&&x(this.e/m)>this.c.length-2},D.isLessThan=D.lt=function(M,G){return w(this,new he(M,G))<0},D.isLessThanOrEqualTo=D.lte=function(M,G){return(G=w(this,new he(M,G)))===-1||G===0},D.isNaN=function(){return!this.s},D.isNegative=function(){return this.s<0},D.isPositive=function(){return this.s>0},D.isZero=function(){return!!this.c&&this.c[0]==0},D.minus=function(M,G){var J,ae,Z,ie,oe=this,Y=oe.s;if(M=new he(M,G),G=M.s,!Y||!G)return new he(NaN);if(Y!=G)return M.s=-G,oe.plus(M);var te=oe.e/m,ne=M.e/m,se=oe.c,fe=M.c;if(!te||!ne){if(!se||!fe)return se?(M.s=-G,M):new he(fe?oe:NaN);if(!se[0]||!fe[0])return fe[0]?(M.s=-G,M):new he(se[0]?oe:X==3?-0:0)}if(te=x(te),ne=x(ne),se=se.slice(),Y=te-ne){for((ie=Y<0)?(Y=-Y,Z=se):(ne=te,Z=fe),Z.reverse(),G=Y;G--;Z.push(0));Z.reverse()}else for(ae=(ie=(Y=se.length)<(G=fe.length))?Y:G,Y=G=0;G<ae;G++)if(se[G]!=fe[G]){ie=se[G]<fe[G];break}if(ie&&(Z=se,se=fe,fe=Z,M.s=-M.s),G=(ae=fe.length)-(J=se.length),G>0)for(;G--;se[J++]=0);for(G=b-1;ae>Y;){if(se[--ae]<fe[ae]){for(J=ae;J&&!se[--J];se[J]=G);--se[J],se[ae]+=b}se[ae]-=fe[ae]}for(;se[0]==0;se.splice(0,1),--ne);return se[0]?Be(M,se,ne):(M.s=X==3?-1:1,M.c=[M.e=0],M)},D.modulo=D.mod=function(M,G){var J,ae,Z=this;return M=new he(M,G),!Z.c||!M.s||M.c&&!M.c[0]?new he(NaN):!M.c||Z.c&&!Z.c[0]?new he(Z):(ge==9?(ae=M.s,M.s=1,J=V(Z,M,0,3),M.s=ae,J.s*=ae):J=V(Z,M,0,ge),M=Z.minus(J.times(M)),!M.c[0]&&ge==1&&(M.s=Z.s),M)},D.multipliedBy=D.times=function(M,G){var J,ae,Z,ie,oe,Y,te,ne,se,fe,ye,ve,_,p,g,O=this,L=O.c,k=(M=new he(M,G)).c;if(!L||!k||!L[0]||!k[0])return!O.s||!M.s||L&&!L[0]&&!k||k&&!k[0]&&!L?M.c=M.e=M.s=null:(M.s*=O.s,!L||!k?M.c=M.e=null:(M.c=[0],M.e=0)),M;for(ae=x(O.e/m)+x(M.e/m),M.s*=O.s,te=L.length,fe=k.length,te<fe&&(_=L,L=k,k=_,Z=te,te=fe,fe=Z),Z=te+fe,_=[];Z--;_.push(0));for(p=b,g=T,Z=fe;--Z>=0;){for(J=0,ye=k[Z]%g,ve=k[Z]/g|0,oe=te,ie=Z+oe;ie>Z;)ne=L[--oe]%g,se=L[oe]/g|0,Y=ve*ne+se*ye,ne=ye*ne+Y%g*g+_[ie]+J,J=(ne/p|0)+(Y/g|0)+ve*se,_[ie--]=ne%p;_[ie]=J}return J?++ae:_.splice(0,1),Be(M,_,ae)},D.negated=function(){var M=new he(this);return M.s=-M.s||null,M},D.plus=function(M,G){var J,ae=this,Z=ae.s;if(M=new he(M,G),G=M.s,!Z||!G)return new he(NaN);if(Z!=G)return M.s=-G,ae.minus(M);var ie=ae.e/m,oe=M.e/m,Y=ae.c,te=M.c;if(!ie||!oe){if(!Y||!te)return new he(Z/0);if(!Y[0]||!te[0])return te[0]?M:new he(Y[0]?ae:Z*0)}if(ie=x(ie),oe=x(oe),Y=Y.slice(),Z=ie-oe){for(Z>0?(oe=ie,J=te):(Z=-Z,J=Y),J.reverse();Z--;J.push(0));J.reverse()}for(Z=Y.length,G=te.length,Z-G<0&&(J=te,te=Y,Y=J,G=Z),Z=0;G;)Z=(Y[--G]=Y[G]+te[G]+Z)/b|0,Y[G]=b===Y[G]?0:Y[G]%b;return Z&&(Y=[Z].concat(Y),++oe),Be(M,Y,oe)},D.precision=D.sd=function(M,G){var J,ae,Z,ie=this;if(M!=null&&M!==!!M)return S(M,1,j),G==null?G=X:S(G,0,8),Ne(new he(ie),M,G);if(!(J=ie.c))return null;if(Z=J.length-1,ae=Z*m+1,Z=J[Z]){for(;Z%10==0;Z/=10,ae--);for(Z=J[0];Z>=10;Z/=10,ae++);}return M&&ie.e+1>ae&&(ae=ie.e+1),ae},D.shiftedBy=function(M){return S(M,-E,E),this.times("1e"+M)},D.squareRoot=D.sqrt=function(){var M,G,J,ae,Z,ie=this,oe=ie.c,Y=ie.s,te=ie.e,ne=Q+4,se=new he("0.5");if(Y!==1||!oe||!oe[0])return new he(!Y||Y<0&&(!oe||oe[0])?NaN:oe?ie:1/0);if(Y=Math.sqrt(+De(ie)),Y==0||Y==1/0?(G=I(oe),(G.length+te)%2==0&&(G+="0"),Y=Math.sqrt(+G),te=x((te+1)/2)-(te<0||te%2),Y==1/0?G="5e"+te:(G=Y.toExponential(),G=G.slice(0,G.indexOf("e")+1)+te),J=new he(G)):J=new he(Y+""),J.c[0]){for(te=J.e,Y=te+ne,Y<3&&(Y=0);;)if(Z=J,J=se.times(Z.plus(V(ie,Z,ne,1))),I(Z.c).slice(0,Y)===(G=I(J.c)).slice(0,Y))if(J.e<te&&--Y,G=G.slice(Y-3,Y+1),G=="9999"||!ae&&G=="4999"){if(!ae&&(Ne(Z,Z.e+Q+2,0),Z.times(Z).eq(ie))){J=Z;break}ne+=4,Y+=4,ae=1}else{(!+G||!+G.slice(1)&&G.charAt(0)=="5")&&(Ne(J,J.e+Q+2,1),M=!J.times(J).eq(ie));break}}return Ne(J,J.e+Q+1,X,M)},D.toExponential=function(M,G){return M!=null&&(S(M,0,j),M++),Ae(this,M,G,1)},D.toFixed=function(M,G){return M!=null&&(S(M,0,j),M=M+this.e+1),Ae(this,M,G)},D.toFormat=function(M,G,J){var ae,Z=this;if(J==null)M!=null&&G&&typeof G=="object"?(J=G,G=null):M&&typeof M=="object"?(J=M,M=G=null):J=je;else if(typeof J!="object")throw Error(h+"Argument not an object: "+J);if(ae=Z.toFixed(M,G),Z.c){var ie,oe=ae.split("."),Y=+J.groupSize,te=+J.secondaryGroupSize,ne=J.groupSeparator||"",se=oe[0],fe=oe[1],ye=Z.s<0,ve=ye?se.slice(1):se,_=ve.length;if(te&&(ie=Y,Y=te,te=ie,_-=ie),Y>0&&_>0){for(ie=_%Y||Y,se=ve.substr(0,ie);ie<_;ie+=Y)se+=ne+ve.substr(ie,Y);te>0&&(se+=ne+ve.slice(ie)),ye&&(se="-"+se)}ae=fe?se+(J.decimalSeparator||"")+((te=+J.fractionGroupSize)?fe.replace(new RegExp("\\d{"+te+"}\\B","g"),"$&"+(J.fractionGroupSeparator||"")):fe):se}return(J.prefix||"")+ae+(J.suffix||"")},D.toFraction=function(M){var G,J,ae,Z,ie,oe,Y,te,ne,se,fe,ye,ve=this,_=ve.c;if(M!=null&&(Y=new he(M),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(F)))throw Error(h+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+De(Y));if(!_)return new he(ve);for(G=new he(F),ne=J=new he(F),ae=te=new he(F),ye=I(_),ie=G.e=ye.length-ve.e-1,G.c[0]=v[(oe=ie%m)<0?m+oe:oe],M=!M||Y.comparedTo(G)>0?ie>0?G:ne:Y,oe=de,de=1/0,Y=new he(ye),te.c[0]=0;se=V(Y,G,0,1),Z=J.plus(se.times(ae)),Z.comparedTo(M)!=1;)J=ae,ae=Z,ne=te.plus(se.times(Z=ne)),te=Z,G=Y.minus(se.times(Z=G)),Y=Z;return Z=V(M.minus(J),ae,0,1),te=te.plus(Z.times(ne)),J=J.plus(Z.times(ae)),te.s=ne.s=ve.s,ie=ie*2,fe=V(ne,ae,ie,X).minus(ve).abs().comparedTo(V(te,J,ie,X).minus(ve).abs())<1?[ne,ae]:[te,J],de=oe,fe},D.toNumber=function(){return+De(this)},D.toPrecision=function(M,G){return M!=null&&S(M,1,j),Ae(this,M,G,2)},D.toString=function(M){var G,J=this,ae=J.s,Z=J.e;return Z===null?ae?(G="Infinity",ae<0&&(G="-"+G)):G="NaN":(M==null?G=Z<=W||Z>=le?B(I(J.c),Z):H(I(J.c),Z,"0"):M===10&&Se?(J=Ne(new he(J),Q+Z+1,X),G=H(I(J.c),J.e,"0")):(S(M,2,Ie.length,"Base"),G=$(H(I(J.c),Z,"0"),10,M,ae,!0)),ae<0&&J.c[0]&&(G="-"+G)),G},D.valueOf=D.toJSON=function(){return De(this)},D._isBigNumber=!0,q!=null&&he.set(q),he}function x(q){var V=q|0;return q>0||q===V?V:V-1}function I(q){for(var V,$,ee=1,D=q.length,F=q[0]+"";ee<D;){for(V=q[ee++]+"",$=m-V.length;$--;V="0"+V);F+=V}for(D=F.length;F.charCodeAt(--D)===48;);return F.slice(0,D+1||1)}function w(q,V){var $,ee,D=q.c,F=V.c,Q=q.s,X=V.s,W=q.e,le=V.e;if(!Q||!X)return null;if($=D&&!D[0],ee=F&&!F[0],$||ee)return $?ee?0:-X:Q;if(Q!=X)return Q;if($=Q<0,ee=W==le,!D||!F)return ee?0:!D^$?1:-1;if(!ee)return W>le^$?1:-1;for(X=(W=D.length)<(le=F.length)?W:le,Q=0;Q<X;Q++)if(D[Q]!=F[Q])return D[Q]>F[Q]^$?1:-1;return W==le?0:W>le^$?1:-1}function S(q,V,$,ee){if(q<V||q>$||q!==c(q))throw Error(h+(ee||"Argument")+(typeof q=="number"?q<V||q>$?" out of range: ":" not an integer: ":" not a primitive number: ")+String(q))}function P(q){var V=q.c.length-1;return x(q.e/m)==V&&q.c[V]%2!=0}function B(q,V){return(q.length>1?q.charAt(0)+"."+q.slice(1):q)+(V<0?"e":"e+")+V}function H(q,V,$){var ee,D;if(V<0){for(D=$+".";++V;D+=$);q=D+q}else if(ee=q.length,++V>ee){for(D=$,V-=ee;--V;D+=$);q+=D}else V<ee&&(q=q.slice(0,V)+"."+q.slice(V));return q}d=N(),d.default=d.BigNumber=d,o=function(){return d}.call(e,t,e,n),o!==void 0&&(n.exports=o)})()},"../node_modules/canonicalize/lib/canonicalize.js":n=>{n.exports=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((o,l,d)=>{const u=d===0?"":",",a=l===void 0||typeof l=="symbol"?null:l;return o+u+e(a)},"")+"]":"{"+Object.keys(t).sort().reduce((o,l,d)=>{if(t[l]===void 0||typeof t[l]=="symbol")return o;const u=o.length===0?"":",";return o+u+e(l)+":"+e(t[l])},"")+"}"}},"../node_modules/hash.js/lib/hash.js":(n,e,t)=>{var o=e;o.utils=t("../node_modules/hash.js/lib/hash/utils.js"),o.common=t("../node_modules/hash.js/lib/hash/common.js"),o.sha=t("../node_modules/hash.js/lib/hash/sha.js"),o.ripemd=t("../node_modules/hash.js/lib/hash/ripemd.js"),o.hmac=t("../node_modules/hash.js/lib/hash/hmac.js"),o.sha1=o.sha.sha1,o.sha256=o.sha.sha256,o.sha224=o.sha.sha224,o.sha384=o.sha.sha384,o.sha512=o.sha.sha512,o.ripemd160=o.ripemd.ripemd160},"../node_modules/hash.js/lib/hash/common.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/minimalistic-assert/index.js");function d(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=d,d.prototype.update=function(a,c){if(a=o.toArray(a,c),this.pending?this.pending=this.pending.concat(a):this.pending=a,this.pendingTotal+=a.length,this.pending.length>=this._delta8){a=this.pending;var h=a.length%this._delta8;this.pending=a.slice(a.length-h,a.length),this.pending.length===0&&(this.pending=null),a=o.join32(a,0,a.length-h,this.endian);for(var y=0;y<a.length;y+=this._delta32)this._update(a,y,y+this._delta32)}return this},d.prototype.digest=function(a){return this.update(this._pad()),l(this.pending===null),this._digest(a)},d.prototype._pad=function(){var a=this.pendingTotal,c=this._delta8,h=c-(a+this.padLength)%c,y=new Array(h+this.padLength);y[0]=128;for(var b=1;b<h;b++)y[b]=0;if(a<<=3,this.endian==="big"){for(var m=8;m<this.padLength;m++)y[b++]=0;y[b++]=0,y[b++]=0,y[b++]=0,y[b++]=0,y[b++]=a>>>24&255,y[b++]=a>>>16&255,y[b++]=a>>>8&255,y[b++]=a&255}else for(y[b++]=a&255,y[b++]=a>>>8&255,y[b++]=a>>>16&255,y[b++]=a>>>24&255,y[b++]=0,y[b++]=0,y[b++]=0,y[b++]=0,m=8;m<this.padLength;m++)y[b++]=0;return y}},"../node_modules/hash.js/lib/hash/hmac.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/minimalistic-assert/index.js");function d(u,a,c){if(!(this instanceof d))return new d(u,a,c);this.Hash=u,this.blockSize=u.blockSize/8,this.outSize=u.outSize/8,this.inner=null,this.outer=null,this._init(o.toArray(a,c))}n.exports=d,d.prototype._init=function(a){a.length>this.blockSize&&(a=new this.Hash().update(a).digest()),l(a.length<=this.blockSize);for(var c=a.length;c<this.blockSize;c++)a.push(0);for(c=0;c<a.length;c++)a[c]^=54;for(this.inner=new this.Hash().update(a),c=0;c<a.length;c++)a[c]^=106;this.outer=new this.Hash().update(a)},d.prototype.update=function(a,c){return this.inner.update(a,c),this},d.prototype.digest=function(a){return this.outer.update(this.inner.digest()),this.outer.digest(a)}},"../node_modules/hash.js/lib/hash/ripemd.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=o.rotl32,u=o.sum32,a=o.sum32_3,c=o.sum32_4,h=l.BlockHash;function y(){if(!(this instanceof y))return new y;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}o.inherits(y,h),e.ripemd160=y,y.blockSize=512,y.outSize=160,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(I,w){for(var S=this.h[0],P=this.h[1],B=this.h[2],H=this.h[3],q=this.h[4],V=S,$=P,ee=B,D=H,F=q,Q=0;Q<80;Q++){var X=u(d(c(S,b(Q,P,B,H),I[v[Q]+w],m(Q)),j[Q]),q);S=q,q=H,H=d(B,10),B=P,P=X,X=u(d(c(V,b(79-Q,$,ee,D),I[T[Q]+w],E(Q)),N[Q]),F),V=F,F=D,D=d(ee,10),ee=$,$=X}X=a(this.h[1],B,D),this.h[1]=a(this.h[2],H,F),this.h[2]=a(this.h[3],q,V),this.h[3]=a(this.h[4],S,$),this.h[4]=a(this.h[0],P,ee),this.h[0]=X},y.prototype._digest=function(I){return I==="hex"?o.toHex32(this.h,"little"):o.split32(this.h,"little")};function b(x,I,w,S){return x<=15?I^w^S:x<=31?I&w|~I&S:x<=47?(I|~w)^S:x<=63?I&S|w&~S:I^(w|~S)}function m(x){return x<=15?0:x<=31?1518500249:x<=47?1859775393:x<=63?2400959708:2840853838}function E(x){return x<=15?1352829926:x<=31?1548603684:x<=47?1836072691:x<=63?2053994217:0}var v=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],T=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],j=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],N=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},"../node_modules/hash.js/lib/hash/sha.js":(n,e,t)=>{e.sha1=t("../node_modules/hash.js/lib/hash/sha/1.js"),e.sha224=t("../node_modules/hash.js/lib/hash/sha/224.js"),e.sha256=t("../node_modules/hash.js/lib/hash/sha/256.js"),e.sha384=t("../node_modules/hash.js/lib/hash/sha/384.js"),e.sha512=t("../node_modules/hash.js/lib/hash/sha/512.js")},"../node_modules/hash.js/lib/hash/sha/1.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=t("../node_modules/hash.js/lib/hash/sha/common.js"),u=o.rotl32,a=o.sum32,c=o.sum32_5,h=d.ft_1,y=l.BlockHash,b=[1518500249,1859775393,2400959708,3395469782];function m(){if(!(this instanceof m))return new m;y.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}o.inherits(m,y),n.exports=m,m.blockSize=512,m.outSize=160,m.hmacStrength=80,m.padLength=64,m.prototype._update=function(v,T){for(var j=this.W,N=0;N<16;N++)j[N]=v[T+N];for(;N<j.length;N++)j[N]=u(j[N-3]^j[N-8]^j[N-14]^j[N-16],1);var x=this.h[0],I=this.h[1],w=this.h[2],S=this.h[3],P=this.h[4];for(N=0;N<j.length;N++){var B=~~(N/20),H=c(u(x,5),h(B,I,w,S),P,j[N],b[B]);P=S,S=w,w=u(I,30),I=x,x=H}this.h[0]=a(this.h[0],x),this.h[1]=a(this.h[1],I),this.h[2]=a(this.h[2],w),this.h[3]=a(this.h[3],S),this.h[4]=a(this.h[4],P)},m.prototype._digest=function(v){return v==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/224.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/sha/256.js");function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}o.inherits(d,l),n.exports=d,d.blockSize=512,d.outSize=224,d.hmacStrength=192,d.padLength=64,d.prototype._digest=function(a){return a==="hex"?o.toHex32(this.h.slice(0,7),"big"):o.split32(this.h.slice(0,7),"big")}},"../node_modules/hash.js/lib/hash/sha/256.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=t("../node_modules/hash.js/lib/hash/sha/common.js"),u=t("../node_modules/minimalistic-assert/index.js"),a=o.sum32,c=o.sum32_4,h=o.sum32_5,y=d.ch32,b=d.maj32,m=d.s0_256,E=d.s1_256,v=d.g0_256,T=d.g1_256,j=l.BlockHash,N=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function x(){if(!(this instanceof x))return new x;j.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=N,this.W=new Array(64)}o.inherits(x,j),n.exports=x,x.blockSize=512,x.outSize=256,x.hmacStrength=192,x.padLength=64,x.prototype._update=function(w,S){for(var P=this.W,B=0;B<16;B++)P[B]=w[S+B];for(;B<P.length;B++)P[B]=c(T(P[B-2]),P[B-7],v(P[B-15]),P[B-16]);var H=this.h[0],q=this.h[1],V=this.h[2],$=this.h[3],ee=this.h[4],D=this.h[5],F=this.h[6],Q=this.h[7];for(u(this.k.length===P.length),B=0;B<P.length;B++){var X=h(Q,E(ee),y(ee,D,F),this.k[B],P[B]),W=a(m(H),b(H,q,V));Q=F,F=D,D=ee,ee=a($,X),$=V,V=q,q=H,H=a(X,W)}this.h[0]=a(this.h[0],H),this.h[1]=a(this.h[1],q),this.h[2]=a(this.h[2],V),this.h[3]=a(this.h[3],$),this.h[4]=a(this.h[4],ee),this.h[5]=a(this.h[5],D),this.h[6]=a(this.h[6],F),this.h[7]=a(this.h[7],Q)},x.prototype._digest=function(w){return w==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/384.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/sha/512.js");function d(){if(!(this instanceof d))return new d;l.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}o.inherits(d,l),n.exports=d,d.blockSize=1024,d.outSize=384,d.hmacStrength=192,d.padLength=128,d.prototype._digest=function(a){return a==="hex"?o.toHex32(this.h.slice(0,12),"big"):o.split32(this.h.slice(0,12),"big")}},"../node_modules/hash.js/lib/hash/sha/512.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=t("../node_modules/hash.js/lib/hash/common.js"),d=t("../node_modules/minimalistic-assert/index.js"),u=o.rotr64_hi,a=o.rotr64_lo,c=o.shr64_hi,h=o.shr64_lo,y=o.sum64,b=o.sum64_hi,m=o.sum64_lo,E=o.sum64_4_hi,v=o.sum64_4_lo,T=o.sum64_5_hi,j=o.sum64_5_lo,N=l.BlockHash,x=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function I(){if(!(this instanceof I))return new I;N.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=x,this.W=new Array(160)}o.inherits(I,N),n.exports=I,I.blockSize=1024,I.outSize=512,I.hmacStrength=192,I.padLength=128,I.prototype._prepareBlock=function(W,le){for(var ue=this.W,de=0;de<32;de++)ue[de]=W[le+de];for(;de<ue.length;de+=2){var ce=F(ue[de-4],ue[de-3]),ge=Q(ue[de-4],ue[de-3]),Oe=ue[de-14],je=ue[de-13],Ie=ee(ue[de-30],ue[de-29]),Se=D(ue[de-30],ue[de-29]),he=ue[de-32],Ae=ue[de-31];ue[de]=E(ce,ge,Oe,je,Ie,Se,he,Ae),ue[de+1]=v(ce,ge,Oe,je,Ie,Se,he,Ae)}},I.prototype._update=function(W,le){this._prepareBlock(W,le);var ue=this.W,de=this.h[0],ce=this.h[1],ge=this.h[2],Oe=this.h[3],je=this.h[4],Ie=this.h[5],Se=this.h[6],he=this.h[7],Ae=this.h[8],Re=this.h[9],Be=this.h[10],Ne=this.h[11],De=this.h[12],M=this.h[13],G=this.h[14],J=this.h[15];d(this.k.length===ue.length);for(var ae=0;ae<ue.length;ae+=2){var Z=G,ie=J,oe=V(Ae,Re),Y=$(Ae,Re),te=w(Ae,Re,Be,Ne,De),ne=S(Ae,Re,Be,Ne,De,M),se=this.k[ae],fe=this.k[ae+1],ye=ue[ae],ve=ue[ae+1],_=T(Z,ie,oe,Y,te,ne,se,fe,ye,ve),p=j(Z,ie,oe,Y,te,ne,se,fe,ye,ve);Z=H(de,ce),ie=q(de,ce),oe=P(de,ce,ge,Oe,je),Y=B(de,ce,ge,Oe,je,Ie);var g=b(Z,ie,oe,Y),O=m(Z,ie,oe,Y);G=De,J=M,De=Be,M=Ne,Be=Ae,Ne=Re,Ae=b(Se,he,_,p),Re=m(he,he,_,p),Se=je,he=Ie,je=ge,Ie=Oe,ge=de,Oe=ce,de=b(_,p,g,O),ce=m(_,p,g,O)}y(this.h,0,de,ce),y(this.h,2,ge,Oe),y(this.h,4,je,Ie),y(this.h,6,Se,he),y(this.h,8,Ae,Re),y(this.h,10,Be,Ne),y(this.h,12,De,M),y(this.h,14,G,J)},I.prototype._digest=function(W){return W==="hex"?o.toHex32(this.h,"big"):o.split32(this.h,"big")};function w(X,W,le,ue,de){var ce=X&le^~X&de;return ce<0&&(ce+=4294967296),ce}function S(X,W,le,ue,de,ce){var ge=W&ue^~W&ce;return ge<0&&(ge+=4294967296),ge}function P(X,W,le,ue,de){var ce=X&le^X&de^le&de;return ce<0&&(ce+=4294967296),ce}function B(X,W,le,ue,de,ce){var ge=W&ue^W&ce^ue&ce;return ge<0&&(ge+=4294967296),ge}function H(X,W){var le=u(X,W,28),ue=u(W,X,2),de=u(W,X,7),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}function q(X,W){var le=a(X,W,28),ue=a(W,X,2),de=a(W,X,7),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}function V(X,W){var le=u(X,W,14),ue=u(X,W,18),de=u(W,X,9),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}function $(X,W){var le=a(X,W,14),ue=a(X,W,18),de=a(W,X,9),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}function ee(X,W){var le=u(X,W,1),ue=u(X,W,8),de=c(X,W,7),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}function D(X,W){var le=a(X,W,1),ue=a(X,W,8),de=h(X,W,7),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}function F(X,W){var le=u(X,W,19),ue=u(W,X,29),de=c(X,W,6),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}function Q(X,W){var le=a(X,W,19),ue=a(W,X,29),de=h(X,W,6),ce=le^ue^de;return ce<0&&(ce+=4294967296),ce}},"../node_modules/hash.js/lib/hash/sha/common.js":(n,e,t)=>{var o=t("../node_modules/hash.js/lib/hash/utils.js"),l=o.rotr32;function d(E,v,T,j){if(E===0)return u(v,T,j);if(E===1||E===3)return c(v,T,j);if(E===2)return a(v,T,j)}e.ft_1=d;function u(E,v,T){return E&v^~E&T}e.ch32=u;function a(E,v,T){return E&v^E&T^v&T}e.maj32=a;function c(E,v,T){return E^v^T}e.p32=c;function h(E){return l(E,2)^l(E,13)^l(E,22)}e.s0_256=h;function y(E){return l(E,6)^l(E,11)^l(E,25)}e.s1_256=y;function b(E){return l(E,7)^l(E,18)^E>>>3}e.g0_256=b;function m(E){return l(E,17)^l(E,19)^E>>>10}e.g1_256=m},"../node_modules/hash.js/lib/hash/utils.js":(n,e,t)=>{var o=t("../node_modules/minimalistic-assert/index.js"),l=t("../node_modules/inherits/inherits_browser.js");e.inherits=l;function d(Q,X){return(Q.charCodeAt(X)&64512)!==55296||X<0||X+1>=Q.length?!1:(Q.charCodeAt(X+1)&64512)===56320}function u(Q,X){if(Array.isArray(Q))return Q.slice();if(!Q)return[];var W=[];if(typeof Q=="string")if(X){if(X==="hex")for(Q=Q.replace(/[^a-z0-9]+/ig,""),Q.length%2!==0&&(Q="0"+Q),ue=0;ue<Q.length;ue+=2)W.push(parseInt(Q[ue]+Q[ue+1],16))}else for(var le=0,ue=0;ue<Q.length;ue++){var de=Q.charCodeAt(ue);de<128?W[le++]=de:de<2048?(W[le++]=de>>6|192,W[le++]=de&63|128):d(Q,ue)?(de=65536+((de&1023)<<10)+(Q.charCodeAt(++ue)&1023),W[le++]=de>>18|240,W[le++]=de>>12&63|128,W[le++]=de>>6&63|128,W[le++]=de&63|128):(W[le++]=de>>12|224,W[le++]=de>>6&63|128,W[le++]=de&63|128)}else for(ue=0;ue<Q.length;ue++)W[ue]=Q[ue]|0;return W}e.toArray=u;function a(Q){for(var X="",W=0;W<Q.length;W++)X+=y(Q[W].toString(16));return X}e.toHex=a;function c(Q){var X=Q>>>24|Q>>>8&65280|Q<<8&16711680|(Q&255)<<24;return X>>>0}e.htonl=c;function h(Q,X){for(var W="",le=0;le<Q.length;le++){var ue=Q[le];X==="little"&&(ue=c(ue)),W+=b(ue.toString(16))}return W}e.toHex32=h;function y(Q){return Q.length===1?"0"+Q:Q}e.zero2=y;function b(Q){return Q.length===7?"0"+Q:Q.length===6?"00"+Q:Q.length===5?"000"+Q:Q.length===4?"0000"+Q:Q.length===3?"00000"+Q:Q.length===2?"000000"+Q:Q.length===1?"0000000"+Q:Q}e.zero8=b;function m(Q,X,W,le){var ue=W-X;o(ue%4===0);for(var de=new Array(ue/4),ce=0,ge=X;ce<de.length;ce++,ge+=4){var Oe;le==="big"?Oe=Q[ge]<<24|Q[ge+1]<<16|Q[ge+2]<<8|Q[ge+3]:Oe=Q[ge+3]<<24|Q[ge+2]<<16|Q[ge+1]<<8|Q[ge],de[ce]=Oe>>>0}return de}e.join32=m;function E(Q,X){for(var W=new Array(Q.length*4),le=0,ue=0;le<Q.length;le++,ue+=4){var de=Q[le];X==="big"?(W[ue]=de>>>24,W[ue+1]=de>>>16&255,W[ue+2]=de>>>8&255,W[ue+3]=de&255):(W[ue+3]=de>>>24,W[ue+2]=de>>>16&255,W[ue+1]=de>>>8&255,W[ue]=de&255)}return W}e.split32=E;function v(Q,X){return Q>>>X|Q<<32-X}e.rotr32=v;function T(Q,X){return Q<<X|Q>>>32-X}e.rotl32=T;function j(Q,X){return Q+X>>>0}e.sum32=j;function N(Q,X,W){return Q+X+W>>>0}e.sum32_3=N;function x(Q,X,W,le){return Q+X+W+le>>>0}e.sum32_4=x;function I(Q,X,W,le,ue){return Q+X+W+le+ue>>>0}e.sum32_5=I;function w(Q,X,W,le){var ue=Q[X],de=Q[X+1],ce=le+de>>>0,ge=(ce<le?1:0)+W+ue;Q[X]=ge>>>0,Q[X+1]=ce}e.sum64=w;function S(Q,X,W,le){var ue=X+le>>>0,de=(ue<X?1:0)+Q+W;return de>>>0}e.sum64_hi=S;function P(Q,X,W,le){var ue=X+le;return ue>>>0}e.sum64_lo=P;function B(Q,X,W,le,ue,de,ce,ge){var Oe=0,je=X;je=je+le>>>0,Oe+=je<X?1:0,je=je+de>>>0,Oe+=je<de?1:0,je=je+ge>>>0,Oe+=je<ge?1:0;var Ie=Q+W+ue+ce+Oe;return Ie>>>0}e.sum64_4_hi=B;function H(Q,X,W,le,ue,de,ce,ge){var Oe=X+le+de+ge;return Oe>>>0}e.sum64_4_lo=H;function q(Q,X,W,le,ue,de,ce,ge,Oe,je){var Ie=0,Se=X;Se=Se+le>>>0,Ie+=Se<X?1:0,Se=Se+de>>>0,Ie+=Se<de?1:0,Se=Se+ge>>>0,Ie+=Se<ge?1:0,Se=Se+je>>>0,Ie+=Se<je?1:0;var he=Q+W+ue+ce+Oe+Ie;return he>>>0}e.sum64_5_hi=q;function V(Q,X,W,le,ue,de,ce,ge,Oe,je){var Ie=X+le+de+ge+je;return Ie>>>0}e.sum64_5_lo=V;function $(Q,X,W){var le=X<<32-W|Q>>>W;return le>>>0}e.rotr64_hi=$;function ee(Q,X,W){var le=Q<<32-W|X>>>W;return le>>>0}e.rotr64_lo=ee;function D(Q,X,W){return Q>>>W}e.shr64_hi=D;function F(Q,X,W){var le=Q<<32-W|X>>>W;return le>>>0}e.shr64_lo=F},"../node_modules/inherits/inherits_browser.js":n=>{typeof Object.create=="function"?n.exports=function(t,o){o&&(t.super_=o,t.prototype=Object.create(o.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,o){if(o){t.super_=o;var l=function(){};l.prototype=o.prototype,t.prototype=new l,t.prototype.constructor=t}}},"../node_modules/lru-cache/index.js":(n,e,t)=>{const o=t("../node_modules/yallist/yallist.js"),l=Symbol("max"),d=Symbol("length"),u=Symbol("lengthCalculator"),a=Symbol("allowStale"),c=Symbol("maxAge"),h=Symbol("dispose"),y=Symbol("noDisposeOnSet"),b=Symbol("lruList"),m=Symbol("cache"),E=Symbol("updateAgeOnGet"),v=()=>1;class T{constructor(B){if(typeof B=="number"&&(B={max:B}),B||(B={}),B.max&&(typeof B.max!="number"||B.max<0))throw new TypeError("max must be a non-negative number");this[l]=B.max||1/0;const H=B.length||v;if(this[u]=typeof H!="function"?v:H,this[a]=B.stale||!1,B.maxAge&&typeof B.maxAge!="number")throw new TypeError("maxAge must be a number");this[c]=B.maxAge||0,this[h]=B.dispose,this[y]=B.noDisposeOnSet||!1,this[E]=B.updateAgeOnGet||!1,this.reset()}set max(B){if(typeof B!="number"||B<0)throw new TypeError("max must be a non-negative number");this[l]=B||1/0,x(this)}get max(){return this[l]}set allowStale(B){this[a]=!!B}get allowStale(){return this[a]}set maxAge(B){if(typeof B!="number")throw new TypeError("maxAge must be a non-negative number");this[c]=B,x(this)}get maxAge(){return this[c]}set lengthCalculator(B){typeof B!="function"&&(B=v),B!==this[u]&&(this[u]=B,this[d]=0,this[b].forEach(H=>{H.length=this[u](H.value,H.key),this[d]+=H.length})),x(this)}get lengthCalculator(){return this[u]}get length(){return this[d]}get itemCount(){return this[b].length}rforEach(B,H){H=H||this;for(let q=this[b].tail;q!==null;){const V=q.prev;S(this,B,q,H),q=V}}forEach(B,H){H=H||this;for(let q=this[b].head;q!==null;){const V=q.next;S(this,B,q,H),q=V}}keys(){return this[b].toArray().map(B=>B.key)}values(){return this[b].toArray().map(B=>B.value)}reset(){this[h]&&this[b]&&this[b].length&&this[b].forEach(B=>this[h](B.key,B.value)),this[m]=new Map,this[b]=new o,this[d]=0}dump(){return this[b].map(B=>N(this,B)?!1:{k:B.key,v:B.value,e:B.now+(B.maxAge||0)}).toArray().filter(B=>B)}dumpLru(){return this[b]}set(B,H,q){if(q=q||this[c],q&&typeof q!="number")throw new TypeError("maxAge must be a number");const V=q?Date.now():0,$=this[u](H,B);if(this[m].has(B)){if($>this[l])return I(this,this[m].get(B)),!1;const F=this[m].get(B).value;return this[h]&&(this[y]||this[h](B,F.value)),F.now=V,F.maxAge=q,F.value=H,this[d]+=$-F.length,F.length=$,this.get(B),x(this),!0}const ee=new w(B,H,$,V,q);return ee.length>this[l]?(this[h]&&this[h](B,H),!1):(this[d]+=ee.length,this[b].unshift(ee),this[m].set(B,this[b].head),x(this),!0)}has(B){if(!this[m].has(B))return!1;const H=this[m].get(B).value;return!N(this,H)}get(B){return j(this,B,!0)}peek(B){return j(this,B,!1)}pop(){const B=this[b].tail;return B?(I(this,B),B.value):null}del(B){I(this,this[m].get(B))}load(B){this.reset();const H=Date.now();for(let q=B.length-1;q>=0;q--){const V=B[q],$=V.e||0;if($===0)this.set(V.k,V.v);else{const ee=$-H;ee>0&&this.set(V.k,V.v,ee)}}}prune(){this[m].forEach((B,H)=>j(this,H,!1))}}const j=(P,B,H)=>{const q=P[m].get(B);if(q){const V=q.value;if(N(P,V)){if(I(P,q),!P[a])return}else H&&(P[E]&&(q.value.now=Date.now()),P[b].unshiftNode(q));return V.value}},N=(P,B)=>{if(!B||!B.maxAge&&!P[c])return!1;const H=Date.now()-B.now;return B.maxAge?H>B.maxAge:P[c]&&H>P[c]},x=P=>{if(P[d]>P[l])for(let B=P[b].tail;P[d]>P[l]&&B!==null;){const H=B.prev;I(P,B),B=H}},I=(P,B)=>{if(B){const H=B.value;P[h]&&P[h](H.key,H.value),P[d]-=H.length,P[m].delete(H.key),P[b].removeNode(B)}};class w{constructor(B,H,q,V,$){this.key=B,this.value=H,this.length=q,this.now=V,this.maxAge=$||0}}const S=(P,B,H,q)=>{let V=H.value;N(P,V)&&(I(P,H),P[a]||(V=void 0)),V&&B.call(q,V.value,V.key,P)};n.exports=T},"../node_modules/minimalistic-assert/index.js":n=>{n.exports=e;function e(t,o){if(!t)throw new Error(o||"Assertion failed")}e.equal=function(o,l,d){if(o!=l)throw new Error(d||"Assertion failed: "+o+" != "+l)}},"../node_modules/rdf-data-factory/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/rdf-data-factory/lib/BlankNode.js"),e),l(t("../node_modules/rdf-data-factory/lib/DataFactory.js"),e),l(t("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),e),l(t("../node_modules/rdf-data-factory/lib/Literal.js"),e),l(t("../node_modules/rdf-data-factory/lib/NamedNode.js"),e),l(t("../node_modules/rdf-data-factory/lib/Quad.js"),e),l(t("../node_modules/rdf-data-factory/lib/Variable.js"),e)},"../node_modules/rdf-data-factory/lib/BlankNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNode=void 0;class t{constructor(l){this.termType="BlankNode",this.value=l}equals(l){return!!l&&l.termType==="BlankNode"&&l.value===this.value}}e.BlankNode=t},"../node_modules/rdf-data-factory/lib/DataFactory.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataFactory=void 0;const o=t("../node_modules/rdf-data-factory/lib/BlankNode.js"),l=t("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),d=t("../node_modules/rdf-data-factory/lib/Literal.js"),u=t("../node_modules/rdf-data-factory/lib/NamedNode.js"),a=t("../node_modules/rdf-data-factory/lib/Quad.js"),c=t("../node_modules/rdf-data-factory/lib/Variable.js");let h=0;class y{constructor(m){this.blankNodeCounter=0,m=m||{},this.blankNodePrefix=m.blankNodePrefix||`df_${h++}_`}namedNode(m){return new u.NamedNode(m)}blankNode(m){return new o.BlankNode(m||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(m,E){return new d.Literal(m,E)}variable(m){return new c.Variable(m)}defaultGraph(){return l.DefaultGraph.INSTANCE}quad(m,E,v,T){return new a.Quad(m,E,v,T||this.defaultGraph())}fromTerm(m){switch(m.termType){case"NamedNode":return this.namedNode(m.value);case"BlankNode":return this.blankNode(m.value);case"Literal":return m.language?this.literal(m.value,m.language):m.datatype.equals(d.Literal.XSD_STRING)?this.literal(m.value):this.literal(m.value,this.fromTerm(m.datatype));case"Variable":return this.variable(m.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(m.subject),this.fromTerm(m.predicate),this.fromTerm(m.object),this.fromTerm(m.graph))}}fromQuad(m){return this.fromTerm(m)}resetBlankNodeCounter(){this.blankNodeCounter=0}}e.DataFactory=y},"../node_modules/rdf-data-factory/lib/DefaultGraph.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultGraph=void 0;class t{constructor(){this.termType="DefaultGraph",this.value=""}equals(l){return!!l&&l.termType==="DefaultGraph"}}e.DefaultGraph=t,t.INSTANCE=new t},"../node_modules/rdf-data-factory/lib/Literal.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Literal=void 0;const o=t("../node_modules/rdf-data-factory/lib/NamedNode.js");class l{constructor(u,a){this.termType="Literal",this.value=u,typeof a=="string"?(this.language=a,this.datatype=l.RDF_LANGUAGE_STRING):a?(this.language="",this.datatype=a):(this.language="",this.datatype=l.XSD_STRING)}equals(u){return!!u&&u.termType==="Literal"&&u.value===this.value&&u.language===this.language&&u.datatype.equals(this.datatype)}}e.Literal=l,l.RDF_LANGUAGE_STRING=new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),l.XSD_STRING=new o.NamedNode("http://www.w3.org/2001/XMLSchema#string")},"../node_modules/rdf-data-factory/lib/NamedNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedNode=void 0;class t{constructor(l){this.termType="NamedNode",this.value=l}equals(l){return!!l&&l.termType==="NamedNode"&&l.value===this.value}}e.NamedNode=t},"../node_modules/rdf-data-factory/lib/Quad.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Quad=void 0;class t{constructor(l,d,u,a){this.termType="Quad",this.value="",this.subject=l,this.predicate=d,this.object=u,this.graph=a}equals(l){return!!l&&(l.termType==="Quad"||!l.termType)&&this.subject.equals(l.subject)&&this.predicate.equals(l.predicate)&&this.object.equals(l.object)&&this.graph.equals(l.graph)}}e.Quad=t},"../node_modules/rdf-data-factory/lib/Variable.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;class t{constructor(l){this.termType="Variable",this.value=l}equals(l){return!!l&&l.termType==="Variable"&&l.value===this.value}}e.Variable=t},"../node_modules/rdf-string/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralLanguage=void 0;const o=t("../node_modules/rdf-string/lib/TermUtil.js");Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return o.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return o.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return o.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return o.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return o.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return o.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return o.termToString}})},"../node_modules/rdf-string/lib/TermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringQuadToQuad=e.quadToStringQuad=e.stringToTerm=e.getLiteralLanguage=e.getLiteralType=e.getLiteralValue=e.termToString=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=new o.DataFactory;function d(m){if(m)switch(m.termType){case"NamedNode":return m.value;case"BlankNode":return"_:"+m.value;case"Literal":const E=m;return'"'+E.value+'"'+(E.datatype&&E.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&E.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+E.datatype.value:"")+(E.language?"@"+E.language:"");case"Quad":return`<<${d(m.subject)} ${d(m.predicate)} ${d(m.object)}${m.graph.termType==="DefaultGraph"?"":" "+d(m.graph)}>>`;case"Variable":return"?"+m.value;case"DefaultGraph":return m.value}}e.termToString=d;function u(m){const E=/^"([^]*)"/.exec(m);if(!E)throw new Error(m+" is not a literal");return E[1]}e.getLiteralValue=u;function a(m){const E=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(m);if(!E)throw new Error(m+" is not a literal");return E[1]||(E[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}e.getLiteralType=a;function c(m){const E=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(m);if(!E)throw new Error(m+" is not a literal");return E[1]?E[1].toLowerCase():""}e.getLiteralLanguage=c;function h(m,E){if(E=E||l,!m||!m.length)return E.defaultGraph();switch(m[0]){case"_":return E.blankNode(m.substr(2));case"?":if(!E.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return E.variable(m.substr(1));case'"':const v=c(m),T=E.namedNode(a(m));return E.literal(u(m),v||T);case"<":default:if(m.startsWith("<<")&&m.endsWith(">>")){const j=m.slice(2,-2).trim();let N=[],x=0,I=0,w=!1;for(let S=0;S<j.length;S++){const P=j[S];if(P==="<"&&x++,P===">"){if(x===0)throw new Error("Found closing tag without opening tag in "+m);x--}if(P==='"'){let B=!1,H=S;for(;H-- >0&&j[H]==="\\";)B=!B;B||(w=!w)}if(P===" "&&!w&&x===0){for(N.push(j.slice(I,S));j[S+1]===" ";)S+=1;I=S+1}}if(x!==0)throw new Error("Found opening tag without closing tag in "+m);if(N.push(j.slice(I,j.length)),N.length!==3&&N.length!==4)throw new Error("Nested quad syntax error "+m);return N=N.map(S=>S.startsWith("<")&&!S.includes(" ")?S.slice(1,-1):S),E.quad(h(N[0]),h(N[1]),h(N[2]),N[3]?h(N[3]):void 0)}return E.namedNode(m)}}e.stringToTerm=h;function y(m){return{subject:d(m.subject),predicate:d(m.predicate),object:d(m.object),graph:d(m.graph)}}e.quadToStringQuad=y;function b(m,E){return E=E||l,E.quad(h(m.subject,E),h(m.predicate,E),h(m.object,E),h(m.graph,E))}e.stringQuadToQuad=b},"../node_modules/rdf-terms/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/rdf-terms/lib/QuadTermUtil.js"),e),l(t("../node_modules/rdf-terms/lib/TermUtil.js"),e)},"../node_modules/rdf-terms/lib/QuadTermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.matchPatternMappings=e.matchPatternComplete=e.matchPattern=e.matchTerm=e.someTerms=e.everyTerms=e.reduceTerms=e.mapTerms=e.filterQuadTermNames=e.filterTerms=e.forEachTerms=e.collectNamedTerms=e.getNamedTerms=e.getTermsNested=e.getTerms=e.TRIPLE_TERM_NAMES=e.QUAD_TERM_NAMES=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=new o.DataFactory;e.QUAD_TERM_NAMES=["subject","predicate","object","graph"],e.TRIPLE_TERM_NAMES=["subject","predicate","object"];function d(w,S){return S&&w.graph.termType==="DefaultGraph"?[w.subject,w.predicate,w.object]:[w.subject,w.predicate,w.object,w.graph]}e.getTerms=d;function u(w,S){const P=[];for(const B of d(w,S))B.termType==="Quad"?u(B,S).forEach(H=>P.push(H)):P.push(B);return P}e.getTermsNested=u;function a(w){return[{key:"subject",value:w.subject},{key:"predicate",value:w.predicate},{key:"object",value:w.object},{key:"graph",value:w.graph}]}e.getNamedTerms=a;function c(w,S,P){const B={};return w.forEach(H=>B[H.key]=H.value),S&&(B.subject=B.subject||S("subject"),B.predicate=B.predicate||S("predicate"),B.object=B.object||S("object"),B.graph=B.graph||S("graph")),(P||l).quad(B.subject,B.predicate,B.object,B.graph)}e.collectNamedTerms=c;function h(w,S){S(w.subject,"subject"),S(w.predicate,"predicate"),S(w.object,"object"),S(w.graph,"graph")}e.forEachTerms=h;function y(w,S){const P=[];return S(w.subject,"subject")&&P.push(w.subject),S(w.predicate,"predicate")&&P.push(w.predicate),S(w.object,"object")&&P.push(w.object),S(w.graph,"graph")&&P.push(w.graph),P}e.filterTerms=y;function b(w,S){const P=[];return S(w.subject,"subject")&&P.push("subject"),S(w.predicate,"predicate")&&P.push("predicate"),S(w.object,"object")&&P.push("object"),S(w.graph,"graph")&&P.push("graph"),P}e.filterQuadTermNames=b;function m(w,S,P){return(P||l).quad(S(w.subject,"subject"),S(w.predicate,"predicate"),S(w.object,"object"),S(w.graph,"graph"))}e.mapTerms=m;function E(w,S,P){let B=P;return B=S(B,w.subject,"subject"),B=S(B,w.predicate,"predicate"),B=S(B,w.object,"object"),S(B,w.graph,"graph")}e.reduceTerms=E;function v(w,S){return S(w.subject,"subject")&&S(w.predicate,"predicate")&&S(w.object,"object")&&S(w.graph,"graph")}e.everyTerms=v;function T(w,S){return S(w.subject,"subject")||S(w.predicate,"predicate")||S(w.object,"object")||S(w.graph,"graph")}e.someTerms=T;function j(w,S){return!S||S.termType==="Variable"||S.termType==="Quad"&&w.termType==="Quad"&&x(w,S)||S.equals(w)}e.matchTerm=j;function N(w,S,P,B,H){return j(w.subject,S)&&j(w.predicate,P)&&j(w.object,B)&&j(w.graph,H)}e.matchPattern=N;function x(w,S){return N(w,S.subject,S.predicate,S.object,S.graph)}e.matchPatternComplete=x;function I(w,S,P={}){const B={};function H(q,V){return v(q,($,ee)=>{var D,F;const Q=V[ee];switch($.termType){case"Variable":return P.skipVarMapping&&Q.termType==="Variable"||((F=(D=B[$.value])===null||D===void 0?void 0:D.equals(Q))!==null&&F!==void 0?F:(B[$.value]=Q,!0));case"Quad":return Q.termType==="Quad"&&H($,Q);default:return $.equals(Q)}})}return H(S,w)&&(P.returnMappings?B:!0)}e.matchPatternMappings=I},"../node_modules/rdf-terms/lib/TermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getQuads=e.getDefaultGraphs=e.getVariables=e.getLiterals=e.getBlankNodes=e.getNamedNodes=e.getTermsOfType=e.uniqTerms=e.TERM_TYPES=void 0;const o=t("../node_modules/rdf-string/index.js");e.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function l(m){const E={};return m.filter(v=>{const T=o.termToString(v);return!(T in E)&&(E[T]=!0)})}e.uniqTerms=l;function d(m,E){return m.filter(v=>v.termType===E)}e.getTermsOfType=d;function u(m){return d(m,"NamedNode")}e.getNamedNodes=u;function a(m){return d(m,"BlankNode")}e.getBlankNodes=a;function c(m){return d(m,"Literal")}e.getLiterals=c;function h(m){return d(m,"Variable")}e.getVariables=h;function y(m){return d(m,"DefaultGraph")}e.getDefaultGraphs=y;function b(m){return d(m,"Quad")}e.getQuads=b},"../node_modules/relative-to-absolute-iri/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/relative-to-absolute-iri/lib/Resolve.js"),e)},"../node_modules/relative-to-absolute-iri/lib/Resolve.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeDotSegmentsOfPath=e.removeDotSegments=e.resolve=void 0;function t(u,a){a=a||"";const c=a.indexOf("#");if(c>0&&(a=a.substr(0,c)),!u.length){if(a.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${a}' for value '${u}'`);return a}if(u.startsWith("?")){const T=a.indexOf("?");return T>0&&(a=a.substr(0,T)),a+u}if(u.startsWith("#"))return a+u;if(!a.length){const T=u.indexOf(":");if(T<0)throw new Error(`Found invalid relative IRI '${u}' for a missing baseIRI`);return l(u,T)}const h=u.indexOf(":");if(h>=0)return l(u,h);const y=a.indexOf(":");if(y<0)throw new Error(`Found invalid baseIRI '${a}' for value '${u}'`);const b=a.substr(0,y+1);if(u.indexOf("//")===0)return b+l(u,h);let m;if(a.indexOf("//",y)===y+1){if(m=a.indexOf("/",y+3),m<0)return a.length>y+3?a+"/"+l(u,h):b+l(u,h)}else if(m=a.indexOf("/",y+1),m<0)return b+l(u,h);if(u.indexOf("/")===0)return a.substr(0,m)+o(u);let E=a.substr(m);const v=E.lastIndexOf("/");return v>=0&&v<E.length-1&&(E=E.substr(0,v+1),u[0]==="."&&u[1]!=="."&&u[1]!=="/"&&u[2]&&(u=u.substr(1))),u=E+u,u=o(u),a.substr(0,m)+u}e.resolve=t;function o(u){const a=[];let c=0;for(;c<u.length;)switch(u[c]){case"/":if(u[c+1]===".")if(u[c+2]==="."){if(!d(u[c+3])){a.push([]),c++;break}a.pop(),u[c+3]||a.push([]),c+=3}else{if(!d(u[c+2])){a.push([]),c++;break}u[c+2]||a.push([]),c+=2}else a.push([]),c++;break;case"#":case"?":a.length||a.push([]),a[a.length-1].push(u.substr(c)),c=u.length;break;default:a.length||a.push([]),a[a.length-1].push(u[c]),c++;break}return"/"+a.map(h=>h.join("")).join("/")}e.removeDotSegments=o;function l(u,a){let c=a+1;a>=0?u[a+1]==="/"&&u[a+2]==="/"&&(c=a+3):u[0]==="/"&&u[1]==="/"&&(c=2);const h=u.indexOf("/",c);if(h<0)return u;const y=u.substr(0,h),b=u.substr(h);return y+o(b)}e.removeDotSegmentsOfPath=l;function d(u){return!u||u==="#"||u==="?"||u==="/"}},"../node_modules/spark-md5/spark-md5.js":n=>{(function(e){n.exports=e()})(function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(j,N){var x=j[0],I=j[1],w=j[2],S=j[3];x+=(I&w|~I&S)+N[0]-680876936|0,x=(x<<7|x>>>25)+I|0,S+=(x&I|~x&w)+N[1]-389564586|0,S=(S<<12|S>>>20)+x|0,w+=(S&x|~S&I)+N[2]+606105819|0,w=(w<<17|w>>>15)+S|0,I+=(w&S|~w&x)+N[3]-1044525330|0,I=(I<<22|I>>>10)+w|0,x+=(I&w|~I&S)+N[4]-176418897|0,x=(x<<7|x>>>25)+I|0,S+=(x&I|~x&w)+N[5]+1200080426|0,S=(S<<12|S>>>20)+x|0,w+=(S&x|~S&I)+N[6]-1473231341|0,w=(w<<17|w>>>15)+S|0,I+=(w&S|~w&x)+N[7]-45705983|0,I=(I<<22|I>>>10)+w|0,x+=(I&w|~I&S)+N[8]+1770035416|0,x=(x<<7|x>>>25)+I|0,S+=(x&I|~x&w)+N[9]-1958414417|0,S=(S<<12|S>>>20)+x|0,w+=(S&x|~S&I)+N[10]-42063|0,w=(w<<17|w>>>15)+S|0,I+=(w&S|~w&x)+N[11]-1990404162|0,I=(I<<22|I>>>10)+w|0,x+=(I&w|~I&S)+N[12]+1804603682|0,x=(x<<7|x>>>25)+I|0,S+=(x&I|~x&w)+N[13]-40341101|0,S=(S<<12|S>>>20)+x|0,w+=(S&x|~S&I)+N[14]-1502002290|0,w=(w<<17|w>>>15)+S|0,I+=(w&S|~w&x)+N[15]+1236535329|0,I=(I<<22|I>>>10)+w|0,x+=(I&S|w&~S)+N[1]-165796510|0,x=(x<<5|x>>>27)+I|0,S+=(x&w|I&~w)+N[6]-1069501632|0,S=(S<<9|S>>>23)+x|0,w+=(S&I|x&~I)+N[11]+643717713|0,w=(w<<14|w>>>18)+S|0,I+=(w&x|S&~x)+N[0]-373897302|0,I=(I<<20|I>>>12)+w|0,x+=(I&S|w&~S)+N[5]-701558691|0,x=(x<<5|x>>>27)+I|0,S+=(x&w|I&~w)+N[10]+38016083|0,S=(S<<9|S>>>23)+x|0,w+=(S&I|x&~I)+N[15]-660478335|0,w=(w<<14|w>>>18)+S|0,I+=(w&x|S&~x)+N[4]-405537848|0,I=(I<<20|I>>>12)+w|0,x+=(I&S|w&~S)+N[9]+568446438|0,x=(x<<5|x>>>27)+I|0,S+=(x&w|I&~w)+N[14]-1019803690|0,S=(S<<9|S>>>23)+x|0,w+=(S&I|x&~I)+N[3]-187363961|0,w=(w<<14|w>>>18)+S|0,I+=(w&x|S&~x)+N[8]+1163531501|0,I=(I<<20|I>>>12)+w|0,x+=(I&S|w&~S)+N[13]-1444681467|0,x=(x<<5|x>>>27)+I|0,S+=(x&w|I&~w)+N[2]-51403784|0,S=(S<<9|S>>>23)+x|0,w+=(S&I|x&~I)+N[7]+1735328473|0,w=(w<<14|w>>>18)+S|0,I+=(w&x|S&~x)+N[12]-1926607734|0,I=(I<<20|I>>>12)+w|0,x+=(I^w^S)+N[5]-378558|0,x=(x<<4|x>>>28)+I|0,S+=(x^I^w)+N[8]-2022574463|0,S=(S<<11|S>>>21)+x|0,w+=(S^x^I)+N[11]+1839030562|0,w=(w<<16|w>>>16)+S|0,I+=(w^S^x)+N[14]-35309556|0,I=(I<<23|I>>>9)+w|0,x+=(I^w^S)+N[1]-1530992060|0,x=(x<<4|x>>>28)+I|0,S+=(x^I^w)+N[4]+1272893353|0,S=(S<<11|S>>>21)+x|0,w+=(S^x^I)+N[7]-155497632|0,w=(w<<16|w>>>16)+S|0,I+=(w^S^x)+N[10]-1094730640|0,I=(I<<23|I>>>9)+w|0,x+=(I^w^S)+N[13]+681279174|0,x=(x<<4|x>>>28)+I|0,S+=(x^I^w)+N[0]-358537222|0,S=(S<<11|S>>>21)+x|0,w+=(S^x^I)+N[3]-722521979|0,w=(w<<16|w>>>16)+S|0,I+=(w^S^x)+N[6]+76029189|0,I=(I<<23|I>>>9)+w|0,x+=(I^w^S)+N[9]-640364487|0,x=(x<<4|x>>>28)+I|0,S+=(x^I^w)+N[12]-421815835|0,S=(S<<11|S>>>21)+x|0,w+=(S^x^I)+N[15]+530742520|0,w=(w<<16|w>>>16)+S|0,I+=(w^S^x)+N[2]-995338651|0,I=(I<<23|I>>>9)+w|0,x+=(w^(I|~S))+N[0]-198630844|0,x=(x<<6|x>>>26)+I|0,S+=(I^(x|~w))+N[7]+1126891415|0,S=(S<<10|S>>>22)+x|0,w+=(x^(S|~I))+N[14]-1416354905|0,w=(w<<15|w>>>17)+S|0,I+=(S^(w|~x))+N[5]-57434055|0,I=(I<<21|I>>>11)+w|0,x+=(w^(I|~S))+N[12]+1700485571|0,x=(x<<6|x>>>26)+I|0,S+=(I^(x|~w))+N[3]-1894986606|0,S=(S<<10|S>>>22)+x|0,w+=(x^(S|~I))+N[10]-1051523|0,w=(w<<15|w>>>17)+S|0,I+=(S^(w|~x))+N[1]-2054922799|0,I=(I<<21|I>>>11)+w|0,x+=(w^(I|~S))+N[8]+1873313359|0,x=(x<<6|x>>>26)+I|0,S+=(I^(x|~w))+N[15]-30611744|0,S=(S<<10|S>>>22)+x|0,w+=(x^(S|~I))+N[6]-1560198380|0,w=(w<<15|w>>>17)+S|0,I+=(S^(w|~x))+N[13]+1309151649|0,I=(I<<21|I>>>11)+w|0,x+=(w^(I|~S))+N[4]-145523070|0,x=(x<<6|x>>>26)+I|0,S+=(I^(x|~w))+N[11]-1120210379|0,S=(S<<10|S>>>22)+x|0,w+=(x^(S|~I))+N[2]+718787259|0,w=(w<<15|w>>>17)+S|0,I+=(S^(w|~x))+N[9]-343485551|0,I=(I<<21|I>>>11)+w|0,j[0]=x+j[0]|0,j[1]=I+j[1]|0,j[2]=w+j[2]|0,j[3]=S+j[3]|0}function l(j){var N=[],x;for(x=0;x<64;x+=4)N[x>>2]=j.charCodeAt(x)+(j.charCodeAt(x+1)<<8)+(j.charCodeAt(x+2)<<16)+(j.charCodeAt(x+3)<<24);return N}function d(j){var N=[],x;for(x=0;x<64;x+=4)N[x>>2]=j[x]+(j[x+1]<<8)+(j[x+2]<<16)+(j[x+3]<<24);return N}function u(j){var N=j.length,x=[1732584193,-271733879,-1732584194,271733878],I,w,S,P,B,H;for(I=64;I<=N;I+=64)o(x,l(j.substring(I-64,I)));for(j=j.substring(I-64),w=j.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=0;I<w;I+=1)S[I>>2]|=j.charCodeAt(I)<<(I%4<<3);if(S[I>>2]|=128<<(I%4<<3),I>55)for(o(x,S),I=0;I<16;I+=1)S[I]=0;return P=N*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),B=parseInt(P[2],16),H=parseInt(P[1],16)||0,S[14]=B,S[15]=H,o(x,S),x}function a(j){var N=j.length,x=[1732584193,-271733879,-1732584194,271733878],I,w,S,P,B,H;for(I=64;I<=N;I+=64)o(x,d(j.subarray(I-64,I)));for(j=I-64<N?j.subarray(I-64):new Uint8Array(0),w=j.length,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],I=0;I<w;I+=1)S[I>>2]|=j[I]<<(I%4<<3);if(S[I>>2]|=128<<(I%4<<3),I>55)for(o(x,S),I=0;I<16;I+=1)S[I]=0;return P=N*8,P=P.toString(16).match(/(.*?)(.{0,8})$/),B=parseInt(P[2],16),H=parseInt(P[1],16)||0,S[14]=B,S[15]=H,o(x,S),x}function c(j){var N="",x;for(x=0;x<4;x+=1)N+=t[j>>x*8+4&15]+t[j>>x*8&15];return N}function h(j){var N;for(N=0;N<j.length;N+=1)j[N]=c(j[N]);return j.join("")}h(u("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function j(N,x){return N=N|0||0,N<0?Math.max(N+x,0):Math.min(N,x)}ArrayBuffer.prototype.slice=function(N,x){var I=this.byteLength,w=j(N,I),S=I,P,B,H,q;return x!==e&&(S=j(x,I)),w>S?new ArrayBuffer(0):(P=S-w,B=new ArrayBuffer(P),H=new Uint8Array(B),q=new Uint8Array(this,w,P),H.set(q),B)}}();function y(j){return/[\u0080-\uFFFF]/.test(j)&&(j=unescape(encodeURIComponent(j))),j}function b(j,N){var x=j.length,I=new ArrayBuffer(x),w=new Uint8Array(I),S;for(S=0;S<x;S+=1)w[S]=j.charCodeAt(S);return N?w:I}function m(j){return String.fromCharCode.apply(null,new Uint8Array(j))}function E(j,N,x){var I=new Uint8Array(j.byteLength+N.byteLength);return I.set(new Uint8Array(j)),I.set(new Uint8Array(N),j.byteLength),x?I:I.buffer}function v(j){var N=[],x=j.length,I;for(I=0;I<x-1;I+=2)N.push(parseInt(j.substr(I,2),16));return String.fromCharCode.apply(String,N)}function T(){this.reset()}return T.prototype.append=function(j){return this.appendBinary(y(j)),this},T.prototype.appendBinary=function(j){this._buff+=j,this._length+=j.length;var N=this._buff.length,x;for(x=64;x<=N;x+=64)o(this._hash,l(this._buff.substring(x-64,x)));return this._buff=this._buff.substring(x-64),this},T.prototype.end=function(j){var N=this._buff,x=N.length,I,w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S;for(I=0;I<x;I+=1)w[I>>2]|=N.charCodeAt(I)<<(I%4<<3);return this._finish(w,x),S=h(this._hash),j&&(S=v(S)),this.reset(),S},T.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},T.prototype.setState=function(j){return this._buff=j.buff,this._length=j.length,this._hash=j.hash,this},T.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},T.prototype._finish=function(j,N){var x=N,I,w,S;if(j[x>>2]|=128<<(x%4<<3),x>55)for(o(this._hash,j),x=0;x<16;x+=1)j[x]=0;I=this._length*8,I=I.toString(16).match(/(.*?)(.{0,8})$/),w=parseInt(I[2],16),S=parseInt(I[1],16)||0,j[14]=w,j[15]=S,o(this._hash,j)},T.hash=function(j,N){return T.hashBinary(y(j),N)},T.hashBinary=function(j,N){var x=u(j),I=h(x);return N?v(I):I},T.ArrayBuffer=function(){this.reset()},T.ArrayBuffer.prototype.append=function(j){var N=E(this._buff.buffer,j,!0),x=N.length,I;for(this._length+=j.byteLength,I=64;I<=x;I+=64)o(this._hash,d(N.subarray(I-64,I)));return this._buff=I-64<x?new Uint8Array(N.buffer.slice(I-64)):new Uint8Array(0),this},T.ArrayBuffer.prototype.end=function(j){var N=this._buff,x=N.length,I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],w,S;for(w=0;w<x;w+=1)I[w>>2]|=N[w]<<(w%4<<3);return this._finish(I,x),S=h(this._hash),j&&(S=v(S)),this.reset(),S},T.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},T.ArrayBuffer.prototype.getState=function(){var j=T.prototype.getState.call(this);return j.buff=m(j.buff),j},T.ArrayBuffer.prototype.setState=function(j){return j.buff=b(j.buff,!0),T.prototype.setState.call(this,j)},T.ArrayBuffer.prototype.destroy=T.prototype.destroy,T.ArrayBuffer.prototype._finish=T.prototype._finish,T.ArrayBuffer.hash=function(j,N){var x=a(new Uint8Array(j)),I=h(x);return N?v(I):I},T})},"../node_modules/sparqlee/dist/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=e.orderTypes=e.isExpressionError=e.ExpressionError=e.AggregateEvaluator=e.SyncEvaluator=e.AsyncEvaluator=void 0;var o=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js");Object.defineProperty(e,"AsyncEvaluator",{enumerable:!0,get:function(){return o.AsyncEvaluator}});var l=t("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");Object.defineProperty(e,"SyncEvaluator",{enumerable:!0,get:function(){return l.SyncEvaluator}});var d=t("../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js");Object.defineProperty(e,"AggregateEvaluator",{enumerable:!0,get:function(){return d.AggregateEvaluator}});var u=t("../node_modules/sparqlee/dist/lib/util/Errors.js");Object.defineProperty(e,"ExpressionError",{enumerable:!0,get:function(){return u.ExpressionError}}),Object.defineProperty(e,"isExpressionError",{enumerable:!0,get:function(){return u.isExpressionError}});var a=t("../node_modules/sparqlee/dist/lib/util/Ordering.js");Object.defineProperty(e,"orderTypes",{enumerable:!0,get:function(){return a.orderTypes}});var c=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js");Object.defineProperty(e,"AsyncAggregateEvaluator",{enumerable:!0,get:function(){return c.AsyncAggregateEvaluator}})},"../node_modules/sparqlee/dist/lib/aggregators/Average.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Average=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/functions/index.js"),d=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class c extends a.BaseAggregator{constructor(){super(...arguments),this.summer=l.regularFunctions[u.RegularOperator.ADDITION],this.divider=l.regularFunctions[u.RegularOperator.DIVISION]}static emptyValue(){return(0,d.integer)(0).toRDF()}init(y){return{sum:this.termToNumericOrError(y),count:1}}put(y,b){const m=this.termToNumericOrError(b);return{sum:this.summer.apply([y.sum,m],this.sharedContext),count:y.count+1}}result(y){const b=new o.IntegerLiteral(y.count);return this.divider.apply([y.sum,b],this.sharedContext).toRDF()}}e.Average=c},"../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregator=void 0;const o=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),d=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class u{constructor(c,h){this.sharedContext=h,this.distinct=c.distinct,this.separator=c.separator||" ",this.termTransformer=new o.TermTransformer(h.superTypeProvider)}termToNumericOrError(c){if(c.termType!=="Literal")throw new Error(`Term with value ${c.value} has type ${c.termType} and is not a numeric literal`);if(!(0,d.isSubTypeOf)(c.datatype.value,l.TypeAlias.SPARQL_NUMERIC,this.sharedContext.superTypeProvider))throw new Error(`Term datatype ${c.datatype.value} with value ${c.value} has type ${c.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(c)}extractValue(c){if(c.termType!=="Literal")throw new Error(`Term with value ${c.value} has type ${c.termType} and is not a literal`);const h=this.termTransformer.transformLiteral(c);return{type:h.dataType,value:h.typedValue}}static emptyValue(){}}e.BaseAggregator=u},"../node_modules/sparqlee/dist/lib/aggregators/Count.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Count=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class d extends l.BaseAggregator{static emptyValue(){return(0,o.integer)(0).toRDF()}init(a){return 1}put(a,c){return a+1}result(a){return(0,o.integer)(a).toRDF()}}e.Count=d},"../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupConcat=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class d extends l.BaseAggregator{static emptyValue(){return(0,o.string)("").toRDF()}init(a){return a.value}put(a,c){return a+this.separator+c.value}result(a){return(0,o.string)(a).toRDF()}}e.GroupConcat=d},"../node_modules/sparqlee/dist/lib/aggregators/Max.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Max=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends o.BaseAggregator{init(u){const{value:a}=this.extractValue(u);return{extremeValue:a,term:u}}put(u,a){const c=this.extractValue(a);return c.value>u.extremeValue?{extremeValue:c.value,term:a}:u}result(u){return u.term}}e.Max=l},"../node_modules/sparqlee/dist/lib/aggregators/Min.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Min=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends o.BaseAggregator{init(u){const{value:a}=this.extractValue(u);return{extremeValue:a,term:u}}put(u,a){const c=this.extractValue(a);return c.value<u.extremeValue?{extremeValue:c.value,term:a}:u}result(u){return u.term}}e.Min=l},"../node_modules/sparqlee/dist/lib/aggregators/Sample.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sample=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends o.BaseAggregator{init(u){return u}put(u,a){return u}result(u){return u}}e.Sample=l},"../node_modules/sparqlee/dist/lib/aggregators/Sum.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sum=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/index.js"),l=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class a extends u.BaseAggregator{constructor(){super(...arguments),this.summer=o.regularFunctions[d.RegularOperator.ADDITION]}static emptyValue(){return(0,l.integer)(0).toRDF()}init(h){return this.termToNumericOrError(h)}put(h,y){const b=this.termToNumericOrError(y);return this.summer.apply([h,b],this.sharedContext)}result(h){return h.toRDF()}}e.Sum=a},"../node_modules/sparqlee/dist/lib/aggregators/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.aggregators=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/Average.js"),l=t("../node_modules/sparqlee/dist/lib/aggregators/Count.js"),d=t("../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js"),u=t("../node_modules/sparqlee/dist/lib/aggregators/Max.js"),a=t("../node_modules/sparqlee/dist/lib/aggregators/Min.js"),c=t("../node_modules/sparqlee/dist/lib/aggregators/Sample.js"),h=t("../node_modules/sparqlee/dist/lib/aggregators/Sum.js");e.aggregators={count:l.Count,sum:h.Sum,min:a.Min,max:u.Max,avg:o.Average,group_concat:d.GroupConcat,sample:c.Sample}},"../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AggregateEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js"),l=t("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");class d extends o.BaseAggregateEvaluator{constructor(a,c,h){super(a,l.SyncEvaluator.completeContext(c||{}),h),this.evaluator=new l.SyncEvaluator(a.expression,c)}put(a){this.init(a)}__put(a){try{const c=this.evaluator.evaluate(a);this.state=this.aggregator.put(this.state,c)}catch(c){this.safeThrow(c)}}safeThrow(a){if(this.throwError)throw a;this.put=()=>{},this.result=()=>{}}init(a){try{const c=this.evaluator.evaluate(a);this.state=this.aggregator.init(c),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(c){this.safeThrow(c)}}}e.AggregateEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js"),l=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js");class d extends l.BaseAggregateEvaluator{constructor(a,c,h){super(a,o.AsyncEvaluator.completeContext(c||{}),h),this.evaluator=new o.AsyncEvaluator(a.expression,c),this.errorOccurred=!1}put(a){return this.init(a)}async __put(a){try{const c=await this.evaluator.evaluate(a);this.state=this.aggregator.put(this.state,c)}catch(c){this.safeThrow(c)}}safeThrow(a){if(this.throwError)throw a;this.put=async()=>{},this.result=()=>{},this.errorOccurred=!0}async init(a){try{const c=await this.evaluator.evaluate(a);if(!c||this.errorOccurred)return;if(this.state){this.state=this.aggregator.put(this.state,c);return}this.state=this.aggregator.init(c),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(c){this.safeThrow(c)}}}e.AsyncAggregateEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncEvaluator=void 0;const o=t("../node_modules/lru-cache/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js");class u{constructor(c,h={}){this.algExpr=c;const y=h.extensionFunctionCreator||(()=>{}),b=u.completeContext(h),m=new l.AlgebraTransformer(Object.assign({type:"async",creator:y},b));this.expr=m.transformAlgebra(c),this.evaluator=new d.AsyncRecursiveEvaluator(b,m)}static completeContext(c){return{now:c.now||new Date(Date.now()),baseIRI:c.baseIRI||void 0,functionArgumentsCache:c.functionArgumentsCache||{},superTypeProvider:{cache:c.typeCache||new o,discoverer:c.getSuperType||(()=>"term")},extensionFunctionCreator:c.extensionFunctionCreator,exists:c.exists,aggregate:c.aggregate,bnode:c.bnode}}async evaluate(c){return(await this.evaluator.evaluate(this.expr,c)).toRDF()}async evaluateAsEBV(c){return(await this.evaluator.evaluate(this.expr,c)).coerceEBV()}async evaluateAsInternal(c){return await this.evaluator.evaluate(this.expr,c)}}e.AsyncEvaluator=u},"../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncEvaluator=void 0;const o=t("../node_modules/lru-cache/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js");class u{constructor(c,h={}){this.algExpr=c,this.context=h;const y=h.extensionFunctionCreator||(()=>{}),b=u.completeContext(h),m=new l.AlgebraTransformer(Object.assign({type:"sync",creator:y},b));this.expr=m.transformAlgebra(c),this.evaluator=new d.SyncRecursiveEvaluator(b,m)}static completeContext(c){return{now:c.now||new Date(Date.now()),baseIRI:c.baseIRI||void 0,functionArgumentsCache:c.functionArgumentsCache||{},superTypeProvider:{cache:c.typeCache||new o,discoverer:c.getSuperType||(()=>"term")},extensionFunctionCreator:c.extensionFunctionCreator,exists:c.exists,aggregate:c.aggregate,bnode:c.bnode}}evaluate(c){return this.evaluator.evaluate(this.expr,c).toRDF()}evaluateAsEBV(c){return this.evaluator.evaluate(this.expr,c).coerceEBV()}evaluateAsInternal(c){return this.evaluator.evaluate(this.expr,c)}}e.SyncEvaluator=u},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncRecursiveEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class a extends u.BaseExpressionEvaluator{constructor(h,y){super(y||new l.TermTransformer(h.superTypeProvider)),this.context=h,this.subEvaluators={[o.ExpressionType.Term]:this.term.bind(this),[o.ExpressionType.Variable]:this.variable.bind(this),[o.ExpressionType.Operator]:this.evalOperator.bind(this),[o.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[o.ExpressionType.Named]:this.evalNamed.bind(this),[o.ExpressionType.Existence]:this.evalExistence.bind(this),[o.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[o.ExpressionType.AsyncExtension]:this.evalAsyncExtension.bind(this)}}async evaluate(h,y){const b=this.subEvaluators[h.expressionType];if(!b)throw new d.InvalidExpressionType(h);return b.bind(this)(h,y)}async evalOperator(h,y){const b=h.args.map(E=>this.evaluate(E,y)),m=await Promise.all(b);return h.apply(m)}async evalSpecialOperator(h,y){const b=this.evaluate.bind(this),m={args:h.args,mapping:y,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:b,bnode:this.context.bnode};return h.applyAsync(m)}async _evalAsyncArgs(h,y){const b=h.map(m=>this.evaluate(m,y));return await Promise.all(b)}async evalNamed(h,y){return h.apply(await this._evalAsyncArgs(h.args,y))}async evalAsyncExtension(h,y){return await h.apply(await this._evalAsyncArgs(h.args,y))}async evalExistence(h,y){if(!this.context.exists)throw new d.NoExistenceHook;return new o.BooleanLiteral(await this.context.exists(h.expression,y))}async evalAggregate(h,y){if(!this.context.aggregate)throw new d.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(h.expression))}}e.AsyncRecursiveEvaluator=a},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregateEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/aggregators/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class d{constructor(a,c,h){this.throwError=!1,this.expression=a,this.aggregator=new o.aggregators[a.aggregator](a,c),this.throwError=h||!1}static emptyValue(a,c=!1){const h=o.aggregators[a.aggregator].emptyValue();if(h===void 0&&c)throw new l.EmptyAggregateError;return h}result(){return this.aggregator.constructor.emptyValue()}__result(){return this.aggregator.result(this.state)}}e.BaseAggregateEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseExpressionEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class d{constructor(a){this.termTransformer=a}term(a,c){return a}variable(a,c){const h=c.get((0,o.expressionToVar)(a));if(!h)throw new l.UnboundVariableError(a.name,c);return this.termTransformer.transformRDFTermUnsafe(h)}}e.BaseExpressionEvaluator=d},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncRecursiveEvaluator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class a extends u.BaseExpressionEvaluator{constructor(h,y){super(y||new l.TermTransformer(h.superTypeProvider)),this.context=h,this.subEvaluators={[o.ExpressionType.Term]:this.term.bind(this),[o.ExpressionType.Variable]:this.variable.bind(this),[o.ExpressionType.Operator]:this.evalOperator.bind(this),[o.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[o.ExpressionType.Named]:this.evalNamed.bind(this),[o.ExpressionType.Existence]:this.evalExistence.bind(this),[o.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[o.ExpressionType.SyncExtension]:this.evalSyncExtension.bind(this)}}evaluate(h,y){const b=this.subEvaluators[h.expressionType];if(!b)throw new d.InvalidExpressionType(h);return b.bind(this)(h,y)}evalOperator(h,y){const b=h.args.map(m=>this.evaluate(m,y));return h.apply(b)}evalSpecialOperator(h,y){const b=this.evaluate.bind(this),m={args:h.args,mapping:y,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:b,bnode:this.context.bnode};return h.applySync(m)}evalNamed(h,y){const b=h.args.map(m=>this.evaluate(m,y));return h.apply(b)}evalSyncExtension(h,y){const b=h.args.map(m=>this.evaluate(m,y));return h.apply(b)}evalExistence(h,y){if(!this.context.exists)throw new d.NoExistenceHook;return new o.BooleanLiteral(this.context.exists(h.expression,y))}evalAggregate(h,y){if(!this.context.aggregate)throw new d.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(h.expression))}}e.SyncRecursiveEvaluator=a},"../node_modules/sparqlee/dist/lib/expressions/Aggregate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Aggregate=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a){this.name=u,this.expression=a,this.expressionType=o.ExpressionType.Aggregate}}e.Aggregate=l},"../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncExtension=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.name=u,this.args=a,this.apply=c,this.expressionType=o.ExpressionType.AsyncExtension}}e.AsyncExtension=l},"../node_modules/sparqlee/dist/lib/expressions/Existence.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Existence=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u){this.expression=u,this.expressionType=o.ExpressionType.Existence}}e.Existence=l},"../node_modules/sparqlee/dist/lib/expressions/Expressions.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asTermType=e.ExpressionType=void 0,function(o){o.Aggregate="aggregate",o.Existence="existence",o.Named="named",o.Operator="operator",o.SpecialOperator="specialOperator",o.Term="term",o.Variable="variable",o.AsyncExtension="asyncExtension",o.SyncExtension="syncExtension"}(e.ExpressionType||(e.ExpressionType={}));function t(o){if(o==="namedNode"||o==="literal"||o==="blankNode")return o}e.asTermType=t},"../node_modules/sparqlee/dist/lib/expressions/Named.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Named=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.name=u,this.args=a,this.apply=c,this.expressionType=o.ExpressionType.Named}}e.Named=l},"../node_modules/sparqlee/dist/lib/expressions/Operator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Operator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a){this.args=u,this.apply=a,this.expressionType=o.ExpressionType.Operator}}e.Operator=l},"../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialOperator=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.args=u,this.applyAsync=a,this.applySync=c,this.expressionType=o.ExpressionType.SpecialOperator}}e.SpecialOperator=l},"../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncExtension=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u,a,c){this.name=u,this.args=a,this.apply=c,this.expressionType=o.ExpressionType.SyncExtension}}e.SyncExtension=l},"../node_modules/sparqlee/dist/lib/expressions/Term.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNonLexicalLiteral=e.NonLexicalLiteral=e.StringLiteral=e.LangStringLiteral=e.DateTimeLiteral=e.BooleanLiteral=e.DoubleLiteral=e.FloatLiteral=e.DecimalLiteral=e.IntegerLiteral=e.NumericLiteral=e.Literal=e.isLiteralTermExpression=e.BlankNode=e.NamedNode=e.Term=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),a=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),c=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),h=new o.DataFactory;class y{constructor(){this.expressionType=c.ExpressionType.Term}str(){throw new u.InvalidArgumentTypes([this],l.RegularOperator.STR)}coerceEBV(){throw new u.EBVCoercionError(this)}}e.Term=y;class b extends y{constructor($){super(),this.value=$,this.termType="namedNode"}toRDF(){return h.namedNode(this.value)}str(){return this.value}}e.NamedNode=b;class m extends y{constructor($){super(),this.termType="blankNode",this.value=typeof $=="string"?h.blankNode($):$}toRDF(){return this.value}}e.BlankNode=m;function E(V){if(V.termType==="literal")return V}e.isLiteralTermExpression=E;class v extends y{constructor($,ee,D,F){super(),this.typedValue=$,this.dataType=ee,this.strValue=D,this.language=F,this.termType="literal"}toRDF(){return h.literal(this.strValue||this.str(),this.language||h.namedNode(this.dataType))}str(){return this.strValue||this.typedValue.toString()}}e.Literal=v;class T extends v{constructor($,ee,D,F){super($,ee,D,F),this.typedValue=$,this.strValue=D,this.language=F}coerceEBV(){return!!this.typedValue}toRDF(){const $=super.toRDF();return Number.isFinite(this.typedValue)||($.value=$.value.replace("Infinity","INF")),$}str(){return this.strValue||this.specificFormatter(this.typedValue)}}e.NumericLiteral=T;class j extends T{constructor($,ee,D,F){super($,ee||d.TypeURL.XSD_INTEGER,D,F),this.typedValue=$,this.strValue=D,this.language=F}specificFormatter($){return $.toFixed(0)}}e.IntegerLiteral=j;class N extends T{constructor($,ee,D,F){super($,ee||d.TypeURL.XSD_DECIMAL,D,F),this.typedValue=$,this.strValue=D,this.language=F}specificFormatter($){return $.toString()}}e.DecimalLiteral=N;class x extends T{constructor($,ee,D,F){super($,ee||d.TypeURL.XSD_FLOAT,D,F),this.typedValue=$,this.strValue=D,this.language=F}specificFormatter($){return $.toString()}}e.FloatLiteral=x;class I extends T{constructor($,ee,D,F){super($,ee||d.TypeURL.XSD_DOUBLE,D,F),this.typedValue=$,this.strValue=D,this.language=F}specificFormatter($){if(!Number.isFinite($))return $>0?"INF":$<0?"-INF":"NaN";const ee=$.toExponential(),[D,F]=ee.split("e"),Q=F.replace(/\+/u,"");return`${D.includes(".")?D:`${D}.0`}E${Q}`}}e.DoubleLiteral=I;class w extends v{constructor($,ee,D){super($,D||d.TypeURL.XSD_BOOLEAN,ee),this.typedValue=$,this.strValue=ee}coerceEBV(){return this.typedValue}}e.BooleanLiteral=w;class S extends v{constructor($,ee,D){super($,D||d.TypeURL.XSD_DATE_TIME,ee),this.typedValue=$,this.strValue=ee}}e.DateTimeLiteral=S;class P extends v{constructor($,ee,D){super($,D||d.TypeURL.RDF_LANG_STRING,$,ee),this.typedValue=$,this.language=ee}coerceEBV(){return this.str().length>0}}e.LangStringLiteral=P;class B extends v{constructor($,ee){super($,ee||d.TypeURL.XSD_STRING,$),this.typedValue=$}coerceEBV(){return this.str().length>0}}e.StringLiteral=B;class H extends v{constructor($,ee,D,F,Q){super({toString:()=>"undefined"},d.TypeAlias.SPARQL_NON_LEXICAL,F,Q),this.typeURL=ee,this.openWorldType=D}coerceEBV(){if((0,a.isSubTypeOf)(this.typeURL,d.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,a.isSubTypeOf)(this.typeURL,d.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new u.EBVCoercionError(this)}toRDF(){return h.literal(this.str(),this.language||h.namedNode(this.typeURL))}str(){return this.strValue||""}}e.NonLexicalLiteral=H;function q(V){if(V.dataType===d.TypeAlias.SPARQL_NON_LEXICAL)return V}e.isNonLexicalLiteral=q},"../node_modules/sparqlee/dist/lib/expressions/Variable.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class l{constructor(u){this.expressionType=o.ExpressionType.Variable,this.name=u}}e.Variable=l},"../node_modules/sparqlee/dist/lib/expressions/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a);var h=Object.getOwnPropertyDescriptor(u,a);(!h||("get"in h?!u.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return u[a]}}),Object.defineProperty(d,c,h)}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Variable.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Term.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Operator.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Named.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Aggregate.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/Existence.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js"),e),l(t("../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js"),e)},"../node_modules/sparqlee/dist/lib/functions/Core.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialFunction=e.NamedFunction=e.RegularFunction=e.BaseFunction=void 0;const o=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class l{constructor(y,b){this.operator=y,this.apply=(m,E)=>(this.monomorph(m,E.superTypeProvider,E.functionArgumentsCache)||this.handleInvalidTypes(m))(E)(m),this.arity=b.arity,this.overloads=b.overloads}monomorph(y,b,m){return this.overloads.search(y,b,m)}}e.BaseFunction=l;class d extends l{constructor(y,b){super(y,b),this.functionClass="regular"}handleInvalidTypes(y){throw new o.InvalidArgumentTypes(y,this.operator)}}e.RegularFunction=d;class u extends l{constructor(y,b){super(y,b),this.functionClass="named"}handleInvalidTypes(y){throw new o.InvalidArgumentTypes(y,this.operator)}}e.NamedFunction=u;class a{constructor(y,b){this.operator=y,this.functionClass="special",this.arity=b.arity,this.applySync=b.applySync,this.applyAsync=b.applyAsync,this.checkArity=b.checkArity||c(this.arity)}}e.SpecialFunction=a;function c(h){return y=>h===Number.POSITIVE_INFINITY?!0:y.length===h}},"../node_modules/sparqlee/dist/lib/functions/Helpers.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expressionToVar=e.dateTime=e.langString=e.string=e.double=e.float=e.decimal=e.integer=e.bool=e.Builder=e.declare=void 0;const o=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),c=t("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js"),h=new o.DataFactory;function y(S){return new b(S)}e.declare=y;class b{constructor(P){this.overloadTree=new c.OverloadTree(P),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}set(P,B){return this.overloadTree.addOverload(P,B),this}copy({from:P,to:B}){const H=this.overloadTree.getImplementationExact(P);if(!H)throw new a.UnexpectedError("Tried to copy implementation, but types not found",{from:P,to:B});return this.set(B,H)}onUnary(P,B){return this.set([P],H=>([q])=>B(H)(q))}onUnaryTyped(P,B){return this.set([P],H=>([q])=>B(H)(q.typedValue))}onBinary(P,B){return this.set(P,H=>([q,V])=>B(H)(q,V))}onBinaryTyped(P,B){return this.set(P,H=>([q,V])=>B(H)(q.typedValue,V.typedValue))}onTernaryTyped(P,B){return this.set(P,H=>([q,V,$])=>B(H)(q.typedValue,V.typedValue,$.typedValue))}onTernary(P,B){return this.set(P,H=>([q,V,$])=>B(H)(q,V,$))}onQuaternaryTyped(P,B){return this.set(P,H=>([q,V,$,ee])=>B(H)(q.typedValue,V.typedValue,$.typedValue,ee.typedValue))}onTerm1(P){return this.set(["term"],B=>([H])=>P(B)(H))}onLiteral1(P){return this.set(["literal"],B=>([H])=>P(B)(H))}onBoolean1(P){return this.set([d.TypeURL.XSD_BOOLEAN],B=>([H])=>P(B)(H))}onBoolean1Typed(P){return this.set([d.TypeURL.XSD_BOOLEAN],B=>([H])=>P(B)(H.typedValue))}onString1(P){return this.set([d.TypeURL.XSD_STRING],B=>([H])=>P(B)(H))}onString1Typed(P){return this.set([d.TypeURL.XSD_STRING],B=>([H])=>P(B)(H.typedValue))}onLangString1(P){return this.set([d.TypeURL.RDF_LANG_STRING],B=>([H])=>P(B)(H))}onStringly1(P){return this.set([d.TypeAlias.SPARQL_STRINGLY],B=>([H])=>P(B)(H))}onStringly1Typed(P){return this.set([d.TypeAlias.SPARQL_STRINGLY],B=>([H])=>P(B)(H.typedValue))}onNumeric1(P){return this.set([d.TypeAlias.SPARQL_NUMERIC],B=>([H])=>P(B)(H)).invalidLexicalForm([d.TypeAlias.SPARQL_NON_LEXICAL],1)}onDateTime1(P){return this.set([d.TypeURL.XSD_DATE_TIME],B=>([H])=>P(B)(H)).invalidLexicalForm([d.TypeAlias.SPARQL_NON_LEXICAL],1)}numericConverter(P){const B=H=>q=>P(H)(q.typedValue);return this.onBinary([u.TypeURL.XSD_INTEGER],H=>q=>E(B(H)(q))).onBinary([u.TypeURL.XSD_DECIMAL],H=>q=>v(B(H)(q))).onBinary([u.TypeURL.XSD_FLOAT],H=>q=>T(B(H)(q))).onBinary([u.TypeURL.XSD_DOUBLE],H=>q=>j(B(H)(q))).invalidLexicalForm([d.TypeAlias.SPARQL_NON_LEXICAL],1)}arithmetic(P){const B=H=>(q,V)=>P(H)(q.typedValue,V.typedValue);return this.onBinary([u.TypeURL.XSD_INTEGER,u.TypeURL.XSD_INTEGER],H=>(q,V)=>E(B(H)(q,V))).onBinary([u.TypeURL.XSD_DECIMAL,u.TypeURL.XSD_DECIMAL],H=>(q,V)=>v(B(H)(q,V))).onBinary([u.TypeURL.XSD_FLOAT,u.TypeURL.XSD_FLOAT],H=>(q,V)=>T(B(H)(q,V))).onBinary([u.TypeURL.XSD_DOUBLE,u.TypeURL.XSD_DOUBLE],H=>(q,V)=>j(B(H)(q,V)))}numberTest(P){return this.numeric(B=>([H,q])=>{const V=P(B)(H.typedValue,q.typedValue);return m(V)})}stringTest(P){return this.set([d.TypeURL.XSD_STRING,d.TypeURL.XSD_STRING],B=>([H,q])=>{const V=P(B)(H.typedValue,q.typedValue);return m(V)}).invalidLexicalForm([d.TypeAlias.SPARQL_NON_LEXICAL,d.TypeURL.XSD_STRING],1).invalidLexicalForm([d.TypeURL.XSD_STRING,d.TypeAlias.SPARQL_NON_LEXICAL],2)}booleanTest(P){return this.set([d.TypeURL.XSD_BOOLEAN,d.TypeURL.XSD_BOOLEAN],B=>([H,q])=>{const V=P(B)(H.typedValue,q.typedValue);return m(V)}).invalidLexicalForm([d.TypeAlias.SPARQL_NON_LEXICAL,d.TypeURL.XSD_BOOLEAN],1).invalidLexicalForm([d.TypeURL.XSD_BOOLEAN,d.TypeAlias.SPARQL_NON_LEXICAL],2)}dateTimeTest(P){return this.set([d.TypeURL.XSD_DATE_TIME,d.TypeURL.XSD_DATE_TIME],B=>([H,q])=>{const V=P(B)(H.typedValue,q.typedValue);return m(V)}).invalidLexicalForm([d.TypeAlias.SPARQL_NON_LEXICAL,d.TypeURL.XSD_DATE_TIME],1).invalidLexicalForm([d.TypeURL.XSD_DATE_TIME,d.TypeAlias.SPARQL_NON_LEXICAL],2)}numeric(P){return this.set([d.TypeAlias.SPARQL_NUMERIC,d.TypeAlias.SPARQL_NUMERIC],P).invalidLexicalForm([d.TypeAlias.SPARQL_NUMERIC,d.TypeAlias.SPARQL_NON_LEXICAL],2).invalidLexicalForm([d.TypeAlias.SPARQL_NON_LEXICAL,d.TypeAlias.SPARQL_NUMERIC],1)}invalidLexicalForm(P,B){return this.set(P,()=>H=>{throw new a.InvalidLexicalForm(H[B-1].toRDF())})}}e.Builder=b;function m(S){return new l.BooleanLiteral(S)}e.bool=m;function E(S){return new l.IntegerLiteral(S)}e.integer=E;function v(S){return new l.DecimalLiteral(S)}e.decimal=v;function T(S){return new l.FloatLiteral(S)}e.float=T;function j(S){return new l.DoubleLiteral(S)}e.double=j;function N(S){return new l.StringLiteral(S)}e.string=N;function x(S,P){return new l.LangStringLiteral(S,P)}e.langString=x;function I(S,P){return new l.DateTimeLiteral(S,P)}e.dateTime=I;function w(S){return h.variable(S.name.slice(1))}e.expressionToVar=w},"../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.namedDefinitions=void 0;const o=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),d=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),u=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),a={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_STRING).onNumeric1(()=>v=>(0,u.string)((0,u.float)(v.typedValue).str())).onBoolean1Typed(()=>v=>(0,u.string)((0,u.bool)(v).str())).onTerm1(()=>v=>(0,u.string)(v.str())).collect()},c={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_FLOAT).onNumeric1(()=>v=>(0,u.float)(v.typedValue)).onBoolean1Typed(()=>v=>(0,u.float)(v?1:0)).onUnary(o.TypeURL.XSD_STRING,()=>v=>{const T=(0,d.parseXSDFloat)(v.str());if(T===void 0)throw new l.CastError(v,o.TypeURL.XSD_FLOAT);return(0,u.float)(T)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},h={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_DOUBLE).onNumeric1(()=>v=>(0,u.double)(v.typedValue)).onBoolean1Typed(()=>v=>(0,u.double)(v?1:0)).onUnary(o.TypeURL.XSD_STRING,()=>v=>{const T=(0,d.parseXSDFloat)(v.str());if(T===void 0)throw new l.CastError(v,o.TypeURL.XSD_DOUBLE);return(0,u.double)(T)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},y={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_DECIMAL).onNumeric1(()=>v=>{const T=(0,d.parseXSDDecimal)(v.str());if(T===void 0)throw new l.CastError(v,o.TypeURL.XSD_DECIMAL);return(0,u.decimal)(T)}).onString1(()=>v=>{const T=v.str(),j=/^([+-])?(\d+(\.\d+)?)$/u.test(T)?(0,d.parseXSDDecimal)(T):void 0;if(j===void 0)throw new l.CastError(v,o.TypeURL.XSD_DECIMAL);return(0,u.decimal)(j)}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).onBoolean1Typed(()=>v=>(0,u.decimal)(v?1:0)).collect()},b={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>v=>(0,u.integer)(v?1:0)).onNumeric1(()=>v=>{const T=(0,d.parseXSDInteger)(v.str());if(T===void 0)throw new l.CastError(v,o.TypeURL.XSD_INTEGER);return(0,u.integer)(T)}).onString1(()=>v=>{const T=v.str(),j=/^\d+$/u.test(T)?(0,d.parseXSDInteger)(T):void 0;if(j===void 0)throw new l.CastError(v,o.TypeURL.XSD_INTEGER);return(0,u.integer)(j)}).copy({from:[o.TypeAlias.SPARQL_NUMERIC],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},m={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_DATE_TIME).onUnary(o.TypeURL.XSD_DATE_TIME,()=>v=>v).onUnary(o.TypeURL.XSD_STRING,()=>v=>{const T=new Date(v.str());if(Number.isNaN(T.getTime()))throw new l.CastError(v,o.TypeURL.XSD_DATE_TIME);return(0,u.dateTime)(T,v.str())}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},E={arity:1,overloads:(0,u.declare)(o.TypeURL.XSD_BOOLEAN).onNumeric1(()=>v=>(0,u.bool)(v.coerceEBV())).onUnary(o.TypeURL.XSD_BOOLEAN,()=>v=>(0,u.bool)(v.coerceEBV())).onUnary(o.TypeURL.XSD_STRING,()=>v=>{switch(v.str()){case"true":return(0,u.bool)(!0);case"false":return(0,u.bool)(!1);case"1":return(0,u.bool)(!0);case"0":return(0,u.bool)(!1);default:throw new l.CastError(v,o.TypeURL.XSD_BOOLEAN)}}).copy({from:[o.TypeURL.XSD_STRING],to:[o.TypeAlias.SPARQL_NON_LEXICAL]}).collect()};e.namedDefinitions={[o.TypeURL.XSD_STRING]:a,[o.TypeURL.XSD_FLOAT]:c,[o.TypeURL.XSD_DOUBLE]:h,[o.TypeURL.XSD_DECIMAL]:y,[o.TypeURL.XSD_INTEGER]:b,[o.TypeURL.XSD_DATE_TIME]:m,[o.TypeURL.XSD_DATE]:m,[o.TypeURL.XSD_BOOLEAN]:E}},"../node_modules/sparqlee/dist/lib/functions/OverloadTree.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),d=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),u=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js");class a{constructor(h,y){this.identifier=h,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=y||0,this.promotionCount=void 0}getSubtree(h){const y=(0,d.asGeneralType)(h);if(y)return this.generalOverloads[y];for(const[b,m]of this.literalOverLoads)if(h===b)return m}getImplementationExact(h){let y=this;for(const b of h)if(y=y.getSubtree(b),!y)return;return y.implementation}search(h,y,b){let m=b[this.identifier],E=0;for(;E<h.length&&m?.cache;){const j=h[E],N=(0,o.isLiteralTermExpression)(j);m=m.cache[N?N.dataType:j.termType],E++}if(E===h.length&&m?.func)return m.func;const v=[],T=0;if(h.length===0)return this.implementation;for(v.push(...this.getSubTreeWithArg(h[T],y).map(j=>({node:j,index:T+1})));v.length>0;){const{index:j,node:N}=v.pop();if(j===h.length&&N.implementation)return this.addToCache(b,h,N.implementation),N.implementation;v.push(...N.getSubTreeWithArg(h[j],y).map(x=>({node:x,index:j+1})))}}addToCache(h,y,b){function m(v,T){return T in v||(v[T]={}),v[T]}let E=m(h,this.identifier);for(const v of y){const T=(0,o.isLiteralTermExpression)(v),j=T?T.dataType:v.termType;E.cache=E.cache||{},E=m(E.cache,j)}E.func=b}addOverload(h,y){this._addOverload([...h],y,0)}_addOverload(h,y,b){const[m,...E]=h;if(!m){(this.promotionCount===void 0||b<=this.promotionCount)&&(this.promotionCount=b,this.implementation=y);return}let v=this.getSubtree(m);if(!v){const T=new a(this.identifier,this.depth+1),j=(0,d.asGeneralType)(m);j&&(this.generalOverloads[j]=T);const N=(0,d.asOverrideType)(m);N&&this.literalOverLoads.push([N,T]),v=T}v._addOverload(E,y,b),m===l.TypeURL.XSD_STRING&&this.addPromotedOverload(l.TypeURL.XSD_ANY_URI,y,T=>(0,u.string)(T.str()),E,b),m===l.TypeURL.XSD_DOUBLE&&(this.addPromotedOverload(l.TypeURL.XSD_FLOAT,y,T=>(0,u.double)(T.typedValue),E,b),this.addPromotedOverload(l.TypeURL.XSD_DECIMAL,y,T=>(0,u.double)(T.typedValue),E,b)),m===l.TypeURL.XSD_FLOAT&&this.addPromotedOverload(l.TypeURL.XSD_DECIMAL,y,T=>(0,u.float)(T.typedValue),E,b)}addPromotedOverload(h,y,b,m,E){let v=this.getSubtree(h);if(!v){const T=new a(this.identifier,this.depth+1);this.literalOverLoads.push([h,T]),v=T}v._addOverload(m,T=>j=>y(T)([...j.slice(0,this.depth),b(j[this.depth]),...j.slice(this.depth+1,j.length)]),E+1)}getSubTreeWithArg(h,y){const b=[],m=(0,o.isLiteralTermExpression)(h);if(this.generalOverloads.term&&b.push(this.generalOverloads.term),this.generalOverloads[h.termType]&&b.push(this.generalOverloads[h.termType]),m){const E=(0,d.asKnownLiteralType)(m.dataType);let v;E?v=d.superTypeDictTable[E]:v=(0,d.getSuperTypes)(m.dataType,y);const T=this.literalOverLoads.filter(([j,N])=>j in v).map(([j,N])=>[v[j],N]);T.sort(([j,N],[x,I])=>j-x),b.push(...T.map(([j,N])=>N))}return b}}e.OverloadTree=a},"../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.definitions=void 0;const o=t("../node_modules/bignumber.js/bignumber.js"),l=t("../node_modules/hash.js/lib/hash.js"),d=t("../node_modules/rdf-data-factory/index.js"),u=t("../node_modules/relative-to-absolute-iri/index.js"),a=t("../node_modules/spark-md5/spark-md5.js"),c=t("../packages/uuid/dist/index.js"),h=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),y=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),b=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),m=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),E=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),v=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),T=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),j=t("../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js"),N=new d.DataFactory,x={arity:1,overloads:(0,T.declare)(b.RegularOperator.NOT).onTerm1(()=>re=>(0,T.bool)(!re.coerceEBV())).collect()},I={arity:1,overloads:(0,T.declare)(b.RegularOperator.UPLUS).numericConverter(()=>re=>re).collect()},w={arity:1,overloads:(0,T.declare)(b.RegularOperator.UMINUS).numericConverter(()=>re=>-re).collect()},S={arity:2,overloads:(0,T.declare)(b.RegularOperator.MULTIPLICATION).arithmetic(()=>(re,pe)=>new o.BigNumber(re).times(pe).toNumber()).collect()},P={arity:2,overloads:(0,T.declare)(b.RegularOperator.DIVISION).arithmetic(()=>(re,pe)=>new o.BigNumber(re).div(pe).toNumber()).onBinaryTyped([m.TypeURL.XSD_INTEGER,m.TypeURL.XSD_INTEGER],()=>(re,pe)=>{if(pe===0)throw new E.ExpressionError("Integer division by 0");return(0,T.decimal)(new o.BigNumber(re).div(pe).toNumber())}).collect()},B={arity:2,overloads:(0,T.declare)(b.RegularOperator.ADDITION).arithmetic(()=>(re,pe)=>new o.BigNumber(re).plus(pe).toNumber()).collect()},H={arity:2,overloads:(0,T.declare)(b.RegularOperator.SUBTRACTION).arithmetic(()=>(re,pe)=>new o.BigNumber(re).minus(pe).toNumber()).collect()},q={arity:2,overloads:(0,T.declare)(b.RegularOperator.EQUAL).numberTest(()=>(re,pe)=>re===pe).stringTest(()=>(re,pe)=>re.localeCompare(pe)===0).booleanTest(()=>(re,pe)=>re===pe).dateTimeTest(()=>(re,pe)=>re.getTime()===pe.getTime()).set(["term","term"],()=>([re,pe])=>(0,T.bool)(V(re,pe))).collect()};function V(re,pe){const Ve=re.toRDF(),Qe=pe.toRDF(),Xe=Ve.equals(Qe);if(Ve.termType==="Literal"&&Qe.termType==="Literal")throw new E.RDFEqualTypeError([re,pe]);return Xe}const $={arity:2,overloads:(0,T.declare)(b.RegularOperator.NOT_EQUAL).numberTest(()=>(re,pe)=>re!==pe).stringTest(()=>(re,pe)=>re.localeCompare(pe)!==0).booleanTest(()=>(re,pe)=>re!==pe).dateTimeTest(()=>(re,pe)=>re.getTime()!==pe.getTime()).set(["term","term"],()=>([re,pe])=>(0,T.bool)(!V(re,pe))).collect()},ee={arity:2,overloads:(0,T.declare)(b.RegularOperator.LT).numberTest(()=>(re,pe)=>re<pe).stringTest(()=>(re,pe)=>re.localeCompare(pe)===-1).booleanTest(()=>(re,pe)=>re<pe).dateTimeTest(()=>(re,pe)=>re.getTime()<pe.getTime()).collect()},D={arity:2,overloads:(0,T.declare)(b.RegularOperator.GT).numberTest(()=>(re,pe)=>re>pe).stringTest(()=>(re,pe)=>re.localeCompare(pe)===1).booleanTest(()=>(re,pe)=>re>pe).dateTimeTest(()=>(re,pe)=>re.getTime()>pe.getTime()).collect()},F={arity:2,overloads:(0,T.declare)(b.RegularOperator.LTE).numberTest(()=>(re,pe)=>re<=pe).stringTest(()=>(re,pe)=>re.localeCompare(pe)!==1).booleanTest(()=>(re,pe)=>re<=pe).dateTimeTest(()=>(re,pe)=>re.getTime()<=pe.getTime()).collect()},Q={arity:2,overloads:(0,T.declare)(b.RegularOperator.GTE).numberTest(()=>(re,pe)=>re>=pe).stringTest(()=>(re,pe)=>re.localeCompare(pe)!==-1).booleanTest(()=>(re,pe)=>re>=pe).dateTimeTest(()=>(re,pe)=>re.getTime()>=pe.getTime()).collect()},X={arity:1,overloads:(0,T.declare)(b.RegularOperator.IS_IRI).onTerm1(()=>re=>(0,T.bool)(re.termType==="namedNode")).collect()},W={arity:1,overloads:(0,T.declare)(b.RegularOperator.IS_BLANK).onTerm1(()=>re=>(0,T.bool)(re.termType==="blankNode")).collect()},le={arity:1,overloads:(0,T.declare)(b.RegularOperator.IS_LITERAL).onTerm1(()=>re=>(0,T.bool)(re.termType==="literal")).collect()},ue={arity:1,overloads:(0,T.declare)(b.RegularOperator.IS_NUMERIC).onNumeric1(()=>re=>(0,T.bool)(!0)).onTerm1(()=>re=>(0,T.bool)(!1)).collect()},de={arity:1,overloads:(0,T.declare)(b.RegularOperator.STR).onTerm1(()=>re=>(0,T.string)(re.str())).collect()},ce={arity:1,overloads:(0,T.declare)(b.RegularOperator.LANG).onLiteral1(()=>re=>(0,T.string)(re.language||"")).collect()},ge={arity:1,overloads:(0,T.declare)(b.RegularOperator.DATATYPE).onLiteral1(()=>re=>new h.NamedNode(re.dataType)).collect()},Oe={arity:1,overloads:(0,T.declare)(b.RegularOperator.IRI).set(["namedNode"],re=>pe=>{const Ve=pe[0],Qe=(0,u.resolve)(Ve.str(),re.baseIRI||"");return new h.NamedNode(Qe)}).onString1(re=>pe=>{const Ve=(0,u.resolve)(pe.str(),re.baseIRI||"");return new h.NamedNode(Ve)}).collect()},je={arity:2,overloads:(0,T.declare)(b.RegularOperator.STRDT).set([m.TypeURL.XSD_STRING,"namedNode"],({superTypeProvider:re})=>([pe,Ve])=>{const Qe=N.literal(pe.typedValue,N.namedNode(Ve.value));return new y.TermTransformer(re).transformLiteral(Qe)}).collect()},Ie={arity:2,overloads:(0,T.declare)(b.RegularOperator.STRLANG).onBinaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>(re,pe)=>new h.LangStringLiteral(re,pe.toLowerCase())).collect()},Se={arity:0,overloads:(0,T.declare)(b.RegularOperator.UUID).set([],()=>()=>new h.NamedNode(`urn:uuid:${c.v4()}`)).collect()},he={arity:0,overloads:(0,T.declare)(b.RegularOperator.STRUUID).set([],()=>()=>(0,T.string)(c.v4())).collect()},Ae={arity:1,overloads:(0,T.declare)(b.RegularOperator.STRLEN).onStringly1(()=>re=>(0,T.integer)([...re.typedValue].length)).collect()},Re={arity:[2,3],overloads:(0,T.declare)(b.RegularOperator.SUBSTR).onBinaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_INTEGER],()=>(re,pe)=>(0,T.string)([...re].slice(pe-1).join(""))).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.XSD_INTEGER],()=>(re,pe)=>{const Ve=[...re.typedValue].slice(pe.typedValue-1).join("");return(0,T.langString)(Ve,re.language)}).onTernaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_INTEGER,m.TypeURL.XSD_INTEGER],()=>(re,pe,Ve)=>(0,T.string)([...re].slice(pe-1,Ve+pe-1).join(""))).onTernary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.XSD_INTEGER,m.TypeURL.XSD_INTEGER],()=>(re,pe,Ve)=>{const Qe=[...re.typedValue].slice(pe.typedValue-1,Ve.typedValue+pe.typedValue-1).join("");return(0,T.langString)(Qe,re.language)}).collect()},Be={arity:1,overloads:(0,T.declare)(b.RegularOperator.UCASE).onString1Typed(()=>re=>(0,T.string)(re.toUpperCase())).onLangString1(()=>re=>(0,T.langString)(re.typedValue.toUpperCase(),re.language)).collect()},Ne={arity:1,overloads:(0,T.declare)(b.RegularOperator.LCASE).onString1Typed(()=>re=>(0,T.string)(re.toLowerCase())).onLangString1(()=>re=>(0,T.langString)(re.typedValue.toLowerCase(),re.language)).collect()},De={arity:2,overloads:(0,T.declare)(b.RegularOperator.STRSTARTS).onBinaryTyped([m.TypeAlias.SPARQL_STRINGLY,m.TypeURL.XSD_STRING],()=>(re,pe)=>(0,T.bool)(re.startsWith(pe))).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.RDF_LANG_STRING],()=>(re,pe)=>{if(re.language!==pe.language)throw new E.IncompatibleLanguageOperation(re,pe);return(0,T.bool)(re.typedValue.startsWith(pe.typedValue))}).collect()},M={arity:2,overloads:(0,T.declare)(b.RegularOperator.STRENDS).onBinaryTyped([m.TypeAlias.SPARQL_STRINGLY,m.TypeURL.XSD_STRING],()=>(re,pe)=>(0,T.bool)(re.endsWith(pe))).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.RDF_LANG_STRING],()=>(re,pe)=>{if(re.language!==pe.language)throw new E.IncompatibleLanguageOperation(re,pe);return(0,T.bool)(re.typedValue.endsWith(pe.typedValue))}).collect()},G={arity:2,overloads:(0,T.declare)(b.RegularOperator.CONTAINS).onBinaryTyped([m.TypeAlias.SPARQL_STRINGLY,m.TypeURL.XSD_STRING],()=>(re,pe)=>(0,T.bool)(re.includes(pe))).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.RDF_LANG_STRING],()=>(re,pe)=>{if(re.language!==pe.language)throw new E.IncompatibleLanguageOperation(re,pe);return(0,T.bool)(re.typedValue.includes(pe.typedValue))}).collect()},J={arity:2,overloads:(0,T.declare)(b.RegularOperator.STRBEFORE).onBinaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>(re,pe)=>(0,T.string)(re.slice(0,Math.max(0,re.indexOf(pe))))).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.XSD_STRING],()=>(re,pe)=>{const[Ve,Qe]=[re.typedValue,pe.typedValue],Xe=re.typedValue.slice(0,Math.max(0,Ve.indexOf(Qe)));return Xe||!Qe?(0,T.langString)(Xe,re.language):(0,T.string)(Xe)}).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.RDF_LANG_STRING],()=>(re,pe)=>{if(re.language!==pe.language)throw new E.IncompatibleLanguageOperation(re,pe);const[Ve,Qe]=[re.typedValue,pe.typedValue],Xe=re.typedValue.slice(0,Math.max(0,Ve.indexOf(Qe)));return Xe||!Qe?(0,T.langString)(Xe,re.language):(0,T.string)(Xe)}).collect()},ae={arity:2,overloads:(0,T.declare)(b.RegularOperator.STRAFTER).onBinaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>(re,pe)=>(0,T.string)(re.slice(re.indexOf(pe)).slice(pe.length))).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.XSD_STRING],()=>(re,pe)=>{const[Ve,Qe]=[re.typedValue,pe.typedValue],Xe=Ve.slice(Ve.indexOf(Qe)).slice(Qe.length);return Xe||!Qe?(0,T.langString)(Xe,re.language):(0,T.string)(Xe)}).onBinary([m.TypeURL.RDF_LANG_STRING,m.TypeURL.RDF_LANG_STRING],()=>(re,pe)=>{if(re.language!==pe.language)throw new E.IncompatibleLanguageOperation(re,pe);const[Ve,Qe]=[re.typedValue,pe.typedValue],Xe=Ve.slice(Ve.indexOf(Qe)).slice(Qe.length);return Xe||!Qe?(0,T.langString)(Xe,re.language):(0,T.string)(Xe)}).collect()},Z={arity:1,overloads:(0,T.declare)(b.RegularOperator.ENCODE_FOR_URI).onStringly1Typed(()=>re=>(0,T.string)(encodeURI(re))).collect()},ie={arity:2,overloads:(0,T.declare)(b.RegularOperator.LANG_MATCHES).onBinaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>(re,pe)=>(0,T.bool)(j.langMatches(re,pe))).collect()},oe=()=>(re,pe)=>(0,T.bool)(j.matches(re,pe)),Y=()=>(re,pe,Ve)=>(0,T.bool)(j.matches(re,pe,Ve)),te={arity:[2,3],overloads:(0,T.declare)(b.RegularOperator.REGEX).onBinaryTyped([m.TypeAlias.SPARQL_STRINGLY,m.TypeURL.XSD_STRING],oe).onTernaryTyped([m.TypeAlias.SPARQL_STRINGLY,m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],Y).collect()},ne={arity:[3,4],overloads:(0,T.declare)(b.RegularOperator.REPLACE).onTernaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>(re,pe,Ve)=>(0,T.string)(j.replace(re,pe,Ve))).set([m.TypeURL.RDF_LANG_STRING,m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>([re,pe,Ve])=>{const Qe=j.replace(re.typedValue,pe.typedValue,Ve.typedValue);return(0,T.langString)(Qe,re.language)}).onQuaternaryTyped([m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>(re,pe,Ve,Qe)=>(0,T.string)(j.replace(re,pe,Ve,Qe))).set([m.TypeURL.RDF_LANG_STRING,m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING,m.TypeURL.XSD_STRING],()=>([re,pe,Ve,Qe])=>{const Xe=j.replace(re.typedValue,pe.typedValue,Ve.typedValue,Qe.typedValue);return(0,T.langString)(Xe,re.language)}).collect()},se={arity:1,overloads:(0,T.declare)(b.RegularOperator.ABS).numericConverter(()=>re=>Math.abs(re)).collect()},fe={arity:1,overloads:(0,T.declare)(b.RegularOperator.ROUND).numericConverter(()=>re=>Math.round(re)).collect()},ye={arity:1,overloads:(0,T.declare)(b.RegularOperator.CEIL).numericConverter(()=>re=>Math.ceil(re)).collect()},ve={arity:1,overloads:(0,T.declare)(b.RegularOperator.FLOOR).numericConverter(()=>re=>Math.floor(re)).collect()},_={arity:0,overloads:(0,T.declare)(b.RegularOperator.RAND).set([],()=>()=>(0,T.double)(Math.random())).collect()};function p(re){return v.parseXSDDateTime(re.str())}const g={arity:0,overloads:(0,T.declare)(b.RegularOperator.NOW).set([],re=>()=>new h.DateTimeLiteral(re.now,re.now.toISOString())).collect()},O={arity:1,overloads:(0,T.declare)(b.RegularOperator.YEAR).onDateTime1(()=>re=>(0,T.integer)(Number(p(re).year))).collect()},L={arity:1,overloads:(0,T.declare)(b.RegularOperator.MONTH).onDateTime1(()=>re=>(0,T.integer)(Number(p(re).month))).collect()},k={arity:1,overloads:(0,T.declare)(b.RegularOperator.DAY).onDateTime1(()=>re=>(0,T.integer)(Number(p(re).day))).collect()},z={arity:1,overloads:(0,T.declare)(b.RegularOperator.HOURS).onDateTime1(()=>re=>(0,T.integer)(Number(p(re).hours))).collect()},_e={arity:1,overloads:(0,T.declare)(b.RegularOperator.MINUTES).onDateTime1(()=>re=>(0,T.integer)(Number(p(re).minutes))).collect()},Pe={arity:1,overloads:(0,T.declare)(b.RegularOperator.SECONDS).onDateTime1(()=>re=>(0,T.decimal)(Number(p(re).seconds))).collect()},xe={arity:1,overloads:(0,T.declare)(b.RegularOperator.TIMEZONE).onDateTime1(()=>re=>{const pe=j.formatDayTimeDuration(p(re).timezone);if(!pe)throw new E.InvalidTimezoneCall(re.strValue);return new h.Literal(pe,m.TypeURL.XSD_DAYTIME_DURATION,pe)}).collect()},Le={arity:1,overloads:(0,T.declare)(b.RegularOperator.TZ).onDateTime1(()=>re=>(0,T.string)(p(re).timezone)).collect()},Ee={arity:1,overloads:(0,T.declare)(b.RegularOperator.MD5).onString1Typed(()=>re=>(0,T.string)((0,a.hash)(re))).collect()},$e={arity:1,overloads:(0,T.declare)(b.RegularOperator.SHA1).onString1Typed(()=>re=>(0,T.string)((0,l.sha1)().update(re).digest("hex"))).collect()},He={arity:1,overloads:(0,T.declare)(b.RegularOperator.SHA256).onString1Typed(()=>re=>(0,T.string)((0,l.sha256)().update(re).digest("hex"))).collect()},ar={arity:1,overloads:(0,T.declare)(b.RegularOperator.SHA384).onString1Typed(()=>re=>(0,T.string)((0,l.sha384)().update(re).digest("hex"))).collect()},ct={arity:1,overloads:(0,T.declare)(b.RegularOperator.SHA512).onString1Typed(()=>re=>(0,T.string)((0,l.sha512)().update(re).digest("hex"))).collect()};e.definitions={"!":x,uplus:I,uminus:w,"*":S,"/":P,"+":B,"-":H,"=":q,"!=":$,"<":ee,">":D,"<=":F,">=":Q,isiri:X,isuri:X,isblank:W,isliteral:le,isnumeric:ue,str:de,lang:ce,datatype:ge,iri:Oe,uri:Oe,strdt:je,strlang:Ie,uuid:Se,struuid:he,strlen:Ae,substr:Re,ucase:Be,lcase:Ne,strstarts:De,strends:M,contains:G,strbefore:J,strafter:ae,encode_for_uri:Z,langmatches:ie,regex:te,replace:ne,abs:se,round:fe,ceil:ye,floor:ve,rand:_,now:g,year:O,month:L,day:k,hours:z,minutes:_e,seconds:Pe,timezone:xe,tz:Le,md5:Ee,sha1:$e,sha256:He,sha384:ar,sha512:ct}},"../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.specialDefinitions=void 0;const o=t("../packages/uuid/dist/index.js"),l=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),a=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),c=t("../node_modules/sparqlee/dist/lib/functions/index.js"),h={arity:1,async applyAsync({args:V,mapping:$}){return y({args:V,mapping:$})},applySync({args:V,mapping:$}){return y({args:V,mapping:$})}};function y({args:V,mapping:$}){const ee=V[0];if(ee.expressionType!==l.ExpressionType.Variable)throw new u.InvalidArgumentTypes(V,d.SpecialOperator.BOUND);const D=$.has((0,a.expressionToVar)(ee));return(0,a.bool)(D)}const b={arity:3,async applyAsync({args:V,mapping:$,evaluate:ee}){const F=(await ee(V[0],$)).coerceEBV();return ee(F?V[1]:V[2],$)},applySync({args:V,mapping:$,evaluate:ee}){const F=ee(V[0],$).coerceEBV();return ee(F?V[1]:V[2],$)}},m={arity:Number.POSITIVE_INFINITY,async applyAsync({args:V,mapping:$,evaluate:ee}){const D=[];for(const F of V)try{return await ee(F,$)}catch(Q){D.push(Q)}throw new u.CoalesceError(D)},applySync({args:V,mapping:$,evaluate:ee}){const D=[];for(const F of V)try{return ee(F,$)}catch(Q){D.push(Q)}throw new u.CoalesceError(D)}},E={arity:2,async applyAsync({args:V,mapping:$,evaluate:ee}){const[D,F]=V;try{if((await ee(D,$)).coerceEBV())return(0,a.bool)(!0);const le=(await ee(F,$)).coerceEBV();return(0,a.bool)(le)}catch(Q){if(!(await ee(F,$)).coerceEBV())throw Q;return(0,a.bool)(!0)}},applySync({args:V,mapping:$,evaluate:ee}){const[D,F]=V;try{if(ee(D,$).coerceEBV())return(0,a.bool)(!0);const le=ee(F,$).coerceEBV();return(0,a.bool)(le)}catch(Q){if(!ee(F,$).coerceEBV())throw Q;return(0,a.bool)(!0)}}},v={arity:2,async applyAsync({args:V,mapping:$,evaluate:ee}){const[D,F]=V;try{if(!(await ee(D,$)).coerceEBV())return(0,a.bool)(!1);const le=(await ee(F,$)).coerceEBV();return(0,a.bool)(le)}catch(Q){if((await ee(F,$)).coerceEBV())throw Q;return(0,a.bool)(!1)}},applySync({args:V,mapping:$,evaluate:ee}){const[D,F]=V;try{if(!ee(D,$).coerceEBV())return(0,a.bool)(!1);const le=ee(F,$).coerceEBV();return(0,a.bool)(le)}catch(Q){if(ee(F,$).coerceEBV())throw Q;return(0,a.bool)(!1)}}},T={arity:2,async applyAsync({args:V,mapping:$,evaluate:ee}){const[D,F]=V.map(W=>ee(W,$)),[Q,X]=await Promise.all([D,F]);return(0,a.bool)(Q.toRDF().equals(X.toRDF()))},applySync({args:V,mapping:$,evaluate:ee}){const[D,F]=V.map(Q=>ee(Q,$));return(0,a.bool)(D.toRDF().equals(F.toRDF()))}},j={arity:Number.POSITIVE_INFINITY,checkArity(V){return V.length>0},async applyAsync(V){const{args:$,mapping:ee,evaluate:D}=V,[F,...Q]=$,X=await D(F,ee);return N(X,Object.assign(Object.assign({},V),{args:Q}),[])},applySync(V){const{args:$,mapping:ee,evaluate:D}=V,[F,...Q]=$,X=D(F,ee);return x(X,Object.assign(Object.assign({},V),{args:Q}),[])}};async function N(V,$,ee){const{args:D,mapping:F,evaluate:Q}=$;if(D.length===0)return ee.every(W=>!W)?(0,a.bool)(!1):Promise.reject(new u.InError(ee));try{const X=D.shift(),W=await Q(X,F);return c.regularFunctions[d.RegularOperator.EQUAL].apply([V,W],$).typedValue?(0,a.bool)(!0):N(V,$,[...ee,!1])}catch(X){return N(V,$,[...ee,X])}}function x(V,$,ee){const{args:D,mapping:F,evaluate:Q}=$;if(D.length===0){if(ee.every(W=>!W))return(0,a.bool)(!1);throw new u.InError(ee)}try{const X=D.shift(),W=Q(X,F);return c.regularFunctions[d.RegularOperator.EQUAL].apply([V,W],$).typedValue?(0,a.bool)(!0):x(V,$,[...ee,!1])}catch(X){return x(V,$,[...ee,X])}}const I={arity:Number.POSITIVE_INFINITY,checkArity(V){return V.length>0},async applyAsync(V){const ee=await c.specialFunctions[d.SpecialOperator.IN].applyAsync(V);return(0,a.bool)(!ee.typedValue)},applySync(V){const ee=c.specialFunctions[d.SpecialOperator.IN].applySync(V);return(0,a.bool)(!ee.typedValue)}},w=(0,a.declare)(d.SpecialOperator.CONCAT).onStringly1(()=>V=>V).collect(),S={arity:Number.POSITIVE_INFINITY,async applyAsync(V){const{args:$,mapping:ee,evaluate:D,functionArgumentsCache:F,superTypeProvider:Q}=V,X=$.map(async ce=>D(ce,ee)).map(async ce=>{const ge=w.search([await ce],Q,F);if(!ge)throw new u.InvalidArgumentTypes($,d.SpecialOperator.CONCAT);return ge(V)([await ce])}),W=await Promise.all(X),ue=W.map(ce=>ce.typedValue).join(""),de=P(W)?W[0].language:void 0;return de?(0,a.langString)(ue,de):(0,a.string)(ue)},applySync(V){const{args:$,mapping:ee,evaluate:D,superTypeProvider:F,functionArgumentsCache:Q}=V,X=$.map(de=>D(de,ee)).map(de=>{const ce=w.search([de],F,Q);if(!ce)throw new u.InvalidArgumentTypes($,d.SpecialOperator.CONCAT);return ce(V)([de])}),le=X.map(de=>de.typedValue).join(""),ue=P(X)?X[0].language:void 0;return ue?(0,a.langString)(le,ue):(0,a.string)(le)}};function P(V){return V.length>0&&V.every($=>$.language===V[0].language)}const B=(0,a.declare)(d.SpecialOperator.BNODE).onString1(()=>V=>V).collect(),H={arity:Number.POSITIVE_INFINITY,checkArity(V){return V.length===0||V.length===1},async applyAsync(V){const{args:$,mapping:ee,evaluate:D,superTypeProvider:F,functionArgumentsCache:Q}=V,X=$.length===1?await D($[0],ee):void 0;let W;if(X){const le=B.search([X],F,Q);if(!le)throw new u.InvalidArgumentTypes($,d.SpecialOperator.BNODE);W=le(V)([X]).str()}if(V.bnode){const le=await V.bnode(W);return new l.BlankNode(le)}return q(W)},applySync(V){const{args:$,mapping:ee,evaluate:D,superTypeProvider:F,functionArgumentsCache:Q}=V,X=$.length===1?D($[0],ee):void 0;let W;if(X){const le=B.search([X],F,Q);if(!le)throw new u.InvalidArgumentTypes($,d.SpecialOperator.BNODE);W=le(V)([X]).str()}if(V.bnode){const le=V.bnode(W);return new l.BlankNode(le)}return q(W)}};function q(V){return new l.BlankNode(V||o.v4())}e.specialDefinitions={bound:h,if:b,coalesce:m,"&&":v,"||":E,sameterm:T,in:j,notin:I,concat:S,bnode:H}},"../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatDayTimeDuration=e.langMatches=e.replace=e.matches=void 0;function t(c,h,y){return new RegExp(h,y).test(c)}e.matches=t;function o(c,h,y,b){let m=new RegExp(h,b);if(!m.global){const E=b||"";m=new RegExp(h,`${E}g`)}return c.replace(m,y)}e.replace=o;function l(c,h){const y=c.split("-"),b=h.split("-");if(!u(b[0],y[0])&&!d(y[0]))return!1;let m=1,E=1;for(;E<b.length;){if(d(b[E])){E++;continue}if(m===y.length)return!1;if(u(b[E],y[m])){m++,E++;continue}if(y[m].length===1)return!1;m++}return!0}e.langMatches=l;function d(c){return c==="*"}function u(c,h){return new RegExp(`/${c}/`,"iu").test(`/${h}/`)}function a(c){if(!c)return;let h="",y=0,b=0;if(c!=="Z"&&(h=c.startsWith("-")?"-":"",y=Number.parseInt(c.slice(1,3),10),b=Number.parseInt(c.slice(4,6),10)),y===0&&b===0)return"PT0S";let m=`${h}PT`;return y>0&&(m+=`${y}H`),b>0&&(m+=`${b}M`),m}e.formatDayTimeDuration=a},"../node_modules/sparqlee/dist/lib/functions/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(y,b,m,E){E===void 0&&(E=m);var v=Object.getOwnPropertyDescriptor(b,m);(!v||("get"in v?!b.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(y,E,v)}:function(y,b,m,E){E===void 0&&(E=m),y[E]=b[m]}),l=this&&this.__exportStar||function(y,b){for(var m in y)m!=="default"&&!Object.prototype.hasOwnProperty.call(b,m)&&o(b,y,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=e.namedFunctions=e.specialFunctions=e.regularFunctions=void 0;const d=t("../node_modules/sparqlee/dist/lib/functions/Core.js"),u=t("../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js"),a=t("../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js"),c=t("../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js");l(t("../node_modules/sparqlee/dist/lib/functions/Core.js"),e),e.regularFunctions=Object.fromEntries(Object.entries(a.definitions).map(([y,b])=>[y,new d.RegularFunction(y,b)])),e.specialFunctions=Object.fromEntries(Object.entries(c.specialDefinitions).map(([y,b])=>[y,new d.SpecialFunction(y,b)])),e.namedFunctions=Object.fromEntries(Object.entries(u.namedDefinitions).map(([y,b])=>[y,new d.NamedFunction(y,b)]));var h=t("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js");Object.defineProperty(e,"OverloadTree",{enumerable:!0,get:function(){return h.OverloadTree}})},"../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AlgebraTransformer=void 0;const o=t("sparqlalgebrajs"),l=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),d=t("../node_modules/sparqlee/dist/lib/functions/index.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),c=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),h=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js");class y extends h.TermTransformer{constructor(m){super(m.superTypeProvider),this.algebraConfig=m,this.creatorConfig={type:m.type,creator:m.creator}}transformAlgebra(m){const E=o.Algebra.expressionTypes;switch(m.expressionType){case E.TERM:return this.transformTerm(m);case E.OPERATOR:return this.transformOperator(m);case E.NAMED:return this.transformNamed(m);case E.EXISTENCE:return y.transformExistence(m);case E.AGGREGATE:return y.transformAggregate(m);case E.WILDCARD:return y.transformWildcard(m)}}static transformWildcard(m){return new l.NamedNode(m.wildcard.value)}transformOperator(m){const E=m.operator.toLowerCase();if(u.SpecialOperators.has(E)){const N=E,x=m.args.map(w=>this.transformAlgebra(w)),I=d.specialFunctions[N];if(!I.checkArity(x))throw new a.InvalidArity(x,N);return new l.SpecialOperator(x,I.applyAsync,I.applySync)}if(!u.Operators.has(E))throw new a.UnknownOperator(m.operator);const v=E,T=m.args.map(N=>this.transformAlgebra(N)),j=d.regularFunctions[v];if(!y.hasCorrectArity(T,j.arity))throw new a.InvalidArity(T,v);return new l.Operator(T,N=>j.apply(N,this.algebraConfig))}wrapSyncFunction(m,E){return v=>{try{const T=m(v.map(j=>j.toRDF()));return this.transformRDFTermUnsafe(T)}catch(T){throw new c.ExtensionFunctionError(E,T)}}}wrapAsyncFunction(m,E){return async v=>{try{const T=await m(v.map(j=>j.toRDF()));return this.transformRDFTermUnsafe(T)}catch(T){throw new c.ExtensionFunctionError(E,T)}}}transformNamed(m){const E=m.name.value,v=m.args.map(T=>this.transformAlgebra(T));if(u.NamedOperators.has(E)){const T=m.name.value,j=d.namedFunctions[T];return new l.Named(m.name,v,N=>j.apply(N,this.algebraConfig))}if(this.creatorConfig.type==="sync"){const T=this.creatorConfig.creator(m.name);if(T){const j=this.wrapSyncFunction(T,m.name.value);return new l.SyncExtension(m.name,v,j)}}else{const T=this.creatorConfig.creator(m.name);if(T){const j=this.wrapAsyncFunction(T,m.name.value);return new l.AsyncExtension(m.name,v,j)}}throw new a.UnknownNamedOperator(m.name.value)}static hasCorrectArity(m,E){return Array.isArray(E)?E.includes(m.length):m.length===E}static transformAggregate(m){const E=m.aggregator;return new l.Aggregate(E,m)}static transformExistence(m){return new l.Existence(m)}}e.AlgebraTransformer=y},"../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TermTransformer=void 0;const o=t("../node_modules/rdf-string/index.js"),l=t("sparqlalgebrajs"),d=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),u=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),a=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),c=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),h=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class y{constructor(m){this.superTypeProvider=m}transformRDFTermUnsafe(m){return this.transformTerm({term:m,type:l.Algebra.types.EXPRESSION,expressionType:l.Algebra.expressionTypes.TERM})}transformTerm(m){if(!m.term)throw new a.InvalidExpression(m);switch(m.term.termType){case"Variable":return new d.Variable(o.termToString(m.term));case"Literal":return this.transformLiteral(m.term);case"NamedNode":return new d.NamedNode(m.term.value);case"BlankNode":return new d.BlankNode(m.term.value);default:throw new a.InvalidTermType(m)}}transformLiteral(m){if(!m.datatype||[null,void 0,""].includes(m.datatype.value))return m.language?new d.LangStringLiteral(m.value,m.language):new d.StringLiteral(m.value);const E=m.datatype.value,v=(0,h.getSuperTypeDict)(E,this.superTypeProvider);if(u.TypeURL.XSD_STRING in v)return new d.StringLiteral(m.value,E);if(u.TypeURL.RDF_LANG_STRING in v)return new d.LangStringLiteral(m.value,m.language);if(u.TypeURL.XSD_DATE_TIME in v){const N=new Date(m.value);return Number.isNaN(N.getTime())?new d.NonLexicalLiteral(void 0,E,this.superTypeProvider,m.value):new d.DateTimeLiteral(new Date(m.value),m.value,E)}if(u.TypeURL.XSD_BOOLEAN in v)return m.value!=="true"&&m.value!=="false"&&m.value!=="1"&&m.value!=="0"?new d.NonLexicalLiteral(void 0,E,this.superTypeProvider,m.value):new d.BooleanLiteral(m.value==="true"||m.value==="1",m.value);if(u.TypeURL.XSD_DECIMAL in v){const N=c.parseXSDDecimal(m.value);return N===void 0?new d.NonLexicalLiteral(void 0,E,this.superTypeProvider,m.value):u.TypeURL.XSD_INTEGER in v?new d.IntegerLiteral(N,E,m.value):new d.DecimalLiteral(N,E,m.value)}const T=u.TypeURL.XSD_FLOAT in v,j=u.TypeURL.XSD_DOUBLE in v;if(T||j){const N=c.parseXSDFloat(m.value);return N===void 0?new d.NonLexicalLiteral(void 0,E,this.superTypeProvider,m.value):T?new d.FloatLiteral(N,E,m.value):new d.DoubleLiteral(N,E,m.value)}return new d.Literal(m.value,E,m.value)}}e.TermTransformer=y},"../node_modules/sparqlee/dist/lib/util/Consts.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedOperators=e.SetFunctions=e.SetFunction=e.Operators=e.SpecialOperators=e.RegularOperators=e.SpecialOperator=e.RegularOperator=e.TypeURL=e.TypeAlias=void 0,function(u){u.SPARQL_NUMERIC="SPARQL_NUMERIC",u.SPARQL_STRINGLY="SPARQL_STRINGLY",u.SPARQL_NON_LEXICAL="SPARQL_NON_LEXICAL"}(e.TypeAlias||(e.TypeAlias={}));var t;(function(u){u.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",u.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",u.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",u.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",u.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",u.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",u.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",u.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",u.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",u.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",u.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",u.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",u.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",u.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",u.XSD_INT="http://www.w3.org/2001/XMLSchema#int",u.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",u.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",u.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",u.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",u.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",u.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",u.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",u.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",u.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",u.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",u.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",u.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",u.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",u.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",u.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",u.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",u.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",u.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",u.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",u.XSD_DAYTIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(t=e.TypeURL||(e.TypeURL={}));var o;(function(u){u.NOT="!",u.UMINUS="uminus",u.UPLUS="uplus",u.EQUAL="=",u.NOT_EQUAL="!=",u.LT="<",u.GT=">",u.LTE="<=",u.GTE=">=",u.MULTIPLICATION="*",u.DIVISION="/",u.ADDITION="+",u.SUBTRACTION="-",u.IS_IRI="isiri",u.IS_URI="isuri",u.IS_BLANK="isblank",u.IS_LITERAL="isliteral",u.IS_NUMERIC="isnumeric",u.STR="str",u.LANG="lang",u.DATATYPE="datatype",u.IRI="iri",u.URI="uri",u.STRDT="strdt",u.STRLANG="strlang",u.UUID="uuid",u.STRUUID="struuid",u.STRLEN="strlen",u.SUBSTR="substr",u.UCASE="ucase",u.LCASE="lcase",u.STRSTARTS="strstarts",u.STRENDS="strends",u.CONTAINS="contains",u.STRBEFORE="strbefore",u.STRAFTER="strafter",u.ENCODE_FOR_URI="encode_for_uri",u.LANG_MATCHES="langmatches",u.REGEX="regex",u.REPLACE="replace",u.ABS="abs",u.ROUND="round",u.CEIL="ceil",u.FLOOR="floor",u.RAND="rand",u.NOW="now",u.YEAR="year",u.MONTH="month",u.DAY="day",u.HOURS="hours",u.MINUTES="minutes",u.SECONDS="seconds",u.TIMEZONE="timezone",u.TZ="tz",u.MD5="md5",u.SHA1="sha1",u.SHA256="sha256",u.SHA384="sha384",u.SHA512="sha512"})(o=e.RegularOperator||(e.RegularOperator={}));var l;(function(u){u.BOUND="bound",u.IF="if",u.COALESCE="coalesce",u.LOGICAL_OR="||",u.LOGICAL_AND="&&",u.SAME_TERM="sameterm",u.IN="in",u.NOT_IN="notin",u.CONCAT="concat",u.BNODE="bnode"})(l=e.SpecialOperator||(e.SpecialOperator={})),e.RegularOperators=new Set(Object.values(o)),e.SpecialOperators=new Set(Object.values(l)),e.Operators=new Set([...e.RegularOperators,...e.SpecialOperators]);var d;(function(u){u.COUNT="count",u.SUM="sum",u.MIN="min",u.MAX="max",u.AVG="avg",u.GROUP_CONCAT="group_concat",u.SAMPLE="sample"})(d=e.SetFunction||(e.SetFunction={})),e.SetFunctions=new Set(Object.values(d)),e.NamedOperators=new Set([t.XSD_STRING,t.XSD_FLOAT,t.XSD_DOUBLE,t.XSD_DECIMAL,t.XSD_INTEGER,t.XSD_DATE_TIME,t.XSD_DATE,t.XSD_BOOLEAN])},"../node_modules/sparqlee/dist/lib/util/Errors.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NoExistenceHook=e.NoAggregator=e.ExtensionFunctionError=e.UnknownNamedOperator=e.UnknownOperator=e.InvalidTermType=e.InvalidExpressionType=e.InvalidExpression=e.InvalidArity=e.UnexpectedError=e.EmptyAggregateError=e.IncompatibleLanguageOperation=e.InvalidTimezoneCall=e.CastError=e.InvalidArgumentTypes=e.InError=e.CoalesceError=e.RDFEqualTypeError=e.EBVCoercionError=e.UnboundVariableError=e.InvalidLexicalForm=e.isExpressionError=e.ExpressionError=void 0;class t extends Error{}e.ExpressionError=t;function o(V){return V instanceof t}e.isExpressionError=o;class l extends t{constructor($){super(`Invalid lexical form '${q($)}'`),this.arg=$}}e.InvalidLexicalForm=l;class d extends t{constructor($,ee){super(`Unbound variable '${q($)}'`),this.variable=$,this.bindings=ee}}e.UnboundVariableError=d;class u extends t{constructor($){super(`Cannot coerce term to EBV '${q($)}'`),this.arg=$}}e.EBVCoercionError=u;class a extends t{constructor($){super("Equality test for literals with unsupported datatypes"),this.args=$}}e.RDFEqualTypeError=a;class c extends t{constructor($){super("All COALESCE arguments threw errors"),this.errors=$}}e.CoalesceError=c;class h extends t{constructor($){super(`Some argument to IN errorred and none where equal. ${$.map(ee=>`(${ee.toString()}) `).join("and ")}`),this.errors=$}}e.InError=h;class y extends t{constructor($,ee){super(`Argument types not valid for operator: '${q(ee)}' with '${q($)}`),this.args=$,this.op=ee}}e.InvalidArgumentTypes=y;class b extends t{constructor($,ee){super(`Invalid cast: '${q($)}' to '${q(ee)}'`),this.arg=$}}e.CastError=b;class m extends t{constructor($){super(`TIMEZONE call on ${$} which has no timezone`),this.dateString=$}}e.InvalidTimezoneCall=m;class E extends t{constructor($,ee){super(`Operation on incompatible language literals '${q($)}' and '${q(ee)}'`),this.arg1=$,this.arg2=ee}}e.IncompatibleLanguageOperation=E;class v extends t{constructor(){super("Empty aggregate expression")}}e.EmptyAggregateError=v;class T extends Error{constructor($,ee){super(`Programmer Error '${$}'`),this.payload=ee}}e.UnexpectedError=T;class j extends Error{constructor($,ee){super(`The number of args does not match the arity of the operator '${q(ee)}'.`),this.args=$,this.op=ee}}e.InvalidArity=j;class N extends Error{constructor($){super(`Invalid SPARQL Expression '${q($)}'`)}}e.InvalidExpression=N;class x extends Error{constructor($){super(`Invalid expression type for SPARQL Expression '${q($)}'`),this.expr=$}}e.InvalidExpressionType=x;class I extends Error{constructor($){super(`Invalid term type for term '${q($)}'`),this.term=$}}e.InvalidTermType=I;class w extends Error{constructor($){super(`Unknown operator: '${q($)}`)}}e.UnknownOperator=w;class S extends Error{constructor($){super(`Unknown named operator: '${q($)}'`)}}e.UnknownNamedOperator=S;class P extends Error{constructor($,ee){ee instanceof Error?super(`Error thrown in ${$}: ${ee.message}${ee.stack?`
${ee.stack}`:""}`):super(`Error thrown in ${$}`)}}e.ExtensionFunctionError=P;class B extends Error{constructor($){super(`Aggregate expression ${q($)} found, but no aggregate hook provided.`)}}e.NoAggregator=B;class H extends Error{constructor(){super("EXISTS found, but no existence hook provided.")}}e.NoExistenceHook=H;function q(V){return JSON.stringify(V)}},"../node_modules/sparqlee/dist/lib/util/Ordering.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.orderTypes=void 0;const o=t("../node_modules/lru-cache/index.js"),l=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),d=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),u=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");function a(b,m,E,v,T,j){return b===m?0:b===void 0?E?-1:1:m===void 0?E?1:-1:b.equals(m)?0:c(b,m,v,T)===E?-1:1}e.orderTypes=a;function c(b,m,E,v,T){return b.termType!==m.termType?y[b.termType]<y[m.termType]:b.termType==="Literal"?h(b,m,E,v):b.value<m.value}function h(b,m,E,v){const T={discoverer:E||(()=>"term"),cache:v||new o},j=new l.TermTransformer(T),N=j.transformLiteral(b),x=j.transformLiteral(m),I=N.dataType,w=x.dataType,S=(0,u.getSuperTypeDict)(I,T),P=(0,u.getSuperTypeDict)(w,T);return d.TypeURL.XSD_BOOLEAN in S&&d.TypeURL.XSD_BOOLEAN in P||d.TypeURL.XSD_DATE_TIME in S&&d.TypeURL.XSD_DATE_TIME in P||d.TypeAlias.SPARQL_NUMERIC in S&&d.TypeAlias.SPARQL_NUMERIC in P||d.TypeURL.XSD_STRING in S&&d.TypeURL.XSD_STRING in P?N.typedValue<x.typedValue:d.TypeURL.RDF_LANG_STRING in S&&d.TypeURL.RDF_LANG_STRING in P?N.typedValue<x.typedValue||N.typedValue===x.typedValue&&N.language<x.language:I<w||N.dataType===x.dataType&&N.str()<x.str()}const y={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}},"../node_modules/sparqlee/dist/lib/util/Parsing.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseXSDDateTime=e.parseXSDInteger=e.parseXSDDecimal=e.parseXSDFloat=void 0;function t(u){const a=Number(u);return Number.isNaN(a)?u==="NaN"?Number.NaN:u==="INF"||u==="+INF"?Number.POSITIVE_INFINITY:u==="-INF"?Number.NEGATIVE_INFINITY:void 0:a}e.parseXSDFloat=t;function o(u){const a=Number(u);return Number.isNaN(a)?void 0:a}e.parseXSDDecimal=o;function l(u){const a=Number.parseInt(u,10);return Number.isNaN(a)?void 0:a}e.parseXSDInteger=l;function d(u){const a=u.indexOf("T"),c=a>=0?u.slice(0,Math.max(0,a)):u,[h,y,b]=c.split("-");let m="00",E="00",v="00",T="";if(a>=0){const j=u.slice(a+1),[N,x]=j.split(/[+Z-]/u);[m,E,v]=N.split(":");const I=/([+Z-].*)/u.exec(j);T=I?I[0]:""}return{year:h,month:y,day:b,hours:m,minutes:E,seconds:v,timezone:T}}e.parseXSDDateTime=d},"../node_modules/sparqlee/dist/lib/util/TypeHandling.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isSubTypeOf=e.getSuperTypeDict=e.isInternalSubType=e.asGeneralType=e.asOverrideType=e.asKnownLiteralType=e.asTypeAlias=e.typeAliasCheck=e.extensionTableInit=e.getSuperTypes=e.superTypeDictTable=e.extensionTableInput=void 0;const o=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js");e.extensionTableInput={[l.TypeURL.XSD_DATE_TIME_STAMP]:l.TypeURL.XSD_DATE_TIME,[l.TypeURL.XSD_DAYTIME_DURATION]:l.TypeURL.XSD_DURATION,[l.TypeURL.XSD_YEAR_MONTH_DURATION]:l.TypeURL.XSD_DURATION,[l.TypeURL.RDF_LANG_STRING]:l.TypeAlias.SPARQL_STRINGLY,[l.TypeURL.XSD_STRING]:l.TypeAlias.SPARQL_STRINGLY,[l.TypeURL.XSD_NORMALIZED_STRING]:l.TypeURL.XSD_STRING,[l.TypeURL.XSD_TOKEN]:l.TypeURL.XSD_NORMALIZED_STRING,[l.TypeURL.XSD_LANGUAGE]:l.TypeURL.XSD_TOKEN,[l.TypeURL.XSD_NM_TOKEN]:l.TypeURL.XSD_TOKEN,[l.TypeURL.XSD_NAME]:l.TypeURL.XSD_TOKEN,[l.TypeURL.XSD_NC_NAME]:l.TypeURL.XSD_NAME,[l.TypeURL.XSD_ENTITY]:l.TypeURL.XSD_NC_NAME,[l.TypeURL.XSD_ID]:l.TypeURL.XSD_NC_NAME,[l.TypeURL.XSD_ID_REF]:l.TypeURL.XSD_NC_NAME,[l.TypeURL.XSD_DOUBLE]:l.TypeAlias.SPARQL_NUMERIC,[l.TypeURL.XSD_FLOAT]:l.TypeAlias.SPARQL_NUMERIC,[l.TypeURL.XSD_DECIMAL]:l.TypeAlias.SPARQL_NUMERIC,[l.TypeURL.XSD_INTEGER]:l.TypeURL.XSD_DECIMAL,[l.TypeURL.XSD_NON_POSITIVE_INTEGER]:l.TypeURL.XSD_INTEGER,[l.TypeURL.XSD_NEGATIVE_INTEGER]:l.TypeURL.XSD_NON_POSITIVE_INTEGER,[l.TypeURL.XSD_LONG]:l.TypeURL.XSD_INTEGER,[l.TypeURL.XSD_INT]:l.TypeURL.XSD_LONG,[l.TypeURL.XSD_SHORT]:l.TypeURL.XSD_INT,[l.TypeURL.XSD_BYTE]:l.TypeURL.XSD_SHORT,[l.TypeURL.XSD_NON_NEGATIVE_INTEGER]:l.TypeURL.XSD_INTEGER,[l.TypeURL.XSD_POSITIVE_INTEGER]:l.TypeURL.XSD_NON_NEGATIVE_INTEGER,[l.TypeURL.XSD_UNSIGNED_LONG]:l.TypeURL.XSD_NON_NEGATIVE_INTEGER,[l.TypeURL.XSD_UNSIGNED_INT]:l.TypeURL.XSD_UNSIGNED_LONG,[l.TypeURL.XSD_UNSIGNED_SHORT]:l.TypeURL.XSD_UNSIGNED_INT,[l.TypeURL.XSD_UNSIGNED_BYTE]:l.TypeURL.XSD_UNSIGNED_SHORT,[l.TypeURL.XSD_DATE_TIME]:"term",[l.TypeURL.XSD_BOOLEAN]:"term",[l.TypeURL.XSD_DATE]:"term",[l.TypeURL.XSD_DURATION]:"term",[l.TypeAlias.SPARQL_NUMERIC]:"term",[l.TypeAlias.SPARQL_STRINGLY]:"term",[l.TypeAlias.SPARQL_NON_LEXICAL]:"term",[l.TypeURL.XSD_ANY_URI]:"term"};function d(j,N){const x=N.cache.get(j);if(x)return x;const I=N.discoverer(j);if(I==="term"){const P=Object.create(null);return P.__depth=0,P[j]=0,N.cache.set(j,P),P}let w;const S=y(I);return S?w=Object.assign({},e.superTypeDictTable[S]):w=Object.assign({},d(I,N)),w.__depth++,w[j]=w.__depth,N.cache.set(j,w),w}e.getSuperTypes=d;function u(){const j=Object.create(null);for(const[N,x]of Object.entries(e.extensionTableInput)){const I=N;j[I]||a(I,x,j)}e.superTypeDictTable=j}e.extensionTableInit=u,u();function a(j,N,x){if(N==="term"||N===void 0){const I=Object.create(null);I.__depth=0,I[j]=0,x[j]=I;return}x[N]||a(N,e.extensionTableInput[N],x),x[j]=Object.assign(Object.assign({},x[N]),{[j]:x[N].__depth+1,__depth:x[N].__depth+1})}function c(){e.typeAliasCheck=Object.create(null);for(const j of Object.values(l.TypeAlias))e.typeAliasCheck[j]=!0}c();function h(j){if(j in e.typeAliasCheck)return j}e.asTypeAlias=h;function y(j){if(j in e.superTypeDictTable)return j}e.asKnownLiteralType=y;function b(j){if(y(j)||j==="term")return j}e.asOverrideType=b;function m(j){if(j==="term"||(0,o.asTermType)(j))return j}e.asGeneralType=m;function E(j,N){return j!=="term"&&e.superTypeDictTable[j]&&e.superTypeDictTable[j][N]!==void 0}e.isInternalSubType=E;function v(j,N){const x=y(j);return x?e.superTypeDictTable[x]:d(j,N)}e.getSuperTypeDict=v;function T(j,N,x){return j==="term"?!1:v(j,x)[N]!==void 0}e.isSubTypeOf=T},"../node_modules/stream-to-string/index.js":(n,e,t)=>{var o=t("./require-empty.js");n.exports=function(l,d,u){typeof d=="function"&&(u=d,d=null),u=u||function(){};var a="";return new o(function(c,h){l.on("data",function(y){a+=typeof d=="string"?y.toString(d):y.toString()}),l.on("end",function(){c(a),u(null,a)}),l.on("error",function(y){h(y),u(y)})})}},"../node_modules/typed-immutable-map/dist/HashMap/empty.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=void 0;const l={node:t("../node_modules/typed-immutable-map/dist/nodes/index.js").EMPTY,size:0};function d(){return l}e.empty=d},"../node_modules/typed-immutable-map/dist/HashMap/entries.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.entries=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(u){return(0,o.iterator)((0,o.getNode)(u),d)}e.entries=l;function d(u){return[u.key,u.value]}},"../node_modules/typed-immutable-map/dist/HashMap/filter.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),u=function(c,h){return(0,l.reduce)(function(y,b,m){return c(b,m)?(0,d.set)(m,b,y):y},(0,o.empty)(),h)};e.filter=u},"../node_modules/typed-immutable-map/dist/HashMap/forEach.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),l=function(u,a){return(0,o.reduce)((c,h,y)=>u(h,y),null,a),a};e.forEach=l},"../node_modules/typed-immutable-map/dist/HashMap/from.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromObject=e.fromIterable=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/set.js");function d(a){let c=(0,o.empty)();for(const[h,y]of a)c=(0,l.set)(h,y,c);return c}e.fromIterable=d;function u(a){let c=(0,o.empty)();for(let h in a)a.hasOwnProperty(h)&&(c=(0,l.set)(h,a[h],c));return c}e.fromObject=u},"../node_modules/typed-immutable-map/dist/HashMap/get.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.get=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(d,u,a){const c=(0,o.findHash)(d);return(0,o.getHash)(void 0,c,d,u,a)}e.get=l},"../node_modules/typed-immutable-map/dist/HashMap/has.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.has=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/index.js");function d(u,a,c){const h=(0,o.findHash)(u);return(0,o.getHash)(l.NOTHING,h,u,a,c)!==l.NOTHING}e.has=d},"../node_modules/typed-immutable-map/dist/HashMap/keys.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.keys=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(u){return(0,o.iterator)((0,o.getNode)(u),d)}e.keys=l;function d(u){return u.key}},"../node_modules/typed-immutable-map/dist/HashMap/map.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),u=function(c,h){return(0,l.reduce)(function(y,b,m){return(0,d.set)(m,c(b,m),y)},(0,o.empty)(),h)};e.map=u},"../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findHash=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/index.js");function l(d){return typeof d=="number"?d:typeof d=="string"?(0,o.stringHash)(d):Math.abs((0,o.stringHash)(JSON.stringify(d)))}e.findHash=l},"../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fold=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function l(d,u,a){const c=(0,o.getNode)(a);if(c.type===0)return u;if(c.type===1)return d(u,c.value,c.key);const h=[c.children];let y;for(;y=h.shift();)for(let b=0;b<y.length;++b){const m=y[b];m&&m.type!==0&&(m.type===1?u=d(u,m.value,m.key):h.push(m.children))}return u}e.fold=l},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/index.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js");function u(a,c,h,y,b=d.defaultKeyEquals){let m=(0,l.getNode)(y),E=0;for(;;)switch(m.type){case 1:return b(h,m.key)?m.value:a;case 2:if(c===m.hash){const v=m.children;for(let T=0;T<v.length;++T){const j=v[T];if(b(h,j.key))return j.value}return a}case 3:{const v=(0,o.hashFragment)(E,c),T=(0,o.toBitmap)(v);if(m.mask&T){const j=(0,o.bitmapToIndex)(m.mask,T);m=m.children[j],E+=o.SIZE;break}return a}case 4:{if(m=m.children[(0,o.hashFragment)(E,c)],m){E+=o.SIZE;break}return a}default:return a}}e.getHash=u},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=void 0;function t(o){return o.node}e.getNode=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSize=void 0;function t(o){return o.size}e.getSize=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js"),e),l(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js"),e)},"../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=void 0;function t(c,h){return new o(d(c,h,[]))}e.iterator=t;class o{_iterate;constructor(h){this._iterate=h}next(){if(!this._iterate)return{done:!0,value:null};const{value:h,rest:y}=this._iterate;return this._iterate=l(y),{done:!1,value:h}}[Symbol.iterator](){return this}}const l=c=>c&&u(c[0],c[1],c[2],c[3],c[4]);function d(c,h,y){switch(c.type){case 1:return{value:h(c),rest:y};case 2:case 4:case 3:const b=c.children;return u(b.length,b,0,h,y);default:return l(y)}}function u(c,h,y,b,m){for(;y<c;){const E=h[y++];if(E&&a(E))return d(E,b,[c,h,y,b,m])}return l(m)}function a(c){return c&&c.type!==0}},"../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultKeyEquals=void 0;const t=(o,l)=>o===l;e.defaultKeyEquals=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setKeyValue=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/index.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),u=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js"),a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),c=y=>()=>y;function h(y,b,m){const E=(0,l.findHash)(y),v={value:(0,u.getSize)(m)},T=(0,o.modify)((0,d.getNode)(m),0,c(b),E,y,v);return(0,a.setTree)(T,v.value,m)}e.setKeyValue=h},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setTree=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function l(d,u,a){return d===(0,o.getNode)(a)?a:{node:d,size:u}}e.setTree=l},"../node_modules/typed-immutable-map/dist/HashMap/reduce.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.reduce=o.fold},"../node_modules/typed-immutable-map/dist/HashMap/remove.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.remove=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/constants.js");function d(u,a){return(0,o.setKeyValue)(u,l.NOTHING,a)}e.remove=d},"../node_modules/typed-immutable-map/dist/HashMap/set.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.set=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.set=o.setKeyValue},"../node_modules/typed-immutable-map/dist/HashMap/size.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.size=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js");function l(d){return(0,o.getSize)(d)}e.size=l},"../node_modules/typed-immutable-map/dist/HashMap/values.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.values=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function l(u){return(0,o.iterator)((0,o.getNode)(u),d)}e.values=l;function d(u){return u.value}},"../node_modules/typed-immutable-map/dist/common/array-operations.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.remove=e.replace=void 0;function t(d,u,a){const c=a.length,h=Array(c);for(let y=0;y<c;++y)h[y]=a[y];return h[d]=u,h}e.replace=t;function o(d,u){const a=u.length;if(a===0||d>=a)return u;if(a===1)return[];const c=Array(a-1);let h=0;for(;h<d;++h)c[h]=u[h];for(h=h+1;h<a;++h)c[h-1]=u[h];return c}e.remove=o;function l(d,u,a){const c=a.length,h=Array(c+1);let y=0;for(;y<d;++y)h[y]=a[y];for(h[y++]=u;y<c+1;++y)h[y]=a[y-1];return h}e.insert=l},"../node_modules/typed-immutable-map/dist/common/bitwise-operations.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bitmapToIndex=e.toBitmap=e.hashFragment=e.hammingWeight=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/constants.js");function l(c){return c=c-(c>>1&1431655765),c=(c&858993459)+(c>>2&858993459),(c+(c>>4)&252645135)*16843009>>24}e.hammingWeight=l;function d(c,h){return h>>>c&o.MASK}e.hashFragment=d;function u(c){return 1<<c}e.toBitmap=u;function a(c,h){return l(c&h-1)}e.bitmapToIndex=a},"../node_modules/typed-immutable-map/dist/common/constants.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_ARRAY_NODE=e.MAX_INDEX_NODE=e.MASK=e.BUCKET_SIZE=e.SIZE=void 0,e.SIZE=5,e.BUCKET_SIZE=Math.pow(2,e.SIZE),e.MASK=e.BUCKET_SIZE-1,e.MAX_INDEX_NODE=e.BUCKET_SIZE/2,e.MIN_ARRAY_NODE=e.BUCKET_SIZE/4},"../node_modules/typed-immutable-map/dist/common/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/common/array-operations.js"),e),l(t("../node_modules/typed-immutable-map/dist/common/bitwise-operations.js"),e),l(t("../node_modules/typed-immutable-map/dist/common/constants.js"),e),l(t("../node_modules/typed-immutable-map/dist/common/stringHash.js"),e)},"../node_modules/typed-immutable-map/dist/common/stringHash.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringHash=void 0;function t(o){let l=0;for(let d=0;d<o.length;++d)l=(l<<5)-l+o.charCodeAt(d)|0;return l}e.stringHash=t},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyListNode=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),d=t("../node_modules/typed-immutable-map/dist/common/index.js"),u=t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js");function a(h,y,b,m,E,v){const{size:T,children:j}=h,N=(0,d.hashFragment)(y,m),x=j[N],I=(0,l.modify)(x||(0,o.empty)(),y+d.SIZE,b,m,E,v);return x===I?h:c(x)&&!c(I)?{type:4,size:T+1,children:(0,d.replace)(N,I,j)}:!c(x)&&c(I)?T-1<=d.MIN_ARRAY_NODE?(0,u.toIndexNode)(T,N,j):{type:4,size:T-1,children:(0,d.replace)(N,(0,o.empty)(),j)}:{type:4,size:T,children:(0,d.replace)(N,I,j)}}e.modifyListNode=a;function c(h){return h&&h.type===0}},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toIndexNode=void 0;function t(o,l,d){const u=new Array(o-1);let a=0,c=0;for(let h=0;h<d.length;++h)if(h!==l){const y=d[h];y&&y.type>0&&(u[a++]=y,c|=1<<h)}return{type:3,mask:c,children:u}}e.toIndexNode=t},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyCollisionNode=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js");function u(a,c,h,y,b,m){if(y===a.hash){const v=(0,d.newCollisionList)(a.hash,a.children,h,b,m);return v===a.children?a:v.length>1?{type:2,hash:a.hash,children:v}:v[0]}const E=h();return E===o.NOTHING?a:(++m.value,(0,l.combineLeafNodes)(c,a.hash,a,y,{type:1,hash:y,key:b,value:E}))}e.modifyCollisionNode=u},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.newCollisionList=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),l=t("../node_modules/typed-immutable-map/dist/common/index.js");function d(u,a,c,h,y){const b=a.length;for(let E=0;E<b;++E){const v=a[E];if(v.key===h){const T=v.value,j=c(T);return j===T?a:j===o.NOTHING?(--y.value,(0,l.remove)(E,a)):(0,l.insert)(E,{type:1,hash:u,key:h,value:j},a)}}const m=c();return m===o.NOTHING?a:(++y.value,(0,l.insert)(b,{type:1,hash:u,key:h,value:m},a))}e.newCollisionList=d},"../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=e.modifyEmpty=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js");function l(u,a,c,h,y,b){const m=c(void 0);return m===o.NOTHING?u:(++b.value,{type:1,hash:h,key:y,value:m})}e.modifyEmpty=l,e.EMPTY={type:0};function d(){return e.EMPTY}e.empty=d},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyIndexedNode=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),l=t("../node_modules/typed-immutable-map/dist/common/index.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),u=t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js");function a(h,y,b,m,E,v){const{mask:T,children:j}=h,N=(0,l.hashFragment)(y,m),x=(0,l.toBitmap)(N),I=(0,l.bitmapToIndex)(T,x),w=!!(T&x),S=w?j[I]:(0,o.empty)(),P=(0,d.modify)(S,y+l.SIZE,b,m,E,v);if(S===P)return h;if(w&&P.type===0){const B=T&~x;return B?j.length<=2&&c(j[I^1])?j[I^1]:{type:3,mask:B,children:(0,l.remove)(I,j)}:(0,o.empty)()}return!w&&P.type!==0?j.length>=l.MAX_INDEX_NODE?(0,u.toArrayNode)(N,P,T,j):{type:3,mask:T|x,children:(0,l.insert)(I,P,j)}:{type:3,mask:T,children:(0,l.replace)(I,P,j)}}e.modifyIndexedNode=a;function c(h){const y=h.type;return y===0||y===1||y===2}},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArrayNode=void 0;function t(o,l,d,u){const a=[];let c=d,h=0;for(let y=0;c;++y)c&1&&(a[y]=u[h++]),c>>>=1;return a[o]=l,{type:4,size:h+1,children:a}}e.toArrayNode=t},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyLeaf=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js");function u(a,c,h,y,b,m){if(b===a.key){const v=h(a.value);return v===a.value?a:v===o.NOTHING?(--m.value,(0,l.empty)()):{type:1,hash:y,key:b,value:v}}const E=h();return E===o.NOTHING?a:(++m.value,(0,d.combineLeafNodes)(c,a.hash,a,y,{type:1,hash:y,key:b,value:E}))}e.modifyLeaf=u},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLeafNodes=void 0;const o=t("../node_modules/typed-immutable-map/dist/common/index.js");function l(d,u,a,c,h){if(u===c)return{type:2,hash:u,children:[h,a]};const y=(0,o.hashFragment)(d,u),b=(0,o.hashFragment)(d,c);return{type:3,mask:(0,o.toBitmap)(y)|(0,o.toBitmap)(b),children:y===b?[l(d+o.SIZE,u,a,c,h)]:y<b?[a,h]:[h,a]}}e.combineLeafNodes=l},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/constants.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NOTHING=void 0,e.NOTHING=Object.create(null)},"../node_modules/typed-immutable-map/dist/nodes/index.js":function(n,e,t){var o=this&&this.__createBinding||(Object.create?function(d,u,a,c){c===void 0&&(c=a),Object.defineProperty(d,c,{enumerable:!0,get:function(){return u[a]}})}:function(d,u,a,c){c===void 0&&(c=a),d[c]=u[a]}),l=this&&this.__exportStar||function(d,u){for(var a in d)a!=="default"&&!Object.prototype.hasOwnProperty.call(u,a)&&o(u,d,a)};Object.defineProperty(e,"__esModule",{value:!0}),l(t("../node_modules/typed-immutable-map/dist/nodes/types.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),e),l(t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/modify.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modify=void 0;const o=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),d=t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),u=t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),a=t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js");function c(h,y,b,m,E,v){switch(h.type){case 1:return(0,o.modifyLeaf)(h,y,b,m,E,v);case 0:return(0,l.modifyEmpty)(h,y,b,m,E,v);case 4:return(0,d.modifyListNode)(h,y,b,m,E,v);case 3:return(0,u.modifyIndexedNode)(h,y,b,m,E,v);case 2:return(0,a.modifyCollisionNode)(h,y,b,m,E,v);default:throw new Error("never")}}e.modify=c},"../node_modules/typed-immutable-map/dist/nodes/types.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/uuid-random/index.js":(n,e,t)=>{(function(){var o,l=0,d=[],u;for(u=0;u<256;u++)d[u]=(u+256).toString(16).substr(1);y.BUFFER_SIZE=4096,y.bin=h,y.clearBuffer=function(){o=null,l=0},y.test=function(b){return typeof b=="string"?/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(b):!1};var a;typeof crypto<"u"?a=crypto:typeof window<"u"&&typeof window.msCrypto<"u"&&(a=window.msCrypto),a=a||t("?699d"),n.exports=y,y.randomBytes=function(){if(a){if(a.randomBytes)return a.randomBytes;if(a.getRandomValues)return typeof Uint8Array.prototype.slice!="function"?function(b){var m=new Uint8Array(b);return a.getRandomValues(m),Array.from(m)}:function(b){var m=new Uint8Array(b);return a.getRandomValues(m),m}}return function(b){var m,E=[];for(m=0;m<b;m++)E.push(Math.floor(Math.random()*256));return E}}();function c(b){return(!o||l+b>y.BUFFER_SIZE)&&(l=0,o=y.randomBytes(y.BUFFER_SIZE)),o.slice(l,l+=b)}function h(){var b=c(16);return b[6]=b[6]&15|64,b[8]=b[8]&63|128,b}function y(){var b=h();return d[b[0]]+d[b[1]]+d[b[2]]+d[b[3]]+"-"+d[b[4]]+d[b[5]]+"-"+d[b[6]]+d[b[7]]+"-"+d[b[8]]+d[b[9]]+"-"+d[b[10]]+d[b[11]]+d[b[12]]+d[b[13]]+d[b[14]]+d[b[15]]}})()},"../node_modules/yallist/iterator.js":n=>{n.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},"../node_modules/yallist/yallist.js":(n,e,t)=>{n.exports=o,o.Node=a,o.create=o;function o(c){var h=this;if(h instanceof o||(h=new o),h.tail=null,h.head=null,h.length=0,c&&typeof c.forEach=="function")c.forEach(function(m){h.push(m)});else if(arguments.length>0)for(var y=0,b=arguments.length;y<b;y++)h.push(arguments[y]);return h}o.prototype.removeNode=function(c){if(c.list!==this)throw new Error("removing node which does not belong to this list");var h=c.next,y=c.prev;return h&&(h.prev=y),y&&(y.next=h),c===this.head&&(this.head=h),c===this.tail&&(this.tail=y),c.list.length--,c.next=null,c.prev=null,c.list=null,h},o.prototype.unshiftNode=function(c){if(c!==this.head){c.list&&c.list.removeNode(c);var h=this.head;c.list=this,c.next=h,h&&(h.prev=c),this.head=c,this.tail||(this.tail=c),this.length++}},o.prototype.pushNode=function(c){if(c!==this.tail){c.list&&c.list.removeNode(c);var h=this.tail;c.list=this,c.prev=h,h&&(h.next=c),this.tail=c,this.head||(this.head=c),this.length++}},o.prototype.push=function(){for(var c=0,h=arguments.length;c<h;c++)d(this,arguments[c]);return this.length},o.prototype.unshift=function(){for(var c=0,h=arguments.length;c<h;c++)u(this,arguments[c]);return this.length},o.prototype.pop=function(){if(this.tail){var c=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,c}},o.prototype.shift=function(){if(this.head){var c=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,c}},o.prototype.forEach=function(c,h){h=h||this;for(var y=this.head,b=0;y!==null;b++)c.call(h,y.value,b,this),y=y.next},o.prototype.forEachReverse=function(c,h){h=h||this;for(var y=this.tail,b=this.length-1;y!==null;b--)c.call(h,y.value,b,this),y=y.prev},o.prototype.get=function(c){for(var h=0,y=this.head;y!==null&&h<c;h++)y=y.next;if(h===c&&y!==null)return y.value},o.prototype.getReverse=function(c){for(var h=0,y=this.tail;y!==null&&h<c;h++)y=y.prev;if(h===c&&y!==null)return y.value},o.prototype.map=function(c,h){h=h||this;for(var y=new o,b=this.head;b!==null;)y.push(c.call(h,b.value,this)),b=b.next;return y},o.prototype.mapReverse=function(c,h){h=h||this;for(var y=new o,b=this.tail;b!==null;)y.push(c.call(h,b.value,this)),b=b.prev;return y},o.prototype.reduce=function(c,h){var y,b=this.head;if(arguments.length>1)y=h;else if(this.head)b=this.head.next,y=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var m=0;b!==null;m++)y=c(y,b.value,m),b=b.next;return y},o.prototype.reduceReverse=function(c,h){var y,b=this.tail;if(arguments.length>1)y=h;else if(this.tail)b=this.tail.prev,y=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var m=this.length-1;b!==null;m--)y=c(y,b.value,m),b=b.prev;return y},o.prototype.toArray=function(){for(var c=new Array(this.length),h=0,y=this.head;y!==null;h++)c[h]=y.value,y=y.next;return c},o.prototype.toArrayReverse=function(){for(var c=new Array(this.length),h=0,y=this.tail;y!==null;h++)c[h]=y.value,y=y.prev;return c},o.prototype.slice=function(c,h){h=h||this.length,h<0&&(h+=this.length),c=c||0,c<0&&(c+=this.length);var y=new o;if(h<c||h<0)return y;c<0&&(c=0),h>this.length&&(h=this.length);for(var b=0,m=this.head;m!==null&&b<c;b++)m=m.next;for(;m!==null&&b<h;b++,m=m.next)y.push(m.value);return y},o.prototype.sliceReverse=function(c,h){h=h||this.length,h<0&&(h+=this.length),c=c||0,c<0&&(c+=this.length);var y=new o;if(h<c||h<0)return y;c<0&&(c=0),h>this.length&&(h=this.length);for(var b=this.length,m=this.tail;m!==null&&b>h;b--)m=m.prev;for(;m!==null&&b>c;b--,m=m.prev)y.push(m.value);return y},o.prototype.splice=function(c,h,...y){c>this.length&&(c=this.length-1),c<0&&(c=this.length+c);for(var b=0,m=this.head;m!==null&&b<c;b++)m=m.next;for(var E=[],b=0;m&&b<h;b++)E.push(m.value),m=this.removeNode(m);m===null&&(m=this.tail),m!==this.head&&m!==this.tail&&(m=m.prev);for(var b=0;b<y.length;b++)m=l(this,m,y[b]);return E},o.prototype.reverse=function(){for(var c=this.head,h=this.tail,y=c;y!==null;y=y.prev){var b=y.prev;y.prev=y.next,y.next=b}return this.head=h,this.tail=c,this};function l(c,h,y){var b=h===c.head?new a(y,null,h,c):new a(y,h,h.next,c);return b.next===null&&(c.tail=b),b.prev===null&&(c.head=b),c.length++,b}function d(c,h){c.tail=new a(h,c.tail,null,c),c.head||(c.head=c.tail),c.length++}function u(c,h){c.head=new a(h,null,c.head,c),c.tail||(c.tail=c.head),c.length++}function a(c,h,y,b){if(!(this instanceof a))return new a(c,h,y,b);this.list=b,this.value=c,h?(h.next=this,this.prev=h):this.prev=null,y?(y.prev=this,this.next=y):this.next=null}try{t("../node_modules/yallist/iterator.js")(o)}catch{}},"../packages/immutable/dist/Map.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/has.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/get.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),u=t("../node_modules/typed-immutable-map/dist/HashMap/forEach.js"),a=t("../node_modules/typed-immutable-map/dist/HashMap/map.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/filter.js"),h=t("../node_modules/typed-immutable-map/dist/HashMap/remove.js"),y=t("../node_modules/typed-immutable-map/dist/HashMap/entries.js"),b=t("../node_modules/typed-immutable-map/dist/HashMap/values.js"),m=t("../node_modules/typed-immutable-map/dist/HashMap/keys.js"),E=t("../node_modules/typed-immutable-map/dist/HashMap/size.js");class v{hashmap;constructor(j){this.hashmap=j}get size(){return(0,E.size)(this.hashmap)}set(j,N){return new v((0,d.set)(j,N,this.hashmap))}delete(j){return new v((0,h.remove)(j,this.hashmap))}get(j){return(0,l.get)(j,this.hashmap)}has(j){return(0,o.has)(j,this.hashmap)}forEach(j){(0,u.forEach)(j,this.hashmap)}map(j){return new v((0,a.map)(j,this.hashmap))}filter(j){return new v((0,c.filter)(j,this.hashmap))}toJS(){return Object.fromEntries(this)}toJSON(){return this.toJS()}keys(){return(0,m.keys)(this.hashmap)}values(){return(0,b.values)(this.hashmap)}entries(){return(0,y.entries)(this.hashmap)}[Symbol.iterator](){return this.entries()}}e.Map=v},"../packages/immutable/dist/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const o=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/from.js"),d=t("../packages/immutable/dist/Map.js"),u=c=>Symbol.iterator in c;function a(c){return c?u(c)?new d.Map((0,l.fromIterable)(c)):new d.Map((0,l.fromObject)(c)):new d.Map((0,o.empty)())}e.Map=a},"../packages/uuid/dist/index.js":function(n,e,t){var o=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.v4=void 0;const l=o(t("../node_modules/uuid-random/index.js"));e.v4=l.default},asynciterator:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__},sparqlalgebrajs:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__},sparqljs:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__},"?699d":()=>{},"./require-empty.js":()=>{},"./src/crypto-polyfill.js":(__unused_webpack_module,__unused_webpack_exports,__quadstore_comunica_require__)=>{const isNode=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,polyfillCrypto=({randomFillSync:n})=>{__quadstore_comunica_require__.g.crypto={},__quadstore_comunica_require__.g.crypto.getRandomValues=e=>(n(e),e)};isNode&&typeof crypto>"u"&&(eval("typeof require === 'function'")?polyfillCrypto(eval("require('crypto');")):eval("import('crypto');").then(polyfillCrypto).catch(n=>{console.error(n),process.exit(1)}))},"./src/engine.js":(n,e,t)=>{const o=new(t("../node_modules/@comunica/logger-void/lib/index.js")).LoggerVoid,l=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^2.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),d=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^2.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),u=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^2.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),a=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^2.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),c=new(t("../node_modules/@comunica/bus-query-operation/lib/index.js")).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^2.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),h=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^2.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),y=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^2.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),b=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),m=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^2.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),E=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^2.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),v=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^2.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),T=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^2.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),j=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/^2.0.0/components/ActorRdfResolveQuadPattern.jsonld#ActorRdfResolveQuadPattern_default_bus"});new(t("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js")).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:d});const N=new(t("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:d});new(t("../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js")).ActorHashBindingsSha1({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:u});const x=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:u}),I=new(t("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:a});new(t("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js")).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:a}),new(t("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js")).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:a}),new(t("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js")).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:a});const w=new(t("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:c});new(t("../node_modules/@comunica/actor-query-operation-values/lib/index.js")).ActorQueryOperationValues({name:"urn:comunica:default:query-operation/actors#values",bus:c});const S=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:h});new(t("../node_modules/@comunica/actor-query-parse-sparql/lib/index.js")).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:h});const P=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:y}),B=new(t("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:y}),H=new(t("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:y}),q=new(t("../node_modules/@comunica/mediator-all/lib/index.js")).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:b});new(t("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js")).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:m});const V=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:m});new(t("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js")).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:E});const $=new(t("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:E});new(t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js")).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:v});const ee=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:v}),D=new(t("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js")).MediatorJoinCoefficientsFixed({cpuWeight:1,memoryWeight:1,timeWeight:10,ioWeight:100,name:"urn:comunica:default:rdf-join/mediators#main",bus:T}),F=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-resolve-quad-pattern/mediators#main",bus:j});new(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js")).ActorRdfResolveQuadPatternRdfJsSource({name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#rdfjs-source",bus:j}),new(t("../node_modules/@comunica/actor-query-operation-ask/lib/index.js")).ActorQueryOperationAsk({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#ask",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js")).ActorQueryOperationBgpJoin({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#bgp",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-construct/lib/index.js")).ActorQueryOperationConstruct({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#construct",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js")).ActorQueryOperationDescribeSubject({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#describe",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js")).ActorQueryOperationDistinctHash({mediatorHashBindings:x,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#distinct",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-extend/lib/index.js")).ActorQueryOperationExtend({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#extend",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js")).ActorQueryOperationFilterSparqlee({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#filter",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js")).ActorQueryOperationFromQuad({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#from",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-group/lib/index.js")).ActorQueryOperationGroup({mediatorHashBindings:x,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#group",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js")).ActorQueryOperationOrderBySparqlee({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#orderby",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-nop/lib/index.js")).ActorQueryOperationNop({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#nop",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-project/lib/index.js")).ActorQueryOperationProject({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#project",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js")).ActorQueryOperationReducedHash({mediatorHashBindings:x,cacheSize:100,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#reduced",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-service/lib/index.js")).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#service",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-slice/lib/index.js")).ActorQueryOperationSlice({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#slice",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-union/lib/index.js")).ActorQueryOperationUnion({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#union",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js")).ActorQueryOperationPathAlt({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-alt",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js")).ActorQueryOperationPathInv({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-inv",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-link/lib/index.js")).ActorQueryOperationPathLink({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-link",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js")).ActorQueryOperationPathZeroOrOne({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js")).ActorQueryOperationAddRewrite({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-add",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js")).ActorQueryOperationPathZeroOrMore({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js")).ActorQueryOperationPathOneOrMore({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js")).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-composite",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js")).ActorQueryOperationPathNps({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-nps",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js")).ActorQueryOperationCopyRewrite({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-copy",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js")).ActorQueryOperationMoveRewrite({mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-move",bus:c});const Q=new(t("../node_modules/@comunica/actor-init-query/lib/index-browser.js")).ActorInitQuery({mediatorOptimizeQueryOperation:I,mediatorQueryOperation:w,mediatorQueryParse:S,mediatorQueryResultSerialize:P,mediatorQueryResultSerializeMediaTypeCombiner:B,mediatorQueryResultSerializeMediaTypeFormatCombiner:H,mediatorContextPreprocess:N,mediatorHttpInvalidate:q,logger:o,defaultQueryInputFormat:"sparql",allowNoSources:!1,contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelay:"@comunica/bus-http:http-retry-delay",httpRetryOnServerError:"@comunica/bus-http:http-retry-on-server-error",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",localizeBlankNodes:"@comunica/actor-query-operation:localizeBlankNodes",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:init/actors#query",bus:l});new(t("../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js")).ActorRdfJoinNone({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js")).ActorRdfJoinSingle({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js")).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js")).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorJoinEntriesSort:V,mediatorQueryOperation:w,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js")).ActorRdfJoinHash({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js")).ActorRdfJoinSymmetricHash({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js")).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js")).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorQueryOperation:w,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js")).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js")).ActorRdfJoinMinusHash({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:T}),new(t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js")).ActorRdfJoinMinusHashUndef({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:T}),new(t("../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js")).ActorQueryOperationClear({mediatorUpdateQuads:ee,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-clear",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-create/lib/index.js")).ActorQueryOperationCreate({mediatorUpdateQuads:ee,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-create",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js")).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:ee,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js")).ActorQueryOperationDrop({mediatorUpdateQuads:ee,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-drop",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-update-load/lib/index.js")).ActorQueryOperationLoad({mediatorUpdateQuads:ee,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#update-load",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-join/lib/index.js")).ActorQueryOperationJoin({mediatorJoin:D,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#join",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js")).ActorQueryOperationLeftJoin({mediatorJoin:D,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-minus/lib/index.js")).ActorQueryOperationMinus({mediatorJoin:D,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#minus",bus:c}),new(t("../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js")).ActorQueryOperationPathSeq({mediatorJoin:D,mediatorQueryOperation:w,name:"urn:comunica:default:query-operation/actors#path-seq",bus:c}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js")).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:V,mediatorJoin:D,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:T}),new(t("../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js")).ActorQueryOperationQuadpattern({mediatorResolveQuadPattern:F,unionDefaultGraph:!1,name:"urn:comunica:default:query-operation/actors#quadpattern",bus:c}),new(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js")).ActorRdfResolveQuadPatternFederated({mediatorResolveQuadPattern:F,skipEmptyPatterns:!1,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#federated",bus:j}),n.exports=Q},"./src/index.js":(n,e,t)=>{t("./src/crypto-polyfill.js");const{QueryEngineBase:o}=t("../node_modules/@comunica/actor-init-query/lib/index-browser.js"),l=new o(t("./src/engine.js")),d=Object.create(null);class u{constructor(c){this.store=c,this.engine=l}getContext(c){return{...c,source:this.store,destination:this.store}}query(c,h=d){return l.query(c,this.getContext(h))}queryVoid(c,h=d){return l.queryVoid(c,this.getContext(h))}queryBindings(c,h=d){return l.queryBindings(c,this.getContext(h))}queryQuads(c,h=d){return l.queryQuads(c,this.getContext(h))}queryBoolean(c,h=d){return l.queryBoolean(c,this.getContext(h))}}n.exports.D=u,n.exports.H=l},"../node_modules/@comunica/actor-query-operation-reduced-hash/node_modules/lru-cache/index.js":n=>{const e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,o=typeof AbortController=="function"?AbortController:class{constructor(){this.signal=new u}abort(w=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||w,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},l=typeof AbortSignal=="function",d=typeof o.AbortSignal=="function",u=l?AbortSignal:d?o.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(w){w.type==="abort"&&(this.aborted=!0,this.onabort(w),this._listeners.forEach(S=>S(w),this))}onabort(){}addEventListener(w,S){w==="abort"&&this._listeners.push(S)}removeEventListener(w,S){w==="abort"&&(this._listeners=this._listeners.filter(P=>P!==S))}},a=new Set,c=(I,w)=>{const S=`LRU_CACHE_OPTION_${I}`;m(S)&&E(S,`${I} option`,`options.${w}`,x)},h=(I,w)=>{const S=`LRU_CACHE_METHOD_${I}`;if(m(S)){const{prototype:P}=x,{get:B}=Object.getOwnPropertyDescriptor(P,I);E(S,`${I} method`,`cache.${w}()`,B)}},y=(I,w)=>{const S=`LRU_CACHE_PROPERTY_${I}`;if(m(S)){const{prototype:P}=x,{get:B}=Object.getOwnPropertyDescriptor(P,I);E(S,`${I} property`,`cache.${w}`,B)}},b=(...I)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...I):console.error(...I)},m=I=>!a.has(I),E=(I,w,S,P)=>{a.add(I);const B=`The ${w} is deprecated. Please use ${S} instead.`;b(B,"DeprecationWarning",I,P)},v=I=>I&&I===Math.floor(I)&&I>0&&isFinite(I),T=I=>v(I)?I<=Math.pow(2,8)?Uint8Array:I<=Math.pow(2,16)?Uint16Array:I<=Math.pow(2,32)?Uint32Array:I<=Number.MAX_SAFE_INTEGER?j:null:null;class j extends Array{constructor(w){super(w),this.fill(0)}}class N{constructor(w){if(w===0)return[];const S=T(w);this.heap=new S(w),this.length=0}push(w){this.heap[this.length++]=w}pop(){return this.heap[--this.length]}}class x{constructor(w={}){const{max:S=0,ttl:P,ttlResolution:B=1,ttlAutopurge:H,updateAgeOnGet:q,updateAgeOnHas:V,allowStale:$,dispose:ee,disposeAfter:D,noDisposeOnSet:F,noUpdateTTL:Q,maxSize:X=0,maxEntrySize:W=0,sizeCalculation:le,fetchMethod:ue,fetchContext:de,noDeleteOnFetchRejection:ce,noDeleteOnStaleGet:ge,allowStaleOnFetchRejection:Oe,allowStaleOnFetchAbort:je,ignoreFetchAbort:Ie}=w,{length:Se,maxAge:he,stale:Ae}=w instanceof x?{}:w;if(S!==0&&!v(S))throw new TypeError("max option must be a nonnegative integer");const Re=S?T(S):Array;if(!Re)throw new Error("invalid max value: "+S);if(this.max=S,this.maxSize=X,this.maxEntrySize=W||this.maxSize,this.sizeCalculation=le||Se,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=ue||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=de,!this.fetchMethod&&de!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(S).fill(null),this.valList=new Array(S).fill(null),this.next=new Re(S),this.prev=new Re(S),this.head=0,this.tail=0,this.free=new N(S),this.initialFill=1,this.size=0,typeof ee=="function"&&(this.dispose=ee),typeof D=="function"?(this.disposeAfter=D,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!F,this.noUpdateTTL=!!Q,this.noDeleteOnFetchRejection=!!ce,this.allowStaleOnFetchRejection=!!Oe,this.allowStaleOnFetchAbort=!!je,this.ignoreFetchAbort=!!Ie,this.maxEntrySize!==0){if(this.maxSize!==0&&!v(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!v(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!$||!!Ae,this.noDeleteOnStaleGet=!!ge,this.updateAgeOnGet=!!q,this.updateAgeOnHas=!!V,this.ttlResolution=v(B)||B===0?B:1,this.ttlAutopurge=!!H,this.ttl=P||he||0,this.ttl){if(!v(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const Be="LRU_CACHE_UNBOUNDED";m(Be)&&(a.add(Be),b("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",Be,x))}Ae&&c("stale","allowStale"),he&&c("maxAge","ttl"),Se&&c("length","sizeCalculation")}getRemainingTTL(w){return this.has(w,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new j(this.max),this.starts=new j(this.max),this.setItemTTL=(P,B,H=e.now())=>{if(this.starts[P]=B!==0?H:0,this.ttls[P]=B,B!==0&&this.ttlAutopurge){const q=setTimeout(()=>{this.isStale(P)&&this.delete(this.keyList[P])},B+1);q.unref&&q.unref()}},this.updateItemAge=P=>{this.starts[P]=this.ttls[P]!==0?e.now():0},this.statusTTL=(P,B)=>{P&&(P.ttl=this.ttls[B],P.start=this.starts[B],P.now=w||S(),P.remainingTTL=P.now+P.ttl-P.start)};let w=0;const S=()=>{const P=e.now();if(this.ttlResolution>0){w=P;const B=setTimeout(()=>w=0,this.ttlResolution);B.unref&&B.unref()}return P};this.getRemainingTTL=P=>{const B=this.keyMap.get(P);return B===void 0?0:this.ttls[B]===0||this.starts[B]===0?1/0:this.starts[B]+this.ttls[B]-(w||S())},this.isStale=P=>this.ttls[P]!==0&&this.starts[P]!==0&&(w||S())-this.starts[P]>this.ttls[P]}updateItemAge(w){}statusTTL(w,S){}setItemTTL(w,S,P){}isStale(w){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new j(this.max),this.removeItemSize=w=>{this.calculatedSize-=this.sizes[w],this.sizes[w]=0},this.requireSize=(w,S,P,B)=>{if(this.isBackgroundFetch(S))return 0;if(!v(P))if(B){if(typeof B!="function")throw new TypeError("sizeCalculation must be a function");if(P=B(S,w),!v(P))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return P},this.addItemSize=(w,S,P)=>{if(this.sizes[w]=S,this.maxSize){const B=this.maxSize-this.sizes[w];for(;this.calculatedSize>B;)this.evict(!0)}this.calculatedSize+=this.sizes[w],P&&(P.entrySize=S,P.totalCalculatedSize=this.calculatedSize)}}removeItemSize(w){}addItemSize(w,S){}requireSize(w,S,P,B){if(P||B)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:w=this.allowStale}={}){if(this.size)for(let S=this.tail;!(!this.isValidIndex(S)||((w||!this.isStale(S))&&(yield S),S===this.head));)S=this.prev[S]}*rindexes({allowStale:w=this.allowStale}={}){if(this.size)for(let S=this.head;!(!this.isValidIndex(S)||((w||!this.isStale(S))&&(yield S),S===this.tail));)S=this.next[S]}isValidIndex(w){return w!==void 0&&this.keyMap.get(this.keyList[w])===w}*entries(){for(const w of this.indexes())this.valList[w]!==void 0&&this.keyList[w]!==void 0&&!this.isBackgroundFetch(this.valList[w])&&(yield[this.keyList[w],this.valList[w]])}*rentries(){for(const w of this.rindexes())this.valList[w]!==void 0&&this.keyList[w]!==void 0&&!this.isBackgroundFetch(this.valList[w])&&(yield[this.keyList[w],this.valList[w]])}*keys(){for(const w of this.indexes())this.keyList[w]!==void 0&&!this.isBackgroundFetch(this.valList[w])&&(yield this.keyList[w])}*rkeys(){for(const w of this.rindexes())this.keyList[w]!==void 0&&!this.isBackgroundFetch(this.valList[w])&&(yield this.keyList[w])}*values(){for(const w of this.indexes())this.valList[w]!==void 0&&!this.isBackgroundFetch(this.valList[w])&&(yield this.valList[w])}*rvalues(){for(const w of this.rindexes())this.valList[w]!==void 0&&!this.isBackgroundFetch(this.valList[w])&&(yield this.valList[w])}[Symbol.iterator](){return this.entries()}find(w,S){for(const P of this.indexes()){const B=this.valList[P],H=this.isBackgroundFetch(B)?B.__staleWhileFetching:B;if(H!==void 0&&w(H,this.keyList[P],this))return this.get(this.keyList[P],S)}}forEach(w,S=this){for(const P of this.indexes()){const B=this.valList[P],H=this.isBackgroundFetch(B)?B.__staleWhileFetching:B;H!==void 0&&w.call(S,H,this.keyList[P],this)}}rforEach(w,S=this){for(const P of this.rindexes()){const B=this.valList[P],H=this.isBackgroundFetch(B)?B.__staleWhileFetching:B;H!==void 0&&w.call(S,H,this.keyList[P],this)}}get prune(){return h("prune","purgeStale"),this.purgeStale}purgeStale(){let w=!1;for(const S of this.rindexes({allowStale:!0}))this.isStale(S)&&(this.delete(this.keyList[S]),w=!0);return w}dump(){const w=[];for(const S of this.indexes({allowStale:!0})){const P=this.keyList[S],B=this.valList[S],H=this.isBackgroundFetch(B)?B.__staleWhileFetching:B;if(H===void 0)continue;const q={value:H};if(this.ttls){q.ttl=this.ttls[S];const V=e.now()-this.starts[S];q.start=Math.floor(Date.now()-V)}this.sizes&&(q.size=this.sizes[S]),w.unshift([P,q])}return w}load(w){this.clear();for(const[S,P]of w){if(P.start){const B=Date.now()-P.start;P.start=e.now()-B}this.set(S,P.value,P)}}dispose(w,S,P){}set(w,S,{ttl:P=this.ttl,start:B,noDisposeOnSet:H=this.noDisposeOnSet,size:q=0,sizeCalculation:V=this.sizeCalculation,noUpdateTTL:$=this.noUpdateTTL,status:ee}={}){if(q=this.requireSize(w,S,q,V),this.maxEntrySize&&q>this.maxEntrySize)return ee&&(ee.set="miss",ee.maxEntrySizeExceeded=!0),this.delete(w),this;let D=this.size===0?void 0:this.keyMap.get(w);if(D===void 0)D=this.newIndex(),this.keyList[D]=w,this.valList[D]=S,this.keyMap.set(w,D),this.next[this.tail]=D,this.prev[D]=this.tail,this.tail=D,this.size++,this.addItemSize(D,q,ee),ee&&(ee.set="add"),$=!1;else{this.moveToTail(D);const F=this.valList[D];if(S!==F){if(this.isBackgroundFetch(F)?F.__abortController.abort(new Error("replaced")):H||(this.dispose(F,w,"set"),this.disposeAfter&&this.disposed.push([F,w,"set"])),this.removeItemSize(D),this.valList[D]=S,this.addItemSize(D,q,ee),ee){ee.set="replace";const Q=F&&this.isBackgroundFetch(F)?F.__staleWhileFetching:F;Q!==void 0&&(ee.oldValue=Q)}}else ee&&(ee.set="update")}if(P!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),$||this.setItemTTL(D,P,B),this.statusTTL(ee,D),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const w=this.valList[this.head];return this.evict(!0),w}}evict(w){const S=this.head,P=this.keyList[S],B=this.valList[S];return this.isBackgroundFetch(B)?B.__abortController.abort(new Error("evicted")):(this.dispose(B,P,"evict"),this.disposeAfter&&this.disposed.push([B,P,"evict"])),this.removeItemSize(S),w&&(this.keyList[S]=null,this.valList[S]=null,this.free.push(S)),this.head=this.next[S],this.keyMap.delete(P),this.size--,S}has(w,{updateAgeOnHas:S=this.updateAgeOnHas,status:P}={}){const B=this.keyMap.get(w);if(B!==void 0)if(this.isStale(B))P&&(P.has="stale",this.statusTTL(P,B));else return S&&this.updateItemAge(B),P&&(P.has="hit"),this.statusTTL(P,B),!0;else P&&(P.has="miss");return!1}peek(w,{allowStale:S=this.allowStale}={}){const P=this.keyMap.get(w);if(P!==void 0&&(S||!this.isStale(P))){const B=this.valList[P];return this.isBackgroundFetch(B)?B.__staleWhileFetching:B}}backgroundFetch(w,S,P,B){const H=S===void 0?void 0:this.valList[S];if(this.isBackgroundFetch(H))return H;const q=new o;P.signal&&P.signal.addEventListener("abort",()=>q.abort(P.signal.reason));const V={signal:q.signal,options:P,context:B},$=(X,W=!1)=>{const{aborted:le}=q.signal,ue=P.ignoreFetchAbort&&X!==void 0;return P.status&&(le&&!W?(P.status.fetchAborted=!0,P.status.fetchError=q.signal.reason,ue&&(P.status.fetchAbortIgnored=!0)):P.status.fetchResolved=!0),le&&!ue&&!W?D(q.signal.reason):(this.valList[S]===Q&&(X===void 0?Q.__staleWhileFetching?this.valList[S]=Q.__staleWhileFetching:this.delete(w):(P.status&&(P.status.fetchUpdated=!0),this.set(w,X,V.options))),X)},ee=X=>(P.status&&(P.status.fetchRejected=!0,P.status.fetchError=X),D(X)),D=X=>{const{aborted:W}=q.signal,le=W&&P.allowStaleOnFetchAbort,ue=le||P.allowStaleOnFetchRejection,de=ue||P.noDeleteOnFetchRejection;if(this.valList[S]===Q&&(!de||Q.__staleWhileFetching===void 0?this.delete(w):le||(this.valList[S]=Q.__staleWhileFetching)),ue)return P.status&&Q.__staleWhileFetching!==void 0&&(P.status.returnedStale=!0),Q.__staleWhileFetching;if(Q.__returned===Q)throw X},F=(X,W)=>{this.fetchMethod(w,H,V).then(le=>X(le),W),q.signal.addEventListener("abort",()=>{(!P.ignoreFetchAbort||P.allowStaleOnFetchAbort)&&(X(),P.allowStaleOnFetchAbort&&(X=le=>$(le,!0)))})};P.status&&(P.status.fetchDispatched=!0);const Q=new Promise(F).then($,ee);return Q.__abortController=q,Q.__staleWhileFetching=H,Q.__returned=null,S===void 0?(this.set(w,Q,{...V.options,status:void 0}),S=this.keyMap.get(w)):this.valList[S]=Q,Q}isBackgroundFetch(w){return w&&typeof w=="object"&&typeof w.then=="function"&&Object.prototype.hasOwnProperty.call(w,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(w,"__returned")&&(w.__returned===w||w.__returned===null)}async fetch(w,{allowStale:S=this.allowStale,updateAgeOnGet:P=this.updateAgeOnGet,noDeleteOnStaleGet:B=this.noDeleteOnStaleGet,ttl:H=this.ttl,noDisposeOnSet:q=this.noDisposeOnSet,size:V=0,sizeCalculation:$=this.sizeCalculation,noUpdateTTL:ee=this.noUpdateTTL,noDeleteOnFetchRejection:D=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:F=this.allowStaleOnFetchRejection,ignoreFetchAbort:Q=this.ignoreFetchAbort,allowStaleOnFetchAbort:X=this.allowStaleOnFetchAbort,fetchContext:W=this.fetchContext,forceRefresh:le=!1,status:ue,signal:de}={}){if(!this.fetchMethod)return ue&&(ue.fetch="get"),this.get(w,{allowStale:S,updateAgeOnGet:P,noDeleteOnStaleGet:B,status:ue});const ce={allowStale:S,updateAgeOnGet:P,noDeleteOnStaleGet:B,ttl:H,noDisposeOnSet:q,size:V,sizeCalculation:$,noUpdateTTL:ee,noDeleteOnFetchRejection:D,allowStaleOnFetchRejection:F,allowStaleOnFetchAbort:X,ignoreFetchAbort:Q,status:ue,signal:de};let ge=this.keyMap.get(w);if(ge===void 0){ue&&(ue.fetch="miss");const Oe=this.backgroundFetch(w,ge,ce,W);return Oe.__returned=Oe}else{const Oe=this.valList[ge];if(this.isBackgroundFetch(Oe)){const Ae=S&&Oe.__staleWhileFetching!==void 0;return ue&&(ue.fetch="inflight",Ae&&(ue.returnedStale=!0)),Ae?Oe.__staleWhileFetching:Oe.__returned=Oe}const je=this.isStale(ge);if(!le&&!je)return ue&&(ue.fetch="hit"),this.moveToTail(ge),P&&this.updateItemAge(ge),this.statusTTL(ue,ge),Oe;const Ie=this.backgroundFetch(w,ge,ce,W),Se=Ie.__staleWhileFetching!==void 0,he=Se&&S;return ue&&(ue.fetch=Se&&je?"stale":"refresh",he&&je&&(ue.returnedStale=!0)),he?Ie.__staleWhileFetching:Ie.__returned=Ie}}get(w,{allowStale:S=this.allowStale,updateAgeOnGet:P=this.updateAgeOnGet,noDeleteOnStaleGet:B=this.noDeleteOnStaleGet,status:H}={}){const q=this.keyMap.get(w);if(q!==void 0){const V=this.valList[q],$=this.isBackgroundFetch(V);return this.statusTTL(H,q),this.isStale(q)?(H&&(H.get="stale"),$?(H&&(H.returnedStale=S&&V.__staleWhileFetching!==void 0),S?V.__staleWhileFetching:void 0):(B||this.delete(w),H&&(H.returnedStale=S),S?V:void 0)):(H&&(H.get="hit"),$?V.__staleWhileFetching:(this.moveToTail(q),P&&this.updateItemAge(q),V))}else H&&(H.get="miss")}connect(w,S){this.prev[S]=w,this.next[w]=S}moveToTail(w){w!==this.tail&&(w===this.head?this.head=this.next[w]:this.connect(this.prev[w],this.next[w]),this.connect(this.tail,w),this.tail=w)}get del(){return h("del","delete"),this.delete}delete(w){let S=!1;if(this.size!==0){const P=this.keyMap.get(w);if(P!==void 0)if(S=!0,this.size===1)this.clear();else{this.removeItemSize(P);const B=this.valList[P];this.isBackgroundFetch(B)?B.__abortController.abort(new Error("deleted")):(this.dispose(B,w,"delete"),this.disposeAfter&&this.disposed.push([B,w,"delete"])),this.keyMap.delete(w),this.keyList[P]=null,this.valList[P]=null,P===this.tail?this.tail=this.prev[P]:P===this.head?this.head=this.next[P]:(this.next[this.prev[P]]=this.next[P],this.prev[this.next[P]]=this.prev[P]),this.size--,this.free.push(P)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return S}clear(){for(const w of this.rindexes({allowStale:!0})){const S=this.valList[w];if(this.isBackgroundFetch(S))S.__abortController.abort(new Error("deleted"));else{const P=this.keyList[w];this.dispose(S,P,"delete"),this.disposeAfter&&this.disposed.push([S,P,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return h("reset","clear"),this.clear}get length(){return y("length","size"),this.size}static get AbortController(){return o}static get AbortSignal(){return u}}n.exports=x}},__quadstore_comunica_module_cache__={};function __quadstore_comunica_require__(n){var e=__quadstore_comunica_module_cache__[n];if(e!==void 0)return e.exports;var t=__quadstore_comunica_module_cache__[n]={exports:{}};return __quadstore_comunica_modules__[n].call(t.exports,t,t.exports,__quadstore_comunica_require__),t.exports}__quadstore_comunica_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var __quadstore_comunica_exports__=__quadstore_comunica_require__("./src/index.js"),__quadstore_comunica_exports__Engine=__quadstore_comunica_exports__.D;__quadstore_comunica_exports__.H;const proxyMarker=Symbol("Comlink.proxy"),createEndpoint=Symbol("Comlink.endpoint"),releaseProxy=Symbol("Comlink.releaseProxy"),throwMarker=Symbol("Comlink.thrown"),isObject=n=>typeof n=="object"&&n!==null||typeof n=="function",proxyTransferHandler={canHandle:n=>isObject(n)&&n[proxyMarker],serialize(n){const{port1:e,port2:t}=new MessageChannel;return expose(n,e),[t,[t]]},deserialize(n){return n.start(),wrap(n)}},throwTransferHandler={canHandle:n=>isObject(n)&&throwMarker in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},transferHandlers=new Map([["proxy",proxyTransferHandler],["throw",throwTransferHandler]]);function expose(n,e=self){e.addEventListener("message",function t(o){if(!o||!o.data)return;const{id:l,type:d,path:u}=Object.assign({path:[]},o.data),a=(o.data.argumentList||[]).map(fromWireValue);let c;try{const h=u.slice(0,-1).reduce((b,m)=>b[m],n),y=u.reduce((b,m)=>b[m],n);switch(d){case"GET":c=y;break;case"SET":h[u.slice(-1)[0]]=fromWireValue(o.data.value),c=!0;break;case"APPLY":c=y.apply(h,a);break;case"CONSTRUCT":{const b=new y(...a);c=proxy(b)}break;case"ENDPOINT":{const{port1:b,port2:m}=new MessageChannel;expose(n,m),c=transfer(b,[b])}break;case"RELEASE":c=void 0;break;default:return}}catch(h){c={value:h,[throwMarker]:0}}Promise.resolve(c).catch(h=>({value:h,[throwMarker]:0})).then(h=>{const[y,b]=toWireValue(h);e.postMessage(Object.assign(Object.assign({},y),{id:l}),b),d==="RELEASE"&&(e.removeEventListener("message",t),closeEndPoint(e))})}),e.start&&e.start()}function isMessagePort(n){return n.constructor.name==="MessagePort"}function closeEndPoint(n){isMessagePort(n)&&n.close()}function wrap(n,e){return createProxy(n,[],e)}function throwIfProxyReleased(n){if(n)throw new Error("Proxy has been released and is not useable")}function createProxy(n,e=[],t=function(){}){let o=!1;const l=new Proxy(t,{get(d,u){if(throwIfProxyReleased(o),u===releaseProxy)return()=>requestResponseMessage(n,{type:"RELEASE",path:e.map(a=>a.toString())}).then(()=>{closeEndPoint(n),o=!0});if(u==="then"){if(e.length===0)return{then:()=>l};const a=requestResponseMessage(n,{type:"GET",path:e.map(c=>c.toString())}).then(fromWireValue);return a.then.bind(a)}return createProxy(n,[...e,u])},set(d,u,a){throwIfProxyReleased(o);const[c,h]=toWireValue(a);return requestResponseMessage(n,{type:"SET",path:[...e,u].map(y=>y.toString()),value:c},h).then(fromWireValue)},apply(d,u,a){throwIfProxyReleased(o);const c=e[e.length-1];if(c===createEndpoint)return requestResponseMessage(n,{type:"ENDPOINT"}).then(fromWireValue);if(c==="bind")return createProxy(n,e.slice(0,-1));const[h,y]=processArguments(a);return requestResponseMessage(n,{type:"APPLY",path:e.map(b=>b.toString()),argumentList:h},y).then(fromWireValue)},construct(d,u){throwIfProxyReleased(o);const[a,c]=processArguments(u);return requestResponseMessage(n,{type:"CONSTRUCT",path:e.map(h=>h.toString()),argumentList:a},c).then(fromWireValue)}});return l}function myFlat(n){return Array.prototype.concat.apply([],n)}function processArguments(n){const e=n.map(toWireValue);return[e.map(t=>t[0]),myFlat(e.map(t=>t[1]))]}const transferCache=new WeakMap;function transfer(n,e){return transferCache.set(n,e),n}function proxy(n){return Object.assign(n,{[proxyMarker]:!0})}function toWireValue(n){for(const[e,t]of transferHandlers)if(t.canHandle(n)){const[o,l]=t.serialize(n);return[{type:"HANDLER",name:e,value:o},l]}return[{type:"RAW",value:n},transferCache.get(n)||[]]}function fromWireValue(n){switch(n.type){case"HANDLER":return transferHandlers.get(n.name).deserialize(n.value);case"RAW":return n.value}}function requestResponseMessage(n,e,t){return new Promise(o=>{const l=generateUUID();n.addEventListener("message",function d(u){!u.data||!u.data.id||u.data.id!==l||(n.removeEventListener("message",d),o(u.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:l},e),t)})}function generateUUID(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const DEPENDS_ON="http://dat-ecosystem.org#dependson",OWNS="http://dat-ecosystem.org#owns";function fromPairs(n){for(var e=-1,t=n==null?0:n.length,o={};++e<t;){var l=n[e];o[l[0]]=l[1]}return o}const backend=new MemoryLevel_1,df=new rdfDataFactory.DataFactory,store=new Quadstore({backend,dataFactory:df}),engine=new __quadstore_comunica_exports__Engine(store);async function buildGraph(n){const{valueNetworkData:e,projectsData:t,organizationsData:o}=n,l=Object.entries(e).flatMap(([c,{dependents:h,dependencies:y,owner:b}])=>[b&&c&&df.quad(df.namedNode(b),df.literal(OWNS),df.namedNode(c),df.defaultGraph()),...(h||[]).filter(m=>m).map(m=>df.quad(df.namedNode(m),df.namedNode(DEPENDS_ON),df.namedNode(c),df.defaultGraph())),...(y||[]).filter(m=>m).map(m=>df.quad(df.namedNode(c),df.namedNode(DEPENDS_ON),df.namedNode(m),df.defaultGraph()))]).filter(c=>c),d=[...Object.entries(o).flatMap(([c,h])=>Object.entries(h).flatMap(([y,b])=>b&&df.quad(df.namedNode(c),df.namedNode(y),df.literal(b))).filter(y=>y))],u=[...Object.entries(t).flatMap(([c,h])=>Object.entries(h).flatMap(([y,b])=>b&&df.quad(df.namedNode(c),df.namedNode(y),df.literal(b))).filter(y=>y))],a=[...l,...d,...u];await store.open(),await store.multiPut(a),console.log("inserted",a.length,"entries")}const getProps=n=>(e=>fromPairs([e].flat().map(t=>[t,n.get(t)]))).bind(n),doQuery=async(n,e,t,o)=>{await engine.queryBindings(n).then(l=>{e&&l.on("data",d=>e(d,proxy(getProps(d)))),t&&l.on("end",d=>t(d,d&&proxy(d.get.bind(d)))),o&&l.on("error",d=>o(d,d&&proxy(d.get.bind(d))))})};expose({buildGraph,doQuery});
