import{m as T,u as L,M as Xe,V as Ve,p as Qt,g as Qr,i as Ua,d as Ba,w as Ns,a as Ga,l as Ka,c as Xa,s as J,b as X,e as Ne,f as Za,h as Ya,j as Jt,k as Ts,n as Ms,o as ge,q as gt,r as Qa,t as O,v as H,x as Ja,y as M,z as Ht,A as en,B as tn,C as el,D as zr,E as vi,T as tl,F as nl,G as Os,H as nn,I as rl,J as ks,K as yi,L as il,N as Z,O as dt,P as bi,Q as wi,R as xi,S as ol,U as ln,W as Le,X as sl,Y as al,Z as zs,_ as ll,$ as ul,a0 as cl,a1 as fl,a2 as Rs,a3 as Mt,a4 as dl,a5 as hl,a6 as js,a7 as pl,a8 as gl,a9 as un,aa as rn,ab as ml,ac as vl,ad as yl,ae as bl,af as wl,ag as xl,ah as Si,ai as Ze,aj as $n,ak as $i,al as Ot,am as Sl,an as _i,ao as _n,ap as $l,aq as _l}from"./worker-9ad80e94.js";const cn=T.infinite(t=>({globalProjection:L(new Xe),globalView:L(new Xe),zoomedProjection:L(new Xe),zoomedView:L(new Xe),fixedProjection:L(new Xe),fixedView:L(new Xe),distance:L(0),center:L(new Ve(0,0,0)),rotationCenter:L(new Ve(0,0,0))})),Pl=t=>T(Qt((e,n,r,i,o,a,s)=>{const l=cn(t);l.globalProjection.value.fromArray(e),l.globalView.value.fromArray(n),l.zoomedProjection.value.fromArray(r),l.zoomedView.value.fromArray(i),l.fixedProjection.value.fromArray(o),l.fixedView.value.fromArray(a),l.distance.value=s[0],l.center.value.fromArray(s.slice(1,4)),l.rotationCenter.value.fromArray(s.slice(4,7))}));var _t={};function El(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var e=t.which;if(e===2)return 4;if(e===3)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e=t.button;if(e===1)return 4;if(e===2)return 2;if(e>=0)return 1<<e}}return 0}_t.buttons=El;function Jr(t){return t.target||t.srcElement||window}_t.element=Jr;function Al(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var e=Jr(t),n=e.getBoundingClientRect();return t.clientX-n.left}return 0}_t.x=Al;function Cl(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var e=Jr(t),n=e.getBoundingClientRect();return t.clientY-n.top}return 0}_t.y=Cl;var Il=Nl,lt=_t;function Nl(t,e){e||(e=t,t=window);var n=0,r=0,i=0,o={shift:!1,alt:!1,control:!1,meta:!1},a=!1;function s(h){var g=!1;return"altKey"in h&&(g=g||h.altKey!==o.alt,o.alt=!!h.altKey),"shiftKey"in h&&(g=g||h.shiftKey!==o.shift,o.shift=!!h.shiftKey),"ctrlKey"in h&&(g=g||h.ctrlKey!==o.control,o.control=!!h.ctrlKey),"metaKey"in h&&(g=g||h.metaKey!==o.meta,o.meta=!!h.metaKey),g}function l(h,g){var y=lt.x(g),S=lt.y(g);"buttons"in g&&(h=g.buttons|0),(h!==n||y!==r||S!==i||s(g))&&(n=h|0,r=y||0,i=S||0,e&&e(n,r,i,o))}function u(h){l(0,h)}function c(){(n||r||i||o.shift||o.alt||o.meta||o.control)&&(r=i=0,n=0,o.shift=o.alt=o.control=o.meta=!1,e&&e(0,0,0,o))}function f(h){s(h)&&e&&e(n,r,i,o)}function p(h){lt.buttons(h)===0?l(0,h):l(n,h)}function d(h){l(n|lt.buttons(h),h)}function w(h){l(n&~lt.buttons(h),h)}function m(){a||(a=!0,t.addEventListener("mousemove",p),t.addEventListener("mousedown",d),t.addEventListener("mouseup",w),t.addEventListener("mouseleave",u),t.addEventListener("mouseenter",u),t.addEventListener("mouseout",u),t.addEventListener("mouseover",u),t.addEventListener("blur",c),t.addEventListener("keyup",f),t.addEventListener("keydown",f),t.addEventListener("keypress",f),t!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",f),window.addEventListener("keydown",f),window.addEventListener("keypress",f)))}function b(){a&&(a=!1,t.removeEventListener("mousemove",p),t.removeEventListener("mousedown",d),t.removeEventListener("mouseup",w),t.removeEventListener("mouseleave",u),t.removeEventListener("mouseenter",u),t.removeEventListener("mouseout",u),t.removeEventListener("mouseover",u),t.removeEventListener("blur",c),t.removeEventListener("keyup",f),t.removeEventListener("keydown",f),t.removeEventListener("keypress",f),t!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",f),window.removeEventListener("keydown",f),window.removeEventListener("keypress",f)))}m();var v={element:t};return Object.defineProperties(v,{enabled:{get:function(){return a},set:function(h){h?m():b()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return r},enumerable:!0},y:{get:function(){return i},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),v}var Tl={left:0,top:0},Ml=Ol;function Ol(t,e,n){e=e||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var r=t.clientX||0,i=t.clientY||0,o=kl(e);return n[0]=r-o.left,n[1]=i-o.top,n}function kl(t){return t===window||t===document||t===document.body?Tl:t.getBoundingClientRect()}var Rr={exports:{}},Vs={exports:{}},zl=void 0,Ls=function(t){return t!==zl&&t!==null},Rl=Ls,jl={object:!0,function:!0,undefined:!0},Vl=function(t){return Rl(t)?hasOwnProperty.call(jl,typeof t):!1},Ll=Vl,ql=function(t){if(!Ll(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},Fl=ql,Dl=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!Fl(t)},Wl=Dl,Hl=/^\s*class[\s{/}]/,Ul=Function.prototype.toString,Bl=function(t){return!(!Wl(t)||Hl.test(Ul.call(t)))},Gl=function(){var t=Object.assign,e;return typeof t!="function"?!1:(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},Pn,Pi;function Kl(){return Pi||(Pi=1,Pn=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Pn}var Xl=function(){},Zl=Xl(),Fe=function(t){return t!==Zl&&t!==null},En,Ei;function Yl(){if(Ei)return En;Ei=1;var t=Fe,e=Object.keys;return En=function(n){return e(t(n)?Object(n):n)},En}var An,Ai;function Ql(){return Ai||(Ai=1,An=Kl()()?Object.keys:Yl()),An}var Jl=Fe,at=function(t){if(!Jl(t))throw new TypeError("Cannot use null or undefined");return t},Cn,Ci;function eu(){if(Ci)return Cn;Ci=1;var t=Ql(),e=at,n=Math.max;return Cn=function(r,i){var o,a,s=n(arguments.length,2),l;for(r=Object(e(r)),l=function(u){try{r[u]=i[u]}catch(c){o||(o=c)}},a=1;a<s;++a)i=arguments[a],t(i).forEach(l);if(o!==void 0)throw o;return r},Cn}var qs=Gl()?Object.assign:eu(),tu=Fe,nu=Array.prototype.forEach,ru=Object.create,iu=function(t,e){var n;for(n in t)e[n]=t[n]},Fs=function(t){var e=ru(null);return nu.call(arguments,function(n){tu(n)&&iu(Object(n),e)}),e},In="razdwatrzy",ou=function(){return typeof In.contains!="function"?!1:In.contains("dwa")===!0&&In.contains("foo")===!1},Nn,Ii;function su(){if(Ii)return Nn;Ii=1;var t=String.prototype.indexOf;return Nn=function(e){return t.call(this,e,arguments[1])>-1},Nn}var au=ou()?String.prototype.contains:su(),Ut=Ls,Ni=Bl,Ds=qs,Ws=Fs,mt=au,lu=Vs.exports=function(t,e){var n,r,i,o,a;return arguments.length<2||typeof t!="string"?(o=e,e=t,t=null):o=arguments[2],Ut(t)?(n=mt.call(t,"c"),r=mt.call(t,"e"),i=mt.call(t,"w")):(n=i=!0,r=!1),a={value:e,configurable:n,enumerable:r,writable:i},o?Ds(Ws(o),a):a};lu.gs=function(t,e,n){var r,i,o,a;return typeof t!="string"?(o=n,n=e,e=t,t=null):o=arguments[3],Ut(e)?Ni(e)?Ut(n)?Ni(n)||(o=n,n=void 0):n=void 0:(o=e,e=n=void 0):e=void 0,Ut(t)?(r=mt.call(t,"c"),i=mt.call(t,"e")):(r=!0,i=!1),a={get:e,set:n,configurable:r,enumerable:i},o?Ds(Ws(o),a):a};var De=Vs.exports,Te=function(t){if(typeof t!="function")throw new TypeError(t+" is not a function");return t};(function(t,e){var n=De,r=Te,i=Function.prototype.apply,o=Function.prototype.call,a=Object.create,s=Object.defineProperty,l=Object.defineProperties,u=Object.prototype.hasOwnProperty,c={configurable:!0,enumerable:!1,writable:!0},f,p,d,w,m,b,v;f=function(h,g){var y;return r(g),u.call(this,"__ee__")?y=this.__ee__:(y=c.value=a(null),s(this,"__ee__",c),c.value=null),y[h]?typeof y[h]=="object"?y[h].push(g):y[h]=[y[h],g]:y[h]=g,this},p=function(h,g){var y,S;return r(g),S=this,f.call(this,h,y=function(){d.call(S,h,y),i.call(g,this,arguments)}),y.__eeOnceListener__=g,this},d=function(h,g){var y,S,x,E;if(r(g),!u.call(this,"__ee__"))return this;if(y=this.__ee__,!y[h])return this;if(S=y[h],typeof S=="object")for(E=0;x=S[E];++E)(x===g||x.__eeOnceListener__===g)&&(S.length===2?y[h]=S[E?0:1]:S.splice(E,1));else(S===g||S.__eeOnceListener__===g)&&delete y[h];return this},w=function(h){var g,y,S,x,E;if(u.call(this,"__ee__")&&(x=this.__ee__[h],!!x))if(typeof x=="object"){for(y=arguments.length,E=new Array(y-1),g=1;g<y;++g)E[g-1]=arguments[g];for(x=x.slice(),g=0;S=x[g];++g)i.call(S,this,E)}else switch(arguments.length){case 1:o.call(x,this);break;case 2:o.call(x,this,arguments[1]);break;case 3:o.call(x,this,arguments[1],arguments[2]);break;default:for(y=arguments.length,E=new Array(y-1),g=1;g<y;++g)E[g-1]=arguments[g];i.call(x,this,E)}},m={on:f,once:p,off:d,emit:w},b={on:n(f),once:n(p),off:n(d),emit:n(w)},v=l({},b),t.exports=e=function(h){return h==null?a(v):l(Object(h),b)},e.methods=m})(Rr,Rr.exports);var Hs=Rr.exports,uu=du,cu=Il,Ye=Ml,fu=Hs;function du(t){t=t||window;var e=fu(),n=[null,null],r=[null,null],i=[null,null],o=[null,null],a=0,s={},l,u,c=t===window?function(){l=window.innerWidth,u=window.innerHeight}:function(){l=t.clientWidth,u=t.clientHeight},f=0,p,d,w={},m=cu(t,function(C,A,I,k){p=A,d=I,f=C,w=k});function b(C){Ye(C,t,i),c(),s.buttons=f,s.mods=w,s.x0=s.x=s.x1=2*i[0]/l-1,s.y0=s.y=s.y1=1-2*i[1]/u,s.x2=null,s.y2=null,s.dx=2*C.deltaX/l,s.dy=-2*C.deltaY/u,s.dz=2*C.deltaZ/l,s.active=1,s.zoomx=1,s.zoomy=1,s.theta=0,s.dtheta=0,s.originalEvent=C,e.emit("wheel",s),n[0]=i[0],n[1]=i[1]}var v=null,h=null,g=0;function y(C){Ye(C,t,i),g=0,c(),s.buttons=f,s.mods=w,s.x=s.x1=2*i[0]/l-1,s.y=s.y1=1-2*i[1]/u,s.x2=null,s.y2=null,s.active=g,s.x0=2*v/l-1,s.y0=1-2*h/u,s.dx=0,s.dy=0,s.dz=0,s.zoomx=1,s.zoomy=1,s.theta=0,s.dtheta=0,s.originalEvent=C,e.emit("mouseup",s),v=h=null,n[0]=i[0],n[1]=i[1]}function S(C){Ye(C,t,i),g=1,c(),v=p,h=d,s.buttons=f,s.mods=w,s.x=s.x0=s.x1=2*i[0]/l-1,s.y=s.y0=s.y1=1-2*i[1]/u,s.x2=null,s.y2=null,s.active=g,s.dx=0,s.dy=0,s.dz=0,s.zoomx=1,s.zoomy=1,s.theta=0,s.dtheta=0,s.originalEvent=C,e.emit("mousedown",s),n[0]=i[0],n[1]=i[1]}function x(C){Ye(C,t,i),c(),s.buttons=f,s.mods=w,s.x0=2*v/l-1,s.y0=1-2*h/u,s.x=s.x1=2*i[0]/l-1,s.y=s.y1=1-2*i[1]/u,s.x2=null,s.y2=null,s.dx=2*(i[0]-n[0])/l,s.dy=-2*(i[1]-n[1])/u,s.active=g,s.dz=0,s.zoomx=1,s.zoomy=1,s.theta=0,s.dtheta=0,s.originalEvent=C,e.emit("mousemove",s),n[0]=i[0],n[1]=i[1]}function E(C){for(var A=C.identifier,I=0;I<o.length;I++)if(o[I]&&o[I].touch&&o[I].touch.identifier===A)return I;return-1}function N(C){r[0]=null,r[1]=null;for(var A=0;A<C.changedTouches.length;A++){var I=C.changedTouches[A],k=I.identifier,B=E(k);if(B===-1&&a<2){var ye=o[0]?1:0,q=o[0]?0:1,V={position:[0,0],touch:null};o[ye]=V,a++,V.touch=I,Ye(I,t,V.position),o[q]&&o[q].touch}}for(var D=0,W=0,G=0,A=0;A<o.length;A++)o[A]&&(D+=o[A].position[0],W+=o[A].position[1],G++);if(D/=G,W/=G,a>0){if(s.theta=0,G>1){var Se=o[1].position[0]-o[0].position[0],be=(o[0].position[1]-o[1].position[1])*l/u;s.theta=Math.atan2(be,Se)}c(),s.buttons=0,s.mods={},s.active=a,v=D,h=W,s.x0=2*v/l-1,s.y0=1-2*h/u,s.x=2*D/l-1,s.y=1-2*W/u,s.x1=2*o[0].position[0]/l-1,s.y1=1-2*o[0].position[1]/u,a>1&&(s.x2=2*o[1].position[0]/l-1,s.y2=1-2*o[1].position[1]/u),s.active=a,s.dx=0,s.dy=0,s.dz=0,s.zoomx=1,s.zoomy=1,s.dtheta=0,s.originalEvent=C,e.emit(a===1?"touchstart":"pinchstart",s)}}function F(C){for(var A,I=!1,k=0;k<C.changedTouches.length;k++){var B=C.changedTouches[k];A=E(B),A!==-1&&(I=!0,o[A].touch=B,Ye(B,t,o[A].position))}if(I){if(a===1){for(A=0;A<o.length&&!o[A];A++);if(o[A]&&r[A]){var ye=o[A].position[0],q=o[A].position[1],V=ye-r[A][0],D=q-r[A][1];s.buttons=0,s.mods={},s.active=a,s.x=s.x1=2*ye/l-1,s.y=s.y1=1-2*q/u,s.x2=null,s.y2=null,s.x0=2*v/l-1,s.y0=1-2*h/u,s.dx=2*V/l,s.dy=-2*D/u,s.dz=0,s.zoomx=1,s.zoomy=1,s.theta=0,s.dtheta=0,s.originalEvent=C,e.emit("touchmove",s)}}else if(a===2&&r[0]&&r[1]){var W=r[0],G=r[1],Se=G[0]-W[0],be=(G[1]-W[1])*l/u,$e=o[0].position,_e=o[1].position,Ue=_e[0]-$e[0],Be=($e[1]-_e[1])*l/u,At=Math.sqrt(Se*Se+be*be)*.5,yn=Math.atan2(be,Se),Ge=Math.sqrt(Ue*Ue+Be*Be)*.5,Ct=Math.atan2(Be,Ue),bn=(G[0]+W[0])*.5,Me=(G[1]+W[1])*.5,V=.5*(_e[0]+$e[0]-W[0]-G[0]),D=.5*(_e[1]+$e[1]-W[1]-G[1]),Ke=Ge/At,wn=Ct-yn;s.buttons=0,s.mods=w,s.active=a,s.x=2*bn/l-1,s.y=1-2*Me/u,s.x0=2*v/l-1,s.y0=1-2*h/u,s.x1=2*$e[0]/l-1,s.y1=1-2*$e[1]/u,s.x2=2*_e[0]/l-1,s.y2=1-2*_e[1]/u,s.dx=2*V/l,s.dy=-2*D/u,s.dz=0,s.zoomx=Ke,s.zoomy=Ke,s.theta=Ct,s.dtheta=wn,s.originalEvent=C,e.emit("pinchmove",s)}}o[0]&&(r[0]=o[0].position.slice()),o[1]&&(r[1]=o[1].position.slice())}function te(C){for(var A,I=0;I<C.changedTouches.length;I++){var k=C.changedTouches[I],B=E(k);if(B!==-1){A=o[B],o[B]=null,a--;var ye=B===0?1:0;o[ye]&&o[ye].touch}}var q=0,V=0;if(a===0)A&&(q=A.position[0],V=A.position[1]);else{for(var D=0,I=0;I<o.length;I++)o[I]&&(q+=o[I].position[0],V+=o[I].position[1],D++);q/=D,V/=D}a<2&&(s.buttons=0,s.mods=w,s.active=a,s.x=2*q/l-1,s.y=1-2*V/u,s.x0=2*v/l-1,s.y0=1-2*h/u,s.dx=0,s.dy=0,s.dz=0,s.zoomx=1,s.zoomy=1,s.theta=0,s.dtheta=0,s.originalEvent=C,e.emit(a===0?"touchend":"pinchend",s)),a===0&&(v=h=null)}var oe=!1;function ve(){oe||(oe=!0,m.enabled=!0,t.addEventListener("wheel",b,!1),t.addEventListener("mousedown",S,!1),window.addEventListener("mousemove",x,!1),window.addEventListener("mouseup",y,!1),t.addEventListener("touchstart",N,!1),window.addEventListener("touchmove",F,!1),window.addEventListener("touchend",te,!1),window.addEventListener("touchcancel",te,!1))}function ne(){oe&&(oe=!1,m.enabled=!1,t.removeEventListener("wheel",b,!1),t.removeEventListener("mousedown",S,!1),window.removeEventListener("mousemove",x,!1),window.removeEventListener("mouseup",y,!1),t.removeEventListener("touchstart",N,!1),window.removeEventListener("touchmove",F,!1),window.removeEventListener("touchend",te,!1),window.removeEventListener("touchcancel",te,!1))}return ve(),e.enable=ve,e.disable=ne,e}const Bt=Qr(uu);function Us(){return new Worker(new URL("worker-794281d5.js",import.meta.url).href,{type:"module"})}var hu="Expected a function";function jr(t,e,n){var r=!0,i=!0;if(typeof t!="function")throw new TypeError(hu);return Ua(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ba(t,e,{leading:r,maxWait:e,trailing:i})}var Ti=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},pu=function(){function t(e,n,r){this.name=e,this.version=n,this.os=r,this.type="browser"}return t}(),gu=function(){function t(e){this.version=e,this.type="node",this.name="node",this.os=process.platform}return t}(),mu=function(){function t(e,n,r,i){this.name=e,this.version=n,this.os=r,this.bot=i,this.type="bot-device"}return t}(),vu=function(){function t(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return t}(),yu=function(){function t(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return t}(),bu=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,wu=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Mi=3,xu=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",bu]],Oi=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Su(t){return t?ki(t):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new yu:typeof navigator<"u"?ki(navigator.userAgent):Pu()}function $u(t){return t!==""&&xu.reduce(function(e,n){var r=n[0],i=n[1];if(e)return e;var o=i.exec(t);return!!o&&[r,o]},!1)}function ki(t){var e=$u(t);if(!e)return null;var n=e[0],r=e[1];if(n==="searchbot")return new vu;var i=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);i?i.length<Mi&&(i=Ti(Ti([],i,!0),Eu(Mi-i.length),!0)):i=[];var o=i.join("."),a=_u(t),s=wu.exec(t);return s&&s[1]?new mu(n,o,a,s[1]):new pu(n,o,a)}function _u(t){for(var e=0,n=Oi.length;e<n;e++){var r=Oi[e],i=r[0],o=r[1],a=o.exec(t);if(a)return i}return null}function Pu(){var t=typeof process<"u"&&process.version;return t?new gu(process.version.slice(1)):null}function Eu(t){for(var e=[],n=0;n<t;n++)e.push("0");return e}const zi=Su(navigator.userAgent),ei=zi?.name!=="safari"&&zi?.os!=="iOS";ei?console.debug("Using workers"):console.warn("Not using workers due to an awful memory leak that makes WebKit crash if you use workers");const Vr=T.infinite(t=>ei?Ns(new Us):Ga),Au=T.infinite(t=>ei?Ns(new Us):Ka),ee=T.infinite(t=>Xa);var P=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n},$=globalThis&&globalThis.__classPrivateFieldGet||function(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)},Ee,ze,ie,Qe,ht,se,ae,le,ue,ce,fe,de,he,Re,Je,Ae,Gt,Ce;const Cu=function(t){var e=131,n=137,r=0;t+="x";var i=Math.floor(9007199254740991/n);for(let o=0;o<t.length;o++)r>i&&(r=Math.floor(r/n)),r=r*e+t.charCodeAt(o);return r},_="0123456789abcdef".split(""),Iu=[-2147483648,8388608,32768,128],re=[24,16,8,0],kt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],z=[];class Nu{constructor(e=!1,n=!1){Ee.set(this,void 0),ze.set(this,void 0),ie.set(this,void 0),Qe.set(this,void 0),ht.set(this,void 0),se.set(this,void 0),ae.set(this,void 0),le.set(this,void 0),ue.set(this,void 0),ce.set(this,void 0),fe.set(this,void 0),de.set(this,void 0),he.set(this,void 0),Re.set(this,void 0),Je.set(this,void 0),Ae.set(this,void 0),Gt.set(this,0),Ce.set(this,void 0),this.init(e,n)}init(e,n){n?(z[0]=z[16]=z[1]=z[2]=z[3]=z[4]=z[5]=z[6]=z[7]=z[8]=z[9]=z[10]=z[11]=z[12]=z[13]=z[14]=z[15]=0,P(this,ze,z)):P(this,ze,[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e?(P(this,se,3238371032),P(this,ae,914150663),P(this,le,812702999),P(this,ue,4144912697),P(this,ce,4290775857),P(this,fe,1750603025),P(this,de,1694076839),P(this,he,3204075428)):(P(this,se,1779033703),P(this,ae,3144134277),P(this,le,1013904242),P(this,ue,2773480762),P(this,ce,1359893119),P(this,fe,2600822924),P(this,de,528734635),P(this,he,1541459225)),P(this,Ee,P(this,Ce,P(this,ie,P(this,Je,0)))),P(this,Qe,P(this,Re,!1)),P(this,ht,!0),P(this,Ae,e)}update(e){if($(this,Qe))return this;let n;e instanceof ArrayBuffer?n=new Uint8Array(e):n=e;let r=0;const i=n.length,o=$(this,ze);for(;r<i;){let a;if($(this,Re)&&(P(this,Re,!1),o[0]=$(this,Ee),o[16]=o[1]=o[2]=o[3]=o[4]=o[5]=o[6]=o[7]=o[8]=o[9]=o[10]=o[11]=o[12]=o[13]=o[14]=o[15]=0),typeof n!="string")for(a=$(this,Ce);r<i&&a<64;++r)o[a>>2]|=n[r]<<re[a++&3];else for(a=$(this,Ce);r<i&&a<64;++r){let s=n.charCodeAt(r);s<128?o[a>>2]|=s<<re[a++&3]:s<2048?(o[a>>2]|=(192|s>>6)<<re[a++&3],o[a>>2]|=(128|s&63)<<re[a++&3]):s<55296||s>=57344?(o[a>>2]|=(224|s>>12)<<re[a++&3],o[a>>2]|=(128|s>>6&63)<<re[a++&3],o[a>>2]|=(128|s&63)<<re[a++&3]):(s=65536+((s&1023)<<10|n.charCodeAt(++r)&1023),o[a>>2]|=(240|s>>18)<<re[a++&3],o[a>>2]|=(128|s>>12&63)<<re[a++&3],o[a>>2]|=(128|s>>6&63)<<re[a++&3],o[a>>2]|=(128|s&63)<<re[a++&3])}P(this,Gt,a),P(this,ie,$(this,ie)+(a-$(this,Ce))),a>=64?(P(this,Ee,o[16]),P(this,Ce,a-64),this.hash(),P(this,Re,!0)):P(this,Ce,a)}return $(this,ie)>4294967295&&(P(this,Je,$(this,Je)+($(this,ie)/4294967296<<0)),P(this,ie,$(this,ie)%4294967296)),this}finalize(){if($(this,Qe))return;P(this,Qe,!0);const e=$(this,ze),n=$(this,Gt);e[16]=$(this,Ee),e[n>>2]|=Iu[n&3],P(this,Ee,e[16]),n>=56&&($(this,Re)||this.hash(),e[0]=$(this,Ee),e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=$(this,Je)<<3|$(this,ie)>>>29,e[15]=$(this,ie)<<3,this.hash()}hash(){let e=$(this,se),n=$(this,ae),r=$(this,le),i=$(this,ue),o=$(this,ce),a=$(this,fe),s=$(this,de),l=$(this,he);const u=$(this,ze);let c,f,p,d,w,m,b,v,h,g;for(let y=16;y<64;++y)d=u[y-15],c=(d>>>7|d<<25)^(d>>>18|d<<14)^d>>>3,d=u[y-2],f=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,u[y]=u[y-16]+c+u[y-7]+f<<0;g=n&r;for(let y=0;y<64;y+=4)$(this,ht)?($(this,Ae)?(b=300032,d=u[0]-1413257819,l=d-150054599<<0,i=d+24177077<<0):(b=704751109,d=u[0]-210244248,l=d-1521486534<<0,i=d+143694565<<0),P(this,ht,!1)):(c=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),f=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),b=e&n,p=b^e&r^g,m=o&a^~o&s,d=l+f+m+kt[y]+u[y],w=c+p,l=i+d<<0,i=d+w<<0),c=(i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10),f=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),v=i&e,p=v^i&n^b,m=l&o^~l&a,d=s+f+m+kt[y+1]+u[y+1],w=c+p,s=r+d<<0,r=d+w<<0,c=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),f=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),h=r&i,p=h^r&e^v,m=s&l^~s&o,d=a+f+m+kt[y+2]+u[y+2],w=c+p,a=n+d<<0,n=d+w<<0,c=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),f=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),g=n&r,p=g^n&i^h,m=a&s^~a&l,d=o+f+m+kt[y+3]+u[y+3],w=c+p,o=e+d<<0,e=d+w<<0;P(this,se,$(this,se)+e<<0),P(this,ae,$(this,ae)+n<<0),P(this,le,$(this,le)+r<<0),P(this,ue,$(this,ue)+i<<0),P(this,ce,$(this,ce)+o<<0),P(this,fe,$(this,fe)+a<<0),P(this,de,$(this,de)+s<<0),P(this,he,$(this,he)+l<<0)}hex(){this.finalize();const e=$(this,se),n=$(this,ae),r=$(this,le),i=$(this,ue),o=$(this,ce),a=$(this,fe),s=$(this,de),l=$(this,he);let u=_[e>>28&15]+_[e>>24&15]+_[e>>20&15]+_[e>>16&15]+_[e>>12&15]+_[e>>8&15]+_[e>>4&15]+_[e&15]+_[n>>28&15]+_[n>>24&15]+_[n>>20&15]+_[n>>16&15]+_[n>>12&15]+_[n>>8&15]+_[n>>4&15]+_[n&15]+_[r>>28&15]+_[r>>24&15]+_[r>>20&15]+_[r>>16&15]+_[r>>12&15]+_[r>>8&15]+_[r>>4&15]+_[r&15]+_[i>>28&15]+_[i>>24&15]+_[i>>20&15]+_[i>>16&15]+_[i>>12&15]+_[i>>8&15]+_[i>>4&15]+_[i&15]+_[o>>28&15]+_[o>>24&15]+_[o>>20&15]+_[o>>16&15]+_[o>>12&15]+_[o>>8&15]+_[o>>4&15]+_[o&15]+_[a>>28&15]+_[a>>24&15]+_[a>>20&15]+_[a>>16&15]+_[a>>12&15]+_[a>>8&15]+_[a>>4&15]+_[a&15]+_[s>>28&15]+_[s>>24&15]+_[s>>20&15]+_[s>>16&15]+_[s>>12&15]+_[s>>8&15]+_[s>>4&15]+_[s&15];return $(this,Ae)||(u+=_[l>>28&15]+_[l>>24&15]+_[l>>20&15]+_[l>>16&15]+_[l>>12&15]+_[l>>8&15]+_[l>>4&15]+_[l&15]),u}toString(){return this.hex()}digest(){this.finalize();const e=$(this,se),n=$(this,ae),r=$(this,le),i=$(this,ue),o=$(this,ce),a=$(this,fe),s=$(this,de),l=$(this,he),u=[e>>24&255,e>>16&255,e>>8&255,e&255,n>>24&255,n>>16&255,n>>8&255,n&255,r>>24&255,r>>16&255,r>>8&255,r&255,i>>24&255,i>>16&255,i>>8&255,i&255,o>>24&255,o>>16&255,o>>8&255,o&255,a>>24&255,a>>16&255,a>>8&255,a&255,s>>24&255,s>>16&255,s>>8&255,s&255];return $(this,Ae)||u.push(l>>24&255,l>>16&255,l>>8&255,l&255),u}array(){return this.digest()}arrayBuffer(){this.finalize();const e=new ArrayBuffer($(this,Ae)?28:32),n=new DataView(e);return n.setUint32(0,$(this,se)),n.setUint32(4,$(this,ae)),n.setUint32(8,$(this,le)),n.setUint32(12,$(this,ue)),n.setUint32(16,$(this,ce)),n.setUint32(20,$(this,fe)),n.setUint32(24,$(this,de)),$(this,Ae)||n.setUint32(28,$(this,he)),e}}Ee=new WeakMap,ze=new WeakMap,ie=new WeakMap,Qe=new WeakMap,ht=new WeakMap,se=new WeakMap,ae=new WeakMap,le=new WeakMap,ue=new WeakMap,ce=new WeakMap,fe=new WeakMap,de=new WeakMap,he=new WeakMap,Re=new WeakMap,Je=new WeakMap,Ae=new WeakMap,Gt=new WeakMap,Ce=new WeakMap;function Tu(t){const e=new Nu;return e.update(t),parseInt(e.hex().substring(0,8),16)}const Mu=function(t){var e="#";return t.forEach(function(n){n<16&&(e+=0),e+=n.toString(16)}),e},Ou=function(t,e,n){t/=360;var r=n<.5?n*(1+e):n+e-n*e,i=2*n-r;return[t+1/3,t,t-1/3].map(function(o){return o<0&&o++,o>1&&o--,o<1/6?o=i+(r-i)*6*o:o<.5?o=r:o<2/3?o=i+(r-i)*6*(2/3-o):o=i,Math.round(o*255)})};class ku{constructor(e={}){const[n,r]=[e.lightness,e.saturation].map(function(i){return i=i!==void 0?i:[.35,.5,.65],Array.isArray(i)?i.concat():[i]});this.L=n,this.S=r,typeof e.hue=="number"&&(e.hue={min:e.hue,max:e.hue}),typeof e.hue=="object"&&!Array.isArray(e.hue)&&(e.hue=[e.hue]),typeof e.hue>"u"&&(e.hue=[]),this.hueRanges=e.hue.map(function(i){return{min:typeof i.min>"u"?0:i.min,max:typeof i.max>"u"?360:i.max}}),this.hash=Tu,typeof e.hash=="function"&&(this.hash=e.hash),e.hash==="bkdr"&&(this.hash=Cu)}hsl(e){var n,r,i,o=this.hash(e),a=727;if(this.hueRanges.length){const s=this.hueRanges[o%this.hueRanges.length];n=o/this.hueRanges.length%a*(s.max-s.min)/a+s.min}else n=o%359;return o=Math.ceil(o/360),r=this.S[o%this.S.length],o=Math.ceil(o/this.S.length),i=this.L[o%this.L.length],[n,r,i]}rgb(e){var n=this.hsl(e);return Ou.apply(this,n)}hex(e){var n=this.rgb(e);return Mu(n)}}var zu=function(){var t=Math.sign;return typeof t!="function"?!1:t(10)===1&&t(-20)===-1},Tn,Ri;function Ru(){return Ri||(Ri=1,Tn=function(t){return t=Number(t),isNaN(t)||t===0?t:t>0?1:-1}),Tn}var ju=zu()?Math.sign:Ru(),Vu=ju,Lu=Math.abs,qu=Math.floor,Fu=function(t){return isNaN(t)?0:(t=Number(t),t===0||!isFinite(t)?t:Vu(t)*qu(Lu(t)))},Du=Fu,Wu=Math.max,We=function(t){return Wu(0,Du(t))},Hu=We,Bs=function(t,e,n){var r;return isNaN(t)?(r=e,r>=0?n&&r?r-1:r:1):t===!1?!1:Hu(t)},Uu=Te,Bu=at,Gu=Function.prototype.bind,ji=Function.prototype.call,Ku=Object.keys,Xu=Object.prototype.propertyIsEnumerable,Zu=function(t,e){return function(n,r){var i,o=arguments[2],a=arguments[3];return n=Object(Bu(n)),Uu(r),i=Ku(n),a&&i.sort(typeof a=="function"?Gu.call(a,n):void 0),typeof t!="function"&&(t=i[t]),ji.call(t,i,function(s,l){return Xu.call(n,s)?ji.call(r,o,n[s],s,n,l):e})}},fn=Zu("forEach"),He={},Gs={exports:{}},Yu=Fe,Qu={function:!0,object:!0},Ju=function(t){return Yu(t)&&Qu[typeof t]||!1};(function(t){var e=qs,n=Ju,r=Fe,i=Error.captureStackTrace;t.exports=function(o){var a=new Error(o),s=arguments[1],l=arguments[2];return r(l)||n(s)&&(l=s,s=null),r(l)&&e(a,l),r(s)&&(a.code=s),i&&i(a,t.exports),a}})(Gs);var ec=Gs.exports,Lr={exports:{}},Mn,Vi;function Ks(){if(Vi)return Mn;Vi=1;var t=at,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols;return Mn=function(o,a){var s,l=Object(t(a));if(o=Object(t(o)),r(l).forEach(function(u){try{e(o,u,n(a,u))}catch(c){s=c}}),typeof i=="function"&&i(l).forEach(function(u){try{e(o,u,n(a,u))}catch(c){s=c}}),s!==void 0)throw s;return o},Mn}var Li=We,Xs=function(t,e){return e},On,qi,Fi,Di;try{Object.defineProperty(Xs,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch{}Xs.length===1?(On={configurable:!0,writable:!1,enumerable:!1},qi=Object.defineProperty,Lr.exports=function(t,e){return e=Li(e),t.length===e?t:(On.value=e,qi(t,"length",On))}):(Di=Ks(),Fi=function(){var t=[];return function(e){var n,r=0;if(t[e])return t[e];for(n=[];e--;)n.push("a"+(++r).toString(36));return new Function("fn","return function ("+n.join(", ")+") { return fn.apply(this, arguments); };")}}(),Lr.exports=function(t,e){var n;if(e=Li(e),t.length===e)return t;n=Fi(e)(t);try{Di(n,t)}catch{}return n});var Zs=Lr.exports,kn,Wi;function tc(){return Wi||(Wi=1,kn=function(){var t=Array.from,e,n;return typeof t!="function"?!1:(e=["raz","dwa"],n=t(e),!!(n&&n!==e&&n[1]==="dwa"))}),kn}var zn,Hi;function nc(){return Hi||(Hi=1,zn=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}),zn}var Rn,Ui;function rc(){if(Ui)return Rn;Ui=1;var t=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Rn=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}(),Rn}var jn,Bi;function dn(){return Bi||(Bi=1,jn=nc()()?globalThis:rc()),jn}var Vn,Gi;function ic(){if(Gi)return Vn;Gi=1;var t=dn(),e={object:!0,symbol:!0};return Vn=function(){var n=t.Symbol,r;if(typeof n!="function")return!1;r=n("test symbol");try{String(r)}catch{return!1}return!(!e[typeof n.iterator]||!e[typeof n.toPrimitive]||!e[typeof n.toStringTag])},Vn}var Ln,Ki;function oc(){return Ki||(Ki=1,Ln=function(t){return t?typeof t=="symbol"?!0:!t.constructor||t.constructor.name!=="Symbol"?!1:t[t.constructor.toStringTag]==="Symbol":!1}),Ln}var qn,Xi;function Ys(){if(Xi)return qn;Xi=1;var t=oc();return qn=function(e){if(!t(e))throw new TypeError(e+" is not a symbol");return e},qn}var Fn,Zi;function sc(){if(Zi)return Fn;Zi=1;var t=De,e=Object.create,n=Object.defineProperty,r=Object.prototype,i=e(null);return Fn=function(o){for(var a=0,s,l;i[o+(a||"")];)++a;return o+=a||"",i[o]=!0,s="@@"+o,n(r,s,t.gs(null,function(u){l||(l=!0,n(this,s,t(u)),l=!1)})),s},Fn}var Dn,Yi;function ac(){if(Yi)return Dn;Yi=1;var t=De,e=dn().Symbol;return Dn=function(n){return Object.defineProperties(n,{hasInstance:t("",e&&e.hasInstance||n("hasInstance")),isConcatSpreadable:t("",e&&e.isConcatSpreadable||n("isConcatSpreadable")),iterator:t("",e&&e.iterator||n("iterator")),match:t("",e&&e.match||n("match")),replace:t("",e&&e.replace||n("replace")),search:t("",e&&e.search||n("search")),species:t("",e&&e.species||n("species")),split:t("",e&&e.split||n("split")),toPrimitive:t("",e&&e.toPrimitive||n("toPrimitive")),toStringTag:t("",e&&e.toStringTag||n("toStringTag")),unscopables:t("",e&&e.unscopables||n("unscopables"))})},Dn}var Wn,Qi;function lc(){if(Qi)return Wn;Qi=1;var t=De,e=Ys(),n=Object.create(null);return Wn=function(r){return Object.defineProperties(r,{for:t(function(i){return n[i]?n[i]:n[i]=r(String(i))}),keyFor:t(function(i){var o;e(i);for(o in n)if(n[o]===i)return o})})},Wn}var Hn,Ji;function uc(){if(Ji)return Hn;Ji=1;var t=De,e=Ys(),n=dn().Symbol,r=sc(),i=ac(),o=lc(),a=Object.create,s=Object.defineProperties,l=Object.defineProperty,u,c,f;if(typeof n=="function")try{String(n()),f=!0}catch{}else n=null;return c=function(d){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return u(d)},Hn=u=function p(d){var w;if(this instanceof p)throw new TypeError("Symbol is not a constructor");return f?n(d):(w=a(c.prototype),d=d===void 0?"":String(d),s(w,{__description__:t("",d),__name__:t("",r(d))}))},i(u),o(u),s(c.prototype,{constructor:t(u),toString:t("",function(){return this.__name__})}),s(u.prototype,{toString:t(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:t(function(){return e(this)})}),l(u.prototype,u.toPrimitive,t("",function(){var p=e(this);return typeof p=="symbol"?p:p.toString()})),l(u.prototype,u.toStringTag,t("c","Symbol")),l(c.prototype,u.toStringTag,t("c",u.prototype[u.toStringTag])),l(c.prototype,u.toPrimitive,t("c",u.prototype[u.toPrimitive])),Hn}var Un,eo;function cc(){return eo||(eo=1,Un=ic()()?dn().Symbol:uc()),Un}var Bn,to;function fc(){if(to)return Bn;to=1;var t=Object.prototype.toString,e=t.call(function(){return arguments}());return Bn=function(n){return t.call(n)===e},Bn}var Gn,no;function dc(){if(no)return Gn;no=1;var t=Object.prototype.toString,e=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);return Gn=function(n){return typeof n=="function"&&e(t.call(n))},Gn}var Kn,ro;function hc(){if(ro)return Kn;ro=1;var t=Object.prototype.toString,e=t.call("");return Kn=function(n){return typeof n=="string"||n&&typeof n=="object"&&(n instanceof String||t.call(n)===e)||!1},Kn}var Xn,io;function pc(){if(io)return Xn;io=1;var t=cc().iterator,e=fc(),n=dc(),r=We,i=Te,o=at,a=Fe,s=hc(),l=Array.isArray,u=Function.prototype.call,c={configurable:!0,enumerable:!0,writable:!0,value:null},f=Object.defineProperty;return Xn=function(p){var d=arguments[1],w=arguments[2],m,b,v,h,g,y,S,x,E,N;if(p=Object(o(p)),a(d)&&i(d),!this||this===Array||!n(this)){if(!d){if(e(p))return g=p.length,g!==1?Array.apply(null,p):(h=new Array(1),h[0]=p[0],h);if(l(p)){for(h=new Array(g=p.length),b=0;b<g;++b)h[b]=p[b];return h}}h=[]}else m=this;if(!l(p)){if((E=p[t])!==void 0){for(S=i(E).call(p),m&&(h=new m),x=S.next(),b=0;!x.done;)N=d?u.call(d,w,x.value,b):x.value,m?(c.value=N,f(h,b,c)):h[b]=N,x=S.next(),++b;g=b}else if(s(p)){for(g=p.length,m&&(h=new m),b=0,v=0;b<g;++b)N=p[b],b+1<g&&(y=N.charCodeAt(0),y>=55296&&y<=56319&&(N+=p[++b])),N=d?u.call(d,w,N,v):N,m?(c.value=N,f(h,v,c)):h[v]=N,++v;g=v}}if(g===void 0)for(g=r(p.length),m&&(h=new m(g)),b=0;b<g;++b)N=d?u.call(d,w,p[b],b):p[b],m?(c.value=N,f(h,b,c)):h[b]=N;return m&&(c.value=null,h.length=g),h},Xn}var Zn,oo;function ti(){return oo||(oo=1,Zn=tc()()?Array.from:pc()),Zn}var gc=ti(),mc=Array.isArray,vc=function(t){return mc(t)?t:gc(t)},yc=vc,bc=Fe,wc=Te,xc=Array.prototype.slice,Qs;Qs=function(t){return this.map(function(e,n){return e?e(t[n]):t[n]}).concat(xc.call(t,this.length))};var Sc=function(t){return t=yc(t),t.forEach(function(e){bc(e)&&wc(e)}),Qs.bind(t)},zt=Te,$c=function(t){var e;return typeof t=="function"?{set:t,get:t}:(e={get:zt(t.get)},t.set!==void 0?(e.set=zt(t.set),t.delete&&(e.delete=zt(t.delete)),t.clear&&(e.clear=zt(t.clear)),e):(e.set=e.get,e))},Rt=ec,jt=Zs,ut=De,Js=Hs.methods,_c=Sc,Pc=$c,Yn=Function.prototype.apply,Qn=Function.prototype.call,so=Object.create,Ec=Object.defineProperties,Ac=Js.on,Cc=Js.emit,Ic=function(t,e,n){var r=so(null),i,o,a,s,l,u,c,f,p,d,w,m,b,v,h;return e!==!1?o=e:isNaN(t.length)?o=1:o=t.length,n.normalizer&&(d=Pc(n.normalizer),a=d.get,s=d.set,l=d.delete,u=d.clear),n.resolvers!=null&&(h=_c(n.resolvers)),a?v=jt(function(g){var y,S,x=arguments;if(h&&(x=h(x)),y=a(x),y!==null&&hasOwnProperty.call(r,y))return w&&i.emit("get",y,x,this),r[y];if(x.length===1?S=Qn.call(t,this,x[0]):S=Yn.call(t,this,x),y===null){if(y=a(x),y!==null)throw Rt("Circular invocation","CIRCULAR_INVOCATION");y=s(x)}else if(hasOwnProperty.call(r,y))throw Rt("Circular invocation","CIRCULAR_INVOCATION");return r[y]=S,m&&i.emit("set",y,null,S),S},o):e===0?v=function(){var g;if(hasOwnProperty.call(r,"data"))return w&&i.emit("get","data",arguments,this),r.data;if(arguments.length?g=Yn.call(t,this,arguments):g=Qn.call(t,this),hasOwnProperty.call(r,"data"))throw Rt("Circular invocation","CIRCULAR_INVOCATION");return r.data=g,m&&i.emit("set","data",null,g),g}:v=function(g){var y,S=arguments,x;if(h&&(S=h(arguments)),x=String(S[0]),hasOwnProperty.call(r,x))return w&&i.emit("get",x,S,this),r[x];if(S.length===1?y=Qn.call(t,this,S[0]):y=Yn.call(t,this,S),hasOwnProperty.call(r,x))throw Rt("Circular invocation","CIRCULAR_INVOCATION");return r[x]=y,m&&i.emit("set",x,null,y),y},i={original:t,memoized:v,profileName:n.profileName,get:function(g){return h&&(g=h(g)),a?a(g):String(g[0])},has:function(g){return hasOwnProperty.call(r,g)},delete:function(g){var y;hasOwnProperty.call(r,g)&&(l&&l(g),y=r[g],delete r[g],b&&i.emit("delete",g,y))},clear:function(){var g=r;u&&u(),r=so(null),i.emit("clear",g)},on:function(g,y){return g==="get"?w=!0:g==="set"?m=!0:g==="delete"&&(b=!0),Ac.call(this,g,y)},emit:Cc,updateEnv:function(){t=i.original}},a?c=jt(function(g){var y,S=arguments;h&&(S=h(S)),y=a(S),y!==null&&i.delete(y)},o):e===0?c=function(){return i.delete("data")}:c=function(g){return h&&(g=h(arguments)[0]),i.delete(g)},f=jt(function(){var g,y=arguments;return e===0?r.data:(h&&(y=h(y)),a?g=a(y):g=String(y[0]),r[g])}),p=jt(function(){var g,y=arguments;return e===0?i.has("data"):(h&&(y=h(y)),a?g=a(y):g=String(y[0]),g===null?!1:i.has(g))}),Ec(v,{__memoized__:ut(!0),delete:ut(c),clear:ut(i.clear),_get:ut(f),_has:ut(p)}),i},Nc=Te,Tc=fn,ao=He,Mc=Ic,Oc=Bs,kc=function t(e){var n,r,i;if(Nc(e),n=Object(arguments[1]),n.async&&n.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(e,"__memoized__")&&!n.force?e:(r=Oc(n.length,e.length,n.async&&ao.async),i=Mc(e,r,n),Tc(ao,function(o,a){n[a]&&o(n[a],i,n)}),t.__profiler__&&t.__profiler__(i),i.updateEnv(),i.memoized)},Jn,lo;function zc(){return lo||(lo=1,Jn=function(t){var e,n,r=t.length;if(!r)return"";for(e=String(t[n=0]);--r;)e+=""+t[++n];return e}),Jn}var er,uo;function Rc(){return uo||(uo=1,er=function(t){return t?function(e){for(var n=String(e[0]),r=0,i=t;--i;)n+=""+e[++r];return n}:function(){return""}}),er}var tr,co;function jc(){return co||(co=1,tr=function(){var t=Number.isNaN;return typeof t!="function"?!1:!t({})&&t(NaN)&&!t(34)}),tr}var nr,fo;function Vc(){return fo||(fo=1,nr=function(t){return t!==t}),nr}var rr,ho;function Lc(){return ho||(ho=1,rr=jc()()?Number.isNaN:Vc()),rr}var ir,po;function ni(){if(po)return ir;po=1;var t=Lc(),e=We,n=at,r=Array.prototype.indexOf,i=Object.prototype.hasOwnProperty,o=Math.abs,a=Math.floor;return ir=function(s){var l,u,c,f;if(!t(s))return r.apply(this,arguments);for(u=e(n(this).length),c=arguments[1],isNaN(c)?c=0:c>=0?c=a(c):c=e(this.length)-a(o(c)),l=c;l<u;++l)if(i.call(this,l)&&(f=this[l],t(f)))return l;return-1},ir}var or,go;function qc(){if(go)return or;go=1;var t=ni(),e=Object.create;return or=function(){var n=0,r=[],i=e(null);return{get:function(o){var a=0,s=r,l,u=o.length;if(u===0)return s[u]||null;if(s=s[u]){for(;a<u-1;){if(l=t.call(s[0],o[a]),l===-1)return null;s=s[1][l],++a}return l=t.call(s[0],o[a]),l===-1?null:s[1][l]||null}return null},set:function(o){var a=0,s=r,l,u=o.length;if(u===0)s[u]=++n;else{for(s[u]||(s[u]=[[],[]]),s=s[u];a<u-1;)l=t.call(s[0],o[a]),l===-1&&(l=s[0].push(o[a])-1,s[1].push([[],[]])),s=s[1][l],++a;l=t.call(s[0],o[a]),l===-1&&(l=s[0].push(o[a])-1),s[1][l]=++n}return i[n]=o,n},delete:function(o){var a=0,s=r,l,u=i[o],c=u.length,f=[];if(c===0)delete s[c];else if(s=s[c]){for(;a<c-1;){if(l=t.call(s[0],u[a]),l===-1)return;f.push(s,l),s=s[1][l],++a}if(l=t.call(s[0],u[a]),l===-1)return;for(o=s[1][l],s[0].splice(l,1),s[1].splice(l,1);!s[0].length&&f.length;)l=f.pop(),s=f.pop(),s[0].splice(l,1),s[1].splice(l,1)}delete i[o]},clear:function(){r=[],i=e(null)}}},or}var sr,mo;function Fc(){if(mo)return sr;mo=1;var t=ni();return sr=function(){var e=0,n=[],r=[];return{get:function(i){var o=t.call(n,i[0]);return o===-1?null:r[o]},set:function(i){return n.push(i[0]),r.push(++e),e},delete:function(i){var o=t.call(r,i);o!==-1&&(n.splice(o,1),r.splice(o,1))},clear:function(){n=[],r=[]}}},sr}var ar,vo;function Dc(){if(vo)return ar;vo=1;var t=ni(),e=Object.create;return ar=function(n){var r=0,i=[[],[]],o=e(null);return{get:function(a){for(var s=0,l=i,u;s<n-1;){if(u=t.call(l[0],a[s]),u===-1)return null;l=l[1][u],++s}return u=t.call(l[0],a[s]),u===-1?null:l[1][u]||null},set:function(a){for(var s=0,l=i,u;s<n-1;)u=t.call(l[0],a[s]),u===-1&&(u=l[0].push(a[s])-1,l[1].push([[],[]])),l=l[1][u],++s;return u=t.call(l[0],a[s]),u===-1&&(u=l[0].push(a[s])-1),l[1][u]=++r,o[r]=a,r},delete:function(a){for(var s=0,l=i,u,c=[],f=o[a];s<n-1;){if(u=t.call(l[0],f[s]),u===-1)return;c.push(l,u),l=l[1][u],++s}if(u=t.call(l[0],f[s]),u!==-1){for(a=l[1][u],l[0].splice(u,1),l[1].splice(u,1);!l[0].length&&c.length;)u=c.pop(),l=c.pop(),l[0].splice(u,1),l[1].splice(u,1);delete o[a]}},clear:function(){i=[[],[]],o=e(null)}}},ar}var yo={},lr,bo;function ea(){if(bo)return lr;bo=1;var t=Te,e=fn,n=Function.prototype.call;return lr=function(r,i){var o={},a=arguments[2];return t(i),e(r,function(s,l,u,c){o[l]=n.call(i,a,s,l,u,c)}),o},lr}var ur,wo;function ri(){if(wo)return ur;wo=1;var t=function(n){if(typeof n!="function")throw new TypeError(n+" is not a function");return n},e=function(n){var r=document.createTextNode(""),i,o,a=0;return new n(function(){var s;if(i)o&&(i=o.concat(i));else{if(!o)return;i=o}if(o=i,i=null,typeof o=="function"){s=o,o=null,s();return}for(r.data=a=++a%2;o;)s=o.shift(),o.length||(o=null),s()}).observe(r,{characterData:!0}),function(s){if(t(s),i){typeof i=="function"?i=[i,s]:i.push(s);return}i=s,r.data=a=++a%2}};return ur=function(){if(typeof process=="object"&&process&&typeof process.nextTick=="function")return process.nextTick;if(typeof queueMicrotask=="function")return function(n){queueMicrotask(t(n))};if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return e(MutationObserver);if(typeof WebKitMutationObserver=="function")return e(WebKitMutationObserver)}return typeof setImmediate=="function"?function(n){setImmediate(t(n))}:typeof setTimeout=="function"||typeof setTimeout=="object"?function(n){setTimeout(t(n),0)}:null}(),ur}var xo;function Wc(){if(xo)return yo;xo=1;var t=ti(),e=ea(),n=Ks(),r=Zs,i=ri(),o=Array.prototype.slice,a=Function.prototype.apply,s=Object.create;return He.async=function(l,u){var c=s(null),f=s(null),p=u.memoized,d=u.original,w,m,b;u.memoized=r(function(v){var h=arguments,g=h[h.length-1];return typeof g=="function"&&(w=g,h=o.call(h,0,-1)),p.apply(m=this,b=h)},p);try{n(u.memoized,p)}catch{}u.on("get",function(v){var h,g,y;if(w){if(c[v]){typeof c[v]=="function"?c[v]=[c[v],w]:c[v].push(w),w=null;return}h=w,g=m,y=b,w=m=b=null,i(function(){var S;hasOwnProperty.call(f,v)?(S=f[v],u.emit("getasync",v,y,g),a.call(h,S.context,S.args)):(w=h,m=g,b=y,p.apply(g,y))})}}),u.original=function(){var v,h,g,y;return w?(v=t(arguments),h=function S(x){var E,N,F=S.id;if(F==null){i(a.bind(S,this,arguments));return}if(delete S.id,E=c[F],delete c[F],!!E)return N=t(arguments),u.has(F)&&(x?u.delete(F):(f[F]={context:this,args:N},u.emit("setasync",F,typeof E=="function"?1:E.length))),typeof E=="function"?y=a.call(E,this,N):E.forEach(function(te){y=a.call(te,this,N)},this),y},g=w,w=m=b=null,v.push(h),y=a.call(d,this,v),h.cb=g,w=h,y):a.call(d,this,arguments)},u.on("set",function(v){if(!w){u.delete(v);return}c[v]?typeof c[v]=="function"?c[v]=[c[v],w.cb]:c[v].push(w.cb):c[v]=w.cb,delete w.cb,w.id=v,w=null}),u.on("delete",function(v){var h;hasOwnProperty.call(c,v)||f[v]&&(h=f[v],delete f[v],u.emit("deleteasync",v,o.call(h.args,1)))}),u.on("clear",function(){var v=f;f=s(null),u.emit("clearasync",e(v,function(h){return o.call(h.args,1)}))})},yo}var So={},cr,$o;function Hc(){if($o)return cr;$o=1;var t=Array.prototype.forEach,e=Object.create;return cr=function(n){var r=e(null);return t.call(arguments,function(i){r[i]=!0}),r},cr}var fr,_o;function ta(){return _o||(_o=1,fr=function(t){return typeof t=="function"}),fr}var dr,Po;function Uc(){if(Po)return dr;Po=1;var t=ta();return dr=function(e){try{return e&&t(e.toString)?e.toString():String(e)}catch{throw new TypeError("Passed argument cannot be stringifed")}},dr}var hr,Eo;function Bc(){if(Eo)return hr;Eo=1;var t=at,e=Uc();return hr=function(n){return e(t(n))},hr}var pr,Ao;function Gc(){if(Ao)return pr;Ao=1;var t=ta();return pr=function(e){try{return e&&t(e.toString)?e.toString():String(e)}catch{return"<Non-coercible to string value>"}},pr}var gr,Co;function Kc(){if(Co)return gr;Co=1;var t=Gc(),e=/[\n\r\u2028\u2029]/g;return gr=function(n){var r=t(n);return r.length>100&&(r=r.slice(0,99)+"…"),r=r.replace(e,function(i){return JSON.stringify(i).slice(1,-1)}),r},gr}var Vt={exports:{}},Io;function na(){if(Io)return Vt.exports;Io=1,Vt.exports=t,Vt.exports.default=t;function t(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}return Vt.exports}var No;function Xc(){if(No)return So;No=1;var t=ea(),e=Hc(),n=Bc(),r=Kc(),i=na(),o=ri(),a=Object.create,s=e("then","then:finally","done","done:finally");return He.promise=function(l,u){var c=a(null),f=a(null),p=a(null);if(l===!0)l=null;else if(l=n(l),!s[l])throw new TypeError("'"+r(l)+"' is not valid promise mode");u.on("set",function(d,w,m){var b=!1;if(!i(m)){f[d]=m,u.emit("setasync",d,1);return}c[d]=1,p[d]=m;var v=function(S){var x=c[d];if(b)throw new Error(`Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)
Consider to rely on 'then' or 'done' mode instead.`);x&&(delete c[d],f[d]=S,u.emit("setasync",d,x))},h=function(){b=!0,c[d]&&(delete c[d],delete p[d],u.delete(d))},g=l;if(g||(g="then"),g==="then"){var y=function(){o(h)};m=m.then(function(S){o(v.bind(this,S))},y),typeof m.finally=="function"&&m.finally(y)}else if(g==="done"){if(typeof m.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");m.done(v,h)}else if(g==="done:finally"){if(typeof m.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if(typeof m.finally!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");m.done(v),m.finally(h)}}),u.on("get",function(d,w,m){var b;if(c[d]){++c[d];return}b=p[d];var v=function(){u.emit("getasync",d,w,m)};i(b)?typeof b.done=="function"?b.done(v):b.then(function(){o(v)}):v()}),u.on("delete",function(d){if(delete p[d],c[d]){delete c[d];return}if(hasOwnProperty.call(f,d)){var w=f[d];delete f[d],u.emit("deleteasync",d,[w])}}),u.on("clear",function(){var d=f;f=a(null),c=a(null),p=a(null),u.emit("clearasync",t(d,function(w){return[w]}))})},So}var To={},Mo;function Zc(){if(Mo)return To;Mo=1;var t=Te,e=fn,n=He,r=Function.prototype.apply;return n.dispose=function(i,o,a){var s;if(t(i),a.async&&n.async||a.promise&&n.promise){o.on("deleteasync",s=function(l,u){r.call(i,null,u)}),o.on("clearasync",function(l){e(l,function(u,c){s(c,u)})});return}o.on("delete",s=function(l,u){i(u)}),o.on("clear",function(l){e(l,function(u,c){s(c,u)})})},To}var Oo={},mr,ko;function Yc(){return ko||(ko=1,mr=2147483647),mr}var vr,zo;function Qc(){if(zo)return vr;zo=1;var t=We,e=Yc();return vr=function(n){if(n=t(n),n>e)throw new TypeError(n+" exceeds maximum possible timeout");return n},vr}var Ro;function Jc(){if(Ro)return Oo;Ro=1;var t=ti(),e=fn,n=ri(),r=na(),i=Qc(),o=He,a=Function.prototype,s=Math.max,l=Math.min,u=Object.create;return o.maxAge=function(c,f,p){var d,w,m,b;c=i(c),c&&(d=u(null),w=p.async&&o.async||p.promise&&o.promise?"async":"",f.on("set"+w,function(v){d[v]=setTimeout(function(){f.delete(v)},c),typeof d[v].unref=="function"&&d[v].unref(),b&&(b[v]&&b[v]!=="nextTick"&&clearTimeout(b[v]),b[v]=setTimeout(function(){delete b[v]},m),typeof b[v].unref=="function"&&b[v].unref())}),f.on("delete"+w,function(v){clearTimeout(d[v]),delete d[v],b&&(b[v]!=="nextTick"&&clearTimeout(b[v]),delete b[v])}),p.preFetch&&(p.preFetch===!0||isNaN(p.preFetch)?m=.333:m=s(l(Number(p.preFetch),1),0),m&&(b={},m=(1-m)*c,f.on("get"+w,function(v,h,g){b[v]||(b[v]="nextTick",n(function(){var y;b[v]==="nextTick"&&(delete b[v],f.delete(v),p.async&&(h=t(h),h.push(a)),y=f.memoized.apply(g,h),p.promise&&r(y)&&(typeof y.done=="function"?y.done(a,a):y.then(a,a)))}))}))),f.on("clear"+w,function(){e(d,function(v){clearTimeout(v)}),d={},b&&(e(b,function(v){v!=="nextTick"&&clearTimeout(v)}),b={})}))},Oo}var jo={},yr,Vo;function ef(){if(Vo)return yr;Vo=1;var t=We,e=Object.create,n=Object.prototype.hasOwnProperty;return yr=function(r){var i=0,o=1,a=e(null),s=e(null),l=0,u;return r=t(r),{hit:function(c){var f=s[c],p=++l;if(a[p]=c,s[c]=p,!f)return++i,i<=r?void 0:(c=a[o],u(c),c);if(delete a[f],o===f)for(;!n.call(a,++o););},delete:u=function(c){var f=s[c];if(f&&(delete a[f],delete s[c],--i,o===f)){if(!i){l=0,o=1;return}for(;!n.call(a,++o););}},clear:function(){i=0,o=1,a=e(null),s=e(null),l=0}}},yr}var Lo;function tf(){if(Lo)return jo;Lo=1;var t=We,e=ef(),n=He;return n.max=function(r,i,o){var a,s,l;r=t(r),r&&(s=e(r),a=o.async&&n.async||o.promise&&n.promise?"async":"",i.on("set"+a,l=function(u){u=s.hit(u),u!==void 0&&i.delete(u)}),i.on("get"+a,l),i.on("delete"+a,s.delete),i.on("clear"+a,s.clear))},jo}var qo={},Fo;function nf(){if(Fo)return qo;Fo=1;var t=De,e=He,n=Object.create,r=Object.defineProperties;return e.refCounter=function(i,o,a){var s,l;s=n(null),l=a.async&&e.async||a.promise&&e.promise?"async":"",o.on("set"+l,function(u,c){s[u]=c||1}),o.on("get"+l,function(u){++s[u]}),o.on("delete"+l,function(u){delete s[u]}),o.on("clear"+l,function(){s={}}),r(o.memoized,{deleteRef:t(function(){var u=o.get(arguments);return u===null||!s[u]?null:--s[u]?!1:(o.delete(u),!0)}),getRefCount:t(function(){var u=o.get(arguments);return u===null||!s[u]?0:s[u]})})},qo}var rf=Fs,of=Bs,sf=kc,af=function(t){var e=rf(arguments[1]),n;return e.normalizer||(n=e.length=of(e.length,t.length,e.async),n!==0&&(e.primitive?n===!1?e.normalizer=zc():n>1&&(e.normalizer=Rc()(n)):n===!1?e.normalizer=qc()():n===1?e.normalizer=Fc()():e.normalizer=Dc()(n))),e.async&&Wc(),e.promise&&Xc(),e.dispose&&Zc(),e.maxAge&&Jc(),e.max&&tf(),e.refCounter&&nf(),sf(t,e)};const hn=Qr(af),lf="/webscape-wanderer/assets/vibes-512px-04de93e8.png";var qr;function Lt(t,e,n){return Math.min(Math.max(t||0,e),n)}function br(t){return{r:Lt(t.r,0,255),g:Lt(t.g,0,255),b:Lt(t.b,0,255),a:Lt(t.a,0,1)}}function Fr(t){return{r:255*t.r,g:255*t.g,b:255*t.b,a:t.a}}function Dr(t){return{r:t.r/255,g:t.g/255,b:t.b/255,a:t.a}}function Do(t,e){e===void 0&&(e=0);var n=Math.pow(10,e);return{r:Math.round(t.r*n)/n,g:Math.round(t.g*n)/n,b:Math.round(t.b*n)/n,a:t.a}}function wr(t,e,n,r,i,o){return(1-e/n)*r+e/n*Math.round((1-t)*i+t*o)}function uf(t,e,n,r,i){i===void 0&&(i={unitInput:!1,unitOutput:!1,roundOutput:!0}),i.unitInput&&(t=Fr(t),e=Fr(e)),t=br(t);var o=(e=br(e)).a+t.a-e.a*t.a,a=n(t,e,r),s=br({r:wr(t.a,e.a,o,t.r,e.r,a.r),g:wr(t.a,e.a,o,t.g,e.g,a.g),b:wr(t.a,e.a,o,t.b,e.b,a.b),a:o});return i.unitOutput?Dr(s):i.roundOutput?Do(s):Do(s,9)}function cf(t,e,n){return Fr(n(Dr(t),Dr(e)))}function Wr(t){return .3*t.r+.59*t.g+.11*t.b}function ff(t,e){var n=e-Wr(t);return function(r){var i=Wr(r),o=r.r,a=r.g,s=r.b,l=Math.min(o,a,s),u=Math.max(o,a,s);function c(p){return i+(p-i)*i/(i-l)}function f(p){return i+(p-i)*(1-i)/(u-i)}return l<0&&(o=c(o),a=c(a),s=c(s)),u>1&&(o=f(o),a=f(a),s=f(s)),{r:o,g:a,b:s}}({r:t.r+n,g:t.g+n,b:t.b+n})}function df(t){return Math.max(t.r,t.g,t.b)-Math.min(t.r,t.g,t.b)}function hf(t,e){var n=["r","g","b"].sort(function(s,l){return t[s]-t[l]}),r=n[0],i=n[1],o=n[2],a={r:t.r,g:t.g,b:t.b};return a[o]>a[r]?(a[i]=(a[i]-a[r])*e/(a[o]-a[r]),a[o]=e):a[i]=a[o]=0,a[r]=0,a}function pf(t,e){return ff(hf(e,df(t)),Wr(t))}qr=function(t,e){return uf(t,e,cf,pf,{unitInput:!0,unitOutput:!0})};var gf={grad:.9,turn:360,rad:360/(2*Math.PI)},we=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},R=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},Q=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},ra=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Wo=function(t){return{r:Q(t.r,0,255),g:Q(t.g,0,255),b:Q(t.b,0,255),a:Q(t.a)}},xr=function(t){return{r:R(t.r),g:R(t.g),b:R(t.b),a:R(t.a,3)}},mf=/^#([0-9a-f]{3,8})$/i,qt=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},ia=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=Math.max(e,n,r),a=o-Math.min(e,n,r),s=a?o===e?(n-r)/a:o===n?2+(r-e)/a:4+(e-n)/a:0;return{h:60*(s<0?s+6:s),s:o?a/o*100:0,v:o/255*100,a:i}},oa=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var o=Math.floor(e),a=r*(1-n),s=r*(1-(e-o)*n),l=r*(1-(1-e+o)*n),u=o%6;return{r:255*[r,s,a,a,l,r][u],g:255*[l,r,r,s,a,a][u],b:255*[a,a,l,r,r,s][u],a:i}},Ho=function(t){return{h:ra(t.h),s:Q(t.s,0,100),l:Q(t.l,0,100),a:Q(t.a)}},Uo=function(t){return{h:R(t.h),s:R(t.s),l:R(t.l),a:R(t.a,3)}},Bo=function(t){return oa((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},vt=function(t){return{h:(e=ia(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},vf=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yf=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bf=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wf=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Hr={string:[[function(t){var e=mf.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?R(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?R(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=bf.exec(t)||wf.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Wo({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=vf.exec(t)||yf.exec(t);if(!e)return null;var n,r,i=Ho({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(gf[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Bo(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,o=i===void 0?1:i;return we(e)&&we(n)&&we(r)?Wo({r:Number(e),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,o=i===void 0?1:i;if(!we(e)||!we(n)||!we(r))return null;var a=Ho({h:Number(e),s:Number(n),l:Number(r),a:Number(o)});return Bo(a)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,o=i===void 0?1:i;if(!we(e)||!we(n)||!we(r))return null;var a=function(s){return{h:ra(s.h),s:Q(s.s,0,100),v:Q(s.v,0,100),a:Q(s.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(o)});return oa(a)},"hsv"]]},Go=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},xf=function(t){return typeof t=="string"?Go(t.trim(),Hr.string):typeof t=="object"&&t!==null?Go(t,Hr.object):[null,void 0]},Sr=function(t,e){var n=vt(t);return{h:n.h,s:Q(n.s+100*e,0,100),l:n.l,a:n.a}},$r=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Ko=function(t,e){var n=vt(t);return{h:n.h,s:n.s,l:Q(n.l+100*e,0,100),a:n.a}},Ur=function(){function t(e){this.parsed=xf(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return R($r(this.rgba),2)},t.prototype.isDark=function(){return $r(this.rgba)<.5},t.prototype.isLight=function(){return $r(this.rgba)>=.5},t.prototype.toHex=function(){return e=xr(this.rgba),n=e.r,r=e.g,i=e.b,a=(o=e.a)<1?qt(R(255*o)):"","#"+qt(n)+qt(r)+qt(i)+a;var e,n,r,i,o,a},t.prototype.toRgb=function(){return xr(this.rgba)},t.prototype.toRgbString=function(){return e=xr(this.rgba),n=e.r,r=e.g,i=e.b,(o=e.a)<1?"rgba("+n+", "+r+", "+i+", "+o+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,o},t.prototype.toHsl=function(){return Uo(vt(this.rgba))},t.prototype.toHslString=function(){return e=Uo(vt(this.rgba)),n=e.h,r=e.s,i=e.l,(o=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+o+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,o},t.prototype.toHsv=function(){return e=ia(this.rgba),{h:R(e.h),s:R(e.s),v:R(e.v),a:R(e.a,3)};var e},t.prototype.invert=function(){return pe({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),pe(Sr(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),pe(Sr(this.rgba,-e))},t.prototype.grayscale=function(){return pe(Sr(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),pe(Ko(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),pe(Ko(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?pe({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):R(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=vt(this.rgba);return typeof e=="number"?pe({h:e,s:n.s,l:n.l,a:n.a}):R(n.h)},t.prototype.isEqual=function(e){return this.toHex()===pe(e).toHex()},t}(),pe=function(t){return t instanceof Ur?t:new Ur(t)},Xo=[],Sf=function(t){t.forEach(function(e){Xo.indexOf(e)<0&&(e(Ur,Hr),Xo.push(e))})};function $f(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};t.prototype.toName=function(a){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var s,l,u=r[this.toHex()];if(u)return u;if(a?.closest){var c=this.toRgb(),f=1/0,p="black";if(!o.length)for(var d in n)o[d]=new t(n[d]).toRgb();for(var w in n){var m=(s=c,l=o[w],Math.pow(s.r-l.r,2)+Math.pow(s.g-l.g,2)+Math.pow(s.b-l.b,2));m<f&&(f=m,p=w)}return p}},e.string.push([function(a){var s=a.toLowerCase(),l=s==="transparent"?"#0000":n[s];return l?new t(l).toRgb():null},"name"])}const sa=({color:t})=>t,_f=(t,e=Ne)=>{const{nodes:n,links:r}=t;return new Float32Array(n.map(sa).flatMap(e))},aa=({size:t})=>t,Pf=(t,e=Ne)=>{const{nodes:n,links:r}=t;return new Float32Array(n.map(aa).map(e))},la=async(t,{colorMap:e=Ne,sizeMap:n=Ne,immediate:r=!1}={})=>{await U(t);const i=await _f(await U(t),e),o=await Pf(await U(t),n),a=xe(t);a.setNodeProperties("colorTarget","vec4",i),a.setNodeProperties("sizeTarget","float",o),a.setNodeProperties("emphasisTarget","float",new Float32Array(o.length).fill(0)),r&&(a.setNodeProperties("colorInitial","vec4",i),a.setNodeProperties("sizeInitial","float",o),a.setNodeProperties("emphasisInitial","float",new Float32Array(o.length).fill(0)))},Zo=async(t,e,{colorMap:n=Ne,sizeMap:r=Ne,emphasis:i=0,immediate:o=!1}={})=>{const a=n(sa(e)),s=r(aa(e)),l=xe(t);l.setNodeProperty("colorTarget",e.index,a),l.setNodeProperty("sizeTarget",e.index,s),l.setNodeProperty("emphasisTarget",e.index,i),o&&(l.setNodeProperty("colorInitial",e.index,a),l.setNodeProperty("sizeInitial",e.index,s),l.setNodeProperty("emphasisInitial",e.index,i))},Ef={colorMap:t=>{const e=t.slice(0,3).reduce((n,r)=>n+r,0)/3;return[...t.slice(0,3).map(n=>e),.5]},sizeMap:t=>t},ua=async(t,e=!1)=>{try{await la(t,{...Ef,immediate:e})}catch(n){console.error(n)}},Af=async(t,e,n=!0)=>{if(await Hf(t).get(),e){Qo(t,e.index),pn(t,e);const r=Za(e.id),i=Ya(e.id),{nodesById:o,links:a}=await U(t),s=({sizeMap:l=Ne,emphasis:u=1,colorMap:c=Ne})=>(f,p)=>{p(["upstream","downstream"]).then(({upstream:d,downstream:w})=>{const m=d?.value||w?.value,b=o[m];Zo(t,b,{sizeMap:l,emphasis:u,colorMap:c})})};ua(t).then(()=>{Vr(t).doQuery(r,Qt(s({colorMap:l=>{const u={r:l[0],g:l[1],b:l[2],a:l[3]},c={r:57/255,g:179/255,b:83/255,a:.8},f=qr(u,c);return[f.r,f.g,f.b,f.a]}}))),Zo(t,e,{sizeMap:l=>l*1.5,emphasis:1}),Vr(t).doQuery(i,Qt(s({colorMap:l=>{const u={r:l[0],g:l[1],b:l[2],a:l[3]},c={r:0,g:102/255,b:209/255,a:.8},f=qr(u,c);return[f.r,f.g,f.b,f.a]}})))})}else la(t),Qo(t,-1)},Cf=async t=>{const e=await U(t),{nodesByNavId:n}=e,i=X(t).focus,o=n[i];if(o){const a=pn(t,o);_a(t,a,!1)}},Yo=async t=>{const e=await U(t),{nodesByNavId:n}=e,r=X(t),i=r.focus,o=n[i];if(o){const a=pn(t,o);_a(t,a,!0),ds(t,r.focusedZoom||500)}else ds(t,r.unfocusedZoom||1500)};window.initializeSelectionVisuals=ua;const bt=t=>J(t,"selectedIndex",()=>-1).get(),Qo=(t,e)=>{J(t,"selectedIndex").set(e)},If=async t=>{const e=bt(t),{nodes:n}=await U(t);return n[e]};Sf([$f]);const ca=t=>{const e=X(t),n=pe(getComputedStyle(e).getPropertyValue("--selected-color")).toRgb();return[n.r/255,n.g/255,n.b/255,1]},Jo={globalScale:1,nodeScale:1,edgeFog:1,nodeFog:1,edgeScale:1,edgeOvershoot:1.25,edgeFrequency:2,edgePulseSpeed:1,edgeWaveSpeed:1,focus:-1,selected:-1,defaultFogVisibility:.3,defaultFogBoundaryClipZ:700,focusedZoom:100,unfocusedZoom:300,zoomBoundary:150,nodeShape:"box"},Nf=t=>Object.keys(X(t).constructor.properties),fa=T.infinite(t=>{const e=X(t);return Object.fromEntries(Nf(t).map(n=>[n,e[n]]))}),Pt=T.infinite(t=>{const e={mousePosition:L(new Jt(...Pa(t))),selectedIndex:L(-1),selectedColor:L(new Ts(...ca(t))),hoveringIndex:L(mn(t)),viewport:L(new Jt(0,0)),devicePixelRatio:L(window.devicePixelRatio),time:L(performance.now()/1e3)},n=fa(t);return Object.entries(n).forEach(([r,i])=>{e[r]=L(i)}),console.debug("initialized uniforms",e),e}),es=new Jt,Tf=t=>{const{renderer:e}=me(t);e.getSize(es);let n=Pt(t);n.mousePosition.value=new Jt(...Pa(t)),n.selectedIndex.value=bt(t),n.selectedColor.value=new Ts(...ca(t)),n.hoveringIndex.value=mn(t),n.time.value=performance.now()/1e3,n.viewport.value=es.toArray();const r=fa(t);Object.entries(r).forEach(([i,o])=>{n[i].value=o})},Kt=(t,e,n)=>{const r=Ms(t.div(n),-.5,.5),i=ge(gt(ge(gt(r.mul(2),2)),-1));return gt(Qa(i),e)},Br=O(.15),ts=(t,{nodePosition:e,scale:n})=>{const{globalProjection:r,globalView:i,zoomedProjection:o,zoomedView:a,fixedProjection:s,fixedView:l,distance:u,center:c,rotationCenter:f}=cn(t),{globalScale:p,nodeScale:d}=Pt(t),w=r.mul(i).mul(H(e,O(1))),m=w.xyz.div(w.w),b=Ja.mul(n).mul(p.value).mul(d.value),v=s.mul(l.mul(H(b,O(1)))),h=v.xyz.div(v.w),g=o.mul(a.mul(H(b,O(1)))),y=g.xyz.div(g.w),S=M(y,h,O(.5)),x=Ht(S.x.add(m.x),S.y.add(m.y),m.z.add(S.z.sub(O(.99)).mul(O(.1)))),E=H(x.mul(w.w),w.w);return{globalNDC:m,globalClipPosition:w,orthoFixedClipPosition:v,orthoZoomedClipPosition:g,orthographicClipPosition:E}},Mf=({positionClipZ:t,fogBoundaryClipZ:e,distance:n})=>{const r=O(1).sub(Kt(t,O(1),e));return M(r,O(0),en(O(400),O(800),n))},Of=(t,e)=>{const n=t.r.add(t.g).add(t.b).div(3);return M(t,n.toVec3(),e)},kf=t=>{const e=t.add(1).bitAnd(255).toFloat().div(255),n=t.add(1).bitAnd(65280).shiftRight(8).toFloat().div(255),r=t.add(1).bitAnd(16711680).shiftRight(16).toFloat().div(255);return H(e,n,r,1)},da=t=>{const e=nn,{fixedProjection:n,fixedView:r,distance:i}=cn(t),{selectedIndex:o,selectedColor:a,defaultFogBoundaryClipZ:s,nodeFog:l}=Pt(t),u=xe(t),c=u.getNodeProperties("positionInitial"),f=u.getNodeProperties("positionTarget"),p=c.element(e).sub(f.element(e).mul(0));u.getNodeProperties("colorInitial");const d=u.getNodeProperties("colorTarget");d.element(e).sub(d.element(e).mul(0));const w=u.getNodeProperties("sizeInitial"),m=u.getNodeProperties("sizeTarget"),b=w.element(e).sub(m.element(e).mul(0)),v=u.getNodeProperties("emphasisInitial"),h=u.getNodeProperties("emphasisTarget"),g=v.element(e).sub(h.element(e).mul(0)),S=o.greaterThan(-1).not().select(ge(g),g),x=u.getNodeProperties("colorTarget"),E=e.equal(o),N=b.mul(Br).mul(M(.5,1,g)),F=tn(N.mul(1.1),.05),te=ts(t,{nodePosition:p,scale:N}),oe=ts(t,{nodePosition:p,scale:F});H(oe.orthographicClipPosition.xyz,oe.orthographicClipPosition.w.mul(1.01)),r.mul(n).mul(el).normalize();let ve=x.element(e);c.element(o),zr(c.element(e));let ne=vi(Mf({positionClipZ:te.globalClipPosition.z,fogBoundaryClipZ:s,distance:i}),ge(E.toFloat()));ne=vi(ne,ge(S)),ne=M(0,ne,l);let C=ve.w;C=M(.1,1,S);let A=ve.xyz.mul(M(1,.5,ne));A=Of(A,tn(ge(.2).mul(ne),ge(S))),ve=H(A,C);const I=M(ve,a,E.toFloat()),k=new tl().load(lf);return{graphNodeMaterial:new nl({vertexNode:te.orthographicClipPosition,matcap:k,colorNode:I,transparent:!0}),graphNodePickerMaterial:new Os({vertexNode:oe.orthographicClipPosition,colorNode:kf(e),depthWrite:!0})}},ns=t=>{const e=xe(t),n=nn,r=e.getEdgePairs("positionInitial"),i=e.getEdgePairs("positionTarget"),o=e.getEdgePairs("sizeInitial"),a=e.getEdgePairs("sizeTarget"),s=e.getEdgePairs("colorInitial"),l=e.getEdgePairs("colorTarget");e.getEdgePairs("emphasisInitial");const u=e.getEdgePairs("emphasisTarget");return{sourcePosition:r.source.element(n).add(i.source.element(n).mul(0)).toVar("srcPosition"),targetPosition:r.target.element(n).add(i.target.element(n).mul(0)).toVar("tgtPosition"),sourceColor:s.source.element(n).sub(l.source.element(n).mul(0)).toVar("srcColor"),targetColor:s.target.element(n).sub(l.target.element(n).mul(0)).toVar("tgtColor"),sourceSize:o.source.element(n).sub(a.source.element(n).mul(0)).mul(Br).toVar("srcSize"),targetSize:o.target.element(n).sub(a.target.element(n).mul(0)).mul(Br).toVar("tgtSize"),sourceEmphasis:u.source.element(n).x.toVar("srcEmphasis"),targetEmphasis:u.target.element(n).y.toVar("tgtEmphasis"),edgeIndices:e.getEdgeIndices().element(n).toVar("edgeIndices")}},zf=({nodePosition:t,vertexPosition:e,edgeDirection:n,scale:r,flatness:i,globalView:o,globalProjection:a,globalScale:s,edgeScale:l})=>{const u=ks(n),c=dt(u.y.negate(),u.x).toVar("edgePerpendicular").mul(r).mul(s).mul(l).div(3),f=a.toVar("projection").mul(o.toVar("view")).mul(H(t,1)).toVar("position"),p=f.div(f.w),d=H(f.xy.add(e.y.mul(c)),f.zw),m=p.add(H(e.y.mul(c),0,0)).mul(f.w);return M(d,m,i)},Rf=t=>{const{globalProjection:e,globalView:n,distance:r}=cn(t),{selectedIndex:i,selectedColor:o,mousePosition:a,hoveringIndex:s,edgeFrequency:l,edgePulseSpeed:u,edgeWaveSpeed:c,time:f,devicePixelRatio:p,nodeDepthTexture:d,globalScale:w,edgeScale:m,edgeOvershoot:b,defaultFogBoundaryClipZ:v,edgeFog:h,selectedEdgeColor:g}=Pt(t),y=rl("segmentOffset","vec3");let{sourcePosition:S,targetPosition:x,sourceColor:E,targetColor:N,sourceSize:F,targetSize:te,sourceEmphasis:oe,targetEmphasis:ve,edgeIndices:ne}=ns(t);const A=Ht(y.y.mul(b),y.x,y.z).add(Ht(b.mul(.5),0,0)).toVar("segmentPosition"),I=A.x.toVar("isSource"),k=ge(I).toVar("isTarget"),B=A.toVar("vertexOffset"),ye=S.mul(I).add(x.mul(k)).toVar("nodePosition"),q=e.toVar("projection").mul(n.toVar("view")).mul(H(S,1)).toVar("sourcePositionClip"),V=e.toVar("projection").mul(n.toVar("view")).mul(H(x,1)).toVar("targetPositionClip"),D=ks(V.xyz.div(V.w).sub(q.xyz.div(q.w))).xy.toVar("edgeDirection"),W=F.mul(I).add(te.mul(k)).mul(.4).toVar("size"),G=O(1).toVar("flatness"),Se=zf({nodePosition:ye,vertexPosition:B,edgeDirection:D,scale:W,flatness:G,globalView:n,globalProjection:e,globalScale:w,edgeScale:m}).toVar("positionClip");let be=E.mul(I).add(N.mul(k)).toVar("color");const $e=ne.x,_e=ne.y,Ue=yi(i,$e).toFloat(),Be=yi(i,_e).toFloat(),At=Ue.mul(I).add(Be.mul(k));tn(Ue,Be).toFloat();const yn=O(il(i,-1)).toVar("isAnySelected"),Ge=tn(oe,ve).toVar("emphasis"),Ct=At;let bn=be.xyz,Me=O(1);Me=Me.mul(M(.4,1,M(1,Ge,yn))),Me=Me.mul(M(1,M(.3,1,Ge),en(400,1200,r))),be=H(bn,Me);const Ke=jf(Se.z,v.div(2)).toVar("fog"),wn=Z(be);Z(Ke),Z(Ge),Z(W),Z(k);const ka=Z(q.xy.div(q.w).toVar("sourcePosition2DNDC")),za=V.xy.div(V.w).toVar("targetPosition2DNDC"),xn=Z(ka.reflect(dt(0,1)).add(dt(1,1)).mul(.5).mul(bi)),Ra=Z(za.reflect(dt(0,1)).add(dt(1,1)).mul(.5).mul(bi)),hi=Z(zr(x.sub(S))),It=Z(zr(Ra.sub(xn)));Z(B.y);const pi=Z(A.y),ja=()=>{const gi=wi(xn,xi).div(It),mi=k;let Nt=wn,Pe=Nt.w.mul(M(Kt(pi,O(2).mul(ge(Ke)),1),1,Ke));ns(t);const Va=It.mul(l).mul(.1),La=O(4).mul(c).div(It),qa=_r(gi.sub(f.mul(La)),Va),Fa=hi.div(4).mul(l),Da=O(20).div(hi).mul(u),Sn=Ms(gt(_r(gi.sub(f.mul(Da)),1),It.div(2)),0,1);let Tt=Nt.xyz;Tt=M(Nt.xyz,Ht(1,1,0),M(0,Sn,.1)),Pe=Nt.w.mul(M(1,qa,ge(Sn))),Pe=Pe.mul(Kt(pi,1,Sn.mul(M(.2,.4,Ge)).mul(_r(mi,Fa)).add(.6))),Pe=Pe.mul(M(.4,1,Ct)),Pe=Pe.mul(Kt(mi.sub(.5),2,b));const Wa=wi(xi,xn),Ha=O(100);return en(Ha,O(0),Wa),Tt=M(Tt,o.xyz,At),H(Tt,Pe)};return new Os({vertexNode:Se,colorNode:ja(),depthTest:!1,transparent:!0})},jf=(t,e)=>en(0,1,t.sub(e).div(e)),_r=(t,e)=>gt(ol(t.mul(e).mul(Math.PI)),2),Vf=hn((t,e)=>{const n=new ln,r=new Le(n,e);return oi(t,r),r}),rs=hn(t=>{const{graphNodeMaterial:e,graphNodePickerMaterial:n}=da(t),r=new ln,i=new Le(r,e),o=X(t)._nodeGeometryBuffer||ii("box");oi(o,i);const a=new Le(r,n);return{mesh:i,pickerMesh:a}},{dispose:function(t,e,n){console.debug("dispose node visualizer mesh",t)}}),ii=t=>{let e;try{return t=="sphere"?e=new sl(1,32,32):t=="cone"?e=new al(1,2,128):t=="icosahedron"?e=new zs(1.5,0):t==="box"?e=new ll(1,1,1):t==="torusKnot"&&(e=new ul(1,.3,128,64,2,3)),e.computeVertexNormals(),e.computeBoundingSphere(),e}catch(n){return console.warn("Error setting node geometry:",n),null}},oi=(t,e)=>{e.geometry.setAttribute("position",t.attributes.position),e.geometry.setAttribute("normal",t.attributes.normal),e.geometry.setIndex(t.index),e.material.needsUpdate=!0},Lf=(t,e)=>{const{scene:n}=me(t);n.nodeMeshes.forEach(i=>{on(e,i)});const r=qf(t);on(e,r)},on=(t,e)=>{e.geometry.instanceCount=t},ha=T.infinite(t=>{const e=new cl(.5,.5,1,4,4,!0),n=new ln;return n.setAttribute("segmentOffset",e.attributes.position),n.setIndex(e.index),new Le(n,Rf(t))}),qf=t=>{const{pickerScene:e}=me(t);return e.children[0]},Gr=hn(async t=>{const{nodes:e}=await U(t),{scene:n,pickerScene:r,renderer:i,camera:o}=me(t),{graphNodeMaterial:a,graphNodePickerMaterial:s}=da(t),l=X(t)._nodeGeometryBuffer||ii("box"),u=Vf(l,a);on(e.length,u),u.material.needsUpdate=!0;const c=Array.from(n.nodeMeshes);for(await i.compileAsync(n,o,u),n.nodeMeshes.add(u),n.add(u),c.forEach(d=>{n.remove(d),n.nodeMeshes.delete(d)});r.children.length>0;)r.remove(r.children[0]);u.geometry.computeBoundingSphere();const f=new zs(u.geometry.boundingSphere.radius,1),p=new Le(new ln,s);oi(f,p),p.material.needsUpdate=!0,on(e.length,p),await i.compileAsync(p,o),await r.add(p)}),Ff=T.infinite(t=>{const{canvas:e}=K(t),n=new fl({canvas:e,forceWebGL:!0});return n.setClearColor(new Rs("#000000"),0),n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(window.devicePixelRatio),n}),me=hn(t=>{const e=new Mt,n=new Mt,r=new Mt,i=new Mt;i.add(r),i.add(e);const o=new dl(75,window.innerWidth/window.innerHeight,.5,1e3);o.position.z=10;const a=new hl(16777215,2);e.add(a);const s=Ff(t),l=ha(t);e.add(l);const u=rs(t).mesh;e.add(u),e.nodeMeshes=new Set([u]);const c=rs(t).pickerMesh;return r.add(c),{scene:e,depthScene:n,pickerScene:r,camera:o,renderer:s,nodeVisualizerMesh:u,edgeVisualizerMesh:l,nodePickerMesh:c,debugPickerScene:i}},{}),si=T.infinite(t=>{const{canvas:e}=K(t);return new js(e.width,e.height,{stencilBuffer:!1})}),Df=T.infinite(t=>{const{canvas:e}=K(t);return new js(e.width,e.height,{depthTexture:new pl(e.width,e.height),depthBuffer:!0,stencilBuffer:!1})}),pa=new ku({saturation:.7,lightness:.6}),ga=t=>t.replace(/^(https?:\/\/)?(www\.)?([a-z0-9-]+\.)+[a-z0-9-]+/i,"").replace(/\/$/,"").replace(/^\//,"").replace(/[^A-Za-z0-9\.]/gi,"-").replace(/-+/g,"-").replace(/^package-/,"").replace(/-v-/,"-"),xe=T.infinite(t=>{const e=gl(t);return window.bufferState=e,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"emphasis",type:"float"},{name:"size",type:"float"}].forEach(({name:r,type:i})=>{const o=new Float32Array(0),a=new Float32Array(0);e.setNodeProperties(`${r}Initial`,i,o),e.setNodeProperties(`${r}Target`,i,a)}),e}),Wf=async(t,e,n=!0)=>{const{set:r}=un(t,"graphData");r(e),(await ya(t,e)).setData(e);const{nodes:o,linkIndexPairs:a}=e,s=xe(t),l=n?s.getNodeCount():0;n&&s.getEdgeCount(),s.setNodeCount(o.length),s.setEdges(a);const u=40,c=()=>[Math.random()*u-u/2,Math.random()*u-u/2,Math.random()*u-u/2],f=new Float32Array(o.length*3);if(n){const m=s.getNodeProperties("positionTarget","vec3").value.array;f.set(m.subarray(0,l*3));for(let b=l;b<o.length;b++){const v=c();f.set(v,b*3)}}else for(let m=0;m<o.length;m++){const b=c();f.set(b,m*3)}s.setNodeProperties("positionInitial","vec3",f),s.setNodeProperties("positionTarget","vec3",f);const p=new Float32Array(o.length*4);if(n){const m=s.getNodeProperties("colorTarget","vec4").value.array;p.set(m.subarray(0,l*4));for(let b=l;b<o.length;b++)p.set(o[b].color,b*4)}else for(let m=0;m<o.length;m++)p.set(o[m].color,m*4);s.setNodeProperties("colorInitial","vec4",p),s.setNodeProperties("colorTarget","vec4",p);const d=new Float32Array(o.length);if(n){const m=s.getNodeProperties("sizeTarget","float").value.array;d.set(m.subarray(0,l));for(let b=l;b<o.length;b++)d[b]=o[b].size}else for(let m=0;m<o.length;m++)d[m]=o[m].size;s.setNodeProperties("sizeInitial","float",d),s.setNodeProperties("sizeTarget","float",d);const w=new Float32Array(o.length);if(n){const m=s.getNodeProperties("emphasisTarget","float").value.array;w.set(m.subarray(0,l)),w.fill(0,l)}else w.fill(0);s.setNodeProperties("emphasisTarget","float",w),Lf(t,o.length),ha(t).geometry.instanceCount=a.length,Uf(t,e)},U=async t=>await un(t,"graphData").get(),ma=t=>({index:t,id:`node://${t}`,size:1,color:[...pa.rgb(String(t)).map(e=>e/255),1],navId:ga(`node-${t}`)}),va=t=>()=>{const e=Math.floor(Math.random()*t.length),n=Math.floor(Math.random()*t.length);return{sourceIndex:e,targetIndex:n,source:t[e],target:t[n]}},Jd=(t,e,n=0)=>{const r=[...Array(t).keys()].map(l=>l+n).map(ma),i=[...Array(e).keys()].map(va(r)),o=i.map(({sourceIndex:l,targetIndex:u})=>[l,u]),a=rn(r.map(l=>[l.navId,l])),s=rn(r.map(l=>[l.id,l]));return{nodes:r,links:i,linkIndexPairs:o,nodesByNavId:a,nodesById:s}},eh=(t,{nodes:e,nodesByNavId:n,nodesById:r})=>{const i=e.length,o=[...Array(t).keys()].map(a=>a+i).map(ma);e.push(...o),o.forEach(a=>{n[a.navId]=a,r[a.id]=a})},th=(t,{nodes:e,links:n,linkIndexPairs:r})=>{const i=[...Array(t).keys()].map(va(e));n.push(...i),r.push(...i.map(({sourceIndex:o,targetIndex:a})=>[o,a]))},nh=({nodes:t,links:e})=>{const n=t.map(({id:s},l)=>({index:l,id:`node://${s}`,size:1,color:[...pa.rgb(String(s)).map(u=>u/255),1],navId:ga(`node-${s}`)})),r=e.map(s=>{const l=n.findIndex(c=>c.id===`node://${s.source}`),u=n.findIndex(c=>c.id===`node://${s.target}`);return{sourceIndex:l,targetIndex:u,source:n[l],target:n[u]}}),i=r.map(({sourceIndex:s,targetIndex:l})=>[s,l]),o=rn(n.map(s=>[s.navId,s])),a=rn(n.map(s=>[s.id,s]));return{nodes:n,links:r,linkIndexPairs:i,nodesByNavId:o,nodesById:a}},Hf=t=>un(t,"graphDbPrepared"),Uf=async(t,e)=>{const{set:n}=un(t,"graphDbPrepared"),r=await Vr(t).buildGraph(e);return n(!0),r};let Ft;const ya=T.infinite(async(t,e)=>{const n=(await Au(t)).D3ForceLayout;return Ft=await new n(e),Ft.start(),Ft},{onExpire:()=>{Ft.stop()},transformArgs:([t,e])=>[t]}),is=t=>xe(t).getNodeProperties("positionTarget","vec3").value.array,Bf=async t=>{const e=await U(t);(await ya(t,e)).getPositions(Qt(r=>{r.length>0&&xe(t).setNodeProperties("positionTarget","vec3",r)}))},pn=(t,e)=>{const n=is(t)?is(t):[],r=e.index;return[n[r*3],n[r*3+1],n[r*3+2]]};/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Pr;const sn=window,it=sn.trustedTypes,os=it?it.createPolicy("lit-html",{createHTML:t=>t}):void 0,Kr="$lit$",Ie=`lit$${(Math.random()+"").slice(9)}$`,ba="?"+Ie,Gf=`<${ba}>`,qe=document,wt=()=>qe.createComment(""),xt=t=>t===null||typeof t!="object"&&typeof t!="function",wa=Array.isArray,Kf=t=>wa(t)||typeof t?.[Symbol.iterator]=="function",Er=`[ 	
\f\r]`,ct=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,ss=/-->/g,as=/>/g,Oe=RegExp(`>|${Er}(?:([^\\s"'>=/]+)(${Er}*=${Er}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),ls=/'/g,us=/"/g,xa=/^(?:script|style|textarea|title)$/i,Xf=t=>(e,...n)=>({_$litType$:t,strings:e,values:n}),Zf=Xf(1),ot=Symbol.for("lit-noChange"),j=Symbol.for("lit-nothing"),cs=new WeakMap,je=qe.createTreeWalker(qe,129,null,!1);function Sa(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return os!==void 0?os.createHTML(e):e}const Yf=(t,e)=>{const n=t.length-1,r=[];let i,o=e===2?"<svg>":"",a=ct;for(let s=0;s<n;s++){const l=t[s];let u,c,f=-1,p=0;for(;p<l.length&&(a.lastIndex=p,c=a.exec(l),c!==null);)p=a.lastIndex,a===ct?c[1]==="!--"?a=ss:c[1]!==void 0?a=as:c[2]!==void 0?(xa.test(c[2])&&(i=RegExp("</"+c[2],"g")),a=Oe):c[3]!==void 0&&(a=Oe):a===Oe?c[0]===">"?(a=i??ct,f=-1):c[1]===void 0?f=-2:(f=a.lastIndex-c[2].length,u=c[1],a=c[3]===void 0?Oe:c[3]==='"'?us:ls):a===us||a===ls?a=Oe:a===ss||a===as?a=ct:(a=Oe,i=void 0);const d=a===Oe&&t[s+1].startsWith("/>")?" ":"";o+=a===ct?l+Gf:f>=0?(r.push(u),l.slice(0,f)+Kr+l.slice(f)+Ie+d):l+Ie+(f===-2?(r.push(void 0),s):d)}return[Sa(t,o+(t[n]||"<?>")+(e===2?"</svg>":"")),r]};class St{constructor({strings:e,_$litType$:n},r){let i;this.parts=[];let o=0,a=0;const s=e.length-1,l=this.parts,[u,c]=Yf(e,n);if(this.el=St.createElement(u,r),je.currentNode=this.el.content,n===2){const f=this.el.content,p=f.firstChild;p.remove(),f.append(...p.childNodes)}for(;(i=je.nextNode())!==null&&l.length<s;){if(i.nodeType===1){if(i.hasAttributes()){const f=[];for(const p of i.getAttributeNames())if(p.endsWith(Kr)||p.startsWith(Ie)){const d=c[a++];if(f.push(p),d!==void 0){const w=i.getAttribute(d.toLowerCase()+Kr).split(Ie),m=/([.?@])?(.*)/.exec(d);l.push({type:1,index:o,name:m[2],strings:w,ctor:m[1]==="."?Jf:m[1]==="?"?td:m[1]==="@"?nd:gn})}else l.push({type:6,index:o})}for(const p of f)i.removeAttribute(p)}if(xa.test(i.tagName)){const f=i.textContent.split(Ie),p=f.length-1;if(p>0){i.textContent=it?it.emptyScript:"";for(let d=0;d<p;d++)i.append(f[d],wt()),je.nextNode(),l.push({type:2,index:++o});i.append(f[p],wt())}}}else if(i.nodeType===8)if(i.data===ba)l.push({type:2,index:o});else{let f=-1;for(;(f=i.data.indexOf(Ie,f+1))!==-1;)l.push({type:7,index:o}),f+=Ie.length-1}o++}}static createElement(e,n){const r=qe.createElement("template");return r.innerHTML=e,r}}function st(t,e,n=t,r){var i,o,a,s;if(e===ot)return e;let l=r!==void 0?(i=n._$Co)===null||i===void 0?void 0:i[r]:n._$Cl;const u=xt(e)?void 0:e._$litDirective$;return l?.constructor!==u&&((o=l?._$AO)===null||o===void 0||o.call(l,!1),u===void 0?l=void 0:(l=new u(t),l._$AT(t,n,r)),r!==void 0?((a=(s=n)._$Co)!==null&&a!==void 0?a:s._$Co=[])[r]=l:n._$Cl=l),l!==void 0&&(e=st(t,l._$AS(t,e.values),l,r)),e}class Qf{constructor(e,n){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=n}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var n;const{el:{content:r},parts:i}=this._$AD,o=((n=e?.creationScope)!==null&&n!==void 0?n:qe).importNode(r,!0);je.currentNode=o;let a=je.nextNode(),s=0,l=0,u=i[0];for(;u!==void 0;){if(s===u.index){let c;u.type===2?c=new Et(a,a.nextSibling,this,e):u.type===1?c=new u.ctor(a,u.name,u.strings,this,e):u.type===6&&(c=new rd(a,this,e)),this._$AV.push(c),u=i[++l]}s!==u?.index&&(a=je.nextNode(),s++)}return je.currentNode=qe,o}v(e){let n=0;for(const r of this._$AV)r!==void 0&&(r.strings!==void 0?(r._$AI(e,r,n),n+=r.strings.length-2):r._$AI(e[n])),n++}}class Et{constructor(e,n,r,i){var o;this.type=2,this._$AH=j,this._$AN=void 0,this._$AA=e,this._$AB=n,this._$AM=r,this.options=i,this._$Cp=(o=i?.isConnected)===null||o===void 0||o}get _$AU(){var e,n;return(n=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&n!==void 0?n:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const n=this._$AM;return n!==void 0&&e?.nodeType===11&&(e=n.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,n=this){e=st(this,e,n),xt(e)?e===j||e==null||e===""?(this._$AH!==j&&this._$AR(),this._$AH=j):e!==this._$AH&&e!==ot&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):Kf(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==j&&xt(this._$AH)?this._$AA.nextSibling.data=e:this.$(qe.createTextNode(e)),this._$AH=e}g(e){var n;const{values:r,_$litType$:i}=e,o=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=St.createElement(Sa(i.h,i.h[0]),this.options)),i);if(((n=this._$AH)===null||n===void 0?void 0:n._$AD)===o)this._$AH.v(r);else{const a=new Qf(o,this),s=a.u(this.options);a.v(r),this.$(s),this._$AH=a}}_$AC(e){let n=cs.get(e.strings);return n===void 0&&cs.set(e.strings,n=new St(e)),n}T(e){wa(this._$AH)||(this._$AH=[],this._$AR());const n=this._$AH;let r,i=0;for(const o of e)i===n.length?n.push(r=new Et(this.k(wt()),this.k(wt()),this,this.options)):r=n[i],r._$AI(o),i++;i<n.length&&(this._$AR(r&&r._$AB.nextSibling,i),n.length=i)}_$AR(e=this._$AA.nextSibling,n){var r;for((r=this._$AP)===null||r===void 0||r.call(this,!1,!0,n);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){var n;this._$AM===void 0&&(this._$Cp=e,(n=this._$AP)===null||n===void 0||n.call(this,e))}}class gn{constructor(e,n,r,i,o){this.type=1,this._$AH=j,this._$AN=void 0,this.element=e,this.name=n,this._$AM=i,this.options=o,r.length>2||r[0]!==""||r[1]!==""?(this._$AH=Array(r.length-1).fill(new String),this.strings=r):this._$AH=j}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,n=this,r,i){const o=this.strings;let a=!1;if(o===void 0)e=st(this,e,n,0),a=!xt(e)||e!==this._$AH&&e!==ot,a&&(this._$AH=e);else{const s=e;let l,u;for(e=o[0],l=0;l<o.length-1;l++)u=st(this,s[r+l],n,l),u===ot&&(u=this._$AH[l]),a||(a=!xt(u)||u!==this._$AH[l]),u===j?e=j:e!==j&&(e+=(u??"")+o[l+1]),this._$AH[l]=u}a&&!i&&this.j(e)}j(e){e===j?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class Jf extends gn{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===j?void 0:e}}const ed=it?it.emptyScript:"";class td extends gn{constructor(){super(...arguments),this.type=4}j(e){e&&e!==j?this.element.setAttribute(this.name,ed):this.element.removeAttribute(this.name)}}class nd extends gn{constructor(e,n,r,i,o){super(e,n,r,i,o),this.type=5}_$AI(e,n=this){var r;if((e=(r=st(this,e,n,0))!==null&&r!==void 0?r:j)===ot)return;const i=this._$AH,o=e===j&&i!==j||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==j&&(i===j||o);o&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var n,r;typeof this._$AH=="function"?this._$AH.call((r=(n=this.options)===null||n===void 0?void 0:n.host)!==null&&r!==void 0?r:this.element,e):this._$AH.handleEvent(e)}}class rd{constructor(e,n,r){this.element=e,this.type=6,this._$AN=void 0,this._$AM=n,this.options=r}get _$AU(){return this._$AM._$AU}_$AI(e){st(this,e)}}const fs=sn.litHtmlPolyfillSupport;fs?.(St,Et),((Pr=sn.litHtmlVersions)!==null&&Pr!==void 0?Pr:sn.litHtmlVersions=[]).push("2.8.0");const $a=(t,e,n)=>{var r,i;const o=(r=n?.renderBefore)!==null&&r!==void 0?r:e;let a=o._$litPart$;if(a===void 0){const s=(i=n?.renderBefore)!==null&&i!==void 0?i:null;o._$litPart$=a=new Et(e.insertBefore(wt(),s),s,void 0,n??{})}return a._$AI(t),a},id=(t,e)=>{const{canvas:n}=K(t),r=n.getBoundingClientRect(),i=(e.clientX-r.left)/r.width,o=(e.clientY-r.top)/r.height;return{x:i*2-1,y:-(o*2-1)}},Xt=(t,...e)=>ee(t).getGlobalCamera(t,...e),od=(t,...e)=>ee(t).updateCameras(t,...e),sd=(t,...e)=>ee(t).getGlobalCameraParams(t,...e),_a=(t,...e)=>ee(t).setCameraCenter(t,...e),ds=(t,...e)=>ee(t).setCameraDistance(t,...e),hs=(t,...e)=>ee(t).zoomGlobalCamera(t,...e),ps=(t,...e)=>ee(t).panGlobalCamera(t,...e),gs=(t,...e)=>ee(t).startZooming(t,...e),ad=(t,...e)=>ee(t).stopZooming(t,...e),ms=(t,...e)=>ee(t).startPanning(t,...e),vs=(t,...e)=>ee(t).stopPanning(t,...e),ld=(t,...e)=>ee(t).computeScreenPosition(t,...e),Xr=()=>window.matchMedia("(pointer:fine)").matches,ys=async t=>{const e=X(t);ad(t);const n=bt(t),r=(await sd(t)).distance;n>-1?(e.focusedZoom=Math.min(r,e.zoomBoundary),console.debug("setting selected zoom",e.focusedZoom)):(e.unfocusedZoom=Math.max(r,e.zoomBoundary),console.debug("setting deselected zoom",e.unfocusedZoom))},$t=t=>J(t,"pointerPositionInfo",()=>({x:0,y:0,canvasX:0,canvasY:0,pickerX:0,pickerY:0})).get(),bs=new Uint8Array(4).fill(0);let pt=0,nt=0;const Ar=()=>{pt++},ud=async(t,e)=>{const{nodes:n}=await U(t),r=n[e];X(t).dispatchEvent(new CustomEvent("tap",{detail:{tappedIndex:e,info:r}}))},Pa=t=>[$t(t).x,$t(t).y],cd=t=>[$t(t).pickerX,$t(t).pickerY],Zt=ml((t,{x:e,y:n})=>{const{canvas:r}=K(t),i=$t(t);i.x=e,i.y=n,i.canvasX=(e+1)/2*r.width,i.canvasY=(n+1)/2*r.height;const o=window.devicePixelRatio||1;i.pickerX=Math.floor(i.canvasX/o),i.pickerY=Math.floor(i.canvasY/o)}),mn=t=>J(t,"currentlyHoveringIndex",()=>-1).get(),fd=async t=>{const{nodes:e}=await U(t),n=mn(t);return e[n]},dd=T.infinite(t=>{const e=t.context,{canvas:n}=K(e);Bt(n).on("touchmove",Zt(e)).on("mousemove",Zt(e)),Bt(n).on("mousemove",()=>{}),Bt(n).on("touchmove",Ar).on("pinchmove",Ar).on("mousemove",Ar),n.addEventListener("pointerdown",async r=>{console.debug("pointer down");const i=async([s,l])=>{console.debug("pointer clickHandler",s,l);const u=nt>.03||pt>5;if(console.debug("was drag",u,nt,pt),!u){const c=mn(e);ud(e,c).catch(f=>{console.error("Error in notifyTapped:",f)})}},o=new Promise((s,l)=>{n.addEventListener("pointerup",s,{once:!0}),setTimeout(()=>l("pointer event timed out after 100ms"),200)});pt=0,nt=0;const a=[o];Xr()&&a.push(vd(e)),Promise.all(a).then(i).catch(s=>console.debug(s)),setTimeout(()=>{nt>.03||pt>5||Aa(e)()},5),Zt(e,id(e,r))}),n.addEventListener("selected",r=>{}),n.addEventListener("hover",async r=>{const{nodes:i}=await U(e),o=r.detail.wasHoveredIndex;o>-1&&i[o];const a=r.detail.nowHoveredIndex,s=a>-1?i[a]:null;bt(e)>-1&&i[bt(e)],s?J(e,"currentlyHoveringIndex").set(s?.index!=null?s.index:-1):J(e,"currentlyHoveringIndex").set(-1)})}),Dt=Math.PI/3,hd=t=>{const{canvas:e}=K(t);e.addEventListener("wheel",n=>{const r=Math.exp(n.deltaY/e.clientHeight*2)-1,i=Math.sign(r);gs(t),hs(t,0,0,i*Math.min(Math.abs(r),.06)),n.preventDefault(),ys(t)},{passive:!1}),Bt(e).on("mousemove",function(n){!n.active||n.buttons!==1||(nt+=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2)),n.mods.shift?(ms(t),ps(t,n.dx,n.dy)):n.mods.meta?Xt(t).pivot(n.dx,n.dy):(Xt(t).rotate(-n.dx*Dt,-n.dy*Dt),vs(t)),n.originalEvent.preventDefault())}).on("touchmove",function(n){Zt(n),n.active&&(nt+=Math.sqrt(Math.pow(n.dx,2)+Math.pow(n.dy,2)),Xt(t).rotate(-n.dx*Dt,-n.dy*Dt))}).on("pinchmove",function(n){n.active&&(ms(t),gs(t),hs(t,0,0,1-n.zoomx),ps(t,n.dx,n.dy))}).on("pinchstart",n=>n.originalEvent.preventDefault()).on("pinchend",()=>{vs(t),ys(t)})},Ea=T.infinite(t=>({lastOverIndex:-1,pickerTime:0,pickerSync:null,pickerFailures:0,pickerGuardFailed:!1})),pd=t=>t[0]+t[1]*256+t[2]*256*256-1,gd=t=>{const e=Ea(t),n=K(t).gl,r=()=>n.fenceSync(n.SYNC_GPU_COMMANDS_COMPLETE,0);return e.pickerSync?n?.clientWaitSync(e.pickerSync,0,0)===n?.CONDITION_SATISFIED?(n.deleteSync(e.pickerSync),e.pickerSync=r(),!0):!1:(e.pickerSync=r(),!1)},Aa=T.infinite(t=>async()=>{const e=Ea(t),n=gd(t),{canvas:r}=K(t),i=K(t).gl;if(e.pickerFailures>10&&(e.pickerGuardFailed=!0,console.warn("picker guard failed")),!n&&!e.pickerGuardFailed)console.debug("not ready to read picker pixel yet"),e.pickerFailures+=1;else{e.pickerFailures=0;const{renderer:o}=me(t),a=cd(t),s=si(t);a[0]>=0&&a[0]<s.width&&a[1]>=0&&a[1]<s.height&&await o.readRenderTargetPixelsAsync(s,...a,1,1).then(l=>{i.flush();for(let c=0;c<4;c++)bs[c]=l[c];const u=pd(bs);return e.lastOverIndex=u,u}).then(l=>{r.dispatchEvent(new CustomEvent("hover",{detail:{wasHoveredIndex:e.lastOverIndex,nowHoveredIndex:l}})),console.debug("hover",l,e.lastOverIndex),l>-1&&(r.dispatchEvent(new CustomEvent("hoveron",{detail:{wasHoveredIndex:e.lastOverIndex,nowHoveredIndex:l}})),console.debug("hoveron",l,e.lastOverIndex))})}}),md=t=>jr(Aa(t),1e3),vd=async t=>(console.debug("waiting for hover event"),new Promise(e=>{const n=K(t).canvas,r=i=>{console.debug("got hover event",i.detail),e(i.detail)};n.addEventListener("hover",r,{once:!0})})),ai=T.deep((t,{classes:e,htmlTemplate:n,applyScreenPositionStyle:r}={})=>{const i=X(t);r=r||((c,f)=>{f.style.left=`${c[0]}vw`,f.style.bottom=`${c[1]}vh`});const o=document.createElement("div");o?.classList.add("cursor"),e?.forEach(c=>o?.classList.add(c)),i?.shadowRoot?.appendChild(o);const a=c=>{r(c,o)},s=c=>{const f=[(c[0]+1)/2*100,(c[1]+1)/2*100];a(f)},l=jr(async c=>{const f=pn(t,c),p=await ld(t,f);s(p)},1e3/10),u=jr(async c=>{c?(await l(c),o.classList.add("focused")):o.classList.remove("focused"),c&&n&&$a(n(c),o)},50);return{element:o,alignToScreenPosition:a,alignToNDCPosition:s,alignToNode:l,highlightNode:u,destroy:()=>o.remove()}}),yd=T.infinite(t=>ai(t,{classes:["selected-cursor"]})),bd=T.infinite(t=>ai(t,{classes:["hovered-tooltip"],htmlTemplate:e=>Zf`
      <div class="node-name">${e.data?.name}</div>
    `,applyScreenPositionStyle(e,n){n.style.left=`calc(min(${e[0]}vw, calc(100vw - 15em)))`,n.style.bottom=`${e[1]}vh`}})),wd=T.infinite(t=>ai(t,{classes:["hovered-cursor"]}));var li={exports:{}};function xd(t,e){var n=e&&e.cache?e.cache:Ad,r=e&&e.serializer?e.serializer:Ed,i=e&&e.strategy?e.strategy:$d;return i(t,{cache:n,serializer:r})}function Sd(t){return t==null||typeof t=="number"||typeof t=="boolean"}function Ca(t,e,n,r){var i=Sd(r)?r:n(r),o=e.get(i);return typeof o>"u"&&(o=t.call(this,r),e.set(i,o)),o}function Ia(t,e,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),o=e.get(i);return typeof o>"u"&&(o=t.apply(this,r),e.set(i,o)),o}function ui(t,e,n,r,i){return n.bind(e,t,r,i)}function $d(t,e){var n=t.length===1?Ca:Ia;return ui(t,this,n,e.cache.create(),e.serializer)}function _d(t,e){var n=Ia;return ui(t,this,n,e.cache.create(),e.serializer)}function Pd(t,e){var n=Ca;return ui(t,this,n,e.cache.create(),e.serializer)}function Ed(){return JSON.stringify(arguments)}function vn(){this.cache=Object.create(null)}vn.prototype.has=function(t){return t in this.cache};vn.prototype.get=function(t){return this.cache[t]};vn.prototype.set=function(t,e){this.cache[t]=e};var Ad={create:function(){return new vn}};li.exports=xd;li.exports.strategies={variadic:_d,monadic:Pd};var Cd=li.exports;const Id=Qr(Cd),Nd=Id((t,e)=>{const n=vl(()=>{for(const{current:i,target:o}of e){let a=i.element(nn),s=o.element(nn);a.assign(a.add(s.sub(a).mul(.05)))}}),r=e[0]?.target.value.count;return n().compute(r)},{serializer:([t,e])=>{let n=e;const r=xe(t);return n=JSON.stringify(e.flatMap(i=>[r.getNodeCount(),i?.target?.uuid,r.getEdgeCount(),i?.current?.uuid])),n}}),ke=async(t,e)=>{const{renderer:n}=me(t),r=Nd(t,e);me(t),await n.computeAsync(r)},Td=async t=>{const e=xe(t);Promise.all([ke(t,[{current:e.getNodeProperties("positionInitial"),target:e.getNodeProperties("positionTarget")},{current:e.getNodeProperties("sizeInitial"),target:e.getNodeProperties("sizeTarget")}]),ke(t,[{current:e.getNodeProperties("emphasisInitial"),target:e.getNodeProperties("emphasisTarget")}]),ke(t,[{current:e.getNodeProperties("colorInitial"),target:e.getNodeProperties("colorTarget")}]),ke(t,[{current:e.getEdgePairs("positionInitial").source,target:e.getEdgePairs("positionTarget").source},{current:e.getEdgePairs("positionInitial").target,target:e.getEdgePairs("positionTarget").target}]),ke(t,[{current:e.getEdgePairs("sizeInitial").source,target:e.getEdgePairs("sizeTarget").source},{current:e.getEdgePairs("sizeInitial").target,target:e.getEdgePairs("sizeTarget").target}]),ke(t,[{current:e.getEdgePairs("colorInitial").source,target:e.getEdgePairs("colorTarget").source},{current:e.getEdgePairs("colorInitial").target,target:e.getEdgePairs("colorTarget").target}]),ke(t,[{current:e.getEdgePairs("emphasisInitial").source,target:e.getEdgePairs("emphasisTarget").source},{current:e.getEdgePairs("emphasisInitial").target,target:e.getEdgePairs("emphasisTarget").target}])])},Md=t=>J(t,"togglePickerDebug",()=>!1);window.addEventListener("keydown",t=>{t.key,t.key});const ci=T.infinite(t=>{const e=X(t),n=window.devicePixelRatio||1,r=e.clientWidth,i=e.clientHeight,o=Math.floor(r*n),a=Math.floor(i*n);return{width:o,height:a,clientWidth:r,clientHeight:i}}),Od=(t,e=null)=>{const{set:n,get:r}=J(t,"canvas"),i=r();n(e?i||e:i||document.createElement("canvas"))},K=T.infinite(t=>{const e=J(t,"canvas").get(),n=e.getContext("webgl2",{powerPreference:"high-performance"});return n?console.debug("WebGL2 initialized"):console.error("WebGL2 failed to initialize"),{canvas:e,gl:n}}),kd=t=>{K(t);const{renderer:e,camera:n}=me(t),{width:r,height:i,clientWidth:o,clientHeight:a}=ci(t);X(t),e.setSize(o,a),n.aspect=o/a,si(t).setSize(o,a),Df(t).setSize(o,a),Xt(t).resize(r/i)},zd=t=>{Pt(t)},Na=async t=>{if(J(t,"visible").get()){Tf(t),Bf(t),If(t).then(u=>{yd(t).highlightNode(u)}),Xr()&&fd(t).then(u=>{bd(t).highlightNode(u),wd(t).highlightNode(u)});const{width:e,height:n}=ci(t);od(t,Pl(t),e,n),K(t);const{renderer:r,scene:i,camera:o,pickerScene:a,debugPickerScene:s}=me(t);Cf(t),Td(t);const l=Md(t).get();r.setRenderTarget(null),l?r.render(s,o):r.render(i,o),r.setRenderTarget(si(t)),r.render(a,o),Gr(t),Xr()&&await md(t)()}requestAnimationFrame(()=>Na(t))};var rt={},Rd=(t,e)=>{rt[t]??(rt[t]=[]),rt[t].push(e)},jd=(t,e)=>{var n;(n=rt[t])==null||n.splice(rt[t].indexOf(e),1)},ws=async(t,e,n)=>{for(const r of rt[t]??[])await r(e,n)},Cr=t=>t.length>1&&t.endsWith("/")?t.slice(0,-1):t,Vd=t=>{var e;const n=(e=t.match(/(:[^/]+)/g))==null?void 0:e.map(r=>r.substring(1));return n&&{keys:n,regExp:new RegExp("^"+t.replace(/(:[^/]+)/g,"([^/]+)")+"$")}},Ld=(t,e)=>Object.fromEntries(e.map((n,r)=>[n,t[r+1]])),Ta=[],et,qd=t=>{for(const e of Ta){const{pattern:n,regExp:r,keys:i}=e,o=r?t.match(r):n==="*"||n===t;if(o){const a=Array.isArray(o)?Ld(o,i):void 0;return{definition:e,params:a}}}},ft=async(t,e)=>{const n=qd(t),r=!!n,i=n?.params??{},o=et;et={path:t,params:i,matches:r,trigger:e},await ws("before-route",et,o),await n?.definition.action(i,et,o),await ws("route",et,o)},fi={get currentRoute(){return et},on:Rd,off:jd,start({handleInitial:t=!0}={}){const e=window.location.hash!=""&&window.location.hash;t&&ft(e||window.location.pathname||"/","init"),window.addEventListener("popstate",()=>ft(window.location.pathname,"popstate")),window.addEventListener("hashchange",()=>{ft(window.location.hash,"hashchange")})},route(t,e){const n=Cr(t),{regExp:r,keys:i=[]}=Vd(t)||{};Ta.push({pattern:n,action:e,regExp:r,keys:i})},push(t){window.history.pushState(null,"",Cr(t)),ft(t,"push")},replace(t){window.history.replaceState(null,"",Cr(t)),ft(t,"replace")}};fi.route("#-",()=>{console.debug("navigating to nothing")});fi.route("#node/:id",async(t,{trigger:e})=>{});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Yt=window,di=Yt.ShadowRoot&&(Yt.ShadyCSS===void 0||Yt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Ma=Symbol(),xs=new WeakMap;let Fd=class{constructor(e,n,r){if(this._$cssResult$=!0,r!==Ma)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=n}get styleSheet(){let e=this.o;const n=this.t;if(di&&e===void 0){const r=n!==void 0&&n.length===1;r&&(e=xs.get(n)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),r&&xs.set(n,e))}return e}toString(){return this.cssText}};const Dd=t=>new Fd(typeof t=="string"?t:t+"",void 0,Ma),Wd=(t,e)=>{di?t.adoptedStyleSheets=e.map(n=>n instanceof CSSStyleSheet?n:n.styleSheet):e.forEach(n=>{const r=document.createElement("style"),i=Yt.litNonce;i!==void 0&&r.setAttribute("nonce",i),r.textContent=n.cssText,t.appendChild(r)})},Ss=di?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let n="";for(const r of e.cssRules)n+=r.cssText;return Dd(n)})(t):t;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Ir;const an=window,$s=an.trustedTypes,Hd=$s?$s.emptyScript:"",_s=an.reactiveElementPolyfillSupport,Zr={toAttribute(t,e){switch(e){case Boolean:t=t?Hd:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=t!==null;break;case Number:n=t===null?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch{n=null}}return n}},Oa=(t,e)=>e!==t&&(e==e||t==t),Nr={attribute:!0,type:String,converter:Zr,reflect:!1,hasChanged:Oa},Yr="finalized";class tt extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this._$Eu()}static addInitializer(e){var n;this.finalize(),((n=this.h)!==null&&n!==void 0?n:this.h=[]).push(e)}static get observedAttributes(){this.finalize();const e=[];return this.elementProperties.forEach((n,r)=>{const i=this._$Ep(r,n);i!==void 0&&(this._$Ev.set(i,r),e.push(i))}),e}static createProperty(e,n=Nr){if(n.state&&(n.attribute=!1),this.finalize(),this.elementProperties.set(e,n),!n.noAccessor&&!this.prototype.hasOwnProperty(e)){const r=typeof e=="symbol"?Symbol():"__"+e,i=this.getPropertyDescriptor(e,r,n);i!==void 0&&Object.defineProperty(this.prototype,e,i)}}static getPropertyDescriptor(e,n,r){return{get(){return this[n]},set(i){const o=this[e];this[n]=i,this.requestUpdate(e,o,r)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)||Nr}static finalize(){if(this.hasOwnProperty(Yr))return!1;this[Yr]=!0;const e=Object.getPrototypeOf(this);if(e.finalize(),e.h!==void 0&&(this.h=[...e.h]),this.elementProperties=new Map(e.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const n=this.properties,r=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(const i of r)this.createProperty(i,n[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(e){const n=[];if(Array.isArray(e)){const r=new Set(e.flat(1/0).reverse());for(const i of r)n.unshift(Ss(i))}else e!==void 0&&n.push(Ss(e));return n}static _$Ep(e,n){const r=n.attribute;return r===!1?void 0:typeof r=="string"?r:typeof e=="string"?e.toLowerCase():void 0}_$Eu(){var e;this._$E_=new Promise(n=>this.enableUpdating=n),this._$AL=new Map,this._$Eg(),this.requestUpdate(),(e=this.constructor.h)===null||e===void 0||e.forEach(n=>n(this))}addController(e){var n,r;((n=this._$ES)!==null&&n!==void 0?n:this._$ES=[]).push(e),this.renderRoot!==void 0&&this.isConnected&&((r=e.hostConnected)===null||r===void 0||r.call(e))}removeController(e){var n;(n=this._$ES)===null||n===void 0||n.splice(this._$ES.indexOf(e)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach((e,n)=>{this.hasOwnProperty(n)&&(this._$Ei.set(n,this[n]),delete this[n])})}createRenderRoot(){var e;const n=(e=this.shadowRoot)!==null&&e!==void 0?e:this.attachShadow(this.constructor.shadowRootOptions);return Wd(n,this.constructor.elementStyles),n}connectedCallback(){var e;this.renderRoot===void 0&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostConnected)===null||r===void 0?void 0:r.call(n)})}enableUpdating(e){}disconnectedCallback(){var e;(e=this._$ES)===null||e===void 0||e.forEach(n=>{var r;return(r=n.hostDisconnected)===null||r===void 0?void 0:r.call(n)})}attributeChangedCallback(e,n,r){this._$AK(e,r)}_$EO(e,n,r=Nr){var i;const o=this.constructor._$Ep(e,r);if(o!==void 0&&r.reflect===!0){const a=(((i=r.converter)===null||i===void 0?void 0:i.toAttribute)!==void 0?r.converter:Zr).toAttribute(n,r.type);this._$El=e,a==null?this.removeAttribute(o):this.setAttribute(o,a),this._$El=null}}_$AK(e,n){var r;const i=this.constructor,o=i._$Ev.get(e);if(o!==void 0&&this._$El!==o){const a=i.getPropertyOptions(o),s=typeof a.converter=="function"?{fromAttribute:a.converter}:((r=a.converter)===null||r===void 0?void 0:r.fromAttribute)!==void 0?a.converter:Zr;this._$El=o,this[o]=s.fromAttribute(n,a.type),this._$El=null}}requestUpdate(e,n,r){let i=!0;e!==void 0&&(((r=r||this.constructor.getPropertyOptions(e)).hasChanged||Oa)(this[e],n)?(this._$AL.has(e)||this._$AL.set(e,n),r.reflect===!0&&this._$El!==e&&(this._$EC===void 0&&(this._$EC=new Map),this._$EC.set(e,r))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(n){Promise.reject(n)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var e;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach((i,o)=>this[o]=i),this._$Ei=void 0);let n=!1;const r=this._$AL;try{n=this.shouldUpdate(r),n?(this.willUpdate(r),(e=this._$ES)===null||e===void 0||e.forEach(i=>{var o;return(o=i.hostUpdate)===null||o===void 0?void 0:o.call(i)}),this.update(r)):this._$Ek()}catch(i){throw n=!1,this._$Ek(),i}n&&this._$AE(r)}willUpdate(e){}_$AE(e){var n;(n=this._$ES)===null||n===void 0||n.forEach(r=>{var i;return(i=r.hostUpdated)===null||i===void 0?void 0:i.call(r)}),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(e){return!0}update(e){this._$EC!==void 0&&(this._$EC.forEach((n,r)=>this._$EO(r,this[r],n)),this._$EC=void 0),this._$Ek()}updated(e){}firstUpdated(e){}}tt[Yr]=!0,tt.elementProperties=new Map,tt.elementStyles=[],tt.shadowRootOptions={mode:"open"},_s?.({ReactiveElement:tt}),((Ir=an.reactiveElementVersions)!==null&&Ir!==void 0?Ir:an.reactiveElementVersions=[]).push("1.6.3");/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Tr,Mr;class yt extends tt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var e,n;const r=super.createRenderRoot();return(e=(n=this.renderOptions).renderBefore)!==null&&e!==void 0||(n.renderBefore=r.firstChild),r}update(e){const n=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=$a(n,this.renderRoot,this.renderOptions)}connectedCallback(){var e;super.connectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!0)}disconnectedCallback(){var e;super.disconnectedCallback(),(e=this._$Do)===null||e===void 0||e.setConnected(!1)}render(){return ot}}yt.finalized=!0,yt._$litElement$=!0,(Tr=globalThis.litElementHydrateSupport)===null||Tr===void 0||Tr.call(globalThis,{LitElement:yt});const Ps=globalThis.litElementPolyfillSupport;Ps?.({LitElement:yt});((Mr=globalThis.litElementVersions)!==null&&Mr!==void 0?Mr:globalThis.litElementVersions=[]).push("3.3.3");/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var Or;((Or=window.HTMLSlotElement)===null||Or===void 0?void 0:Or.prototype.assignedElements)!=null;/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */console.warn("The main 'lit-element' module entrypoint is deprecated. Please update your imports to use the 'lit' package: 'lit' and 'lit/decorators.ts' or import from 'lit-element/lit-element.ts'. See https://lit.dev/msg/deprecated-import-path for more information.");const Ud=/^[og]\s*(.+)?/,Bd=/^mtllib /,Gd=/^usemtl /,Kd=/^usemap /,Es=/\s+/,As=new Ve,kr=new Ve,Cs=new Ve,Is=new Ve,Y=new Ve,Wt=new Rs;function Xd(){const t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,n){if(this.object&&this.object.fromDeclaration===!1){this.object.name=e,this.object.fromDeclaration=n!==!1;return}const r=this.object&&typeof this.object.currentMaterial=="function"?this.object.currentMaterial():void 0;if(this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:n!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(i,o){const a=this._finalize(!1);a&&(a.inherited||a.groupCount<=0)&&this.materials.splice(a.index,1);const s={index:this.materials.length,name:i||"",mtllib:Array.isArray(o)&&o.length>0?o[o.length-1]:"",smooth:a!==void 0?a.smooth:this.smooth,groupStart:a!==void 0?a.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(l){const u={index:typeof l=="number"?l:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return u.clone=this.clone.bind(u),u}};return this.materials.push(s),s},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(i){const o=this.currentMaterial();if(o&&o.groupEnd===-1&&(o.groupEnd=this.geometry.vertices.length/3,o.groupCount=o.groupEnd-o.groupStart,o.inherited=!1),i&&this.materials.length>1)for(let a=this.materials.length-1;a>=0;a--)this.materials[a].groupCount<=0&&this.materials.splice(a,1);return i&&this.materials.length===0&&this.materials.push({name:"",smooth:this.smooth}),o}},r&&r.name&&typeof r.clone=="function"){const i=r.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&typeof this.object._finalize=="function"&&this.object._finalize(!0)},parseVertexIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/3)*3},parseNormalIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/3)*3},parseUVIndex:function(e,n){const r=parseInt(e,10);return(r>=0?r-1:r+n/2)*2},addVertex:function(e,n,r){const i=this.vertices,o=this.object.geometry.vertices;o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2]),o.push(i[r+0],i[r+1],i[r+2])},addVertexPoint:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addVertexLine:function(e){const n=this.vertices;this.object.geometry.vertices.push(n[e+0],n[e+1],n[e+2])},addNormal:function(e,n,r){const i=this.normals,o=this.object.geometry.normals;o.push(i[e+0],i[e+1],i[e+2]),o.push(i[n+0],i[n+1],i[n+2]),o.push(i[r+0],i[r+1],i[r+2])},addFaceNormal:function(e,n,r){const i=this.vertices,o=this.object.geometry.normals;As.fromArray(i,e),kr.fromArray(i,n),Cs.fromArray(i,r),Y.subVectors(Cs,kr),Is.subVectors(As,kr),Y.cross(Is),Y.normalize(),o.push(Y.x,Y.y,Y.z),o.push(Y.x,Y.y,Y.z),o.push(Y.x,Y.y,Y.z)},addColor:function(e,n,r){const i=this.colors,o=this.object.geometry.colors;i[e]!==void 0&&o.push(i[e+0],i[e+1],i[e+2]),i[n]!==void 0&&o.push(i[n+0],i[n+1],i[n+2]),i[r]!==void 0&&o.push(i[r+0],i[r+1],i[r+2])},addUV:function(e,n,r){const i=this.uvs,o=this.object.geometry.uvs;o.push(i[e+0],i[e+1]),o.push(i[n+0],i[n+1]),o.push(i[r+0],i[r+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const n=this.uvs;this.object.geometry.uvs.push(n[e+0],n[e+1])},addFace:function(e,n,r,i,o,a,s,l,u){const c=this.vertices.length;let f=this.parseVertexIndex(e,c),p=this.parseVertexIndex(n,c),d=this.parseVertexIndex(r,c);if(this.addVertex(f,p,d),this.addColor(f,p,d),s!==void 0&&s!==""){const w=this.normals.length;f=this.parseNormalIndex(s,w),p=this.parseNormalIndex(l,w),d=this.parseNormalIndex(u,w),this.addNormal(f,p,d)}else this.addFaceNormal(f,p,d);if(i!==void 0&&i!==""){const w=this.uvs.length;f=this.parseUVIndex(i,w),p=this.parseUVIndex(o,w),d=this.parseUVIndex(a,w),this.addUV(f,p,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const n=this.vertices.length;for(let r=0,i=e.length;r<i;r++){const o=this.parseVertexIndex(e[r],n);this.addVertexPoint(o),this.addColor(o)}},addLineGeometry:function(e,n){this.object.geometry.type="Line";const r=this.vertices.length,i=this.uvs.length;for(let o=0,a=e.length;o<a;o++)this.addVertexLine(this.parseVertexIndex(e[o],r));for(let o=0,a=n.length;o<a;o++)this.addUVLine(this.parseUVIndex(n[o],i))}};return t.startObject("",!1),t}class Zd extends yl{constructor(e){super(e),this.materials=null}load(e,n,r,i){const o=this,a=new bl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(s){try{n(o.parse(s))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}setMaterials(e){return this.materials=e,this}parse(e){const n=new Xd;e.indexOf(`\r
`)!==-1&&(e=e.replace(/\r\n/g,`
`)),e.indexOf(`\\
`)!==-1&&(e=e.replace(/\\\n/g,""));const r=e.split(`
`);let i=[];for(let s=0,l=r.length;s<l;s++){const u=r[s].trimStart();if(u.length===0)continue;const c=u.charAt(0);if(c!=="#")if(c==="v"){const f=u.split(Es);switch(f[0]){case"v":n.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7?(Wt.setRGB(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6]),wl),n.colors.push(Wt.r,Wt.g,Wt.b)):n.colors.push(void 0,void 0,void 0);break;case"vn":n.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":n.uvs.push(parseFloat(f[1]),parseFloat(f[2]));break}}else if(c==="f"){const p=u.slice(1).trim().split(Es),d=[];for(let m=0,b=p.length;m<b;m++){const v=p[m];if(v.length>0){const h=v.split("/");d.push(h)}}const w=d[0];for(let m=1,b=d.length-1;m<b;m++){const v=d[m],h=d[m+1];n.addFace(w[0],v[0],h[0],w[1],v[1],h[1],w[2],v[2],h[2])}}else if(c==="l"){const f=u.substring(1).trim().split(" ");let p=[];const d=[];if(u.indexOf("/")===-1)p=f;else for(let w=0,m=f.length;w<m;w++){const b=f[w].split("/");b[0]!==""&&p.push(b[0]),b[1]!==""&&d.push(b[1])}n.addLineGeometry(p,d)}else if(c==="p"){const p=u.slice(1).trim().split(" ");n.addPointGeometry(p)}else if((i=Ud.exec(u))!==null){const f=(" "+i[0].slice(1).trim()).slice(1);n.startObject(f)}else if(Gd.test(u))n.object.startMaterial(u.substring(7).trim(),n.materialLibraries);else if(Bd.test(u))n.materialLibraries.push(u.substring(7).trim());else if(Kd.test(u))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if(c==="s"){if(i=u.split(" "),i.length>1){const p=i[1].trim().toLowerCase();n.object.smooth=p!=="0"&&p!=="off"}else n.object.smooth=!0;const f=n.object.currentMaterial();f&&(f.smooth=n.object.smooth)}else{if(u==="\0")continue;console.warn('THREE.OBJLoader: Unexpected line: "'+u+'"')}}n.finalize();const o=new xl;if(o.materialLibraries=[].concat(n.materialLibraries),!(n.objects.length===1&&n.objects[0].geometry.vertices.length===0)===!0)for(let s=0,l=n.objects.length;s<l;s++){const u=n.objects[s],c=u.geometry,f=u.materials,p=c.type==="Line",d=c.type==="Points";let w=!1;if(c.vertices.length===0)continue;const m=new Si;m.setAttribute("position",new Ze(c.vertices,3)),c.normals.length>0&&m.setAttribute("normal",new Ze(c.normals,3)),c.colors.length>0&&(w=!0,m.setAttribute("color",new Ze(c.colors,3))),c.hasUVIndices===!0&&m.setAttribute("uv",new Ze(c.uvs,2));const b=[];for(let h=0,g=f.length;h<g;h++){const y=f[h],S=y.name+"_"+y.smooth+"_"+w;let x=n.materials[S];if(this.materials!==null){if(x=this.materials.create(y.name),p&&x&&!(x instanceof $n)){const E=new $n;$i.prototype.copy.call(E,x),E.color.copy(x.color),x=E}else if(d&&x&&!(x instanceof Ot)){const E=new Ot({size:10,sizeAttenuation:!1});$i.prototype.copy.call(E,x),E.color.copy(x.color),E.map=x.map,x=E}}x===void 0&&(p?x=new $n:d?x=new Ot({size:1,sizeAttenuation:!1}):x=new Sl,x.name=y.name,x.flatShading=!y.smooth,x.vertexColors=w,n.materials[S]=x),b.push(x)}let v;if(b.length>1){for(let h=0,g=f.length;h<g;h++){const y=f[h];m.addGroup(y.groupStart,y.groupCount,h)}p?v=new _i(m,b):d?v=new _n(m,b):v=new Le(m,b)}else p?v=new _i(m,b[0]):d?v=new _n(m,b[0]):v=new Le(m,b[0]);v.name=u.name,o.add(v)}else if(n.vertices.length>0){const s=new Ot({size:1,sizeAttenuation:!1}),l=new Si;l.setAttribute("position",new Ze(n.vertices,3)),n.colors.length>0&&n.colors[0]!==void 0&&(l.setAttribute("color",new Ze(n.colors,3)),s.vertexColors=!0);const u=new _n(l,s);o.add(u)}return o}}class Yd extends yt{constructor(){super();for(const[e,n]of Object.entries(Jo))this[e]=Jo[e];if(this.context=Symbol(),$l(this.context,this),X(this.context)!==this)throw new Error("What the heck");this.resizeObserver=new ResizeObserver(e=>{ci.clear(this.context),kd(this.context)}),this.intersectionObserver=new IntersectionObserver(e=>{const n=e[0],{set:r,get:i}=J(this.context,"visible");n.isIntersecting?r(!0):r(!1),console.log("Intersection observer",i())},{root:null,rootMargin:"0px",threshold:.3}),this.onTapHandler=e=>{this.setAttribute("selected",e.detail?.info?.navId),this.focus=e.detail?.info?.navId}}static get properties(){return{globalScale:{type:Number,attribute:"global-scale"},nodeScale:{type:Number,attribute:"node-scale"},edgeFog:{type:Number,attribute:"edge-fog"},nodeFog:{type:Number,attribute:"node-fog"},edgeScale:{type:Number,attribute:"edge-scale"},edgeOvershoot:{type:Number,attribute:"edge-overshoot"},edgeFrequency:{type:Number,attribute:"edge-frequency"},edgePulseSpeed:{type:Number,attribute:"edge-pulse-speed"},edgeWaveSpeed:{type:Number,attribute:"edge-wave-speed"},selected:{type:String},focus:{type:String,attribute:!1},focusedZoom:{type:Number},unfocusedZoom:{type:Number},zoomBoundary:{type:Number},defaultFogVisibility:{type:Number,attribute:"default-fog-visibility"},defaultFogBoundaryClipZ:{type:Number,attribute:"default-fog-boundary-clip-z"},nodeShape:{type:String,attribute:"node-shape"},nodeGeometryBuffer:{attribute:!1},graphData:{attribute:!1}}}onTap(e){this.onTapHandler=e}connectedCallback(){super.connectedCallback();const e=this.context,n=this.shadowRoot,r=document.createElement("style");r.textContent=`
      :host {
        display: block;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }
      canvas {
        max-width: 100%;
        max-height: fit-content;
        display: block;
        touch-action: none;
        background-color: black 0%;
      }
    `,n.appendChild(r);const i=document.createElement("canvas");n.appendChild(i),Od(e,i),console.debug("Canvas created and set"),zd(e),console.debug("Renderer initialized"),me(e),console.debug("Three.js setup complete"),hd(e),console.debug("Camera interaction set up"),dd(this),console.debug("Selection setup complete"),document.querySelector("html")?.classList.add("loading"),console.debug("Added loading class to HTML"),U(this.context).then(o=>{console.debug("Graph data retrieved",o),document.querySelector("html").classList.remove("loading"),console.debug("Removed loading class from HTML"),Na(this.context),console.debug("Graph animation started"),fi.start(),console.debug("Navigation started")}),_l(this.context),this.resizeObserver.observe(this),this.intersectionObserver.observe(this),this.addEventListener("tap",o=>{o&&this.onTapHandler(o)})}get visible(){return J(this.context,"visible").get()&&this.isVisible()}disconnectedCallback(){this.resizeObserver.unobserve(this),this.intersectionObserver.unobserve(this)}adoptedCallback(){}updateCommon(e){for(const[n,r]of e){const i=this[n];switch(n){case"graphData":Wf(this.context,i),Yo(this.context);break;case"selected":U(this.context).then(({nodesByNavId:a})=>{const s=a[i];Af(this.context,s,!0)});break;case"focus":Yo(this.context);break;case"nodeShape":let o=ii(this.nodeShape);if(o)this._nodeGeometryBuffer=o,Gr.delete(this.context);else try{new Zd().load(this.nodeShape,s=>{this._nodeGeometryBuffer=s?.children[0]?.geometry,Gr.delete(this.context)})}catch(a){console.warn("Failed to load node shape as an obj url",a)}break}}}firstUpdated(e){this.updateCommon(e)}updated(e){this.updateCommon(e)}getNodeFromEvent(e){return null}}function ih(t="webscape-wanderer"){customElements.get(t)||customElements.define(t,Yd)}export{eh as a,th as b,nh as d,Jd as r,ih as s};
//# sourceMappingURL=main-877abd05.js.map
