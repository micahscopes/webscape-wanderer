function _mergeNamespaces(n,e){return e.forEach(function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach(function(a){if(a!=="default"&&!(a in n)){var c=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:function(){return t[a]}})}})}),Object.freeze(n)}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...e){const t=e.reduce((a,c)=>Object.assign(a,c),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$1={},buffer$1={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=i,base64Js.toByteArray=d,base64Js.fromByteArray=p;for(var n=[],e=[],t=typeof Uint8Array<"u"?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=a.length;c<l;++c)n[c]=a[c],e[a.charCodeAt(c)]=c;e["-".charCodeAt(0)]=62,e["_".charCodeAt(0)]=63;function o(T){var _=T.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var w=T.indexOf("=");w===-1&&(w=_);var S=w===_?0:4-w%4;return[w,S]}function i(T){var _=o(T),w=_[0],S=_[1];return(w+S)*3/4-S}function u(T,_,w){return(_+w)*3/4-w}function d(T){var _,w=o(T),S=w[0],I=w[1],j=new t(u(T,S,I)),x=0,v=I>0?S-4:S,O;for(O=0;O<v;O+=4)_=e[T.charCodeAt(O)]<<18|e[T.charCodeAt(O+1)]<<12|e[T.charCodeAt(O+2)]<<6|e[T.charCodeAt(O+3)],j[x++]=_>>16&255,j[x++]=_>>8&255,j[x++]=_&255;return I===2&&(_=e[T.charCodeAt(O)]<<2|e[T.charCodeAt(O+1)]>>4,j[x++]=_&255),I===1&&(_=e[T.charCodeAt(O)]<<10|e[T.charCodeAt(O+1)]<<4|e[T.charCodeAt(O+2)]>>2,j[x++]=_>>8&255,j[x++]=_&255),j}function m(T){return n[T>>18&63]+n[T>>12&63]+n[T>>6&63]+n[T&63]}function y(T,_,w){for(var S,I=[],j=_;j<w;j+=3)S=(T[j]<<16&16711680)+(T[j+1]<<8&65280)+(T[j+2]&255),I.push(m(S));return I.join("")}function p(T){for(var _,w=T.length,S=w%3,I=[],j=16383,x=0,v=w-S;x<v;x+=j)I.push(y(T,x,x+j>v?v:x+j));return S===1?(_=T[w-1],I.push(n[_>>2]+n[_<<4&63]+"==")):S===2&&(_=(T[w-2]<<8)+T[w-1],I.push(n[_>>10]+n[_>>4&63]+n[_<<2&63]+"=")),I.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(n,e,t,a,c){var l,o,i=c*8-a-1,u=(1<<i)-1,d=u>>1,m=-7,y=t?c-1:0,p=t?-1:1,T=n[e+y];for(y+=p,l=T&(1<<-m)-1,T>>=-m,m+=i;m>0;l=l*256+n[e+y],y+=p,m-=8);for(o=l&(1<<-m)-1,l>>=-m,m+=a;m>0;o=o*256+n[e+y],y+=p,m-=8);if(l===0)l=1-d;else{if(l===u)return o?NaN:(T?-1:1)*(1/0);o=o+Math.pow(2,a),l=l-d}return(T?-1:1)*o*Math.pow(2,l-a)},ieee754.write=function(n,e,t,a,c,l){var o,i,u,d=l*8-c-1,m=(1<<d)-1,y=m>>1,p=c===23?Math.pow(2,-24)-Math.pow(2,-77):0,T=a?0:l-1,_=a?1:-1,w=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(i=isNaN(e)?1:0,o=m):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+y>=1?e+=p/u:e+=p*Math.pow(2,1-y),e*u>=2&&(o++,u/=2),o+y>=m?(i=0,o=m):o+y>=1?(i=(e*u-1)*Math.pow(2,c),o=o+y):(i=e*Math.pow(2,y-1)*Math.pow(2,c),o=0));c>=8;n[t+T]=i&255,T+=_,i/=256,c-=8);for(o=o<<c|i,d+=c;d>0;n[t+T]=o&255,T+=_,o/=256,d-=8);n[t+T-_]|=w*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const e=requireBase64Js(),t=requireIeee754(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=i,n.SlowBuffer=j,n.INSPECT_MAX_BYTES=50;const c=2147483647;n.kMaxLength=c,i.TYPED_ARRAY_SUPPORT=l(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const g=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(g,h),g.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function o(g){if(g>c)throw new RangeError('The value "'+g+'" is invalid for option "size"');const h=new Uint8Array(g);return Object.setPrototypeOf(h,i.prototype),h}function i(g,h,b){if(typeof g=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(g)}return u(g,h,b)}i.poolSize=8192;function u(g,h,b){if(typeof g=="string")return p(g,h);if(ArrayBuffer.isView(g))return _(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(re(g,ArrayBuffer)||g&&re(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(g,SharedArrayBuffer)||g&&re(g.buffer,SharedArrayBuffer)))return w(g,h,b);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=g.valueOf&&g.valueOf();if(E!=null&&E!==g)return i.from(E,h,b);const P=S(g);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return i.from(g[Symbol.toPrimitive]("string"),h,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}i.from=function(g,h,b){return u(g,h,b)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function d(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function m(g,h,b){return d(g),g<=0?o(g):h!==void 0?typeof b=="string"?o(g).fill(h,b):o(g).fill(h):o(g)}i.alloc=function(g,h,b){return m(g,h,b)};function y(g){return d(g),o(g<0?0:I(g)|0)}i.allocUnsafe=function(g){return y(g)},i.allocUnsafeSlow=function(g){return y(g)};function p(g,h){if((typeof h!="string"||h==="")&&(h="utf8"),!i.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const b=x(g,h)|0;let E=o(b);const P=E.write(g,h);return P!==b&&(E=E.slice(0,P)),E}function T(g){const h=g.length<0?0:I(g.length)|0,b=o(h);for(let E=0;E<h;E+=1)b[E]=g[E]&255;return b}function _(g){if(re(g,Uint8Array)){const h=new Uint8Array(g);return w(h.buffer,h.byteOffset,h.byteLength)}return T(g)}function w(g,h,b){if(h<0||g.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<h+(b||0))throw new RangeError('"length" is outside of buffer bounds');let E;return h===void 0&&b===void 0?E=new Uint8Array(g):b===void 0?E=new Uint8Array(g,h):E=new Uint8Array(g,h,b),Object.setPrototypeOf(E,i.prototype),E}function S(g){if(i.isBuffer(g)){const h=I(g.length)|0,b=o(h);return b.length===0||g.copy(b,0,0,h),b}if(g.length!==void 0)return typeof g.length!="number"||ie(g.length)?o(0):T(g);if(g.type==="Buffer"&&Array.isArray(g.data))return T(g.data)}function I(g){if(g>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return g|0}function j(g){return+g!=g&&(g=0),i.alloc(+g)}i.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==i.prototype},i.compare=function(h,b){if(re(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),re(b,Uint8Array)&&(b=i.from(b,b.offset,b.byteLength)),!i.isBuffer(h)||!i.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===b)return 0;let E=h.length,P=b.length;for(let F=0,X=Math.min(E,P);F<X;++F)if(h[F]!==b[F]){E=h[F],P=b[F];break}return E<P?-1:P<E?1:0},i.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(h,b){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return i.alloc(0);let E;if(b===void 0)for(b=0,E=0;E<h.length;++E)b+=h[E].length;const P=i.allocUnsafe(b);let F=0;for(E=0;E<h.length;++E){let X=h[E];if(re(X,Uint8Array))F+X.length>P.length?(i.isBuffer(X)||(X=i.from(X)),X.copy(P,F)):Uint8Array.prototype.set.call(P,X,F);else if(i.isBuffer(X))X.copy(P,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=X.length}return P};function x(g,h){if(i.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||re(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const b=g.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&b===0)return 0;let P=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Y(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return q(g).length;default:if(P)return E?-1:Y(g).length;h=(""+h).toLowerCase(),P=!0}}i.byteLength=x;function v(g,h,b){let E=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,h>>>=0,b<=h))return"";for(g||(g="utf8");;)switch(g){case"hex":return oe(this,h,b);case"utf8":case"utf-8":return M(this,h,b);case"ascii":return J(this,h,b);case"latin1":case"binary":return ce(this,h,b);case"base64":return L(this,h,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,h,b);default:if(E)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),E=!0}}i.prototype._isBuffer=!0;function O(g,h,b){const E=g[h];g[h]=g[b],g[b]=E}i.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<h;b+=2)O(this,b,b+1);return this},i.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<h;b+=4)O(this,b,b+3),O(this,b+1,b+2);return this},i.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<h;b+=8)O(this,b,b+7),O(this,b+1,b+6),O(this,b+2,b+5),O(this,b+3,b+4);return this},i.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?M(this,0,h):v.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(h){if(!i.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:i.compare(this,h)===0},i.prototype.inspect=function(){let h="";const b=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(h+=" ... "),"<Buffer "+h+">"},a&&(i.prototype[a]=i.prototype.inspect),i.prototype.compare=function(h,b,E,P,F){if(re(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),!i.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(b===void 0&&(b=0),E===void 0&&(E=h?h.length:0),P===void 0&&(P=0),F===void 0&&(F=this.length),b<0||E>h.length||P<0||F>this.length)throw new RangeError("out of range index");if(P>=F&&b>=E)return 0;if(P>=F)return-1;if(b>=E)return 1;if(b>>>=0,E>>>=0,P>>>=0,F>>>=0,this===h)return 0;let X=F-P,ge=E-b;const Re=Math.min(X,ge),je=this.slice(P,F),Pe=h.slice(b,E);for(let Te=0;Te<Re;++Te)if(je[Te]!==Pe[Te]){X=je[Te],ge=Pe[Te];break}return X<ge?-1:ge<X?1:0};function N(g,h,b,E,P){if(g.length===0)return-1;if(typeof b=="string"?(E=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,ie(b)&&(b=P?0:g.length-1),b<0&&(b=g.length+b),b>=g.length){if(P)return-1;b=g.length-1}else if(b<0)if(P)b=0;else return-1;if(typeof h=="string"&&(h=i.from(h,E)),i.isBuffer(h))return h.length===0?-1:D(g,h,b,E,P);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(g,h,b):Uint8Array.prototype.lastIndexOf.call(g,h,b):D(g,[h],b,E,P);throw new TypeError("val must be string, number or Buffer")}function D(g,h,b,E,P){let F=1,X=g.length,ge=h.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(g.length<2||h.length<2)return-1;F=2,X/=2,ge/=2,b/=2}function Re(Pe,Te){return F===1?Pe[Te]:Pe.readUInt16BE(Te*F)}let je;if(P){let Pe=-1;for(je=b;je<X;je++)if(Re(g,je)===Re(h,Pe===-1?0:je-Pe)){if(Pe===-1&&(Pe=je),je-Pe+1===ge)return Pe*F}else Pe!==-1&&(je-=je-Pe),Pe=-1}else for(b+ge>X&&(b=X-ge),je=b;je>=0;je--){let Pe=!0;for(let Te=0;Te<ge;Te++)if(Re(g,je+Te)!==Re(h,Te)){Pe=!1;break}if(Pe)return je}return-1}i.prototype.includes=function(h,b,E){return this.indexOf(h,b,E)!==-1},i.prototype.indexOf=function(h,b,E){return N(this,h,b,E,!0)},i.prototype.lastIndexOf=function(h,b,E){return N(this,h,b,E,!1)};function G(g,h,b,E){b=Number(b)||0;const P=g.length-b;E?(E=Number(E),E>P&&(E=P)):E=P;const F=h.length;E>F/2&&(E=F/2);let X;for(X=0;X<E;++X){const ge=parseInt(h.substr(X*2,2),16);if(ie(ge))return X;g[b+X]=ge}return X}function W(g,h,b,E){return ee(Y(h,g.length-b),g,b,E)}function U(g,h,b,E){return ee(ne(h),g,b,E)}function Q(g,h,b,E){return ee(q(h),g,b,E)}function Z(g,h,b,E){return ee(ae(h,g.length-b),g,b,E)}i.prototype.write=function(h,b,E,P){if(b===void 0)P="utf8",E=this.length,b=0;else if(E===void 0&&typeof b=="string")P=b,E=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(E)?(E=E>>>0,P===void 0&&(P="utf8")):(P=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const F=this.length-b;if((E===void 0||E>F)&&(E=F),h.length>0&&(E<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let X=!1;for(;;)switch(P){case"hex":return G(this,h,b,E);case"utf8":case"utf-8":return W(this,h,b,E);case"ascii":case"latin1":case"binary":return U(this,h,b,E);case"base64":return Q(this,h,b,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,h,b,E);default:if(X)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),X=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(g,h,b){return h===0&&b===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(h,b))}function M(g,h,b){b=Math.min(g.length,b);const E=[];let P=h;for(;P<b;){const F=g[P];let X=null,ge=F>239?4:F>223?3:F>191?2:1;if(P+ge<=b){let Re,je,Pe,Te;switch(ge){case 1:F<128&&(X=F);break;case 2:Re=g[P+1],(Re&192)===128&&(Te=(F&31)<<6|Re&63,Te>127&&(X=Te));break;case 3:Re=g[P+1],je=g[P+2],(Re&192)===128&&(je&192)===128&&(Te=(F&15)<<12|(Re&63)<<6|je&63,Te>2047&&(Te<55296||Te>57343)&&(X=Te));break;case 4:Re=g[P+1],je=g[P+2],Pe=g[P+3],(Re&192)===128&&(je&192)===128&&(Pe&192)===128&&(Te=(F&15)<<18|(Re&63)<<12|(je&63)<<6|Pe&63,Te>65535&&Te<1114112&&(X=Te))}}X===null?(X=65533,ge=1):X>65535&&(X-=65536,E.push(X>>>10&1023|55296),X=56320|X&1023),E.push(X),P+=ge}return H(E)}const V=4096;function H(g){const h=g.length;if(h<=V)return String.fromCharCode.apply(String,g);let b="",E=0;for(;E<h;)b+=String.fromCharCode.apply(String,g.slice(E,E+=V));return b}function J(g,h,b){let E="";b=Math.min(g.length,b);for(let P=h;P<b;++P)E+=String.fromCharCode(g[P]&127);return E}function ce(g,h,b){let E="";b=Math.min(g.length,b);for(let P=h;P<b;++P)E+=String.fromCharCode(g[P]);return E}function oe(g,h,b){const E=g.length;(!h||h<0)&&(h=0),(!b||b<0||b>E)&&(b=E);let P="";for(let F=h;F<b;++F)P+=de[g[F]];return P}function le(g,h,b){const E=g.slice(h,b);let P="";for(let F=0;F<E.length-1;F+=2)P+=String.fromCharCode(E[F]+E[F+1]*256);return P}i.prototype.slice=function(h,b){const E=this.length;h=~~h,b=b===void 0?E:~~b,h<0?(h+=E,h<0&&(h=0)):h>E&&(h=E),b<0?(b+=E,b<0&&(b=0)):b>E&&(b=E),b<h&&(b=h);const P=this.subarray(h,b);return Object.setPrototypeOf(P,i.prototype),P};function ue(g,h,b){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+h>b)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=this[h],F=1,X=0;for(;++X<b&&(F*=256);)P+=this[h+X]*F;return P},i.prototype.readUintBE=i.prototype.readUIntBE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=this[h+--b],F=1;for(;b>0&&(F*=256);)P+=this[h+--b]*F;return P},i.prototype.readUint8=i.prototype.readUInt8=function(h,b){return h=h>>>0,b||ue(h,1,this.length),this[h]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(h,b){return h=h>>>0,b||ue(h,2,this.length),this[h]|this[h+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(h,b){return h=h>>>0,b||ue(h,2,this.length),this[h]<<8|this[h+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},i.prototype.readBigUInt64LE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=b+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,F=this[++h]+this[++h]*2**8+this[++h]*2**16+E*2**24;return BigInt(P)+(BigInt(F)<<BigInt(32))}),i.prototype.readBigUInt64BE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=b*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],F=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+E;return(BigInt(P)<<BigInt(32))+BigInt(F)}),i.prototype.readIntLE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=this[h],F=1,X=0;for(;++X<b&&(F*=256);)P+=this[h+X]*F;return F*=128,P>=F&&(P-=Math.pow(2,8*b)),P},i.prototype.readIntBE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=b,F=1,X=this[h+--P];for(;P>0&&(F*=256);)X+=this[h+--P]*F;return F*=128,X>=F&&(X-=Math.pow(2,8*b)),X},i.prototype.readInt8=function(h,b){return h=h>>>0,b||ue(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},i.prototype.readInt16LE=function(h,b){h=h>>>0,b||ue(h,2,this.length);const E=this[h]|this[h+1]<<8;return E&32768?E|4294901760:E},i.prototype.readInt16BE=function(h,b){h=h>>>0,b||ue(h,2,this.length);const E=this[h+1]|this[h]<<8;return E&32768?E|4294901760:E},i.prototype.readInt32LE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},i.prototype.readInt32BE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},i.prototype.readBigInt64LE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(E<<24);return(BigInt(P)<<BigInt(32))+BigInt(b+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),i.prototype.readBigInt64BE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=(b<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(P)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+E)}),i.prototype.readFloatLE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),t.read(this,h,!0,23,4)},i.prototype.readFloatBE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),t.read(this,h,!1,23,4)},i.prototype.readDoubleLE=function(h,b){return h=h>>>0,b||ue(h,8,this.length),t.read(this,h,!0,52,8)},i.prototype.readDoubleBE=function(h,b){return h=h>>>0,b||ue(h,8,this.length),t.read(this,h,!1,52,8)};function be(g,h,b,E,P,F){if(!i.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>P||h<F)throw new RangeError('"value" argument is out of bounds');if(b+E>g.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(h,b,E,P){if(h=+h,b=b>>>0,E=E>>>0,!P){const ge=Math.pow(2,8*E)-1;be(this,h,b,E,ge,0)}let F=1,X=0;for(this[b]=h&255;++X<E&&(F*=256);)this[b+X]=h/F&255;return b+E},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(h,b,E,P){if(h=+h,b=b>>>0,E=E>>>0,!P){const ge=Math.pow(2,8*E)-1;be(this,h,b,E,ge,0)}let F=E-1,X=1;for(this[b+F]=h&255;--F>=0&&(X*=256);)this[b+F]=h/X&255;return b+E},i.prototype.writeUint8=i.prototype.writeUInt8=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,1,255,0),this[b]=h&255,b+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,65535,0),this[b]=h&255,this[b+1]=h>>>8,b+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,65535,0),this[b]=h>>>8,this[b+1]=h&255,b+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,4294967295,0),this[b+3]=h>>>24,this[b+2]=h>>>16,this[b+1]=h>>>8,this[b]=h&255,b+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,4294967295,0),this[b]=h>>>24,this[b+1]=h>>>16,this[b+2]=h>>>8,this[b+3]=h&255,b+4};function Ee(g,h,b,E,P){Le(h,E,P,g,b,7);let F=Number(h&BigInt(4294967295));g[b++]=F,F=F>>8,g[b++]=F,F=F>>8,g[b++]=F,F=F>>8,g[b++]=F;let X=Number(h>>BigInt(32)&BigInt(4294967295));return g[b++]=X,X=X>>8,g[b++]=X,X=X>>8,g[b++]=X,X=X>>8,g[b++]=X,b}function Ae(g,h,b,E,P){Le(h,E,P,g,b,7);let F=Number(h&BigInt(4294967295));g[b+7]=F,F=F>>8,g[b+6]=F,F=F>>8,g[b+5]=F,F=F>>8,g[b+4]=F;let X=Number(h>>BigInt(32)&BigInt(4294967295));return g[b+3]=X,X=X>>8,g[b+2]=X,X=X>>8,g[b+1]=X,X=X>>8,g[b]=X,b+8}i.prototype.writeBigUInt64LE=me(function(h,b=0){return Ee(this,h,b,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=me(function(h,b=0){return Ae(this,h,b,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(h,b,E,P){if(h=+h,b=b>>>0,!P){const Re=Math.pow(2,8*E-1);be(this,h,b,E,Re-1,-Re)}let F=0,X=1,ge=0;for(this[b]=h&255;++F<E&&(X*=256);)h<0&&ge===0&&this[b+F-1]!==0&&(ge=1),this[b+F]=(h/X>>0)-ge&255;return b+E},i.prototype.writeIntBE=function(h,b,E,P){if(h=+h,b=b>>>0,!P){const Re=Math.pow(2,8*E-1);be(this,h,b,E,Re-1,-Re)}let F=E-1,X=1,ge=0;for(this[b+F]=h&255;--F>=0&&(X*=256);)h<0&&ge===0&&this[b+F+1]!==0&&(ge=1),this[b+F]=(h/X>>0)-ge&255;return b+E},i.prototype.writeInt8=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,1,127,-128),h<0&&(h=255+h+1),this[b]=h&255,b+1},i.prototype.writeInt16LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,32767,-32768),this[b]=h&255,this[b+1]=h>>>8,b+2},i.prototype.writeInt16BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,32767,-32768),this[b]=h>>>8,this[b+1]=h&255,b+2},i.prototype.writeInt32LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,2147483647,-2147483648),this[b]=h&255,this[b+1]=h>>>8,this[b+2]=h>>>16,this[b+3]=h>>>24,b+4},i.prototype.writeInt32BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[b]=h>>>24,this[b+1]=h>>>16,this[b+2]=h>>>8,this[b+3]=h&255,b+4},i.prototype.writeBigInt64LE=me(function(h,b=0){return Ee(this,h,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=me(function(h,b=0){return Ae(this,h,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(g,h,b,E,P,F){if(b+E>g.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Oe(g,h,b,E,P){return h=+h,b=b>>>0,P||xe(g,h,b,4),t.write(g,h,b,E,23,4),b+4}i.prototype.writeFloatLE=function(h,b,E){return Oe(this,h,b,!0,E)},i.prototype.writeFloatBE=function(h,b,E){return Oe(this,h,b,!1,E)};function fe(g,h,b,E,P){return h=+h,b=b>>>0,P||xe(g,h,b,8),t.write(g,h,b,E,52,8),b+8}i.prototype.writeDoubleLE=function(h,b,E){return fe(this,h,b,!0,E)},i.prototype.writeDoubleBE=function(h,b,E){return fe(this,h,b,!1,E)},i.prototype.copy=function(h,b,E,P){if(!i.isBuffer(h))throw new TypeError("argument should be a Buffer");if(E||(E=0),!P&&P!==0&&(P=this.length),b>=h.length&&(b=h.length),b||(b=0),P>0&&P<E&&(P=E),P===E||h.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),h.length-b<P-E&&(P=h.length-b+E);const F=P-E;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,E,P):Uint8Array.prototype.set.call(h,this.subarray(E,P),b),F},i.prototype.fill=function(h,b,E,P){if(typeof h=="string"){if(typeof b=="string"?(P=b,b=0,E=this.length):typeof E=="string"&&(P=E,E=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!i.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(h.length===1){const X=h.charCodeAt(0);(P==="utf8"&&X<128||P==="latin1")&&(h=X)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(b<0||this.length<b||this.length<E)throw new RangeError("Out of range index");if(E<=b)return this;b=b>>>0,E=E===void 0?this.length:E>>>0,h||(h=0);let F;if(typeof h=="number")for(F=b;F<E;++F)this[F]=h;else{const X=i.isBuffer(h)?h:i.from(h,P),ge=X.length;if(ge===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(F=0;F<E-b;++F)this[F+b]=X[F%ge]}return this};const Se={};function Ne(g,h,b){Se[g]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}Ne("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ne("ERR_INVALID_ARG_TYPE",function(g,h){return`The "${g}" argument must be of type number. Received type ${typeof h}`},TypeError),Ne("ERR_OUT_OF_RANGE",function(g,h,b){let E=`The value of "${g}" is out of range.`,P=b;return Number.isInteger(b)&&Math.abs(b)>2**32?P=De(String(b)):typeof b=="bigint"&&(P=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(P=De(P)),P+="n"),E+=` It must be ${h}. Received ${P}`,E},RangeError);function De(g){let h="",b=g.length;const E=g[0]==="-"?1:0;for(;b>=E+4;b-=3)h=`_${g.slice(b-3,b)}${h}`;return`${g.slice(0,b)}${h}`}function Ie(g,h,b){C(h,"offset"),(g[h]===void 0||g[h+b]===void 0)&&$(h,g.length-(b+1))}function Le(g,h,b,E,P,F){if(g>b||g<h){const X=typeof h=="bigint"?"n":"";let ge;throw F>3?h===0||h===BigInt(0)?ge=`>= 0${X} and < 2${X} ** ${(F+1)*8}${X}`:ge=`>= -(2${X} ** ${(F+1)*8-1}${X}) and < 2 ** ${(F+1)*8-1}${X}`:ge=`>= ${h}${X} and <= ${b}${X}`,new Se.ERR_OUT_OF_RANGE("value",ge,g)}Ie(E,P,F)}function C(g,h){if(typeof g!="number")throw new Se.ERR_INVALID_ARG_TYPE(h,"number",g)}function $(g,h,b){throw Math.floor(g)!==g?(C(g,b),new Se.ERR_OUT_OF_RANGE(b||"offset","an integer",g)):h<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${h}`,g)}const z=/[^+/0-9A-Za-z-_]/g;function se(g){if(g=g.split("=")[0],g=g.trim().replace(z,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Y(g,h){h=h||1/0;let b;const E=g.length;let P=null;const F=[];for(let X=0;X<E;++X){if(b=g.charCodeAt(X),b>55295&&b<57344){if(!P){if(b>56319){(h-=3)>-1&&F.push(239,191,189);continue}else if(X+1===E){(h-=3)>-1&&F.push(239,191,189);continue}P=b;continue}if(b<56320){(h-=3)>-1&&F.push(239,191,189),P=b;continue}b=(P-55296<<10|b-56320)+65536}else P&&(h-=3)>-1&&F.push(239,191,189);if(P=null,b<128){if((h-=1)<0)break;F.push(b)}else if(b<2048){if((h-=2)<0)break;F.push(b>>6|192,b&63|128)}else if(b<65536){if((h-=3)<0)break;F.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((h-=4)<0)break;F.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return F}function ne(g){const h=[];for(let b=0;b<g.length;++b)h.push(g.charCodeAt(b)&255);return h}function ae(g,h){let b,E,P;const F=[];for(let X=0;X<g.length&&!((h-=2)<0);++X)b=g.charCodeAt(X),E=b>>8,P=b%256,F.push(P),F.push(E);return F}function q(g){return e.toByteArray(se(g))}function ee(g,h,b,E){let P;for(P=0;P<E&&!(P+b>=h.length||P>=g.length);++P)h[P+b]=g[P];return P}function re(g,h){return g instanceof h||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===h.name}function ie(g){return g!==g}const de=function(){const g="0123456789abcdef",h=new Array(256);for(let b=0;b<16;++b){const E=b*16;for(let P=0;P<16;++P)h[E+P]=g[b]+g[P]}return h}();function me(g){return typeof BigInt>"u"?_e:g}function _e(){throw new Error("BigInt not supported")}})(buffer$1);let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$1}=buffer$1||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$1.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const t=this.encode(e);return Buffer$1.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$1.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:t}=textEndec();return new ViewFormat$2({encode:a=>e.encode(this.encode(a)),decode:a=>this.decode(t.decode(a)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer}=buffer$1||{Buffer:{isBuffer:()=>!1}},{textEncoder,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$1=n=>n;encodings$1.utf8=new UTF8Format$1({encode:function(n){return Buffer.isBuffer(n)?n.toString("utf8"):ArrayBuffer.isView(n)?textDecoder.decode(n):String(n)},decode:identity$1,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder.encode(n)},decode:function(n){return textDecoder.decode(n)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:function(n){return n.toString("utf8")},name:`${this.name}+buffer`})}});encodings$1.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$1.buffer=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:identity$1,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:Buffer.from(String(n),"utf8")},decode:function(n){return Buffer.from(n.buffer,n.byteOffset,n.byteLength)},name:`${this.name}+view`})}});encodings$1.view=new ViewFormat$1({encode:function(n){return ArrayBuffer.isView(n)?n:textEncoder.encode(n)},decode:identity$1,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:ArrayBuffer.isView(n)?Buffer.from(n.buffer,n.byteOffset,n.byteLength):Buffer.from(String(n),"utf8")},decode:identity$1,name:`${this.name}+buffer`})}});encodings$1.hex=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:Buffer.from(String(n),"hex")},decode:function(n){return n.toString("hex")},name:"hex"});encodings$1.base64=new BufferFormat$1({encode:function(n){return Buffer.isBuffer(n)?n:Buffer.from(String(n),"base64")},decode:function(n){return n.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings=encodings$1,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>validFormats.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const t in encodings)try{this.encoding(t)}catch(a){if(a.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw a}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let t=this[kEncodings].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=lookup[e],!t)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=from(e)}const{name:a,format:c}=t;if(!this[kFormats].has(c))if(this[kFormats].has("view"))t=t.createViewTranscoder();else if(this[kFormats].has("buffer"))t=t.createBufferTranscoder();else if(this[kFormats].has("utf8"))t=t.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${a}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const l of[e,a,t.name,t.commonName])this[kEncodings].set(l,t)}return t}};levelTranscoder.Transcoder=Transcoder$1;function from(n){if(n instanceof Encoding)return n;const e="type"in n&&typeof n.type=="string"?n.type:void 0,t=n.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(n)){case"view":return new ViewFormat({...n,name:t});case"utf8":return new UTF8Format({...n,name:t});case"buffer":return new BufferFormat({...n,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(n){return"format"in n&&n.format!==void 0?n.format:"buffer"in n&&typeof n.buffer=="boolean"?n.buffer?"buffer":"utf8":"code"in n&&Number.isInteger(n.code)?"view":"buffer"}const aliases={binary:encodings.buffer,"utf-8":encodings.utf8},lookup={...encodings,...aliases};let anonymousCount=0;var eventsExports={},events={get exports(){return eventsExports},set exports(n){eventsExports=n}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,t,a){return Function.prototype.apply.call(e,t,a)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(n){console&&console.warn&&console.warn(n)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$1(){EventEmitter$1.init.call(this)}events.exports=EventEmitter$1;eventsExports.once=once;EventEmitter$1.EventEmitter=EventEmitter$1;EventEmitter$1.prototype._events=void 0;EventEmitter$1.prototype._eventsCount=0;EventEmitter$1.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(n){if(typeof n!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n)}Object.defineProperty(EventEmitter$1,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(n){if(typeof n!="number"||n<0||NumberIsNaN(n))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+n+".");defaultMaxListeners=n}});EventEmitter$1.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$1.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(n){return n._maxListeners===void 0?EventEmitter$1.defaultMaxListeners:n._maxListeners}EventEmitter$1.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$1.prototype.emit=function(e){for(var t=[],a=1;a<arguments.length;a++)t.push(arguments[a]);var c=e==="error",l=this._events;if(l!==void 0)c=c&&l.error===void 0;else if(!c)return!1;if(c){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var i=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw i.context=o,i}var u=l[e];if(u===void 0)return!1;if(typeof u=="function")ReflectApply(u,this,t);else for(var d=u.length,m=arrayClone(u,d),a=0;a<d;++a)ReflectApply(m[a],this,t);return!0};function _addListener(n,e,t,a){var c,l,o;if(checkListener(t),l=n._events,l===void 0?(l=n._events=Object.create(null),n._eventsCount=0):(l.newListener!==void 0&&(n.emit("newListener",e,t.listener?t.listener:t),l=n._events),o=l[e]),o===void 0)o=l[e]=t,++n._eventsCount;else if(typeof o=="function"?o=l[e]=a?[t,o]:[o,t]:a?o.unshift(t):o.push(t),c=_getMaxListeners(n),c>0&&o.length>c&&!o.warned){o.warned=!0;var i=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=n,i.type=e,i.count=o.length,ProcessEmitWarning(i)}return n}EventEmitter$1.prototype.addListener=function(e,t){return _addListener(this,e,t,!1)};EventEmitter$1.prototype.on=EventEmitter$1.prototype.addListener;EventEmitter$1.prototype.prependListener=function(e,t){return _addListener(this,e,t,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(n,e,t){var a={fired:!1,wrapFn:void 0,target:n,type:e,listener:t},c=onceWrapper.bind(a);return c.listener=t,a.wrapFn=c,c}EventEmitter$1.prototype.once=function(e,t){return checkListener(t),this.on(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.prependOnceListener=function(e,t){return checkListener(t),this.prependListener(e,_onceWrap(this,e,t)),this};EventEmitter$1.prototype.removeListener=function(e,t){var a,c,l,o,i;if(checkListener(t),c=this._events,c===void 0)return this;if(a=c[e],a===void 0)return this;if(a===t||a.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete c[e],c.removeListener&&this.emit("removeListener",e,a.listener||t));else if(typeof a!="function"){for(l=-1,o=a.length-1;o>=0;o--)if(a[o]===t||a[o].listener===t){i=a[o].listener,l=o;break}if(l<0)return this;l===0?a.shift():spliceOne(a,l),a.length===1&&(c[e]=a[0]),c.removeListener!==void 0&&this.emit("removeListener",e,i||t)}return this};EventEmitter$1.prototype.off=EventEmitter$1.prototype.removeListener;EventEmitter$1.prototype.removeAllListeners=function(e){var t,a,c;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[e]),this;if(arguments.length===0){var l=Object.keys(a),o;for(c=0;c<l.length;++c)o=l[c],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=a[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(c=t.length-1;c>=0;c--)this.removeListener(e,t[c]);return this};function _listeners(n,e,t){var a=n._events;if(a===void 0)return[];var c=a[e];return c===void 0?[]:typeof c=="function"?t?[c.listener||c]:[c]:t?unwrapListeners(c):arrayClone(c,c.length)}EventEmitter$1.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$1.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$1.listenerCount=function(n,e){return typeof n.listenerCount=="function"?n.listenerCount(e):listenerCount.call(n,e)};EventEmitter$1.prototype.listenerCount=listenerCount;function listenerCount(n){var e=this._events;if(e!==void 0){var t=e[n];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}EventEmitter$1.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(n,e){for(var t=new Array(e),a=0;a<e;++a)t[a]=n[a];return t}function spliceOne(n,e){for(;e+1<n.length;e++)n[e]=n[e+1];n.pop()}function unwrapListeners(n){for(var e=new Array(n.length),t=0;t<e.length;++t)e[t]=n[t].listener||n[t];return e}function once(n,e){return new Promise(function(t,a){function c(o){n.removeListener(e,l),a(o)}function l(){typeof n.removeListener=="function"&&n.removeListener("error",c),t([].slice.call(arguments))}eventTargetAgnosticAddListener(n,e,l,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(n,c,{once:!0})})}function addErrorHandlerIfEventEmitter(n,e,t){typeof n.on=="function"&&eventTargetAgnosticAddListener(n,"error",e,t)}function eventTargetAgnosticAddListener(n,e,t,a){if(typeof n.on=="function")a.once?n.once(e,t):n.on(e,t);else if(typeof n.addEventListener=="function")n.addEventListener(e,function c(l){a.once&&n.removeEventListener(e,c),t(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof n)}var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n),nextTick=nextTickBrowser$1;catering.fromCallback=function(n,e){if(n===void 0){var t=new Promise(function(a,c){n=function(l,o){l?c(l):a(o)}});n[e!==void 0?e:"promise"]=t}else if(typeof n!="function")throw new TypeError("Callback must be a function");return n};catering.fromPromise=function(n,e){if(e===void 0)return n;n.then(function(t){nextTick(()=>e(null,t))}).catch(function(t){nextTick(()=>e(t))})};var abstractIterator={},common$6={};common$6.getCallback=function(n,e){return typeof n=="function"?n:e};common$6.getOptions=function(n,e){return typeof n=="object"&&n!==null?n:e!==void 0?e:{}};const{fromCallback:fromCallback$2}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$6,kPromise$2=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions=Object.freeze({}),noop$1=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,t,a){if(typeof e!="object"||e===null){const c=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${c}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=t[kKeyEncoding$1],this[kValueEncoding$1]=t[kValueEncoding$1],this[kLegacy]=a,this[kLimit]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let t;if(e===void 0)t=new Promise((a,c)=>{e=(l,o,i)=>{l?c(l):this[kLegacy]?o===void 0&&i===void 0?a():a([o,i]):a(o)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),t}_next(e){this.nextTick(e)}nextv(e,t,a){return a=getCallback$2(t,a),a=fromCallback$2(a,kPromise$2),t=getOptions$2(t,emptyOptions),Number.isInteger(e)?(this[kClosing]?this.nextTick(a,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(a,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=a,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,t,this[kHandleMany$1])),a[kPromise$2]):(this.nextTick(a,new TypeError("The first argument 'size' must be an integer")),a[kPromise$2])}_nextv(e,t,a){const c=[],l=(o,i,u)=>{if(o)return a(o);if(this[kLegacy]?i===void 0&&u===void 0:i===void 0)return a(null,c);c.push(this[kLegacy]?[i,u]:i),c.length===e?a(null,c):this._next(l)};this._next(l)}all(e,t){return t=getCallback$2(e,t),t=fromCallback$2(t,kPromise$2),e=getOptions$2(e,emptyOptions),this[kClosing]?this.nextTick(t,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(t,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=t,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),t[kPromise$2]}_all(e,t){let a=this[kCount];const c=[],l=()=>{const i=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-a):1e3;i<=0?this.nextTick(t,null,c):this._nextv(i,emptyOptions,o)},o=(i,u)=>{i?t(i):u.length===0?t(null,c):(c.push.apply(c,u),a+=u.length,l())};l()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$1:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,t,a){this[kAutoClose]?this.close(e.bind(null,t,a)):e(t,a)}seek(e,t){if(t=getOptions$2(t,emptyOptions),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const a=this.db.keyEncoding(t.keyEncoding||this[kKeyEncoding$1]),c=a.format;t.keyEncoding!==c&&(t={...t,keyEncoding:c});const l=this.db.prefixKey(a.encode(e),c);this._seek(l,t)}}}_seek(e,t){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$2(e,kPromise$2),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$2]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!0),this[kKeys]=t.keys!==!1,this[kValues]=t.values!==!1}[kHandleOne$1](e,t,a){const c=this[kFinishWork]();if(e)return c(e);try{t=this[kKeys]&&t!==void 0?this[kKeyEncoding$1].decode(t):void 0,a=this[kValues]&&a!==void 0?this[kValueEncoding$1].decode(a):void 0}catch(l){return c(new IteratorDecodeError("entry",l))}t===void 0&&a===void 0||this[kCount]++,c(null,t,a)}[kHandleMany$1](e,t){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(const c of t){const l=c[0],o=c[1];c[0]=this[kKeys]&&l!==void 0?this[kKeyEncoding$1].decode(l):void 0,c[1]=this[kValues]&&o!==void 0?this[kValueEncoding$1].decode(o):void 0}}catch(c){return this[kReturnMany](a,new IteratorDecodeError("entries",c))}this[kCount]+=t.length,this[kReturnMany](a,null,t)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const a=this[kFinishWork]();if(e)return a(e);try{t=t!==void 0?this[kKeyEncoding$1].decode(t):void 0}catch(c){return a(new IteratorDecodeError("key",c))}t!==void 0&&this[kCount]++,a(null,t)}[kHandleMany$1](e,t){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let c=0;c<t.length;c++){const l=t[c];t[c]=l!==void 0?this[kKeyEncoding$1].decode(l):void 0}}catch(c){return this[kReturnMany](a,new IteratorDecodeError("keys",c))}this[kCount]+=t.length,this[kReturnMany](a,null,t)}},AbstractValueIterator$3=class extends CommonIterator{constructor(e,t){super(e,t,!1)}[kHandleOne$1](e,t){const a=this[kFinishWork]();if(e)return a(e);try{t=t!==void 0?this[kValueEncoding$1].decode(t):void 0}catch(c){return a(new IteratorDecodeError("value",c))}t!==void 0&&this[kCount]++,a(null,t)}[kHandleMany$1](e,t){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let c=0;c<t.length;c++){const l=t[c];t[c]=l!==void 0?this[kValueEncoding$1].decode(l):void 0}}catch(c){return this[kReturnMany](a,new IteratorDecodeError("values",c))}this[kCount]+=t.length,this[kReturnMany](a,null,t)}};class IteratorDecodeError extends ModuleError$6{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}}for(const n of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,n.split(" ")[0],{get(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${n} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$3;abstractIterator.AbstractValueIterator=AbstractValueIterator$3;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$2,AbstractValueIterator:AbstractValueIterator$2}=abstractIterator,kIterator$1=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$2{constructor(e,t){super(e,t),this[kIterator$1]=e.iterator({...t,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$2{constructor(e,t){super(e,t),this[kIterator$1]=e.iterator({...t,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const n of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=n===DefaultKeyIterator$1,t=e?a=>a[0]:a=>a[1];n.prototype._next=function(a){this[kCallback]=a,this[kIterator$1].next(this[kHandleOne])},n.prototype[kHandleOne]=function(a,c,l){const o=this[kCallback];a?o(a):o(null,e?c:l)},n.prototype._nextv=function(a,c,l){this[kCallback]=l,this[kIterator$1].nextv(a,c,this[kHandleMany])},n.prototype._all=function(a,c){this[kCallback]=c,this[kIterator$1].all(a,this[kHandleMany])},n.prototype[kHandleMany]=function(a,c){const l=this[kCallback];a?l(a):l(null,c.map(t))},n.prototype._seek=function(a,c){this[kIterator$1].seek(a,c)},n.prototype._close=function(a){this[kIterator$1].close(a)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.iterator(t),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.keys(t),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator$1{constructor(e,t){super(e,t),this[kNut]=null,this[kFactory]=()=>e.values(t),this.db.defer(()=>this[kUndefer$1]())}};for(const n of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])n.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},n.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._nextv=function(e,t,a){this[kNut]!==null?this[kNut].nextv(e,t,a):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,a)):this.nextTick(a,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._all=function(e,t){this[kNut]!==null?this[kNut].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},n.prototype._seek=function(e,t){this[kNut]!==null?this[kNut]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},n.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$1}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$6,kPromise$1=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,t,a){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const c=this.db._checkKey(e)||this.db._checkValue(t);if(c)throw c;const l=a&&a.sublevel!=null?a.sublevel:this.db,o=a,i=l.keyEncoding(a&&a.keyEncoding),u=l.valueEncoding(a&&a.valueEncoding),d=i.format;a={...a,keyEncoding:d,valueEncoding:u.format},l!==this.db&&(a.sublevel=null);const m=l.prefixKey(i.encode(e),d),y=u.encode(t);return this._put(m,y,a),this[kOperations$1].push({...o,type:"put",key:e,value:t}),this}_put(e,t,a){}del(e,t){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const a=this.db._checkKey(e);if(a)throw a;const c=t&&t.sublevel!=null?t.sublevel:this.db,l=t,o=c.keyEncoding(t&&t.keyEncoding),i=o.format;return t={...t,keyEncoding:i},c!==this.db&&(t.sublevel=null),this._del(c.prefixKey(o.encode(e),i),t),this[kOperations$1].push({...l,type:"del",key:e}),this}_del(e,t){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,t){return t=getCallback$1(e,t),t=fromCallback$1(t,kPromise$1),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(t,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[kStatus$1]="writing",this._write(e,a=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>t(a)),a||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),t[kPromise$1]}_write(e,t){}close(e){return e=fromCallback$1(e,kPromise$1),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$1]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const t of e)t()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,t,a){this[kEncoded].push({...a,type:"put",key:e,value:t})}_del(e,t){this[kEncoded].push({...t,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(t):this.db._batch(this[kEncoded],e,t):this.nextTick(t,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty=Object.prototype.hasOwnProperty,rangeOptions$2=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(n,e){const t={};for(const a in n)if(hasOwnProperty.call(n,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new ModuleError$2(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$2.has(a)?t[a]=e.encode(n[a]):t[a]=n[a]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var queueMicrotask_1,hasRequiredQueueMicrotask;function requireQueueMicrotask(){if(hasRequiredQueueMicrotask)return queueMicrotask_1;hasRequiredQueueMicrotask=1;let n;return queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):e=>(n||(n=Promise.resolve())).then(e).catch(t=>setTimeout(()=>{throw t},0)),queueMicrotask_1}var nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const n=requireQueueMicrotask();return nextTickBrowser=function(e,...t){t.length===0?n(e):n(()=>e(...t))},nextTickBrowser}var buffer={};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,function(n){const e=requireBase64Js(),t=requireIeee754(),a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=i,n.SlowBuffer=j,n.INSPECT_MAX_BYTES=50;const c=2147483647;n.kMaxLength=c,i.TYPED_ARRAY_SUPPORT=l(),!i.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const g=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(g,h),g.foo()===42}catch{return!1}}Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}});function o(g){if(g>c)throw new RangeError('The value "'+g+'" is invalid for option "size"');const h=new Uint8Array(g);return Object.setPrototypeOf(h,i.prototype),h}function i(g,h,b){if(typeof g=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(g)}return u(g,h,b)}i.poolSize=8192;function u(g,h,b){if(typeof g=="string")return p(g,h);if(ArrayBuffer.isView(g))return _(g);if(g==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g);if(re(g,ArrayBuffer)||g&&re(g.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(re(g,SharedArrayBuffer)||g&&re(g.buffer,SharedArrayBuffer)))return w(g,h,b);if(typeof g=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const E=g.valueOf&&g.valueOf();if(E!=null&&E!==g)return i.from(E,h,b);const P=S(g);if(P)return P;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof g[Symbol.toPrimitive]=="function")return i.from(g[Symbol.toPrimitive]("string"),h,b);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof g)}i.from=function(g,h,b){return u(g,h,b)},Object.setPrototypeOf(i.prototype,Uint8Array.prototype),Object.setPrototypeOf(i,Uint8Array);function d(g){if(typeof g!="number")throw new TypeError('"size" argument must be of type number');if(g<0)throw new RangeError('The value "'+g+'" is invalid for option "size"')}function m(g,h,b){return d(g),g<=0?o(g):h!==void 0?typeof b=="string"?o(g).fill(h,b):o(g).fill(h):o(g)}i.alloc=function(g,h,b){return m(g,h,b)};function y(g){return d(g),o(g<0?0:I(g)|0)}i.allocUnsafe=function(g){return y(g)},i.allocUnsafeSlow=function(g){return y(g)};function p(g,h){if((typeof h!="string"||h==="")&&(h="utf8"),!i.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const b=x(g,h)|0;let E=o(b);const P=E.write(g,h);return P!==b&&(E=E.slice(0,P)),E}function T(g){const h=g.length<0?0:I(g.length)|0,b=o(h);for(let E=0;E<h;E+=1)b[E]=g[E]&255;return b}function _(g){if(re(g,Uint8Array)){const h=new Uint8Array(g);return w(h.buffer,h.byteOffset,h.byteLength)}return T(g)}function w(g,h,b){if(h<0||g.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(g.byteLength<h+(b||0))throw new RangeError('"length" is outside of buffer bounds');let E;return h===void 0&&b===void 0?E=new Uint8Array(g):b===void 0?E=new Uint8Array(g,h):E=new Uint8Array(g,h,b),Object.setPrototypeOf(E,i.prototype),E}function S(g){if(i.isBuffer(g)){const h=I(g.length)|0,b=o(h);return b.length===0||g.copy(b,0,0,h),b}if(g.length!==void 0)return typeof g.length!="number"||ie(g.length)?o(0):T(g);if(g.type==="Buffer"&&Array.isArray(g.data))return T(g.data)}function I(g){if(g>=c)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c.toString(16)+" bytes");return g|0}function j(g){return+g!=g&&(g=0),i.alloc(+g)}i.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==i.prototype},i.compare=function(h,b){if(re(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),re(b,Uint8Array)&&(b=i.from(b,b.offset,b.byteLength)),!i.isBuffer(h)||!i.isBuffer(b))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===b)return 0;let E=h.length,P=b.length;for(let F=0,X=Math.min(E,P);F<X;++F)if(h[F]!==b[F]){E=h[F],P=b[F];break}return E<P?-1:P<E?1:0},i.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(h,b){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return i.alloc(0);let E;if(b===void 0)for(b=0,E=0;E<h.length;++E)b+=h[E].length;const P=i.allocUnsafe(b);let F=0;for(E=0;E<h.length;++E){let X=h[E];if(re(X,Uint8Array))F+X.length>P.length?(i.isBuffer(X)||(X=i.from(X)),X.copy(P,F)):Uint8Array.prototype.set.call(P,X,F);else if(i.isBuffer(X))X.copy(P,F);else throw new TypeError('"list" argument must be an Array of Buffers');F+=X.length}return P};function x(g,h){if(i.isBuffer(g))return g.length;if(ArrayBuffer.isView(g)||re(g,ArrayBuffer))return g.byteLength;if(typeof g!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof g);const b=g.length,E=arguments.length>2&&arguments[2]===!0;if(!E&&b===0)return 0;let P=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return b;case"utf8":case"utf-8":return Y(g).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b*2;case"hex":return b>>>1;case"base64":return q(g).length;default:if(P)return E?-1:Y(g).length;h=(""+h).toLowerCase(),P=!0}}i.byteLength=x;function v(g,h,b){let E=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((b===void 0||b>this.length)&&(b=this.length),b<=0)||(b>>>=0,h>>>=0,b<=h))return"";for(g||(g="utf8");;)switch(g){case"hex":return oe(this,h,b);case"utf8":case"utf-8":return M(this,h,b);case"ascii":return J(this,h,b);case"latin1":case"binary":return ce(this,h,b);case"base64":return L(this,h,b);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,h,b);default:if(E)throw new TypeError("Unknown encoding: "+g);g=(g+"").toLowerCase(),E=!0}}i.prototype._isBuffer=!0;function O(g,h,b){const E=g[h];g[h]=g[b],g[b]=E}i.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let b=0;b<h;b+=2)O(this,b,b+1);return this},i.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let b=0;b<h;b+=4)O(this,b,b+3),O(this,b+1,b+2);return this},i.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let b=0;b<h;b+=8)O(this,b,b+7),O(this,b+1,b+6),O(this,b+2,b+5),O(this,b+3,b+4);return this},i.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?M(this,0,h):v.apply(this,arguments)},i.prototype.toLocaleString=i.prototype.toString,i.prototype.equals=function(h){if(!i.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:i.compare(this,h)===0},i.prototype.inspect=function(){let h="";const b=n.INSPECT_MAX_BYTES;return h=this.toString("hex",0,b).replace(/(.{2})/g,"$1 ").trim(),this.length>b&&(h+=" ... "),"<Buffer "+h+">"},a&&(i.prototype[a]=i.prototype.inspect),i.prototype.compare=function(h,b,E,P,F){if(re(h,Uint8Array)&&(h=i.from(h,h.offset,h.byteLength)),!i.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(b===void 0&&(b=0),E===void 0&&(E=h?h.length:0),P===void 0&&(P=0),F===void 0&&(F=this.length),b<0||E>h.length||P<0||F>this.length)throw new RangeError("out of range index");if(P>=F&&b>=E)return 0;if(P>=F)return-1;if(b>=E)return 1;if(b>>>=0,E>>>=0,P>>>=0,F>>>=0,this===h)return 0;let X=F-P,ge=E-b;const Re=Math.min(X,ge),je=this.slice(P,F),Pe=h.slice(b,E);for(let Te=0;Te<Re;++Te)if(je[Te]!==Pe[Te]){X=je[Te],ge=Pe[Te];break}return X<ge?-1:ge<X?1:0};function N(g,h,b,E,P){if(g.length===0)return-1;if(typeof b=="string"?(E=b,b=0):b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b=+b,ie(b)&&(b=P?0:g.length-1),b<0&&(b=g.length+b),b>=g.length){if(P)return-1;b=g.length-1}else if(b<0)if(P)b=0;else return-1;if(typeof h=="string"&&(h=i.from(h,E)),i.isBuffer(h))return h.length===0?-1:D(g,h,b,E,P);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?P?Uint8Array.prototype.indexOf.call(g,h,b):Uint8Array.prototype.lastIndexOf.call(g,h,b):D(g,[h],b,E,P);throw new TypeError("val must be string, number or Buffer")}function D(g,h,b,E,P){let F=1,X=g.length,ge=h.length;if(E!==void 0&&(E=String(E).toLowerCase(),E==="ucs2"||E==="ucs-2"||E==="utf16le"||E==="utf-16le")){if(g.length<2||h.length<2)return-1;F=2,X/=2,ge/=2,b/=2}function Re(Pe,Te){return F===1?Pe[Te]:Pe.readUInt16BE(Te*F)}let je;if(P){let Pe=-1;for(je=b;je<X;je++)if(Re(g,je)===Re(h,Pe===-1?0:je-Pe)){if(Pe===-1&&(Pe=je),je-Pe+1===ge)return Pe*F}else Pe!==-1&&(je-=je-Pe),Pe=-1}else for(b+ge>X&&(b=X-ge),je=b;je>=0;je--){let Pe=!0;for(let Te=0;Te<ge;Te++)if(Re(g,je+Te)!==Re(h,Te)){Pe=!1;break}if(Pe)return je}return-1}i.prototype.includes=function(h,b,E){return this.indexOf(h,b,E)!==-1},i.prototype.indexOf=function(h,b,E){return N(this,h,b,E,!0)},i.prototype.lastIndexOf=function(h,b,E){return N(this,h,b,E,!1)};function G(g,h,b,E){b=Number(b)||0;const P=g.length-b;E?(E=Number(E),E>P&&(E=P)):E=P;const F=h.length;E>F/2&&(E=F/2);let X;for(X=0;X<E;++X){const ge=parseInt(h.substr(X*2,2),16);if(ie(ge))return X;g[b+X]=ge}return X}function W(g,h,b,E){return ee(Y(h,g.length-b),g,b,E)}function U(g,h,b,E){return ee(ne(h),g,b,E)}function Q(g,h,b,E){return ee(q(h),g,b,E)}function Z(g,h,b,E){return ee(ae(h,g.length-b),g,b,E)}i.prototype.write=function(h,b,E,P){if(b===void 0)P="utf8",E=this.length,b=0;else if(E===void 0&&typeof b=="string")P=b,E=this.length,b=0;else if(isFinite(b))b=b>>>0,isFinite(E)?(E=E>>>0,P===void 0&&(P="utf8")):(P=E,E=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const F=this.length-b;if((E===void 0||E>F)&&(E=F),h.length>0&&(E<0||b<0)||b>this.length)throw new RangeError("Attempt to write outside buffer bounds");P||(P="utf8");let X=!1;for(;;)switch(P){case"hex":return G(this,h,b,E);case"utf8":case"utf-8":return W(this,h,b,E);case"ascii":case"latin1":case"binary":return U(this,h,b,E);case"base64":return Q(this,h,b,E);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,h,b,E);default:if(X)throw new TypeError("Unknown encoding: "+P);P=(""+P).toLowerCase(),X=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function L(g,h,b){return h===0&&b===g.length?e.fromByteArray(g):e.fromByteArray(g.slice(h,b))}function M(g,h,b){b=Math.min(g.length,b);const E=[];let P=h;for(;P<b;){const F=g[P];let X=null,ge=F>239?4:F>223?3:F>191?2:1;if(P+ge<=b){let Re,je,Pe,Te;switch(ge){case 1:F<128&&(X=F);break;case 2:Re=g[P+1],(Re&192)===128&&(Te=(F&31)<<6|Re&63,Te>127&&(X=Te));break;case 3:Re=g[P+1],je=g[P+2],(Re&192)===128&&(je&192)===128&&(Te=(F&15)<<12|(Re&63)<<6|je&63,Te>2047&&(Te<55296||Te>57343)&&(X=Te));break;case 4:Re=g[P+1],je=g[P+2],Pe=g[P+3],(Re&192)===128&&(je&192)===128&&(Pe&192)===128&&(Te=(F&15)<<18|(Re&63)<<12|(je&63)<<6|Pe&63,Te>65535&&Te<1114112&&(X=Te))}}X===null?(X=65533,ge=1):X>65535&&(X-=65536,E.push(X>>>10&1023|55296),X=56320|X&1023),E.push(X),P+=ge}return H(E)}const V=4096;function H(g){const h=g.length;if(h<=V)return String.fromCharCode.apply(String,g);let b="",E=0;for(;E<h;)b+=String.fromCharCode.apply(String,g.slice(E,E+=V));return b}function J(g,h,b){let E="";b=Math.min(g.length,b);for(let P=h;P<b;++P)E+=String.fromCharCode(g[P]&127);return E}function ce(g,h,b){let E="";b=Math.min(g.length,b);for(let P=h;P<b;++P)E+=String.fromCharCode(g[P]);return E}function oe(g,h,b){const E=g.length;(!h||h<0)&&(h=0),(!b||b<0||b>E)&&(b=E);let P="";for(let F=h;F<b;++F)P+=de[g[F]];return P}function le(g,h,b){const E=g.slice(h,b);let P="";for(let F=0;F<E.length-1;F+=2)P+=String.fromCharCode(E[F]+E[F+1]*256);return P}i.prototype.slice=function(h,b){const E=this.length;h=~~h,b=b===void 0?E:~~b,h<0?(h+=E,h<0&&(h=0)):h>E&&(h=E),b<0?(b+=E,b<0&&(b=0)):b>E&&(b=E),b<h&&(b=h);const P=this.subarray(h,b);return Object.setPrototypeOf(P,i.prototype),P};function ue(g,h,b){if(g%1!==0||g<0)throw new RangeError("offset is not uint");if(g+h>b)throw new RangeError("Trying to access beyond buffer length")}i.prototype.readUintLE=i.prototype.readUIntLE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=this[h],F=1,X=0;for(;++X<b&&(F*=256);)P+=this[h+X]*F;return P},i.prototype.readUintBE=i.prototype.readUIntBE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=this[h+--b],F=1;for(;b>0&&(F*=256);)P+=this[h+--b]*F;return P},i.prototype.readUint8=i.prototype.readUInt8=function(h,b){return h=h>>>0,b||ue(h,1,this.length),this[h]},i.prototype.readUint16LE=i.prototype.readUInt16LE=function(h,b){return h=h>>>0,b||ue(h,2,this.length),this[h]|this[h+1]<<8},i.prototype.readUint16BE=i.prototype.readUInt16BE=function(h,b){return h=h>>>0,b||ue(h,2,this.length),this[h]<<8|this[h+1]},i.prototype.readUint32LE=i.prototype.readUInt32LE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},i.prototype.readUint32BE=i.prototype.readUInt32BE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},i.prototype.readBigUInt64LE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=b+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,F=this[++h]+this[++h]*2**8+this[++h]*2**16+E*2**24;return BigInt(P)+(BigInt(F)<<BigInt(32))}),i.prototype.readBigUInt64BE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=b*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],F=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+E;return(BigInt(P)<<BigInt(32))+BigInt(F)}),i.prototype.readIntLE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=this[h],F=1,X=0;for(;++X<b&&(F*=256);)P+=this[h+X]*F;return F*=128,P>=F&&(P-=Math.pow(2,8*b)),P},i.prototype.readIntBE=function(h,b,E){h=h>>>0,b=b>>>0,E||ue(h,b,this.length);let P=b,F=1,X=this[h+--P];for(;P>0&&(F*=256);)X+=this[h+--P]*F;return F*=128,X>=F&&(X-=Math.pow(2,8*b)),X},i.prototype.readInt8=function(h,b){return h=h>>>0,b||ue(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},i.prototype.readInt16LE=function(h,b){h=h>>>0,b||ue(h,2,this.length);const E=this[h]|this[h+1]<<8;return E&32768?E|4294901760:E},i.prototype.readInt16BE=function(h,b){h=h>>>0,b||ue(h,2,this.length);const E=this[h+1]|this[h]<<8;return E&32768?E|4294901760:E},i.prototype.readInt32LE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},i.prototype.readInt32BE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},i.prototype.readBigInt64LE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(E<<24);return(BigInt(P)<<BigInt(32))+BigInt(b+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),i.prototype.readBigInt64BE=me(function(h){h=h>>>0,C(h,"offset");const b=this[h],E=this[h+7];(b===void 0||E===void 0)&&$(h,this.length-8);const P=(b<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(P)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+E)}),i.prototype.readFloatLE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),t.read(this,h,!0,23,4)},i.prototype.readFloatBE=function(h,b){return h=h>>>0,b||ue(h,4,this.length),t.read(this,h,!1,23,4)},i.prototype.readDoubleLE=function(h,b){return h=h>>>0,b||ue(h,8,this.length),t.read(this,h,!0,52,8)},i.prototype.readDoubleBE=function(h,b){return h=h>>>0,b||ue(h,8,this.length),t.read(this,h,!1,52,8)};function be(g,h,b,E,P,F){if(!i.isBuffer(g))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>P||h<F)throw new RangeError('"value" argument is out of bounds');if(b+E>g.length)throw new RangeError("Index out of range")}i.prototype.writeUintLE=i.prototype.writeUIntLE=function(h,b,E,P){if(h=+h,b=b>>>0,E=E>>>0,!P){const ge=Math.pow(2,8*E)-1;be(this,h,b,E,ge,0)}let F=1,X=0;for(this[b]=h&255;++X<E&&(F*=256);)this[b+X]=h/F&255;return b+E},i.prototype.writeUintBE=i.prototype.writeUIntBE=function(h,b,E,P){if(h=+h,b=b>>>0,E=E>>>0,!P){const ge=Math.pow(2,8*E)-1;be(this,h,b,E,ge,0)}let F=E-1,X=1;for(this[b+F]=h&255;--F>=0&&(X*=256);)this[b+F]=h/X&255;return b+E},i.prototype.writeUint8=i.prototype.writeUInt8=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,1,255,0),this[b]=h&255,b+1},i.prototype.writeUint16LE=i.prototype.writeUInt16LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,65535,0),this[b]=h&255,this[b+1]=h>>>8,b+2},i.prototype.writeUint16BE=i.prototype.writeUInt16BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,65535,0),this[b]=h>>>8,this[b+1]=h&255,b+2},i.prototype.writeUint32LE=i.prototype.writeUInt32LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,4294967295,0),this[b+3]=h>>>24,this[b+2]=h>>>16,this[b+1]=h>>>8,this[b]=h&255,b+4},i.prototype.writeUint32BE=i.prototype.writeUInt32BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,4294967295,0),this[b]=h>>>24,this[b+1]=h>>>16,this[b+2]=h>>>8,this[b+3]=h&255,b+4};function Ee(g,h,b,E,P){Le(h,E,P,g,b,7);let F=Number(h&BigInt(4294967295));g[b++]=F,F=F>>8,g[b++]=F,F=F>>8,g[b++]=F,F=F>>8,g[b++]=F;let X=Number(h>>BigInt(32)&BigInt(4294967295));return g[b++]=X,X=X>>8,g[b++]=X,X=X>>8,g[b++]=X,X=X>>8,g[b++]=X,b}function Ae(g,h,b,E,P){Le(h,E,P,g,b,7);let F=Number(h&BigInt(4294967295));g[b+7]=F,F=F>>8,g[b+6]=F,F=F>>8,g[b+5]=F,F=F>>8,g[b+4]=F;let X=Number(h>>BigInt(32)&BigInt(4294967295));return g[b+3]=X,X=X>>8,g[b+2]=X,X=X>>8,g[b+1]=X,X=X>>8,g[b]=X,b+8}i.prototype.writeBigUInt64LE=me(function(h,b=0){return Ee(this,h,b,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeBigUInt64BE=me(function(h,b=0){return Ae(this,h,b,BigInt(0),BigInt("0xffffffffffffffff"))}),i.prototype.writeIntLE=function(h,b,E,P){if(h=+h,b=b>>>0,!P){const Re=Math.pow(2,8*E-1);be(this,h,b,E,Re-1,-Re)}let F=0,X=1,ge=0;for(this[b]=h&255;++F<E&&(X*=256);)h<0&&ge===0&&this[b+F-1]!==0&&(ge=1),this[b+F]=(h/X>>0)-ge&255;return b+E},i.prototype.writeIntBE=function(h,b,E,P){if(h=+h,b=b>>>0,!P){const Re=Math.pow(2,8*E-1);be(this,h,b,E,Re-1,-Re)}let F=E-1,X=1,ge=0;for(this[b+F]=h&255;--F>=0&&(X*=256);)h<0&&ge===0&&this[b+F+1]!==0&&(ge=1),this[b+F]=(h/X>>0)-ge&255;return b+E},i.prototype.writeInt8=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,1,127,-128),h<0&&(h=255+h+1),this[b]=h&255,b+1},i.prototype.writeInt16LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,32767,-32768),this[b]=h&255,this[b+1]=h>>>8,b+2},i.prototype.writeInt16BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,2,32767,-32768),this[b]=h>>>8,this[b+1]=h&255,b+2},i.prototype.writeInt32LE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,2147483647,-2147483648),this[b]=h&255,this[b+1]=h>>>8,this[b+2]=h>>>16,this[b+3]=h>>>24,b+4},i.prototype.writeInt32BE=function(h,b,E){return h=+h,b=b>>>0,E||be(this,h,b,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[b]=h>>>24,this[b+1]=h>>>16,this[b+2]=h>>>8,this[b+3]=h&255,b+4},i.prototype.writeBigInt64LE=me(function(h,b=0){return Ee(this,h,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),i.prototype.writeBigInt64BE=me(function(h,b=0){return Ae(this,h,b,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(g,h,b,E,P,F){if(b+E>g.length)throw new RangeError("Index out of range");if(b<0)throw new RangeError("Index out of range")}function Oe(g,h,b,E,P){return h=+h,b=b>>>0,P||xe(g,h,b,4),t.write(g,h,b,E,23,4),b+4}i.prototype.writeFloatLE=function(h,b,E){return Oe(this,h,b,!0,E)},i.prototype.writeFloatBE=function(h,b,E){return Oe(this,h,b,!1,E)};function fe(g,h,b,E,P){return h=+h,b=b>>>0,P||xe(g,h,b,8),t.write(g,h,b,E,52,8),b+8}i.prototype.writeDoubleLE=function(h,b,E){return fe(this,h,b,!0,E)},i.prototype.writeDoubleBE=function(h,b,E){return fe(this,h,b,!1,E)},i.prototype.copy=function(h,b,E,P){if(!i.isBuffer(h))throw new TypeError("argument should be a Buffer");if(E||(E=0),!P&&P!==0&&(P=this.length),b>=h.length&&(b=h.length),b||(b=0),P>0&&P<E&&(P=E),P===E||h.length===0||this.length===0)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(E<0||E>=this.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("sourceEnd out of bounds");P>this.length&&(P=this.length),h.length-b<P-E&&(P=h.length-b+E);const F=P-E;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(b,E,P):Uint8Array.prototype.set.call(h,this.subarray(E,P),b),F},i.prototype.fill=function(h,b,E,P){if(typeof h=="string"){if(typeof b=="string"?(P=b,b=0,E=this.length):typeof E=="string"&&(P=E,E=this.length),P!==void 0&&typeof P!="string")throw new TypeError("encoding must be a string");if(typeof P=="string"&&!i.isEncoding(P))throw new TypeError("Unknown encoding: "+P);if(h.length===1){const X=h.charCodeAt(0);(P==="utf8"&&X<128||P==="latin1")&&(h=X)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(b<0||this.length<b||this.length<E)throw new RangeError("Out of range index");if(E<=b)return this;b=b>>>0,E=E===void 0?this.length:E>>>0,h||(h=0);let F;if(typeof h=="number")for(F=b;F<E;++F)this[F]=h;else{const X=i.isBuffer(h)?h:i.from(h,P),ge=X.length;if(ge===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(F=0;F<E-b;++F)this[F+b]=X[F%ge]}return this};const Se={};function Ne(g,h,b){Se[g]=class extends b{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${g}]`,this.stack,delete this.name}get code(){return g}set code(P){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:P,writable:!0})}toString(){return`${this.name} [${g}]: ${this.message}`}}}Ne("ERR_BUFFER_OUT_OF_BOUNDS",function(g){return g?`${g} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ne("ERR_INVALID_ARG_TYPE",function(g,h){return`The "${g}" argument must be of type number. Received type ${typeof h}`},TypeError),Ne("ERR_OUT_OF_RANGE",function(g,h,b){let E=`The value of "${g}" is out of range.`,P=b;return Number.isInteger(b)&&Math.abs(b)>2**32?P=De(String(b)):typeof b=="bigint"&&(P=String(b),(b>BigInt(2)**BigInt(32)||b<-(BigInt(2)**BigInt(32)))&&(P=De(P)),P+="n"),E+=` It must be ${h}. Received ${P}`,E},RangeError);function De(g){let h="",b=g.length;const E=g[0]==="-"?1:0;for(;b>=E+4;b-=3)h=`_${g.slice(b-3,b)}${h}`;return`${g.slice(0,b)}${h}`}function Ie(g,h,b){C(h,"offset"),(g[h]===void 0||g[h+b]===void 0)&&$(h,g.length-(b+1))}function Le(g,h,b,E,P,F){if(g>b||g<h){const X=typeof h=="bigint"?"n":"";let ge;throw F>3?h===0||h===BigInt(0)?ge=`>= 0${X} and < 2${X} ** ${(F+1)*8}${X}`:ge=`>= -(2${X} ** ${(F+1)*8-1}${X}) and < 2 ** ${(F+1)*8-1}${X}`:ge=`>= ${h}${X} and <= ${b}${X}`,new Se.ERR_OUT_OF_RANGE("value",ge,g)}Ie(E,P,F)}function C(g,h){if(typeof g!="number")throw new Se.ERR_INVALID_ARG_TYPE(h,"number",g)}function $(g,h,b){throw Math.floor(g)!==g?(C(g,b),new Se.ERR_OUT_OF_RANGE(b||"offset","an integer",g)):h<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE(b||"offset",`>= ${b?1:0} and <= ${h}`,g)}const z=/[^+/0-9A-Za-z-_]/g;function se(g){if(g=g.split("=")[0],g=g.trim().replace(z,""),g.length<2)return"";for(;g.length%4!==0;)g=g+"=";return g}function Y(g,h){h=h||1/0;let b;const E=g.length;let P=null;const F=[];for(let X=0;X<E;++X){if(b=g.charCodeAt(X),b>55295&&b<57344){if(!P){if(b>56319){(h-=3)>-1&&F.push(239,191,189);continue}else if(X+1===E){(h-=3)>-1&&F.push(239,191,189);continue}P=b;continue}if(b<56320){(h-=3)>-1&&F.push(239,191,189),P=b;continue}b=(P-55296<<10|b-56320)+65536}else P&&(h-=3)>-1&&F.push(239,191,189);if(P=null,b<128){if((h-=1)<0)break;F.push(b)}else if(b<2048){if((h-=2)<0)break;F.push(b>>6|192,b&63|128)}else if(b<65536){if((h-=3)<0)break;F.push(b>>12|224,b>>6&63|128,b&63|128)}else if(b<1114112){if((h-=4)<0)break;F.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw new Error("Invalid code point")}return F}function ne(g){const h=[];for(let b=0;b<g.length;++b)h.push(g.charCodeAt(b)&255);return h}function ae(g,h){let b,E,P;const F=[];for(let X=0;X<g.length&&!((h-=2)<0);++X)b=g.charCodeAt(X),E=b>>8,P=b%256,F.push(P),F.push(E);return F}function q(g){return e.toByteArray(se(g))}function ee(g,h,b,E){let P;for(P=0;P<E&&!(P+b>=h.length||P>=g.length);++P)h[P+b]=g[P];return P}function re(g,h){return g instanceof h||g!=null&&g.constructor!=null&&g.constructor.name!=null&&g.constructor.name===h.name}function ie(g){return g!==g}const de=function(){const g="0123456789abcdef",h=new Array(256);for(let b=0;b<16;++b){const E=b*16;for(let P=0;P<16;++P)h[E+P]=g[b]+g[P]}return h}();function me(g){return typeof BigInt>"u"?_e:g}function _e(){throw new Error("BigInt not supported")}}(buffer)),buffer}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:n,AbstractKeyIterator:e,AbstractValueIterator:t}=abstractIterator,a=Symbol("unfix"),c=Symbol("iterator"),l=Symbol("handleOne"),o=Symbol("handleMany"),i=Symbol("callback");class u extends n{constructor(p,T,_,w){super(p,T),this[c]=_,this[a]=w,this[l]=this[l].bind(this),this[o]=this[o].bind(this),this[i]=null}[l](p,T,_){const w=this[i];if(p)return w(p);T!==void 0&&(T=this[a](T)),w(p,T,_)}[o](p,T){const _=this[i];if(p)return _(p);for(const w of T){const S=w[0];S!==void 0&&(w[0]=this[a](S))}_(p,T)}}class d extends e{constructor(p,T,_,w){super(p,T),this[c]=_,this[a]=w,this[l]=this[l].bind(this),this[o]=this[o].bind(this),this[i]=null}[l](p,T){const _=this[i];if(p)return _(p);T!==void 0&&(T=this[a](T)),_(p,T)}[o](p,T){const _=this[i];if(p)return _(p);for(let w=0;w<T.length;w++){const S=T[w];S!==void 0&&(T[w]=this[a](S))}_(p,T)}}class m extends t{constructor(p,T,_){super(p,T),this[c]=_}}for(const y of[u,d])y.prototype._next=function(p){this[i]=p,this[c].next(this[l])},y.prototype._nextv=function(p,T,_){this[i]=_,this[c].nextv(p,T,this[o])},y.prototype._all=function(p,T){this[i]=T,this[c].all(p,this[o])};for(const y of[m])y.prototype._next=function(p){this[c].next(p)},y.prototype._nextv=function(p,T,_){this[c].nextv(p,T,_)},y.prototype._all=function(p,T){this[c].all(p,T)};for(const y of[u,d,m])y.prototype._seek=function(p,T){this[c].seek(p,T)},y.prototype._close=function(p){this[c].close(p)};return abstractSublevelIterator.AbstractSublevelIterator=u,abstractSublevelIterator.AbstractSublevelKeyIterator=d,abstractSublevelIterator.AbstractSublevelValueIterator=m,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const n=moduleError,{Buffer:e}=requireBuffer()||{},{AbstractSublevelIterator:t,AbstractSublevelKeyIterator:a,AbstractSublevelValueIterator:c}=requireAbstractSublevelIterator(),l=Symbol("prefix"),o=Symbol("upperBound"),i=Symbol("prefixRange"),u=Symbol("parent"),d=Symbol("unfix"),m=new TextEncoder,y={separator:"!"};abstractSublevel=function({AbstractLevel:I}){class j extends I{static defaults(v){if(typeof v=="string")throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(v&&v.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return v==null?y:v.separator?v:{...v,separator:"!"}}constructor(v,O,N){const{separator:D,manifest:G,...W}=j.defaults(N);O=S(O,D);const U=D.charCodeAt(0)+1,Q=v[u]||v;if(!m.encode(O).every(M=>M>U&&M<127))throw new n(`Prefix must use bytes > ${U} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(p(Q,G),W);const Z=(v.prefix||"")+D+O+D,L=Z.slice(0,-1)+String.fromCharCode(U);this[u]=Q,this[l]=new _(Z),this[o]=new _(L),this[d]=new w,this.nextTick=Q.nextTick}prefixKey(v,O){if(O==="utf8")return this[l].utf8+v;if(v.byteLength===0)return this[l][O];if(O==="view"){const N=this[l].view,D=new Uint8Array(N.byteLength+v.byteLength);return D.set(N,0),D.set(v,N.byteLength),D}else{const N=this[l].buffer;return e.concat([N,v],N.byteLength+v.byteLength)}}[i](v,O){v.gte!==void 0?v.gte=this.prefixKey(v.gte,O):v.gt!==void 0?v.gt=this.prefixKey(v.gt,O):v.gte=this[l][O],v.lte!==void 0?v.lte=this.prefixKey(v.lte,O):v.lt!==void 0?v.lt=this.prefixKey(v.lt,O):v.lte=this[o][O]}get prefix(){return this[l].utf8}get db(){return this[u]}_open(v,O){this[u].open({passive:!0},O)}_put(v,O,N,D){this[u].put(v,O,N,D)}_get(v,O,N){this[u].get(v,O,N)}_getMany(v,O,N){this[u].getMany(v,O,N)}_del(v,O,N){this[u].del(v,O,N)}_batch(v,O,N){this[u].batch(v,O,N)}_clear(v,O){this[i](v,v.keyEncoding),this[u].clear(v,O)}_iterator(v){this[i](v,v.keyEncoding);const O=this[u].iterator(v),N=this[d].get(this[l].utf8.length,v.keyEncoding);return new t(this,v,O,N)}_keys(v){this[i](v,v.keyEncoding);const O=this[u].keys(v),N=this[d].get(this[l].utf8.length,v.keyEncoding);return new a(this,v,O,N)}_values(v){this[i](v,v.keyEncoding);const O=this[u].values(v);return new c(this,v,O)}}return{AbstractSublevel:j}};const p=function(I,j){return{...I.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...j,encodings:{utf8:T(I,"utf8"),buffer:T(I,"buffer"),view:T(I,"view")}}},T=function(I,j){return I.supports.encodings[j]?I.keyEncoding(j).name===j:!1};class _{constructor(j){this.utf8=j,this.view=m.encode(j),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class w{constructor(){this.cache=new Map}get(j,x){let v=this.cache.get(x);return v===void 0&&(x==="view"?v=function(O,N){return N.subarray(O)}.bind(null,j):v=function(O,N){return N.slice(O)}.bind(null,j),this.cache.set(x,v)),v}}const S=function(I,j){let x=0,v=I.length;for(;x<v&&I[x]===j;)x++;for(;v>x&&I[v-1]===j;)v--;return I.slice(x,v)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter}=eventsExports,{fromCallback}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$6,rangeOptions$1=rangeOptions_1,kPromise=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop=()=>{};let AbstractLevel$1=class extends EventEmitter{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=getOptions(t);const{keyEncoding:a,valueEncoding:c,passive:l,...o}=t;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=o,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(a||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(c||"utf8");for(const i of this[kTranscoder].encodings())this.supports.encodings[i.commonName]||(this.supports.encodings[i.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,t){t=getCallback(e,t),t=fromCallback(t,kPromise),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const a=c=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,c?()=>a(c):a):this[kStatus]!=="open"?t(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:c})):t()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,a):this.nextTick(a):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,c=>{if(c){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),a(c)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),a()})):this[kStatus]==="open"?this.nextTick(a):this.once(kLanded,()=>this.open(e,t)),t[kPromise]}_open(e,t){this.nextTick(t)}close(e){e=fromCallback(e,kPromise);const t=a=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,a?t(a):t):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const a=c=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),t(c)};this[kCloseResources](()=>{this._close(c=>{if(c)return a(c);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),t()})})}else this[kStatus]==="closed"?this.nextTick(t):this.once(kLanded,()=>this.close(e));return e[kPromise]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let t=this[kResources].size,a=!0;const c=()=>{--t===0&&(a?this.nextTick(e):e())};for(const l of this[kResources])l.close(c);a=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,t,a){if(a=getCallback(t,a),a=fromCallback(a,kPromise),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,t,a)),a[kPromise];if(maybeError(this,a))return a[kPromise];const c=this._checkKey(e);if(c)return this.nextTick(a,c),a[kPromise];const l=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),i=l.format,u=o.format;return(t.keyEncoding!==i||t.valueEncoding!==u)&&(t=Object.assign({},t,{keyEncoding:i,valueEncoding:u})),this._get(this.prefixKey(l.encode(e),i),t,(d,m)=>{if(d)return(d.code==="LEVEL_NOT_FOUND"||d.notFound||/NotFound/i.test(d))&&(d.code||(d.code="LEVEL_NOT_FOUND"),d.notFound||(d.notFound=!0),d.status||(d.status=404)),a(d);try{m=o.decode(m)}catch(y){return a(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:y}))}a(null,m)}),a[kPromise]}_get(e,t,a){this.nextTick(a,new Error("NotFound"))}getMany(e,t,a){if(a=getCallback(t,a),a=fromCallback(a,kPromise),t=getOptions(t,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,t,a)),a[kPromise];if(maybeError(this,a))return a[kPromise];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[kPromise];if(e.length===0)return this.nextTick(a,null,[]),a[kPromise];const c=this.keyEncoding(t.keyEncoding),l=this.valueEncoding(t.valueEncoding),o=c.format,i=l.format;(t.keyEncoding!==o||t.valueEncoding!==i)&&(t=Object.assign({},t,{keyEncoding:o,valueEncoding:i}));const u=new Array(e.length);for(let d=0;d<e.length;d++){const m=e[d],y=this._checkKey(m);if(y)return this.nextTick(a,y),a[kPromise];u[d]=this.prefixKey(c.encode(m),o)}return this._getMany(u,t,(d,m)=>{if(d)return a(d);try{for(let y=0;y<m.length;y++)m[y]!==void 0&&(m[y]=l.decode(m[y]))}catch(y){return a(new ModuleError$1(`Could not decode one or more of ${m.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:y}))}a(null,m)}),a[kPromise]}_getMany(e,t,a){this.nextTick(a,null,new Array(e.length).fill(void 0))}put(e,t,a,c){if(c=getCallback(a,c),c=fromCallback(c,kPromise),a=getOptions(a,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,t,a,c)),c[kPromise];if(maybeError(this,c))return c[kPromise];const l=this._checkKey(e)||this._checkValue(t);if(l)return this.nextTick(c,l),c[kPromise];const o=this.keyEncoding(a.keyEncoding),i=this.valueEncoding(a.valueEncoding),u=o.format,d=i.format;(a.keyEncoding!==u||a.valueEncoding!==d)&&(a=Object.assign({},a,{keyEncoding:u,valueEncoding:d}));const m=this.prefixKey(o.encode(e),u),y=i.encode(t);return this._put(m,y,a,p=>{if(p)return c(p);this.emit("put",e,t),c()}),c[kPromise]}_put(e,t,a,c){this.nextTick(c)}del(e,t,a){if(a=getCallback(t,a),a=fromCallback(a,kPromise),t=getOptions(t,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,t,a)),a[kPromise];if(maybeError(this,a))return a[kPromise];const c=this._checkKey(e);if(c)return this.nextTick(a,c),a[kPromise];const l=this.keyEncoding(t.keyEncoding),o=l.format;return t.keyEncoding!==o&&(t=Object.assign({},t,{keyEncoding:o})),this._del(this.prefixKey(l.encode(e),o),t,i=>{if(i)return a(i);this.emit("del",e),a()}),a[kPromise]}_del(e,t,a){this.nextTick(a)}batch(e,t,a){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?a=e:a=getCallback(t,a),a=fromCallback(a,kPromise),t=getOptions(t,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,t,a)),a[kPromise];if(maybeError(this,a))return a[kPromise];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[kPromise];if(e.length===0)return this.nextTick(a),a[kPromise];const c=new Array(e.length),{keyEncoding:l,valueEncoding:o,...i}=t;for(let u=0;u<e.length;u++){if(typeof e[u]!="object"||e[u]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[kPromise];const d=Object.assign({},e[u]);if(d.type!=="put"&&d.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[kPromise];const m=this._checkKey(d.key);if(m)return this.nextTick(a,m),a[kPromise];const y=d.sublevel!=null?d.sublevel:this,p=y.keyEncoding(d.keyEncoding||l),T=p.format;if(d.key=y.prefixKey(p.encode(d.key),T),d.keyEncoding=T,d.type==="put"){const _=this._checkValue(d.value);if(_)return this.nextTick(a,_),a[kPromise];const w=y.valueEncoding(d.valueEncoding||o);d.value=w.encode(d.value),d.valueEncoding=w.format}y!==this&&(d.sublevel=null),c[u]=d}return this._batch(c,i,u=>{if(u)return a(u);this.emit("batch",e),a()}),a[kPromise]}_batch(e,t,a){this.nextTick(a)}sublevel(e,t){return this._sublevel(e,AbstractSublevel.defaults(t))}_sublevel(e,t){return new AbstractSublevel(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=getCallback(e,t),t=fromCallback(t,kPromise),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,t)),t[kPromise];if(maybeError(this,t))return t[kPromise];const a=e,c=this.keyEncoding(e.keyEncoding);return e=rangeOptions$1(e,c),e.keyEncoding=c.format,e.limit===0?this.nextTick(t):this._clear(e,l=>{if(l)return t(l);this.emit("clear",a),t()}),t[kPromise]}_clear(e,t){this.nextTick(t)}iterator(e){const t=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=t.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const t=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=t.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const t=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions$1(e,t),e[AbstractIterator$1.keyEncoding]=t,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=t.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(n,e){return n[kStatus]!=="open"?(n.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(n){return Object.keys(n.supports.encodings).filter(e=>!!n.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;var rbtree=createRBTree,RED=0,BLACK=1;function RBNode(n,e,t,a,c,l){this._color=n,this.key=e,this.value=t,this.left=a,this.right=c,this._count=l}function cloneNode(n){return new RBNode(n._color,n.key,n.value,n.left,n.right,n._count)}function repaint(n,e){return new RBNode(n,e.key,e.value,e.left,e.right,e._count)}function recount(n){n._count=1+(n.left?n.left._count:0)+(n.right?n.right._count:0)}function RedBlackTree(n,e){this._compare=n,this.root=e}var proto=RedBlackTree.prototype;Object.defineProperty(proto,"keys",{get:function(){var n=[];return this.forEach(function(e,t){n.push(e)}),n}});Object.defineProperty(proto,"values",{get:function(){var n=[];return this.forEach(function(e,t){n.push(t)}),n}});Object.defineProperty(proto,"length",{get:function(){return this.root?this.root._count:0}});proto.insert=function(n,e){for(var t=this._compare,a=this.root,c=[],l=[];a;){var o=t(n,a.key);c.push(a),l.push(o),o<=0?a=a.left:a=a.right}c.push(new RBNode(RED,n,e,null,null,1));for(var i=c.length-2;i>=0;--i){var a=c[i];l[i]<=0?c[i]=new RBNode(a._color,a.key,a.value,c[i+1],a.right,a._count+1):c[i]=new RBNode(a._color,a.key,a.value,a.left,c[i+1],a._count+1)}for(var i=c.length-1;i>1;--i){var u=c[i-1],a=c[i];if(u._color===BLACK||a._color===BLACK)break;var d=c[i-2];if(d.left===u)if(u.left===a){var m=d.right;if(m&&m._color===RED)u._color=BLACK,d.right=repaint(BLACK,m),d._color=RED,i-=1;else{if(d._color=RED,d.left=u.right,u._color=BLACK,u.right=d,c[i-2]=u,c[i-1]=a,recount(d),recount(u),i>=3){var y=c[i-3];y.left===d?y.left=u:y.right=u}break}}else{var m=d.right;if(m&&m._color===RED)u._color=BLACK,d.right=repaint(BLACK,m),d._color=RED,i-=1;else{if(u.right=a.left,d._color=RED,d.left=a.right,a._color=BLACK,a.left=u,a.right=d,c[i-2]=a,c[i-1]=u,recount(d),recount(u),recount(a),i>=3){var y=c[i-3];y.left===d?y.left=a:y.right=a}break}}else if(u.right===a){var m=d.left;if(m&&m._color===RED)u._color=BLACK,d.left=repaint(BLACK,m),d._color=RED,i-=1;else{if(d._color=RED,d.right=u.left,u._color=BLACK,u.left=d,c[i-2]=u,c[i-1]=a,recount(d),recount(u),i>=3){var y=c[i-3];y.right===d?y.right=u:y.left=u}break}}else{var m=d.left;if(m&&m._color===RED)u._color=BLACK,d.left=repaint(BLACK,m),d._color=RED,i-=1;else{if(u.left=a.right,d._color=RED,d.right=a.left,a._color=BLACK,a.right=u,a.left=d,c[i-2]=a,c[i-1]=u,recount(d),recount(u),recount(a),i>=3){var y=c[i-3];y.right===d?y.right=a:y.left=a}break}}}return c[0]._color=BLACK,new RedBlackTree(t,c[0])};function doVisitFull(n,e){if(e.left){var t=doVisitFull(n,e.left);if(t)return t}var t=n(e.key,e.value);if(t)return t;if(e.right)return doVisitFull(n,e.right)}function doVisitHalf(n,e,t,a){var c=e(n,a.key);if(c<=0){if(a.left){var l=doVisitHalf(n,e,t,a.left);if(l)return l}var l=t(a.key,a.value);if(l)return l}if(a.right)return doVisitHalf(n,e,t,a.right)}function doVisit(n,e,t,a,c){var l=t(n,c.key),o=t(e,c.key),i;if(l<=0&&(c.left&&(i=doVisit(n,e,t,a,c.left),i)||o>0&&(i=a(c.key,c.value),i)))return i;if(o>0&&c.right)return doVisit(n,e,t,a,c.right)}proto.forEach=function(e,t,a){if(this.root)switch(arguments.length){case 1:return doVisitFull(e,this.root);case 2:return doVisitHalf(t,this._compare,e,this.root);case 3:return this._compare(t,a)>=0?void 0:doVisit(t,a,this._compare,e,this.root)}};Object.defineProperty(proto,"begin",{get:function(){for(var n=[],e=this.root;e;)n.push(e),e=e.left;return new RedBlackTreeIterator(this,n)}});Object.defineProperty(proto,"end",{get:function(){for(var n=[],e=this.root;e;)n.push(e),e=e.right;return new RedBlackTreeIterator(this,n)}});proto.at=function(n){if(n<0)return new RedBlackTreeIterator(this,[]);for(var e=this.root,t=[];;){if(t.push(e),e.left){if(n<e.left._count){e=e.left;continue}n-=e.left._count}if(!n)return new RedBlackTreeIterator(this,t);if(n-=1,e.right){if(n>=e.right._count)break;e=e.right}else break}return new RedBlackTreeIterator(this,[])};proto.ge=function(n){for(var e=this._compare,t=this.root,a=[],c=0;t;){var l=e(n,t.key);a.push(t),l<=0&&(c=a.length),l<=0?t=t.left:t=t.right}return a.length=c,new RedBlackTreeIterator(this,a)};proto.gt=function(n){for(var e=this._compare,t=this.root,a=[],c=0;t;){var l=e(n,t.key);a.push(t),l<0&&(c=a.length),l<0?t=t.left:t=t.right}return a.length=c,new RedBlackTreeIterator(this,a)};proto.lt=function(n){for(var e=this._compare,t=this.root,a=[],c=0;t;){var l=e(n,t.key);a.push(t),l>0&&(c=a.length),l<=0?t=t.left:t=t.right}return a.length=c,new RedBlackTreeIterator(this,a)};proto.le=function(n){for(var e=this._compare,t=this.root,a=[],c=0;t;){var l=e(n,t.key);a.push(t),l>=0&&(c=a.length),l<0?t=t.left:t=t.right}return a.length=c,new RedBlackTreeIterator(this,a)};proto.find=function(n){for(var e=this._compare,t=this.root,a=[];t;){var c=e(n,t.key);if(a.push(t),c===0)return new RedBlackTreeIterator(this,a);c<=0?t=t.left:t=t.right}return new RedBlackTreeIterator(this,[])};proto.remove=function(n){var e=this.find(n);return e?e.remove():this};proto.get=function(n){for(var e=this._compare,t=this.root;t;){var a=e(n,t.key);if(a===0)return t.value;a<=0?t=t.left:t=t.right}};function RedBlackTreeIterator(n,e){this.tree=n,this._stack=e}var iproto=RedBlackTreeIterator.prototype;Object.defineProperty(iproto,"valid",{get:function(){return this._stack.length>0}});Object.defineProperty(iproto,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0});iproto.clone=function(){return new RedBlackTreeIterator(this.tree,this._stack.slice())};function swapNode(n,e){n.key=e.key,n.value=e.value,n.left=e.left,n.right=e.right,n._color=e._color,n._count=e._count}function fixDoubleBlack(n){for(var e,t,a,c,l=n.length-1;l>=0;--l){if(e=n[l],l===0){e._color=BLACK;return}if(t=n[l-1],t.left===e){if(a=t.right,a.right&&a.right._color===RED){if(a=t.right=cloneNode(a),c=a.right=cloneNode(a.right),t.right=a.left,a.left=t,a.right=c,a._color=t._color,e._color=BLACK,t._color=BLACK,c._color=BLACK,recount(t),recount(a),l>1){var o=n[l-2];o.left===t?o.left=a:o.right=a}n[l-1]=a;return}else if(a.left&&a.left._color===RED){if(a=t.right=cloneNode(a),c=a.left=cloneNode(a.left),t.right=c.left,a.left=c.right,c.left=t,c.right=a,c._color=t._color,t._color=BLACK,a._color=BLACK,e._color=BLACK,recount(t),recount(a),recount(c),l>1){var o=n[l-2];o.left===t?o.left=c:o.right=c}n[l-1]=c;return}if(a._color===BLACK)if(t._color===RED){t._color=BLACK,t.right=repaint(RED,a);return}else{t.right=repaint(RED,a);continue}else{if(a=cloneNode(a),t.right=a.left,a.left=t,a._color=t._color,t._color=RED,recount(t),recount(a),l>1){var o=n[l-2];o.left===t?o.left=a:o.right=a}n[l-1]=a,n[l]=t,l+1<n.length?n[l+1]=e:n.push(e),l=l+2}}else{if(a=t.left,a.left&&a.left._color===RED){if(a=t.left=cloneNode(a),c=a.left=cloneNode(a.left),t.left=a.right,a.right=t,a.left=c,a._color=t._color,e._color=BLACK,t._color=BLACK,c._color=BLACK,recount(t),recount(a),l>1){var o=n[l-2];o.right===t?o.right=a:o.left=a}n[l-1]=a;return}else if(a.right&&a.right._color===RED){if(a=t.left=cloneNode(a),c=a.right=cloneNode(a.right),t.left=c.right,a.right=c.left,c.right=t,c.left=a,c._color=t._color,t._color=BLACK,a._color=BLACK,e._color=BLACK,recount(t),recount(a),recount(c),l>1){var o=n[l-2];o.right===t?o.right=c:o.left=c}n[l-1]=c;return}if(a._color===BLACK)if(t._color===RED){t._color=BLACK,t.left=repaint(RED,a);return}else{t.left=repaint(RED,a);continue}else{if(a=cloneNode(a),t.left=a.right,a.right=t,a._color=t._color,t._color=RED,recount(t),recount(a),l>1){var o=n[l-2];o.right===t?o.right=a:o.left=a}n[l-1]=a,n[l]=t,l+1<n.length?n[l+1]=e:n.push(e),l=l+2}}}}iproto.remove=function(){var n=this._stack;if(n.length===0)return this.tree;var e=new Array(n.length),t=n[n.length-1];e[e.length-1]=new RBNode(t._color,t.key,t.value,t.left,t.right,t._count);for(var a=n.length-2;a>=0;--a){var t=n[a];t.left===n[a+1]?e[a]=new RBNode(t._color,t.key,t.value,e[a+1],t.right,t._count):e[a]=new RBNode(t._color,t.key,t.value,t.left,e[a+1],t._count)}if(t=e[e.length-1],t.left&&t.right){var c=e.length;for(t=t.left;t.right;)e.push(t),t=t.right;var l=e[c-1];e.push(new RBNode(t._color,l.key,l.value,t.left,t.right,t._count)),e[c-1].key=t.key,e[c-1].value=t.value;for(var a=e.length-2;a>=c;--a)t=e[a],e[a]=new RBNode(t._color,t.key,t.value,t.left,e[a+1],t._count);e[c-1].left=e[c]}if(t=e[e.length-1],t._color===RED){var o=e[e.length-2];o.left===t?o.left=null:o.right===t&&(o.right=null),e.pop();for(var a=0;a<e.length;++a)e[a]._count--;return new RedBlackTree(this.tree._compare,e[0])}else if(t.left||t.right){t.left?swapNode(t,t.left):t.right&&swapNode(t,t.right),t._color=BLACK;for(var a=0;a<e.length-1;++a)e[a]._count--;return new RedBlackTree(this.tree._compare,e[0])}else{if(e.length===1)return new RedBlackTree(this.tree._compare,null);for(var a=0;a<e.length;++a)e[a]._count--;var i=e[e.length-2];fixDoubleBlack(e),i.left===t?i.left=null:i.right=null}return new RedBlackTree(this.tree._compare,e[0])};Object.defineProperty(iproto,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0});Object.defineProperty(iproto,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0});Object.defineProperty(iproto,"index",{get:function(){var n=0,e=this._stack;if(e.length===0){var t=this.tree.root;return t?t._count:0}else e[e.length-1].left&&(n=e[e.length-1].left._count);for(var a=e.length-2;a>=0;--a)e[a+1]===e[a].right&&(++n,e[a].left&&(n+=e[a].left._count));return n},enumerable:!0});iproto.next=function(){var n=this._stack;if(n.length!==0){var e=n[n.length-1];if(e.right)for(e=e.right;e;)n.push(e),e=e.left;else for(n.pop();n.length>0&&n[n.length-1].right===e;)e=n[n.length-1],n.pop()}};Object.defineProperty(iproto,"hasNext",{get:function(){var n=this._stack;if(n.length===0)return!1;if(n[n.length-1].right)return!0;for(var e=n.length-1;e>0;--e)if(n[e-1].left===n[e])return!0;return!1}});iproto.update=function(n){var e=this._stack;if(e.length===0)throw new Error("Can't update empty node!");var t=new Array(e.length),a=e[e.length-1];t[t.length-1]=new RBNode(a._color,a.key,n,a.left,a.right,a._count);for(var c=e.length-2;c>=0;--c)a=e[c],a.left===e[c+1]?t[c]=new RBNode(a._color,a.key,a.value,t[c+1],a.right,a._count):t[c]=new RBNode(a._color,a.key,a.value,a.left,t[c+1],a._count);return new RedBlackTree(this.tree._compare,t[0])};iproto.prev=function(){var n=this._stack;if(n.length!==0){var e=n[n.length-1];if(e.left)for(e=e.left;e;)n.push(e),e=e.right;else for(n.pop();n.length>0&&n[n.length-1].left===e;)e=n[n.length-1],n.pop()}};Object.defineProperty(iproto,"hasPrev",{get:function(){var n=this._stack;if(n.length===0)return!1;if(n[n.length-1].left)return!0;for(var e=n.length-1;e>0;--e)if(n[e-1].right===n[e])return!0;return!1}});function defaultCompare(n,e){return n<e?-1:n>e?1:0}function createRBTree(n){return new RedBlackTree(n||defaultCompare,null)}const{AbstractLevel,AbstractIterator,AbstractKeyIterator,AbstractValueIterator}=abstractLevel$1,ModuleError=moduleError,createRBT=rbtree,rangeOptions=new Set(["gt","gte","lt","lte"]),kNone=Symbol("none"),kTree=Symbol("tree"),kIterator=Symbol("iterator"),kLowerBound=Symbol("lowerBound"),kUpperBound=Symbol("upperBound"),kOutOfRange=Symbol("outOfRange"),kReverse=Symbol("reverse"),kOptions=Symbol("options"),kTest=Symbol("test"),kAdvance=Symbol("advance"),kInit=Symbol("init");function compare(n,e){if(typeof n=="string")return n<e?-1:n>e?1:0;const t=Math.min(n.byteLength,e.byteLength);for(let a=0;a<t;a++){const c=n[a]-e[a];if(c!==0)return c}return n.byteLength-e.byteLength}function gt(n){return compare(n,this[kUpperBound])>0}function gte(n){return compare(n,this[kUpperBound])>=0}function lt(n){return compare(n,this[kUpperBound])<0}function lte(n){return compare(n,this[kUpperBound])<=0}class MemoryIterator extends AbstractIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key,a=this[kIterator].value;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,t,a)}_nextv(e,t,a){const c=this[kIterator],l=[];for(;c.valid&&l.length<e&&this[kTest](c.key);)l.push([c.key,c.value]),c[this[kAdvance]]();this.nextTick(a,null,l)}_all(e,t){const a=this.limit-this.count,c=this[kIterator],l=[];for(;c.valid&&l.length<a&&this[kTest](c.key);)l.push([c.key,c.value]),c[this[kAdvance]]();this.nextTick(t,null,l)}}class MemoryKeyIterator extends AbstractKeyIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,t)}_nextv(e,t,a){const c=this[kIterator],l=[];for(;c.valid&&l.length<e&&this[kTest](c.key);)l.push(c.key),c[this[kAdvance]]();this.nextTick(a,null,l)}_all(e,t){const a=this.limit-this.count,c=this[kIterator],l=[];for(;c.valid&&l.length<a&&this[kTest](c.key);)l.push(c.key),c[this[kAdvance]]();this.nextTick(t,null,l)}}class MemoryValueIterator extends AbstractValueIterator{constructor(e,t){super(e,t),this[kInit](e[kTree],t)}_next(e){if(!this[kIterator].valid)return this.nextTick(e);const t=this[kIterator].key,a=this[kIterator].value;if(!this[kTest](t))return this.nextTick(e);this[kIterator][this[kAdvance]](),this.nextTick(e,null,a)}_nextv(e,t,a){const c=this[kIterator],l=[];for(;c.valid&&l.length<e&&this[kTest](c.key);)l.push(c.value),c[this[kAdvance]]();this.nextTick(a,null,l)}_all(e,t){const a=this.limit-this.count,c=this[kIterator],l=[];for(;c.valid&&l.length<a&&this[kTest](c.key);)l.push(c.value),c[this[kAdvance]]();this.nextTick(t,null,l)}}for(const n of[MemoryIterator,MemoryKeyIterator,MemoryValueIterator])n.prototype[kInit]=function(e,t){this[kReverse]=t.reverse,this[kOptions]=t,this[kReverse]?(this[kAdvance]="prev",this[kLowerBound]="lte"in t?t.lte:"lt"in t?t.lt:kNone,this[kUpperBound]="gte"in t?t.gte:"gt"in t?t.gt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.end:"lte"in t?this[kIterator]=e.le(this[kLowerBound]):this[kIterator]=e.lt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="gte"in t?gte:gt)):(this[kAdvance]="next",this[kLowerBound]="gte"in t?t.gte:"gt"in t?t.gt:kNone,this[kUpperBound]="lte"in t?t.lte:"lt"in t?t.lt:kNone,this[kLowerBound]===kNone?this[kIterator]=e.begin:"gte"in t?this[kIterator]=e.ge(this[kLowerBound]):this[kIterator]=e.gt(this[kLowerBound]),this[kUpperBound]!==kNone&&(this[kTest]="lte"in t?lte:lt))},n.prototype[kTest]=function(){return!0},n.prototype[kOutOfRange]=function(e){return this[kTest](e)?this[kLowerBound]===kNone?!1:this[kReverse]?"lte"in this[kOptions]?compare(e,this[kLowerBound])>0:compare(e,this[kLowerBound])>=0:"gte"in this[kOptions]?compare(e,this[kLowerBound])<0:compare(e,this[kLowerBound])<=0:!0},n.prototype._seek=function(e,t){this[kOutOfRange](e)?(this[kIterator]=this[kIterator].tree.end,this[kIterator].next()):this[kReverse]?this[kIterator]=this[kIterator].tree.le(e):this[kIterator]=this[kIterator].tree.ge(e)};class MemoryLevel extends AbstractLevel{constructor(e,t,a){if(typeof e=="object"&&e!==null&&(t=e),typeof e=="function"||typeof t=="function"||typeof a=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{storeEncoding:c,...l}=t||{};if(c=c||"buffer",!["buffer","view","utf8"].includes(c))throw new ModuleError("The storeEncoding option must be 'buffer', 'view' or 'utf8'",{code:"LEVEL_ENCODING_NOT_SUPPORTED"});super({seek:!0,permanence:!1,createIfMissing:!1,errorIfExists:!1,encodings:{[c]:!0}},l),this[kTree]=createRBT(compare)}_put(e,t,a,c){const l=this[kTree].find(e);l.valid?this[kTree]=l.update(t):this[kTree]=this[kTree].insert(e,t),this.nextTick(c)}_get(e,t,a){const c=this[kTree].get(e);if(typeof c>"u")return this.nextTick(a,new Error("NotFound"));this.nextTick(a,null,c)}_getMany(e,t,a){this.nextTick(a,null,e.map(c=>this[kTree].get(c)))}_del(e,t,a){this[kTree]=this[kTree].remove(e),this.nextTick(a)}_batch(e,t,a){let c=this[kTree];for(const l of e){const o=l.key,i=c.find(o);l.type==="put"?c=i.valid?i.update(l.value):c.insert(o,l.value):c=i.remove()}this[kTree]=c,this.nextTick(a)}_clear(e,t){if(e.limit===-1&&!Object.keys(e).some(isRangeOption))return this[kTree]=createRBT(compare),this.nextTick(t);const a=this._keys({...e}),c=a.limit;let l=0;const o=()=>{for(let i=0;i<500;i++){if(++l>c||!a[kIterator].valid||!a[kTest](a[kIterator].key))return t();this[kTree]=this[kTree].remove(a[kIterator].key),a[kIterator][a[kAdvance]]()}this.nextTick(o)};this.nextTick(o)}_iterator(e){return new MemoryIterator(this,e)}_keys(e){return new MemoryKeyIterator(this,e)}_values(e){return new MemoryValueIterator(this,e)}}var MemoryLevel_1=MemoryLevel;if(typeof process<"u"&&!process.browser&&typeof commonjsGlobal<"u"&&typeof commonjsGlobal.setImmediate=="function"){const n=commonjsGlobal.setImmediate;MemoryLevel.prototype.nextTick=function(e,...t){t.length===0?n(e):n(()=>e(...t))}}function isRangeOption(n){return rangeOptions.has(n)}var rdfDataFactory={},BlankNode$1={};Object.defineProperty(BlankNode$1,"__esModule",{value:!0});BlankNode$1.BlankNode=void 0;class BlankNode{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}}BlankNode$1.BlankNode=BlankNode;var DataFactory$2={},DefaultGraph$1={};Object.defineProperty(DefaultGraph$1,"__esModule",{value:!0});DefaultGraph$1.DefaultGraph=void 0;class DefaultGraph{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}}DefaultGraph$1.DefaultGraph=DefaultGraph;DefaultGraph.INSTANCE=new DefaultGraph;var Literal$1={},NamedNode$1={};Object.defineProperty(NamedNode$1,"__esModule",{value:!0});NamedNode$1.NamedNode=void 0;class NamedNode{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}}NamedNode$1.NamedNode=NamedNode;Object.defineProperty(Literal$1,"__esModule",{value:!0});Literal$1.Literal=void 0;const NamedNode_1$1=NamedNode$1;class Literal{constructor(e,t){this.termType="Literal",this.value=e,typeof t=="string"?(this.language=t,this.datatype=Literal.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=Literal.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}Literal$1.Literal=Literal;Literal.RDF_LANGUAGE_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Literal.XSD_STRING=new NamedNode_1$1.NamedNode("http://www.w3.org/2001/XMLSchema#string");var Quad$1={};Object.defineProperty(Quad$1,"__esModule",{value:!0});Quad$1.Quad=void 0;class Quad{constructor(e,t,a,c){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=a,this.graph=c}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}Quad$1.Quad=Quad;var Variable$1={};Object.defineProperty(Variable$1,"__esModule",{value:!0});Variable$1.Variable=void 0;class Variable{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}}Variable$1.Variable=Variable;Object.defineProperty(DataFactory$2,"__esModule",{value:!0});DataFactory$2.DataFactory=void 0;const BlankNode_1=BlankNode$1,DefaultGraph_1=DefaultGraph$1,Literal_1=Literal$1,NamedNode_1=NamedNode$1,Quad_1=Quad$1,Variable_1=Variable$1;let dataFactoryCounter=0,DataFactory$1=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${dataFactoryCounter++}_`}namedNode(e){return new NamedNode_1.NamedNode(e)}blankNode(e){return new BlankNode_1.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new Literal_1.Literal(e,t)}variable(e){return new Variable_1.Variable(e)}defaultGraph(){return DefaultGraph_1.DefaultGraph.INSTANCE}quad(e,t,a,c){return new Quad_1.Quad(e,t,a,c||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(Literal_1.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};DataFactory$2.DataFactory=DataFactory$1;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,l,o){o===void 0&&(o=l),Object.defineProperty(a,o,{enumerable:!0,get:function(){return c[l]}})}:function(a,c,l,o){o===void 0&&(o=l),a[o]=c[l]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(a,c){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,a,l)};Object.defineProperty(n,"__esModule",{value:!0}),t(BlankNode$1,n),t(DataFactory$2,n),t(DefaultGraph$1,n),t(Literal$1,n),t(NamedNode$1,n),t(Quad$1,n),t(Variable$1,n)})(rdfDataFactory);var ResultType;(function(n){n.VOID="void",n.QUADS="quads",n.APPROXIMATE_SIZE="approximate_size"})(ResultType||(ResultType={}));class LinkedList{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var e;return(e=this._head)===null||e===void 0?void 0:e.value}get last(){var e;return(e=this._tail)===null||e===void 0?void 0:e.value}get empty(){return this._head===null}push(e){const t={value:e,next:null};this._tail===null?this._head=this._tail=t:this._tail.next=this._tail=t,this._length++}shift(){if(this._head===null)return;const{value:e,next:t}=this._head;return this._head=t,t===null&&(this._tail=null),this._length--,e}clear(){this._length=0,this._head=this._tail=null}}const resolved=Promise.resolve(void 0);function createTaskScheduler(){const n=typeof queueMicrotask=="function"?queueMicrotask:c=>resolved.then(c),e=typeof setImmediate=="function"?setImmediate:c=>setTimeout(c,0);let t=0,a=null;return c=>{a!==null?a.push(c):++t<100?n(c):(a=[c],e(()=>{for(const l of a)n(l);a=null,t=0}))}}let taskScheduler=createTaskScheduler();function scheduleTask(n){taskScheduler(n)}function getTaskScheduler(){return taskScheduler}function setTaskScheduler(n){taskScheduler=n}const INIT=1<<0,OPEN=1<<1,CLOSING=1<<2,CLOSED=1<<3,ENDED=1<<4,DESTROYED=1<<5;class AsyncIterator extends eventsExports.EventEmitter{constructor(e=OPEN){super(),this._readable=!1,this._state=e,this.on("newListener",waitForDataListener)}_changeState(e,t=!1){const a=e>this._state&&this._state<ENDED;return a&&(this._state=e,e===ENDED&&(t?taskScheduler(()=>this.emit("end")):this.emit("end"))),a}read(){return null}forEach(e,t){this.on("data",bind(e,t))}close(){this._changeState(CLOSED)&&this._endAsync()}destroy(e){this.done||this._destroy(e,t=>{e=e||t,e&&this.emit("error",e),this._end(!0)})}_destroy(e,t){t()}_end(e=!1){this._changeState(e?DESTROYED:ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){taskScheduler(()=>this._end())}get readable(){return this._readable}set readable(e){e=!!e&&!this.done,this._readable!==e&&(this._readable=e,e&&taskScheduler(()=>this.emit("readable")))}get closed(){return this._state>=CLOSING}get ended(){return this._state===ENDED}get destroyed(){return this._state===DESTROYED}get done(){return this._state>=ENDED}toString(){const e=this._toStringDetails();return`[${this.constructor.name}${e?` ${e}`:""}]`}_toStringDetails(){return""}toArray(e){const t=[],a=typeof e?.limit=="number"?e.limit:1/0;return this.ended||a<=0?Promise.resolve(t):new Promise((c,l)=>{const o=()=>c(t),i=u=>{t.push(u),t.length>=a&&(this.removeListener("error",l),this.removeListener("data",i),this.removeListener("end",o),c(t))};this.on("error",l),this.on("data",i),this.on("end",o)})}getProperty(e,t){const a=this._properties;if(!t)return a&&a[e];if(a&&e in a)taskScheduler(()=>t(a[e]));else{let c;(c=this._propertyCallbacks)||(this._propertyCallbacks=c=Object.create(null)),e in c?c[e].push(t):c[e]=[t]}}setProperty(e,t){const a=this._properties||(this._properties=Object.create(null));a[e]=t;const c=this._propertyCallbacks||{},l=c[e];if(l){delete c[e],taskScheduler(()=>{for(const o of l)o(t)});for(e in c)return;delete this._propertyCallbacks}}getProperties(){const e=this._properties,t={};for(const a in e)t[a]=e[a];return t}setProperties(e){for(const t in e)this.setProperty(t,e[t])}copyProperties(e,t){for(const a of t)e.getProperty(a,c=>this.setProperty(a,c))}transform(e){return new SimpleTransformIterator(this,e)}map(e,t){return new MappingIterator(this,bind(e,t))}filter(e,t){return this.map(function(a){return e.call(t||this,a)?a:null})}uniq(e=identity){const t=new Set;return this.filter(function(a){const c=e.call(this,a);return t.has(c)?!1:(t.add(c),!0)})}prepend(e){return this.transform({prepend:e})}append(e){return this.transform({append:e})}surround(e,t){return this.transform({prepend:e,append:t})}skip(e){return this.map(t=>e-- >0?null:t)}take(e){return this.transform({limit:e})}range(e,t){return this.transform({offset:e,limit:Math.max(t-e+1,0)})}clone(){return new ClonedIterator(this)}}function waitForDataListener(n){n==="data"&&(this.removeListener("newListener",waitForDataListener),addSingleListener(this,"readable",emitData),this.readable&&taskScheduler(()=>emitData.call(this)))}function emitData(){let n;for(;this.listenerCount("data")!==0&&(n=this.read())!==null;)this.emit("data",n);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",emitData),addSingleListener(this,"newListener",waitForDataListener))}function addSingleListener(n,e,t){n.listeners(e).includes(t)||n.on(e,t)}class EmptyIterator extends AsyncIterator{constructor(){super(),this._changeState(ENDED,!0)}}class SingletonIterator extends AsyncIterator{constructor(e){super(),this._item=e,e===null?this.close():this.readable=!0}read(){const e=this._item;return this._item=null,this.close(),e}_toStringDetails(){return this._item===null?"":`(${this._item})`}}class ArrayIterator extends AsyncIterator{constructor(e=[],{autoStart:t=!0,preserve:a=!0}={}){super();const c=a||!Array.isArray(e)?[...e]:e;this._index=0,this._sourceStarted=t!==!1,this._truncateThreshold=a?-1:64,this._sourceStarted&&c.length===0?this.close():this._buffer=c,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let e=null;return this._buffer&&(this._index<this._buffer.length&&(e=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),e}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(e,t){delete this._buffer,t()}toArray(e={}){if(!this._buffer)return Promise.resolve([]);const{length:t}=this._buffer,a=this._index,c=typeof e.limit!="number"?t:a+e.limit,l=this._buffer.slice(a,c);return this._index=c,c>=t&&this.close(),Promise.resolve(l)}}class IntegerIterator extends AsyncIterator{constructor({start:e=0,step:t=1,end:a}={}){super(),Number.isFinite(e)&&(e=Math.trunc(e)),this._next=e,Number.isFinite(t)&&(t=Math.trunc(t)),this._step=t;const c=t>=0,l=c?1/0:-1/0;Number.isFinite(a)?a=Math.trunc(a):a!==-l&&(a=l),this._last=a,!Number.isFinite(e)||(c?e>a:e<a)?this.close():this.readable=!0}read(){if(this.closed)return null;const e=this._next,t=this._step,a=this._last,c=this._next+=t;return(t>=0?c>a:c<a)&&this.close(),e}_toStringDetails(){return`(${this._next}...${this._last})`}}function identity(n){return n}const DESTINATION=Symbol("destination");class MappingIterator extends AsyncIterator{constructor(e,t=identity,a={}){super(),this._map=t,this._source=ensureSourceAvailable(e),this._destroySource=a.destroySource!==!1,e.done?this.close():(this._source[DESTINATION]=this,this._source.on("end",destinationClose),this._source.on("error",destinationEmitError),this._source.on("readable",destinationSetReadable),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let e,t;for(;(e=this._source.read())!==null;)if((t=this._map(e))!==null)return t}this.readable=!1,this._source.done&&this.close()}return null}_end(e){this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&this._source.destroy(),super._end(e)}}function ensureSourceAvailable(n,e=!1){if(!n||!isFunction(n.read)||!isFunction(n.on))throw new TypeError(`Invalid source: ${n}`);if(!e&&n[DESTINATION])throw new Error("The source already has a destination");return n}class BufferedIterator extends AsyncIterator{constructor({maxBufferSize:e=4,autoStart:t=!0}={}){super(INIT),this._buffer=new LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=e,taskScheduler(()=>this._init(t)),this._sourceStarted=t!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(e){e!==1/0&&(e=Number.isFinite(e)?Math.max(Math.trunc(e),1):4),this._maxBufferSize!==e&&(this._maxBufferSize=e,this._state===OPEN&&this._fillBuffer())}_init(e){let t=!1;this._reading=!0,this._begin(()=>{if(t)throw new Error("done callback called multiple times");t=!0,this._reading=!1,this._changeState(OPEN),e?this._fillBufferAsync():this.readable=!0})}_begin(e){e()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const e=this._buffer;let t;return e.empty?(t=null,this.readable=!1):t=e.shift(),!this._reading&&e.length<this._maxBufferSize&&(this.closed?e.empty&&this._endAsync():this._fillBufferAsync()),t}_read(e,t){t()}_push(e){this.done||(this._pushedCount++,this._buffer.push(e),this.readable=!0)}_fillBuffer(){let e;this._reading||(this.closed?this._completeClose():(e=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(e,()=>{if(!e)throw new Error("done callback called multiple times");e=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,taskScheduler(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(CLOSING):this._completeClose()}_completeClose(){this._changeState(CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(e,t){this._buffer.clear(),t()}_flush(e){e()}_toStringDetails(){const e=this._buffer;return`{${e.empty?"":`next: ${e.first}, `}buffer: ${e.length}}`}}class TransformIterator extends BufferedIterator{constructor(e,t=e||{}){super(t),this._boundPush=a=>this._push(a),isSourceExpression(e)||(e=t.source),isEventEmitter(e)?this.source=e:e&&(this._createSource=isPromise(e)?()=>e:e,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!t.optional,this._destroySource=t.destroySource!==!1}get source(){return isFunction(this._createSource)&&this._loadSourceAsync(),this._source}set source(e){const t=this._source=this._validateSource(e);t[DESTINATION]=this,this.done?this._destroySource&&t.destroy():t.done?this.close():(t.on("end",destinationCloseWhenDone),t.on("readable",destinationFillBuffer),t.on("error",destinationEmitError))}_loadSourceAsync(){isFunction(this._createSource)&&(Promise.resolve(this._createSource()).then(e=>{delete this._createSource,this.source=e,this._fillBuffer()},e=>this.emit("error",e)),this._createSource=null)}_validateSource(e,t=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return ensureSourceAvailable(e,t)}_read(e,t){const a=()=>{this._pushedCount<e&&!this.closed?taskScheduler(()=>this._readAndTransform(a,t)):t()};this._readAndTransform(a,t)}_readAndTransform(e,t){let a;const c=this.source;!c||c.done||(a=c.read())===null?t():this._optional?this._optionalTransform(a,e):this._transform(a,e,this._boundPush)}_optionalTransform(e,t){const a=this._pushedCount;this._transform(e,()=>{a===this._pushedCount&&this._push(e),t()},this._boundPush)}_transform(e,t,a){a(e),t()}_closeWhenDone(){this.close()}_end(e){const t=this._source;t&&(t.removeListener("end",destinationCloseWhenDone),t.removeListener("error",destinationEmitError),t.removeListener("readable",destinationFillBuffer),delete t[DESTINATION],this._destroySource&&t.destroy()),super._end(e)}}function destinationSetReadable(){this[DESTINATION].readable=!0}function destinationEmitError(n){this[DESTINATION].emit("error",n)}function destinationClose(){this[DESTINATION].close()}function destinationCloseWhenDone(){this[DESTINATION]._closeWhenDone()}function destinationFillBuffer(){this[DESTINATION]._sourceStarted!==!1&&this[DESTINATION]._fillBuffer()}class SimpleTransformIterator extends TransformIterator{constructor(e,t){if(super(e,t),this._offset=0,this._limit=1/0,this._filter=a=>!0,t=t||(isSourceExpression(e)?null:e),t){const a=isFunction(t)?t:t.transform,{limit:c,offset:l,filter:o,map:i,prepend:u,append:d}=t;l===1/0||c===-1/0?this._limit=0:(Number.isFinite(l)&&(this._offset=Math.max(Math.trunc(l),0)),Number.isFinite(c)&&(this._limit=Math.max(Math.trunc(c),0)),isFunction(o)&&(this._filter=o),isFunction(i)&&(this._map=i),this._transform=isFunction(a)?a:null),u&&(this._prepender=isEventEmitter(u)?u:fromArray(u)),d&&(this._appender=isEventEmitter(d)?d:fromArray(d))}}_read(e,t){const a=()=>this._readAndTransformSimple(e,c,t);this._readAndTransformSimple(e,c,t);function c(){taskScheduler(a)}}_readAndTransformSimple(e,t,a){let c;const{source:l}=this;if(!l||l.done){a();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<e&&(c=l.read())!==null;){if(!this._filter(c)||this._offset!==0&&this._offset--)continue;const o=typeof this._map>"u"?c:this._map(c);if(o===null)this._optional&&this._push(c);else if(!isFunction(this._transform))this._push(o);else{this._optional?this._optionalTransform(o,t):this._transform(o,t,this._boundPush);return}--this._limit===0&&this.close()}a()}_begin(e){this._insert(this._prepender,e),delete this._prepender}_flush(e){this._insert(this._appender,e),delete this._appender}_insert(e,t){const a=l=>this._push(l);!e||e.done?t():(e.on("data",a),e.on("end",c));function c(){e.removeListener("data",a),e.removeListener("end",c),t()}}}class MultiTransformIterator extends TransformIterator{constructor(e,t){if(super(e,t),this._transformerQueue=[],t){const a=isFunction(t)?t:t.multiTransform;a&&(this._createTransformer=a)}}_read(e,t){const a=this._transformerQueue,c=this._optional;let l,o;for(;(l=a[0])&&l.transformer.done;){c&&l.item!==null&&(e--,this._push(l.item)),a.shift();const{transformer:u}=l;u.removeListener("end",destinationFillBuffer),u.removeListener("readable",destinationFillBuffer),u.removeListener("error",destinationEmitError)}const{source:i}=this;for(;i&&!i.done&&a.length<this.maxBufferSize&&(o=i.read(),o!==null);){const u=this._createTransformer(o)||new EmptyIterator;u[DESTINATION]=this,u.on("end",destinationFillBuffer),u.on("readable",destinationFillBuffer),u.on("error",destinationEmitError),a.push({transformer:u,item:o})}if(l=a[0],l){const{transformer:u}=l;for(;e-- >0&&(o=u.read())!==null;)this._push(o),c&&(l.item=null)}else i&&i.done&&this.close();t()}_createTransformer(e){return new SingletonIterator(e)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(e){if(super._end(e),this._destroySource)for(const t of this._transformerQueue)t.transformer.destroy()}}class UnionIterator extends BufferedIterator{constructor(e,t={}){super(t),this._sources=[],this._currentSource=-1;const a=t.autoStart!==!1;if(isEventEmitter(e))e.on("error",c=>this.emit("error",c)),this._pending={loading:!1,sources:e},a&&this._loadSources();else if(Array.isArray(e)&&e.length>0)for(const c of e)this._addSource(c);else a&&this.close();this._destroySources=t.destroySources!==!1}_loadSources(){const e=this._pending.sources;this._pending.loading=!0,e.done?(delete this._pending,this.close()):(e.on("data",t=>{this._addSource(t),this._fillBufferAsync()}),e.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(e){isPromise(e)&&(e=wrap$1(e)),e.done||(this._sources.push(e),e[DESTINATION]=this,e.on("error",destinationEmitError),e.on("readable",destinationFillBuffer),e.on("end",destinationRemoveEmptySources))}_removeEmptySources(){this._sources=this._sources.filter((e,t)=>(e.done&&t<=this._currentSource&&this._currentSource--,!e.done)),this._fillBuffer()}_read(e,t){var a;((a=this._pending)===null||a===void 0?void 0:a.loading)===!1&&this._loadSources();let c=0,l;for(;c!==(c=e);)for(let o=0;o<this._sources.length&&e>0;o++)this._currentSource=(this._currentSource+1)%this._sources.length,(l=this._sources[this._currentSource].read())!==null&&(e--,this._push(l));!this._pending&&this._sources.length===0&&this.close(),t()}_end(e=!1){if(super._end(e),this._destroySources){for(const t of this._sources)t.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}function destinationRemoveEmptySources(){this[DESTINATION]._removeEmptySources()}class ClonedIterator extends TransformIterator{constructor(e){super(e,{autoStart:!1}),this._readPosition=0,this._reading=!1}_init(){}close(){AsyncIterator.prototype.close.call(this)}get source(){return super.source}set source(e){const t=this._source=this._validateSource(e),a=t&&t[DESTINATION]||(t[DESTINATION]=new HistoryReader(t));this.done?this._destroySource&&t.destroy():a.endsAt(0)?this.close():(a.register(this),(t._sourceStarted===!1||a.readAt(0)!==null)&&(this.readable=!0));const c=this._propertyCallbacks;for(const l in c){const o=c[l];for(const i of o)this._getSourceProperty(l,i)}}_validateSource(e,t=!1){const a=e&&e[DESTINATION];return super._validateSource(e,!a||a instanceof HistoryReader)}getProperty(e,t){const{source:a}=this,c=this._properties,l=c&&e in c;if(!t)return l?c&&c[e]:a&&a.getProperty(e);super.getProperty(e,t),a&&!l&&this._getSourceProperty(e,t)}_getSourceProperty(e,t){this.source.getProperty(e,a=>{(!this._properties||!(e in this._properties))&&t(a)})}getProperties(){const e=this.source?this.source.getProperties():{},t=this._properties;for(const a in t)e[a]=t[a];return e}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const e=this.source;let t=null;if(!this.done&&e){const a=e[DESTINATION];(t=a.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,a.endsAt(this._readPosition)&&this.close()}return t}_end(e){const t=this.source,a=t?.[DESTINATION];a&&a.unregister(this),BufferedIterator.prototype._end.call(this,e)}}class HistoryReader{constructor(e){if(this._history=[],this._trackers=new Set,this._source=e,!e.done){const t=()=>{for(const l of this._trackers)l.readable=!0},a=l=>{for(const o of this._trackers)o.emit("error",l)},c=()=>{for(const l of this._trackers)l._sourceStarted!==!1&&l._readPosition===this._history.length&&l.close();this._trackers.clear(),e.removeListener("end",c),e.removeListener("error",a),e.removeListener("readable",t)};e.on("end",c),e.on("error",a),e.on("readable",t)}}register(e){this._source.done||this._trackers.add(e)}unregister(e){this._trackers.delete(e)}readAt(e){let t=null;return e<this._history.length?t=this._history[e]:!this._source.done&&(t=this._source.read())!==null&&(this._history[e]=t),t}endsAt(e){return this._source.done&&this._history.length===e}}class WrappingIterator extends AsyncIterator{constructor(e,t){super(),this._source=null,this._destroySource=t?.destroySource!==!1,isPromise(e)?(this._source=new AsyncIterator,e.then(a=>{this._source=null,this.source=a}).catch(a=>this.emit("error",a))):e&&(this.source=e)}set source(e){let t=e;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(isIterable(t)&&(t=t[Symbol.iterator]()),isIterator(t)){let a=t;t=new eventsExports.EventEmitter,t.read=()=>{if(a!==null){let c;for(;!(c=a.next()).done;)if(c.value!==null)return c.value;a=null,this.close()}return null}}else t=ensureSourceAvailable(t);if(this.done){this._destroySource&&isFunction(t.destroy)&&t.destroy();return}t[DESTINATION]=this,t.on("end",destinationClose),t.on("error",destinationEmitError),t.on("readable",destinationSetReadable),this._source=t,this.readable=t.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const e=this._source.read();if(e!==null)return e;this.readable=!1}return null}_end(e=!1){this._source!==null&&(this._source.removeListener("end",destinationClose),this._source.removeListener("error",destinationEmitError),this._source.removeListener("readable",destinationSetReadable),delete this._source[DESTINATION],this._destroySource&&isFunction(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(e)}}function wrap$1(n,e){if(e&&("autoStart"in e||"optional"in e||"source"in e||"maxBufferSize"in e))return n&&!isEventEmitter(n)&&(n=new WrappingIterator(n)),new TransformIterator(n,e);if(!n)return empty();if(isPromise(n))return new WrappingIterator(n,e);if(n instanceof AsyncIterator)return n;if(Array.isArray(n))return fromArray(n);if(isIterable(n)||isIterator(n)||isEventEmitter(n))return new WrappingIterator(n,e);throw new TypeError(`Invalid source: ${n}`)}function empty(){return new EmptyIterator}function single(n){return new SingletonIterator(n)}function fromArray(n){return new ArrayIterator(n)}function fromIterator(n){return new WrappingIterator(n)}function fromIterable(n){return new WrappingIterator(n)}function union(n){return new UnionIterator(n)}function range(n,e,t){return new IntegerIterator({start:n,end:e,step:t})}function bind(n,e){return e?n.bind(e):n}function isFunction(n){return typeof n=="function"}function isEventEmitter(n){return isFunction(n?.on)}function isPromise(n){return isFunction(n?.then)}function isSourceExpression(n){return n&&(isEventEmitter(n)||isPromise(n)||isFunction(n))}function isIterable(n){return n&&Symbol.iterator in n}function isIterator(n){return isFunction(n?.next)}var __QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__=Object.freeze({__proto__:null,ArrayIterator,AsyncIterator,BufferedIterator,CLOSED,CLOSING,ClonedIterator,DESTINATION,DESTROYED,ENDED,EmptyIterator,INIT,IntegerIterator,LinkedList,MappingIterator,MultiTransformIterator,OPEN,SimpleTransformIterator,SingletonIterator,TransformIterator,UnionIterator,WrappingIterator,empty,fromArray,fromIterable,fromIterator,getTaskScheduler,identity,isEventEmitter,isFunction,isIterable,isIterator,isPromise,isSourceExpression,range,scheduleTask,setTaskScheduler,single,union,wrap:wrap$1});const isObject$1=n=>typeof n=="object"&&n!==null,isAbstractLevel=n=>isObject$1(n)&&typeof n.open=="function"&&typeof n.batch=="function",ensureAbstractLevel=(n,e)=>{if(!isAbstractLevel(n))throw new Error(`${e} is not an AbstractLevel instance`)},streamToArray=n=>new Promise((e,t)=>{const a=[],c=u=>{a.push(u)},l=()=>{n.removeListener("data",c),n.removeListener("error",i),n.destroy()},o=()=>{l(),e(a)},i=u=>{l(),t(u)};n.on("error",i),n.on("end",o),n.on("data",c)}),arrStartsWith=(n,e)=>{for(let t=0;t<e.length;t+=1)if(e[t]!==n[t])return!1;return!0},RESOLVED=Promise.resolve(),emptyObject={},boundary="􏿿",separator="\0\0",defaultIndexes=[["subject","predicate","object","graph"],["object","graph","subject","predicate"],["graph","subject","predicate","object"],["subject","object","predicate","graph"],["predicate","object","graph","subject"],["graph","predicate","object","subject"]],levelPutOpts={keyEncoding:"utf8",valueEncoding:"view"},levelDelOpts={keyEncoding:"utf8"},emptyValue=new Uint8Array(0),consumeOneByOne=async(n,e)=>new Promise((t,a)=>{let c,l=!1,o=!1;const i=()=>{if(o=!0,(c=n.read())!==null){Promise.resolve(e(c)).then(i).catch(u);return}o=!1,l&&t()},u=p=>{a(p),y()},d=()=>{l=!0,o||t(),y()},m=()=>{o||i()},y=()=>{n.removeListener("end",d),n.removeListener("error",u),n.removeListener("readable",m),typeof n.destroy=="function"&&n.destroy()};n.on("end",d),n.on("error",u),n.on("readable",m),n.readable!==!1&&i()}),consumeInBatches=async(n,e,t)=>new Promise((a,c)=>{let l=0,o=!1,i=!1,u=new Array(e);const d=()=>{if(w(),l>0){Promise.resolve(t(u.slice(0,l))).then(a).catch(y);return}a()},m=()=>{i=!0,o||d()},y=S=>{w(),c(S)},p=()=>{o||_()};let T=null;const _=()=>{if(o=!0,i){d();return}for(;l<e&&(T=n.read())!==null;)u[l++]=T;if(T===null){o=!1;return}l===e&&(Promise.resolve(t(u.slice())).then(_).catch(y),l=0)},w=()=>{n.removeListener("end",m),n.removeListener("error",y),n.removeListener("readable",p),typeof n.destroy=="function"&&n.destroy()};n.on("end",m),n.on("error",y),n.on("readable",p),n.readable!==!1&&_()});let IDX=256;const HEX=[];for(;IDX--;)HEX[IDX]=(IDX+256).toString(16).substring(1);const createUid=n=>{n=n||16;let e="",t=0;return()=>{if(!e||t===256){for(e="",t=(1+n)/2|0;t--;)e+=HEX[256*Math.random()|0];e=e.substring(t=0,n-2)}return e+HEX[t++]}},uid=createUid(11);class LevelIterator extends BufferedIterator{level;mapFn;levelEnded;constructor(e,t){super({maxBufferSize:64}),this.mapFn=t,this.level=e,this.levelEnded=!1}_read(e,t){const a={remaining:e};a.next=this._onNextValue.bind(this,a,t),this.level.next(a.next)}_onNextValue(e,t,a,c,l){if(a){t(a);return}if(c===void 0&&l===void 0){this.close(),this.levelEnded=!0,t();return}if(this._push(this.mapFn(c,l)),e.remaining-=1,e.remaining===0){t();return}this.level.next(e.next)}_endLevel(e){if(this.levelEnded){e();return}this.level.close(t=>{t||(this.levelEnded=!0),e(t)})}_end(e){this.ended||(super._end(e),this._endLevel(t=>{t&&this.emit("error",t)}))}_destroy(e,t){if(this.destroyed){t();return}this._endLevel(a=>{if(a){t(a);return}super._destroy(e,t)})}}const xsd="http://www.w3.org/2001/XMLSchema#",string=`${xsd}string`,dateTime=`${xsd}dateTime`,integer=`${xsd}integer`,decimal=`${xsd}decimal`,double=`${xsd}double`,nonPositiveInteger=`${xsd}nonPositiveInteger`,negativeInteger=`${xsd}negativeInteger`,long=`${xsd}long`,int=`${xsd}int`,short=`${xsd}short`,byte=`${xsd}byte`,nonNegativeInteger=`${xsd}nonNegativeInteger`,unsignedLong=`${xsd}unsignedLong`,unsignedInt=`${xsd}unsignedInt`,unsignedShort=`${xsd}unsignedShort`,unsignedByte=`${xsd}unsignedByte`,positiveInteger=`${xsd}positiveInteger`,sliceString=(n,e,t)=>n.slice(e,e+t),padNumStart=n=>{if(n<10)return"000"+n;if(n<100)return"00"+n;if(n<1e3)return"0"+n;if(n<1e4)return""+n;throw new Error("too long: "+n)},join=(n,e,t)=>{let a=""+n;return e<10?a+="00"+e:e<100?a+="0"+e:a+=e,a+=t.toFixed(17),a},ZERO=join(3,0,0),NEG_INF=join(0,0,0),POS_INF=join(6,0,0),encode=n=>{let e=typeof n!="number"?parseFloat(n):n;if(Number.isNaN(e))throw new Error("Cannot serialize NaN");if(e===-1/0)return NEG_INF;if(e===1/0)return POS_INF;if(e===0)return ZERO;let t=0,a=0;for(e<0&&(a=1,e*=-1);e>10;)e/=10,t+=1;for(;e<1;)e*=10,t-=1;return a===1?t>=0?join(1,999-t,10-e):join(2,t*-1,10-e):t<0?join(4,999+t,e):join(5,t,e)},namedNodeWriter={write(n,e,t){const a=t.compactIri(n.value);e.lengths=padNumStart(a.length),e.value=a}},namedNodeReader={read(n,e,t,a){const{keyOffset:c,lengthsOffset:l}=e,o=parseInt(sliceString(n,l,4));return e.lengthsOffset+=4,e.keyOffset+=o,t.namedNode(a.expandTerm(sliceString(n,c,o)))}},blankNodeWriter={write(n,e){e.lengths=padNumStart(n.value.length),e.value=n.value}},blankNodeReader={read(n,e,t){const{keyOffset:a,lengthsOffset:c}=e,l=parseInt(sliceString(n,c,4));return e.lengthsOffset+=4,e.keyOffset+=l,t.blankNode(sliceString(n,a,l))}},genericLiteralWriter={write(n,e){e.lengths=padNumStart(n.value.length)+padNumStart(n.datatype.value.length),e.value=n.datatype.value+separator+n.value}},genericLiteralReader={read(n,e,t,a){const{keyOffset:c,lengthsOffset:l}=e,o=parseInt(sliceString(n,l,4)),i=parseInt(sliceString(n,l+4,4));return e.lengthsOffset+=8,e.keyOffset+=o+i+separator.length,t.literal(sliceString(n,c+i+separator.length,o),t.namedNode(sliceString(n,c,i)))}},stringLiteralWriter={write(n,e){e.lengths=padNumStart(n.value.length),e.value=n.value}},stringLiteralReader={read(n,e,t){const{keyOffset:a,lengthsOffset:c}=e,l=parseInt(sliceString(n,c,4));return e.lengthsOffset+=4,e.keyOffset+=l,t.literal(sliceString(n,a,l))}},langStringLiteralWriter={write(n,e){e.lengths=padNumStart(n.value.length)+padNumStart(n.language.length),e.value=n.language+separator+n.value}},langStringLiteralReader={read(n,e,t,a){const{keyOffset:c,lengthsOffset:l}=e,o=parseInt(sliceString(n,l,4)),i=parseInt(sliceString(n,l+4,4));return e.lengthsOffset+=8,e.keyOffset+=o+i+separator.length,t.literal(sliceString(n,c+i+separator.length,o),sliceString(n,c,i))}},numericLiteralWriter={write(n,e,t,a,c){e.lengths=padNumStart(n.value.length)+padNumStart(n.datatype.value.length)+padNumStart(c.length),a?e.value=c:e.value=c+separator+n.datatype.value+separator+n.value}},numericLiteralReader={read(n,e,t,a){const{keyOffset:c,lengthsOffset:l}=e,o=parseInt(sliceString(n,l,4)),i=parseInt(sliceString(n,l+4,4)),u=parseInt(sliceString(n,l+8,4));return e.lengthsOffset+=12,e.keyOffset+=u+i+o+separator.length*2,t.literal(sliceString(n,c+u+separator.length+i+separator.length,o),t.namedNode(sliceString(n,c+u+separator.length,i)))}},defaultGraphWriter={write(n,e){e.value="dg",e.lengths="2"}},defaultGraphReader={read(n,e,t,a){return e.keyOffset+=2,e.lengthsOffset+=1,t.defaultGraph()}},termWriter={write(n,e,t){switch(n.termType){case"NamedNode":e.type="0",namedNodeWriter.write(n,e,t);break;case"BlankNode":e.type="1",blankNodeWriter.write(n,e,t);break;case"DefaultGraph":e.type="6",defaultGraphWriter.write(n,e,t);break;case"Literal":if(n.language)e.type="4",langStringLiteralWriter.write(n,e,t);else if(n.datatype)switch(n.datatype.value){case string:e.type="3",stringLiteralWriter.write(n,e,t);break;case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:e.type="5",numericLiteralWriter.write(n,e,t,!1,encode(n.value));break;case dateTime:e.type="7",numericLiteralWriter.write(n,e,t,!1,encode(new Date(n.value).valueOf()));break;default:e.type="2",genericLiteralWriter.write(n,e,t)}else e.type="3",stringLiteralWriter.write(n,e,t)}}},termReader={read(n,e,t,a){let c;const l=n.charAt(e.lengthsOffset);switch(e.lengthsOffset+=1,l){case"0":c=namedNodeReader.read(n,e,t,a);break;case"1":c=blankNodeReader.read(n,e,t,a);break;case"2":c=genericLiteralReader.read(n,e,t,a);break;case"3":c=stringLiteralReader.read(n,e,t,a);break;case"4":c=langStringLiteralReader.read(n,e,t,a);break;case"5":c=numericLiteralReader.read(n,e,t,a);break;case"6":c=defaultGraphReader.read(n,e,t,a);break;case"7":c=numericLiteralReader.read(n,e,t,a);break;default:throw new Error(`Unexpected encoded term type "${l}"`)}return c}},twoStepsQuadWriter={subject:{type:"",value:"",lengths:""},predicate:{type:"",value:"",lengths:""},object:{type:"",value:"",lengths:""},graph:{type:"",value:"",lengths:""},ingest(n,e){return termWriter.write(n.subject,this.subject,e),termWriter.write(n.predicate,this.predicate,e),termWriter.write(n.object,this.object,e),termWriter.write(n.graph,this.graph,e),this},write(n,e){let t=n,a="";for(let c=0,l;c<e.length;c+=1)l=this[e[c]],t+=l.value+separator,a+=l.type+l.lengths;return t+a+padNumStart(a.length)}},quadReader={subject:null,predicate:null,object:null,graph:null,keyOffset:0,lengthsOffset:0,read(n,e,t,a,c){this.lengthsOffset=n.length-parseInt(n.slice(-4))-4,this.keyOffset=e;for(let l=0,o;l<t.length;l+=1)o=t[l],this[o]=termReader.read(n,this,a,c),this.keyOffset+=separator.length;return a.quad(this.subject,this.predicate,this.object,this.graph)}},serialized={type:"",value:"",lengths:""},patternLiteralWriter={write(n,e){if(n.language){langStringLiteralWriter.write(n,serialized,e);return}if(n.datatype)switch(n.datatype.value){case string:stringLiteralWriter.write(n,serialized,e);return;case integer:case double:case decimal:case nonPositiveInteger:case negativeInteger:case long:case int:case short:case byte:case nonNegativeInteger:case unsignedLong:case unsignedInt:case unsignedShort:case unsignedByte:case positiveInteger:numericLiteralWriter.write(n,serialized,e,!0,encode(n.value));return;case dateTime:numericLiteralWriter.write(n,serialized,e,!0,encode(new Date(n.value).valueOf()));return;default:genericLiteralWriter.write(n,serialized,e);return}stringLiteralWriter.write(n,serialized,e)}},writePattern=(n,e,t)=>{let a=e.prefix,c=e.prefix,l=!0,o=!0,i=!1,u=!1,d=Object.entries(n).filter(([y,p])=>p).length;if(d===0)return c+=boundary,{gt:a,lt:c,gte:l,lte:o,order:e.terms,index:e};let m=0;for(;m<e.terms.length&&d>0;m+=1){const y=n[e.terms[m]];if(!y||i||u)return null;switch(y.termType){case"Range":i=!0,y.gt?(patternLiteralWriter.write(y.gt,t),a+=serialized.value,l=!1):y.gte&&(patternLiteralWriter.write(y.gte,t),a+=serialized.value,l=!0),y.lt?(patternLiteralWriter.write(y.lt,t),c+=serialized.value,o=!1):y.lte&&(patternLiteralWriter.write(y.lte,t),c+=serialized.value,o=!0);break;case"Literal":u=!0,patternLiteralWriter.write(y,t),a+=serialized.value,l=!0,patternLiteralWriter.write(y,t),c+=serialized.value,o=!0;break;case"NamedNode":namedNodeWriter.write(y,serialized,t),a+=serialized.value,l=!0,namedNodeWriter.write(y,serialized,t),c+=serialized.value,o=!0;break;case"BlankNode":blankNodeWriter.write(y,serialized,t),a+=serialized.value,l=!0,blankNodeWriter.write(y,serialized,t),c+=serialized.value,o=!0;break;case"DefaultGraph":defaultGraphWriter.write(y,serialized,t),a+=serialized.value,l=!0,defaultGraphWriter.write(y,serialized,t),c+=serialized.value,o=!0;break}d-=1,d>0&&m<e.terms.length-1&&(a+=separator,c+=separator)}return o?i||u?c+=boundary:c+=separator+boundary:c+=separator,l?!i&&!u&&(a+=separator):i||u?a+=boundary:a+=separator+boundary,{gt:a,lt:c,gte:l,lte:o,order:e.terms.slice(i?m-1:1),index:e}};var sortedSetExports={},sortedSet={get exports(){return sortedSetExports},set exports(n){sortedSetExports=n}};(function(n,e){(function(t,a){n.exports=a()})(commonjsGlobal,function(){class t{constructor(M){if(M?.strategy==null)throw"Must pass options.strategy, a strategy";if(M?.comparator==null)throw"Must pass options.comparator, a comparator";if(M?.onInsertConflict==null)throw"Must pass options.onInsertConflict, a function";this.priv=new M.strategy(M),this.length=0}insert(M){return this.priv.insert(M),this.length+=1,this}remove(M){return this.priv.remove(M),this.length-=1,this}clear(){return this.priv.clear(),this.length=0,this}contains(M){return this.priv.contains(M)}toArray(){return this.priv.toArray()}forEach(M,V){return this.priv.forEachImpl(M,this,V),this}map(M,V){const H=[];return this.forEach(function(J,ce,oe){return H.push(M.call(V,J,ce,oe))}),H}filter(M,V){const H=[];return this.forEach(function(J,ce,oe){if(M.call(V,J,ce,oe))return H.push(J)}),H}every(M,V){let H=!0;return this.forEach(function(J,ce,oe){H&&!M.call(V,J,ce,oe)&&(H=!1)}),H}some(M,V){let H=!1;return this.forEach(function(J,ce,oe){!H&&M.call(V,J,ce,oe)&&(H=!0)}),H}findIterator(M){return this.priv.findIterator(M)}beginIterator(){return this.priv.beginIterator()}endIterator(){return this.priv.endIterator()}}class a{constructor(M,V){this.priv=M,this.index=V,this.data=this.priv.data}hasNext(){return this.index<this.data.length}hasPrevious(){return this.index>0}value(){return this.index<this.data.length?this.data[this.index]:null}setValue(M){if(!this.priv.options.allowSetValue)throw"Must set options.allowSetValue";if(!this.hasNext())throw"Cannot set value at end of set";return this.data[this.index]=M}next(){return this.index>=this.data.length?null:new a(this.priv,this.index+1)}previous(){return this.index<=0?null:new a(this.priv,this.index-1)}}const c=(L,M,V)=>{let H=0,J=L.length;for(;H<J;){const ce=H+J>>>1;V(L[ce],M)<0?H=ce+1:J=ce}return H};class l{constructor(M){this.options=M,this.onInsertConflict=this.options.onInsertConflict,this.comparator=this.options.comparator,this.data=[]}toArray(){return this.data}insert(M){const V=c(this.data,M,this.comparator);return this.data[V]!==void 0&&this.comparator(this.data[V],M)===0?this.data.splice(V,1,this.onInsertConflict(this.data[V],M)):this.data.splice(V,0,M)}remove(M){const V=c(this.data,M,this.comparator);if(this.comparator(this.data[V],M)!==0)throw"Value not in set";return this.data.splice(V,1)}clear(){return this.data.length=0}contains(M){const V=c(this.data,M,this.comparator);return this.index!==this.data.length&&this.comparator(this.data[V],M)===0}forEachImpl(M,V,H){const J=this.data,ce=J.length;for(let oe=0;oe<ce;oe++)M.call(H,J[oe],oe,V)}findIterator(M){const V=c(this.data,M,this.comparator);return new a(this,V)}beginIterator(){return new a(this,0)}endIterator(){return new a(this,this.data.length)}}const o=(L,M)=>{for(;M[L]!==null;){const V=M;M=M[L],M._iteratorParentNode=V}return M},i=(L,M)=>{let V,H;if(M[L]!==null)V=M,M=M[L],M._iteratorParentNode=V,H=L==="left"?"right":"left",M=o(H,M);else{for(;(V=M._iteratorParentNode)!==null&&V[L]===M;)M=V;M=V}return M};class u{constructor(M,V){this.tree=M,this.node=V}next(){if(this.node===null)return null;{const M=i("right",this.node);return new u(this.tree,M)}}previous(){if(this.node===null){if(this.tree.root===null)return null;{this.tree.root._iteratorParentNode=null;const M=o("right",this.tree.root);return new u(this.tree,M)}}else{const M=i("left",this.node);return M===null?null:new u(this.tree,M)}}hasNext(){return this.node!==null}hasPrevious(){return this.previous()!==null}value(){return this.node===null?null:this.node.value}setValue(M){if(!this.tree.options.allowSetValue)throw"Must set options.allowSetValue";if(!this.hasNext())throw"Cannot set value at end of set";return this.node.value=M}}u.find=function(L,M,V){const H=L.root;H!=null&&(H._iteratorParentNode=null);let J=H,ce=null;for(;J!==null;){const oe=V(M,J.value);if(oe===0)break;if(oe<0){if(J.left===null)break;ce=J,J.left._iteratorParentNode=J,J=J.left}else if(J.right!==null)J.right._iteratorParentNode=J,J=J.right;else{J=ce;break}}return new u(L,J)},u.left=L=>{if(L.root===null)return new u(L,null);{L.root._iteratorParentNode=null;const M=o("left",L.root);return new u(L,M)}},u.right=L=>new u(L,null);const d=(L,M)=>{L!==null&&(d(L.left,M),M(L.value),d(L.right,M))};class m{toArray(){const M=[];return d(this.root,function(V){return M.push(V)}),M}clear(){return this.root=null}forEachImpl(M,V,H){let J=0;d(this.root,function(ce){M.call(H,ce,J,V),J+=1})}contains(M){const V=this.comparator;let H=this.root;for(;H!==null;){const J=V(M,H.value);if(J===0)break;J<0?H=H.left:H=H.right}return H!==null&&V(H.value,M)===0}findIterator(M){return u.find(this,M,this.comparator)}beginIterator(){return u.left(this)}endIterator(){return u.right(this)}}class y{constructor(M){this.value=M,this.left=null,this.right=null}}const p=(L,M)=>{for(;L[M]!==null;)L=L[M];return L},T=(L,M,V)=>{if(L===null)throw"Value not in set";const H=V(M,L.value);if(H<0)L.left=T(L.left,M,V);else if(H>0)L.right=T(L.right,M,V);else if(L.left===null&&L.right===null)L=null;else if(L.right===null)L=L.left;else if(L.left===null)L=L.right;else{const J=p(L.right,"left");L.value=J.value,L.right=T(L.right,J.value,V)}return L};class _ extends m{constructor(M){super(),this.options=M,this.comparator=this.options.comparator,this.onInsertConflict=this.options.onInsertConflict,this.root=null}insert(M){const V=this.comparator;if(this.root!==null){let H=this.root,J=null;for(;;){const ce=V(M,H.value);if(ce===0){H.value=this.onInsertConflict(H.value,M);return}else{if(J=ce<0?"left":"right",H[J]===null)break;H=H[J]}}return H[J]=new y(M)}else return this.root=new y(M)}remove(M){return this.root=T(this.root,M,this.comparator)}}class w{constructor(M){this.value=M,this.left=null,this.right=null,this.isRed=!0}}const S=L=>{const M=L.right;return L.right=M.left,M.left=L,M.isRed=L.isRed,L.isRed=!0,M},I=L=>{const M=L.left;return L.left=M.right,M.right=L,M.isRed=L.isRed,L.isRed=!0,M},j=L=>{L.isRed=!L.isRed,L.left.isRed=!L.left.isRed,L.right.isRed=!L.right.isRed},x=L=>(j(L),L.right!==null&&L.right.left!==null&&L.right.left.isRed&&(L.right=I(L.right),L=S(L),j(L)),L),v=L=>(j(L),L.left!==null&&L.left.left!==null&&L.left.left.isRed&&(L=I(L),j(L)),L),O=(L,M,V,H)=>{if(L===null)return new w(M);const J=V(M,L.value);return J===0?L.value=H(L.value,M):J<0?L.left=O(L.left,M,V,H):L.right=O(L.right,M,V,H),L.right!==null&&L.right.isRed&&!(L.left!==null&&L.left.isRed)&&(L=S(L)),L.left!==null&&L.left.isRed&&L.left.left!==null&&L.left.left.isRed&&(L=I(L)),L.left!==null&&L.left.isRed&&L.right!==null&&L.right.isRed&&j(L),L},N=L=>{for(;L.left!==null;)L=L.left;return L},D=L=>(L.right!==null&&L.right.isRed&&(L=S(L)),L.left!==null&&L.left.isRed&&L.left.left!==null&&L.left.left.isRed&&(L=I(L)),L.left!==null&&L.left.isRed&&L.right!==null&&L.right.isRed&&j(L),L),G=L=>L.left===null?null:(!L.left.isRed&&!(L.left.left!==null&&L.left.left.isRed)&&(L=x(L)),L.left=G(L.left),D(L)),W=(L,M,V)=>{if(L===null)throw"Value not in set";if(V(M,L.value)<0){if(L.left===null)throw"Value not in set";!L.left.isRed&&!(L.left.left!==null&&L.left.left.isRed)&&(L=x(L)),L.left=W(L.left,M,V)}else{if(L.left!==null&&L.left.isRed&&(L=I(L)),L.right===null){if(V(M,L.value)===0)return null;throw"Value not in set"}!L.right.isRed&&!(L.right.left!==null&&L.right.left.isRed)&&(L=v(L)),V(M,L.value)===0?(L.value=N(L.right).value,L.right=G(L.right)):L.right=W(L.right,M,V)}return L!==null&&(L=D(L)),L};class U extends m{constructor(M){super(),this.options=M,this.comparator=this.options.comparator,this.onInsertConflict=this.options.onInsertConflict,this.root=null}insert(M){this.root=O(this.root,M,this.comparator,this.onInsertConflict),this.root.isRed=!1}remove(M){this.root=W(this.root,M,this.comparator),this.root!==null&&(this.root.isRed=!1)}}const Q={OnInsertConflictThrow:(L,M)=>{throw new Error("Value already in set")},OnInsertConflictReplace:(L,M)=>M,OnInsertConflictIgnore:(L,M)=>L};class Z extends t{constructor(M){M||(M={}),M.strategy||(M.strategy=U),M.comparator||(M.comparator=function(V,H){return(V||0)-(H||0)}),M.onInsertConflict||(M.onInsertConflict=Q.OnInsertConflictThrow),super(M)}}return Z.ArrayStrategy=l,Z.BinaryTreeStrategy=_,Z.RedBlackTreeStrategy=U,Object.assign(Z,Q),Z})})(sortedSet);class SortingIterator extends AsyncIterator{constructor(e,t,a,c){super();let l;const o=()=>{const i=new sortedSetExports({comparator:t}),u=()=>{e.removeListener("data",d),e.removeListener("error",m),e.removeListener("end",y),e.destroy()},d=p=>{i.insert(a(p))},m=p=>{u(),this.emit("error",p)},y=()=>{u(),l=i.beginIterator(),this.readable=!0};e.on("data",d),e.on("error",m),e.on("end",y)};this.read=()=>{if(l){const i=l.value();return i===null?(this.close(),null):(l=l.next(),c(i))}return this.readable=!1,null},RESOLVED.then(o).catch(i=>{RESOLVED.then(()=>this.emit("error",i))})}}const SORTING_KEY=Symbol(),compareSortableQuadsReverse=(n,e)=>n[SORTING_KEY]>e[SORTING_KEY]?-1:1,compareSortableQuads=(n,e)=>n[SORTING_KEY]>e[SORTING_KEY]?1:-1,emitSortableQuad=n=>n,getLevelQueryForIndex=(n,e,t,a)=>{const c=writePattern(n,e,t);if(c===null)return null;const l={[c.gte?"gte":"gt"]:c.gt,[c.lte?"lte":"lt"]:c.lt,keys:!0,values:!1,keyEncoding:"utf8"};return typeof a.limit=="number"&&(l.limit=a.limit),typeof a.reverse=="boolean"&&(l.reverse=a.reverse),{level:l,order:c.order,index:c.index}},getLevelQuery=(n,e,t,a)=>{for(let c=0,l;c<e.length;c+=1){l=e[c];const o=getLevelQueryForIndex(n,l,t,a);if(o!==null&&(!a.order||arrStartsWith(o.order,a.order)))return o}return null},getStream=async(n,e,t)=>{const{dataFactory:a,prefixes:c,indexes:l}=n,o=getLevelQuery(e,l,c,t);if(o!==null){const{index:u,level:d,order:m}=o;let y=new LevelIterator(n.db.iterator(d),p=>quadReader.read(p,u.prefix.length,u.terms,a,c));return{type:ResultType.QUADS,order:m,iterator:y,index:u.terms,resorted:!1}}const i=getLevelQuery(e,l,c,emptyObject);if(i!==null){const{index:u,level:d,order:m}=i;let y=new LevelIterator(n.db.iterator(d),p=>quadReader.read(p,u.prefix.length,u.terms,a,c));if(typeof t.order<"u"&&!arrStartsWith(t.order,m)){const p=_=>(_[SORTING_KEY]=twoStepsQuadWriter.ingest(_,c).write("",t.order)+separator,_),T=t.reverse===!0?compareSortableQuadsReverse:compareSortableQuads;if(y=new SortingIterator(y,T,p,emitSortableQuad),typeof t.limit<"u"){const _=function(){this.removeListener("end",_),this.removeListener("error",_),this.destroy()};y=y.take(t.limit).on("end",_).on("error",_)}}return{type:ResultType.QUADS,order:t.order||m,iterator:y,index:u.terms,resorted:!0}}throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(t)}`)},getApproximateSize=async(n,e,t)=>{if(!n.db.approximateSize)return{type:ResultType.APPROXIMATE_SIZE,approximateSize:1/0};const{indexes:a,prefixes:c}=n,l=getLevelQuery(e,a,c,t);if(l===null)throw new Error(`No index compatible with pattern ${JSON.stringify(e)} and options ${JSON.stringify(t)}`);const{level:o}=l,i=o.gte||o.gt,u=o.lte||o.lt;return new Promise((d,m)=>{n.db.approximateSize(i,u,(y,p)=>{if(y){m(y);return}d({type:ResultType.APPROXIMATE_SIZE,approximateSize:Math.max(1,p)})})})};class Scope{id;blankNodes;factory;static async init(e){return new Scope(e.dataFactory,uid(),new Map)}static async load(e,t){const a=Scope.getLevelIteratorOpts(!1,!0,t),c=new LevelIterator(e.db.iterator(a),(i,u)=>u),l=new Map,{dataFactory:o}=e;return await consumeOneByOne(c,i=>{const{originalLabel:u,randomLabel:d}=JSON.parse(i);l.set(u,o.blankNode(d))}),new Scope(o,t,l)}static async delete(e,t){const a=e.db.batch(),c=Scope.getLevelIteratorOpts(!0,!1,t),l=new LevelIterator(e.db.iterator(c),(o,i)=>o);await consumeOneByOne(l,o=>{a.del(o)}),await a.write()}static getLevelIteratorOpts(e,t,a){const c=a?`SCOPE${separator}${a}${separator}`:`SCOPE${separator}`;return{keys:e,values:t,keyEncoding:"utf8",valueEncoding:"utf8",gte:c,lte:`${c}${boundary}`}}static addMappingToLevelBatch(e,t,a,c){t.put(`SCOPE${separator}${e}${separator}${a}`,JSON.stringify({originalLabel:a,randomLabel:c}))}constructor(e,t,a){this.blankNodes=a,this.factory=e,this.id=t}parseBlankNode(e,t){let a=this.blankNodes.get(e.value);return a||(a=this.factory.blankNode(uid()),this.blankNodes.set(e.value,a),Scope.addMappingToLevelBatch(this.id,t,e.value,a.value)),a}parseSubject(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseObject(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseGraph(e,t){switch(e.termType){case"BlankNode":return this.parseBlankNode(e,t);default:return e}}parseQuad(e,t){return this.factory.quad(this.parseSubject(e.subject,t),e.predicate,this.parseObject(e.object,t),this.parseGraph(e.graph,t))}}class Quadstore{db;indexes;id;prefixes;dataFactory;constructor(e){ensureAbstractLevel(e.backend,'"opts.backend"'),this.dataFactory=e.dataFactory,this.db=e.backend,this.indexes=[],this.id=uid(),(e.indexes||defaultIndexes).forEach(t=>this._addIndex(t)),this.prefixes=e.prefixes||{expandTerm:t=>t,compactIri:t=>t}}ensureReady(){if(this.db.status!=="open")throw new Error(`Store is not ready (status: "${this.db.status}"). Did you call store.open()?`)}async open(){this.db.status!=="open"&&await this.db.open()}async close(){this.db.status!=="closed"&&await this.db.close()}toString(){return this.toJSON()}toJSON(){return`[object ${this.constructor.name}::${this.id}]`}_addIndex(e){const t=e.map(a=>a.charAt(0).toUpperCase()).join("");this.indexes.push({terms:e,prefix:t+separator})}async clear(){if(typeof this.db.clear=="function")return new Promise((e,t)=>{this.db.clear(a=>{a?t(a):e()})});await this.delStream((await this.getStream({})).iterator,{batchSize:20})}match(e,t,a,c,l=emptyObject){if(e&&e.termType==="Literal")return new EmptyIterator;const o={subject:e,predicate:t,object:a,graph:c};return wrap$1(this.getStream(o,l).then(i=>i.iterator))}async countQuads(e,t,a,c,l=emptyObject){if(e&&e.termType==="Literal")return 0;const o={subject:e,predicate:t,object:a,graph:c};return(await this.getApproximateSize(o,l)).approximateSize}import(e){const t=new eventsExports.EventEmitter;return this.putStream(e,{}).then(()=>{t.emit("end")}).catch(a=>{t.emit("error",a)}),t}remove(e){const t=new eventsExports.EventEmitter;return this.delStream(e,{}).then(()=>t.emit("end")).catch(a=>t.emit("error",a)),t}removeMatches(e,t,a,c,l=emptyObject){const o=this.match(e,t,a,c,l);return this.remove(o)}deleteGraph(e){return this.removeMatches(void 0,void 0,void 0,e)}async getApproximateSize(e,t=emptyObject){return await this.ensureReady(),await getApproximateSize(this,e,t)}_batchPut(e,t){const{indexes:a,prefixes:c}=this;twoStepsQuadWriter.ingest(e,c);for(let l=0,o=a.length,i;l<o;l+=1){i=a[l];const u=twoStepsQuadWriter.write(i.prefix,i.terms);t=t.put(u,emptyValue,levelPutOpts)}return t}async put(e,t=emptyObject){this.ensureReady();const{indexes:a,db:c}=this;let l=c.batch();return t.scope&&(e=t.scope.parseQuad(e,l)),this._batchPut(e,l),await this.writeBatch(l,t),{type:ResultType.VOID}}async multiPut(e,t=emptyObject){this.ensureReady();const{indexes:a,db:c}=this;let l=c.batch();for(let o=0,i=e.length,u;o<i;o+=1)u=e[o],t.scope&&(u=t.scope.parseQuad(u,l)),this._batchPut(u,l);return await this.writeBatch(l,t),{type:ResultType.VOID}}_batchDel(e,t){const{indexes:a,prefixes:c}=this;twoStepsQuadWriter.ingest(e,c);for(let l=0,o=a.length,i;l<o;l+=1){i=a[l];const u=twoStepsQuadWriter.write(i.prefix,i.terms);t=t.del(u,levelDelOpts)}return t}async del(e,t=emptyObject){this.ensureReady();const a=this.db.batch();return this._batchDel(e,a),await this.writeBatch(a,t),{type:ResultType.VOID}}async multiDel(e,t=emptyObject){this.ensureReady();const a=this.db.batch();for(let c=0,l=e.length,o;c<l;c+=1)o=e[c],this._batchDel(o,a);return await this.writeBatch(a,t),{type:ResultType.VOID}}async patch(e,t,a=emptyObject){this.ensureReady();const{indexes:c,db:l}=this,o=l.batch();return this._batchDel(e,o),this._batchPut(t,o),await this.writeBatch(o,a),{type:ResultType.VOID}}async multiPatch(e,t,a=emptyObject){this.ensureReady();const{indexes:c,db:l}=this;let o=l.batch();for(let i=0,u=e.length,d;i<u;i+=1)d=e[i],this._batchDel(d,o);for(let i=0,u=t.length,d;i<u;i+=1)d=t[i],this._batchPut(d,o);return await this.writeBatch(o,a),{type:ResultType.VOID}}async writeBatch(e,t){t.preWrite&&await t.preWrite(e),await e.write()}async get(e,t=emptyObject){this.ensureReady();const a=await this.getStream(e,t);return{items:await streamToArray(a.iterator),type:a.type,order:a.order,index:a.index,resorted:a.resorted}}async getStream(e,t=emptyObject){return this.ensureReady(),await getStream(this,e,t)}async putStream(e,t=emptyObject){this.ensureReady();const a=t.batchSize||1;return a===1?await consumeOneByOne(e,c=>this.put(c,t)):await consumeInBatches(e,a,c=>this.multiPut(c,t)),{type:ResultType.VOID}}async delStream(e,t=emptyObject){this.ensureReady();const a=t.batchSize||1;return a===1?await consumeOneByOne(e,c=>this.del(c)):await consumeInBatches(e,a,c=>this.multiDel(c)),{type:ResultType.VOID}}async initScope(){return await this.ensureReady(),await Scope.init(this)}async loadScope(e){return await this.ensureReady(),await Scope.load(this,e)}async deleteScope(e){await this.ensureReady(),await Scope.delete(this,e)}async deleteAllScopes(){await this.ensureReady(),await Scope.delete(this)}}var sparqlalgebrajs={},sparqlAlgebra={},es6=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var a,c,l;if(Array.isArray(e)){if(a=e.length,a!=t.length)return!1;for(c=a;c--!==0;)if(!n(e[c],t[c]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(c of e.entries())if(!t.has(c[0]))return!1;for(c of e.entries())if(!n(c[1],t.get(c[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(c of e.entries())if(!t.has(c[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(a=e.length,a!=t.length)return!1;for(c=a;c--!==0;)if(e[c]!==t[c])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),a=l.length,a!==Object.keys(t).length)return!1;for(c=a;c--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[c]))return!1;for(c=a;c--!==0;){var o=l[c];if(!n(e[o],t[o]))return!1}return!0}return e!==e&&t!==t},rdfString={},TermUtil$1={};Object.defineProperty(TermUtil$1,"__esModule",{value:!0});TermUtil$1.stringQuadToQuad=TermUtil$1.quadToStringQuad=TermUtil$1.stringToTerm=TermUtil$1.getLiteralLanguage=TermUtil$1.getLiteralType=TermUtil$1.getLiteralValue=TermUtil$1.termToString=void 0;const rdf_data_factory_1$2=rdfDataFactory,FACTORY=new rdf_data_factory_1$2.DataFactory;function termToString(n){if(n)switch(n.termType){case"NamedNode":return n.value;case"BlankNode":return"_:"+n.value;case"Literal":const e=n;return'"'+e.value+'"'+(e.datatype&&e.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&e.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+e.datatype.value:"")+(e.language?"@"+e.language:"");case"Quad":return`<<${termToString(n.subject)} ${termToString(n.predicate)} ${termToString(n.object)}${n.graph.termType==="DefaultGraph"?"":" "+termToString(n.graph)}>>`;case"Variable":return"?"+n.value;case"DefaultGraph":return n.value}}TermUtil$1.termToString=termToString;function getLiteralValue(n){const e=/^"([^]*)"/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]}TermUtil$1.getLiteralValue=getLiteralValue;function getLiteralType(n){const e=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]||(e[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}TermUtil$1.getLiteralType=getLiteralType;function getLiteralLanguage(n){const e=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(n);if(!e)throw new Error(n+" is not a literal");return e[1]?e[1].toLowerCase():""}TermUtil$1.getLiteralLanguage=getLiteralLanguage;function stringToTerm(n,e){if(e=e||FACTORY,!n||!n.length)return e.defaultGraph();switch(n[0]){case"_":return e.blankNode(n.substr(2));case"?":if(!e.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return e.variable(n.substr(1));case'"':const t=getLiteralLanguage(n),a=e.namedNode(getLiteralType(n));return e.literal(getLiteralValue(n),t||a);case"<":default:if(n.startsWith("<<")&&n.endsWith(">>")){const c=n.slice(2,-2).trim();let l=[],o=0,i=0,u=!1;for(let d=0;d<c.length;d++){const m=c[d];if(m==="<"&&o++,m===">"){if(o===0)throw new Error("Found closing tag without opening tag in "+n);o--}if(m==='"'){let y=!1,p=d;for(;p-- >0&&c[p]==="\\";)y=!y;y||(u=!u)}if(m===" "&&!u&&o===0){for(l.push(c.slice(i,d));c[d+1]===" ";)d+=1;i=d+1}}if(o!==0)throw new Error("Found opening tag without closing tag in "+n);if(l.push(c.slice(i,c.length)),l.length!==3&&l.length!==4)throw new Error("Nested quad syntax error "+n);return l=l.map(d=>d.startsWith("<")&&!d.includes(" ")?d.slice(1,-1):d),e.quad(stringToTerm(l[0]),stringToTerm(l[1]),stringToTerm(l[2]),l[3]?stringToTerm(l[3]):void 0)}return e.namedNode(n)}}TermUtil$1.stringToTerm=stringToTerm;function quadToStringQuad(n){return{subject:termToString(n.subject),predicate:termToString(n.predicate),object:termToString(n.object),graph:termToString(n.graph)}}TermUtil$1.quadToStringQuad=quadToStringQuad;function stringQuadToQuad(n,e){return e=e||FACTORY,e.quad(stringToTerm(n.subject,e),stringToTerm(n.predicate,e),stringToTerm(n.object,e),stringToTerm(n.graph,e))}TermUtil$1.stringQuadToQuad=stringQuadToQuad;(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.termToString=n.stringToTerm=n.stringQuadToQuad=n.quadToStringQuad=n.getLiteralValue=n.getLiteralType=n.getLiteralLanguage=void 0;const e=TermUtil$1;Object.defineProperty(n,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(n,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(n,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(n,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(n,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(n,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(n,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(rdfString);var algebra={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.expressionTypes=n.types=void 0,function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"}(n.types||(n.types={})),function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"}(n.expressionTypes||(n.expressionTypes={}))})(algebra);var factory$2={},Wildcard$2={};let Wildcard$1=class{constructor(){return WILDCARD||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(Wildcard$1.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(Wildcard$1.prototype,"termType",{enumerable:!0,value:"Wildcard"});var WILDCARD=new Wildcard$1;Wildcard$2.Wildcard=Wildcard$1;var SparqlParser=function(){var n=function(ye,pe,ve,we){for(ve=ve||{},we=ye.length;we--;ve[ye[we]]=pe);return ve},e=[6,12,13,15,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],t=[2,211],a=[107,117,120,122,123,132,133,138,322,323,324,325,326],c=[2,389],l=[1,22],o=[1,31],i=[13,16,35,195,219,224,312],u=[6,90],d=[45,46,58],m=[45,58],y=[1,62],p=[1,64],T=[1,60],_=[1,63],w=[1,69],S=[1,70],I=[26,34,35],j=[13,16,35,195,219,312],x=[13,16,312],v=[119,141,320,327],O=[13,16,119,141,312],N=[1,96],D=[1,100],G=[1,102],W=[119,141,320,321,327],U=[13,16,119,141,312,321],Q=[1,108],Z=[2,253],L=[1,107],M=[13,16,34,35,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],V=[6,45,46,58,68,75,78,86,88,90],H=[6,13,16,34,45,46,58,68,75,78,86,88,90,312],J=[6,13,16,26,34,35,37,38,45,46,48,58,68,75,78,86,87,88,90,93,100,116,119,132,133,135,140,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,330,331,333,334,335,336,337,338,339],ce=[34,35,45,46,58],oe=[1,139],le=[1,140],ue=[1,151],be=[1,131],Ee=[1,125],Ae=[1,130],xe=[1,132],Oe=[1,142],fe=[1,143],Se=[1,144],Ne=[1,145],De=[1,147],Ie=[1,148],Le=[2,461],C=[1,157],$=[1,158],z=[1,159],se=[1,152],Y=[1,153],ne=[1,156],ae=[1,166],q=[1,167],ee=[1,168],re=[1,169],ie=[1,170],de=[1,171],me=[1,172],_e=[1,173],g=[1,174],h=[1,175],b=[1,165],E=[1,160],P=[1,161],F=[1,162],X=[1,163],ge=[1,164],Re=[6,13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],je=[2,312],Pe=[1,199],Te=[1,197],Qe=[6,191],Ge=[2,329],sr=[2,317],ut=[45,135],te=[6,48,78,86,88,90],he=[2,257],Ue=[1,213],Ve=[1,215],He=[6,48,75,78,86,88,90],kt=[2,255],Ut=[1,221],st=[1,233],Jt=[1,231],Je=[1,239],Wt=[1,232],We=[1,237],qe=[1,238],Ur=[6,68,75,78,86,88,90],ar=[37,38,191,250,278],Vt=[37,38,191,250,254,278],Qt=[37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,334,335,336,337,338,339],Ye=[26,37,38,191,250,254,258,271,273,278,295,306,307,308,309,310,311,331,334,335,336,337,338,339],Vr=[1,267],Qr=[1,266],Ze=[6,13,16,26,34,35,37,38,46,48,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],$r=[1,275],Gr=[1,274],rt=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],qt=[35,93],or=[13,16,26,34,35,37,38,46,48,87,90,93,100,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,250,254,258,271,273,278,295,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339],Hr=[13,16,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],Xr=[48,93],zr=[34,38],xt=[6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331],ct=[6,13,16,26,34,35,38,87,93,226,231,245,246,271,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330,331,333],Kr=[1,299],Jr=[1,300],Wr=[6,116,191],It=[48,119],Tr=[6,48,86,88,90],qr=[2,341],mt=[2,333],wt=[1,340],Tt=[1,342],Yt=[48,119,328],dt=[13,16,34,195,312],Nt=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],Ke=[13,16,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],Er=[1,374],Or=[1,375],Yr=[13,16,26,34,35,87,219,271,273,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,339,340,341,342,343,344],Sr=[1,398],Rt=[1,399],Zr=[13,16,38,195,224,312],en=[1,416],Et=[6,48,90],tn=[6,13,16,35,48,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],Ar=[6,13,16,34,35,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,226,231,245,246,275,276,277,279,281,282,284,285,288,290,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,339,340,341,342,343,344],Pt=[46,48,90,119,167,168,170,173,174],Zt=[1,435],er=[1,436],rn=[1,442],nn=[1,441],Lt=[48,119,191,227,328],ur=[13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],cr=[13,16,34,35,38,48,87,93,119,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],lr=[13,16,38,48,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],jr=[35,48],sn=[2,332],an=[1,497],on=[1,494],un=[1,495],cn=[6,13,16,26,34,35,37,38,46,48,68,75,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,329,331,334,335,336,337,338,339,340,341,342,343,344],xr=[1,515],dr=[46,48,90,119,167,168,170,173,174,328],ln=[13,16,34,35,195,219,224,312],Dt=[6,13,16,34,35,48,75,78,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],dn=[13,16,34,35,38,48,87,93,119,191,195,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],$t=[6,13,16,34,35,48,81,83,86,88,90,275,276,277,279,281,282,284,285,288,290,312,339,340,341,342,343,344],fn=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],hn=[13,16,34,312],yt=[13,16,34,35,46,48,87,90,93,119,167,168,170,173,174,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],bt=[2,344],fr=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],pn=[13,16,34,35,37,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,235,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],_t=[2,339],mn=[13,16,34,35,38,46,48,87,90,93,119,167,168,170,173,174,191,195,219,224,226,227,231,245,246,278,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328],yn=[13,16,38,87,100,231,299,300,301,302,303,304,305,306,307,308,309,310,311,312],tr=[46,48,90,119,167,168,170,173,174,191,227,328],bn=[13,16,34,38,48,87,100,195,231,235,299,300,301,302,303,304,305,306,307,308,309,310,311,312],gn=[13,16,34,35,48,87,93,119,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],_n=[2,327],Ir={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Prologue_repetition0:7,Query:8,Query_group0:9,Query_option0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectQuery:17,SelectClauseWildcard:18,SelectQuery_repetition0:19,WhereClause:20,SolutionModifierNoGroup:21,SelectClauseVars:22,SelectQuery_repetition1:23,SolutionModifier:24,SelectClauseBase:25,"*":26,SelectClauseVars_repetition_plus0:27,SELECT:28,SelectClauseBase_option0:29,SubSelect:30,SubSelect_option0:31,SubSelect_option1:32,SelectClauseItem:33,VAR:34,"(":35,Expression:36,AS:37,")":38,VarTriple:39,ConstructQuery:40,CONSTRUCT:41,ConstructTemplate:42,ConstructQuery_repetition0:43,ConstructQuery_repetition1:44,WHERE:45,"{":46,ConstructQuery_option0:47,"}":48,DescribeQuery:49,DESCRIBE:50,DescribeQuery_group0:51,DescribeQuery_repetition0:52,DescribeQuery_option0:53,AskQuery:54,ASK:55,AskQuery_repetition0:56,DatasetClause:57,FROM:58,DatasetClause_option0:59,iri:60,WhereClause_option0:61,GroupGraphPattern:62,SolutionModifier_option0:63,SolutionModifierNoGroup_option0:64,SolutionModifierNoGroup_option1:65,SolutionModifierNoGroup_option2:66,GroupClause:67,GROUP:68,BY:69,GroupClause_repetition_plus0:70,GroupCondition:71,BuiltInCall:72,FunctionCall:73,HavingClause:74,HAVING:75,HavingClause_repetition_plus0:76,OrderClause:77,ORDER:78,OrderClause_repetition_plus0:79,OrderCondition:80,ASC:81,BrackettedExpression:82,DESC:83,Constraint:84,LimitOffsetClauses:85,LIMIT:86,INTEGER:87,OFFSET:88,ValuesClause:89,VALUES:90,InlineData:91,InlineData_repetition0:92,NIL:93,InlineData_repetition1:94,InlineData_repetition_plus2:95,InlineData_repetition3:96,DataBlockValue:97,Literal:98,ConstTriple:99,UNDEF:100,DataBlockValueList:101,DataBlockValueList_repetition_plus0:102,Update:103,Update_repetition0:104,Update1:105,Update_option0:106,LOAD:107,Update1_option0:108,Update1_option1:109,Update1_group0:110,Update1_option2:111,GraphRefAll:112,Update1_group1:113,Update1_option3:114,GraphOrDefault:115,TO:116,CREATE:117,Update1_option4:118,GRAPH:119,INSERTDATA:120,QuadPattern:121,DELETEDATA:122,DELETEWHERE:123,Update1_option5:124,InsertClause:125,Update1_option6:126,Update1_repetition0:127,Update1_option7:128,DeleteClause:129,Update1_option8:130,Update1_repetition1:131,DELETE:132,INSERT:133,UsingClause:134,USING:135,UsingClause_option0:136,WithClause:137,WITH:138,IntoGraphClause:139,INTO:140,DEFAULT:141,GraphOrDefault_option0:142,GraphRefAll_group0:143,QuadPattern_option0:144,QuadPattern_repetition0:145,QuadsNotTriples:146,QuadsNotTriples_group0:147,QuadsNotTriples_option0:148,QuadsNotTriples_option1:149,QuadsNotTriples_option2:150,TriplesTemplate:151,TriplesTemplate_repetition0:152,TriplesSameSubject:153,TriplesTemplate_option0:154,GroupGraphPatternSub:155,GroupGraphPatternSub_option0:156,GroupGraphPatternSub_repetition0:157,GroupGraphPatternSubTail:158,GraphPatternNotTriples:159,GroupGraphPatternSubTail_option0:160,GroupGraphPatternSubTail_option1:161,TriplesBlock:162,TriplesBlock_repetition0:163,TriplesSameSubjectPath:164,TriplesBlock_option0:165,GraphPatternNotTriples_repetition0:166,OPTIONAL:167,MINUS:168,GraphPatternNotTriples_group0:169,SERVICE:170,GraphPatternNotTriples_option0:171,GraphPatternNotTriples_group1:172,FILTER:173,BIND:174,FunctionCall_option0:175,FunctionCall_repetition0:176,ExpressionList:177,ExpressionList_repetition0:178,ConstructTemplate_option0:179,ConstructTriples:180,ConstructTriples_repetition0:181,ConstructTriples_option0:182,TriplesSameSubject_group0:183,PropertyListNotEmpty:184,TriplesNode:185,PropertyList:186,PropertyList_option0:187,VerbObjectList:188,PropertyListNotEmpty_repetition0:189,SemiOptionalVerbObjectList:190,";":191,SemiOptionalVerbObjectList_option0:192,Verb:193,ObjectList:194,a:195,ObjectList_repetition0:196,GraphNode:197,ObjectListPath:198,ObjectListPath_repetition0:199,GraphNodePath:200,TriplesSameSubjectPath_group0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,PropertyListPathNotEmpty_group0:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmpty_repetition1:207,PropertyListPathNotEmptyTail:208,PropertyListPathNotEmptyTail_group0:209,Path:210,Path_repetition0:211,PathSequence:212,PathSequence_repetition0:213,PathEltOrInverse:214,PathElt:215,PathPrimary:216,PathElt_option0:217,PathEltOrInverse_option0:218,"!":219,PathNegatedPropertySet:220,PathOneInPropertySet:221,PathNegatedPropertySet_repetition0:222,PathNegatedPropertySet_option0:223,"^":224,TriplesNode_repetition_plus0:225,"[":226,"]":227,TriplesNodePath_repetition_plus0:228,GraphNode_group0:229,GraphNodePath_group0:230,"<<":231,VarTriple_group0:232,VarTriple_group1:233,VarTriple_group2:234,">>":235,VarTriple_group3:236,VarTriple_group4:237,ConstTriple_group0:238,ConstTriple_group1:239,ConstTriple_group2:240,ConstTriple_group3:241,ConstTriple_group4:242,VarOrTerm:243,Term:244,BLANK_NODE_LABEL:245,ANON:246,ConditionalAndExpression:247,Expression_repetition0:248,ExpressionTail:249,"||":250,RelationalExpression:251,ConditionalAndExpression_repetition0:252,ConditionalAndExpressionTail:253,"&&":254,AdditiveExpression:255,RelationalExpression_group0:256,RelationalExpression_option0:257,IN:258,MultiplicativeExpression:259,AdditiveExpression_repetition0:260,AdditiveExpressionTail:261,AdditiveExpressionTail_group0:262,NumericLiteralPositive:263,AdditiveExpressionTail_repetition0:264,NumericLiteralNegative:265,AdditiveExpressionTail_repetition1:266,UnaryExpression:267,MultiplicativeExpression_repetition0:268,MultiplicativeExpressionTail:269,MultiplicativeExpressionTail_group0:270,"+":271,PrimaryExpression:272,"-":273,Aggregate:274,FUNC_ARITY0:275,FUNC_ARITY1:276,FUNC_ARITY2:277,",":278,IF:279,BuiltInCall_group0:280,BOUND:281,BNODE:282,BuiltInCall_option0:283,EXISTS:284,COUNT:285,Aggregate_option0:286,Aggregate_group0:287,FUNC_AGGREGATE:288,Aggregate_option1:289,GROUP_CONCAT:290,Aggregate_option2:291,Aggregate_option3:292,GroupConcatSeparator:293,SEPARATOR:294,"=":295,String:296,LANGTAG:297,"^^":298,DECIMAL:299,DOUBLE:300,BOOLEAN:301,STRING_LITERAL1:302,STRING_LITERAL2:303,STRING_LITERAL_LONG1:304,STRING_LITERAL_LONG2:305,INTEGER_POSITIVE:306,DECIMAL_POSITIVE:307,DOUBLE_POSITIVE:308,INTEGER_NEGATIVE:309,DECIMAL_NEGATIVE:310,DOUBLE_NEGATIVE:311,PNAME_LN:312,QueryOrUpdate_group0_option0:313,Prologue_repetition0_group0:314,SelectClauseBase_option0_group0:315,DISTINCT:316,REDUCED:317,DescribeQuery_group0_repetition_plus0_group0:318,DescribeQuery_group0_repetition_plus0:319,NAMED:320,SILENT:321,CLEAR:322,DROP:323,ADD:324,MOVE:325,COPY:326,ALL:327,".":328,UNION:329,"|":330,"/":331,PathElt_option0_group0:332,"?":333,"!=":334,"<":335,">":336,"<=":337,">=":338,NOT:339,CONCAT:340,COALESCE:341,SUBSTR:342,REGEX:343,REPLACE:344,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",26:"*",28:"SELECT",34:"VAR",35:"(",37:"AS",38:")",41:"CONSTRUCT",45:"WHERE",46:"{",48:"}",50:"DESCRIBE",55:"ASK",58:"FROM",68:"GROUP",69:"BY",75:"HAVING",78:"ORDER",81:"ASC",83:"DESC",86:"LIMIT",87:"INTEGER",88:"OFFSET",90:"VALUES",93:"NIL",100:"UNDEF",107:"LOAD",116:"TO",117:"CREATE",119:"GRAPH",120:"INSERTDATA",122:"DELETEDATA",123:"DELETEWHERE",132:"DELETE",133:"INSERT",135:"USING",138:"WITH",140:"INTO",141:"DEFAULT",167:"OPTIONAL",168:"MINUS",170:"SERVICE",173:"FILTER",174:"BIND",191:";",195:"a",219:"!",224:"^",226:"[",227:"]",231:"<<",235:">>",245:"BLANK_NODE_LABEL",246:"ANON",250:"||",254:"&&",258:"IN",271:"+",273:"-",275:"FUNC_ARITY0",276:"FUNC_ARITY1",277:"FUNC_ARITY2",278:",",279:"IF",281:"BOUND",282:"BNODE",284:"EXISTS",285:"COUNT",288:"FUNC_AGGREGATE",290:"GROUP_CONCAT",294:"SEPARATOR",295:"=",297:"LANGTAG",298:"^^",299:"DECIMAL",300:"DOUBLE",301:"BOOLEAN",302:"STRING_LITERAL1",303:"STRING_LITERAL2",304:"STRING_LITERAL_LONG1",305:"STRING_LITERAL_LONG2",306:"INTEGER_POSITIVE",307:"DECIMAL_POSITIVE",308:"DOUBLE_POSITIVE",309:"INTEGER_NEGATIVE",310:"DECIMAL_NEGATIVE",311:"DOUBLE_NEGATIVE",312:"PNAME_LN",316:"DISTINCT",317:"REDUCED",320:"NAMED",321:"SILENT",322:"CLEAR",323:"DROP",324:"ADD",325:"MOVE",326:"COPY",327:"ALL",328:".",329:"UNION",330:"|",331:"/",333:"?",334:"!=",335:"<",336:">",337:"<=",338:">=",339:"NOT",340:"CONCAT",341:"COALESCE",342:"SUBSTR",343:"REGEX",344:"REPLACE"},productions_:[0,[3,3],[4,1],[8,2],[11,2],[14,3],[17,4],[17,4],[18,2],[22,2],[25,2],[30,4],[30,4],[33,1],[33,5],[33,5],[40,5],[40,7],[49,5],[54,4],[57,3],[20,2],[24,2],[21,3],[67,3],[71,1],[71,1],[71,3],[71,5],[71,1],[74,2],[77,3],[80,2],[80,2],[80,1],[80,1],[85,2],[85,2],[85,4],[85,4],[89,2],[91,4],[91,4],[91,6],[97,1],[97,1],[97,1],[97,1],[101,3],[103,3],[105,4],[105,3],[105,5],[105,4],[105,2],[105,2],[105,2],[105,6],[105,6],[129,2],[125,2],[134,3],[137,2],[139,3],[115,1],[115,2],[112,2],[112,1],[121,4],[146,7],[151,3],[62,3],[62,3],[155,2],[158,3],[162,3],[159,2],[159,2],[159,2],[159,3],[159,4],[159,2],[159,6],[159,6],[159,1],[84,1],[84,1],[84,1],[73,2],[73,6],[177,1],[177,4],[42,3],[180,3],[153,2],[153,2],[186,1],[184,2],[190,2],[188,2],[193,1],[193,1],[193,1],[194,2],[198,2],[164,2],[164,2],[202,4],[208,1],[208,3],[210,2],[212,2],[215,2],[214,2],[216,1],[216,1],[216,2],[216,3],[220,1],[220,1],[220,4],[221,1],[221,1],[221,2],[221,2],[185,3],[185,3],[203,3],[203,3],[197,1],[197,1],[200,1],[200,1],[39,9],[39,5],[99,9],[99,5],[243,1],[243,1],[244,1],[244,1],[244,1],[244,1],[244,1],[36,2],[249,2],[247,2],[253,2],[251,1],[251,3],[251,4],[255,2],[261,2],[261,2],[261,2],[259,2],[269,2],[267,2],[267,2],[267,2],[267,1],[272,1],[272,1],[272,1],[272,1],[272,1],[272,1],[82,3],[72,1],[72,2],[72,4],[72,6],[72,8],[72,2],[72,4],[72,2],[72,4],[72,3],[274,5],[274,5],[274,6],[293,4],[98,1],[98,2],[98,3],[98,1],[98,1],[98,1],[98,1],[98,1],[98,1],[296,1],[296,1],[296,1],[296,1],[263,1],[263,1],[263,1],[265,1],[265,1],[265,1],[60,1],[60,1],[60,1],[313,0],[313,1],[5,1],[5,1],[5,1],[314,1],[314,1],[7,0],[7,2],[9,1],[9,1],[9,1],[9,1],[10,0],[10,1],[19,0],[19,2],[23,0],[23,2],[27,1],[27,2],[315,1],[315,1],[29,0],[29,1],[31,0],[31,1],[32,0],[32,1],[43,0],[43,2],[44,0],[44,2],[47,0],[47,1],[318,1],[318,1],[319,1],[319,2],[51,1],[51,1],[52,0],[52,2],[53,0],[53,1],[56,0],[56,2],[59,0],[59,1],[61,0],[61,1],[63,0],[63,1],[64,0],[64,1],[65,0],[65,1],[66,0],[66,1],[70,1],[70,2],[76,1],[76,2],[79,1],[79,2],[92,0],[92,2],[94,0],[94,2],[95,1],[95,2],[96,0],[96,2],[102,1],[102,2],[104,0],[104,4],[106,0],[106,2],[108,0],[108,1],[109,0],[109,1],[110,1],[110,1],[111,0],[111,1],[113,1],[113,1],[113,1],[114,0],[114,1],[118,0],[118,1],[124,0],[124,1],[126,0],[126,1],[127,0],[127,2],[128,0],[128,1],[130,0],[130,1],[131,0],[131,2],[136,0],[136,1],[142,0],[142,1],[143,1],[143,1],[143,1],[144,0],[144,1],[145,0],[145,2],[147,1],[147,1],[148,0],[148,1],[149,0],[149,1],[150,0],[150,1],[152,0],[152,3],[154,0],[154,1],[156,0],[156,1],[157,0],[157,2],[160,0],[160,1],[161,0],[161,1],[163,0],[163,3],[165,0],[165,1],[166,0],[166,3],[169,1],[169,1],[171,0],[171,1],[172,1],[172,1],[175,0],[175,1],[176,0],[176,3],[178,0],[178,3],[179,0],[179,1],[181,0],[181,3],[182,0],[182,1],[183,1],[183,1],[187,0],[187,1],[189,0],[189,2],[192,0],[192,1],[196,0],[196,3],[199,0],[199,3],[201,1],[201,1],[204,0],[204,1],[205,1],[205,1],[206,0],[206,3],[207,0],[207,2],[209,1],[209,1],[211,0],[211,3],[213,0],[213,3],[332,1],[332,1],[332,1],[217,0],[217,1],[218,0],[218,1],[222,0],[222,3],[223,0],[223,1],[225,1],[225,2],[228,1],[228,2],[229,1],[229,1],[230,1],[230,1],[232,1],[232,1],[233,1],[233,1],[234,1],[234,1],[236,1],[236,1],[237,1],[237,1],[238,1],[238,1],[239,1],[239,1],[240,1],[240,1],[241,1],[241,1],[242,1],[242,1],[248,0],[248,2],[252,0],[252,2],[256,1],[256,1],[256,1],[256,1],[256,1],[256,1],[257,0],[257,1],[260,0],[260,2],[262,1],[262,1],[264,0],[264,2],[266,0],[266,2],[268,0],[268,2],[270,1],[270,1],[280,1],[280,1],[280,1],[280,1],[280,1],[283,0],[283,1],[286,0],[286,1],[287,1],[287,1],[289,0],[289,1],[291,0],[291,1],[292,0],[292,1]],performAction:function(pe,ve,we,Be,Ce,B,ot){var k=B.length-1;switch(Ce){case 1:if(B[k-1]=B[k-1]||{},Fe.base&&(B[k-1].base=Fe.base),Fe.base="",B[k-1].prefixes=Fe.prefixes,Fe.prefixes=null,Fe.pathOnly){if(B[k-1].type==="path"||"termType"in B[k-1])return B[k-1];throw new Error("Received full SPARQL query in path only mode")}else if(B[k-1].type==="path"||"termType"in B[k-1])throw new Error("Received only path in full SPARQL mode");if(B[k-1].type==="update"){const ke={};for(const $e of B[k-1].updates)if($e.updateType==="insert"){const Me={};for(const et of $e.insert)if(et.type==="bgp"||et.type==="graph")for(const tt of et.triples)tt.subject.termType==="BlankNode"&&(Me[tt.subject.value]=!0),tt.predicate.termType==="BlankNode"&&(Me[tt.predicate.value]=!0),tt.object.termType==="BlankNode"&&(Me[tt.object.value]=!0);for(const et of Object.keys(Me)){if(ke[et])throw new Error("Detected reuse blank node across different INSERT DATA clauses");ke[et]=!0}}}return B[k-1];case 3:this.$=Xe(B[k-1],B[k],{type:"query"});break;case 4:Fe.base=rr(B[k]);break;case 5:Fe.prefixes||(Fe.prefixes={}),B[k-1]=B[k-1].substr(0,B[k-1].length-1),B[k]=rr(B[k]),Fe.prefixes[B[k-1]]=B[k];break;case 6:this.$=Xe(B[k-3],At(B[k-2]),B[k-1],B[k]);break;case 7:if(!Fe.skipValidation&&(Br(B[k-3].variables.map($e=>Dr($e.expression))).some($e=>$e.aggregation==="count"&&!($e.expression instanceof hr))||B[k].group)){for(const $e of B[k-3].variables)if($e.termType==="Variable"){if(!B[k].group||!B[k].group.map(Me=>Xt(Me)).includes(Xt($e)))throw Error("Projection of ungrouped variable (?"+Xt($e)+")")}else if(Dr($e.expression).length===0){const Me=Vn($e.expression);for(const et of Me)if(!B[k].group||!B[k].group.map||!B[k].group.map(tt=>Xt(tt)).includes(Xt(et)))throw Error("Use of ungrouped variable in projection of operation (?"+Xt(et)+")")}}const zt=B[k-1].where.filter(ke=>ke.type==="query");if(zt.length>0){const ke=B[k-3].variables.filter(Me=>Me.variable&&Me.variable.value).map(Me=>Me.variable.value),$e=Br(zt.map(Me=>Me.variables)).map(Me=>Me.value||Me.variable.value);for(const Me of ke)if($e.indexOf(Me)>=0)throw Error("Target id of 'AS' (?"+Me+") already used in subquery")}this.$=Xe(B[k-3],At(B[k-2]),B[k-1],B[k]);break;case 8:this.$=Xe(B[k-1],{variables:[new hr]});break;case 9:const Fr=B[k].map(ke=>ke.value||ke.variable.value),_r=Qn(Fr);if(_r.length>0)throw Error("Two or more of the resulting columns have the same name (?"+_r[0]+")");this.$=Xe(B[k-1],{variables:B[k]});break;case 10:this.$=Xe({queryType:"SELECT"},B[k]&&(B[k-1]=at(B[k]),B[k]={},B[k][B[k-1]]=!0,B[k]));break;case 11:case 12:this.$=Xe(B[k-3],B[k-2],B[k-1],B[k],{type:"query"});break;case 13:case 100:case 137:case 166:this.$=nt(B[k]);break;case 14:case 28:this.$=St(B[k-3],{variable:nt(B[k-1])});break;case 15:this.$=ir(St(B[k-3],{variable:nt(B[k-1])}));break;case 16:this.$=Xe({queryType:"CONSTRUCT",template:B[k-3]},At(B[k-2]),B[k-1],B[k]);break;case 17:this.$=Xe({queryType:"CONSTRUCT",template:B[k-2]=B[k-2]?B[k-2].triples:[]},At(B[k-5]),{where:[{type:"bgp",triples:Gt([],B[k-2])}]},B[k]);break;case 18:this.$=Xe({queryType:"DESCRIBE",variables:B[k-3]==="*"?[new hr]:B[k-3].map(nt)},At(B[k-2]),B[k-1],B[k]);break;case 19:this.$=Xe({queryType:"ASK"},At(B[k-2]),B[k-1],B[k]);break;case 20:case 61:this.$={iri:B[k],named:!!B[k-1]};break;case 21:this.$={where:B[k].patterns};break;case 22:this.$=Xe(B[k-1],B[k]);break;case 23:this.$=Xe(B[k-2],B[k-1],B[k]);break;case 24:this.$={group:B[k]};break;case 25:case 26:case 32:case 34:this.$=St(B[k]);break;case 27:this.$=St(B[k-1]);break;case 29:case 35:this.$=St(nt(B[k]));break;case 30:this.$={having:B[k]};break;case 31:this.$={order:B[k]};break;case 33:this.$=St(B[k],{descending:!0});break;case 36:this.$={limit:Ht(B[k])};break;case 37:this.$={offset:Ht(B[k])};break;case 38:this.$={limit:Ht(B[k-2]),offset:Ht(B[k])};break;case 39:this.$={limit:Ht(B[k]),offset:Ht(B[k-2])};break;case 40:this.$={type:"values",values:B[k]};break;case 41:this.$=B[k-1].map(function(ke){var $e={};return $e[B[k-3]]=ke,$e});break;case 42:this.$=B[k-1].map(function(){return{}});break;case 43:var jt=B[k-4].length;B[k-4]=B[k-4].map(nt),this.$=B[k-1].map(function(ke){if(ke.length!==jt)throw Error("Inconsistent VALUES length");for(var $e={},Me=0;Me<jt;Me++)$e["?"+B[k-4][Me].value]=ke[Me];return $e});break;case 46:this.$=ir(B[k]);break;case 47:this.$=void 0;break;case 48:case 92:case 117:case 167:this.$=B[k-1];break;case 49:this.$={type:"update",updates:Ot(B[k-2],B[k-1])};break;case 50:this.$=Xe({type:"load",silent:!!B[k-2],source:B[k-1]},B[k]&&{destination:B[k]});break;case 51:this.$={type:at(B[k-2]),silent:!!B[k-1],graph:B[k]};break;case 52:this.$={type:at(B[k-4]),silent:!!B[k-3],source:B[k-2],destination:B[k]};break;case 53:this.$={type:"create",silent:!!B[k-2],graph:{type:"graph",name:B[k]}};break;case 54:this.$={updateType:"insert",insert:Nn(B[k])};break;case 55:this.$={updateType:"delete",delete:Mr(Nn(B[k]))};break;case 56:this.$={updateType:"deletewhere",delete:Mr(B[k])};break;case 57:this.$=Xe({updateType:"insertdelete"},B[k-5],{insert:B[k-4]||[]},{delete:B[k-3]||[]},At(B[k-2],"using"),{where:B[k].patterns});break;case 58:this.$=Xe({updateType:"insertdelete"},B[k-5],{delete:B[k-4]||[]},{insert:B[k-3]||[]},At(B[k-2],"using"),{where:B[k].patterns});break;case 59:this.$=Mr(B[k]);break;case 60:case 63:case 160:case 181:this.$=B[k];break;case 62:this.$={graph:B[k]};break;case 64:this.$={type:"graph",default:!0};break;case 65:case 66:this.$={type:"graph",name:B[k]};break;case 67:this.$={},this.$[at(B[k])]=!0;break;case 68:this.$=B[k-2]?ft(B[k-1],[B[k-2]]):ft(B[k-1]);break;case 69:var yr=Xe(B[k-3]||{triples:[]},{type:"graph",name:nt(B[k-5])});this.$=B[k]?[yr,B[k]]:[yr];break;case 70:case 75:this.$={type:"bgp",triples:ft(B[k-2],[B[k-1]])};break;case 71:this.$={type:"group",patterns:[B[k-1]]};break;case 72:for(const ke of B[k-1].filter($e=>$e.type==="bind")){const $e=B[k-1].indexOf(ke),Me=new Set;for(const et of B[k-1].slice(0,$e))(et.type==="group"||et.type==="bgp")&&In(et).forEach(tt=>Me.add(tt));if(Me.has(ke.variable.value))throw Error("Variable used to bind is already bound (?"+ke.variable.value+")")}this.$={type:"group",patterns:B[k-1]};break;case 73:this.$=B[k-1]?ft([B[k-1]],B[k]):ft(B[k]);break;case 74:this.$=B[k]?[B[k-2],B[k]]:B[k-2];break;case 76:B[k-1].length?this.$={type:"union",patterns:ft(B[k-1].map(Rr),[Rr(B[k])])}:this.$=B[k];break;case 77:this.$=Xe(B[k],{type:"optional"});break;case 78:this.$=Xe(B[k],{type:"minus"});break;case 79:this.$=Xe(B[k],{type:"graph",name:nt(B[k-1])});break;case 80:this.$=Xe(B[k],{type:"service",name:nt(B[k-1]),silent:!!B[k-2]});break;case 81:this.$={type:"filter",expression:B[k]};break;case 82:this.$={type:"bind",variable:nt(B[k-1]),expression:B[k-3]};break;case 83:this.$=ir({type:"bind",variable:nt(B[k-1]),expression:B[k-3]});break;case 88:this.$={type:"functionCall",function:B[k-1],args:[]};break;case 89:this.$={type:"functionCall",function:B[k-5],args:Ot(B[k-2],B[k-1]),distinct:!!B[k-3]};break;case 90:case 108:case 119:case 211:case 219:case 221:case 233:case 235:case 245:case 249:case 269:case 271:case 275:case 279:case 302:case 308:case 319:case 329:case 335:case 341:case 345:case 355:case 357:case 361:case 369:case 373:case 375:case 383:case 385:case 389:case 391:case 400:case 432:case 434:case 444:case 448:case 450:case 452:this.$=[];break;case 91:this.$=Ot(B[k-2],B[k-1]);break;case 93:this.$=ft(B[k-2],[B[k-1]]);break;case 94:case 105:this.$=B[k].map(function(ke){return Xe(Mt(B[k-1]),ke)});break;case 95:this.$=Gt(B[k].map(function(ke){return Xe(Mt(B[k-1].entity),ke)}),B[k-1].triples);break;case 97:this.$=ft([B[k-1]],B[k]);break;case 98:this.$=ft(B[k]);break;case 99:this.$=Lr(B[k-1],B[k]);break;case 102:case 115:case 122:this.$=Fe.factory.namedNode(vn);break;case 103:case 104:this.$=Ot(B[k-1],B[k]);break;case 106:this.$=B[k]?Gt(B[k].map(function(ke){return Xe(Mt(B[k-1].entity),ke)}),B[k-1].triples):B[k-1].triples;break;case 107:this.$=Lr(nt(B[k-3]),Ot(B[k-2],B[k-1]),B[k]);break;case 109:this.$=Lr(nt(B[k-1]),B[k]);break;case 110:this.$=B[k-1].length?Ct("|",Ot(B[k-1],B[k])):B[k];break;case 111:this.$=B[k-1].length?Ct("/",Ot(B[k-1],B[k])):B[k];break;case 112:this.$=B[k]?Ct(B[k],[B[k-1]]):B[k-1];break;case 113:this.$=B[k-1]?Ct(B[k-1],[B[k]]):B[k];break;case 116:case 123:this.$=Ct(B[k-1],[B[k]]);break;case 120:this.$=Ct("|",Ot(B[k-2],B[k-1]));break;case 124:this.$=Ct(B[k-1],[Fe.factory.namedNode(vn)]);break;case 125:case 127:this.$=kn(B[k-1]);break;case 126:case 128:this.$=Un(B[k-1]);break;case 129:this.$={entity:B[k],triples:[]};break;case 131:this.$={entity:B[k],triples:[]};break;case 133:case 135:this.$=ir(Fe.factory.quad(B[k-4],B[k-3],B[k-2],nt(B[k-6])));break;case 134:case 136:this.$=ir(Fe.factory.quad(B[k-3],B[k-2],B[k-1]));break;case 141:this.$=nr(B[k].replace(/^(_:)/,""));break;case 142:this.$=nr();break;case 143:this.$=Fe.factory.namedNode(wn);break;case 144:case 146:case 151:case 155:this.$=Nr(B[k-1],B[k]);break;case 145:this.$=["||",B[k]];break;case 147:this.$=["&&",B[k]];break;case 149:this.$=it(B[k-1],[B[k-2],B[k]]);break;case 150:this.$=it(B[k-2]?"notin":"in",[B[k-3],B[k]]);break;case 152:case 156:this.$=[B[k-1],B[k]];break;case 153:this.$=["+",Nr(B[k-1],B[k])];break;case 154:var br=ht(B[k-1].value.replace("-",""),B[k-1].datatype);this.$=["-",Nr(br,B[k])];break;case 157:this.$=it("UPLUS",[B[k]]);break;case 158:this.$=it(B[k-1],[B[k]]);break;case 159:this.$=it("UMINUS",[B[k]]);break;case 169:this.$=it(at(B[k-1]));break;case 170:this.$=it(at(B[k-3]),[B[k-1]]);break;case 171:this.$=it(at(B[k-5]),[B[k-3],B[k-1]]);break;case 172:this.$=it(at(B[k-7]),[B[k-5],B[k-3],B[k-1]]);break;case 173:this.$=it(at(B[k-1]),B[k]);break;case 174:this.$=it("bound",[nt(B[k-1])]);break;case 175:this.$=it(B[k-1],[]);break;case 176:this.$=it(B[k-3],[B[k-1]]);break;case 177:this.$=it(B[k-2]?"notexists":"exists",[Rr(B[k])]);break;case 178:case 179:this.$=St(B[k-1],{type:"aggregate",aggregation:at(B[k-4]),distinct:!!B[k-2]});break;case 180:this.$=St(B[k-2],{type:"aggregate",aggregation:at(B[k-5]),distinct:!!B[k-3],separator:typeof B[k-1]=="string"?B[k-1]:" "});break;case 182:this.$=ht(B[k]);break;case 183:this.$=Bn(B[k-1],at(B[k].substr(1)));break;case 184:this.$=ht(B[k-2],B[k]);break;case 185:case 198:this.$=ht(B[k],Tn);break;case 186:case 199:this.$=ht(B[k],En);break;case 187:case 200:this.$=ht(at(B[k]),On);break;case 190:this.$=ht(B[k].toLowerCase(),Dn);break;case 191:case 192:this.$=xn(B[k],1);break;case 193:case 194:this.$=xn(B[k],3);break;case 195:this.$=ht(B[k].substr(1),Tn);break;case 196:this.$=ht(B[k].substr(1),En);break;case 197:this.$=ht(B[k].substr(1).toLowerCase(),On);break;case 201:this.$=Fe.factory.namedNode(rr(B[k]));break;case 202:var gr=B[k].indexOf(":"),ze=B[k].substr(0,gr),pt=Fe.prefixes[ze];if(!pt)throw new Error("Unknown prefix: "+ze);var Ft=rr(pt+B[k].substr(gr+1));this.$=Fe.factory.namedNode(Ft);break;case 203:if(B[k]=B[k].substr(0,B[k].length-1),!(B[k]in Fe.prefixes))throw new Error("Unknown prefix: "+B[k]);var Ft=rr(Fe.prefixes[B[k]]);this.$=Fe.factory.namedNode(Ft);break;case 212:case 220:case 222:case 224:case 234:case 236:case 242:case 246:case 250:case 264:case 266:case 268:case 270:case 272:case 274:case 276:case 278:case 303:case 309:case 320:case 336:case 370:case 386:case 405:case 407:case 433:case 435:case 445:case 449:case 451:case 453:B[k-1].push(B[k]);break;case 223:case 241:case 263:case 265:case 267:case 273:case 277:case 404:case 406:this.$=[B[k]];break;case 280:B[k-3].push(B[k-2]);break;case 330:case 342:case 346:case 356:case 358:case 362:case 374:case 376:case 384:case 390:case 392:case 401:B[k-2].push(B[k-1]);break}},table:[n(e,t,{3:1,4:2,7:3}),{1:[3]},n(a,[2,279],{5:4,8:5,313:6,210:7,9:8,103:9,211:10,17:11,40:12,49:13,54:14,104:15,18:16,22:17,25:21,6:[2,204],13:c,16:c,35:c,195:c,219:c,224:c,312:c,28:l,41:[1,18],50:[1,19],55:[1,20]}),n([6,13,16,28,35,41,50,55,107,117,120,122,123,132,133,138,195,219,224,312,322,323,324,325,326],[2,2],{314:23,11:24,14:25,12:[1,26],15:[1,27]}),{6:[1,28]},{6:[2,206]},{6:[2,207]},{6:[2,208]},{6:[2,217],10:29,89:30,90:o},{6:[2,205]},n(i,[2,391],{212:32,213:33}),n(u,[2,213]),n(u,[2,214]),n(u,[2,215]),n(u,[2,216]),{105:34,107:[1,35],110:36,113:37,117:[1,38],120:[1,39],122:[1,40],123:[1,41],124:42,128:43,132:[2,304],133:[2,298],137:49,138:[1,50],322:[1,44],323:[1,45],324:[1,46],325:[1,47],326:[1,48]},n(d,[2,219],{19:51}),n(d,[2,221],{23:52}),n(m,[2,235],{42:53,44:54,46:[1,55]}),{13:y,16:p,26:[1,58],34:T,51:56,60:61,312:_,318:59,319:57},n(d,[2,249],{56:65}),{26:[1,66],27:67,33:68,34:w,35:S},n(I,[2,227],{29:71,315:72,316:[1,73],317:[1,74]}),n(e,[2,212]),n(e,[2,209]),n(e,[2,210]),{13:[1,75]},{16:[1,76]},{1:[2,1]},{6:[2,3]},{6:[2,218]},{34:[1,78],35:[1,80],91:77,93:[1,79]},n([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312],[2,110],{330:[1,81]}),n(j,[2,398],{214:82,218:83,224:[1,84]}),{6:[2,281],106:85,191:[1,86]},n(x,[2,283],{108:87,321:[1,88]}),n(v,[2,289],{111:89,321:[1,90]}),n(O,[2,294],{114:91,321:[1,92]}),{118:93,119:[2,296],321:[1,94]},{46:N,121:95},{46:N,121:97},{46:N,121:98},{125:99,133:D},{129:101,132:G},n(W,[2,287]),n(W,[2,288]),n(U,[2,291]),n(U,[2,292]),n(U,[2,293]),{132:[2,305],133:[2,299]},{13:y,16:p,60:103,312:_},{20:104,45:Q,46:Z,57:105,58:L,61:106},{20:109,45:Q,46:Z,57:110,58:L,61:106},n(d,[2,233],{43:111}),{45:[1,112],57:113,58:L},n(M,[2,361],{179:114,180:115,181:116,48:[2,359]}),n(V,[2,245],{52:117}),n(V,[2,243],{60:61,318:118,13:y,16:p,34:T,312:_}),n(V,[2,244]),n(H,[2,241]),n(H,[2,239]),n(H,[2,240]),n(J,[2,201]),n(J,[2,202]),n(J,[2,203]),{20:119,45:Q,46:Z,57:120,58:L,61:106},n(d,[2,8]),n(d,[2,9],{33:121,34:w,35:S}),n(ce,[2,223]),n(ce,[2,13]),{13:y,16:p,34:oe,35:le,36:122,39:123,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,231:Ee,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(I,[2,10]),n(I,[2,228]),n(I,[2,225]),n(I,[2,226]),n(e,[2,4]),{13:[1,176]},n(Re,[2,40]),{46:[1,177]},{46:[1,178]},{34:[1,180],95:179},n(i,[2,390]),n([6,13,16,34,35,38,87,93,226,231,245,246,299,300,301,302,303,304,305,306,307,308,309,310,311,312,330],[2,111],{331:[1,181]}),{13:y,16:p,35:[1,187],60:184,195:[1,185],215:182,216:183,219:[1,186],312:_},n(j,[2,399]),{6:[2,49]},n(e,t,{7:3,4:188}),{13:y,16:p,60:189,312:_},n(x,[2,284]),{112:190,119:[1,191],141:[1,193],143:192,320:[1,194],327:[1,195]},n(v,[2,290]),n(x,je,{115:196,142:198,119:Pe,141:Te}),n(O,[2,295]),{119:[1,200]},{119:[2,297]},n(Qe,[2,54]),n(M,Ge,{144:201,151:202,152:203,48:sr,119:sr}),n(Qe,[2,55]),n(Qe,[2,56]),n(ut,[2,300],{126:204,129:205,132:G}),{46:N,121:206},n(ut,[2,306],{130:207,125:208,133:D}),{46:N,121:209},n([132,133],[2,62]),n(te,he,{21:210,64:211,74:212,75:Ue}),n(d,[2,220]),{46:Ve,62:214},n(x,[2,251],{59:216,320:[1,217]}),{46:[2,254]},n(He,kt,{24:218,63:219,67:220,68:Ut}),n(d,[2,222]),{20:222,45:Q,46:Z,57:223,58:L,61:106},{46:[1,224]},n(m,[2,236]),{48:[1,225]},{48:[2,360]},{13:y,16:p,34:st,35:Jt,39:230,60:235,87:ue,93:Je,98:236,153:226,183:227,185:228,226:Wt,231:Ee,243:229,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(Ur,[2,247],{61:106,53:240,57:241,20:242,45:Q,46:Z,58:L}),n(H,[2,242]),n(He,kt,{63:219,67:220,24:243,68:Ut}),n(d,[2,250]),n(ce,[2,224]),{37:[1,244]},{37:[1,245]},n(ar,[2,432],{248:246}),{13:y,16:p,34:st,39:249,60:235,87:ue,93:Je,98:236,119:[1,247],231:Ee,236:248,243:250,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(Vt,[2,434],{252:251}),n(Vt,[2,148],{256:252,257:253,258:[2,442],295:[1,254],334:[1,255],335:[1,256],336:[1,257],337:[1,258],338:[1,259],339:[1,260]}),n(Qt,[2,444],{260:261}),n(Ye,[2,452],{268:262}),{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,263:154,265:155,272:263,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,263:154,265:155,272:264,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,263:154,265:155,272:265,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ye,[2,160]),n(Ye,[2,161]),n(Ye,[2,162]),n(Ye,[2,163],{35:Vr,93:Qr}),n(Ye,[2,164]),n(Ye,[2,165]),n(Ye,[2,166]),{13:y,16:p,34:oe,35:le,36:268,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ze,[2,168]),{93:[1,269]},{35:[1,270]},{35:[1,271]},{35:[1,272]},{35:$r,93:Gr,177:273},{35:[1,276]},{35:[1,278],93:[1,277]},{284:[1,279]},n(rt,[2,182],{297:[1,280],298:[1,281]}),n(rt,[2,185]),n(rt,[2,186]),n(rt,[2,187]),n(rt,[2,188]),n(rt,[2,189]),n(rt,[2,190]),{35:[1,282]},{35:[1,283]},{35:[1,284]},n(qt,[2,456]),n(qt,[2,457]),n(qt,[2,458]),n(qt,[2,459]),n(qt,[2,460]),{284:[2,462]},n(or,[2,191]),n(or,[2,192]),n(or,[2,193]),n(or,[2,194]),n(rt,[2,195]),n(rt,[2,196]),n(rt,[2,197]),n(rt,[2,198]),n(rt,[2,199]),n(rt,[2,200]),n(e,[2,5]),n(Hr,[2,269],{92:285}),n(Xr,[2,271],{94:286}),{34:[1,288],38:[1,287]},n(zr,[2,273]),n(i,[2,392]),n(xt,[2,113]),n(xt,[2,396],{217:289,332:290,26:[1,292],271:[1,293],333:[1,291]}),n(ct,[2,114]),n(ct,[2,115]),{13:y,16:p,35:[1,297],60:298,93:[1,296],195:Kr,220:294,221:295,224:Jr,312:_},n(i,c,{211:10,210:301}),n(a,[2,280],{6:[2,282]}),n(Qe,[2,285],{109:302,139:303,140:[1,304]}),n(Qe,[2,51]),{13:y,16:p,60:305,312:_},n(Qe,[2,67]),n(Qe,[2,314]),n(Qe,[2,315]),n(Qe,[2,316]),{116:[1,306]},n(Wr,[2,64]),{13:y,16:p,60:307,312:_},n(x,[2,313]),{13:y,16:p,60:308,312:_},n(It,[2,319],{145:309}),n(It,[2,318]),{13:y,16:p,34:st,35:Jt,39:230,60:235,87:ue,93:Je,98:236,153:310,183:227,185:228,226:Wt,231:Ee,243:229,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(ut,[2,302],{127:311}),n(ut,[2,301]),n([45,132,135],[2,60]),n(ut,[2,308],{131:312}),n(ut,[2,307]),n([45,133,135],[2,59]),n(u,[2,6]),n(Tr,[2,259],{65:313,77:314,78:[1,315]}),n(te,[2,258]),{13:y,16:p,35:le,60:321,72:319,73:320,76:316,82:318,84:317,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n([6,48,68,75,78,86,88,90],[2,21]),n(M,qr,{25:21,30:322,155:323,18:324,22:325,156:326,162:327,163:328,28:l,46:mt,48:mt,90:mt,119:mt,167:mt,168:mt,170:mt,173:mt,174:mt}),{13:y,16:p,60:329,312:_},n(x,[2,252]),n(u,[2,7]),n(te,he,{64:211,74:212,21:330,75:Ue}),n(He,[2,256]),{69:[1,331]},n(He,kt,{63:219,67:220,24:332,68:Ut}),n(d,[2,234]),n(M,Ge,{152:203,47:333,151:334,48:[2,237]}),n(d,[2,92]),{48:[2,363],182:335,328:[1,336]},{13:y,16:p,34:wt,60:341,184:337,188:338,193:339,195:Tt,312:_},n(Yt,[2,367],{188:338,193:339,60:341,186:343,187:344,184:345,13:y,16:p,34:wt,195:Tt,312:_}),n(dt,[2,365]),n(dt,[2,366]),{13:y,16:p,34:st,35:Jt,39:351,60:235,87:ue,93:Je,98:236,185:349,197:347,225:346,226:Wt,229:348,231:Ee,243:350,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},{13:y,16:p,34:wt,60:341,184:352,188:338,193:339,195:Tt,312:_},n(Nt,[2,137]),n(Nt,[2,138]),n(Nt,[2,139]),n(Nt,[2,140]),n(Nt,[2,141]),n(Nt,[2,142]),n(Nt,[2,143]),n(He,kt,{63:219,67:220,24:353,68:Ut}),n(V,[2,246]),n(Ur,[2,248]),n(u,[2,19]),{34:[1,354]},{34:[1,355]},n([37,38,191,278],[2,144],{249:356,250:[1,357]}),{13:y,16:p,34:[1,359],60:360,232:358,312:_},{13:y,16:p,34:wt,60:341,193:361,195:Tt,312:_},n(dt,[2,418]),n(dt,[2,419]),n(ar,[2,146],{253:362,254:[1,363]}),{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,255:364,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{258:[1,365]},n(Ke,[2,436]),n(Ke,[2,437]),n(Ke,[2,438]),n(Ke,[2,439]),n(Ke,[2,440]),n(Ke,[2,441]),{258:[2,443]},n([37,38,191,250,254,258,278,295,334,335,336,337,338,339],[2,151],{261:366,262:367,263:368,265:369,271:[1,370],273:[1,371],306:ie,307:de,308:me,309:_e,310:g,311:h}),n(Qt,[2,155],{269:372,270:373,26:Er,331:Or}),n(Ye,[2,157]),n(Ye,[2,158]),n(Ye,[2,159]),n(Ze,[2,88]),n(Ke,[2,353],{175:376,316:[1,377]}),{38:[1,378]},n(Ze,[2,169]),{13:y,16:p,34:oe,35:le,36:379,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{13:y,16:p,34:oe,35:le,36:380,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{13:y,16:p,34:oe,35:le,36:381,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ze,[2,173]),n(Ze,[2,90]),n(Ke,[2,357],{178:382}),{34:[1,383]},n(Ze,[2,175]),{13:y,16:p,34:oe,35:le,36:384,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{46:Ve,62:385},n(rt,[2,183]),{13:y,16:p,60:386,312:_},n(Yr,[2,463],{286:387,316:[1,388]}),n(Ke,[2,467],{289:389,316:[1,390]}),n(Ke,[2,469],{291:391,316:[1,392]}),{13:y,16:p,48:[1,393],60:395,87:ue,97:394,98:396,99:397,100:Sr,231:Rt,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},{48:[1,400],93:[1,401]},{46:[1,402]},n(zr,[2,274]),n(xt,[2,112]),n(xt,[2,397]),n(xt,[2,393]),n(xt,[2,394]),n(xt,[2,395]),n(ct,[2,116]),n(ct,[2,118]),n(ct,[2,119]),n(Zr,[2,400],{222:403}),n(ct,[2,121]),n(ct,[2,122]),{13:y,16:p,60:404,195:[1,405],312:_},{38:[1,406]},n(Qe,[2,50]),n(Qe,[2,286]),{119:[1,407]},n(Qe,[2,66]),n(x,je,{142:198,115:408,119:Pe,141:Te}),n(Wr,[2,65]),n(Qe,[2,53]),{48:[1,409],119:[1,411],146:410},n(It,[2,331],{154:412,328:[1,413]}),{45:[1,414],134:415,135:en},{45:[1,417],134:418,135:en},n(Et,[2,261],{66:419,85:420,86:[1,421],88:[1,422]}),n(Tr,[2,260]),{69:[1,423]},n(te,[2,30],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:424,13:y,16:p,35:le,275:Oe,276:fe,277:Se,279:Ne,281:De,282:Ie,284:Le,285:C,288:$,290:z,312:_,339:b,340:E,341:P,342:F,343:X,344:ge}),n(tn,[2,265]),n(Ar,[2,85]),n(Ar,[2,86]),n(Ar,[2,87]),{35:Vr,93:Qr},{48:[1,425]},{48:[1,426]},{20:427,45:Q,46:Z,61:106},{20:428,45:Q,46:Z,61:106},n(Pt,[2,335],{157:429}),n(Pt,[2,334]),{13:y,16:p,34:st,35:Zt,39:434,60:235,87:ue,93:Je,98:236,164:430,201:431,203:432,226:er,231:Ee,243:433,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(V,[2,20]),n(Et,[2,22]),{13:y,16:p,34:rn,35:nn,60:321,70:437,71:438,72:439,73:440,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(u,[2,16]),{48:[1,443]},{48:[2,238]},{48:[2,93]},n(M,[2,362],{48:[2,364]}),n(Yt,[2,94]),n(Lt,[2,369],{189:444}),n(M,[2,373],{194:445,196:446}),n(M,[2,100]),n(M,[2,101]),n(M,[2,102]),n(Yt,[2,95]),n(Yt,[2,96]),n(Yt,[2,368]),{13:y,16:p,34:st,35:Jt,38:[1,447],39:351,60:235,87:ue,93:Je,98:236,185:349,197:448,226:Wt,229:348,231:Ee,243:350,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(ur,[2,404]),n(cr,[2,129]),n(cr,[2,130]),n(cr,[2,408]),n(cr,[2,409]),{227:[1,449]},n(u,[2,18]),{38:[1,450]},{38:[1,451]},n(ar,[2,433]),{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:452,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{46:[1,453]},{46:[2,412]},{46:[2,413]},{13:y,16:p,34:st,39:455,60:235,87:ue,93:Je,98:236,231:Ee,237:454,243:456,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(Vt,[2,435]),{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,251:457,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Vt,[2,149]),{35:$r,93:Gr,177:458},n(Qt,[2,445]),{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,259:459,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ye,[2,448],{264:460}),n(Ye,[2,450],{266:461}),n(Ke,[2,446]),n(Ke,[2,447]),n(Ye,[2,453]),{13:y,16:p,34:oe,35:le,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,263:154,265:155,267:462,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ke,[2,454]),n(Ke,[2,455]),n(Ke,[2,355],{176:463}),n(Ke,[2,354]),n([6,13,16,26,34,35,37,38,46,48,78,81,83,86,87,88,90,93,119,167,168,170,173,174,191,226,231,245,246,250,254,258,271,273,275,276,277,278,279,281,282,284,285,288,290,295,299,300,301,302,303,304,305,306,307,308,309,310,311,312,328,331,334,335,336,337,338,339,340,341,342,343,344],[2,167]),{38:[1,464]},{278:[1,465]},{278:[1,466]},{13:y,16:p,34:oe,35:le,36:467,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{38:[1,468]},{38:[1,469]},n(Ze,[2,177]),n(rt,[2,184]),{13:y,16:p,26:[1,471],34:oe,35:le,36:472,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,287:470,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Yr,[2,464]),{13:y,16:p,34:oe,35:le,36:473,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ke,[2,468]),{13:y,16:p,34:oe,35:le,36:474,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ke,[2,470]),n(Re,[2,41]),n(Hr,[2,270]),n(lr,[2,44]),n(lr,[2,45]),n(lr,[2,46]),n(lr,[2,47]),{13:y,16:p,60:235,87:ue,93:Je,98:236,99:477,119:[1,475],231:Rt,241:476,244:478,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(Re,[2,42]),n(Xr,[2,272]),n(jr,[2,275],{96:479}),{13:y,16:p,38:[2,402],60:298,195:Kr,221:481,223:480,224:Jr,312:_},n(ct,[2,123]),n(ct,[2,124]),n(ct,[2,117]),{13:y,16:p,60:482,312:_},n(Qe,[2,52]),n([6,45,132,133,135,191],[2,68]),n(It,[2,320]),{13:y,16:p,34:[1,484],60:485,147:483,312:_},n(It,[2,70]),n(M,[2,330],{48:sn,119:sn}),{46:Ve,62:486},n(ut,[2,303]),n(x,[2,310],{136:487,320:[1,488]}),{46:Ve,62:489},n(ut,[2,309]),n(Et,[2,23]),n(Et,[2,262]),{87:[1,490]},{87:[1,491]},{13:y,16:p,34:an,35:le,60:321,72:319,73:320,79:492,80:493,81:on,82:318,83:un,84:496,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(tn,[2,266]),n(cn,[2,71]),n(cn,[2,72]),n(te,he,{64:211,74:212,21:498,75:Ue}),n(He,kt,{63:219,67:220,24:499,68:Ut}),{46:[2,345],48:[2,73],89:509,90:o,119:[1,505],158:500,159:501,166:502,167:[1,503],168:[1,504],170:[1,506],173:[1,507],174:[1,508]},n(Pt,[2,343],{165:510,328:[1,511]}),n(i,c,{211:10,202:512,205:513,210:514,34:xr}),n(dr,[2,379],{211:10,205:513,210:514,204:516,202:517,13:c,16:c,35:c,195:c,219:c,224:c,312:c,34:xr}),n(ln,[2,377]),n(ln,[2,378]),{13:y,16:p,34:st,35:Zt,39:523,60:235,87:ue,93:Je,98:236,200:519,203:521,226:er,228:518,230:520,231:Ee,243:522,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(i,c,{211:10,205:513,210:514,202:524,34:xr}),n(He,[2,24],{274:141,280:146,283:149,60:321,72:439,73:440,71:525,13:y,16:p,34:rn,35:nn,275:Oe,276:fe,277:Se,279:Ne,281:De,282:Ie,284:Le,285:C,288:$,290:z,312:_,339:b,340:E,341:P,342:F,343:X,344:ge}),n(Dt,[2,263]),n(Dt,[2,25]),n(Dt,[2,26]),{13:y,16:p,34:oe,35:le,36:526,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Dt,[2,29]),n(He,kt,{63:219,67:220,24:527,68:Ut}),n([48,119,227,328],[2,97],{190:528,191:[1,529]}),n(Lt,[2,99]),{13:y,16:p,34:st,35:Jt,39:351,60:235,87:ue,93:Je,98:236,185:349,197:530,226:Wt,229:348,231:Ee,243:350,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(dn,[2,125]),n(ur,[2,405]),n(dn,[2,126]),n(ce,[2,14]),n(ce,[2,15]),n(ar,[2,145]),{13:y,16:p,34:st,39:532,60:235,87:ue,93:Je,98:236,231:Ee,233:531,243:533,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},{235:[1,534]},{235:[2,420]},{235:[2,421]},n(Vt,[2,147]),n(Vt,[2,150]),n(Qt,[2,152]),n(Qt,[2,153],{270:373,269:535,26:Er,331:Or}),n(Qt,[2,154],{270:373,269:536,26:Er,331:Or}),n(Ye,[2,156]),{13:y,16:p,34:oe,35:le,36:537,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ze,[2,170]),{13:y,16:p,34:oe,35:le,36:538,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{13:y,16:p,34:oe,35:le,36:539,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{38:[1,540],278:[1,541]},n(Ze,[2,174]),n(Ze,[2,176]),{38:[1,542]},{38:[2,465]},{38:[2,466]},{38:[1,543]},{38:[2,471],191:[1,546],292:544,293:545},{13:y,16:p,34:[1,548],60:549,238:547,312:_},{13:y,16:p,34:wt,60:341,193:550,195:Tt,312:_},n(dt,[2,428]),n(dt,[2,429]),{35:[1,553],48:[1,551],101:552},{38:[1,554]},{38:[2,403],330:[1,555]},n(Qe,[2,63]),{46:[1,556]},{46:[2,321]},{46:[2,322]},n(Qe,[2,57]),{13:y,16:p,60:557,312:_},n(x,[2,311]),n(Qe,[2,58]),n(Et,[2,36],{88:[1,558]}),n(Et,[2,37],{86:[1,559]}),n(Tr,[2,31],{274:141,280:146,283:149,82:318,72:319,73:320,60:321,84:496,80:560,13:y,16:p,34:an,35:le,81:on,83:un,275:Oe,276:fe,277:Se,279:Ne,281:De,282:Ie,284:Le,285:C,288:$,290:z,312:_,339:b,340:E,341:P,342:F,343:X,344:ge}),n($t,[2,267]),{35:le,82:561},{35:le,82:562},n($t,[2,34]),n($t,[2,35]),{31:563,48:[2,229],89:564,90:o},{32:565,48:[2,231],89:566,90:o},n(Pt,[2,336]),n(fn,[2,337],{160:567,328:[1,568]}),{46:Ve,62:569},{46:Ve,62:570},{46:Ve,62:571},{13:y,16:p,34:[1,573],60:574,169:572,312:_},n(hn,[2,349],{171:575,321:[1,576]}),{13:y,16:p,35:le,60:321,72:319,73:320,82:318,84:577,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{35:[1,578]},n(yt,[2,84]),n(Pt,[2,75]),n(M,[2,342],{46:bt,48:bt,90:bt,119:bt,167:bt,168:bt,170:bt,173:bt,174:bt}),n(dr,[2,105]),n(M,[2,383],{206:579}),n(M,[2,381]),n(M,[2,382]),n(dr,[2,106]),n(dr,[2,380]),{13:y,16:p,34:st,35:Zt,38:[1,580],39:523,60:235,87:ue,93:Je,98:236,200:581,203:521,226:er,230:520,231:Ee,243:522,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(ur,[2,406]),n(fr,[2,131]),n(fr,[2,132]),n(fr,[2,410]),n(fr,[2,411]),{227:[1,582]},n(Dt,[2,264]),{37:[1,584],38:[1,583]},n(u,[2,17]),n(Lt,[2,370]),n(Lt,[2,371],{193:339,60:341,192:585,188:586,13:y,16:p,34:wt,195:Tt,312:_}),n(Lt,[2,103],{278:[1,587]}),{13:y,16:p,34:wt,60:341,193:588,195:Tt,312:_},n(dt,[2,414]),n(dt,[2,415]),n(pn,[2,134]),n(Ye,[2,449]),n(Ye,[2,451]),{38:[1,589],278:[1,590]},{38:[1,591]},{278:[1,592]},n(Ze,[2,91]),n(Ke,[2,358]),n(Ze,[2,178]),n(Ze,[2,179]),{38:[1,593]},{38:[2,472]},{294:[1,594]},{46:[1,595]},{46:[2,422]},{46:[2,423]},{13:y,16:p,60:235,87:ue,93:Je,98:236,99:597,231:Rt,242:596,244:598,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(Re,[2,43]),n(jr,[2,276]),{13:y,16:p,60:395,87:ue,97:600,98:396,99:397,100:Sr,102:599,231:Rt,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(ct,[2,120]),n(Zr,[2,401]),n(M,Ge,{152:203,148:601,151:602,48:[2,323]}),n(ut,[2,61]),{87:[1,603]},{87:[1,604]},n($t,[2,268]),n($t,[2,32]),n($t,[2,33]),{48:[2,11]},{48:[2,230]},{48:[2,12]},{48:[2,232]},n(M,qr,{163:328,161:605,162:606,46:_t,48:_t,90:_t,119:_t,167:_t,168:_t,170:_t,173:_t,174:_t}),n(fn,[2,338]),n(yt,[2,76],{329:[1,607]}),n(yt,[2,77]),n(yt,[2,78]),{46:Ve,62:608},{46:[2,347]},{46:[2,348]},{13:y,16:p,34:[1,610],60:611,172:609,312:_},n(hn,[2,350]),n(yt,[2,81]),{13:y,16:p,34:oe,35:le,36:612,39:613,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,231:Ee,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},{13:y,16:p,34:st,35:Zt,39:523,60:235,87:ue,93:Je,98:236,200:614,203:521,226:er,230:520,231:Ee,243:522,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(mn,[2,127]),n(ur,[2,407]),n(mn,[2,128]),n(Dt,[2,27]),{34:[1,615]},n(Lt,[2,98]),n(Lt,[2,372]),n(M,[2,374]),{13:y,16:p,34:st,39:617,60:235,87:ue,93:Je,98:236,231:Ee,234:616,243:618,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(Ze,[2,89]),n(Ke,[2,356]),n(Ze,[2,171]),{13:y,16:p,34:oe,35:le,36:619,60:136,72:135,73:137,82:134,87:ue,98:138,219:be,247:124,251:126,255:127,259:128,263:154,265:155,267:129,271:Ae,272:133,273:xe,274:141,275:Oe,276:fe,277:Se,279:Ne,280:146,281:De,282:Ie,283:149,284:Le,285:C,288:$,290:z,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_,339:b,340:E,341:P,342:F,343:X,344:ge},n(Ze,[2,180]),{295:[1,620]},{13:y,16:p,60:235,87:ue,93:Je,98:236,99:622,231:Rt,239:621,244:623,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},{235:[1,624]},{235:[2,430]},{235:[2,431]},{13:y,16:p,38:[1,625],60:395,87:ue,97:626,98:396,99:397,100:Sr,231:Rt,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(yn,[2,277]),{48:[1,627]},{48:[2,324]},n(Et,[2,38]),n(Et,[2,39]),n(Pt,[2,74]),n(Pt,[2,340]),{46:[2,346]},n(yt,[2,79]),{46:Ve,62:628},{46:[2,351]},{46:[2,352]},{37:[1,629]},{37:[1,630]},n(tr,[2,385],{207:631,278:[1,632]}),{38:[1,633]},{48:[1,634]},{48:[2,416]},{48:[2,417]},{38:[1,635]},{296:636,302:ae,303:q,304:ee,305:re},{13:y,16:p,34:wt,60:341,193:637,195:Tt,312:_},n(dt,[2,424]),n(dt,[2,425]),n(bn,[2,136]),n(jr,[2,48]),n(yn,[2,278]),n(gn,[2,325],{149:638,328:[1,639]}),n(yt,[2,80]),{34:[1,640]},{34:[1,641]},n([46,48,90,119,167,168,170,173,174,227,328],[2,107],{208:642,191:[1,643]}),n(M,[2,384]),n(Dt,[2,28]),{235:[1,644]},n(Ze,[2,172]),{38:[2,181]},{13:y,16:p,60:235,87:ue,93:Je,98:236,99:646,231:Rt,240:645,244:647,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(M,Ge,{152:203,150:648,151:649,48:_n,119:_n}),n(gn,[2,326]),{38:[1,650]},{38:[1,651]},n(tr,[2,386]),n(tr,[2,108],{211:10,209:652,210:653,13:c,16:c,35:c,195:c,219:c,224:c,312:c,34:[1,654]}),n(pn,[2,133]),{48:[1,655]},{48:[2,426]},{48:[2,427]},n(It,[2,69]),n(It,[2,328]),n(yt,[2,82]),n(yt,[2,83]),n(M,[2,375],{198:656,199:657}),n(M,[2,387]),n(M,[2,388]),{235:[1,658]},n(tr,[2,109]),{13:y,16:p,34:st,35:Zt,39:523,60:235,87:ue,93:Je,98:236,200:659,203:521,226:er,230:520,231:Ee,243:522,244:234,245:We,246:qe,263:154,265:155,296:150,299:se,300:Y,301:ne,302:ae,303:q,304:ee,305:re,306:ie,307:de,308:me,309:_e,310:g,311:h,312:_},n(bn,[2,135]),n(tr,[2,104],{278:[1,660]}),n(M,[2,376])],defaultActions:{5:[2,206],6:[2,207],7:[2,208],9:[2,205],28:[2,1],29:[2,3],30:[2,218],85:[2,49],94:[2,297],108:[2,254],115:[2,360],165:[2,462],260:[2,443],334:[2,238],335:[2,93],359:[2,412],360:[2,413],455:[2,420],456:[2,421],471:[2,465],472:[2,466],484:[2,321],485:[2,322],545:[2,472],548:[2,422],549:[2,423],563:[2,11],564:[2,230],565:[2,12],566:[2,232],573:[2,347],574:[2,348],597:[2,430],598:[2,431],602:[2,324],607:[2,346],610:[2,351],611:[2,352],617:[2,416],618:[2,417],636:[2,181],646:[2,426],647:[2,427]},parseError:function(pe,ve){if(ve.recoverable)this.trace(pe);else{var we=new Error(pe);throw we.hash=ve,we}},parse:function(pe){var ve=this,we=[0],Be=[null],Ce=[],B=this.table,ot="",k=0,jt=0,yr=2,br=1,gr=Ce.slice.call(arguments,1),ze=Object.create(this.lexer),pt={yy:{}};for(var Ft in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ft)&&(pt.yy[Ft]=this.yy[Ft]);ze.setInput(pe,pt.yy),pt.yy.lexer=ze,pt.yy.parser=this,typeof ze.yylloc>"u"&&(ze.yylloc={});var zt=ze.yylloc;Ce.push(zt);var Fr=ze.options&&ze.options.ranges;typeof pt.yy.parseError=="function"?this.parseError=pt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var _r=function(){var Kt;return Kt=ze.lex()||br,typeof Kt!="number"&&(Kt=ve.symbols_[Kt]||Kt),Kt},ke,$e,Me,et,tt={},vr,vt,Rn,wr;;){if($e=we[we.length-1],this.defaultActions[$e]?Me=this.defaultActions[$e]:((ke===null||typeof ke>"u")&&(ke=_r()),Me=B[$e]&&B[$e][ke]),typeof Me>"u"||!Me.length||!Me[0]){var kr="";wr=[];for(vr in B[$e])this.terminals_[vr]&&vr>yr&&wr.push("'"+this.terminals_[vr]+"'");ze.showPosition?kr="Parse error on line "+(k+1)+`:
`+ze.showPosition()+`
Expecting `+wr.join(", ")+", got '"+(this.terminals_[ke]||ke)+"'":kr="Parse error on line "+(k+1)+": Unexpected "+(ke==br?"end of input":"'"+(this.terminals_[ke]||ke)+"'"),this.parseError(kr,{text:ze.match,token:this.terminals_[ke]||ke,line:ze.yylineno,loc:zt,expected:wr})}if(Me[0]instanceof Array&&Me.length>1)throw new Error("Parse Error: multiple actions possible at state: "+$e+", token: "+ke);switch(Me[0]){case 1:we.push(ke),Be.push(ze.yytext),Ce.push(ze.yylloc),we.push(Me[1]),ke=null,jt=ze.yyleng,ot=ze.yytext,k=ze.yylineno,zt=ze.yylloc;break;case 2:if(vt=this.productions_[Me[1]][1],tt.$=Be[Be.length-vt],tt._$={first_line:Ce[Ce.length-(vt||1)].first_line,last_line:Ce[Ce.length-1].last_line,first_column:Ce[Ce.length-(vt||1)].first_column,last_column:Ce[Ce.length-1].last_column},Fr&&(tt._$.range=[Ce[Ce.length-(vt||1)].range[0],Ce[Ce.length-1].range[1]]),et=this.performAction.apply(tt,[ot,jt,k,pt.yy,Me[1],Be,Ce].concat(gr)),typeof et<"u")return et;vt&&(we=we.slice(0,-1*vt*2),Be=Be.slice(0,-1*vt),Ce=Ce.slice(0,-1*vt)),we.push(this.productions_[Me[1]][0]),Be.push(tt.$),Ce.push(tt._$),Rn=B[we[we.length-2]][we[we.length-1]],we.push(Rn);break;case 3:return!0}}return!0}},hr=Wildcard$2.Wildcard,pr="http://www.w3.org/1999/02/22-rdf-syntax-ns#",vn=pr+"type",Pn=pr+"first",Ln=pr+"rest",wn=pr+"nil",mr="http://www.w3.org/2001/XMLSchema#",Tn=mr+"integer",En=mr+"decimal",On=mr+"double",Dn=mr+"boolean",Bt="",Sn="",An="";function at(ye){return ye.toLowerCase()}function Ot(ye,pe){return ye.push(pe),ye}function Gt(ye,pe){return ye.push.apply(ye,pe),ye}function Xe(ye){ye||(ye={});for(var pe=1,ve=arguments.length,we;pe<ve&&(we=arguments[pe]||{});pe++)for(var Be in we)ye[Be]=we[Be];return ye}function ft(){for(var ye=[],pe=0,ve=arguments.length;pe<ve;pe++)ye=ye.concat.apply(ye,arguments[pe]);return ye}function rr(ye){if(ye[0]==="<"&&(ye=ye.substring(1,ye.length-1)),/^[a-z]+:/i.test(ye))return ye;if(!Fe.base)throw new Error("Cannot resolve relative IRI "+ye+" because no base IRI was set.");switch(Bt!==Fe.base&&(Bt=Fe.base,Sn=Bt.replace(/[^\/:]*$/,""),An=Bt.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),ye[0]){case void 0:return Bt;case"#":return Bt+ye;case"?":return Bt.replace(/(?:\?.*)?$/,ye);case"/":return An+ye;default:return Sn+ye}}function nt(ye){if(ye){var pe=ye[0];if(pe==="?"||pe==="$")return Fe.factory.variable(ye.substr(1))}return ye}function it(ye,pe){return{type:"operation",operator:ye,args:pe||[]}}function St(ye,pe){var ve={expression:ye==="*"?new hr:ye};if(pe)for(var we in pe)ve[we]=pe[we];return ve}function Ct(ye,pe){return{type:"path",pathType:ye,items:pe}}function Nr(ye,pe){for(var ve=0,we=pe.length,Be;ve<we&&(Be=pe[ve]);ve++)ye=it(Be[0],[ye,Be[1]]);return ye}function At(ye,pe){var ve=[],we=[],Be=ye.length,Ce,B={};if(!Be)return null;for(var ot=0;ot<Be&&(Ce=ye[ot]);ot++)(Ce.named?we:ve).push(Ce.iri);return B[pe||"from"]={default:ve,named:we},B}function Ht(ye){return parseInt(ye,10)}function Rr(ye){return ye.type==="group"&&ye.patterns.length===1?ye.patterns[0]:ye}function ht(ye,pe){return pe&&pe.termType!=="NamedNode"&&(pe=Fe.factory.namedNode(pe)),Fe.factory.literal(ye,pe)}function Bn(ye,pe){return Fe.factory.literal(ye,pe)}function Mt(ye,pe,ve){var we={};return ye!=null&&(we.subject=ye),pe!=null&&(we.predicate=pe),ve!=null&&(we.object=ve),we}function nr(ye){return typeof ye=="string"?ye.startsWith("e_")?Fe.factory.blankNode(ye):Fe.factory.blankNode("e_"+ye):Fe.factory.blankNode("g_"+jn++)}var jn=0;Fe._resetBlanks=function(){jn=0};var Cn=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Mn={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},Fn=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,Pr=String.fromCharCode;function xn(ye,pe){ye=ye.substring(pe,ye.length-pe);try{ye=ye.replace(Cn,function(ve,we,Be,Ce){var B;if(we){if(B=parseInt(we,16),isNaN(B))throw new Error;return Pr(B)}else if(Be){if(B=parseInt(Be,16),isNaN(B))throw new Error;return B<65535?Pr(B):Pr(55296+((B-=65536)>>10),56320+(B&1023))}else{var ot=Mn[Ce];if(!ot)throw new Error;return ot}})}catch{return""}if(Fn.exec(ye))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+ye);return ye}function kn(ye){var pe=nr(),ve=pe,we=[],Be,Ce=[];ye.forEach(function(jt){we.push(jt.entity),Gt(Ce,jt.triples)});for(var B=0,ot=0,k=we.length,Be=Array(k*2);B<k;)Be[ot++]=Mt(ve,Fe.factory.namedNode(Pn),we[B]),Be[ot++]=Mt(ve,Fe.factory.namedNode(Ln),ve=++B<k?nr():Fe.factory.namedNode(wn));return{entity:pe,triples:Gt(Be,Ce)}}function Un(ye){var pe=nr();return{entity:pe,triples:ye.map(function(ve){return Xe(Mt(pe),ve)})}}function Lr(ye,pe,ve){var we=[],Be=[];return pe.forEach(function(Ce){we.push(Mt(null,ye,Ce.entity)),Gt(Be,Ce.triples)}),ft(we,ve||[],Be)}function Xt(ye){return ye.variable?ye.variable.value:ye.value||ye.expression.value}function Dr(ye){if(!ye)return[];if(ye.type==="aggregate")return[ye];if(ye.type==="operation"){const pe=[];for(const ve of ye.args)pe.push(...Dr(ve));return pe}return[]}function Vn(ye){const pe=new Set,ve=function(we){we&&(we.termType==="Variable"?pe.add(we):we.type==="operation"&&we.args.forEach(ve))};return ve(ye),pe}function Br(ye,pe=1,ve=[]){for(const we of ye)pe>0&&we instanceof Array?Br(we,pe-1,ve):ve.push(we);return ve}function Cr(ye){return ye.termType==="Variable"}function In(ye){if(ye.triples){const pe=[];for(const ve of ye.triples)Cr(ve.subject)&&pe.push(ve.subject.value),Cr(ve.predicate)&&pe.push(ve.predicate.value),Cr(ve.object)&&pe.push(ve.object.value);return pe}else if(ye.patterns){const pe=[];for(const ve of ye.patterns)pe.push(...In(ve));return pe}return[]}function Qn(ye){const pe=ye.slice().sort(),ve=[];for(let we=0;we<pe.length-1;we++)pe[we+1]==pe[we]&&ve.push(pe[we]);return ve}function ir(ye){if(!Fe.sparqlStar)throw new Error("SPARQL* support is not enabled");return ye}function Nn(ye){for(const pe of ye){if(pe.type==="graph"&&pe.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(pe.type==="bgp"||pe.type==="graph"){for(const ve of pe.triples)if(ve.subject.termType==="Variable"||ve.predicate.termType==="Variable"||ve.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return ye}function Mr(ye){for(const pe of ye)if(pe.type==="bgp"){for(const ve of pe.triples)if(ve.subject.termType==="BlankNode"||ve.predicate.termType==="BlankNode"||ve.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return ye}var $n=function(){var ye={EOF:1,parseError:function(ve,we){if(this.yy.parser)this.yy.parser.parseError(ve,we);else throw new Error(ve)},setInput:function(pe,ve){return this.yy=ve||this.yy||{},this._input=pe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var pe=this._input[0];this.yytext+=pe,this.yyleng++,this.offset++,this.match+=pe,this.matched+=pe;var ve=pe.match(/(?:\r\n?|\n).*/g);return ve?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),pe},unput:function(pe){var ve=pe.length,we=pe.split(/(?:\r\n?|\n)/g);this._input=pe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-ve),this.offset-=ve;var Be=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),we.length-1&&(this.yylineno-=we.length-1);var Ce=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:we?(we.length===Be.length?this.yylloc.first_column:0)+Be[Be.length-we.length].length-we[0].length:this.yylloc.first_column-ve},this.options.ranges&&(this.yylloc.range=[Ce[0],Ce[0]+this.yyleng-ve]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(pe){this.unput(this.match.slice(pe))},pastInput:function(){var pe=this.matched.substr(0,this.matched.length-this.match.length);return(pe.length>20?"...":"")+pe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var pe=this.match;return pe.length<20&&(pe+=this._input.substr(0,20-pe.length)),(pe.substr(0,20)+(pe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pe=this.pastInput(),ve=new Array(pe.length+1).join("-");return pe+this.upcomingInput()+`
`+ve+"^"},test_match:function(pe,ve){var we,Be,Ce;if(this.options.backtrack_lexer&&(Ce={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Ce.yylloc.range=this.yylloc.range.slice(0))),Be=pe[0].match(/(?:\r\n?|\n).*/g),Be&&(this.yylineno+=Be.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Be?Be[Be.length-1].length-Be[Be.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+pe[0].length},this.yytext+=pe[0],this.match+=pe[0],this.matches=pe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(pe[0].length),this.matched+=pe[0],we=this.performAction.call(this,this.yy,this,ve,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),we)return we;if(this._backtrack){for(var B in Ce)this[B]=Ce[B];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var pe,ve,we,Be;this._more||(this.yytext="",this.match="");for(var Ce=this._currentRules(),B=0;B<Ce.length;B++)if(we=this._input.match(this.rules[Ce[B]]),we&&(!ve||we[0].length>ve[0].length)){if(ve=we,Be=B,this.options.backtrack_lexer){if(pe=this.test_match(we,Ce[B]),pe!==!1)return pe;if(this._backtrack){ve=!1;continue}else return!1}else if(!this.options.flex)break}return ve?(pe=this.test_match(ve,Ce[Be]),pe!==!1?pe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var ve=this.next();return ve||this.lex()},begin:function(ve){this.conditionStack.push(ve)},popState:function(){var ve=this.conditionStack.length-1;return ve>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(ve){return ve=this.conditionStack.length-1-Math.abs(ve||0),ve>=0?this.conditionStack[ve]:"INITIAL"},pushState:function(ve){this.begin(ve)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(ve,we,Be,Ce){switch(Be){case 0:break;case 1:return 12;case 2:return 15;case 3:return 28;case 4:return 316;case 5:return 317;case 6:return 35;case 7:return 37;case 8:return 38;case 9:return 26;case 10:return 41;case 11:return 45;case 12:return 46;case 13:return 48;case 14:return 50;case 15:return 55;case 16:return 58;case 17:return 320;case 18:return 68;case 19:return 69;case 20:return 75;case 21:return 78;case 22:return 81;case 23:return 83;case 24:return 86;case 25:return 88;case 26:return 90;case 27:return 191;case 28:return 107;case 29:return 321;case 30:return 140;case 31:return 322;case 32:return 323;case 33:return 117;case 34:return 324;case 35:return 116;case 36:return 325;case 37:return 326;case 38:return 120;case 39:return 122;case 40:return 123;case 41:return 138;case 42:return 132;case 43:return 133;case 44:return 135;case 45:return 141;case 46:return 119;case 47:return 327;case 48:return 328;case 49:return 167;case 50:return 170;case 51:return 174;case 52:return 100;case 53:return 168;case 54:return 329;case 55:return 173;case 56:return 231;case 57:return 235;case 58:return 278;case 59:return 195;case 60:return 330;case 61:return 331;case 62:return 224;case 63:return 333;case 64:return 271;case 65:return 219;case 66:return 226;case 67:return 227;case 68:return 250;case 69:return 254;case 70:return 295;case 71:return 334;case 72:return 335;case 73:return 336;case 74:return 337;case 75:return 338;case 76:return 258;case 77:return 339;case 78:return 273;case 79:return 281;case 80:return 282;case 81:return 275;case 82:return 276;case 83:return 277;case 84:return 340;case 85:return 341;case 86:return 279;case 87:return 343;case 88:return 342;case 89:return 344;case 90:return 284;case 91:return 285;case 92:return 288;case 93:return 290;case 94:return 294;case 95:return 298;case 96:return 301;case 97:return 13;case 98:return 16;case 99:return 312;case 100:return 245;case 101:return 34;case 102:return 297;case 103:return 87;case 104:return 299;case 105:return 300;case 106:return 306;case 107:return 307;case 108:return 308;case 109:return 309;case 110:return 310;case 111:return 311;case 112:return"EXPONENT";case 113:return 302;case 114:return 303;case 115:return 304;case 116:return 305;case 117:return 93;case 118:return 246;case 119:return 6;case 120:return"INVALID";case 121:console.log(we.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121],inclusive:!0}}};return ye}();Ir.lexer=$n;function Fe(){this.yy={}}return Fe.prototype=Ir,Ir.Parser=Fe,new Fe}(),SparqlParser_1=SparqlParser,XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",XSD_STRING="http://www.w3.org/2001/XMLSchema#string";function Generator$1(n){this._options=n=n||{};var e=n.prefixes||{};this._prefixByIri={};var t=[];for(var a in e){var c=e[a];isString$1(c)&&(this._prefixByIri[c]=a,t.push(c))}var l=t.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+l+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=n.sparqlStar,this._indent=isString$1(n.indent)?n.indent:"  ",this._newline=isString$1(n.newline)?n.newline:`
`,this._explicitDatatype=!!n.explicitDatatype}Generator$1.prototype.toQuery=function(n){var e="";return n.queryType&&(e+=n.queryType.toUpperCase()+" "),n.reduced&&(e+="REDUCED "),n.distinct&&(e+="DISTINCT "),n.variables?e+=mapJoin(n.variables,void 0,function(t){return isTerm$1(t)?this.toEntity(t):"("+this.toExpression(t.expression)+" AS "+variableToString(t.variable)+")"},this)+" ":n.template&&(e+=this.group(n.template,!0)+this._newline),n.from&&(e+=this.graphs("FROM ",n.from.default)+this.graphs("FROM NAMED ",n.from.named)),n.where&&(e+="WHERE "+this.group(n.where,!0)+this._newline),n.updates&&(e+=mapJoin(n.updates,";"+this._newline,this.toUpdate,this)),n.group&&(e+="GROUP BY "+mapJoin(n.group,void 0,function(t){var a=isTerm$1(t.expression)?this.toEntity(t.expression):"("+this.toExpression(t.expression)+")";return t.variable?"("+a+" AS "+variableToString(t.variable)+")":a},this)+this._newline),n.having&&(e+="HAVING ("+mapJoin(n.having,void 0,this.toExpression,this)+")"+this._newline),n.order&&(e+="ORDER BY "+mapJoin(n.order,void 0,function(t){var a="("+this.toExpression(t.expression)+")";return t.descending?"DESC "+a:a},this)+this._newline),n.offset&&(e+="OFFSET "+n.offset+this._newline),n.limit&&(e+="LIMIT "+n.limit+this._newline),n.values&&(e+=this.values(n)),e=this.baseAndPrefixes(n)+e,e.trim()};Generator$1.prototype.baseAndPrefixes=function(n){var e=n.base?"BASE <"+n.base+">"+this._newline:"",t="";for(var a in n.prefixes)(this._options.allPrefixes||this._usedPrefixes[a])&&(t+="PREFIX "+a+": <"+n.prefixes[a]+">"+this._newline);return e+t};Generator$1.prototype.toPattern=function(n){var e=n.type||n instanceof Array&&"array"||(n.subject&&n.predicate&&n.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](n)};Generator$1.prototype.triple=function(n){return this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+"."};Generator$1.prototype.array=function(n){return mapJoin(n,this._newline,this.toPattern,this)};Generator$1.prototype.bgp=function(n){return this.encodeTriples(n.triples)};Generator$1.prototype.encodeTriples=function(n){if(!n.length)return"";for(var e=[],t=void 0,a=void 0,c=0;c<n.length;c++){var l=n[c];equalTerms(l.subject,t)?equalTerms(l.predicate,a)?e.push(","):(a=l.predicate,e.push(";"+this._newline,this._indent,this.toEntity(a))):(t&&e.push("."+this._newline),t=l.subject,a=l.predicate,e.push(this.toEntity(t)," ",this.toEntity(a))),e.push(" ",this.toEntity(l.object))}return e.push("."),e.join("")};Generator$1.prototype.graph=function(n){return"GRAPH "+this.toEntity(n.name)+" "+this.group(n)};Generator$1.prototype.graphs=function(n,e){return!e||e.length===0?"":mapJoin(e,"",function(t){return n+this.toEntity(t)+this._newline},this)};Generator$1.prototype.group=function(n,e){return n=e!==!0?this.array(n.patterns||n.triples):this.toPattern(n.type!=="group"?n:n.patterns),n.indexOf(this._newline)===-1?"{ "+n+" }":"{"+this._newline+this.indent(n)+this._newline+"}"};Generator$1.prototype.query=function(n){return this.toQuery(n)};Generator$1.prototype.filter=function(n){return"FILTER("+this.toExpression(n.expression)+")"};Generator$1.prototype.bind=function(n){return"BIND("+this.toExpression(n.expression)+" AS "+variableToString(n.variable)+")"};Generator$1.prototype.optional=function(n){return"OPTIONAL "+this.group(n)};Generator$1.prototype.union=function(n){return mapJoin(n.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Generator$1.prototype.minus=function(n){return"MINUS "+this.group(n)};Generator$1.prototype.values=function(n){var e=Object.keys(n.values.reduce(function(c,l){for(var o in l)c[o]=!0;return c},{})),t,a;return e.length===1?t=a="":(t="(",a=")"),"VALUES "+t+e.join(" ")+a+" {"+this._newline+mapJoin(n.values,this._newline,function(c){return"  "+t+mapJoin(e,void 0,function(l){return c[l]?this.toEntity(c[l]):"UNDEF"},this)+a},this)+this._newline+"}"};Generator$1.prototype.service=function(n){return"SERVICE "+(n.silent?"SILENT ":"")+this.toEntity(n.name)+" "+this.group(n)};Generator$1.prototype.toExpression=function(n){if(isTerm$1(n))return this.toEntity(n);switch(n.type.toLowerCase()){case"aggregate":return n.aggregation.toUpperCase()+"("+(n.distinct?"DISTINCT ":"")+this.toExpression(n.expression)+(typeof n.separator=="string"?'; SEPARATOR = "'+n.separator.replace(escape,escapeReplacer)+'"':"")+")";case"functioncall":return this.toEntity(n.function)+"("+mapJoin(n.args,", ",this.toExpression,this)+")";case"operation":var e=n.operator.toUpperCase(),t=n.args||[];switch(n.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(isTerm$1(t[0])?this.toEntity(t[0]):"("+this.toExpression(t[0])+")")+" "+e+" "+(isTerm$1(t[1])?this.toEntity(t[1]):"("+this.toExpression(t[1])+")");case"!":return"!("+this.toExpression(t[0])+")";case"uplus":return"+("+this.toExpression(t[0])+")";case"uminus":return"-("+this.toExpression(t[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(t[0])+" "+e+"("+(isString$1(t[1])?t[1]:mapJoin(t[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(t[0],!0);default:return e+"("+mapJoin(t,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+n.type)}};Generator$1.prototype.toEntity=function(n){if(isTerm$1(n))switch(n.termType){case"Wildcard":return"*";case"Variable":return variableToString(n);case"BlankNode":return"_:"+n.value;case"Literal":var e=n.value||"",t=n.language||"",a=n.datatype;if(n='"'+e.replace(escape,escapeReplacer)+'"',t)n+="@"+t;else if(a){if(!this._explicitDatatype)switch(a.value){case XSD_STRING:return n;case XSD_INTEGER:if(/^\d+$/.test(e))return e+" "}n+="^^"+this.encodeIRI(a.value)}return n;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return n.graph&&n.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(n.graph)+" { "+this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+" }  >>":"<< "+this.toEntity(n.subject)+" "+this.toEntity(n.predicate)+" "+this.toEntity(n.object)+" >>";default:return this.encodeIRI(n.value)}else{var c=n.items.map(this.toEntity,this),l=n.pathType;switch(l){case"^":case"!":return l+c[0];case"*":case"+":case"?":return"("+c[0]+l+")";default:return"("+c.join(l)+")"}}};var escape=/["\\\t\n\r\b\f]/g,escapeReplacer=function(n){return escapeReplacements[n]},escapeReplacements={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Generator$1.prototype.encodeIRI=function(n){var e=this._prefixRegex.exec(n);if(e){var t=this._prefixByIri[e[1]];return this._usedPrefixes[t]=!0,t+":"+e[2]}return"<"+n+">"};Generator$1.prototype.toUpdate=function(n){switch(n.type||n.updateType){case"load":return"LOAD"+(n.source?" "+this.toEntity(n.source):"")+(n.destination?" INTO GRAPH "+this.toEntity(n.destination):"");case"insert":return"INSERT DATA "+this.group(n.insert,!0);case"delete":return"DELETE DATA "+this.group(n.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(n.delete,!0);case"insertdelete":return(n.graph?"WITH "+this.toEntity(n.graph)+this._newline:"")+(n.delete.length?"DELETE "+this.group(n.delete,!0)+this._newline:"")+(n.insert.length?"INSERT "+this.group(n.insert,!0)+this._newline:"")+(n.using?this.graphs("USING ",n.using.default):"")+(n.using?this.graphs("USING NAMED ",n.using.named):"")+"WHERE "+this.group(n.where,!0);case"add":case"copy":case"move":return n.type.toUpperCase()+" "+(n.silent?"SILENT ":"")+(n.source.default?"DEFAULT":this.toEntity(n.source.name))+" TO "+this.toEntity(n.destination.name);case"create":case"clear":case"drop":return n.type.toUpperCase()+(n.silent?" SILENT ":" ")+(n.graph.default?"DEFAULT":n.graph.named?"NAMED":n.graph.all?"ALL":"GRAPH "+this.toEntity(n.graph.name));default:throw new Error("Unknown update query type: "+n.type)}};Generator$1.prototype.indent=function(n){return n.replace(/^/gm,this._indent)};function variableToString(n){return"?"+n.value}function isString$1(n){return typeof n=="string"}function isTerm$1(n){return typeof n.termType=="string"}function equalTerms(n,e){if(!n||!isTerm$1(n)||!e||!isTerm$1(e)||n.termType!==e.termType)return!1;switch(n.termType){case"Literal":return n.value===e.value&&n.language===e.language&&equalTerms(n.datatype,e.datatype);case"Quad":return equalTerms(n.subject,e.subject)&&equalTerms(n.predicate,e.predicate)&&equalTerms(n.object,e.object)&&equalTerms(n.graph,e.graph);default:return n.value===e.value}}function mapJoin(n,e,t,a){return n.map(t,a).join(isString$1(e)?e:" ")}var SparqlGenerator=function(e={}){return{stringify:function(t){var a=Object.create(e);return a.prefixes=t.prefixes,new Generator$1(a).toQuery(t)},createGenerator:function(){return new Generator$1(e)}}},Parser$1=SparqlParser_1.Parser,Generator=SparqlGenerator,Wildcard=Wildcard$2.Wildcard,{DataFactory}=rdfDataFactory,sparql$1={Parser:function({prefixes:n,baseIRI:e,factory:t,sparqlStar:a,skipValidation:c,skipUngroupedVariableCheck:l,pathOnly:o}={}){var i={};for(var u in n||{})i[u]=n[u];var d=new Parser$1;return d.parse=function(){return Parser$1.base=e||"",Parser$1.prefixes=Object.create(i),Parser$1.factory=t||new DataFactory,Parser$1.sparqlStar=!!a,Parser$1.pathOnly=!!o,Parser$1.skipValidation=!!c||!!l,Parser$1.prototype.parse.apply(d,arguments)},d._resetBlanks=Parser$1._resetBlanks,d},Generator,Wildcard},__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__=_mergeNamespaces({__proto__:null,default:sparql$1},[sparql$1]),__createBinding$2=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,a){a===void 0&&(a=t);var c=Object.getOwnPropertyDescriptor(e,t);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,a,c)}:function(n,e,t,a){a===void 0&&(a=t),n[a]=e[t]}),__setModuleDefault$2=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar$2=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding$2(e,n,t);return __setModuleDefault$2(e,n),e};Object.defineProperty(factory$2,"__esModule",{value:!0});const A=__importStar$2(algebra),rdf_data_factory_1$1=rdfDataFactory,rdf_string_1$4=rdfString,sparqljs_1$1=sparql$1;class Factory{constructor(e){this.dataFactory=e||new rdf_data_factory_1$1.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(e,t=!0){return this.flattenMulti({type:A.types.ALT,input:e},t)}createAsk(e){return{type:A.types.ASK,input:e}}createBoundAggregate(e,t,a,c,l){const o=this.createAggregateExpression(t,a,c,l);return o.variable=e,o}createBgp(e){return{type:A.types.BGP,patterns:e}}createConstruct(e,t){return{type:A.types.CONSTRUCT,input:e,template:t}}createDescribe(e,t){return{type:A.types.DESCRIBE,input:e,terms:t}}createDistinct(e){return{type:A.types.DISTINCT,input:e}}createExtend(e,t,a){return{type:A.types.EXTEND,input:e,variable:t,expression:a}}createFrom(e,t,a){return{type:A.types.FROM,input:e,default:t,named:a}}createFilter(e,t){return{type:A.types.FILTER,input:e,expression:t}}createGraph(e,t){return{type:A.types.GRAPH,input:e,name:t}}createGroup(e,t,a){return{type:A.types.GROUP,input:e,variables:t,aggregates:a}}createInv(e){return{type:A.types.INV,path:e}}createJoin(e,t=!0){return this.flattenMulti({type:A.types.JOIN,input:e},t)}createLeftJoin(e,t,a){return a?{type:A.types.LEFT_JOIN,input:[e,t],expression:a}:{type:A.types.LEFT_JOIN,input:[e,t]}}createLink(e){return{type:A.types.LINK,iri:e}}createMinus(e,t){return{type:A.types.MINUS,input:[e,t]}}createNop(){return{type:A.types.NOP}}createNps(e){return{type:A.types.NPS,iris:e}}createOneOrMorePath(e){return{type:A.types.ONE_OR_MORE_PATH,path:e}}createOrderBy(e,t){return{type:A.types.ORDER_BY,input:e,expressions:t}}createPath(e,t,a,c){return c?{type:A.types.PATH,subject:e,predicate:t,object:a,graph:c}:{type:A.types.PATH,subject:e,predicate:t,object:a,graph:this.dataFactory.defaultGraph()}}createPattern(e,t,a,c){const l=this.dataFactory.quad(e,t,a,c);return l.type=A.types.PATTERN,l}createProject(e,t){return{type:A.types.PROJECT,input:e,variables:t}}createReduced(e){return{type:A.types.REDUCED,input:e}}createSeq(e,t=!0){return this.flattenMulti({type:A.types.SEQ,input:e},t)}createService(e,t,a){return{type:A.types.SERVICE,input:e,name:t,silent:!!a}}createSlice(e,t,a){return t=t||0,a!==void 0?{type:A.types.SLICE,input:e,start:t,length:a}:{type:A.types.SLICE,input:e,start:t}}createUnion(e,t=!0){return this.flattenMulti({type:A.types.UNION,input:e},t)}createValues(e,t){return{type:A.types.VALUES,variables:e,bindings:t}}createZeroOrMorePath(e){return{type:A.types.ZERO_OR_MORE_PATH,path:e}}createZeroOrOnePath(e){return{type:A.types.ZERO_OR_ONE_PATH,path:e}}createAggregateExpression(e,t,a,c){return c?{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:t,separator:c,distinct:a}:{type:A.types.EXPRESSION,expressionType:A.expressionTypes.AGGREGATE,aggregator:e,expression:t,distinct:a}}createExistenceExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.EXISTENCE,not:e,input:t}}createNamedExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.NAMED,name:e,args:t}}createOperatorExpression(e,t){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.OPERATOR,operator:e,args:t}}createTermExpression(e){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.TERM,term:e}}createWildcardExpression(){return{type:A.types.EXPRESSION,expressionType:A.expressionTypes.WILDCARD,wildcard:new sparqljs_1$1.Wildcard}}createTerm(e){return(0,rdf_string_1$4.stringToTerm)(e,this.dataFactory)}createCompositeUpdate(e){return{type:A.types.COMPOSITE_UPDATE,updates:e}}createDeleteInsert(e,t,a){const c={type:A.types.DELETE_INSERT};return e&&(c.delete=e),t&&(c.insert=t),a&&(c.where=a),c}createLoad(e,t,a){const c={type:A.types.LOAD,source:e};return t&&(c.destination=t),this.addSilent(c,!!a)}createClear(e,t){return this.addSilent({type:A.types.CLEAR,source:e},!!t)}createCreate(e,t){return this.addSilent({type:A.types.CREATE,source:e},!!t)}createDrop(e,t){return this.addSilent({type:A.types.DROP,source:e},!!t)}createAdd(e,t,a){return this.addSilent({type:A.types.ADD,source:e,destination:t},!!a)}createMove(e,t,a){return this.addSilent({type:A.types.MOVE,source:e,destination:t},!!a)}createCopy(e,t,a){return this.addSilent({type:A.types.COPY,source:e,destination:t},!!a)}addSilent(e,t){return t&&(e.silent=t),e}flattenMulti(e,t){if(!t)return e;const a=e.type,c=e.input;let l=[];for(const o of c)o.type===a?l.push(...o.input):l.push(o);return e.input=l,e}}factory$2.default=Factory;var util={},__importDefault$2=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(util,"__esModule",{value:!0});const algebra_1=algebra,factory_1$2=__importDefault$2(factory$2);class Util{static flatten(e){return Array.prototype.concat(...e).filter(t=>t)}static objectify(e){if(e.termType){if(e.termType==="Quad")return{type:"pattern",termType:"Quad",subject:Util.objectify(e.subject),predicate:Util.objectify(e.predicate),object:Util.objectify(e.object),graph:Util.objectify(e.graph)};{let t={termType:e.termType,value:e.value};return e.language&&(t.language=e.language),e.datatype&&(t.datatype=Util.objectify(e.datatype)),t}}if(Array.isArray(e))return e.map(t=>Util.objectify(t));if(e===Object(e)){let t={};for(let a of Object.keys(e))t[a]=Util.objectify(e[a]);return t}return e}static inScopeVariables(e){const t=[];function a(l){t.find(o=>l.value===o.value)||t.push(l)}function c(l){l.subject.termType==="Variable"&&a(l.subject),l.predicate.termType==="Variable"&&a(l.predicate),l.object.termType==="Variable"&&a(l.object),l.graph.termType==="Variable"&&a(l.graph),l.subject.termType==="Quad"&&c(l.subject),l.predicate.termType==="Quad"&&c(l.predicate),l.object.termType==="Quad"&&c(l.object),l.graph.termType==="Quad"&&c(l.graph)}return Util.recurseOperation(e,{[algebra_1.types.EXPRESSION]:l=>(l.expressionType===algebra_1.expressionTypes.AGGREGATE&&l.variable&&a(l.variable),!0),[algebra_1.types.EXTEND]:l=>(a(l.variable),!0),[algebra_1.types.GRAPH]:l=>(l.name.termType==="Variable"&&a(l.name),!0),[algebra_1.types.GROUP]:l=>(l.variables.forEach(a),!0),[algebra_1.types.PATH]:l=>(l.subject.termType==="Variable"&&a(l.subject),l.object.termType==="Variable"&&a(l.object),l.graph.termType==="Variable"&&a(l.graph),l.subject.termType==="Quad"&&c(l.subject),l.object.termType==="Quad"&&c(l.object),l.graph.termType==="Quad"&&c(l.graph),!0),[algebra_1.types.PATTERN]:l=>(c(l),!0),[algebra_1.types.PROJECT]:l=>(l.variables.forEach(a),!1),[algebra_1.types.SERVICE]:l=>(l.name.termType==="Variable"&&a(l.name),!0),[algebra_1.types.VALUES]:l=>(l.variables.forEach(a),!0)}),t}static recurseOperation(e,t){let a=e,c=!0;const l=t[e.type];if(l&&(c=l(e)),!c)return;let o=i=>Util.recurseOperation(i,t);switch(a.type){case algebra_1.types.ALT:a.input.map(o);break;case algebra_1.types.ASK:o(a.input);break;case algebra_1.types.BGP:a.patterns.forEach(o);break;case algebra_1.types.CONSTRUCT:o(a.input),a.template.map(o);break;case algebra_1.types.DESCRIBE:o(a.input);break;case algebra_1.types.DISTINCT:o(a.input);break;case algebra_1.types.EXPRESSION:a.expressionType===algebra_1.expressionTypes.EXISTENCE&&o(a.input);break;case algebra_1.types.EXTEND:o(a.input),o(a.expression);break;case algebra_1.types.FILTER:o(a.input),o(a.expression);break;case algebra_1.types.FROM:o(a.input);break;case algebra_1.types.GRAPH:o(a.input);break;case algebra_1.types.GROUP:o(a.input),a.aggregates.forEach(o);break;case algebra_1.types.INV:o(a.path);break;case algebra_1.types.JOIN:a.input.map(o);break;case algebra_1.types.LEFT_JOIN:a.input.map(o),a.expression&&o(a.expression);break;case algebra_1.types.LINK:break;case algebra_1.types.MINUS:a.input.map(o);break;case algebra_1.types.NOP:break;case algebra_1.types.NPS:break;case algebra_1.types.ONE_OR_MORE_PATH:o(a.path);break;case algebra_1.types.ORDER_BY:o(a.input),a.expressions.forEach(o);break;case algebra_1.types.PATH:o(a.predicate);break;case algebra_1.types.PATTERN:break;case algebra_1.types.PROJECT:o(a.input);break;case algebra_1.types.REDUCED:o(a.input);break;case algebra_1.types.SEQ:a.input.map(o);break;case algebra_1.types.SERVICE:o(a.input);break;case algebra_1.types.SLICE:o(a.input);break;case algebra_1.types.UNION:a.input.map(o);break;case algebra_1.types.VALUES:break;case algebra_1.types.ZERO_OR_MORE_PATH:o(a.path);break;case algebra_1.types.ZERO_OR_ONE_PATH:o(a.path);break;case algebra_1.types.COMPOSITE_UPDATE:a.updates.forEach(i=>o(i));break;case algebra_1.types.DELETE_INSERT:a.delete&&a.delete.forEach(i=>o(i)),a.insert&&a.insert.forEach(i=>o(i)),a.where&&o(a.where);break;case algebra_1.types.LOAD:break;case algebra_1.types.CLEAR:break;case algebra_1.types.CREATE:break;case algebra_1.types.DROP:break;case algebra_1.types.ADD:break;case algebra_1.types.MOVE:break;case algebra_1.types.COPY:break;default:throw new Error(`Unknown Operation type ${a.type}`)}}static mapOperation(e,t,a){let c=e,l=!0;a=a||new factory_1$2.default;const o=t[e.type];if(o&&({result:c,recurse:l}=o(e,a)),!l)return c;let i=u=>Util.mapOperation(u,t,a);switch(c.type){case algebra_1.types.ALT:return a.createAlt(c.input.map(i));case algebra_1.types.ASK:return a.createAsk(i(c.input));case algebra_1.types.BGP:return a.createBgp(c.patterns.map(i));case algebra_1.types.CONSTRUCT:return a.createConstruct(i(c.input),c.template.map(i));case algebra_1.types.DESCRIBE:return a.createDescribe(i(c.input),c.terms);case algebra_1.types.DISTINCT:return a.createDistinct(i(c.input));case algebra_1.types.EXPRESSION:return Util.mapExpression(c,t,a);case algebra_1.types.EXTEND:return a.createExtend(i(c.input),c.variable,i(c.expression));case algebra_1.types.FILTER:return a.createFilter(i(c.input),i(c.expression));case algebra_1.types.FROM:return a.createFrom(i(c.input),[...c.default],[...c.named]);case algebra_1.types.GRAPH:return a.createGraph(i(c.input),c.name);case algebra_1.types.GROUP:return a.createGroup(i(c.input),[].concat(c.variables),c.aggregates.map(i));case algebra_1.types.INV:return a.createInv(i(c.path));case algebra_1.types.JOIN:return a.createJoin(c.input.map(i));case algebra_1.types.LEFT_JOIN:return a.createLeftJoin(i(c.input[0]),i(c.input[1]),c.expression?i(c.expression):void 0);case algebra_1.types.LINK:return a.createLink(c.iri);case algebra_1.types.MINUS:return a.createMinus(i(c.input[0]),i(c.input[1]));case algebra_1.types.NOP:return a.createNop();case algebra_1.types.NPS:return a.createNps([].concat(c.iris));case algebra_1.types.ONE_OR_MORE_PATH:return a.createOneOrMorePath(i(c.path));case algebra_1.types.ORDER_BY:return a.createOrderBy(i(c.input),c.expressions.map(i));case algebra_1.types.PATH:return a.createPath(c.subject,i(c.predicate),c.object,c.graph);case algebra_1.types.PATTERN:return a.createPattern(c.subject,c.predicate,c.object,c.graph);case algebra_1.types.PROJECT:return a.createProject(i(c.input),[...c.variables]);case algebra_1.types.REDUCED:return a.createReduced(i(c.input));case algebra_1.types.SEQ:return a.createSeq(c.input.map(i));case algebra_1.types.SERVICE:return a.createService(i(c.input),c.name,c.silent);case algebra_1.types.SLICE:return a.createSlice(i(c.input),c.start,c.length);case algebra_1.types.UNION:return a.createUnion(c.input.map(i));case algebra_1.types.VALUES:return a.createValues([].concat(c.variables),c.bindings.map(u=>Object.assign({},u)));case algebra_1.types.ZERO_OR_MORE_PATH:return a.createZeroOrMorePath(i(c.path));case algebra_1.types.ZERO_OR_ONE_PATH:return a.createZeroOrOnePath(i(c.path));case algebra_1.types.COMPOSITE_UPDATE:return a.createCompositeUpdate(c.updates.map(i));case algebra_1.types.DELETE_INSERT:return a.createDeleteInsert(c.delete?c.delete.map(i):void 0,c.insert?c.insert.map(i):void 0,c.where?i(c.where):void 0);case algebra_1.types.LOAD:return a.createLoad(c.source,c.destination,c.silent);case algebra_1.types.CLEAR:return a.createClear(c.source,c.silent);case algebra_1.types.CREATE:return a.createCreate(c.source,c.silent);case algebra_1.types.DROP:return a.createDrop(c.source,c.silent);case algebra_1.types.ADD:return a.createAdd(c.source,c.destination);case algebra_1.types.MOVE:return a.createMove(c.source,c.destination);case algebra_1.types.COPY:return a.createCopy(c.source,c.destination);default:throw new Error(`Unknown Operation type ${c.type}`)}}static mapExpression(e,t,a){let c=l=>Util.mapOperation(l,t,a);switch(e.expressionType){case algebra_1.expressionTypes.AGGREGATE:return e.variable?a.createBoundAggregate(e.variable,e.aggregator,c(e.expression),e.distinct,e.separator):a.createAggregateExpression(e.aggregator,c(e.expression),e.distinct,e.separator);case algebra_1.expressionTypes.EXISTENCE:return a.createExistenceExpression(e.not,c(e.input));case algebra_1.expressionTypes.NAMED:return a.createNamedExpression(e.name,e.args.map(c));case algebra_1.expressionTypes.OPERATOR:return a.createOperatorExpression(e.operator,e.args.map(c));case algebra_1.expressionTypes.TERM:return a.createTermExpression(e.term);case algebra_1.expressionTypes.WILDCARD:return a.createWildcardExpression();default:throw new Error(`Unknown Expression type ${e.expressionType}`)}}static createUniqueVariable(e,t,a){let c=0,l=e;for(;t[l];)l=`${e}${c++}`;return a.variable(l)}static isSimpleTerm(e){return e.termType!==void 0&&e.termType!=="Quad"&&e.termType!=="Wildcard"}static isQuad(e){return e.termType==="Quad"}static isWildcard(e){return e.termType==="Wildcard"}}util.default=Util;var __createBinding$1=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,a){a===void 0&&(a=t);var c=Object.getOwnPropertyDescriptor(e,t);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,a,c)}:function(n,e,t,a){a===void 0&&(a=t),n[a]=e[t]}),__setModuleDefault$1=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar$1=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding$1(e,n,t);return __setModuleDefault$1(e,n),e},__importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sparqlAlgebra,"__esModule",{value:!0});const equal=es6,rdf_string_1$3=rdfString,Algebra$1=__importStar$1(algebra),factory_1$1=__importDefault$1(factory$2),util_1$1=__importDefault$1(util),Parser=sparql$1.Parser,types$1=Algebra$1.types;let variables=new Set,varCount=0,useQuads=!1,factory$1;function translate(n,e){e=e||{},factory$1=new factory_1$1.default(e.dataFactory);let t;if(isString(n)){let a=new Parser(e);a._resetBlanks(),t=a.parse(n)}else t=n;return translateQuery(t,e.quads,e.blankToVariable)}sparqlAlgebra.default=translate;function translateQuery(n,e,t){if(variables=new Set,varCount=0,useQuads=!!e,!n.type)return factory$1.createNop();if(n.type!=="query"&&n.type!=="update")throw new Error("Translate only works on complete query or update objects.");let a;if(findAllVariables(n),n.type==="query"){const c={type:"group",patterns:n.where||[]};a=translateGroupGraphPattern(c),a=translateAggregates(n,a)}else n.type==="update"&&(a=translateUpdate(n));return t&&(a=translateBlankNodesToVariables(a)),a}function isString(n){return typeof n=="string"}function isTerm(n){return!!n?.termType}function isTriple(n){return n.subject&&n.predicate&&n.object}function isVariable(n){return n?.termType==="Variable"}function findAllVariables(n){if(isTerm(n))isVariable(n)&&variables.add(`?${n.value}`);else if(Array.isArray(n))for(const e of n)findAllVariables(e);else if(n&&typeof n=="object")for(let e of Object.keys(n))e.startsWith("?")&&variables.add(e),findAllVariables(n[e])}function inScopeVariables(n){let e={};if(isTriple(n)){const t=[inScopeVariables(n.subject),inScopeVariables(n.predicate),inScopeVariables(n.object),n.graph?inScopeVariables(n.graph):{}];Object.assign(e,...t)}else if(isTerm(n))isVariable(n)&&(e[n.value]=n);else if(n.type==="bgp"){const t=n.triples;Object.assign(e,...t.map(inScopeVariables))}else if(n.type==="path")Object.assign(e,...n.items.map(inScopeVariables));else if(n.type==="group"||n.type==="union"||n.type==="optional")Object.assign(e,...n.patterns.map(inScopeVariables));else if(n.type==="service"||n.type==="graph")Object.assign(e,inScopeVariables(n.name)),Object.assign(e,...n.patterns.map(inScopeVariables));else if(n.type==="bind")Object.assign(e,inScopeVariables(n.variable));else if(n.type==="values"){if(n.values.length>0){const t=Object.keys(n.values[0]).map(a=>factory$1.createTerm(a));Object.assign(e,...t.map(inScopeVariables))}}else if(n.type==="query"&&(n.queryType==="SELECT"||n.queryType==="DESCRIBE")){n.where&&n.variables.some(util_1$1.default.isWildcard)&&Object.assign(e,...n.where.map(inScopeVariables));for(const t of n.variables)isVariable(t)?Object.assign(e,inScopeVariables(t)):t.variable&&Object.assign(e,inScopeVariables(t.variable));if(n.queryType==="SELECT"){if(n.group)for(const t of n.group)t.variable&&Object.assign(e,inScopeVariables(t.variable));if(n.values){const t={type:"values",values:n.values};Object.assign(e,inScopeVariables(t))}}}return e}function translateGroupGraphPattern(n){let e=[],t=[];if("patterns"in n)for(let c of n.patterns)(c.type==="filter"?e:t).push(c);if(n.type==="bgp")return translateBgp$1(n);let a;if(n.type==="union")a=factory$1.createUnion(t.map(c=>(c.type!=="group"&&(c={type:"group",patterns:[c]}),translateGroupGraphPattern(c))));else{if(n.type==="graph")return translateGraph$1(n);if(n.type==="group")a=t.reduce(accumulateGroupGraphPattern,factory$1.createBgp([]));else if(n.type==="values")a=translateInlineData(n);else if(n.type==="query")a=translateQuery(n,useQuads,!1);else throw new Error(`Unexpected type: ${n.type}`)}if(e.length>0){let c=e.map(l=>translateExpression$1(l.expression));c.length>0&&(a=factory$1.createFilter(a,c.reduce((l,o)=>factory$1.createOperatorExpression("&&",[l,o]))))}return a}function translateExpression$1(n){if(util_1$1.default.isSimpleTerm(n)||util_1$1.default.isQuad(n))return factory$1.createTermExpression(n);if(util_1$1.default.isWildcard(n))return factory$1.createWildcardExpression();if("aggregation"in n)return factory$1.createAggregateExpression(n.aggregation,translateExpression$1(n.expression),!!n.distinct,n.separator);if("function"in n)return factory$1.createNamedExpression(n.function,n.args.map(translateExpression$1));if("operator"in n)return n.operator==="exists"||n.operator==="notexists"?factory$1.createExistenceExpression(n.operator==="notexists",translateGroupGraphPattern(n.args[0])):((n.operator==="in"||n.operator==="notin")&&(n.args=[n.args[0]].concat(n.args[1])),factory$1.createOperatorExpression(n.operator,n.args.map(translateExpression$1)));throw new Error(`Unknown expression: ${JSON.stringify(n)}`)}function translateBgp$1(n){let e=[],t=[];for(let a of n.triples)if("pathType"in a.predicate){let c=translatePath$1(a);for(let l of c)l.type===types$1.PATH?(e.length>0&&t.push(factory$1.createBgp(e)),e=[],t.push(l)):e.push(l)}else e.push(translateQuad(a));return e.length>0&&t.push(factory$1.createBgp(e)),t.length===1?t[0]:factory$1.createJoin(t)}function translatePath$1(n){let e=n.subject,t=translatePathPredicate(n.predicate),a=n.object;return simplifyPath(e,t,a)}function translatePathPredicate(n){if(util_1$1.default.isSimpleTerm(n)){if(n.termType==="NamedNode")return factory$1.createLink(n);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(n)}`)}if(n.pathType==="^")return factory$1.createInv(translatePathPredicate(n.items[0]));if(n.pathType==="!"){let e=[],t=[],a;"pathType"in n.items[0]&&n.items[0].pathType==="|"?a=n.items[0].items:a=n.items;for(let o of a)if(util_1$1.default.isSimpleTerm(o))e.push(o);else if(o.pathType==="^")t.push(o.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(o)}`);let c=factory$1.createNps(e),l=factory$1.createInv(factory$1.createNps(t));return t.length===0?c:e.length===0?l:factory$1.createAlt([c,l])}if(n.pathType==="/")return factory$1.createSeq(n.items.map(translatePathPredicate));if(n.pathType==="|")return factory$1.createAlt(n.items.map(translatePathPredicate));if(n.pathType==="*")return factory$1.createZeroOrMorePath(translatePathPredicate(n.items[0]));if(n.pathType==="+")return factory$1.createOneOrMorePath(translatePathPredicate(n.items[0]));if(n.pathType==="?")return factory$1.createZeroOrOnePath(translatePathPredicate(n.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(n)}`)}function simplifyPath(n,e,t){if(e.type===types$1.LINK)return[factory$1.createPattern(n,e.iri,t)];if(e.type===types$1.INV)return simplifyPath(t,e.path,n);if(e.type===types$1.SEQ){let a=n;return util_1$1.default.flatten(e.input.map((c,l)=>{const o=l===e.input.length-1?t:generateFreshVar(),i=simplifyPath(a,c,o);return o.termType==="Variable"&&(a=o),i}))}return[factory$1.createPath(n,e,t)]}function generateFreshVar(){let n=`?var${varCount++}`;return variables.has(n)?generateFreshVar():(variables.add(n),factory$1.createTerm(n))}function translateQuad(n){if("pathType"in n.predicate)throw new Error("Trying to translate property path to quad.");return factory$1.createPattern(n.subject,n.predicate,n.object,n.graph)}function translateGraph$1(n){const e={type:"group",patterns:n.patterns};let t=translateGroupGraphPattern(e);return useQuads?t=recurseGraph(t,n.name):t=factory$1.createGraph(t,n.name),t}let typeVals=Object.values(types$1);function recurseGraph(n,e,t){if(n.type===types$1.GRAPH){if(t)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");n=recurseGraph(n.input,n.name)}else if(n.type===types$1.BGP)n.patterns=n.patterns.map(a=>(t&&(a.subject.equals(e)&&(a.subject=t),a.predicate.equals(e)&&(a.predicate=t),a.object.equals(e)&&(a.object=t)),a.graph.termType==="DefaultGraph"&&(a.graph=e),a));else if(n.type===types$1.PATH)t&&(n.subject.equals(e)&&(n.subject=t),n.object.equals(e)&&(n.object=t)),n.graph.termType==="DefaultGraph"&&(n.graph=e);else if(n.type===types$1.PROJECT&&!t)n.variables.some(a=>a.equals(e))||(t=generateFreshVar()),n.input=recurseGraph(n.input,e,t);else if(n.type===types$1.EXTEND&&!t)n.variable.equals(e)&&(t=generateFreshVar()),n.input=recurseGraph(n.input,e,t);else for(let a of Object.keys(n))Array.isArray(n[a])?n[a]=n[a].map(c=>recurseGraph(c,e,t)):typeVals.indexOf(n[a].type)>=0?n[a]=recurseGraph(n[a],e,t):t&&isVariable(n[a])&&n[a].equals(e)&&(n[a]=t);return n}function accumulateGroupGraphPattern(n,e){if(e.type==="optional"){const t=translateGroupGraphPattern({type:"group",patterns:e.patterns});t.type===types$1.FILTER?n=factory$1.createLeftJoin(n,t.input,t.expression):n=factory$1.createLeftJoin(n,t)}else if(e.type==="minus"){const t=translateGroupGraphPattern({type:"group",patterns:e.patterns});n=factory$1.createMinus(n,t)}else if(e.type==="bind")n=factory$1.createExtend(n,e.variable,translateExpression$1(e.expression));else if(e.type==="service"){const t={type:"group",patterns:e.patterns},a=factory$1.createService(translateGroupGraphPattern(t),e.name,e.silent);n=simplifiedJoin(n,a)}else{const t=translateGroupGraphPattern(e);n=simplifiedJoin(n,t)}return n}function simplifiedJoin(n,e){return n.type===types$1.BGP&&e.type===types$1.BGP?n=factory$1.createBgp([...n.patterns,...e.patterns]):n.type===types$1.BGP&&n.patterns.length===0?n=e:e.type===types$1.BGP&&e.patterns.length===0||(n=factory$1.createJoin([n,e])),n}function translateInlineData(n){let e=(n.values.length===0?[]:Object.keys(n.values[0])).map(factory$1.createTerm.bind(factory$1)),t=n.values.map(a=>{let c=Object.keys(a);c=c.filter(o=>a[o]!==void 0);let l={};for(let o of c)l[o]=a[o];return l});return factory$1.createValues(e,t)}function translateAggregates(n,e){const t=n,a=[],c={};if(t.variables=t.variables&&t.variables.map(o=>mapAggregate(o,c)),t.having=t.having&&t.having.map(o=>mapAggregate(o,c)),t.order=t.order&&t.order.map(o=>mapAggregate(o,c)),t.group||Object.keys(c).length>0){const o=Object.keys(c).map(u=>translateBoundAggregate$1(c[u],factory$1.createTerm(u))),i=[];if(t.group)for(const u of t.group)if(util_1$1.default.isSimpleTerm(u.expression))i.push(u.expression);else{const d="variable"in u?u.variable:generateFreshVar();e=factory$1.createExtend(e,d,translateExpression$1(u.expression)),i.push(d)}e=factory$1.createGroup(e,i,o)}if(t.having)for(let o of t.having)e=factory$1.createFilter(e,translateExpression$1(o));n.values&&(e=factory$1.createJoin([e,translateInlineData(n)]));let l=[];if(n.queryType==="SELECT"||n.queryType==="DESCRIBE")if(n.variables.some(o=>o&&util_1$1.default.isWildcard(o)))l=Object.values(inScopeVariables(n)).sort((o,i)=>o.value.localeCompare(i.value));else for(let o of n.variables)isVariable(o)||!("variable"in o)?l.push(o):o.variable&&(l.push(o.variable),a.push(o));for(let o of a)e=factory$1.createExtend(e,o.variable,translateExpression$1(o.expression));return t.order&&(e=factory$1.createOrderBy(e,t.order.map(o=>{let i=translateExpression$1(o.expression);return o.descending&&(i=factory$1.createOperatorExpression("desc",[i])),i}))),n.queryType==="SELECT"&&(e=factory$1.createProject(e,l)),t.distinct&&(e=factory$1.createDistinct(e)),t.reduced&&(e=factory$1.createReduced(e)),n.queryType==="CONSTRUCT"?e=factory$1.createConstruct(e,(n.template||[]).map(translateQuad)):n.queryType==="ASK"?e=factory$1.createAsk(e):n.queryType==="DESCRIBE"&&(e=factory$1.createDescribe(e,l)),(t.offset||t.limit)&&(e=factory$1.createSlice(e,t.offset||0,t.limit)),t.from&&(e=factory$1.createFrom(e,t.from.default,t.from.named)),e}function mapAggregate(n,e){if("type"in n&&n.type==="aggregate"){let t=!1,a;for(let c of Object.keys(e))if(equal(e[c],n)){a=factory$1.createTerm(c),t=!0;break}return t||(a=generateFreshVar(),e[(0,rdf_string_1$3.termToString)(a)]=n),a}return"expression"in n&&n.expression?{...n,expression:mapAggregate(n.expression,e)}:"args"in n&&n.args?{...n,args:n.args.map(t=>mapAggregate(t,e))}:n}function translateBoundAggregate$1(n,e){if(n.type!=="aggregate"||!n.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(n)}`);const t=translateExpression$1(n);return t.variable=e,t}function translateUpdate(n){return n.updates.length===1?translateSingleUpdate(n.updates[0]):factory$1.createCompositeUpdate(n.updates.map(translateSingleUpdate))}function translateSingleUpdate(n){if("type"in n){if(n.type==="load")return translateUpdateGraphLoad(n);if(n.type==="clear"||n.type==="create"||n.type==="drop")return translateUpdateGraph(n);if(n.type==="add"||n.type==="copy"||n.type==="move")return translateUpdateGraphShortcut$1(n)}else if(n.updateType==="insertdelete"||n.updateType==="deletewhere"||n.updateType==="delete"||n.updateType==="insert")return translateInsertDelete(n);throw new Error(`Unknown update type ${JSON.stringify(n)}`)}function translateInsertDelete(n){if(!useQuads)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let e=[],t=[],a;if(n.delete&&(e=util_1$1.default.flatten(n.delete.map(c=>translateUpdateTriplesBlock(c,n.graph)))),n.insert&&(t=util_1$1.default.flatten(n.insert.map(c=>translateUpdateTriplesBlock(c,n.graph)))),n.where&&n.where.length>0){a=translateGroupGraphPattern({type:"group",patterns:n.where});const c=n.using;c?a=factory$1.createFrom(a,c.default,c.named):n.graph&&(a=recurseGraph(a,n.graph))}else n.updateType==="deletewhere"&&e.length>0&&(a=factory$1.createBgp(e));return factory$1.createDeleteInsert(e.length>0?e:void 0,t.length>0?t:void 0,a)}function translateUpdateTriplesBlock(n,e){let t=e;n.type==="graph"&&(t=n.name);let a=n.triples;return t&&(a=a.map(c=>Object.assign(c,{graph:t}))),a.map(translateQuad)}function translateUpdateGraph(n){let e;switch(util_1$1.default.isSimpleTerm(n.graph)?e=n.graph:n.graph.all?e="ALL":n.graph.default?e="DEFAULT":n.graph.named?e="NAMED":e=n.graph.name,n.type){case"clear":return factory$1.createClear(e,n.silent);case"create":return factory$1.createCreate(e,n.silent);case"drop":return factory$1.createDrop(e,n.silent)}}function translateUpdateGraphLoad(n){return factory$1.createLoad(n.source,n.destination,n.silent)}function translateUpdateGraphShortcut$1(n){const e=n.source.default?"DEFAULT":n.source.name,t=n.destination.default?"DEFAULT":n.destination.name;switch(n.type){case"copy":return factory$1.createCopy(e,t,n.silent);case"move":return factory$1.createMove(e,t,n.silent);case"add":return factory$1.createAdd(e,t,n.silent)}}function translateBlankNodesToVariables(n){const e={},t=Array.from(variables).reduce((c,l)=>(c[l]=!0,c),{});return util_1$1.default.mapOperation(n,{[Algebra$1.types.DELETE_INSERT]:c=>({result:c,recurse:!1}),[Algebra$1.types.PATH]:(c,l)=>({result:l.createPath(a(c.subject),c.predicate,a(c.object),a(c.graph)),recurse:!1}),[Algebra$1.types.PATTERN]:(c,l)=>({result:l.createPattern(a(c.subject),a(c.predicate),a(c.object),a(c.graph)),recurse:!1}),[Algebra$1.types.CONSTRUCT]:c=>({result:factory$1.createConstruct(translateBlankNodesToVariables(c.input),c.template),recurse:!1})});function a(c){if(c.termType==="BlankNode"){let l=e[c.value];return l||(l=util_1$1.default.createUniqueVariable(c.value,t,factory$1.dataFactory),t[l.value]=!0,e[c.value]=l),l}return c}}var sparql={},rdfIsomorphic={},RdfIsomorphic={},hash={},utils$9={},minimalisticAssert=assert$5;function assert$5(n,e){if(!n)throw new Error(e||"Assertion failed")}assert$5.equal=function(e,t,a){if(e!=t)throw new Error(a||"Assertion failed: "+e+" != "+t)};var inherits_browserExports={},inherits_browser={get exports(){return inherits_browserExports},set exports(n){inherits_browserExports=n}};typeof Object.create=="function"?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var a=function(){};a.prototype=t.prototype,e.prototype=new a,e.prototype.constructor=e}};var assert$4=minimalisticAssert,inherits=inherits_browserExports;utils$9.inherits=inherits;function isSurrogatePair(n,e){return(n.charCodeAt(e)&64512)!==55296||e<0||e+1>=n.length?!1:(n.charCodeAt(e+1)&64512)===56320}function toArray(n,e){if(Array.isArray(n))return n.slice();if(!n)return[];var t=[];if(typeof n=="string")if(e){if(e==="hex")for(n=n.replace(/[^a-z0-9]+/ig,""),n.length%2!==0&&(n="0"+n),c=0;c<n.length;c+=2)t.push(parseInt(n[c]+n[c+1],16))}else for(var a=0,c=0;c<n.length;c++){var l=n.charCodeAt(c);l<128?t[a++]=l:l<2048?(t[a++]=l>>6|192,t[a++]=l&63|128):isSurrogatePair(n,c)?(l=65536+((l&1023)<<10)+(n.charCodeAt(++c)&1023),t[a++]=l>>18|240,t[a++]=l>>12&63|128,t[a++]=l>>6&63|128,t[a++]=l&63|128):(t[a++]=l>>12|224,t[a++]=l>>6&63|128,t[a++]=l&63|128)}else for(c=0;c<n.length;c++)t[c]=n[c]|0;return t}utils$9.toArray=toArray;function toHex(n){for(var e="",t=0;t<n.length;t++)e+=zero2(n[t].toString(16));return e}utils$9.toHex=toHex;function htonl(n){var e=n>>>24|n>>>8&65280|n<<8&16711680|(n&255)<<24;return e>>>0}utils$9.htonl=htonl;function toHex32(n,e){for(var t="",a=0;a<n.length;a++){var c=n[a];e==="little"&&(c=htonl(c)),t+=zero8(c.toString(16))}return t}utils$9.toHex32=toHex32;function zero2(n){return n.length===1?"0"+n:n}utils$9.zero2=zero2;function zero8(n){return n.length===7?"0"+n:n.length===6?"00"+n:n.length===5?"000"+n:n.length===4?"0000"+n:n.length===3?"00000"+n:n.length===2?"000000"+n:n.length===1?"0000000"+n:n}utils$9.zero8=zero8;function join32(n,e,t,a){var c=t-e;assert$4(c%4===0);for(var l=new Array(c/4),o=0,i=e;o<l.length;o++,i+=4){var u;a==="big"?u=n[i]<<24|n[i+1]<<16|n[i+2]<<8|n[i+3]:u=n[i+3]<<24|n[i+2]<<16|n[i+1]<<8|n[i],l[o]=u>>>0}return l}utils$9.join32=join32;function split32(n,e){for(var t=new Array(n.length*4),a=0,c=0;a<n.length;a++,c+=4){var l=n[a];e==="big"?(t[c]=l>>>24,t[c+1]=l>>>16&255,t[c+2]=l>>>8&255,t[c+3]=l&255):(t[c+3]=l>>>24,t[c+2]=l>>>16&255,t[c+1]=l>>>8&255,t[c]=l&255)}return t}utils$9.split32=split32;function rotr32$1(n,e){return n>>>e|n<<32-e}utils$9.rotr32=rotr32$1;function rotl32$2(n,e){return n<<e|n>>>32-e}utils$9.rotl32=rotl32$2;function sum32$3(n,e){return n+e>>>0}utils$9.sum32=sum32$3;function sum32_3$1(n,e,t){return n+e+t>>>0}utils$9.sum32_3=sum32_3$1;function sum32_4$2(n,e,t,a){return n+e+t+a>>>0}utils$9.sum32_4=sum32_4$2;function sum32_5$2(n,e,t,a,c){return n+e+t+a+c>>>0}utils$9.sum32_5=sum32_5$2;function sum64$1(n,e,t,a){var c=n[e],l=n[e+1],o=a+l>>>0,i=(o<a?1:0)+t+c;n[e]=i>>>0,n[e+1]=o}utils$9.sum64=sum64$1;function sum64_hi$1(n,e,t,a){var c=e+a>>>0,l=(c<e?1:0)+n+t;return l>>>0}utils$9.sum64_hi=sum64_hi$1;function sum64_lo$1(n,e,t,a){var c=e+a;return c>>>0}utils$9.sum64_lo=sum64_lo$1;function sum64_4_hi$1(n,e,t,a,c,l,o,i){var u=0,d=e;d=d+a>>>0,u+=d<e?1:0,d=d+l>>>0,u+=d<l?1:0,d=d+i>>>0,u+=d<i?1:0;var m=n+t+c+o+u;return m>>>0}utils$9.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(n,e,t,a,c,l,o,i){var u=e+a+l+i;return u>>>0}utils$9.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(n,e,t,a,c,l,o,i,u,d){var m=0,y=e;y=y+a>>>0,m+=y<e?1:0,y=y+l>>>0,m+=y<l?1:0,y=y+i>>>0,m+=y<i?1:0,y=y+d>>>0,m+=y<d?1:0;var p=n+t+c+o+u+m;return p>>>0}utils$9.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(n,e,t,a,c,l,o,i,u,d){var m=e+a+l+i+d;return m>>>0}utils$9.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(n,e,t){var a=e<<32-t|n>>>t;return a>>>0}utils$9.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(n,e,t){var a=n<<32-t|e>>>t;return a>>>0}utils$9.rotr64_lo=rotr64_lo$1;function shr64_hi$1(n,e,t){return n>>>t}utils$9.shr64_hi=shr64_hi$1;function shr64_lo$1(n,e,t){var a=n<<32-t|e>>>t;return a>>>0}utils$9.shr64_lo=shr64_lo$1;var common$5={},utils$8=utils$9,assert$3=minimalisticAssert;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$5.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,t){if(e=utils$8.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var a=e.length%this._delta8;this.pending=e.slice(e.length-a,e.length),this.pending.length===0&&(this.pending=null),e=utils$8.join32(e,0,e.length-a,this.endian);for(var c=0;c<e.length;c+=this._delta32)this._update(e,c,c+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$3(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,a=t-(e+this.padLength)%t,c=new Array(a+this.padLength);c[0]=128;for(var l=1;l<a;l++)c[l]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)c[l++]=0;c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=e>>>24&255,c[l++]=e>>>16&255,c[l++]=e>>>8&255,c[l++]=e&255}else for(c[l++]=e&255,c[l++]=e>>>8&255,c[l++]=e>>>16&255,c[l++]=e>>>24&255,c[l++]=0,c[l++]=0,c[l++]=0,c[l++]=0,o=8;o<this.padLength;o++)c[l++]=0;return c};var sha={},common$4={},utils$7=utils$9,rotr32=utils$7.rotr32;function ft_1$1(n,e,t,a){if(n===0)return ch32$1(e,t,a);if(n===1||n===3)return p32(e,t,a);if(n===2)return maj32$1(e,t,a)}common$4.ft_1=ft_1$1;function ch32$1(n,e,t){return n&e^~n&t}common$4.ch32=ch32$1;function maj32$1(n,e,t){return n&e^n&t^e&t}common$4.maj32=maj32$1;function p32(n,e,t){return n^e^t}common$4.p32=p32;function s0_256$1(n){return rotr32(n,2)^rotr32(n,13)^rotr32(n,22)}common$4.s0_256=s0_256$1;function s1_256$1(n){return rotr32(n,6)^rotr32(n,11)^rotr32(n,25)}common$4.s1_256=s1_256$1;function g0_256$1(n){return rotr32(n,7)^rotr32(n,18)^n>>>3}common$4.g0_256=g0_256$1;function g1_256$1(n){return rotr32(n,17)^rotr32(n,19)^n>>>10}common$4.g1_256=g1_256$1;var utils$6=utils$9,common$3=common$5,shaCommon$1=common$4,rotl32$1=utils$6.rotl32,sum32$2=utils$6.sum32,sum32_5$1=utils$6.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$3.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$6.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,t){for(var a=this.W,c=0;c<16;c++)a[c]=e[t+c];for(;c<a.length;c++)a[c]=rotl32$1(a[c-3]^a[c-8]^a[c-14]^a[c-16],1);var l=this.h[0],o=this.h[1],i=this.h[2],u=this.h[3],d=this.h[4];for(c=0;c<a.length;c++){var m=~~(c/20),y=sum32_5$1(rotl32$1(l,5),ft_1(m,o,i,u),d,a[c],sha1_K[m]);d=u,u=i,i=rotl32$1(o,30),o=l,l=y}this.h[0]=sum32$2(this.h[0],l),this.h[1]=sum32$2(this.h[1],o),this.h[2]=sum32$2(this.h[2],i),this.h[3]=sum32$2(this.h[3],u),this.h[4]=sum32$2(this.h[4],d)};SHA1.prototype._digest=function(e){return e==="hex"?utils$6.toHex32(this.h,"big"):utils$6.split32(this.h,"big")};var utils$5=utils$9,common$2=common$5,shaCommon=common$4,assert$2=minimalisticAssert,sum32$1=utils$5.sum32,sum32_4$1=utils$5.sum32_4,sum32_5=utils$5.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$2.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$5.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(e,t){for(var a=this.W,c=0;c<16;c++)a[c]=e[t+c];for(;c<a.length;c++)a[c]=sum32_4$1(g1_256(a[c-2]),a[c-7],g0_256(a[c-15]),a[c-16]);var l=this.h[0],o=this.h[1],i=this.h[2],u=this.h[3],d=this.h[4],m=this.h[5],y=this.h[6],p=this.h[7];for(assert$2(this.k.length===a.length),c=0;c<a.length;c++){var T=sum32_5(p,s1_256(d),ch32(d,m,y),this.k[c],a[c]),_=sum32$1(s0_256(l),maj32(l,o,i));p=y,y=m,m=d,d=sum32$1(u,T),u=i,i=o,o=l,l=sum32$1(T,_)}this.h[0]=sum32$1(this.h[0],l),this.h[1]=sum32$1(this.h[1],o),this.h[2]=sum32$1(this.h[2],i),this.h[3]=sum32$1(this.h[3],u),this.h[4]=sum32$1(this.h[4],d),this.h[5]=sum32$1(this.h[5],m),this.h[6]=sum32$1(this.h[6],y),this.h[7]=sum32$1(this.h[7],p)};SHA256$1.prototype._digest=function(e){return e==="hex"?utils$5.toHex32(this.h,"big"):utils$5.split32(this.h,"big")};var utils$4=utils$9,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$4.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(e){return e==="hex"?utils$4.toHex32(this.h.slice(0,7),"big"):utils$4.split32(this.h.slice(0,7),"big")};var utils$3=utils$9,common$1=common$5,assert$1=minimalisticAssert,rotr64_hi=utils$3.rotr64_hi,rotr64_lo=utils$3.rotr64_lo,shr64_hi=utils$3.shr64_hi,shr64_lo=utils$3.shr64_lo,sum64=utils$3.sum64,sum64_hi=utils$3.sum64_hi,sum64_lo=utils$3.sum64_lo,sum64_4_hi=utils$3.sum64_4_hi,sum64_4_lo=utils$3.sum64_4_lo,sum64_5_hi=utils$3.sum64_5_hi,sum64_5_lo=utils$3.sum64_5_lo,BlockHash$1=common$1.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$3.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(e,t){for(var a=this.W,c=0;c<32;c++)a[c]=e[t+c];for(;c<a.length;c+=2){var l=g1_512_hi(a[c-4],a[c-3]),o=g1_512_lo(a[c-4],a[c-3]),i=a[c-14],u=a[c-13],d=g0_512_hi(a[c-30],a[c-29]),m=g0_512_lo(a[c-30],a[c-29]),y=a[c-32],p=a[c-31];a[c]=sum64_4_hi(l,o,i,u,d,m,y,p),a[c+1]=sum64_4_lo(l,o,i,u,d,m,y,p)}};SHA512$1.prototype._update=function(e,t){this._prepareBlock(e,t);var a=this.W,c=this.h[0],l=this.h[1],o=this.h[2],i=this.h[3],u=this.h[4],d=this.h[5],m=this.h[6],y=this.h[7],p=this.h[8],T=this.h[9],_=this.h[10],w=this.h[11],S=this.h[12],I=this.h[13],j=this.h[14],x=this.h[15];assert$1(this.k.length===a.length);for(var v=0;v<a.length;v+=2){var O=j,N=x,D=s1_512_hi(p,T),G=s1_512_lo(p,T),W=ch64_hi(p,T,_,w,S),U=ch64_lo(p,T,_,w,S,I),Q=this.k[v],Z=this.k[v+1],L=a[v],M=a[v+1],V=sum64_5_hi(O,N,D,G,W,U,Q,Z,L,M),H=sum64_5_lo(O,N,D,G,W,U,Q,Z,L,M);O=s0_512_hi(c,l),N=s0_512_lo(c,l),D=maj64_hi(c,l,o,i,u),G=maj64_lo(c,l,o,i,u,d);var J=sum64_hi(O,N,D,G),ce=sum64_lo(O,N,D,G);j=S,x=I,S=_,I=w,_=p,w=T,p=sum64_hi(m,y,V,H),T=sum64_lo(y,y,V,H),m=u,y=d,u=o,d=i,o=c,i=l,c=sum64_hi(V,H,J,ce),l=sum64_lo(V,H,J,ce)}sum64(this.h,0,c,l),sum64(this.h,2,o,i),sum64(this.h,4,u,d),sum64(this.h,6,m,y),sum64(this.h,8,p,T),sum64(this.h,10,_,w),sum64(this.h,12,S,I),sum64(this.h,14,j,x)};SHA512$1.prototype._digest=function(e){return e==="hex"?utils$3.toHex32(this.h,"big"):utils$3.split32(this.h,"big")};function ch64_hi(n,e,t,a,c){var l=n&t^~n&c;return l<0&&(l+=4294967296),l}function ch64_lo(n,e,t,a,c,l){var o=e&a^~e&l;return o<0&&(o+=4294967296),o}function maj64_hi(n,e,t,a,c){var l=n&t^n&c^t&c;return l<0&&(l+=4294967296),l}function maj64_lo(n,e,t,a,c,l){var o=e&a^e&l^a&l;return o<0&&(o+=4294967296),o}function s0_512_hi(n,e){var t=rotr64_hi(n,e,28),a=rotr64_hi(e,n,2),c=rotr64_hi(e,n,7),l=t^a^c;return l<0&&(l+=4294967296),l}function s0_512_lo(n,e){var t=rotr64_lo(n,e,28),a=rotr64_lo(e,n,2),c=rotr64_lo(e,n,7),l=t^a^c;return l<0&&(l+=4294967296),l}function s1_512_hi(n,e){var t=rotr64_hi(n,e,14),a=rotr64_hi(n,e,18),c=rotr64_hi(e,n,9),l=t^a^c;return l<0&&(l+=4294967296),l}function s1_512_lo(n,e){var t=rotr64_lo(n,e,14),a=rotr64_lo(n,e,18),c=rotr64_lo(e,n,9),l=t^a^c;return l<0&&(l+=4294967296),l}function g0_512_hi(n,e){var t=rotr64_hi(n,e,1),a=rotr64_hi(n,e,8),c=shr64_hi(n,e,7),l=t^a^c;return l<0&&(l+=4294967296),l}function g0_512_lo(n,e){var t=rotr64_lo(n,e,1),a=rotr64_lo(n,e,8),c=shr64_lo(n,e,7),l=t^a^c;return l<0&&(l+=4294967296),l}function g1_512_hi(n,e){var t=rotr64_hi(n,e,19),a=rotr64_hi(e,n,29),c=shr64_hi(n,e,6),l=t^a^c;return l<0&&(l+=4294967296),l}function g1_512_lo(n,e){var t=rotr64_lo(n,e,19),a=rotr64_lo(e,n,29),c=shr64_lo(n,e,6),l=t^a^c;return l<0&&(l+=4294967296),l}var utils$2=utils$9,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$2.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(e){return e==="hex"?utils$2.toHex32(this.h.slice(0,12),"big"):utils$2.split32(this.h.slice(0,12),"big")};sha.sha1=_1;sha.sha224=_224;sha.sha256=_256;sha.sha384=_384;sha.sha512=_512;var ripemd={},utils$1=utils$9,common=common$5,rotl32=utils$1.rotl32,sum32=utils$1.sum32,sum32_3=utils$1.sum32_3,sum32_4=utils$1.sum32_4,BlockHash=common.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$1.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,t){for(var a=this.h[0],c=this.h[1],l=this.h[2],o=this.h[3],i=this.h[4],u=a,d=c,m=l,y=o,p=i,T=0;T<80;T++){var _=sum32(rotl32(sum32_4(a,f(T,c,l,o),e[r[T]+t],K(T)),s[T]),i);a=i,i=o,o=rotl32(l,10),l=c,c=_,_=sum32(rotl32(sum32_4(u,f(79-T,d,m,y),e[rh[T]+t],Kh(T)),sh[T]),p),u=p,p=y,y=rotl32(m,10),m=d,d=_}_=sum32_3(this.h[1],l,y),this.h[1]=sum32_3(this.h[2],o,p),this.h[2]=sum32_3(this.h[3],i,u),this.h[3]=sum32_3(this.h[4],a,d),this.h[4]=sum32_3(this.h[0],c,m),this.h[0]=_};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$1.toHex32(this.h,"little"):utils$1.split32(this.h,"little")};function f(n,e,t,a){return n<=15?e^t^a:n<=31?e&t|~e&a:n<=47?(e|~t)^a:n<=63?e&a|t&~a:e^(t|~a)}function K(n){return n<=15?0:n<=31?1518500249:n<=47?1859775393:n<=63?2400959708:2840853838}function Kh(n){return n<=15?1352829926:n<=31?1548603684:n<=47?1836072691:n<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils=utils$9,assert=minimalisticAssert;function Hmac(n,e,t){if(!(this instanceof Hmac))return new Hmac(n,e,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(utils.toArray(e,t))}var hmac=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,t){return this.inner.update(e,t),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(n){var e=n;e.utils=utils$9,e.common=common$5,e.sha=sha,e.ripemd=ripemd,e.hmac=hmac,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash);var rdfTerms={},QuadTermUtil={};Object.defineProperty(QuadTermUtil,"__esModule",{value:!0});QuadTermUtil.matchPatternMappings=QuadTermUtil.matchPatternComplete=QuadTermUtil.matchPattern=QuadTermUtil.matchTerm=QuadTermUtil.someTerms=QuadTermUtil.everyTerms=QuadTermUtil.reduceTerms=QuadTermUtil.mapTerms=QuadTermUtil.filterQuadTermNames=QuadTermUtil.filterTerms=QuadTermUtil.forEachTerms=QuadTermUtil.collectNamedTerms=QuadTermUtil.getNamedTerms=QuadTermUtil.getTermsNested=QuadTermUtil.getTerms=QuadTermUtil.TRIPLE_TERM_NAMES=QuadTermUtil.QUAD_TERM_NAMES=void 0;const rdf_data_factory_1=rdfDataFactory,DF=new rdf_data_factory_1.DataFactory;QuadTermUtil.QUAD_TERM_NAMES=["subject","predicate","object","graph"];QuadTermUtil.TRIPLE_TERM_NAMES=["subject","predicate","object"];function getTerms(n,e){return e&&n.graph.termType==="DefaultGraph"?[n.subject,n.predicate,n.object]:[n.subject,n.predicate,n.object,n.graph]}QuadTermUtil.getTerms=getTerms;function getTermsNested(n,e){const t=[];for(const a of getTerms(n,e))a.termType==="Quad"?getTermsNested(a,e).forEach(c=>t.push(c)):t.push(a);return t}QuadTermUtil.getTermsNested=getTermsNested;function getNamedTerms(n){return[{key:"subject",value:n.subject},{key:"predicate",value:n.predicate},{key:"object",value:n.object},{key:"graph",value:n.graph}]}QuadTermUtil.getNamedTerms=getNamedTerms;function collectNamedTerms(n,e,t){const a={};return n.forEach(c=>a[c.key]=c.value),e&&(a.subject=a.subject||e("subject"),a.predicate=a.predicate||e("predicate"),a.object=a.object||e("object"),a.graph=a.graph||e("graph")),(t||DF).quad(a.subject,a.predicate,a.object,a.graph)}QuadTermUtil.collectNamedTerms=collectNamedTerms;function forEachTerms(n,e){e(n.subject,"subject"),e(n.predicate,"predicate"),e(n.object,"object"),e(n.graph,"graph")}QuadTermUtil.forEachTerms=forEachTerms;function filterTerms(n,e){const t=[];return e(n.subject,"subject")&&t.push(n.subject),e(n.predicate,"predicate")&&t.push(n.predicate),e(n.object,"object")&&t.push(n.object),e(n.graph,"graph")&&t.push(n.graph),t}QuadTermUtil.filterTerms=filterTerms;function filterQuadTermNames(n,e){const t=[];return e(n.subject,"subject")&&t.push("subject"),e(n.predicate,"predicate")&&t.push("predicate"),e(n.object,"object")&&t.push("object"),e(n.graph,"graph")&&t.push("graph"),t}QuadTermUtil.filterQuadTermNames=filterQuadTermNames;function mapTerms(n,e,t){return(t||DF).quad(e(n.subject,"subject"),e(n.predicate,"predicate"),e(n.object,"object"),e(n.graph,"graph"))}QuadTermUtil.mapTerms=mapTerms;function reduceTerms(n,e,t){let a=t;return a=e(a,n.subject,"subject"),a=e(a,n.predicate,"predicate"),a=e(a,n.object,"object"),e(a,n.graph,"graph")}QuadTermUtil.reduceTerms=reduceTerms;function everyTerms(n,e){return e(n.subject,"subject")&&e(n.predicate,"predicate")&&e(n.object,"object")&&e(n.graph,"graph")}QuadTermUtil.everyTerms=everyTerms;function someTerms(n,e){return e(n.subject,"subject")||e(n.predicate,"predicate")||e(n.object,"object")||e(n.graph,"graph")}QuadTermUtil.someTerms=someTerms;function matchTerm(n,e){return!e||e.termType==="Variable"||e.termType==="Quad"&&n.termType==="Quad"&&matchPatternComplete(n,e)||e.equals(n)}QuadTermUtil.matchTerm=matchTerm;function matchPattern(n,e,t,a,c){return matchTerm(n.subject,e)&&matchTerm(n.predicate,t)&&matchTerm(n.object,a)&&matchTerm(n.graph,c)}QuadTermUtil.matchPattern=matchPattern;function matchPatternComplete(n,e){return matchPattern(n,e.subject,e.predicate,e.object,e.graph)}QuadTermUtil.matchPatternComplete=matchPatternComplete;function matchPatternMappings(n,e,t={}){const a={};function c(l,o){return everyTerms(l,(i,u)=>{var d,m;const y=o[u];switch(i.termType){case"Variable":return t.skipVarMapping&&y.termType==="Variable"||((m=(d=a[i.value])===null||d===void 0?void 0:d.equals(y))!==null&&m!==void 0?m:(a[i.value]=y,!0));case"Quad":return y.termType==="Quad"&&c(i,y);default:return i.equals(y)}})}return c(e,n)&&(t.returnMappings?a:!0)}QuadTermUtil.matchPatternMappings=matchPatternMappings;var TermUtil={};Object.defineProperty(TermUtil,"__esModule",{value:!0});TermUtil.getQuads=TermUtil.getDefaultGraphs=TermUtil.getVariables=TermUtil.getLiterals=TermUtil.getBlankNodes=TermUtil.getNamedNodes=TermUtil.getTermsOfType=TermUtil.uniqTerms=TermUtil.TERM_TYPES=void 0;const rdf_string_1$2=rdfString;TermUtil.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function uniqTerms(n){const e={};return n.filter(t=>{const a=rdf_string_1$2.termToString(t);return!(a in e)&&(e[a]=!0)})}TermUtil.uniqTerms=uniqTerms;function getTermsOfType(n,e){return n.filter(t=>t.termType===e)}TermUtil.getTermsOfType=getTermsOfType;function getNamedNodes(n){return getTermsOfType(n,"NamedNode")}TermUtil.getNamedNodes=getNamedNodes;function getBlankNodes(n){return getTermsOfType(n,"BlankNode")}TermUtil.getBlankNodes=getBlankNodes;function getLiterals(n){return getTermsOfType(n,"Literal")}TermUtil.getLiterals=getLiterals;function getVariables(n){return getTermsOfType(n,"Variable")}TermUtil.getVariables=getVariables;function getDefaultGraphs(n){return getTermsOfType(n,"DefaultGraph")}TermUtil.getDefaultGraphs=getDefaultGraphs;function getQuads(n){return getTermsOfType(n,"Quad")}TermUtil.getQuads=getQuads;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,l,o){o===void 0&&(o=l),Object.defineProperty(a,o,{enumerable:!0,get:function(){return c[l]}})}:function(a,c,l,o){o===void 0&&(o=l),a[o]=c[l]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(a,c){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,a,l)};Object.defineProperty(n,"__esModule",{value:!0}),t(QuadTermUtil,n),t(TermUtil,n)})(rdfTerms);Object.defineProperty(RdfIsomorphic,"__esModule",{value:!0});RdfIsomorphic.isTermGrounded=RdfIsomorphic.termToSignature=RdfIsomorphic.quadToSignature=RdfIsomorphic.sha1hex=RdfIsomorphic.hashTerm=RdfIsomorphic.hashTerms=RdfIsomorphic.getGraphBlankNodes=RdfIsomorphic.uniqGraph=RdfIsomorphic.deindexGraph=RdfIsomorphic.indexGraph=RdfIsomorphic.getQuadsWithoutBlankNodes=RdfIsomorphic.getQuadsWithBlankNodes=RdfIsomorphic.hasValue=RdfIsomorphic.hashValues=RdfIsomorphic.getBijectionInner=RdfIsomorphic.getBijection=RdfIsomorphic.isomorphic=void 0;const hash_js_1=hash,rdf_string_1$1=rdfString,rdf_terms_1=rdfTerms;function isomorphic(n,e){return!!getBijection(n,e)}RdfIsomorphic.isomorphic=isomorphic;function getBijection(n,e){const t=indexGraph(getQuadsWithoutBlankNodes(n)),a=indexGraph(getQuadsWithoutBlankNodes(e));if(Object.keys(t).length!==Object.keys(a).length)return null;for(const u in t)if(t[u]!==a[u])return null;const c=uniqGraph(getQuadsWithBlankNodes(n)),l=uniqGraph(getQuadsWithBlankNodes(e)),o=getGraphBlankNodes(n),i=getGraphBlankNodes(e);return getBijectionInner(c,l,o,i)}RdfIsomorphic.getBijection=getBijection;function getBijectionInner(n,e,t,a,c,l){c||(c={}),l||(l={});const[o,i]=hashTerms(n,t,c),[u,d]=hashTerms(e,a,l);if(Object.keys(o).length!==Object.keys(u).length)return null;for(const y in o)if(!hasValue(u,o[y]))return null;let m={};for(const y of t){const p=rdf_string_1$1.termToString(y),T=i[p];for(const _ in d)if(d[_]===T){m[p]=_,delete d[_];break}}if(!arraysEqual(Object.keys(m).sort(),t.map(rdf_string_1$1.termToString).sort())||!arraysEqual(hashValues(m).sort(),a.map(rdf_string_1$1.termToString).sort())){m=null;for(const y of t){const p=rdf_string_1$1.termToString(y);if(!o[p])for(const T of a){const _=rdf_string_1$1.termToString(T);if(!u[_]&&i[p]===d[_]){const w=sha1hex(p);m=getBijectionInner(n,e,t,a,Object.assign(Object.assign({},o),{[p]:w}),Object.assign(Object.assign({},u),{[_]:w}))}}}}return m}RdfIsomorphic.getBijectionInner=getBijectionInner;function arraysEqual(n,e){if(n.length!==e.length)return!1;for(let t=n.length;t--;)if(n[t]!==e[t])return!1;return!0}function hashValues(n){const e=[];for(const t in n)e.push(n[t]);return e}RdfIsomorphic.hashValues=hashValues;function hasValue(n,e){for(const t in n)if(n[t]===e)return!0;return!1}RdfIsomorphic.hasValue=hasValue;function getQuadsWithBlankNodes(n){return n.filter(e=>rdf_terms_1.someTerms(e,t=>t.termType==="BlankNode"||t.termType==="Quad"&&rdf_terms_1.getTermsNested(t).some(a=>a.termType==="BlankNode")))}RdfIsomorphic.getQuadsWithBlankNodes=getQuadsWithBlankNodes;function getQuadsWithoutBlankNodes(n){return n.filter(e=>rdf_terms_1.everyTerms(e,t=>t.termType!=="BlankNode"&&!(t.termType==="Quad"&&rdf_terms_1.getTermsNested(t).some(a=>a.termType==="BlankNode"))))}RdfIsomorphic.getQuadsWithoutBlankNodes=getQuadsWithoutBlankNodes;function indexGraph(n){const e={};for(const t of n)e[JSON.stringify(rdf_string_1$1.quadToStringQuad(t))]=!0;return e}RdfIsomorphic.indexGraph=indexGraph;function deindexGraph(n){return Object.keys(n).map(e=>rdf_string_1$1.stringQuadToQuad(JSON.parse(e)))}RdfIsomorphic.deindexGraph=deindexGraph;function uniqGraph(n){return deindexGraph(indexGraph(n))}RdfIsomorphic.uniqGraph=uniqGraph;function getGraphBlankNodes(n){return rdf_terms_1.uniqTerms(n.map(e=>rdf_terms_1.getBlankNodes(rdf_terms_1.getTermsNested(e))).reduce((e,t)=>e.concat(t),[]))}RdfIsomorphic.getGraphBlankNodes=getGraphBlankNodes;function hashTerms(n,e,t){const a=Object.assign({},t),c={};let l=!0;for(;l;){const o=Object.keys(a).length;for(const u of e){const d=rdf_string_1$1.termToString(u);if(!a[d]){const[m,y]=hashTerm(u,n,a);m&&(a[d]=y),c[d]=y}}const i={};for(const u in c){const d=c[u];i[d]===void 0?i[d]=u:i[d]=!1}for(const u in i){const d=i[u];d&&(a[d]=u)}l=o!==Object.keys(a).length}return[a,c]}RdfIsomorphic.hashTerms=hashTerms;function hashTerm(n,e,t){const a=[];let c=!0;for(const o of e){const i=rdf_terms_1.getTermsNested(o);if(i.some(u=>u.equals(n))){a.push(quadToSignature(o,t,n));for(const u of i)!isTermGrounded(u,t)&&!u.equals(n)&&(c=!1)}}const l=sha1hex(a.sort().join(""));return[c,l]}RdfIsomorphic.hashTerm=hashTerm;function sha1hex(n){return hash_js_1.sha1().update(n).digest("hex")}RdfIsomorphic.sha1hex=sha1hex;function quadToSignature(n,e,t){return rdf_terms_1.getTerms(n).map(a=>termToSignature(a,e,t)).join("|")}RdfIsomorphic.quadToSignature=quadToSignature;function termToSignature(n,e,t){return n.equals(t)?"@self":n.termType==="BlankNode"?e[rdf_string_1$1.termToString(n)]||"@blank":n.termType==="Quad"?`<${quadToSignature(n,e,t)}>`:rdf_string_1$1.termToString(n)}RdfIsomorphic.termToSignature=termToSignature;function isTermGrounded(n,e){return n.termType!=="BlankNode"&&!(n.termType==="Quad"&&rdf_terms_1.getTermsNested(n).some(t=>!isTermGrounded(t,e)))||!!e[rdf_string_1$1.termToString(n)]}RdfIsomorphic.isTermGrounded=isTermGrounded;(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(a,c,l,o){o===void 0&&(o=l),Object.defineProperty(a,o,{enumerable:!0,get:function(){return c[l]}})}:function(a,c,l,o){o===void 0&&(o=l),a[o]=c[l]}),t=commonjsGlobal&&commonjsGlobal.__exportStar||function(a,c){for(var l in a)l!=="default"&&!Object.prototype.hasOwnProperty.call(c,l)&&e(c,a,l)};Object.defineProperty(n,"__esModule",{value:!0}),t(RdfIsomorphic,n)})(rdfIsomorphic);var __createBinding=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(n,e,t,a){a===void 0&&(a=t);var c=Object.getOwnPropertyDescriptor(e,t);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[t]}}),Object.defineProperty(n,a,c)}:function(n,e,t,a){a===void 0&&(a=t),n[a]=e[t]}),__setModuleDefault=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(n,e){Object.defineProperty(n,"default",{enumerable:!0,value:e})}:function(n,e){n.default=e}),__importStar=commonjsGlobal&&commonjsGlobal.__importStar||function(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)t!=="default"&&Object.prototype.hasOwnProperty.call(n,t)&&__createBinding(e,n,t);return __setModuleDefault(e,n),e},__importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(sparql,"__esModule",{value:!0});sparql.toSparqlJs=sparql.toSparql=void 0;const rdf_isomorphic_1=rdfIsomorphic,rdf_string_1=rdfString,sparqljs_1=sparql$1,Algebra=__importStar(algebra),factory_1=__importDefault(factory$2),util_1=__importDefault(util),types=Algebra.types,eTypes=Algebra.expressionTypes;let context;const factory=new factory_1.default;function toSparql(n,e={}){return new sparqljs_1.Generator(e).stringify(toSparqlJs(n))}sparql.toSparql=toSparql;function toSparqlJs(n){resetContext(),n=removeQuads(n);let e=translateOperation(n);return e.type==="group"?e.patterns[0]:e}sparql.toSparqlJs=toSparqlJs;function resetContext(){context={project:!1,extend:[],group:[],aggregates:[],order:[]}}function translateOperation(n){switch(n.type!==types.EXTEND&&n.type!==types.ORDER_BY&&n.type!==types.GRAPH&&(context.project=!1),n.type){case types.EXPRESSION:return translateExpression(n);case types.ASK:return translateProject(n,types.ASK);case types.BGP:return translateBgp(n);case types.CONSTRUCT:return translateConstruct(n);case types.DESCRIBE:return translateProject(n,types.DESCRIBE);case types.DISTINCT:return translateDistinct(n);case types.EXTEND:return translateExtend(n);case types.FROM:return translateFrom(n);case types.FILTER:return translateFilter(n);case types.GRAPH:return translateGraph(n);case types.GROUP:return translateGroup(n);case types.JOIN:return translateJoin(n);case types.LEFT_JOIN:return translateLeftJoin(n);case types.MINUS:return translateMinus(n);case types.NOP:return{};case types.ORDER_BY:return translateOrderBy(n);case types.PATH:return translatePath(n);case types.PATTERN:return translatePattern(n);case types.PROJECT:return translateProject(n,types.PROJECT);case types.REDUCED:return translateReduced(n);case types.SERVICE:return translateService(n);case types.SLICE:return translateSlice(n);case types.UNION:return translateUnion(n);case types.VALUES:return translateValues(n);case types.COMPOSITE_UPDATE:return translateCompositeUpdate(n);case types.DELETE_INSERT:return translateDeleteInsert(n);case types.LOAD:return translateLoad(n);case types.CLEAR:return translateClear(n);case types.CREATE:return translateCreate(n);case types.DROP:return translateDrop(n);case types.ADD:return translateAdd(n);case types.MOVE:return translateMove(n);case types.COPY:return translateCopy(n)}throw new Error(`Unknown Operation type ${n.type}`)}function translateExpression(n){switch(n.expressionType){case eTypes.AGGREGATE:return translateAggregateExpression(n);case eTypes.EXISTENCE:return translateExistenceExpression(n);case eTypes.NAMED:return translateNamedExpression(n);case eTypes.OPERATOR:return translateOperatorExpression(n);case eTypes.TERM:return translateTermExpression(n);case eTypes.WILDCARD:return translateWildcardExpression(n)}throw new Error(`Unknown Expression Operation type ${n.expressionType}`)}function translatePathComponent(n){switch(n.type){case types.ALT:return translateAlt(n);case types.INV:return translateInv(n);case types.LINK:return translateLink(n);case types.NPS:return translateNps(n);case types.ONE_OR_MORE_PATH:return translateOneOrMorePath(n);case types.SEQ:return translateSeq(n);case types.ZERO_OR_MORE_PATH:return translateZeroOrMorePath(n);case types.ZERO_OR_ONE_PATH:return translateZeroOrOnePath(n)}throw new Error(`Unknown Path type ${n.type}`)}function translateTerm(n){return(0,rdf_string_1.termToString)(n)}function translateAggregateExpression(n){const e={expression:translateExpression(n.expression),type:"aggregate",aggregation:n.aggregator,distinct:n.distinct};return n.separator&&(e.separator=n.separator),e}function translateExistenceExpression(n){return{type:"operation",operator:n.not?"notexists":"exists",args:util_1.default.flatten([translateOperation(n.input)])}}function translateNamedExpression(n){return{type:"functionCall",function:n.name,args:n.args.map(translateExpression)}}function translateOperatorExpression(n){if(n.operator==="desc"){const t={expression:translateExpression(n.args[0])};return t.descending=!0,t}const e={type:"operation",operator:n.operator,args:n.args.map(translateExpression)};return(e.operator==="in"||e.operator==="notin")&&(e.args=[e.args[0]].concat([e.args.slice(1)])),e}function translateTermExpression(n){return n.term}function translateWildcardExpression(n){return n.wildcard}function translateBoundAggregate(n){return n}function translateBgp(n){let e=n.patterns.map(translatePattern);return e.length===0?null:{type:"bgp",triples:e}}function translateConstruct(n){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:n.template.map(translatePattern),where:util_1.default.flatten([translateOperation(n.input)])}}function translateDistinct(n){let e=translateOperation(n.input);return e.patterns[0].distinct=!0,e}function translateExtend(n){return context.project?(context.extend.push(n),translateOperation(n.input)):util_1.default.flatten([translateOperation(n.input),{type:"bind",variable:n.variable,expression:translateExpression(n.expression)}])}function translateFrom(n){const e=translateOperation(n.input),t=e.patterns[0];return t.from={default:n.default,named:n.named},e}function translateFilter(n){return{type:"group",patterns:util_1.default.flatten([translateOperation(n.input),{type:"filter",expression:translateExpression(n.expression)}])}}function translateGraph(n){return{type:"graph",patterns:util_1.default.flatten([translateOperation(n.input)]),name:n.name}}function translateGroup(n){const e=translateOperation(n.input),t=n.aggregates.map(translateBoundAggregate);return context.aggregates.push(...t),context.group.push(...n.variables),e}function translateJoin(n){return util_1.default.flatten(n.input.map(translateOperation)).reduce((t,a)=>(a.type!=="bgp"||t.length==0||t[t.length-1].type!=="bgp"?t.push(a):t[t.length-1].triples.push(...a.triples),t),[])}function translateLeftJoin(n){const e={type:"optional",patterns:[translateOperation(n.input[1])]};return n.expression&&e.patterns.push({type:"filter",expression:translateExpression(n.expression)}),e.patterns=util_1.default.flatten(e.patterns),util_1.default.flatten([translateOperation(n.input[0]),e])}function translateMinus(n){let e=translateOperation(n.input[1]);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),util_1.default.flatten([translateOperation(n.input[0]),{type:"minus",patterns:e}])}function translateOrderBy(n){return context.order.push(...n.expressions),translateOperation(n.input)}function translatePath(n){return{type:"bgp",triples:[{subject:n.subject,predicate:translatePathComponent(n.predicate),object:n.object}]}}function translatePattern(n){return{subject:n.subject,predicate:n.predicate,object:n.object}}function replaceAggregatorVariables(n,e){let t=util_1.default.isSimpleTerm(n)?translateTerm(n):n;if(typeof t=="string"){if(e[t])return e[t]}else if(Array.isArray(n))n=n.map(a=>replaceAggregatorVariables(a,e));else for(let a of Object.keys(n))n[a]=replaceAggregatorVariables(n[a],e);return n}function translateProject(n,e){const t={type:"query",prefixes:{}},a=t;let c;e===types.PROJECT?(t.queryType="SELECT",c=n.variables):e===types.ASK?t.queryType="ASK":e===types.DESCRIBE&&(t.queryType="DESCRIBE",c=n.terms);const l=context.extend,o=context.group,i=context.aggregates,u=context.order;resetContext(),context.project=!0;let d=util_1.default.flatten([translateOperation(n.input)]);d.length===1&&d[0].type==="group"&&(d=d[0].patterns),t.where=d;let m={};for(let p of context.aggregates)m[translateTerm(p.variable)]=translateExpression(p);let y={};for(let p=context.extend.length-1;p>=0;--p){let T=context.extend[p];y[translateTerm(T.variable)]=replaceAggregatorVariables(translateExpression(T.expression),m)}if(context.group.length>0&&(a.group=context.group.map(p=>{let T=translateTerm(p);if(y[T]){let _=y[T];return delete y[T],{variable:p,expression:_}}return{expression:p}})),context.order.length>0&&(a.order=context.order.map(translateOperation).map(p=>p.descending?p:{expression:p})),c&&(a.variables=c.map(p=>{let T=translateTerm(p);return y[T]?{variable:p,expression:y[T]}:p}),a.variables.length===0&&(a.variables=[new sparqljs_1.Wildcard])),t.where.length>0&&t.where[t.where.length-1].type==="filter"){const p=t.where[t.where.length-1];objectContainsValues(p,Object.keys(m))&&(a.having=util_1.default.flatten([replaceAggregatorVariables(p.expression,m)]),t.where.splice(-1))}return context.extend=l,context.group=o,context.aggregates=i,context.order=u,{type:"group",patterns:[a]}}function objectContainsValues(n,e){return util_1.default.isSimpleTerm(n)?e.indexOf(translateTerm(n))>=0:Array.isArray(n)?n.some(t=>objectContainsValues(t,e)):n===Object(n)?Object.keys(n).some(t=>objectContainsValues(n[t],e)):e.indexOf(n)>=0}function translateReduced(n){let e=translateOperation(n.input);return e.patterns[0].reduced=!0,e}function translateService(n){let e=translateOperation(n.input);return e.type==="group"&&(e=e.patterns),Array.isArray(e)||(e=[e]),{type:"service",name:n.name,silent:n.silent,patterns:e}}function translateSlice(n){let e=translateOperation(n.input),t=e;return e.type&&e.type==="group"&&(t=e.patterns[0]),n.start!==0&&(t.offset=n.start),n.length!==void 0&&(t.limit=n.length),e}function translateUnion(n){return{type:"union",patterns:util_1.default.flatten(n.input.map(translateOperation))}}function translateValues(n){return{type:"values",values:n.bindings.map(e=>{let t={};for(let a of n.variables){let c=`?${a.value}`;e[c]?t[c]=e[c]:t[c]=void 0}return t})}}function translateAlt(n){const e=n.input.map(translatePathComponent);return e.every(t=>"pathType"in t&&t.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:util_1.default.flatten(e.map(t=>t.items))}]}:{type:"path",pathType:"|",items:e}}function translateInv(n){if(n.path.type===types.NPS){const e=n.path.iris.map(t=>({type:"path",pathType:"^",items:[t]}));return e.length<=1?{type:"path",pathType:"!",items:e}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:e}]}}return{type:"path",pathType:"^",items:[translatePathComponent(n.path)]}}function translateLink(n){return n.iri}function translateNps(n){return n.iris.length<=1?{type:"path",pathType:"!",items:n.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:n.iris}]}}function translateOneOrMorePath(n){return{type:"path",pathType:"+",items:[translatePathComponent(n.path)]}}function translateSeq(n){return{type:"path",pathType:"/",items:n.input.map(translatePathComponent)}}function translateZeroOrMorePath(n){return{type:"path",pathType:"*",items:[translatePathComponent(n.path)]}}function translateZeroOrOnePath(n){return{type:"path",pathType:"?",items:[translatePathComponent(n.path)]}}function translateCompositeUpdate(n){const e=n.updates.map(t=>translateOperation(t).updates[0]);return{prefixes:{},type:"update",updates:e}}function translateDeleteInsert(n){var e;let t=n.where,a;if(t&&t.type===types.FROM){let l=t;t=l.input,a={default:l.default,named:l.named}}const c=[{updateType:"insertdelete",delete:convertUpdatePatterns(n.delete||[]),insert:convertUpdatePatterns(n.insert||[])}];if(a&&(c[0].using=a),!t||t.type===types.BGP&&t.patterns.length===0)c[0].where=[];else{const l={};let o=translateOperation(removeQuadsRecursive(t,l));o.type==="group"?c[0].where=o.patterns:c[0].where=[o];const i=Object.keys(l);if(i.length>0){if(i.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");const u=(e=l[i[0]])===null||e===void 0?void 0:e.graph;u&&u.value!==""&&(c[0].where=[{type:"graph",patterns:c[0].where,name:u}])}}return!n.delete&&!n.where?(c[0].updateType="insert",delete c[0].delete,delete c[0].where):!n.insert&&!n.where?(delete c[0].insert,delete c[0].where,n.delete.some(l=>l.subject.termType==="Variable"||l.predicate.termType==="Variable"||l.object.termType==="Variable")?c[0].updateType="deletewhere":c[0].updateType="delete"):!n.insert&&n.where&&n.where.type==="bgp"&&(0,rdf_isomorphic_1.isomorphic)(n.delete,n.where.patterns)&&(delete c[0].where,c[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:c}}function translateLoad(n){const e=[{type:"load",silent:!!n.silent,source:n.source}];return n.destination&&(e[0].destination=n.destination),{prefixes:{},type:"update",updates:e}}function translateClear(n){return translateClearCreateDrop(n,"clear")}function translateCreate(n){return translateClearCreateDrop(n,"create")}function translateDrop(n){return translateClearCreateDrop(n,"drop")}function translateClearCreateDrop(n,e){const t=[{type:e,silent:!!n.silent}];return n.source==="DEFAULT"?t[0].graph={default:!0}:n.source==="NAMED"?t[0].graph={named:!0}:n.source==="ALL"?t[0].graph={all:!0}:t[0].graph={type:"graph",name:n.source},{prefixes:{},type:"update",updates:t}}function translateAdd(n){return translateUpdateGraphShortcut(n,"add")}function translateMove(n){return translateUpdateGraphShortcut(n,"move")}function translateCopy(n){return translateUpdateGraphShortcut(n,"copy")}function translateUpdateGraphShortcut(n,e){const t=[{type:e,silent:!!n.silent}];return t[0].source=n.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:n.source},t[0].destination=n.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:n.destination},{prefixes:{},type:"update",updates:t}}function convertUpdatePatterns(n){if(!n)return[];const e={};return n.forEach(t=>{const a=t.graph.value;e[a]||(e[a]=[]),e[a].push(t)}),Object.keys(e).map(t=>t===""?{type:"bgp",triples:e[t].map(translatePattern)}:{type:"graph",triples:e[t].map(translatePattern),name:e[t][0].graph})}function removeQuads(n){return removeQuadsRecursive(n,{})}function removeQuadsRecursive(n,e){if(Array.isArray(n))return n.map(o=>removeQuadsRecursive(o,e));if(!n.type||n.type===types.DELETE_INSERT)return n;if((n.type===types.PATTERN||n.type===types.PATH)&&n.graph)return e[n.graph.value]||(e[n.graph.value]={graph:n.graph,values:[]}),e[n.graph.value].values.push(n),n;const t={},a={},c={};for(let o of Object.keys(n)){const i={};t[o]=removeQuadsRecursive(n[o],i);const u=Object.keys(i);if(u.length>1){let d=potentialGraphFromPatterns(i[u[0]].values);for(let m=1;m<u.length;++m){const y=potentialGraphFromPatterns(i[u[m]].values);d=factory.createJoin([d,y])}return u.map(m=>delete i[m]),d}else if(u.length===1){const d=i[u[0]].graph;a[o]=d,c[d.value]=d}}const l=Object.keys(c);if(l.length>0)if(l.length===1&&n.type!==types.PROJECT)e[l[0]]={graph:c[l[0]],values:[t]};else for(let o of Object.keys(a))a[o].value.length>0&&(t[o]=factory.createGraph(t[o],a[o]));return t}function potentialGraphFromPatterns(n){const e=factory.createBgp(n),t=n[0].graph;return t.value.length===0?e:factory.createGraph(e,t)}(function(n){var e=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(m,y,p,T){T===void 0&&(T=p);var _=Object.getOwnPropertyDescriptor(y,p);(!_||("get"in _?!y.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return y[p]}}),Object.defineProperty(m,T,_)}:function(m,y,p,T){T===void 0&&(T=p),m[T]=y[p]}),t=commonjsGlobal&&commonjsGlobal.__setModuleDefault||(Object.create?function(m,y){Object.defineProperty(m,"default",{enumerable:!0,value:y})}:function(m,y){m.default=y}),a=commonjsGlobal&&commonjsGlobal.__importStar||function(m){if(m&&m.__esModule)return m;var y={};if(m!=null)for(var p in m)p!=="default"&&Object.prototype.hasOwnProperty.call(m,p)&&e(y,m,p);return t(y,m),y},c=commonjsGlobal&&commonjsGlobal.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(n,"__esModule",{value:!0}),n.Util=n.toSparqlJs=n.toSparql=n.Factory=n.Algebra=n.translate=void 0;const l=c(sparqlAlgebra);n.translate=l.default;const o=a(algebra);n.Algebra=o;const i=c(factory$2);n.Factory=i.default;const u=sparql;Object.defineProperty(n,"toSparql",{enumerable:!0,get:function(){return u.toSparql}}),Object.defineProperty(n,"toSparqlJs",{enumerable:!0,get:function(){return u.toSparqlJs}});const d=c(util);n.Util=d.default})(sparqlalgebrajs);var index=getDefaultExportFromCjs(sparqlalgebrajs),__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__=_mergeNamespaces({__proto__:null,default:index},[sparqlalgebrajs]),__quadstore_comunica_modules__={"../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorAbstractPath=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),o=t("asynciterator"),i=t("../node_modules/rdf-data-factory/index.js"),u=t("../node_modules/rdf-string/index.js"),d=t("sparqlalgebrajs"),m=t("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),y=new i.DataFactory,p=new a.BindingsFactory;class T extends c.ActorQueryOperationTypedMediated{constructor(w,S){super(w,"path"),this.predicateType=S}async testOperation(w,S){if(w.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(w,S){return S?w&&(w.subject.value===S||w.object.value===S)?this.generateVariable(w,`${S}b`):y.variable(S):this.generateVariable(w,"b")}async isPathArbitraryLengthDistinct(w,S){return w.get(l.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(w=w.set(l.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:w,operation:void 0}):(w=w.set(l.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:w,operation:c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:T.FACTORY.createDistinct(S),context:w}))})}async predicateStarGraphVariable(w,S,I,j,x){const v=this.generateVariable(T.FACTORY.createPath(w,I,S,j)),O=T.FACTORY.createUnion([T.FACTORY.createPattern(w,v,S,j),T.FACTORY.createPattern(S,v,w,j)]),N=c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:x,operation:O})),D=new Set;return{bindingsStream:new o.MultiTransformIterator(N.bindingsStream,{multiTransform:W=>{const U=W.get(j);return D.has(U.value)?new o.EmptyIterator:(D.add(U.value),new o.TransformIterator(async()=>{const Q=new o.BufferedIterator;return await this.getObjectsPredicateStar(w,I,U,x,{},Q,{count:0}),Q.transform({transform(Z,L,M){M(p.bindings([[S,Z],[j,U]])),L()}})},{maxBufferSize:128}))},autoStart:!1}),metadata:N.metadata}}async getObjectsPredicateStarEval(w,S,I,j,x,v){if(j.termType==="Variable")return this.predicateStarGraphVariable(w,I,S,j,x);const O=new m.PathVariableObjectIterator(w,S,j,x,this.mediatorQueryOperation,v);return{bindingsStream:O.transform({autoStart:!1,transform(D,G,W){W(p.bindings([[I,D]])),G()}}),metadata:()=>new Promise(D=>O.getProperty("metadata",G=>D(G())))}}async getObjectsPredicateStar(w,S,I,j,x,v,O){const N=(0,u.termToString)(w);if(x[N])return;v._push(w),x[N]=w,O.count++;const D=this.generateVariable(),G=T.FACTORY.createPath(w,S,D,I),W=c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:G,context:j}));return W.bindingsStream.on("data",async U=>{const Q=U.get(D);await this.getObjectsPredicateStar(Q,S,I,j,x,v,O)}),W.bindingsStream.on("end",()=>{--O.count===0&&v.close()}),W.metadata}async getSubjectAndObjectBindingsPredicateStar(w,S,I,j,x,v,O,N,D,G,W){const U=(0,u.termToString)(j)+(0,u.termToString)(v);if(D[U])return;if(W.count++,D[U]=!0,G._push(p.bindings([[w,I],[S,j]])),U in N){const Z=await N[U];for(const L of Z)await this.getSubjectAndObjectBindingsPredicateStar(w,S,I,L,x,v,O,N,D,G,W);--W.count===0&&G.close();return}const Q=new Promise(async(Z,L)=>{const M=[],V=this.generateVariable(),H=T.FACTORY.createPath(j,x,V,v),J=c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:H,context:O}));J.bindingsStream.on("data",async ce=>{const oe=ce.get(V);M.push(oe),await this.getSubjectAndObjectBindingsPredicateStar(w,S,I,oe,x,v,O,N,D,G,W)}),J.bindingsStream.on("error",L),J.bindingsStream.on("end",()=>{--W.count===0&&G.close(),Z(M)})});N[U]=Q}}e.ActorAbstractPath=T,T.FACTORY=new d.Factory},"../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PathVariableObjectIterator=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("asynciterator"),l=t("../node_modules/rdf-data-factory/index.js"),o=t("../node_modules/rdf-string/index.js"),i=t("sparqlalgebrajs"),u=new l.DataFactory,d=new i.Factory;class m extends c.BufferedIterator{constructor(p,T,_,w,S,I,j=16){super({autoStart:!0}),this.subject=p,this.predicate=T,this.graph=_,this.context=w,this.mediatorQueryOperation=S,this.maxRunningOperations=j,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this._push(this.subject,I)}_end(p){for(const T of this.runningOperations)T.destroy();super._end(p)}_push(p,T=!0){let _;if(T&&(_=(0,o.termToString)(p),this.termHashes.has(_)))return;const w=u.variable("b");this.pendingOperations.push({variable:w,operation:d.createPath(p,this.predicate,w,this.graph)}),_&&(this.termHashes.set(_,p),super._push(p))}_read(p,T){const _=this;(async function(){for(;_.runningOperations.length<_.maxRunningOperations&&_.pendingOperations.length!==0;){const I=_.pendingOperations.pop(),j=a.ActorQueryOperation.getSafeBindings(await _.mediatorQueryOperation.mediate({operation:I.operation,context:_.context})),x=j.bindingsStream.transform({autoStart:!1,transform(v,O,N){const D=v.get(I.variable);N(D),O()}});x.done||(_.runningOperations.push(x),x.on("error",v=>_.destroy(v)),x.on("readable",()=>{_.readable=!0,_._fillBufferAsync()}),x.on("end",()=>{_.runningOperations.splice(_.runningOperations.indexOf(x),1),_.readable=!0,_._fillBufferAsync()})),_.setProperty("metadata",j.metadata)}let w=0,S;for(;w!==(w=p);)for(let I=0;I<_.runningOperations.length&&p>0;I++)(S=_.runningOperations[I].read())!==null&&(p--,_._push(S));_.runningOperations.length===0&&_.pendingOperations.length===0&&_.close()})().then(()=>{T()},w=>this.destroy(w))}}e.PathVariableObjectIterator=m},"../node_modules/@comunica/actor-abstract-path/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-abstract-path/lib/ActorAbstractPath.js"),e),c(t("../node_modules/@comunica/actor-abstract-path/lib/PathVariableObjectIterator.js"),e)},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocessSourceToDestination=void 0;const a=t("../node_modules/@comunica/bus-context-preprocess/lib/index.js"),c=t("../node_modules/@comunica/context-entries/lib/index.js");class l extends a.ActorContextPreprocess{constructor(i){super(i)}async test(i){return!0}async run(i){if(i.context.get(c.KeysRdfResolveQuadPattern.sources)&&!i.context.get(c.KeysRdfUpdateQuads.destination)){const u=i.context.get(c.KeysRdfResolveQuadPattern.sources);if(u.length===1)return{context:i.context.set(c.KeysRdfUpdateQuads.destination,u[0])}}return i}}e.ActorContextPreprocessSourceToDestination=l},"../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/ActorContextPreprocessSourceToDestination.js"),e)},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindingsSha1=void 0;const a=t("../node_modules/@comunica/bus-hash-bindings/lib/index.js"),c=t("../node_modules/hash.js/lib/hash.js"),l=t("../node_modules/rdf-string/index.js"),o=t("../node_modules/canonicalize/lib/canonicalize.js");class i extends a.ActorHashBindings{async test(d){if(!d.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(d){return{hashFunction:m=>(0,c.sha1)().update(o(Object.fromEntries([...m].map(([y,p])=>[(0,l.termToString)(y),(0,l.termToString)(p)])))).digest("hex"),hashCollisions:!0}}}e.ActorHashBindingsSha1=i},"../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-hash-bindings-sha1/lib/ActorHashBindingsSha1.js"),e)},"../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQuery=void 0;const a=t("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js");typeof process>"u"&&(globalThis.process=t("./require-empty.js"));class c extends a.ActorInitQueryBase{}e.ActorInitQuery=c},"../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInitQueryBase=void 0;const a=t("../node_modules/@comunica/bus-init/lib/index.js");class c extends a.ActorInit{constructor(o){o.contextKeyShortcutsExtensions?.forEach(i=>{if(Object.keys(o.contextKeyShortcuts).some(u=>Object.keys(i).includes(u)))throw new Error("Duplicate keys found while adding `contextKeyShortcutsExtensions`.");o.contextKeyShortcuts={...o.contextKeyShortcuts,...i}}),super(o)}async test(o){return!0}async run(o){throw new Error("ActorInitSparql#run is not supported in the browser.")}}e.ActorInitQueryBase=c},"../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MemoryPhysicalQueryPlanLogger=void 0;const a=t("../node_modules/rdf-string/index.js");class c{constructor(){this.children=new Map}logOperation(o,i,u,d,m,y){const p={actor:m,logicalOperator:o,physicalOperator:i,rawNode:u,children:[],metadata:y};if(this.children.set(u,p.children),this.rootNode){if(!d)throw new Error("Detected more than one parent-less node");const T=this.children.get(d);if(!T)throw new Error("Could not find parent node");T.push(p)}else{if(d)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=p}}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(o){return{logical:o.logicalOperator,physical:o.physicalOperator,...this.getLogicalMetadata(o.rawNode),...o.metadata,...o.children.length>0?{children:o.children.map(i=>this.planNodeToJson(i))}:{}}}getLogicalMetadata(o){if("type"in o){const i=o;switch(i.type){case"pattern":return{pattern:this.quadToString(i)};case"project":return{variables:i.variables.map(u=>u.value)}}}return{}}quadToString(o){return`${(0,a.termToString)(o.subject)} ${(0,a.termToString)(o.predicate)} ${(0,a.termToString)(o.object)}${o.graph.termType==="DefaultGraph"?"":` ${(0,a.termToString)(o.graph)}`}`}}e.MemoryPhysicalQueryPlanLogger=c},"../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/core/lib/index.js"),o=t("../node_modules/@comunica/actor-init-query/lib/MemoryPhysicalQueryPlanLogger.js");class i{constructor(d){this.actorInitQuery=d,this.defaultFunctionArgumentsCache={}}async queryBindings(d,m){return this.queryOfType(d,m,"bindings")}async queryQuads(d,m){return this.queryOfType(d,m,"quads")}async queryBoolean(d,m){return this.queryOfType(d,m,"boolean")}async queryVoid(d,m){return this.queryOfType(d,m,"void")}async queryOfType(d,m,y){const p=await this.query(d,m);if(p.resultType===y)return p.execute();throw new Error(`Query result type '${y}' was expected, while '${p.resultType}' was found.`)}async query(d,m){const y=await this.queryOrExplain(d,m);if("explain"in y)throw new Error("Tried to explain a query when in query-only mode");return y}async explain(d,m,y){return m.explain=y,await this.queryOrExplain(d,m)}async queryOrExplain(d,m){m=m||{};for(const v in m)this.actorInitQuery.contextKeyShortcuts[v]&&(m[this.actorInitQuery.contextKeyShortcuts[v]]=m[v],delete m[v]);let y=new l.ActionContext(m),p={language:"sparql",version:"1.1"};y.has(c.KeysInitQuery.queryFormat)&&(p=y.get(c.KeysInitQuery.queryFormat),y=y.delete(c.KeysInitQuery.queryFormat),p.language==="graphql"&&(y=y.setDefault(c.KeysInitQuery.graphqlSingularizeVariables,{})));const T=y.get(c.KeysInitQuery.baseIRI);y=y.setDefault(c.KeysInitQuery.queryTimestamp,new Date).setDefault(c.KeysRdfResolveQuadPattern.sourceIds,new Map).setDefault(c.KeysCore.log,this.actorInitQuery.logger).setDefault(c.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(c.KeysRdfResolveQuadPattern.hypermediaSourcesAggregatedStores,new Map),y=(await this.actorInitQuery.mediatorContextPreprocess.mediate({context:y})).context;const _=y.get(c.KeysInitQuery.explain);let w;if(typeof d=="string"){y=y.set(c.KeysInitQuery.queryString,d);const v=await this.actorInitQuery.mediatorQueryParse.mediate({context:y,query:d,queryFormat:p,baseIRI:T});w=v.operation,v.baseIRI&&(y=y.set(c.KeysInitQuery.baseIRI,v.baseIRI))}else w=d;if(_==="parsed")return{explain:!0,type:_,data:w};y.has(c.KeysInitQuery.initialBindings)&&(w=(0,a.materializeOperation)(w,y.get(c.KeysInitQuery.initialBindings)),y=y.delete(c.KeysInitQuery.queryString));const S=await this.actorInitQuery.mediatorOptimizeQueryOperation.mediate({context:y,operation:w});if(w=S.operation,y=S.context||y,_==="logical")return{explain:!0,type:_,data:w};y=y.set(c.KeysInitQuery.query,w);let I;_==="physical"&&(I=new o.MemoryPhysicalQueryPlanLogger,y=y.set(c.KeysInitQuery.physicalQueryPlanLogger,I));const j=await this.actorInitQuery.mediatorQueryOperation.mediate({context:y,operation:w});j.context=y;const x=i.internalToFinalResult(j);if(I){switch(x.resultType){case"bindings":await(await x.execute()).toArray();break;case"quads":await(await x.execute()).toArray();break;case"boolean":await x.execute();break;case"void":await x.execute();break}return{explain:!0,type:_,data:I.toJson()}}return x}async getResultMediaTypes(d){return d=l.ActionContext.ensureActionContext(d),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:d,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(d){return d=l.ActionContext.ensureActionContext(d),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:d,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(d,m,y){if(y=l.ActionContext.ensureActionContext(y),!m)switch(d.resultType){case"bindings":m="application/json";break;case"quads":m="application/trig";break;default:m="simple";break}const p={...await i.finalToInternalResult(d),context:y};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:y,handle:p,handleMediaType:m})).handle}invalidateHttpCache(d,m){return m=l.ActionContext.ensureActionContext(m),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:d,context:m})}static internalToFinalResult(d){switch(d.type){case"bindings":return{resultType:"bindings",execute:async()=>d.bindingsStream,metadata:async()=>await d.metadata(),context:d.context};case"quads":return{resultType:"quads",execute:async()=>d.quadStream,metadata:async()=>await d.metadata(),context:d.context};case"boolean":return{resultType:"boolean",execute:async()=>d.execute(),context:d.context};case"void":return{resultType:"void",execute:async()=>d.execute(),context:d.context}}}static async finalToInternalResult(d){switch(d.resultType){case"bindings":return{type:"bindings",bindingsStream:await d.execute(),metadata:async()=>await d.metadata()};case"quads":return{type:"quads",quadStream:await d.execute(),metadata:async()=>await d.metadata()};case"boolean":return{type:"boolean",execute:()=>d.execute()};case"void":return{type:"void",execute:()=>d.execute()}}}}e.QueryEngineBase=i},"../node_modules/@comunica/actor-init-query/lib/index-browser.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(o,i,u,d){d===void 0&&(d=u);var m=Object.getOwnPropertyDescriptor(i,u);(!m||("get"in m?!i.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return i[u]}}),Object.defineProperty(o,d,m)}:function(o,i,u,d){d===void 0&&(d=u),o[d]=i[u]}),c=this&&this.__exportStar||function(o,i){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(i,u)&&a(i,o,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryEngineBase=void 0,c(t("../node_modules/@comunica/actor-init-query/lib/ActorInitQueryBase.js"),e),c(t("../node_modules/@comunica/actor-init-query/lib/ActorInitQuery-browser.js"),e);var l=t("../node_modules/@comunica/actor-init-query/lib/QueryEngineBase.js");Object.defineProperty(e,"QueryEngineBase",{enumerable:!0,get:function(){return l.QueryEngineBase}})},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationBgpToJoin=void 0;const a=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorOptimizeQueryOperation{async test(i){return!0}async run(i){return{operation:c.Util.mapOperation(i.operation,{bgp(d,m){return{recurse:!1,result:m.createJoin(d.patterns)}}}),context:i.context}}}e.ActorOptimizeQueryOperationBgpToJoin=l},"../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/ActorOptimizeQueryOperationBgpToJoin.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinBgp=void 0;const a=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorOptimizeQueryOperation{async test(i){return!0}async run(i){return{operation:c.Util.mapOperation(i.operation,{join(d,m){return d.input.every(y=>y.type==="bgp")?{recurse:!1,result:m.createBgp(d.input.flatMap(y=>y.patterns))}:{recurse:!1,result:d}}}),context:i.context}}}e.ActorOptimizeQueryOperationJoinBgp=l},"../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/ActorOptimizeQueryOperationJoinBgp.js"),e)},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperationJoinConnected=void 0;const a=t("../node_modules/@comunica/bus-optimize-query-operation/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorOptimizeQueryOperation{async test(i){return!0}async run(i){return{operation:c.Util.mapOperation(i.operation,{join(d,m){return{recurse:!1,result:l.cluster(d,m)}}}),context:i.context}}static cluster(i,u){const d=i.input.map(T=>({inScopeVariables:Object.fromEntries(c.Util.inScopeVariables(T).map(_=>[_.value,!0])),entries:[T]}));let m,y=d;do m=y,y=l.clusterIteration(m);while(m.length!==y.length);const p=y.map(T=>u.createJoin(T.entries));return p.length===1?p[0]:u.createJoin(p,!1)}static clusterIteration(i){const u=[];for(const d of i){let m=!1;for(const y of u)if(l.haveOverlappingVariables(d.inScopeVariables,y.inScopeVariables)){y.entries=[...y.entries,...d.entries],y.inScopeVariables={...y.inScopeVariables,...d.inScopeVariables},m=!0;break}m||u.push({inScopeVariables:d.inScopeVariables,entries:d.entries})}return u}static haveOverlappingVariables(i,u){for(const d of Object.keys(i))if(u[d])return!0;return!1}}e.ActorOptimizeQueryOperationJoinConnected=l},"../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/ActorOptimizeQueryOperationJoinConnected.js"),e)},"../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAsk=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class c extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"ask")}async testOperation(o,i){return!0}async runOperation(o,i){const u=await this.mediatorQueryOperation.mediate({operation:o.input,context:i}),{bindingsStream:d}=a.ActorQueryOperation.getSafeBindings(u);return{type:"boolean",execute:async()=>(await d.take(1).toArray()).length===1}}}e.ActorQueryOperationAsk=c},"../node_modules/@comunica/actor-query-operation-ask/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-ask/lib/ActorQueryOperationAsk.js"),e)},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationBgpJoin=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"bgp")}async testOperation(i,u){return!0}async runOperation(i,u){return this.mediatorQueryOperation.mediate({operation:l.FACTORY.createJoin(i.patterns),context:u})}}e.ActorQueryOperationBgpJoin=l,l.FACTORY=new c.Factory},"../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-bgp-join/lib/ActorQueryOperationBgpJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationConstruct=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/rdf-terms/index.js"),o=t("sparqlalgebrajs"),i=t("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js");class u extends a.ActorQueryOperationTypedMediated{constructor(m){super(m,"construct")}static getVariables(m){return(0,l.uniqTerms)([].concat.apply([],m.map(y=>(0,l.getVariables)((0,l.getTerms)(y)))))}async testOperation(m,y){return!0}async runOperation(m,y){const p=u.getVariables(m.template),T={type:o.Algebra.types.PROJECT,input:m.input,variables:p},_=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:T,context:y})),w=y.get(c.KeysQueryOperation.localizeBlankNodes),S=w!==void 0?w:!0,I=new i.BindingsToQuadsIterator(m.template,_.bindingsStream,S);return{metadata:()=>_.metadata().then(x=>({...x,order:void 0,cardinality:{type:x.cardinality.type,value:x.cardinality.value*m.template.length},canContainUndefs:!1,availableOrders:void 0})),quadStream:I,type:"quads"}}}e.ActorQueryOperationConstruct=u},"../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsToQuadsIterator=void 0;const a=t("asynciterator"),c=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/rdf-terms/index.js"),o=new c.DataFactory;class i extends a.MultiTransformIterator{constructor(d,m,y=!0){super(m,{autoStart:!1}),this.template=d,this.localizeBlankNodes=y,this.blankNodeCounter=0}static bindTerm(d,m){return m.termType==="Variable"?d.get(m):m}static bindQuad(d,m){try{return(0,l.mapTerms)(m,y=>{const p=i.bindTerm(d,y);if(!p)throw new Error("Unbound term");return p})}catch{}}static localizeBlankNode(d,m){return m.termType==="BlankNode"?o.blankNode(`${m.value}${d}`):m}static localizeQuad(d,m){return(0,l.mapTerms)(m,y=>i.localizeBlankNode(d,y))}bindTemplate(d,m,y){let p=m.map(T=>i.bindQuad.bind(null,d)(T)).filter(Boolean);return this.localizeBlankNodes&&(p=p.map(i.localizeQuad.bind(null,y))),p}_createTransformer(d){return new a.ArrayIterator(this.bindTemplate(d,this.template,this.blankNodeCounter++))}}e.BindingsToQuadsIterator=i},"../node_modules/@comunica/actor-query-operation-construct/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-construct/lib/ActorQueryOperationConstruct.js"),e),c(t("../node_modules/@comunica/actor-query-operation-construct/lib/BindingsToQuadsIterator.js"),e)},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDescribeSubject=void 0;const a=t("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),o=t("asynciterator"),i=t("../node_modules/rdf-data-factory/index.js"),u=t("sparqlalgebrajs"),d=new i.DataFactory;class m extends c.ActorQueryOperationTypedMediated{constructor(p){super(p,"describe")}async testOperation(p,T){return!0}async runOperation(p,T){const _=p.terms.filter(x=>x.termType!=="Variable").map(x=>{const v=[d.quad(x,d.variable("__predicate"),d.variable("__object"))];return v.forEach(N=>N.type="pattern"),{input:{type:u.Algebra.types.BGP,patterns:v},template:v,type:"construct"}});if(_.length!==p.terms.length){let x=[];p.terms.filter(v=>v.termType==="Variable").forEach((v,O)=>{const N=[d.quad(v,d.variable(`__predicate${O}`),d.variable(`__object${O}`))];N.forEach(D=>D.type="pattern"),x=[...x,...N]}),_.push({input:{type:u.Algebra.types.JOIN,input:[p.input,{type:u.Algebra.types.BGP,patterns:x}]},template:x,type:u.Algebra.types.CONSTRUCT})}const w=T.get(l.KeysQueryOperation.localizeBlankNodes);T=T.set(l.KeysQueryOperation.localizeBlankNodes,w!==void 0?w:!1);const S=(await Promise.all(_.map(x=>this.mediatorQueryOperation.mediate({operation:x,context:T})))).map(c.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new o.UnionIterator(S.map(x=>x.quadStream),{autoStart:!1}),metadata:()=>Promise.all(S.map(x=>x.metadata())).then(x=>a.ActorQueryOperationUnion.unionMetadata(x,!1))}}}e.ActorQueryOperationDescribeSubject=m},"../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-describe-subject/lib/ActorQueryOperationDescribeSubject.js"),e)},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDistinctHash=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class c extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"distinct")}async testOperation(o,i){return!0}async runOperation(o,i){const u=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:o.input,context:i}));return{type:"bindings",bindingsStream:u.bindingsStream.filter(await this.newHashFilter(i)),metadata:u.metadata}}async newHashFilter(o){const{hashFunction:i}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:o}),u={};return d=>{const m=i(d);return!(m in u)&&(u[m]=!0)}}}e.ActorQueryOperationDistinctHash=c},"../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/ActorQueryOperationDistinctHash.js"),e)},"../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationExtend=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/sparqlee/dist/index.js");class o extends c.ActorQueryOperationTypedMediated{constructor(u){super(u,"extend")}async testOperation(u,d){return new l.AsyncEvaluator(u.expression,c.ActorQueryOperation.getAsyncExpressionContext(d,this.mediatorQueryOperation)),!0}async runOperation(u,d){const{expression:m,input:y,variable:p}=u,T=c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:y,context:d})),_={...c.ActorQueryOperation.getAsyncExpressionContext(d,this.mediatorQueryOperation)},w=new l.AsyncEvaluator(m,_),S=async(j,x,v)=>{try{const O=await w.evaluate(j),N=j.set(p,O);v(N)}catch(O){(0,l.isExpressionError)(O)?(v(j),this.logWarn(d,`Expression error for extend operation with bindings '${(0,a.bindingsToString)(j)}'`)):I.emit("error",O)}x()},I=T.bindingsStream.transform({autoStart:!1,transform:S});return{type:"bindings",bindingsStream:I,async metadata(){const j=await T.metadata();return{...j,variables:[...j.variables,p]}}}}}e.ActorQueryOperationExtend=o},"../node_modules/@comunica/actor-query-operation-extend/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-extend/lib/ActorQueryOperationExtend.js"),e)},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFilterSparqlee=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/sparqlee/dist/index.js");class o extends c.ActorQueryOperationTypedMediated{constructor(u){super(u,"filter")}async testOperation(u,d){const m={...c.ActorQueryOperation.getAsyncExpressionContext(d,this.mediatorQueryOperation)};return new l.AsyncEvaluator(u.expression,m),!0}async runOperation(u,d){const m=await this.mediatorQueryOperation.mediate({operation:u.input,context:d}),y=c.ActorQueryOperation.getSafeBindings(m);c.ActorQueryOperation.validateQueryOutput(y,"bindings");const p={...c.ActorQueryOperation.getAsyncExpressionContext(d,this.mediatorQueryOperation)},T=new l.AsyncEvaluator(u.expression,p),_=async(S,I,j)=>{try{await T.evaluateAsEBV(S)&&j(S)}catch(x){(0,l.isExpressionError)(x)?this.logWarn(d,"Error occurred while filtering.",()=>({error:x,bindings:(0,a.bindingsToString)(S)})):w.emit("error",x)}I()},w=y.bindingsStream.transform({transform:_});return{type:"bindings",bindingsStream:w,metadata:y.metadata}}}e.ActorQueryOperationFilterSparqlee=o},"../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/ActorQueryOperationFilterSparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationFromQuad=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"from")}static copyOperation(i,u){const d={};for(const m of Object.keys(i))Array.isArray(i[m])&&m!=="template"?m==="variables"?d[m]=i[m]:d[m]=i[m].map(u):l.ALGEBRA_TYPES.includes(i[m].type)?d[m]=u(i[m]):d[m]=i[m];return d}static applyOperationDefaultGraph(i,u){if(i.type==="bgp"&&i.patterns.length>0||i.type==="path"||i.type==="pattern"){if(i.type==="bgp")return l.joinOperations(i.patterns.map(m=>{if(m.graph.termType!=="DefaultGraph")return l.FACTORY.createBgp([m]);const y=u.map(p=>l.FACTORY.createBgp([l.FACTORY.createPattern(m.subject,m.predicate,m.object,p)]));return l.unionOperations(y)}));if(i.graph.termType!=="DefaultGraph")return i;const d=u.map(m=>i.type==="path"?l.FACTORY.createPath(i.subject,i.predicate,i.object,m):l.FACTORY.createPattern(i.subject,i.predicate,i.object,m));return l.unionOperations(d)}return l.copyOperation(i,d=>this.applyOperationDefaultGraph(d,u))}static applyOperationNamedGraph(i,u,d){if(i.type==="bgp"&&i.patterns.length>0||i.type==="path"||i.type==="pattern"){const m=i.type==="bgp"?i.patterns[0].graph:i.graph;if(m.termType==="DefaultGraph")return{type:c.Algebra.types.BGP,patterns:[]};if(m.termType==="Variable"){if(u.length===1){const p=u[0],T={};T[`?${m.value}`]=p;const _=l.FACTORY.createValues([m],[T]);let w;return i.type==="bgp"?w=l.FACTORY.createBgp(i.patterns.map(S=>l.FACTORY.createPattern(S.subject,S.predicate,S.object,p))):i.type==="path"?w=l.FACTORY.createPath(i.subject,i.predicate,i.object,p):w=l.FACTORY.createPattern(i.subject,i.predicate,i.object,p),l.FACTORY.createJoin([_,w])}return l.unionOperations(u.map(p=>l.applyOperationNamedGraph(i,[p],d)))}return[...u,...d].some(p=>p.equals(m))?i:{type:c.Algebra.types.BGP,patterns:[]}}return l.copyOperation(i,m=>this.applyOperationNamedGraph(m,u,d))}static joinOperations(i){if(i.length===1)return i[0];if(i.length>1)return l.FACTORY.createJoin(i);throw new Error("A join can only be applied on at least one operation")}static unionOperations(i){if(i.length===1)return i[0];if(i.length>1)return l.FACTORY.createUnion(i);throw new Error("A union can only be applied on at least one operation")}static createOperation(i){let u=i.input;return i.default.length>0&&(u=l.applyOperationDefaultGraph(u,i.default)),(i.named.length>0||i.default.length>0)&&(u=l.applyOperationNamedGraph(u,i.named,i.default)),u}async testOperation(i,u){return!0}async runOperation(i,u){const d=l.createOperation(i);return this.mediatorQueryOperation.mediate({operation:d,context:u})}}e.ActorQueryOperationFromQuad=l,l.FACTORY=new c.Factory,l.ALGEBRA_TYPES=Object.keys(c.Algebra.types).map(o=>c.Algebra.types[o])},"../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-from-quad/lib/ActorQueryOperationFromQuad.js"),e)},"../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationGroup=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("asynciterator"),l=t("../node_modules/sparqlee/dist/index.js"),o=t("../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js");class i extends a.ActorQueryOperationTypedMediated{constructor(d){super(d,"group")}async testOperation(d,m){for(const y of d.aggregates)new l.AsyncEvaluator(y.expression,a.ActorQueryOperation.getAsyncExpressionContext(m));return!0}async runOperation(d,m){const{hashFunction:y}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:m}),{input:p,aggregates:T}=d,_=await this.mediatorQueryOperation.mediate({operation:p,context:m}),w=a.ActorQueryOperation.getSafeBindings(_),S=[...d.variables,...T.map(x=>x.variable)],I=a.ActorQueryOperation.getAsyncExpressionContext(m);return{type:"bindings",bindingsStream:new c.TransformIterator(()=>new Promise((x,v)=>{const O=new o.GroupsState(y,d,I);w.bindingsStream.on("end",async()=>{try{const N=new c.ArrayIterator(await O.collectResults(),{autoStart:!1});x(N)}catch(N){v(N)}}),w.bindingsStream.on("error",v),w.bindingsStream.on("data",N=>{O.consumeBindings(N).catch(v)})}),{autoStart:!1}),metadata:async()=>({...await w.metadata(),variables:S})}}}e.ActorQueryOperationGroup=i},"../node_modules/@comunica/actor-query-operation-group/lib/GroupsState.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupsState=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/sparqlee/dist/index.js"),o=new c.DataFactory,i=new a.BindingsFactory;class u{constructor(m,y,p){this.hashFunction=m,this.pattern=y,this.sparqleeConfig=p,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(T=>T.value)),this.distinctHashes=y.aggregates.some(({distinct:T})=>T)?new Map:null,this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(m){const y=this.resultCheck();if(y)return y;this.waitCounter++;const p=m.filter((S,I)=>this.groupVariables.has(I.value)),T=this.hashBindings(p);let _=this.groupsInitializer.get(T),w;if(!_)_=(async()=>{const S={};if(await Promise.all(this.pattern.aggregates.map(async j=>{const x=j.variable.value;S[x]=new l.AsyncAggregateEvaluator(j,this.sparqleeConfig),await S[x].put(m)})),this.distinctHashes){const j=this.hashBindings(m);this.distinctHashes.set(T,new Set([j]))}const I={aggregators:S,bindings:p};return this.groups.set(T,I),this.subtractWaitCounterAndCollect(),I})(),this.groupsInitializer.set(T,_),w=_;else{const S=_;w=(async()=>{const I=await S;await Promise.all(this.pattern.aggregates.map(async j=>{if(j.distinct){const v=this.hashBindings(m);if(this.distinctHashes.get(T).has(v))return;this.distinctHashes.get(T).add(v)}const x=j.variable.value;await I.aggregators[x].put(m)}))})().then(()=>{this.subtractWaitCounterAndCollect()})}return w}subtractWaitCounterAndCollect(){--this.waitCounter===0&&this.handleResultCollection()}handleResultCollection(){let m=[...this.groups].map(([y,p])=>{const{bindings:T,aggregators:_}=p;let w=T;for(const S in _){const I=_[S].result();I&&(w=w.set(o.variable(S),I))}return w});if(m.length===0&&this.groupVariables.size===0){const y=[];for(const p of this.pattern.aggregates){const T=p.variable,_=l.AsyncAggregateEvaluator.emptyValue(p);_!==void 0&&y.push([T,_])}m=[i.bindings(y)]}this.waitResolver(m)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const m=this.resultCheck();if(m)return m;this.resultHasBeenCalled=!0;const y=new Promise(p=>{this.waitResolver=p});return this.subtractWaitCounterAndCollect(),y}hashBindings(m){return this.hashFunction(m)}}e.GroupsState=u},"../node_modules/@comunica/actor-query-operation-group/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-group/lib/ActorQueryOperationGroup.js"),e)},"../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationJoin=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class c extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"join")}async testOperation(o,i){return!0}async runOperation(o,i){const u=(await Promise.all(o.input.map(async d=>({output:await this.mediatorQueryOperation.mediate({operation:d,context:i}),operation:d})))).map(({output:d,operation:m})=>({output:a.ActorQueryOperation.getSafeBindings(d),operation:m}));return this.mediatorJoin.mediate({type:"inner",entries:u,context:i})}}e.ActorQueryOperationJoin=c},"../node_modules/@comunica/actor-query-operation-join/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-join/lib/ActorQueryOperationJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLeftJoin=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/sparqlee/dist/index.js");class l extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"leftjoin")}async testOperation(i,u){return!0}async runOperation(i,u){const d=(await Promise.all(i.input.map(async y=>({output:await this.mediatorQueryOperation.mediate({operation:y,context:u}),operation:y})))).map(({output:y,operation:p})=>({output:a.ActorQueryOperation.getSafeBindings(y),operation:p})),m=await this.mediatorJoin.mediate({type:"optional",entries:d,context:u});if(i.expression){const p=(await d[1].output.metadata()).variables,T={...a.ActorQueryOperation.getAsyncExpressionContext(u)},_=new c.AsyncEvaluator(i.expression,T),w=m.bindingsStream.transform({autoStart:!1,transform:async(S,I,j)=>{if(!p.every(x=>S.has(x.value)))return j(S),I();try{await _.evaluateAsEBV(S)&&j(S)}catch(x){(0,c.isExpressionError)(x)?this.logWarn(u,"Error occurred while filtering.",()=>({error:x,bindings:S})):w.emit("error",x)}I()}});m.bindingsStream=w}return m}}e.ActorQueryOperationLeftJoin=l},"../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-leftjoin/lib/ActorQueryOperationLeftJoin.js"),e)},"../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMinus=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class c extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"minus")}async testOperation(o,i){return!0}async runOperation(o,i){const u=(await Promise.all(o.input.map(async d=>({output:await this.mediatorQueryOperation.mediate({operation:d,context:i}),operation:d})))).map(({output:d,operation:m})=>({output:a.ActorQueryOperation.getSafeBindings(d),operation:m}));return this.mediatorJoin.mediate({type:"minus",entries:u,context:i})}}e.ActorQueryOperationMinus=c},"../node_modules/@comunica/actor-query-operation-minus/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-minus/lib/ActorQueryOperationMinus.js"),e)},"../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationNop=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),o=new a.BindingsFactory;class i extends c.ActorQueryOperationTypedMediated{constructor(d){super(d,"nop")}async testOperation(d,m){return!0}async runOperation(d,m){return{bindingsStream:new l.SingletonIterator(o.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}e.ActorQueryOperationNop=i},"../node_modules/@comunica/actor-query-operation-nop/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-nop/lib/ActorQueryOperationNop.js"),e)},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationOrderBySparqlee=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("sparqlalgebrajs"),l=t("../node_modules/sparqlee/dist/index.js"),o=t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js");class i extends a.ActorQueryOperationTypedMediated{constructor(d){super(d,"orderby"),this.window=d.window??Number.POSITIVE_INFINITY}async testOperation(d,m){for(let y of d.expressions)y=this.extractSortExpression(y),new l.AsyncEvaluator(y,a.ActorQueryOperation.getAsyncExpressionContext(m));return!0}async runOperation(d,m){const y=await this.mediatorQueryOperation.mediate({operation:d.input,context:m}),p=a.ActorQueryOperation.getSafeBindings(y),T={window:this.window},_={...a.ActorQueryOperation.getAsyncExpressionContext(m)};let{bindingsStream:w}=p;for(let S=d.expressions.length-1;S>=0;S--){let I=d.expressions[S];const j=this.isAscending(I);I=this.extractSortExpression(I);const x=new l.AsyncEvaluator(I,_),v=async(D,G,W)=>{try{const U=await x.evaluate(D);W({bindings:D,result:U})}catch(U){(0,l.isExpressionError)(U)||w.emit("error",U),W({bindings:D,result:void 0})}G()},O=w.transform({transform:v});w=new o.SortIterator(O,(D,G)=>(0,l.orderTypes)(D.result,G.result,j),T).map(({bindings:D,result:G})=>D)}return{type:"bindings",bindingsStream:w,metadata:p.metadata}}extractSortExpression(d){const{expressionType:m,operator:y}=d;return m!==c.Algebra.expressionTypes.OPERATOR?d:y==="desc"?d.args[0]:d}isAscending(d){const{expressionType:m,operator:y}=d;return m!==c.Algebra.expressionTypes.OPERATOR?!0:y!=="desc"}}e.ActorQueryOperationOrderBySparqlee=i},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/SortIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortIterator=void 0;const a=t("asynciterator");class c extends a.TransformIterator{constructor(o,i,u){super(o,u);const d=u&&u.window;this.windowLength=Number.isFinite(d)&&d>0?d:Number.POSITIVE_INFINITY,this.sort=i,this.sorted=[]}_read(o,i){let u,{length:d}=this.sorted;for(;d!==this.windowLength&&(u=this.source.read(),u!==null);){let m=0,y=d-1,p,T;for(;m<=y;)p=Math.trunc((m+y)/2),T=this.sort(u,this.sorted[p]),T<0?m=p+1:T>0?y=p-1:(m=p,y=-1);this.sorted.splice(m,0,u),d++}d===this.windowLength&&this._push(this.sorted.pop()),i()}_flush(o){let{length:i}=this.sorted;for(;i--;)this._push(this.sorted.pop());o()}}e.SortIterator=c},"../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/ActorQueryOperationOrderBySparqlee.js"),e)},"../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathAlt=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("../node_modules/@comunica/actor-query-operation-union/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),o=t("asynciterator"),i=t("sparqlalgebrajs");class u extends a.ActorAbstractPath{constructor(m){super(m,i.Algebra.types.ALT)}async runOperation(m,y){const p=m.predicate,T=(await Promise.all(p.input.map(S=>this.mediatorQueryOperation.mediate({context:y,operation:a.ActorAbstractPath.FACTORY.createPath(m.subject,S,m.object,m.graph)})))).map(l.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new o.UnionIterator(T.map(S=>S.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(T.map(S=>S.metadata())).then(S=>c.ActorQueryOperationUnion.unionMetadata(S,!0))}}}e.ActorQueryOperationPathAlt=u},"../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-alt/lib/ActorQueryOperationPathAlt.js"),e)},"../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathInv=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorAbstractPath{constructor(i){super(i,c.Algebra.types.INV)}async runOperation(i,u){const d=i.predicate,m=a.ActorAbstractPath.FACTORY.createPath(i.object,d.path,i.subject,i.graph);return this.mediatorQueryOperation.mediate({operation:m,context:u})}}e.ActorQueryOperationPathInv=l},"../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-inv/lib/ActorQueryOperationPathInv.js"),e)},"../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathLink=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorAbstractPath{constructor(i){super(i,c.Algebra.types.LINK)}async runOperation(i,u){const d=i.predicate,m=a.ActorAbstractPath.FACTORY.createPattern(i.subject,d.iri,i.object,i.graph);return this.mediatorQueryOperation.mediate({operation:m,context:u})}}e.ActorQueryOperationPathLink=l},"../node_modules/@comunica/actor-query-operation-path-link/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-link/lib/ActorQueryOperationPathLink.js"),e)},"../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathNps=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class o extends a.ActorAbstractPath{constructor(u){super(u,l.Algebra.types.NPS)}async runOperation(u,d){const m=u.predicate,y=this.generateVariable(u),p=a.ActorAbstractPath.FACTORY.createPattern(u.subject,y,u.object,u.graph),T=c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:p,context:d}));return{type:"bindings",bindingsStream:T.bindingsStream.transform({filter(w){return!m.iris.some(S=>S.equals(w.get(y)))},transform(w,S,I){I(w.delete(y)),S()}}),metadata:T.metadata}}}e.ActorQueryOperationPathNps=o},"../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-nps/lib/ActorQueryOperationPathNps.js"),e)},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathOneOrMore=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),o=t("asynciterator"),i=t("sparqlalgebrajs"),u=new c.BindingsFactory;class d extends a.ActorAbstractPath{constructor(y){super(y,i.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(y,p){const T=await this.isPathArbitraryLengthDistinct(p,y);if(T.operation)return T.operation;p=T.context;const _=y.predicate;if(y.subject.termType!=="Variable"&&y.object.termType==="Variable"){const j=y.object,x=await this.getObjectsPredicateStarEval(y.subject,_.path,j,y.graph,p,!1),v=y.graph.termType==="Variable"?[j,y.graph]:[j];return{type:"bindings",bindingsStream:x.bindingsStream,metadata:async()=>({...await x.metadata(),variables:v})}}if(y.subject.termType==="Variable"&&y.object.termType==="Variable"){const j=a.ActorAbstractPath.FACTORY.createDistinct(a.ActorAbstractPath.FACTORY.createPath(y.subject,y.predicate.path,y.object,y.graph)),x=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:p,operation:j})),v=y.subject,O=y.object,N={},D=new o.MultiTransformIterator(x.bindingsStream,{multiTransform:W=>{const U=W.get(v),Q=W.get(O),Z=y.graph.termType==="Variable"?W.get(y.graph):y.graph;return new o.TransformIterator(async()=>{const L=new o.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(v,O,U,Q,_.path,Z,p,N,{},L,{count:0}),L.transform({transform(M,V,H){y.graph.termType==="Variable"&&(M=M.set(y.graph,Z)),H(M),V()}})},{maxBufferSize:128})},autoStart:!1}),G=y.graph.termType==="Variable"?[v,O,y.graph]:[v,O];return{type:"bindings",bindingsStream:D,metadata:async()=>({...await x.metadata(),variables:G})}}if(y.subject.termType==="Variable"&&y.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:p,operation:a.ActorAbstractPath.FACTORY.createPath(y.object,a.ActorAbstractPath.FACTORY.createOneOrMorePath(a.ActorAbstractPath.FACTORY.createInv(_.path)),y.subject,y.graph)});const w=this.generateVariable(),S=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:p,operation:a.ActorAbstractPath.FACTORY.createPath(y.subject,_,w,y.graph)}));return{type:"bindings",bindingsStream:S.bindingsStream.transform({filter:j=>y.object.equals(j.get(w)),transform(j,x,v){const O=y.graph.termType==="Variable"?u.bindings([[y.graph,j.get(y.graph)]]):u.bindings();v(O),x()}}),metadata:async()=>({...await S.metadata(),variables:y.graph.termType==="Variable"?[y.graph]:[]})}}}e.ActorQueryOperationPathOneOrMore=d},"../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/ActorQueryOperationPathOneOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathSeq=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("sparqlalgebrajs");class o extends a.ActorAbstractPath{constructor(u){super(u,l.Algebra.types.SEQ)}async runOperation(u,d){const m=u.predicate;let y=u.subject;const p=[],T=await Promise.all(m.input.map((S,I)=>{const j=I===m.input.length-1?u.object:this.generateVariable(u,`b${I}`),x=a.ActorAbstractPath.FACTORY.createPath(y,S,j,u.graph),v=this.mediatorQueryOperation.mediate({context:d,operation:x});return y=j,I<m.input.length-1&&p.push(j),{output:v,operation:x}}).map(async({output:S,operation:I})=>({output:c.ActorQueryOperation.getSafeBindings(await S),operation:I}))),_=c.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:T,context:d}));return{type:"bindings",bindingsStream:_.bindingsStream.transform({transform(S,I,j){for(const x of p)S=S.delete(x);j(S),I()}}),async metadata(){const S=await _.metadata(),I=S.variables.filter(j=>!p.some(x=>x.value===j.value));return{...S,variables:I}}}}}e.ActorQueryOperationPathSeq=o},"../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-seq/lib/ActorQueryOperationPathSeq.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrMore=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),o=t("asynciterator"),i=t("../node_modules/rdf-string/index.js"),u=t("sparqlalgebrajs"),d=new c.BindingsFactory;class m extends a.ActorAbstractPath{constructor(p){super(p,u.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(p,T){const _=await this.isPathArbitraryLengthDistinct(T,p);if(_.operation)return _.operation;T=_.context;const w=p.predicate,S=p.subject.termType==="Variable",I=p.object.termType==="Variable";if(p.subject.termType==="Variable"&&p.object.termType==="Variable"){const D=this.generateVariable(p),G=a.ActorAbstractPath.FACTORY.createPattern(p.subject,D,p.object,p.graph),W=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:T,operation:G})),U=p.subject,Q=p.object,Z=new Set,L={},M=new o.MultiTransformIterator(W.bindingsStream,{multiTransform:H=>{const J=H.get(U),ce=H.get(Q),oe=p.graph.termType==="Variable"?H.get(p.graph):p.graph,le=(0,i.termToString)(J)+(0,i.termToString)(oe),ue=(0,i.termToString)(ce)+(0,i.termToString)(oe);return new o.TransformIterator(async()=>{if(Z.has(le)&&Z.has(ue))return new o.EmptyIterator;const be=new o.BufferedIterator,Ee={count:0};return Z.has(le)||(Z.add(le),await this.getSubjectAndObjectBindingsPredicateStar(U,Q,J,J,w.path,oe,T,L,{},be,Ee)),Z.has(ue)||(Z.add(ue),await this.getSubjectAndObjectBindingsPredicateStar(U,Q,ce,ce,w.path,oe,T,L,{},be,Ee)),be.transform({transform(Ae,xe,Oe){p.graph.termType==="Variable"&&(Ae=Ae.set(p.graph,oe)),Oe(Ae),xe()}})})}}),V=p.graph.termType==="Variable"?[U,p.object,p.graph]:[U,p.object];return{type:"bindings",bindingsStream:M,metadata:async()=>({...await W.metadata(),variables:V})}}if(!S&&!I){const D=this.generateVariable(),G=await this.getObjectsPredicateStarEval(p.subject,w.path,D,p.graph,T,!0);return{type:"bindings",bindingsStream:G.bindingsStream.transform({filter:U=>p.object.equals(U.get(D)),transform(U,Q,Z){const L=p.graph.termType==="Variable"?d.bindings([[p.graph,U.get(p.graph)]]):d.bindings();Z(L),Q()}}),metadata:async()=>({...await G.metadata(),variables:p.graph.termType==="Variable"?[p.graph]:[]})}}const j=S?p.object:p.subject,x=S?p.subject:p.object,v=S?a.ActorAbstractPath.FACTORY.createInv(w.path):w.path,O=await this.getObjectsPredicateStarEval(j,v,x,p.graph,T,!0),N=p.graph.termType==="Variable"?[x,p.graph]:[x];return{type:"bindings",bindingsStream:O.bindingsStream,metadata:async()=>({...await O.metadata(),variables:N})}}}e.ActorQueryOperationPathZeroOrMore=m},"../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/ActorQueryOperationPathZeroOrMore.js"),e)},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationPathZeroOrOne=void 0;const a=t("../node_modules/@comunica/actor-abstract-path/lib/index.js"),c=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),o=t("asynciterator"),i=t("sparqlalgebrajs"),u=new c.BindingsFactory;class d extends a.ActorAbstractPath{constructor(y){super(y,i.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(y,p){const T=y.predicate,_=y.subject.termType==="Variable",w=y.object.termType==="Variable",S=[];if(!_&&!w&&y.subject.equals(y.object))return{type:"bindings",bindingsStream:new o.SingletonIterator(u.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};if(_&&w)throw new Error("ZeroOrOne path expressions with 2 variables not supported yet");const I=await this.isPathArbitraryLengthDistinct(p,y);if(I.operation)return I.operation;p=I.context,y.subject.termType==="Variable"&&S.push(u.bindings([[y.subject,y.object]])),y.object.termType==="Variable"&&S.push(u.bindings([[y.object,y.subject]]));const j=l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:p,operation:a.ActorAbstractPath.FACTORY.createPath(y.subject,T.path,y.object,y.graph)}));return{type:"bindings",bindingsStream:j.bindingsStream.prepend(S),metadata:j.metadata}}}e.ActorQueryOperationPathZeroOrOne=d},"../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/ActorQueryOperationPathZeroOrOne.js"),e)},"../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationProject=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/data-factory/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),o=new l.DataFactory;class i extends a.ActorQueryOperationTypedMediated{constructor(d){super(d,"project")}async testOperation(d,m){return!0}async runOperation(d,m){const y=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:d.input,context:m})),p=await y.metadata(),T=d.variables,_=p.variables.filter(j=>!T.some(x=>j.value===x.value)),w=T.filter(j=>!p.variables.some(x=>j.value===x.value));if(w.length>0)throw new Error(`Variables '${w.map(j=>`?${j.value}`)}' are used in the projection result, but are not assigned.`);let S=_.length===0?y.bindingsStream:y.bindingsStream.transform({map(j){for(const x of _)j=j.delete(x);return j},autoStart:!1}),I=0;return S=S.transform({map(j){I++;const x=new Map;return j.map(v=>{if(v instanceof c.BlankNodeBindingsScoped){let O=x.get(v.value);return O||(O=o.blankNode(`${v.value}${I}`),x.set(v.value,O)),O}return v})},autoStart:!1}),{type:"bindings",bindingsStream:S,metadata:async()=>({...p,variables:T})}}}e.ActorQueryOperationProject=i},"../node_modules/@comunica/actor-query-operation-project/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-project/lib/ActorQueryOperationProject.js"),e)},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationQuadpattern=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),o=t("../node_modules/rdf-data-factory/index.js"),i=t("../node_modules/rdf-terms/index.js"),u=t("sparqlalgebrajs"),d=new a.BindingsFactory,m=new o.DataFactory,y=new u.Factory;class p extends c.ActorQueryOperationTyped{constructor(_){super(_,"pattern")}static isTermVariable(_){return _.termType==="Variable"}static getVariables(_){return(0,i.uniqTerms)((0,i.getTerms)(_).filter(p.isTermVariable))}static getDuplicateElementLinks(_){const w={};let S=!1;for(const j of i.QUAD_TERM_NAMES)if(_[j].termType==="Variable"){const x=_[j].value,v=(w[x]||(w[x]=[])).push(j);S=S||v>1}if(!S)return;const I={};for(const j in w){const x=w[j],v=x.slice(1);v.length>0&&(I[x[0]]=v)}return I}static validateMetadata(_){for(const w of["cardinality","canContainUndefs"])if(!(w in _))throw new Error(`Invalid metadata: missing ${w} in ${JSON.stringify(_)}`);return _}static getMetadata(_,w,S){return()=>new Promise((I,j)=>{_.getProperty("metadata",x=>I(x)),_.on("error",j)}).then(I=>("canContainUndefs"in I||(I.canContainUndefs=!1),p.quadsMetadataToBindingsMetadata(p.validateMetadata(I),w,S)))}static quadsMetadataToBindingsMetadata(_,w,S){return{..._,order:_.order?p.quadsOrderToBindingsOrder(_.order,w):void 0,availableOrders:_.availableOrders?_.availableOrders.map(I=>({cost:I.cost,terms:p.quadsOrderToBindingsOrder(I.terms,w)})):void 0,variables:S}}static quadsOrderToBindingsOrder(_,w){const S={};return _.map(I=>{const j=w[I.term];if(j&&!S[j])return S[j]=!0,{term:m.variable(j),direction:I.direction}}).filter(I=>!!I)}async testOperation(_,w){return!0}async runOperation(_,w){_.context&&(w=w.merge(_.context));let S=_;const I=this.unionDefaultGraph||w.get(l.KeysQueryOperation.unionDefaultGraph);_.graph.termType==="DefaultGraph"&&I&&(S=y.createPattern(_.subject,_.predicate,_.object,m.variable("__comunica:defaultGraph")));const j=await this.mediatorResolveQuadPattern.mediate({pattern:S,context:w}),x=p.getVariables(_),v=(0,i.reduceTerms)(_,(G,W,U)=>(W.termType==="Variable"&&(G[U]=W.value),G),{}),O=(G,W,U)=>{const Q=v[U];return Q&&G.push([m.variable(Q),W]),G},N=p.getMetadata(j.data,v,x);return{type:"bindings",bindingsStream:new c.ClosableTransformIterator(async()=>{let G=j.data;const W=p.getDuplicateElementLinks(_);return _.graph.termType==="Variable"&&!I&&(G=G.filter(U=>U.graph.termType!=="DefaultGraph")),W&&(G=G.filter(U=>{for(const Q of i.TRIPLE_TERM_NAMES)for(const Z of W[Q]||[])if(!U[Q].equals(U[Z]))return!1;return!0})),G.map(U=>d.bindings((0,i.reduceTerms)(U,O,[])))},{autoStart:!1,onClose:()=>j.data.destroy()}),metadata:N}}}e.ActorQueryOperationQuadpattern=p},"../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-quadpattern/lib/ActorQueryOperationQuadpattern.js"),e)},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationReducedHash=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/actor-query-operation-reduced-hash/node_modules/lru-cache/index.js");class l extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"reduced")}async testOperation(i,u){return!0}async runOperation(i,u){const d=a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:i.input,context:u}));return{type:"bindings",bindingsStream:d.bindingsStream.filter(await this.newHashFilter(u)),metadata:d.metadata}}async newHashFilter(i){const{hashFunction:u}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:i}),d=new c({max:this.cacheSize});return m=>{const y=u(m);return d.has(y)?!1:(d.set(y,!0),!0)}}}e.ActorQueryOperationReducedHash=l},"../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/ActorQueryOperationReducedHash.js"),e)},"../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationService=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),o=t("asynciterator"),i=new a.BindingsFactory;class u extends c.ActorQueryOperationTypedMediated{constructor(m){super(m,"service")}async testOperation(m,y){if(m.name.termType!=="NamedNode")throw new Error(`${this.name} can only query services by IRI, while a ${m.name.termType} was given.`);return!0}async runOperation(m,y){const p=m.name.value;let T=y.delete(l.KeysRdfResolveQuadPattern.source).delete(l.KeysRdfResolveQuadPattern.sources).delete(l.KeysInitQuery.queryString);const _=this.forceSparqlEndpoint?"sparql":void 0;T=T.set(l.KeysRdfResolveQuadPattern.sources,[{type:_,value:p}]);let w;try{w=c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:m.input,context:T}))}catch(S){if(m.silent)w={bindingsStream:new o.SingletonIterator(i.bindings()),type:"bindings",metadata:async()=>({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};else throw S}return w}}e.ActorQueryOperationService=u},"../node_modules/@comunica/actor-query-operation-service/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-service/lib/ActorQueryOperationService.js"),e)},"../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationSlice=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/context-entries/lib/index.js");class l extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"slice")}async testOperation(i,u){return!0}async runOperation(i,u){i.length&&(u=u.set(c.KeysQueryOperation.limitIndicator,i.length));const d=await this.mediatorQueryOperation.mediate({operation:i.input,context:u});if(d.type==="bindings")return{type:"bindings",bindingsStream:this.sliceStream(d.bindingsStream,i),metadata:this.sliceMetadata(d,i)};if(d.type==="quads")return{type:"quads",quadStream:this.sliceStream(d.quadStream,i),metadata:this.sliceMetadata(d,i)};throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${d.type}'`)}sliceStream(i,u){const d=!!u.length||u.length===0,{start:m}=u,y=d?u.start+u.length-1:Number.POSITIVE_INFINITY;return i.transform({offset:m,limit:Math.max(y-m+1,0),autoStart:!1})}sliceMetadata(i,u){const d=!!u.length||u.length===0;return()=>i.metadata().then(m=>{const y={...m.cardinality};return Number.isFinite(y.value)&&(y.value=Math.max(0,y.value-u.start),d&&(y.value=Math.min(y.value,u.length))),{...m,cardinality:y}})}}e.ActorQueryOperationSlice=l},"../node_modules/@comunica/actor-query-operation-slice/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-slice/lib/ActorQueryOperationSlice.js"),e)},"../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUnion=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("asynciterator"),l=t("../node_modules/rdf-terms/index.js");class o extends a.ActorQueryOperationTypedMediated{constructor(u){super(u,"union")}static unionVariables(u){return(0,l.uniqTerms)(u.flat())}static unionMetadata(u,d){const m={type:"exact",value:0};for(const p of u)if(p.cardinality.value&&Number.isFinite(p.cardinality.value)||p.cardinality.value===0)p.cardinality.type==="estimate"&&(m.type="estimate"),m.value+=p.cardinality.value;else{m.type="estimate",m.value=Number.POSITIVE_INFINITY;break}const y={cardinality:m,canContainUndefs:u.some(p=>p.canContainUndefs)};return d&&(y.variables=o.unionVariables(u.map(p=>p.variables))),y}async testOperation(u,d){return!0}async runOperation(u,d){const m=(await Promise.all(u.input.map(T=>this.mediatorQueryOperation.mediate({operation:T,context:d})))).map(a.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new c.UnionIterator(m.map(T=>T.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(m.map(T=>T.metadata())).then(T=>o.unionMetadata(T,!0))}}}e.ActorQueryOperationUnion=o},"../node_modules/@comunica/actor-query-operation-union/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-union/lib/ActorQueryOperationUnion.js"),e)},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationAddRewrite=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/rdf-data-factory/index.js"),l=t("sparqlalgebrajs"),o=new c.DataFactory;class i extends a.ActorQueryOperationTypedMediated{constructor(d){super(d,"add"),this.factory=new l.Factory}async testOperation(d,m){return a.ActorQueryOperation.throwOnReadOnly(m),!0}runOperation(d,m){const y=d.destination==="DEFAULT"?o.defaultGraph():d.destination,p=d.source==="DEFAULT"?o.defaultGraph():d.source,T=this.factory.createDeleteInsert(void 0,[this.factory.createPattern(o.variable("s"),o.variable("p"),o.variable("o"),y)],this.factory.createPattern(o.variable("s"),o.variable("p"),o.variable("o"),p));return this.mediatorQueryOperation.mediate({operation:T,context:m})}}e.ActorQueryOperationAddRewrite=i},"../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/ActorQueryOperationAddRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationClear=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/rdf-data-factory/index.js"),l=new c.DataFactory;class o extends a.ActorQueryOperationTypedMediated{constructor(u){super(u,"clear")}async testOperation(u,d){return a.ActorQueryOperation.throwOnReadOnly(d),!0}async runOperation(u,d){let m;u.source==="DEFAULT"?m=l.defaultGraph():typeof u.source=="string"?m=u.source:m=[u.source];const{execute:y}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:m,requireExistence:!u.silent,dropGraphs:!1},context:d});return{type:"void",execute:y}}}e.ActorQueryOperationClear=o},"../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-clear/lib/ActorQueryOperationClear.js"),e)},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateCompositeUpdate=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class c extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"compositeupdate")}async testOperation(o,i){return a.ActorQueryOperation.throwOnReadOnly(i),!0}async runOperation(o,i){return{type:"void",execute:()=>(async()=>{for(const d of o.updates)await a.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:d,context:i})).execute()})()}}}e.ActorQueryOperationUpdateCompositeUpdate=c},"../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/ActorQueryOperationUpdateCompositeUpdate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCopyRewrite=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"copy"),this.factory=new c.Factory}async testOperation(i,u){return a.ActorQueryOperation.throwOnReadOnly(u),!0}runOperation(i,u){if(typeof i.destination=="string"&&typeof i.source=="string"&&i.destination===i.source||typeof i.destination!="string"&&typeof i.source!="string"&&i.destination.equals(i.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const d=this.factory.createCompositeUpdate([this.factory.createDrop(i.destination,!0),this.factory.createAdd(i.source,i.destination,i.silent)]);return this.mediatorQueryOperation.mediate({operation:d,context:u})}}e.ActorQueryOperationCopyRewrite=l},"../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/ActorQueryOperationCopyRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationCreate=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js");class c extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"create")}async testOperation(o,i){return a.ActorQueryOperation.throwOnReadOnly(i),!0}async runOperation(o,i){const{execute:u}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[o.source],requireNonExistence:!o.silent},context:i});return{type:"void",execute:u}}}e.ActorQueryOperationCreate=c},"../node_modules/@comunica/actor-query-operation-update-create/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-create/lib/ActorQueryOperationCreate.js"),e)},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationUpdateDeleteInsert=void 0;const a=t("../node_modules/@comunica/actor-query-operation-construct/lib/index.js"),c=t("../node_modules/@comunica/bindings-factory/lib/index.js"),l=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),o=t("asynciterator"),i=new c.BindingsFactory;class u extends l.ActorQueryOperationTypedMediated{constructor(m){super(m,"deleteinsert"),this.blankNodeCounter=0}async testOperation(m,y){return l.ActorQueryOperation.throwOnReadOnly(y),!0}async runOperation(m,y){const p=m.where?l.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:m.where,context:y})).bindingsStream:new o.ArrayIterator([i.bindings()],{autoStart:!1});let T,_;m.insert&&(T=new a.BindingsToQuadsIterator(m.insert.map(a.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),p.clone(),!1),this.blankNodeCounter++),m.delete&&(_=new a.BindingsToQuadsIterator(m.delete.map(a.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),p.clone(),!1),this.blankNodeCounter++);const{execute:w}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:T,quadStreamDelete:_,context:y});return{type:"void",execute:w}}}e.ActorQueryOperationUpdateDeleteInsert=u},"../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/ActorQueryOperationUpdateDeleteInsert.js"),e)},"../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationDrop=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/rdf-data-factory/index.js"),l=new c.DataFactory;class o extends a.ActorQueryOperationTypedMediated{constructor(u){super(u,"drop")}async testOperation(u,d){return a.ActorQueryOperation.throwOnReadOnly(d),!0}async runOperation(u,d){let m;u.source==="DEFAULT"?m=l.defaultGraph():typeof u.source=="string"?m=u.source:m=[u.source];const{execute:y}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:m,requireExistence:!u.silent,dropGraphs:!0},context:d});return{type:"void",execute:y}}}e.ActorQueryOperationDrop=o},"../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-drop/lib/ActorQueryOperationDrop.js"),e)},"../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationLoad=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/rdf-data-factory/index.js"),o=t("sparqlalgebrajs"),i=new l.DataFactory;class u extends a.ActorQueryOperationTypedMediated{constructor(m){super(m,"load"),this.factory=new o.Factory,this.constructOperation=this.factory.createConstruct(this.factory.createPattern(i.variable("s"),i.variable("p"),i.variable("o")),[this.factory.createPattern(i.variable("s"),i.variable("p"),i.variable("o"))])}async testOperation(m,y){return a.ActorQueryOperation.throwOnReadOnly(y),!0}async runOperation(m,y){let p=y.set(c.KeysRdfResolveQuadPattern.sources,[m.source.value]);m.silent&&(p=p.set(c.KeysInitQuery.lenient,!0));let _=u.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.constructOperation,context:p})).quadStream;m.destination&&(_=_.map(S=>i.quad(S.subject,S.predicate,S.object,m.destination)));const{execute:w}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:_,context:y});return{type:"void",execute:w}}}e.ActorQueryOperationLoad=u},"../node_modules/@comunica/actor-query-operation-update-load/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-load/lib/ActorQueryOperationLoad.js"),e)},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationMoveRewrite=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"move"),this.factory=new c.Factory}async testOperation(i,u){return a.ActorQueryOperation.throwOnReadOnly(u),!0}runOperation(i,u){if(typeof i.destination=="string"&&typeof i.source=="string"&&i.destination===i.source||typeof i.destination!="string"&&typeof i.source!="string"&&i.destination.equals(i.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const d=[this.factory.createDrop(i.destination,!0),this.factory.createAdd(i.source,i.destination,i.silent),this.factory.createDrop(i.source)],m=this.factory.createCompositeUpdate(d);return this.mediatorQueryOperation.mediate({operation:m,context:u})}}e.ActorQueryOperationMoveRewrite=l},"../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/ActorQueryOperationMoveRewrite.js"),e)},"../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationValues=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("asynciterator"),o=t("../node_modules/rdf-data-factory/index.js"),i=new a.BindingsFactory,u=new o.DataFactory;class d extends c.ActorQueryOperationTyped{constructor(y){super(y,"values")}async testOperation(y,p){return!0}async runOperation(y,p){const T=new l.ArrayIterator(y.bindings.map(S=>i.bindings(Object.entries(S).map(([I,j])=>[u.variable(I.slice(1)),j])))),_=y.variables;return{type:"bindings",bindingsStream:T,metadata:()=>Promise.resolve({cardinality:{type:"exact",value:y.bindings.length},canContainUndefs:y.bindings.some(S=>_.some(I=>!(`?${I.value}`in S))),variables:_})}}}e.ActorQueryOperationValues=d},"../node_modules/@comunica/actor-query-operation-values/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-operation-values/lib/ActorQueryOperationValues.js"),e)},"../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParseSparql=void 0;const a=t("../node_modules/@comunica/bus-query-parse/lib/index.js"),c=t("sparqlalgebrajs"),l=t("sparqljs");class o extends a.ActorQueryParse{constructor(u){super(u),this.prefixes=Object.freeze(this.prefixes)}async test(u){if(u.queryFormat&&u.queryFormat.language!=="sparql")throw new Error("This actor can only parse SPARQL queries");return!0}async run(u){const m=new l.Parser({prefixes:this.prefixes,baseIRI:u.baseIRI}).parse(u.query);return{baseIRI:m.type==="query"?m.base:void 0,operation:(0,c.translate)(m,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:u.baseIRI})}}}e.ActorQueryParseSparql=o},"../node_modules/@comunica/actor-query-parse-sparql/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-query-parse-sparql/lib/ActorQueryParseSparql.js"),e)},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSortCardinality=void 0;const a=t("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js");class c extends a.ActorRdfJoinEntriesSort{constructor(o){super(o)}async test(o){return!0}async run(o){return{entries:[...o.entries].sort((u,d)=>u.metadata.cardinality.value-d.metadata.cardinality.value)}}}e.ActorRdfJoinEntriesSortCardinality=c},"../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/ActorRdfJoinEntriesSortCardinality.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinHash=void 0;const a=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),c=t("../node_modules/asyncjoin/index.js");class l extends a.ActorRdfJoin{constructor(i){super(i,{logicalType:"inner",physicalName:"hash",limitEntries:2})}async getOutput(i){const u=await a.ActorRdfJoin.getMetadatas(i.entries),d=a.ActorRdfJoin.overlappingVariables(u);return{result:{type:"bindings",bindingsStream:new c.HashJoin(i.entries[0].output.bindingsStream,i.entries[1].output.bindingsStream,y=>a.ActorRdfJoin.hash(y,d),a.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(i.entries,u,i.context)}}}async getJoinCoefficients(i,u){const d=a.ActorRdfJoin.getRequestInitialTimes(u),m=a.ActorRdfJoin.getRequestItemTimes(u);return{iterations:u[0].cardinality.value+u[1].cardinality.value,persistedItems:u[0].cardinality.value,blockingItems:u[0].cardinality.value,requestTime:d[0]+u[0].cardinality.value*m[0]+d[1]+u[1].cardinality.value*m[1]}}}e.ActorRdfJoinHash=l},"../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/ActorRdfJoinHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiBind=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),o=t("asynciterator"),i=t("sparqlalgebrajs");class u extends c.ActorRdfJoin{constructor(m){super(m,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0})}static createBindStream(m,y,p,T,_){const w=S=>{const I=p.map(x=>(0,a.materializeOperation)(x,S,{bindFilter:!1})),j=x=>x.merge(S);return new o.TransformIterator(async()=>(await T(I,S)).transform({map:j}),{maxBufferSize:128,autoStart:!1})};switch(m){case"depth-first":return new o.MultiTransformIterator(y,{autoStart:!1,multiTransform:w,optional:_});case"breadth-first":return new o.UnionIterator(y.transform({map:w,optional:_}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${m}`)}}async sortJoinEntries(m,y){if(m.some(S=>S.metadata.canContainUndefs))return m;const T={};for(const S of m)for(const I of S.metadata.variables){let j=T[I.value];j||(j=0),T[I.value]=++j}const _=[];for(const[S,I]of Object.entries(T))I>=2&&_.push(S);if(_.length===0)throw new Error("Bind join can only join entries with at least one common variable");const w=[];for(const S of m){let I=!1;for(const j of S.metadata.variables)if(_.includes(j.value)){I=!0;break}I||w.push(S)}return(await this.mediatorJoinEntriesSort.mediate({entries:m,context:y})).entries.sort((S,I)=>{const j=w.includes(S),x=w.includes(I);return j===x?0:j?1:-1})}async getOutput(m){const y=await c.ActorRdfJoin.getEntriesWithMetadatas(m.entries),p=await this.sortJoinEntries(y,m.context);this.logDebug(m.context,"First entry for Bind Join: ",()=>({entry:p[0].operation,metadata:p[0].metadata}));for(const[I,j]of p.entries())I!==0&&j.output.bindingsStream.close();const T=p[0].output,_=[...p];_.splice(0,1);const w=m.context.set(l.KeysQueryOperation.joinLeftMetadata,p[0].metadata).set(l.KeysQueryOperation.joinRightMetadatas,_.map(I=>I.metadata));return{result:{type:"bindings",bindingsStream:u.createBindStream(this.bindOrder,T.bindingsStream,_.map(I=>I.operation),async(I,j)=>{const x=I.length===1?I[0]:u.FACTORY.createJoin(I);return a.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:x,context:w?.set(l.KeysQueryOperation.joinBindings,j)})).bindingsStream},!1),metadata:()=>this.constructResultMetadata(p,p.map(I=>I.metadata),m.context)},physicalPlanMetadata:{bindIndex:y.indexOf(p[0]),bindOrder:this.bindOrder}}}async getJoinCoefficients(m,y){const p=await this.sortJoinEntries(m.entries.map((N,D)=>({...N,metadata:y[D]})),m.context);y=p.map(N=>N.metadata);const T=c.ActorRdfJoin.getRequestInitialTimes(y),_=c.ActorRdfJoin.getRequestItemTimes(y),w=[...p],S=[...T],I=[..._];if(w.splice(0,1),S.splice(0,1),I.splice(0,1),w.some(N=>N.operation.type===i.Algebra.types.EXTEND||N.operation.type===i.Algebra.types.GROUP))throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const j=await Promise.all(w.map(async N=>(await this.mediatorJoinSelectivity.mediate({entries:[p[0],N],context:m.context})).selectivity*this.selectivityModifier)),x=w.map((N,D)=>N.metadata.cardinality.value*j[D]).reduce((N,D)=>N+D,0),v=S.reduce((N,D,G)=>N+D*j[G],0),O=I.reduce((N,D,G)=>N+D*j[G],0);return{iterations:y[0].cardinality.value*x,persistedItems:0,blockingItems:0,requestTime:T[0]+y[0].cardinality.value*(_[0]+v+x*O)}}}e.ActorRdfJoinMultiBind=u,u.FACTORY=new i.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/ActorRdfJoinMultiBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiEmpty=void 0;const a=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),c=t("asynciterator");class l extends a.ActorRdfJoin{constructor(i){super(i,{logicalType:"inner",physicalName:"multi-empty"})}async test(i){if((await a.ActorRdfJoin.getMetadatas(i.entries)).every(u=>a.ActorRdfJoin.getCardinality(u).value>0))throw new Error(`Actor ${this.name} can only join entries where at least one is empty`);return super.test(i)}async getOutput(i){for(const u of i.entries)u.output.bindingsStream.close();return{result:{bindingsStream:new c.ArrayIterator([],{autoStart:!1}),metadata:async()=>({cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:a.ActorRdfJoin.joinVariables(await a.ActorRdfJoin.getMetadatas(i.entries))}),type:"bindings"}}}async getJoinCoefficients(i,u){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinMultiEmpty=l},"../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/ActorRdfJoinMultiEmpty.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMultiSmallest=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("sparqlalgebrajs");class o extends c.ActorRdfJoin{constructor(u){super(u,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0})}async sortJoinEntries(u,d){return(await this.mediatorJoinEntriesSort.mediate({entries:u,context:d})).entries}async getOutput(u){const d=await this.sortJoinEntries(await c.ActorRdfJoin.getEntriesWithMetadatas([...u.entries]),u.context),m=d[0],y=d[1];d.splice(0,2);const p={output:a.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:u.type,entries:[m,y],context:u.context})),operation:o.FACTORY.createJoin([m.operation,y.operation],!1)};return d.push(p),{result:await this.mediatorJoin.mediate({type:u.type,entries:d,context:u.context})}}async getJoinCoefficients(u,d){d=[...d],d=(await this.sortJoinEntries(u.entries.map((T,_)=>({...T,metadata:d[_]})),u.context)).map(T=>T.metadata);const y=c.ActorRdfJoin.getRequestInitialTimes(d),p=c.ActorRdfJoin.getRequestItemTimes(d);return{iterations:d[0].cardinality.value*d[1].cardinality.value*d.slice(2).reduce((T,_)=>T*_.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:y[0]+d[0].cardinality.value*p[0]+y[1]+d[1].cardinality.value*p[1]+d.slice(2).reduce((T,_,w)=>T+y.slice(2)[w]+_.cardinality.value*p.slice(2)[w],0)}}}e.ActorRdfJoinMultiSmallest=o,o.FACTORY=new l.Factory},"../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/ActorRdfJoinMultiSmallest.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNestedLoop=void 0;const a=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),c=t("../node_modules/asyncjoin/index.js");class l extends a.ActorRdfJoin{constructor(i){super(i,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(i){return{result:{type:"bindings",bindingsStream:new c.NestedLoopJoin(i.entries[0].output.bindingsStream,i.entries[1].output.bindingsStream,a.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(i.entries,await a.ActorRdfJoin.getMetadatas(i.entries),i.context)}}}async getJoinCoefficients(i,u){const d=a.ActorRdfJoin.getRequestInitialTimes(u),m=a.ActorRdfJoin.getRequestItemTimes(u);return{iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:d[0]+u[0].cardinality.value*m[0]+d[1]+u[1].cardinality.value*m[1]}}}e.ActorRdfJoinNestedLoop=l},"../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/ActorRdfJoinNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinNone=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("asynciterator"),o=new a.BindingsFactory;class i extends c.ActorRdfJoin{constructor(d){super(d,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(d){if(d.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(d){return{result:{bindingsStream:new l.ArrayIterator([o.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinNone=i},"../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-none/lib/ActorRdfJoinNone.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSingle=void 0;const a=t("../node_modules/@comunica/bus-rdf-join/lib/index.js");class c extends a.ActorRdfJoin{constructor(o){super(o,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(o){if(o.entries.length!==1)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(o){return{result:o.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}e.ActorRdfJoinSingle=c},"../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-single/lib/ActorRdfJoinSingle.js"),e)},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSymmetricHash=void 0;const a=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),c=t("../node_modules/asyncjoin/index.js");class l extends a.ActorRdfJoin{constructor(i){super(i,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2})}async getOutput(i){const u=await a.ActorRdfJoin.getMetadatas(i.entries),d=a.ActorRdfJoin.overlappingVariables(u);return{result:{type:"bindings",bindingsStream:new c.SymmetricHashJoin(i.entries[0].output.bindingsStream,i.entries[1].output.bindingsStream,y=>l.hash(y,d),a.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(i.entries,u,i.context)}}}async getJoinCoefficients(i,u){const d=a.ActorRdfJoin.getRequestInitialTimes(u),m=a.ActorRdfJoin.getRequestItemTimes(u);return{iterations:u[0].cardinality.value+u[1].cardinality.value,persistedItems:u[0].cardinality.value+u[1].cardinality.value,blockingItems:0,requestTime:d[0]+u[0].cardinality.value*m[0]+d[1]+u[1].cardinality.value*m[1]}}}e.ActorRdfJoinSymmetricHash=l},"../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/ActorRdfJoinSymmetricHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHashUndef=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),l=t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js");class o extends c.ActorRdfJoin{constructor(u){super(u,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(u){const d=u.entries[1].output,m=u.entries[0].output,y=await c.ActorRdfJoin.getMetadatas(u.entries),p=c.ActorRdfJoin.overlappingVariables(y);if(p.length>0){const T=new l.BindingsIndex(p);return{result:{type:"bindings",bindingsStream:new a.ClosableTransformIterator(async()=>(await new Promise(w=>{d.bindingsStream.on("data",S=>T.add(S)),d.bindingsStream.on("end",w)}),m.bindingsStream.filter(w=>!T.contains(w))),{autoStart:!1,onClose(){d.bindingsStream.destroy(),m.bindingsStream.destroy()}}),async metadata(){const w=await m.metadata(),S=await m.metadata();return{...S,canContainUndefs:w.canContainUndefs||S.canContainUndefs}}}}}return{result:m}}async getJoinCoefficients(u,d){const m=c.ActorRdfJoin.getRequestInitialTimes(d),y=c.ActorRdfJoin.getRequestItemTimes(d);return{iterations:(d[0].cardinality.value+d[1].cardinality.value)*1.01,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:m[0]+d[0].cardinality.value*y[0]+m[1]+d[1].cardinality.value*y[1]}}}e.ActorRdfJoinMinusHashUndef=o},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/BindingsIndex.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsIndex=void 0;const a=t("../node_modules/rdf-string/index.js");class c{constructor(o){this.data={},this.keys=o}static hashTerm(o){return o&&o.termType!=="Variable"?(0,a.termToString)(o):""}add(o){if(this.isBindingsValid(o)){let i=this.data;for(const u of this.keys){const d=c.hashTerm(o.get(u));let m=i[d];m||(m=i[d]={}),i=m}}}contains(o){return this.isBindingsValid(o)?this.containsRecursive(o,this.keys,[this.data]):!1}isBindingsValid(o){let i=!1;for(const u of this.keys)if(o.get(u)){i=!0;break}return i}containsRecursive(o,i,u){if(i.length===0)return!0;let d;[d,...i]=i;for(const m of u){const y=c.hashTerm(o.get(d));if(y){const p=[m[y],m[""]].filter(Boolean);if(p.length===0)continue;if(this.containsRecursive(o,i,p))return!0}else{let p=Object.keys(m).map(T=>m[T]);if(p.length===0&&(p=[{}]),this.containsRecursive(o,i,p))return!0}}return!1}}e.BindingsIndex=c},"../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/ActorRdfJoinMinusHashUndef.js"),e)},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinMinusHash=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/bus-rdf-join/lib/index.js");class l extends c.ActorRdfJoin{constructor(i){super(i,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(i){const u=i.entries[1].output,d=i.entries[0].output,m=await c.ActorRdfJoin.getMetadatas(i.entries),y=c.ActorRdfJoin.overlappingVariables(m);if(y.length>0){const p={};return{result:{type:"bindings",bindingsStream:new a.ClosableTransformIterator(async()=>(await new Promise(_=>{u.bindingsStream.on("data",w=>{p[c.ActorRdfJoin.hash(w,y)]=!0}),u.bindingsStream.on("end",_)}),d.bindingsStream.filter(_=>!p[c.ActorRdfJoin.hash(_,y)])),{autoStart:!1,onClose(){u.bindingsStream.destroy(),d.bindingsStream.destroy()}}),metadata:d.metadata}}}return{result:d}}async getJoinCoefficients(i,u){const d=c.ActorRdfJoin.getRequestInitialTimes(u),m=c.ActorRdfJoin.getRequestItemTimes(u);return{iterations:u[0].cardinality.value+u[1].cardinality.value,persistedItems:u[0].cardinality.value,blockingItems:u[0].cardinality.value,requestTime:d[0]+u[0].cardinality.value*m[0]+d[1]+u[1].cardinality.value*m[1]}}}e.ActorRdfJoinMinusHash=l},"../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/ActorRdfJoinMinusHash.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalBind=void 0;const a=t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),o=t("../node_modules/@comunica/context-entries/lib/index.js"),i=t("sparqlalgebrajs");class u extends l.ActorRdfJoin{constructor(m){super(m,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0})}async getOutput(m){m.entries[1].output.bindingsStream.close();const y=m.context.set(o.KeysQueryOperation.joinLeftMetadata,await m.entries[0].output.metadata()).set(o.KeysQueryOperation.joinRightMetadatas,[await m.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:a.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,m.entries[0].output.bindingsStream,[m.entries[1].operation],async(T,_)=>{const w=T[0];return c.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:w,context:y?.set(o.KeysQueryOperation.joinBindings,_)})).bindingsStream},!0),metadata:async()=>await this.constructResultMetadata(m.entries,await l.ActorRdfJoin.getMetadatas(m.entries),m.context,{canContainUndefs:!0})}}}async getJoinCoefficients(m,y){const p=l.ActorRdfJoin.getRequestInitialTimes(y),T=l.ActorRdfJoin.getRequestItemTimes(y);if(m.entries[1].operation.type===i.Algebra.types.EXTEND||m.entries[1].operation.type===i.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const _=(await this.mediatorJoinSelectivity.mediate({entries:m.entries,context:m.context})).selectivity*this.selectivityModifier;return{iterations:y[0].cardinality.value*y[1].cardinality.value*_,persistedItems:0,blockingItems:0,requestTime:p[0]+y[0].cardinality.value*_*(T[0]+p[1]+y[1].cardinality.value*T[1])}}}e.ActorRdfJoinOptionalBind=u},"../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/ActorRdfJoinOptionalBind.js"),e)},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinOptionalNestedLoop=void 0;const a=t("../node_modules/@comunica/bus-rdf-join/lib/index.js"),c=t("../node_modules/asyncjoin/index.js");class l extends a.ActorRdfJoin{constructor(i){super(i,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(i){return{result:{type:"bindings",bindingsStream:new c.NestedLoopJoin(i.entries[0].output.bindingsStream,i.entries[1].output.bindingsStream,a.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(i.entries,await a.ActorRdfJoin.getMetadatas(i.entries),i.context,{canContainUndefs:!0})}}}async getJoinCoefficients(i,u){const d=a.ActorRdfJoin.getRequestInitialTimes(u),m=a.ActorRdfJoin.getRequestItemTimes(u);return{iterations:u[0].cardinality.value*u[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:d[0]+u[0].cardinality.value*m[0]+d[1]+u[1].cardinality.value*m[1]}}}e.ActorRdfJoinOptionalNestedLoop=l},"../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/ActorRdfJoinOptionalNestedLoop.js"),e)},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JoinTypes=e.ActorRdfJoinSelectivityVariableCounting=void 0;const a=t("../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js"),c=t("sparqlalgebrajs");class l extends a.ActorRdfJoinSelectivity{constructor(u){super(u)}async test(u){return{accuracy:.5}}static getPatternCost(u){let d=1;return u.subject.termType==="Variable"&&(d+=4),(u.predicate.termType==="Variable"||u.type===c.Algebra.types.PATH)&&(d+=1),u.object.termType==="Variable"&&(d+=2),u.graph.termType==="Variable"&&(d+=1),d/9}static getJoinTypes(u,d){const m=[];return u.subject.termType==="Variable"?(u.subject.equals(d.subject)&&m.push(o.unboundSS),d.type==="pattern"&&u.subject.equals(d.predicate)&&m.push(o.unboundSP),u.subject.equals(d.object)&&m.push(o.unboundSO),u.subject.equals(d.graph)&&m.push(o.unboundSG)):(u.subject.equals(d.subject)&&m.push(o.boundSS),d.type==="pattern"&&u.subject.equals(d.predicate)&&m.push(o.boundSP),u.subject.equals(d.object)&&m.push(o.boundSO),u.subject.equals(d.graph)&&m.push(o.boundSG)),u.type==="pattern"&&(u.predicate.termType==="Variable"?(u.predicate.equals(d.subject)&&m.push(o.unboundPS),d.type==="pattern"&&u.predicate.equals(d.predicate)&&m.push(o.unboundPP),u.predicate.equals(d.object)&&m.push(o.unboundPO),u.predicate.equals(d.graph)&&m.push(o.unboundPG)):(u.predicate.equals(d.subject)&&m.push(o.boundPS),d.type==="pattern"&&u.predicate.equals(d.predicate)&&m.push(o.boundPP),u.predicate.equals(d.object)&&m.push(o.boundPO),u.predicate.equals(d.graph)&&m.push(o.boundPG))),u.object.termType==="Variable"?(u.object.equals(d.subject)&&m.push(o.unboundOS),d.type==="pattern"&&u.object.equals(d.predicate)&&m.push(o.unboundOP),u.object.equals(d.object)&&m.push(o.unboundOO),u.object.equals(d.graph)&&m.push(o.unboundOG)):(u.object.equals(d.subject)&&m.push(o.boundOS),d.type==="pattern"&&u.object.equals(d.predicate)&&m.push(o.boundOP),u.object.equals(d.object)&&m.push(o.boundOO),u.object.equals(d.graph)&&m.push(o.boundOG)),u.graph.termType==="Variable"?(u.graph.equals(d.subject)&&m.push(o.unboundGS),d.type==="pattern"&&u.graph.equals(d.predicate)&&m.push(o.unboundGP),u.graph.equals(d.object)&&m.push(o.unboundGO),u.graph.equals(d.graph)&&m.push(o.unboundGG)):(u.graph.equals(d.subject)&&m.push(o.boundGS),d.type==="pattern"&&u.graph.equals(d.predicate)&&m.push(o.boundGP),u.graph.equals(d.object)&&m.push(o.boundGO),u.graph.equals(d.graph)&&m.push(o.boundGG)),m}static getOperationsPairwiseJoinCost(u,d){let m=l.MAX_PAIRWISE_COST;for(const y of l.getJoinTypes(u,d))switch(y){case o.boundSS:m-=2*2;break;case o.boundSP:m-=3*2;break;case o.boundSO:m-=1*2;break;case o.boundSG:m-=3*2;break;case o.boundPS:m-=3*2;break;case o.boundPP:return 1;case o.boundPO:m-=3*2;break;case o.boundPG:m-=3*2;break;case o.boundOS:m-=1*2;break;case o.boundOP:m-=3*2;break;case o.boundOO:m-=1*2;break;case o.boundOG:m-=3*2;break;case o.boundGS:m-=3*2;break;case o.boundGP:m-=3*2;break;case o.boundGO:m-=3*2;break;case o.boundGG:m-=3*2;break;case o.unboundSS:m-=2;break;case o.unboundSP:m-=3;break;case o.unboundSO:m-=1;break;case o.unboundSG:m-=3;break;case o.unboundPS:m-=3;break;case o.unboundPP:m-=3;break;case o.unboundPO:m-=3;break;case o.unboundPG:m-=3;break;case o.unboundOS:m-=1;break;case o.unboundOP:m-=3;break;case o.unboundOO:m-=1;break;case o.unboundOG:m-=3;break;case o.unboundGS:m-=3;break;case o.unboundGP:m-=3;break;case o.unboundGO:m-=3;break;case o.unboundGG:m-=3;break}return m/l.MAX_PAIRWISE_COST}static getOperationsJoinCost(u){const d=[];for(const p of u)c.Util.recurseOperation(p,{[c.Algebra.types.PATTERN](T){return d.push(T),!1},[c.Algebra.types.PATH](T){return d.push(T),!1}});let m=0,y=0;for(const p of d)for(const T of d)p!==T&&(m+=l.getOperationsPairwiseJoinCost(p,T),y++);return m/y*d.reduce((p,T)=>p*l.getPatternCost(T),1)}async run(u){return u.entries.length<=1?{selectivity:1}:{selectivity:l.getOperationsJoinCost(u.entries.map(d=>d.operation))}}}e.ActorRdfJoinSelectivityVariableCounting=l,l.MAX_PAIRWISE_COST=41*2;var o;(function(i){i[i.boundSS=0]="boundSS",i[i.boundSP=1]="boundSP",i[i.boundSO=2]="boundSO",i[i.boundSG=3]="boundSG",i[i.boundPS=4]="boundPS",i[i.boundPP=5]="boundPP",i[i.boundPO=6]="boundPO",i[i.boundPG=7]="boundPG",i[i.boundOS=8]="boundOS",i[i.boundOP=9]="boundOP",i[i.boundOO=10]="boundOO",i[i.boundOG=11]="boundOG",i[i.boundGS=12]="boundGS",i[i.boundGP=13]="boundGP",i[i.boundGO=14]="boundGO",i[i.boundGG=15]="boundGG",i[i.unboundSS=16]="unboundSS",i[i.unboundSP=17]="unboundSP",i[i.unboundSO=18]="unboundSO",i[i.unboundSG=19]="unboundSG",i[i.unboundPS=20]="unboundPS",i[i.unboundPP=21]="unboundPP",i[i.unboundPO=22]="unboundPO",i[i.unboundPG=23]="unboundPG",i[i.unboundOS=24]="unboundOS",i[i.unboundOP=25]="unboundOP",i[i.unboundOO=26]="unboundOO",i[i.unboundOG=27]="unboundOG",i[i.unboundGS=28]="unboundGS",i[i.unboundGP=29]="unboundGP",i[i.unboundGO=30]="unboundGO",i[i.unboundGG=31]="unboundGG"})(o=e.JoinTypes||(e.JoinTypes={}))},"../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/ActorRdfJoinSelectivityVariableCounting.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternFederated=void 0;const a=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),c=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js");class l extends a.ActorRdfResolveQuadPatternSource{constructor(i){super(i),this.emptyPatterns=new Map}async test(i){if(!(0,a.getContextSources)(i.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a sources array.`);return!0}async getSource(i){return new c.FederatedQuadSource(this.mediatorResolveQuadPattern,i,this.emptyPatterns,this.skipEmptyPatterns)}}e.ActorRdfResolveQuadPatternFederated=l},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FederatedQuadSource=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),l=t("../node_modules/@comunica/context-entries/lib/index.js"),o=t("../node_modules/@comunica/data-factory/lib/index.js"),i=t("asynciterator"),u=t("../node_modules/rdf-data-factory/index.js"),d=t("../node_modules/rdf-terms/index.js"),m=t("sparqlalgebrajs"),y=new u.DataFactory;class p{constructor(_,w,S,I){if(this.mediatorResolveQuadPattern=_,this.sources=w.get(l.KeysRdfResolveQuadPattern.sources),this.contextDefault=w.delete(l.KeysRdfResolveQuadPattern.sources),this.emptyPatterns=S,this.sourceIds=w.get(l.KeysRdfResolveQuadPattern.sourceIds)??new Map,this.skipEmptyPatterns=I,this.algebraFactory=new m.Factory,this.skipEmptyPatterns)for(const j of this.sources)this.emptyPatterns.has(j)||this.emptyPatterns.set(j,[])}static isTermBound(_){return _.termType!=="Variable"}static isSubPatternOf(_,w){return(!p.isTermBound(w.subject)||w.subject.equals(_.subject))&&(!p.isTermBound(w.predicate)||w.predicate.equals(_.predicate))&&(!p.isTermBound(w.object)||w.object.equals(_.object))&&(!p.isTermBound(w.graph)||w.graph.equals(_.graph))}static skolemizeTerm(_,w){return _.termType==="BlankNode"?new o.BlankNodeScoped(`bc_${w}_${_.value}`,y.namedNode(`${p.SKOLEM_PREFIX}${w}:${_.value}`)):_}static skolemizeQuad(_,w){return(0,d.mapTerms)(_,S=>p.skolemizeTerm(S,w))}static deskolemizeTerm(_,w){if(_.termType==="BlankNode"&&"skolemized"in _&&(_=_.skolemized),_.termType==="NamedNode"&&_.value.startsWith(p.SKOLEM_PREFIX)){const S=_.value.indexOf(":",p.SKOLEM_PREFIX.length);if(_.value.slice(p.SKOLEM_PREFIX.length,S)===w){const j=_.value.slice(S+1,_.value.length);return y.blankNode(j)}return null}return _}static deskolemizeQuad(_,w){return(0,d.mapTerms)(_,S=>{const I=p.deskolemizeTerm(S,w);return I||S})}isSourceEmpty(_,w){if(!this.skipEmptyPatterns)return!1;const S=this.emptyPatterns.get(_);if(S){for(const I of S)if(p.isSubPatternOf(w,I))return!0}return!1}getSourceId(_){let w=this.sourceIds.get(_);return w===void 0&&(w=`${this.sourceIds.size}`,this.sourceIds.set(_,w)),w}match(_,w,S,I){const j={cardinality:{type:"exact",value:0},canContainUndefs:!1};let x=this.sources.length;const v=(D,G,W,U)=>{this.skipEmptyPatterns&&!D&&W&&!this.isSourceEmpty(G,W)&&this.emptyPatterns.get(G).push(W),x||(U&&this.sources.length===1?N.setProperty("metadata",U):N.setProperty("metadata",j))},O=Promise.all(this.sources.map(async D=>{const G=this.getSourceId(D),W=p.deskolemizeTerm(_,G),U=p.deskolemizeTerm(w,G),Q=p.deskolemizeTerm(S,G),Z=p.deskolemizeTerm(I,G);let L,M=(0,c.getDataSourceContext)(D,this.contextDefault);M=M.set(l.KeysRdfResolveQuadPattern.source,D);let V;!W||!U||!Q||!Z||this.isSourceEmpty(D,L=this.algebraFactory.createPattern(W,U,Q,Z))?(V={data:new i.ArrayIterator([],{autoStart:!1})},V.data.setProperty("metadata",{cardinality:0,canContainUndefs:!1})):V=await this.mediatorResolveQuadPattern.mediate({pattern:L,context:M}),V.data.getProperty("metadata",J=>{!J.cardinality||!Number.isFinite(J.cardinality.value)?(j.cardinality.type="estimate",j.cardinality.value=Number.POSITIVE_INFINITY,x=0):(J.cardinality.type==="estimate"&&(j.cardinality.type="estimate"),j.cardinality.value+=J.cardinality.value,x--),(j.requestTime||J.requestTime)&&(j.requestTime=j.requestTime||0,J.requestTime=J.requestTime||0,j.requestTime+=J.requestTime),(j.pageSize||J.pageSize)&&(j.pageSize=j.pageSize||0,J.pageSize=J.pageSize||0,j.pageSize+=J.pageSize),J.canContainUndefs&&(j.canContainUndefs=!0),v(j.cardinality.value,D,L,J)});const H=V.data.map(J=>p.skolemizeQuad(J,G));return H.on("error",J=>N.emit("error",J)),H})),N=new a.ClosableTransformIterator(async()=>new i.UnionIterator(await O),{autoStart:!1,onClose(){O.then(D=>{for(const G of D)G.destroy()},()=>{})}});return this.sources.length===0&&N.setProperty("metadata",j),N}}e.FederatedQuadSource=p,p.SKOLEM_PREFIX="urn:comunica_skolem:source_"},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/ActorRdfResolveQuadPatternFederated.js"),e),c(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/FederatedQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternRdfJsSource=void 0;const a=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js"),c=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js");class l extends a.ActorRdfResolveQuadPatternSource{constructor(i){super(i)}async test(i){if(!(0,a.hasContextSingleSourceOfType)("rdfjsSource",i.context))throw new Error(`${this.name} requires a single source with an rdfjsSource to be present in the context.`);const u=(0,a.getContextSource)(i.context);if(!u||typeof u=="string"||!("match"in u)&&!u.value.match)throw new Error(`${this.name} received an invalid rdfjsSource.`);return!0}async getSource(i){const u=(0,a.getContextSource)(i);return new c.RdfJsQuadSource("match"in u?u:u.value)}}e.ActorRdfResolveQuadPatternRdfJsSource=l},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadSource=void 0;const a=t("asynciterator");class c{constructor(o){this.source=o}static nullifyVariables(o){return!o||o.termType==="Variable"?void 0:o}match(o,i,u,d){const m=this.source.match(c.nullifyVariables(o),c.nullifyVariables(i),c.nullifyVariables(u),c.nullifyVariables(d)),y=(0,a.wrap)(m,{autoStart:!1});return this.setMetadata(y,o,i,u,d).catch(p=>y.destroy(p)),y}async setMetadata(o,i,u,d,m){let y;if(this.source.countQuads)y=await this.source.countQuads(c.nullifyVariables(i),c.nullifyVariables(u),c.nullifyVariables(d),c.nullifyVariables(m));else{let p=0;y=await new Promise((T,_)=>{const w=this.source.match(c.nullifyVariables(i),c.nullifyVariables(u),c.nullifyVariables(d),c.nullifyVariables(m));w.on("error",_),w.on("end",()=>T(p)),w.on("data",()=>p++)})}o.setProperty("metadata",{cardinality:{type:"exact",value:y},canContainUndefs:!1})}}e.RdfJsQuadSource=c},"../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/ActorRdfResolveQuadPatternRdfJsSource.js"),e),c(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/IRdfJsSourceExtended.js"),e),c(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/RdfJsQuadSource.js"),e)},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsRdfJsStore=void 0;const a=t("../node_modules/@comunica/bus-rdf-update-quads/lib/index.js"),c=t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js");class l extends a.ActorRdfUpdateQuadsDestination{constructor(i){super(i)}async test(i){const u=(0,a.getContextDestination)(i.context);if(!u||typeof u=="string"||!("remove"in u)&&"value"in u&&!u.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(i){const u=(0,a.getContextDestination)(i);return new c.RdfJsQuadDestination("remove"in u?u:u.value)}}e.ActorRdfUpdateQuadsRdfJsStore=l},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/RdfJsQuadDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RdfJsQuadDestination=void 0;const a=t("../node_modules/rdf-data-factory/index.js"),c=t("../node_modules/rdf-string/index.js"),l=new a.DataFactory;class o{constructor(u){this.store=u}promisifyEventEmitter(u){return new Promise((d,m)=>{u.on("end",d),u.on("error",m)})}delete(u){return this.promisifyEventEmitter(this.store.remove(u))}insert(u){return this.promisifyEventEmitter(this.store.import(u))}async deleteGraphs(u,d,m){switch(u){case"ALL":await this.promisifyEventEmitter(this.store.deleteGraph(l.defaultGraph()));case"NAMED":const y=this.store.match(),p={};y.on("data",T=>{T.graph.termType!=="DefaultGraph"&&(p[(0,c.termToString)(T.graph)]=!0)}),await this.promisifyEventEmitter(y),await Promise.all(Object.keys(p).map(T=>this.promisifyEventEmitter(this.store.deleteGraph((0,c.stringToTerm)(T)))));break;default:for(const T of Array.isArray(u)?u:[u])await this.promisifyEventEmitter(this.store.deleteGraph(T))}}async createGraphs(u,d){if(d)for(const m of u){const y=this.store.match(void 0,void 0,void 0,m);await new Promise((p,T)=>{y.once("data",()=>{T(new Error(`Unable to create graph ${m.value} as it already exists`))}),y.on("end",p),y.on("error",T)})}}}e.RdfJsQuadDestination=o},"../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/ActorRdfUpdateQuadsRdfJsStore.js"),e)},"../node_modules/@comunica/bindings-factory/lib/Bindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bindings=void 0;const a=t("../packages/immutable/dist/index.js"),c=t("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js");class l{constructor(i,u){this.type="bindings",this.dataFactory=i,this.entries=u}has(i){return this.entries.has(typeof i=="string"?i:i.value)}get(i){return this.entries.get(typeof i=="string"?i:i.value)}set(i,u){return new l(this.dataFactory,this.entries.set(typeof i=="string"?i:i.value,u))}delete(i){return new l(this.dataFactory,this.entries.delete(typeof i=="string"?i:i.value))}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),i=>this.dataFactory.variable(i))}values(){return this.iteratorToIterable(this.entries.values())}forEach(i){this.entries.forEach((u,d)=>i(u,this.dataFactory.variable(d)))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([i,u])=>[this.dataFactory.variable(i),u])[Symbol.iterator]()}equals(i){if(!i)return!1;if(this===i)return!0;if(this.size!==i.size)return!1;for(const u of this.keys())if(!this.get(u)?.equals(i.get(u)))return!1;return!0}filter(i){return new l(this.dataFactory,(0,a.Map)(this.entries.filter((u,d)=>i(u,this.dataFactory.variable(d)))))}map(i){return new l(this.dataFactory,(0,a.Map)(this.entries.map((u,d)=>i(u,this.dataFactory.variable(d)))))}merge(i){const u=new Set([...this.iteratorToIterable(this.entries.keys()),...[...i.keys()].map(m=>m.value)]),d=[];for(const m of u){const y=this.entries.get(m),p=i.get(this.dataFactory.variable(m));if(y&&p&&!y.equals(p))return;const T=y||p;d.push([m,T])}return new l(this.dataFactory,(0,a.Map)(d))}mergeWith(i,u){const d=new Set([...this.iteratorToIterable(this.entries.keys()),...[...u.keys()].map(y=>y.value)]),m=[];for(const y of d){const p=this.dataFactory.variable(y),T=this.entries.get(y),_=u.get(p);let w;T&&_&&!T.equals(_)?w=i(T,_,p):w=T||_,m.push([y,w])}return new l(this.dataFactory,(0,a.Map)(m))}toString(){return(0,c.bindingsToString)(this)}*mapIterable(i,u){for(const d of i)yield u(d)}iteratorToIterable(i){return{[Symbol.iterator]:()=>i}}}e.Bindings=l},"../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BindingsFactory=void 0;const a=t("../packages/immutable/dist/index.js"),c=t("../node_modules/rdf-data-factory/index.js"),l=t("../node_modules/@comunica/bindings-factory/lib/Bindings.js");class o{constructor(u=new c.DataFactory){this.dataFactory=u}bindings(u=[]){return new l.Bindings(this.dataFactory,(0,a.Map)(u.map(([d,m])=>[d.value,m])))}fromBindings(u){return this.bindings([...u])}fromRecord(u){return this.bindings(Object.entries(u).map(([d,m])=>[this.dataFactory.variable(d),m]))}}e.BindingsFactory=o},"../node_modules/@comunica/bindings-factory/lib/bindingsToString.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bindingsToString=void 0;const a=t("../node_modules/rdf-string/index.js");function c(l){const o={};for(const i of l.keys())o[i.value]=(0,a.termToString)(l.get(i));return JSON.stringify(o,null,"  ")}e.bindingsToString=c},"../node_modules/@comunica/bindings-factory/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bindings-factory/lib/Bindings.js"),e),c(t("../node_modules/@comunica/bindings-factory/lib/BindingsFactory.js"),e),c(t("../node_modules/@comunica/bindings-factory/lib/bindingsToString.js"),e)},"../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorContextPreprocess=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorContextPreprocess=c},"../node_modules/@comunica/bus-context-preprocess/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-context-preprocess/lib/ActorContextPreprocess.js"),e)},"../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorHashBindings=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorHashBindings=c},"../node_modules/@comunica/bus-hash-bindings/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-hash-bindings/lib/ActorHashBindings.js"),e)},"../node_modules/@comunica/bus-init/lib/ActorInit.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorInit=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorInit=c},"../node_modules/@comunica/bus-init/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-init/lib/ActorInit.js"),e)},"../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorOptimizeQueryOperation=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorOptimizeQueryOperation=c},"../node_modules/@comunica/bus-optimize-query-operation/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-optimize-query-operation/lib/ActorOptimizeQueryOperation.js"),e)},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperation=void 0;const a=t("../node_modules/@comunica/context-entries/lib/index.js"),c=t("../node_modules/@comunica/core/lib/index.js"),l=t("../node_modules/@comunica/data-factory/lib/index.js"),o=t("../node_modules/@comunica/bus-query-operation/lib/Bindings.js");let i=0;class u extends c.Actor{constructor(m){super(m)}static getSafeBindings(m){return u.validateQueryOutput(m,"bindings"),m}static getSafeQuads(m){return u.validateQueryOutput(m,"quads"),m}static getSafeBoolean(m){return u.validateQueryOutput(m,"boolean"),m}static getSafeVoid(m){return u.validateQueryOutput(m,"void"),m}static cachifyMetadata(m){let y;return()=>y||(y=m())}static validateQueryOutput(m,y){if(m.type!==y)throw new Error(`Invalid query output type: Expected '${y}' but got '${m.type}'`)}static getBaseExpressionContext(m){const y=m.get(a.KeysInitQuery.queryTimestamp),p=m.get(a.KeysInitQuery.baseIRI),T=m.get(a.KeysInitQuery.functionArgumentsCache)||{};if(m.has(a.KeysInitQuery.extensionFunctionCreator)&&m.has(a.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let _=m.get(a.KeysInitQuery.extensionFunctionCreator);const w=m.get(a.KeysInitQuery.extensionFunctions);return w&&(_=S=>w[S.value]),{now:y,baseIRI:p,extensionFunctionCreator:_,functionArgumentsCache:T}}static getExpressionContext(m,y){return{...this.getBaseExpressionContext(m),bnode:p=>new l.BlankNodeBindingsScoped(p||`BNODE_${i++}`)}}static getAsyncExpressionContext(m,y){const p={...this.getBaseExpressionContext(m),bnode:T=>Promise.resolve(new l.BlankNodeBindingsScoped(T||`BNODE_${i++}`))};return y&&(p.exists=u.createExistenceResolver(m,y)),p}static createExistenceResolver(m,y){return async(p,T)=>{const _=(0,o.materializeOperation)(p.input,T),w=await y.mediate({operation:_,context:m}),S=u.getSafeBindings(w);return new Promise((I,j)=>{S.bindingsStream.on("end",()=>{I(!1)}),S.bindingsStream.on("error",j),S.bindingsStream.on("data",()=>{S.bindingsStream.close(),I(!0)})}).then(I=>p.not?!I:I)}}static throwOnReadOnly(m){if(m.get(a.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}}e.ActorQueryOperation=u},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTyped=void 0;const a=t("../node_modules/@comunica/context-entries/lib/index.js"),c=t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js");class l extends c.ActorQueryOperation{constructor(i,u){if(super({...i,operationName:u}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(i){if(!i.operation)throw new Error("Missing field 'operation' in a query operation action.");if(i.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${i.operation.type}`);const u=i.operation;return this.testOperation(u,i.context)}async run(i){const u=i.context.get(a.KeysInitQuery.physicalQueryPlanLogger);u&&(u.logOperation(i.operation.type,void 0,i.operation,i.context.get(a.KeysInitQuery.physicalQueryPlanNode),this.name,{}),i.context=i.context.set(a.KeysInitQuery.physicalQueryPlanNode,i.operation));const d=i.operation,m=i.context.set(a.KeysQueryOperation.operation,d),y=await this.runOperation(d,m);return"metadata"in y&&(y.metadata=c.ActorQueryOperation.cachifyMetadata(y.metadata)),y}}e.ActorQueryOperationTyped=l},"../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryOperationTypedMediated=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js");class c extends a.ActorQueryOperationTyped{constructor(o,i){super(o,i)}}e.ActorQueryOperationTypedMediated=c},"../node_modules/@comunica/bus-query-operation/lib/Bindings.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.materializeOperation=e.materializeTerm=void 0;const a=t("../node_modules/@comunica/bindings-factory/lib/index.js"),c=t("../node_modules/rdf-string/index.js"),l=t("sparqlalgebrajs"),o=new a.BindingsFactory;function i(d,m){if(d.termType==="Variable"){const y=m.get(d);if(y)return y}return d}e.materializeTerm=i;function u(d,m,y={}){return y={strictTargetVariables:"strictTargetVariables"in y?y.strictTargetVariables:!1,bindFilter:"bindFilter"in y?y.bindFilter:!0},l.Util.mapOperation(d,{path(p,T){return{recurse:!1,result:T.createPath(i(p.subject,m),p.predicate,i(p.object,m),i(p.graph,m))}},pattern(p,T){return{recurse:!1,result:T.createPattern(i(p.subject,m),i(p.predicate,m),i(p.object,m),i(p.graph,m))}},extend(p){if(m.has(p.variable)){if(y.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,c.termToString)(p.variable)} in a BIND operator.`);return{recurse:!0,result:u(p.input,m,y)}}return{recurse:!0,result:p}},group(p,T){if(y.strictTargetVariables){for(const w of p.variables)if(m.has(w))throw new Error(`Tried to bind variable ${(0,c.termToString)(w)} in a GROUP BY operator.`);return{recurse:!0,result:p}}const _=p.variables.filter(w=>!m.has(w));return{recurse:!0,result:T.createGroup(p.input,_,p.aggregates)}},project(p,T){if(y.strictTargetVariables){for(const S of p.variables)if(m.has(S))throw new Error(`Tried to bind variable ${(0,c.termToString)(S)} in a SELECT operator.`);return{recurse:!0,result:p}}const _=p.variables.filter(S=>!m.has(S)),w=o.bindings(p.variables.map(S=>{const I=m.get(S);if(I)return[S,I]}).filter(S=>!!S));return{recurse:!1,result:T.createProject(u(p.input,w,y),_)}},values(p,T){if(y.strictTargetVariables){for(const _ of p.variables)if(m.has(_))throw new Error(`Tried to bind variable ${(0,c.termToString)(_)} in a VALUES operator.`)}else{const _=p.variables.filter(S=>!m.has(S)),w=p.bindings.map(S=>{const I={...S};let j=!0;return m.forEach((x,v)=>{const O=(0,c.termToString)(v);O in I&&(x.equals(I[O])||(j=!1),delete I[O])}),j?I:void 0}).filter(Boolean);return{recurse:!0,result:T.createValues(_,w)}}return{recurse:!1,result:p}},expression(p,T){if(!y.bindFilter)return{recurse:!1,result:p};if(p.expressionType==="term")return{recurse:!1,result:T.createTermExpression(i(p.term,m))};if(p.expressionType==="aggregate"&&"variable"in p&&m.has(p.variable)){if(y.strictTargetVariables)throw new Error(`Tried to bind ${(0,c.termToString)(p.variable)} in a ${p.aggregator} aggregate.`);return{recurse:!0,result:p}}return{recurse:!0,result:p}}})}e.materializeOperation=u},"../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusQueryOperation=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.BusIndexed{constructor(o){super({...o,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}}e.BusQueryOperation=c},"../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ClosableTransformIterator=void 0;const a=t("asynciterator");class c extends a.TransformIterator{constructor(o,i){super(o,i),this.onClose=i.onClose}_end(o){this.onClose(),super._end(o)}}e.ClosableTransformIterator=c},"../node_modules/@comunica/bus-query-operation/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperation.js"),e),c(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTyped.js"),e),c(t("../node_modules/@comunica/bus-query-operation/lib/ActorQueryOperationTypedMediated.js"),e),c(t("../node_modules/@comunica/bus-query-operation/lib/Bindings.js"),e),c(t("../node_modules/@comunica/bus-query-operation/lib/BusQueryOperation.js"),e),c(t("../node_modules/@comunica/bus-query-operation/lib/ClosableTransformIterator.js"),e)},"../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorQueryParse=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorQueryParse=c},"../node_modules/@comunica/bus-query-parse/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-query-parse/lib/ActorQueryParse.js"),e)},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinEntriesSort=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorRdfJoinEntriesSort=c},"../node_modules/@comunica/bus-rdf-join-entries-sort/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-rdf-join-entries-sort/lib/ActorRdfJoinEntriesSort.js"),e)},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoinSelectivity=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorRdfJoinSelectivity=c},"../node_modules/@comunica/bus-rdf-join-selectivity/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-rdf-join-selectivity/lib/ActorRdfJoinSelectivity.js"),e)},"../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfJoin=void 0;const a=t("../node_modules/@comunica/bus-query-operation/lib/index.js"),c=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/core/lib/index.js"),o=t("../node_modules/rdf-data-factory/index.js"),i=t("../node_modules/rdf-string/index.js"),u=new o.DataFactory;class d extends l.Actor{constructor(y,p){super(y),this.includeInLogs=!0,this.logicalType=p.logicalType,this.physicalName=p.physicalName,this.limitEntries=p.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=p.limitEntriesMin??!1,this.canHandleUndefs=p.canHandleUndefs??!1}static hash(y,p){return p.filter(T=>y.has(T)).map(T=>(0,i.termToString)(y.get(T))).join("")}static overlappingVariables(y){const p=y.map(_=>_.variables);let T=p[0];for(const _ of p.slice(1))T=T.filter(w=>_.some(S=>S.value===w.value));return T}static joinVariables(y){return[...new Set(y.flatMap(p=>p.variables.map(T=>T.value)))].map(p=>u.variable(p))}static joinBindings(...y){if(y.length===0)return null;if(y.length===1)return y[0];let p=y[0];for(const T of y.slice(1)){const _=p.merge(T);if(!_)return null;p=_}return p}static getCardinality(y){return y.cardinality}static async getMetadatas(y){return await Promise.all(y.map(p=>p.output.metadata()))}static async getEntriesWithMetadatas(y){const p=await d.getMetadatas(y);return y.map((T,_)=>({...T,metadata:p[_]}))}static getRequestInitialTimes(y){return y.map(p=>p.pageSize?0:p.requestTime||0)}static getRequestItemTimes(y){return y.map(p=>p.pageSize?(p.requestTime||0)/p.pageSize:0)}async constructResultMetadata(y,p,T,_={}){let w;return _.cardinality?w=_.cardinality:(w=p.reduce((S,I)=>{const j=d.getCardinality(I);return{type:j.type==="estimate"?"estimate":S.type,value:S.value*j.value}},{type:"exact",value:1}),w.value*=(await this.mediatorJoinSelectivity.mediate({entries:y,context:T})).selectivity),{..._,cardinality:{type:w.type,value:w.value},canContainUndefs:_.canContainUndefs??p.some(S=>S.canContainUndefs),variables:d.joinVariables(p)}}async test(y){if(y.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${y.type}' was given.`);if(y.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?y.entries.length<this.limitEntries:y.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${y.entries.length}.`);for(const T of y.entries)if(T.output.type!=="bindings")throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${T.output.type}'`);const p=await d.getMetadatas(y.entries);if(!this.canHandleUndefs){for(const T of p)if(T.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`)}return await this.getJoinCoefficients(y,p)}async run(y){let p;y.context.has(c.KeysInitQuery.physicalQueryPlanLogger)&&(p=y.context.get(c.KeysInitQuery.physicalQueryPlanNode),y.context=y.context.set(c.KeysInitQuery.physicalQueryPlanNode,y));const T=y.context.get(c.KeysInitQuery.physicalQueryPlanLogger);let _;this.includeInLogs&&T&&(_={},T.logOperation(`join-${this.logicalType}`,this.physicalName,y,p,this.name,_));const{result:w,physicalPlanMetadata:S}=await this.getOutput(y),I=await d.getMetadatas(y.entries);return _&&(Object.assign(_,S),_.cardinalities=I.map(d.getCardinality),_.joinCoefficients=await this.getJoinCoefficients(y,I)),w.metadata=a.ActorQueryOperation.cachifyMetadata(w.metadata),w}}e.ActorRdfJoin=d},"../node_modules/@comunica/bus-rdf-join/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-rdf-join/lib/ActorRdfJoin.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPattern=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorRdfResolveQuadPattern=c},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfResolveQuadPatternSource=void 0;const a=t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js");class c extends a.ActorRdfResolveQuadPattern{constructor(o){super(o)}async test(o){return!0}async run(o){const i=await this.getSource(o.context,o.pattern);return await this.getOutput(i,o.pattern,o.context)}async getOutput(o,i,u){return{data:o.match(i.subject,i.predicate,i.object,i.graph,u)}}}e.ActorRdfResolveQuadPatternSource=c},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPattern.js"),e),c(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/ActorRdfResolveQuadPatternSource.js"),e),c(t("../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-resolve-quad-pattern/lib/utils.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.hasContextSingleSourceOfType=e.hasContextSingleSource=e.getContextSourceUrl=e.getContextSourceFirst=e.getContextSource=e.getContextSources=e.getDataSourceContext=e.getDataSourceValue=e.getDataSourceType=e.isDataSourceRawType=void 0;const a=t("../node_modules/@comunica/context-entries/lib/index.js");function c(_){return typeof _=="string"||"match"in _}e.isDataSourceRawType=c;function l(_){return typeof _=="string"?"":"match"in _?"rdfjsSource":_.type}e.getDataSourceType=l;function o(_){return c(_)?_:_.value}e.getDataSourceValue=o;function i(_,w){return typeof _=="string"||"match"in _||!_.context?w:w.merge(_.context)}e.getDataSourceContext=i;function u(_){return _.get(a.KeysRdfResolveQuadPattern.sources)}e.getContextSources=u;function d(_){return _.get(a.KeysRdfResolveQuadPattern.source)}e.getContextSource=d;function m(_){if(_.has(a.KeysRdfResolveQuadPattern.source))return _.get(a.KeysRdfResolveQuadPattern.source);const w=_.get(a.KeysRdfResolveQuadPattern.sources);if(w?.length===1)return w[0]}e.getContextSourceFirst=m;function y(_){if(_){let w=o(_);if(typeof w=="string"){const S=w.indexOf("#");return S>=0&&(w=w.slice(0,S)),w}}}e.getContextSourceUrl=y;function p(_){const w=d(_);return!!(w&&(c(w)||w.value))}e.hasContextSingleSource=p;function T(_,w){const S=d(w);return!!(S&&l(S)===_&&o(S))}e.hasContextSingleSourceOfType=T},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuads=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Actor{constructor(o){super(o)}}e.ActorRdfUpdateQuads=c},"../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActorRdfUpdateQuadsDestination=e.deskolemize=e.deskolemizeStream=void 0;const a=t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js"),c=t("../node_modules/@comunica/context-entries/lib/index.js"),l=t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js");function o(d,m){return d?.map(y=>a.FederatedQuadSource.deskolemizeQuad(y,m))}e.deskolemizeStream=o;function i(d){const m=d.context.get(c.KeysRdfUpdateQuads.destination),y=d.context.get(c.KeysRdfResolveQuadPattern.sourceIds)?.get(m);return y?{...d,quadStreamInsert:o(d.quadStreamInsert,y),quadStreamDelete:o(d.quadStreamDelete,y)}:d}e.deskolemize=i;class u extends l.ActorRdfUpdateQuads{async test(m){return!0}async run(m){const y=await this.getDestination(m.context);return await this.getOutput(y,i(m),m.context)}async getOutput(m,y,p){return{execute:()=>Promise.all([y.quadStreamInsert?m.insert(y.quadStreamInsert):Promise.resolve(),y.quadStreamDelete?m.delete(y.quadStreamDelete):Promise.resolve(),y.deleteGraphs?m.deleteGraphs(y.deleteGraphs.graphs,y.deleteGraphs.requireExistence,y.deleteGraphs.dropGraphs):Promise.resolve(),y.createGraphs?m.createGraphs(y.createGraphs.graphs,y.createGraphs.requireNonExistence):Promise.resolve()]).then(()=>{})}}}e.ActorRdfUpdateQuadsDestination=u},"../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.validateHttpResponse=void 0;const a=t("./require-empty.js"),c=t("../node_modules/stream-to-string/index.js");async function l(o,i){if(i.status>=400){let u="empty response";if(i.body){const d=a.ActorHttp.toNodeReadable(i.body);u=await c(d)}throw new Error(`Could not update ${o} (HTTP status ${i.status}):
${u}`)}await i.body?.cancel()}e.validateHttpResponse=l},"../node_modules/@comunica/bus-rdf-update-quads/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuads.js"),e),c(t("../node_modules/@comunica/bus-rdf-update-quads/lib/ActorRdfUpdateQuadsDestination.js"),e),c(t("../node_modules/@comunica/bus-rdf-update-quads/lib/IQuadDestination.js"),e),c(t("../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js"),e)},"../node_modules/@comunica/bus-rdf-update-quads/lib/utils.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getContextDestinationUrl=e.getContextDestinationFirst=e.getContextDestination=e.getDataDestinationContext=e.getDataDestinationValue=e.getDataDestinationType=e.isDataDestinationRawType=void 0;const a=t("../node_modules/@comunica/context-entries/lib/index.js");function c(y){return typeof y=="string"||"remove"in y}e.isDataDestinationRawType=c;function l(y){return typeof y=="string"?"":"remove"in y?"rdfjsStore":y.type}e.getDataDestinationType=l;function o(y){return c(y)?y:y.value}e.getDataDestinationValue=o;function i(y,p){return typeof y=="string"||"remove"in y||!y.context?p:p.merge(y.context)}e.getDataDestinationContext=i;function u(y){return y.get(a.KeysRdfUpdateQuads.destination)}e.getContextDestination=u;function d(y){if(y.has(a.KeysRdfUpdateQuads.destination))return y.get(a.KeysRdfUpdateQuads.destination)}e.getContextDestinationFirst=d;function m(y){if(y){let p=o(y);if(typeof p=="string"){const T=p.indexOf("#");return T>=0&&(p=p.slice(0,T)),p}}}e.getContextDestinationUrl=m},"../node_modules/@comunica/context-entries/lib/Keys.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeysRdfUpdateQuads=e.KeysRdfResolveQuadPattern=e.KeysRdfParseHtmlScript=e.KeysRdfParseJsonLd=e.KeysQueryOperation=e.KeysInitQuery=e.KeysHttpProxy=e.KeysHttpMemento=e.KeysHttpWayback=e.KeysHttp=e.KeysCore=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");e.KeysCore={log:a.CONTEXT_KEY_LOGGER},e.KeysHttp={includeCredentials:new a.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new a.ActionContextKey("@comunica/bus-http:auth"),fetch:new a.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new a.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new a.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new a.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelay:new a.ActionContextKey("@comunica/bus-http:http-retry-delay"),httpRetryOnServerError:new a.ActionContextKey("@comunica/bus-http:http-retry-on-server-error")},e.KeysHttpWayback={recoverBrokenLinks:new a.ActionContextKey("@comunica/bus-http:recover-broken-links")},e.KeysHttpMemento={datetime:new a.ActionContextKey("@comunica/actor-http-memento:datetime")},e.KeysHttpProxy={httpProxyHandler:new a.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},e.KeysInitQuery={initialBindings:new a.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new a.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new a.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new a.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new a.ActionContextKey("@comunica/actor-init-query:queryString"),query:new a.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new a.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new a.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new a.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new a.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new a.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new a.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new a.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new a.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new a.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new a.ActionContextKey("@context")},e.KeysQueryOperation={operation:new a.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new a.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new a.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new a.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new a.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new a.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new a.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new a.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),localizeBlankNodes:new a.ActionContextKey("@comunica/actor-query-operation:localizeBlankNodes")},e.KeysRdfParseJsonLd={documentLoader:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},e.KeysRdfParseHtmlScript={processingHtmlScript:new a.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new a.ActionContextKey("extractAllScripts")},e.KeysRdfResolveQuadPattern={sources:new a.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new a.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new a.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds"),hypermediaSourcesAggregatedStores:new a.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:hypermediaSourcesAggregatedStores")},e.KeysRdfUpdateQuads={destination:new a.ActionContextKey("@comunica/bus-rdf-update-quads:destination")}},"../node_modules/@comunica/context-entries/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/context-entries/lib/Keys.js"),e)},"../node_modules/@comunica/core/lib/ActionContext.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionContextKey=e.ActionContext=void 0;const a=t("../packages/immutable/dist/index.js");class c{constructor(i={}){this.map=(0,a.Map)(i)}setDefault(i,u){return this.has(i)?this:this.set(i,u)}set(i,u){return this.setRaw(i.name,u)}setRaw(i,u){return new c(this.map.set(i,u))}delete(i){return new c(this.map.delete(i.name))}get(i){return this.getRaw(i.name)}getRaw(i){return this.map.get(i)}getSafe(i){if(!this.has(i))throw new Error(`Context entry ${i.name} is required but not available`);return this.get(i)}has(i){return this.hasRaw(i.name)}hasRaw(i){return this.map.has(i)}merge(...i){let u=this;for(const d of i)for(const m of d.keys())u=u.set(m,d.get(m));return u}keys(){return[...this.map.keys()].map(i=>new l(i))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(i){return i instanceof c?i:new c((0,a.Map)(i||{}))}}e.ActionContext=c;class l{constructor(i){this.name=i}}e.ActionContextKey=l},"../node_modules/@comunica/core/lib/ActionObserver.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ActionObserver=void 0;class t{constructor(c){Object.assign(this,c)}}e.ActionObserver=t},"../node_modules/@comunica/core/lib/Actor.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Actor=void 0;const a=t("../node_modules/@comunica/core/lib/ContextEntries.js");class c{constructor(o){this.beforeActors=[],Object.assign(this,o),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(o){return o.get(a.CONTEXT_KEY_LOGGER)}runObservable(o){const i=this.run(o);return this.bus.onRun(this,o,i),i}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(o,i){const u=i?i():{};return u.actor=this.name,u}logTrace(o,i,u){const d=c.getContextLogger(o);d&&d.trace(i,this.getDefaultLogData(o,u))}logDebug(o,i,u){const d=c.getContextLogger(o);d&&d.debug(i,this.getDefaultLogData(o,u))}logInfo(o,i,u){const d=c.getContextLogger(o);d&&d.info(i,this.getDefaultLogData(o,u))}logWarn(o,i,u){const d=c.getContextLogger(o);d&&d.warn(i,this.getDefaultLogData(o,u))}logError(o,i,u){const d=c.getContextLogger(o);d&&d.error(i,this.getDefaultLogData(o,u))}logFatal(o,i,u){const d=c.getContextLogger(o);d&&d.fatal(i,this.getDefaultLogData(o,u))}}e.Actor=c},"../node_modules/@comunica/core/lib/Bus.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Bus=void 0;class t{constructor(c){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,c)}subscribe(c){this.actors.push(c),this.reorderForDependencies()}subscribeObserver(c){this.observers.push(c)}unsubscribe(c){const l=this.actors.indexOf(c);return l>=0?(this.actors.splice(l,1),!0):!1}unsubscribeObserver(c){const l=this.observers.indexOf(c);return l>=0?(this.observers.splice(l,1),!0):!1}publish(c){return this.actors.map(l=>({actor:l,reply:l.test(c)}))}onRun(c,l,o){for(const i of this.observers)i.onRun(c,l,o)}addDependencies(c,l){for(const o of l){let i=this.dependencyLinks.get(o);i||(i=[],this.dependencyLinks.set(o,i)),i.push(c)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const c=[];for(const l of this.dependencyLinks.keys()){const o=this.actors.indexOf(l);o>=0&&(this.actors.splice(o,1),c.push(l))}for(;c.length>0;){let l=-1;for(let i=0;i<c.length;i++){let u=!0;for(const d of this.dependencyLinks.get(c[i]))if(!this.actors.includes(d)&&c.includes(d)){u=!1;break}if(u){l=i;break}}if(l<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const o=c.splice(l,1)[0];this.actors.push(o)}}}}e.Bus=t},"../node_modules/@comunica/core/lib/BusIndexed.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BusIndexed=void 0;const a=t("../node_modules/@comunica/core/lib/Bus.js");class c extends a.Bus{constructor(o){super(o),this.actorsIndex={}}subscribe(o){const i=this.getActorIdentifier(o)||"_undefined_";let u=this.actorsIndex[i];u||(u=this.actorsIndex[i]=[]),u.push(o),super.subscribe(o)}unsubscribe(o){const i=this.getActorIdentifier(o)||"_undefined_",u=this.actorsIndex[i];if(u){const d=u.indexOf(o);d>=0&&u.splice(d,1),u.length===0&&delete this.actorsIndex[i]}return super.unsubscribe(o)}publish(o){const i=this.getActionIdentifier(o);return i?[...this.actorsIndex[i]||[],...this.actorsIndex._undefined_||[]].map(d=>({actor:d,reply:d.test(o)})):super.publish(o)}getActorIdentifier(o){return this.actorIdentifierFields.reduce((i,u)=>i[u],o)}getActionIdentifier(o){return this.actionIdentifierFields.reduce((i,u)=>i[u],o)}}e.BusIndexed=c},"../node_modules/@comunica/core/lib/ContextEntries.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CONTEXT_KEY_LOGGER=void 0;const a=t("../node_modules/@comunica/core/lib/ActionContext.js");e.CONTEXT_KEY_LOGGER=new a.ActionContextKey("@comunica/core:log")},"../node_modules/@comunica/core/lib/Mediator.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Mediator=void 0;class t{constructor(c){Object.assign(this,c)}publish(c){const l=this.bus.publish(c);if(l.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return l}async mediateActor(c){return await this.mediateWith(c,this.publish(c))}async mediate(c){return(await this.mediateActor(c)).runObservable(c)}}e.Mediator=t},"../node_modules/@comunica/core/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(i,u,d,m){m===void 0&&(m=d);var y=Object.getOwnPropertyDescriptor(u,d);(!y||("get"in y?!u.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return u[d]}}),Object.defineProperty(i,m,y)}:function(i,u,d,m){m===void 0&&(m=d),i[m]=u[d]}),c=this&&this.__exportStar||function(i,u){for(var d in i)d!=="default"&&!Object.prototype.hasOwnProperty.call(u,d)&&a(u,i,d)};Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;const o=t("../node_modules/@comunica/types/lib/index.js").Logger;e.Logger=o,c(t("../node_modules/@comunica/core/lib/ActionContext.js"),e),c(t("../node_modules/@comunica/core/lib/Bus.js"),e),c(t("../node_modules/@comunica/core/lib/BusIndexed.js"),e),c(t("../node_modules/@comunica/core/lib/ContextEntries.js"),e),c(t("../node_modules/@comunica/core/lib/ActionObserver.js"),e),c(t("../node_modules/@comunica/core/lib/Actor.js"),e),c(t("../node_modules/@comunica/core/lib/Mediator.js"),e)},"../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeBindingsScoped=void 0;class t{constructor(c){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=c}equals(c){return!!c&&c.termType==="BlankNode"&&c.value===this.value}}e.BlankNodeBindingsScoped=t},"../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNodeScoped=void 0;class t{constructor(c,l){this.termType="BlankNode",this.value=c,this.skolemized=l}equals(c){return!!c&&c.termType==="BlankNode"&&c.value===this.value}}e.BlankNodeScoped=t},"../node_modules/@comunica/data-factory/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/data-factory/lib/BlankNodeScoped.js"),e),c(t("../node_modules/@comunica/data-factory/lib/BlankNodeBindingsScoped.js"),e)},"../node_modules/@comunica/logger-void/lib/LoggerVoid.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoggerVoid=void 0;const a=t("../node_modules/@comunica/types/lib/index.js");class c extends a.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}e.LoggerVoid=c},"../node_modules/@comunica/logger-void/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/logger-void/lib/LoggerVoid.js"),e)},"../node_modules/@comunica/mediator-all/lib/MediatorAll.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorAll=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Mediator{constructor(o){super(o)}async mediate(o){const i=[];let u;try{u=this.publish(o)}catch{u=[]}for(const m of u)try{await m.reply,i.push(m.actor)}catch{}return(await Promise.all(i.map(m=>m.runObservable(o))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}}e.MediatorAll=c},"../node_modules/@comunica/mediator-all/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/mediator-all/lib/MediatorAll.js"),e)},"../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombinePipeline=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Mediator{constructor(o){super(o)}async mediate(o){let i;try{i=this.publish(o)}catch{return o}if(this.filterErrors){const d=[];for(const m of i)try{await m.reply,d.push(m)}catch{}i=d}if(i=await Promise.all(i.map(async({actor:d,reply:m})=>({actor:d,reply:await m}))),this.order){const d=m=>{const y=this.field?m[this.field]:m;if(typeof y!="number")throw new Error("Cannot order elements that are not numbers.");return y};i=i.sort((m,y)=>(this.order==="increasing"?1:-1)*(d(m.reply)-d(y.reply)))}let u=o;for(const{actor:d}of i)u={...u,...await d.runObservable(u)};return u}mediateWith(){throw new Error("Method not supported.")}}e.MediatorCombinePipeline=c},"../node_modules/@comunica/mediator-combine-pipeline/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/mediator-combine-pipeline/lib/MediatorCombinePipeline.js"),e)},"../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorCombineUnion=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Mediator{constructor(o){super(o),this.combiner=this.createCombiner()}async mediate(o){let i;try{i=this.publish(o)}catch{i=[]}await Promise.all(i.map(({reply:d})=>d));const u=await Promise.all(i.map(d=>d.actor.runObservable(o)));return this.combiner(u)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return o=>{const i={};return i[this.field]={},[{}].concat(o.map(u=>u[this.field])).forEach((u,d,m)=>{i[this.field]={...u,...i[this.field]}}),i}}}e.MediatorCombineUnion=c},"../node_modules/@comunica/mediator-combine-union/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/mediator-combine-union/lib/MediatorCombineUnion.js"),e)},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorJoinCoefficientsFixed=void 0;const a=t("../node_modules/@comunica/context-entries/lib/index.js"),c=t("../node_modules/@comunica/core/lib/index.js");class l extends c.Mediator{constructor(i){super(i)}async mediateWith(i,u){const d=[],m=u.map(({reply:j})=>j).map(j=>j.catch(x=>{d.push(x)})),y=await Promise.all(m);let p=y.map((j,x)=>{if(j)return j.iterations*this.cpuWeight+j.persistedItems*this.memoryWeight+j.blockingItems*this.timeWeight+j.requestTime*this.ioWeight});const T=Math.max(...p.filter(j=>j!==void 0)),_=i.context.get(a.KeysQueryOperation.limitIndicator);_&&(p=p.map((j,x)=>j!==void 0&&y[x].persistedItems>0&&y[x].iterations>_?j+T:j));let w=-1,S=Number.POSITIVE_INFINITY;for(const[j,x]of p.entries())x!==void 0&&(w===-1||x<S)&&(w=j,S=x);if(w<0)throw new Error(`All actors rejected their test in ${this.name}
${d.map(j=>j.message).join(`
`)}`);const I=u[w].actor;return I.includeInLogs&&c.Actor.getContextLogger(i.context)?.debug(`Determined physical join operator '${I.logicalType}-${I.physicalName}'`,{entries:i.entries.length,variables:await Promise.all(i.entries.map(async j=>(await j.output.metadata()).variables.map(x=>x.value))),costs:Object.fromEntries(p.map((j,x)=>[`${u[x].actor.logicalType}-${u[x].actor.physicalName}`,j])),coefficients:Object.fromEntries(y.map((j,x)=>[`${u[x].actor.logicalType}-${u[x].actor.physicalName}`,j]))}),I}}e.MediatorJoinCoefficientsFixed=l},"../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/MediatorJoinCoefficientsFixed.js"),e)},"../node_modules/@comunica/mediator-number/lib/MediatorNumber.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorNumber=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Mediator{constructor(o){super(o),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return o=>o.reduce((i,u,d)=>{const m=this.getOrDefault(u[this.field],Number.POSITIVE_INFINITY);return m!==null&&(Number.isNaN(i[0])||i[0]>m)?[m,d]:i},[Number.NaN,-1])[1];case"max":return o=>o.reduce((i,u,d)=>{const m=this.getOrDefault(u[this.field],Number.NEGATIVE_INFINITY);return m!==null&&(Number.isNaN(i[0])||i[0]<m)?[m,d]:i},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(o,i){return o===void 0?i:o}async mediateWith(o,i){let u=i.map(({reply:p})=>p);const d=[];if(this.ignoreErrors){const p={};p[this.field]=null,u=u.map(T=>T.catch(_=>(d.push(_),p)))}const m=await Promise.all(u),y=this.indexPicker(m);if(y<0)throw new Error(`All actors rejected their test in ${this.name}
${d.map(p=>p.message).join(`
`)}`);return i[y].actor}}e.MediatorNumber=c},"../node_modules/@comunica/mediator-number/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/mediator-number/lib/MediatorNumber.js"),e)},"../node_modules/@comunica/mediator-race/lib/MediatorRace.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MediatorRace=void 0;const a=t("../node_modules/@comunica/core/lib/index.js");class c extends a.Mediator{constructor(o){super(o)}mediateWith(o,i){return new Promise((u,d)=>{const m=[];for(const y of i)y.reply.then(()=>{u(y.actor)}).catch(p=>{m.push(p),m.length===i.length&&d(new Error(`${this.name} mediated over all rejecting actors:
${m.map(T=>T.message).join(`
`)}`))})})}}e.MediatorRace=c},"../node_modules/@comunica/mediator-race/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/mediator-race/lib/MediatorRace.js"),e)},"../node_modules/@comunica/types/lib/Bindings.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IActionContext.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IAggregatedStore.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/ICliArgsHandler.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataDestination.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IDataSource.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IJoinEntry.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IMetadata.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IProxyHandler.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryContext.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryEngine.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/IQueryOperationResult.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/@comunica/types/lib/Logger.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;class t{static getLevelOrdinal(c){return t.LEVELS[c]}}e.Logger=t,t.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5}},"../node_modules/@comunica/types/lib/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/@comunica/types/lib/Bindings.js"),e),c(t("../node_modules/@comunica/types/lib/IActionContext.js"),e),c(t("../node_modules/@comunica/types/lib/IAggregatedStore.js"),e),c(t("../node_modules/@comunica/types/lib/ICliArgsHandler.js"),e),c(t("../node_modules/@comunica/types/lib/IDataDestination.js"),e),c(t("../node_modules/@comunica/types/lib/IDataSource.js"),e),c(t("../node_modules/@comunica/types/lib/IJoinEntry.js"),e),c(t("../node_modules/@comunica/types/lib/IMetadata.js"),e),c(t("../node_modules/@comunica/types/lib/IPhysicalQueryPlanLogger.js"),e),c(t("../node_modules/@comunica/types/lib/IProxyHandler.js"),e),c(t("../node_modules/@comunica/types/lib/IQueryContext.js"),e),c(t("../node_modules/@comunica/types/lib/IQueryEngine.js"),e),c(t("../node_modules/@comunica/types/lib/IQueryOperationResult.js"),e),c(t("../node_modules/@comunica/types/lib/Logger.js"),e)},"../node_modules/asyncjoin/index.js":(n,e,t)=>{const a=t("../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js"),c=t("../node_modules/asyncjoin/join/HashJoin.js"),l=t("../node_modules/asyncjoin/join/NestedLoopJoin.js"),o=t("../node_modules/asyncjoin/join/SymmetricHashJoin.js"),i=t("../node_modules/asyncjoin/util/MergeIterator.js");n.exports={DynamicNestedLoopJoin:a,HashJoin:c,NestedLoopJoin:l,SymmetricHashJoin:o,MergeStream:i}},"../node_modules/asyncjoin/join/DynamicNestedLoopJoin.js":(n,e,t)=>{let a=t("asynciterator"),c=a.MultiTransformIterator,l=a.SimpleTransformIterator;class o extends c{constructor(u,d,m,y){super(u,y),this.funRight=d,this.funJoin=m}_createTransformer(u){return new l(this.funRight(u),{transform:(d,m,y)=>{let p=this.funJoin(u,d);p!==null&&y(p),m()}})}}n.exports=o},"../node_modules/asyncjoin/join/HashJoin.js":(n,e,t)=>{let a=t("asynciterator").AsyncIterator;class c extends a{constructor(o,i,u,d){super(),this.addedDataListener=!1,this.left=o,this.right=i,this.funHash=u,this.funJoin=d,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",y=>this.destroy(y)),this.right.on("error",y=>this.destroy(y)),this.readable=!1,this.left.on("end",m.bind(this));function m(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",y=>{y==="data"&&!this.addedDataListener&&(this.addedDataListener=!0,this._addDataListener())})}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener());;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let i=this.matches[this.matchIdx++],u=this.funJoin(i,this.match);if(u!==null)return u}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let o=this.funHash(this.match);this.matches=this.leftMap.get(o)||[],this.matchIdx=0}}_addDataListener(){this.left.on("data",o.bind(this));function o(i){let u=this.funHash(i);this.leftMap.has(u)||this.leftMap.set(u,[]),this.leftMap.get(u).push(i)}}}n.exports=c},"../node_modules/asyncjoin/join/NestedLoopJoin.js":(n,e,t)=>{const{MultiTransformIterator:a,SimpleTransformIterator:c,scheduleTask:l}=t("asynciterator");class o extends a{constructor(u,d,m,y){super(u,y),this.right=d,this.funJoin=m,this.on("end",()=>this.right.close())}_end(){super._end(),l(()=>this.right.destroy())}_createTransformer(u){return new c(this.right.clone(),{transform:(d,m,y)=>{let p=this.funJoin(u,d);p!==null&&y(p),m()}})}}n.exports=o},"../node_modules/asyncjoin/join/SymmetricHashJoin.js":(n,e,t)=>{let a=t("asynciterator").AsyncIterator;class c extends a{constructor(o,i,u,d){super(),this.left=o,this.right=i,this.funHash=u,this.funJoin=d,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",m=>this.destroy(m)),this.right.on("error",m=>this.destroy(m)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let m=this.matches[this.matchIdx++],y=this.usedLeft?this.funJoin(this.match,m):this.funJoin(m,this.match);if(y!==null)return y}this.hasResults()||this._end();let o=null;for(let m=0;m<2&&(o=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,o===null);++m);if(this.done||o===null)return this.readable=!1,null;let i=this.funHash(o),u=this.usedLeft?this.leftMap:this.rightMap;return u.has(i)||u.set(i,[]),u.get(i).push(o),this.match=o,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(i)||[],this.matchIdx=0,this.read()}}n.exports=c},"../node_modules/asyncjoin/util/MergeIterator.js":(n,e,t)=>{let a=t("asynciterator").AsyncIterator;class c extends a{constructor(o){super(),Array.isArray(o)||(o=Array.prototype.slice.call(arguments)),this.streams=o;for(let i of o)i.on("readable",()=>this.emit("readable")),i.on("end",()=>this._removeStream(i));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(o){let i=this.streams.indexOf(o);i<0||(this.streams.splice(i,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let o of this.streams)o.close()}read(){for(let o=0;o<this.streams.length;++o){this.idx=(this.idx+1)%this.streams.length;let i=this.streams[this.idx].read();if(i!==null)return i}return null}}n.exports=c},"../node_modules/bignumber.js/bignumber.js":function(n,e,t){var a;(function(c){var l,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,u=Math.floor,d="[BigNumber Error] ",m=d+"Number primitive has more than 15 significant digits: ",y=1e14,p=14,T=9007199254740991,_=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],w=1e7,S=1e9;function I(W){var U,Q,Z,L=fe.prototype={constructor:fe,toString:null,valueOf:null},M=new fe(1),V=20,H=4,J=-7,ce=21,oe=-1e7,le=1e7,ue=!1,be=1,Ee=0,Ae={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},xe="0123456789abcdefghijklmnopqrstuvwxyz",Oe=!0;function fe(C,$){var z,se,Y,ne,ae,q,ee,re,ie=this;if(!(ie instanceof fe))return new fe(C,$);if($==null){if(C&&C._isBigNumber===!0){ie.s=C.s,!C.c||C.e>le?ie.c=ie.e=null:C.e<oe?ie.c=[ie.e=0]:(ie.e=C.e,ie.c=C.c.slice());return}if((q=typeof C=="number")&&C*0==0){if(ie.s=1/C<0?(C=-C,-1):1,C===~~C){for(ne=0,ae=C;ae>=10;ae/=10,ne++);ne>le?ie.c=ie.e=null:(ie.e=ne,ie.c=[C]);return}re=String(C)}else{if(!o.test(re=String(C)))return Z(ie,re,q);ie.s=re.charCodeAt(0)==45?(re=re.slice(1),-1):1}(ne=re.indexOf("."))>-1&&(re=re.replace(".","")),(ae=re.search(/e/i))>0?(ne<0&&(ne=ae),ne+=+re.slice(ae+1),re=re.substring(0,ae)):ne<0&&(ne=re.length)}else{if(O($,2,xe.length,"Base"),$==10&&Oe)return ie=new fe(C),Ie(ie,V+ie.e+1,H);if(re=String(C),q=typeof C=="number"){if(C*0!=0)return Z(ie,re,q,$);if(ie.s=1/C<0?(re=re.slice(1),-1):1,fe.DEBUG&&re.replace(/^0\.0*|\./,"").length>15)throw Error(m+C)}else ie.s=re.charCodeAt(0)===45?(re=re.slice(1),-1):1;for(z=xe.slice(0,$),ne=ae=0,ee=re.length;ae<ee;ae++)if(z.indexOf(se=re.charAt(ae))<0){if(se=="."){if(ae>ne){ne=ee;continue}}else if(!Y&&(re==re.toUpperCase()&&(re=re.toLowerCase())||re==re.toLowerCase()&&(re=re.toUpperCase()))){Y=!0,ae=-1,ne=0;continue}return Z(ie,String(C),q,$)}q=!1,re=Q(re,$,10,ie.s),(ne=re.indexOf("."))>-1?re=re.replace(".",""):ne=re.length}for(ae=0;re.charCodeAt(ae)===48;ae++);for(ee=re.length;re.charCodeAt(--ee)===48;);if(re=re.slice(ae,++ee)){if(ee-=ae,q&&fe.DEBUG&&ee>15&&(C>T||C!==u(C)))throw Error(m+ie.s*C);if((ne=ne-ae-1)>le)ie.c=ie.e=null;else if(ne<oe)ie.c=[ie.e=0];else{if(ie.e=ne,ie.c=[],ae=(ne+1)%p,ne<0&&(ae+=p),ae<ee){for(ae&&ie.c.push(+re.slice(0,ae)),ee-=p;ae<ee;)ie.c.push(+re.slice(ae,ae+=p));ae=p-(re=re.slice(ae)).length}else ae-=ee;for(;ae--;re+="0");ie.c.push(+re)}}else ie.c=[ie.e=0]}fe.clone=I,fe.ROUND_UP=0,fe.ROUND_DOWN=1,fe.ROUND_CEIL=2,fe.ROUND_FLOOR=3,fe.ROUND_HALF_UP=4,fe.ROUND_HALF_DOWN=5,fe.ROUND_HALF_EVEN=6,fe.ROUND_HALF_CEIL=7,fe.ROUND_HALF_FLOOR=8,fe.EUCLID=9,fe.config=fe.set=function(C){var $,z;if(C!=null)if(typeof C=="object"){if(C.hasOwnProperty($="DECIMAL_PLACES")&&(z=C[$],O(z,0,S,$),V=z),C.hasOwnProperty($="ROUNDING_MODE")&&(z=C[$],O(z,0,8,$),H=z),C.hasOwnProperty($="EXPONENTIAL_AT")&&(z=C[$],z&&z.pop?(O(z[0],-S,0,$),O(z[1],0,S,$),J=z[0],ce=z[1]):(O(z,-S,S,$),J=-(ce=z<0?-z:z))),C.hasOwnProperty($="RANGE"))if(z=C[$],z&&z.pop)O(z[0],-S,-1,$),O(z[1],1,S,$),oe=z[0],le=z[1];else if(O(z,-S,S,$),z)oe=-(le=z<0?-z:z);else throw Error(d+$+" cannot be zero: "+z);if(C.hasOwnProperty($="CRYPTO"))if(z=C[$],z===!!z)if(z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))ue=z;else throw ue=!z,Error(d+"crypto unavailable");else ue=z;else throw Error(d+$+" not true or false: "+z);if(C.hasOwnProperty($="MODULO_MODE")&&(z=C[$],O(z,0,9,$),be=z),C.hasOwnProperty($="POW_PRECISION")&&(z=C[$],O(z,0,S,$),Ee=z),C.hasOwnProperty($="FORMAT"))if(z=C[$],typeof z=="object")Ae=z;else throw Error(d+$+" not an object: "+z);if(C.hasOwnProperty($="ALPHABET"))if(z=C[$],typeof z=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(z))Oe=z.slice(0,10)=="0123456789",xe=z;else throw Error(d+$+" invalid: "+z)}else throw Error(d+"Object expected: "+C);return{DECIMAL_PLACES:V,ROUNDING_MODE:H,EXPONENTIAL_AT:[J,ce],RANGE:[oe,le],CRYPTO:ue,MODULO_MODE:be,POW_PRECISION:Ee,FORMAT:Ae,ALPHABET:xe}},fe.isBigNumber=function(C){if(!C||C._isBigNumber!==!0)return!1;if(!fe.DEBUG)return!0;var $,z,se=C.c,Y=C.e,ne=C.s;e:if({}.toString.call(se)=="[object Array]"){if((ne===1||ne===-1)&&Y>=-S&&Y<=S&&Y===u(Y)){if(se[0]===0){if(Y===0&&se.length===1)return!0;break e}if($=(Y+1)%p,$<1&&($+=p),String(se[0]).length==$){for($=0;$<se.length;$++)if(z=se[$],z<0||z>=y||z!==u(z))break e;if(z!==0)return!0}}}else if(se===null&&Y===null&&(ne===null||ne===1||ne===-1))return!0;throw Error(d+"Invalid BigNumber: "+C)},fe.maximum=fe.max=function(){return Ne(arguments,L.lt)},fe.minimum=fe.min=function(){return Ne(arguments,L.gt)},fe.random=function(){var C=9007199254740992,$=Math.random()*C&2097151?function(){return u(Math.random()*C)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(z){var se,Y,ne,ae,q,ee=0,re=[],ie=new fe(M);if(z==null?z=V:O(z,0,S),ae=i(z/p),ue)if(crypto.getRandomValues){for(se=crypto.getRandomValues(new Uint32Array(ae*=2));ee<ae;)q=se[ee]*131072+(se[ee+1]>>>11),q>=9e15?(Y=crypto.getRandomValues(new Uint32Array(2)),se[ee]=Y[0],se[ee+1]=Y[1]):(re.push(q%1e14),ee+=2);ee=ae/2}else if(crypto.randomBytes){for(se=crypto.randomBytes(ae*=7);ee<ae;)q=(se[ee]&31)*281474976710656+se[ee+1]*1099511627776+se[ee+2]*4294967296+se[ee+3]*16777216+(se[ee+4]<<16)+(se[ee+5]<<8)+se[ee+6],q>=9e15?crypto.randomBytes(7).copy(se,ee):(re.push(q%1e14),ee+=7);ee=ae/7}else throw ue=!1,Error(d+"crypto unavailable");if(!ue)for(;ee<ae;)q=$(),q<9e15&&(re[ee++]=q%1e14);for(ae=re[--ee],z%=p,ae&&z&&(q=_[p-z],re[ee]=u(ae/q)*q);re[ee]===0;re.pop(),ee--);if(ee<0)re=[ne=0];else{for(ne=-1;re[0]===0;re.splice(0,1),ne-=p);for(ee=1,q=re[0];q>=10;q/=10,ee++);ee<p&&(ne-=p-ee)}return ie.e=ne,ie.c=re,ie}}(),fe.sum=function(){for(var C=1,$=arguments,z=new fe($[0]);C<$.length;)z=z.plus($[C++]);return z},Q=function(){var C="0123456789";function $(z,se,Y,ne){for(var ae,q=[0],ee,re=0,ie=z.length;re<ie;){for(ee=q.length;ee--;q[ee]*=se);for(q[0]+=ne.indexOf(z.charAt(re++)),ae=0;ae<q.length;ae++)q[ae]>Y-1&&(q[ae+1]==null&&(q[ae+1]=0),q[ae+1]+=q[ae]/Y|0,q[ae]%=Y)}return q.reverse()}return function(z,se,Y,ne,ae){var q,ee,re,ie,de,me,_e,g,h=z.indexOf("."),b=V,E=H;for(h>=0&&(ie=Ee,Ee=0,z=z.replace(".",""),g=new fe(se),me=g.pow(z.length-h),Ee=ie,g.c=$(G(x(me.c),me.e,"0"),10,Y,C),g.e=g.c.length),_e=$(z,se,Y,ae?(q=xe,C):(q=C,xe)),re=ie=_e.length;_e[--ie]==0;_e.pop());if(!_e[0])return q.charAt(0);if(h<0?--re:(me.c=_e,me.e=re,me.s=ne,me=U(me,g,b,E,Y),_e=me.c,de=me.r,re=me.e),ee=re+b+1,h=_e[ee],ie=Y/2,de=de||ee<0||_e[ee+1]!=null,de=E<4?(h!=null||de)&&(E==0||E==(me.s<0?3:2)):h>ie||h==ie&&(E==4||de||E==6&&_e[ee-1]&1||E==(me.s<0?8:7)),ee<1||!_e[0])z=de?G(q.charAt(1),-b,q.charAt(0)):q.charAt(0);else{if(_e.length=ee,de)for(--Y;++_e[--ee]>Y;)_e[ee]=0,ee||(++re,_e=[1].concat(_e));for(ie=_e.length;!_e[--ie];);for(h=0,z="";h<=ie;z+=q.charAt(_e[h++]));z=G(z,re,q.charAt(0))}return z}}(),U=function(){function C(se,Y,ne){var ae,q,ee,re,ie=0,de=se.length,me=Y%w,_e=Y/w|0;for(se=se.slice();de--;)ee=se[de]%w,re=se[de]/w|0,ae=_e*ee+re*me,q=me*ee+ae%w*w+ie,ie=(q/ne|0)+(ae/w|0)+_e*re,se[de]=q%ne;return ie&&(se=[ie].concat(se)),se}function $(se,Y,ne,ae){var q,ee;if(ne!=ae)ee=ne>ae?1:-1;else for(q=ee=0;q<ne;q++)if(se[q]!=Y[q]){ee=se[q]>Y[q]?1:-1;break}return ee}function z(se,Y,ne,ae){for(var q=0;ne--;)se[ne]-=q,q=se[ne]<Y[ne]?1:0,se[ne]=q*ae+se[ne]-Y[ne];for(;!se[0]&&se.length>1;se.splice(0,1));}return function(se,Y,ne,ae,q){var ee,re,ie,de,me,_e,g,h,b,E,P,F,X,ge,Re,je,Pe,Te=se.s==Y.s?1:-1,Qe=se.c,Ge=Y.c;if(!Qe||!Qe[0]||!Ge||!Ge[0])return new fe(!se.s||!Y.s||(Qe?Ge&&Qe[0]==Ge[0]:!Ge)?NaN:Qe&&Qe[0]==0||!Ge?Te*0:Te/0);for(h=new fe(Te),b=h.c=[],re=se.e-Y.e,Te=ne+re+1,q||(q=y,re=j(se.e/p)-j(Y.e/p),Te=Te/p|0),ie=0;Ge[ie]==(Qe[ie]||0);ie++);if(Ge[ie]>(Qe[ie]||0)&&re--,Te<0)b.push(1),de=!0;else{for(ge=Qe.length,je=Ge.length,ie=0,Te+=2,me=u(q/(Ge[0]+1)),me>1&&(Ge=C(Ge,me,q),Qe=C(Qe,me,q),je=Ge.length,ge=Qe.length),X=je,E=Qe.slice(0,je),P=E.length;P<je;E[P++]=0);Pe=Ge.slice(),Pe=[0].concat(Pe),Re=Ge[0],Ge[1]>=q/2&&Re++;do{if(me=0,ee=$(Ge,E,je,P),ee<0){if(F=E[0],je!=P&&(F=F*q+(E[1]||0)),me=u(F/Re),me>1)for(me>=q&&(me=q-1),_e=C(Ge,me,q),g=_e.length,P=E.length;$(_e,E,g,P)==1;)me--,z(_e,je<g?Pe:Ge,g,q),g=_e.length,ee=1;else me==0&&(ee=me=1),_e=Ge.slice(),g=_e.length;if(g<P&&(_e=[0].concat(_e)),z(E,_e,P,q),P=E.length,ee==-1)for(;$(Ge,E,je,P)<1;)me++,z(E,je<P?Pe:Ge,P,q),P=E.length}else ee===0&&(me++,E=[0]);b[ie++]=me,E[0]?E[P++]=Qe[X]||0:(E=[Qe[X]],P=1)}while((X++<ge||E[0]!=null)&&Te--);de=E[0]!=null,b[0]||b.splice(0,1)}if(q==y){for(ie=1,Te=b[0];Te>=10;Te/=10,ie++);Ie(h,ne+(h.e=ie+re*p-1)+1,ae,de)}else h.e=re,h.r=+de;return h}}();function Se(C,$,z,se){var Y,ne,ae,q,ee;if(z==null?z=H:O(z,0,8),!C.c)return C.toString();if(Y=C.c[0],ae=C.e,$==null)ee=x(C.c),ee=se==1||se==2&&(ae<=J||ae>=ce)?D(ee,ae):G(ee,ae,"0");else if(C=Ie(new fe(C),$,z),ne=C.e,ee=x(C.c),q=ee.length,se==1||se==2&&($<=ne||ne<=J)){for(;q<$;ee+="0",q++);ee=D(ee,ne)}else if($-=ae,ee=G(ee,ne,"0"),ne+1>q){if(--$>0)for(ee+=".";$--;ee+="0");}else if($+=ne-q,$>0)for(ne+1==q&&(ee+=".");$--;ee+="0");return C.s<0&&Y?"-"+ee:ee}function Ne(C,$){for(var z,se=1,Y=new fe(C[0]);se<C.length;se++)if(z=new fe(C[se]),z.s)$.call(Y,z)&&(Y=z);else{Y=z;break}return Y}function De(C,$,z){for(var se=1,Y=$.length;!$[--Y];$.pop());for(Y=$[0];Y>=10;Y/=10,se++);return(z=se+z*p-1)>le?C.c=C.e=null:z<oe?C.c=[C.e=0]:(C.e=z,C.c=$),C}Z=function(){var C=/^(-?)0([xbo])(?=\w[\w.]*$)/i,$=/^([^.]+)\.$/,z=/^\.([^.]+)$/,se=/^-?(Infinity|NaN)$/,Y=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(ne,ae,q,ee){var re,ie=q?ae:ae.replace(Y,"");if(se.test(ie))ne.s=isNaN(ie)?null:ie<0?-1:1;else{if(!q&&(ie=ie.replace(C,function(de,me,_e){return re=(_e=_e.toLowerCase())=="x"?16:_e=="b"?2:8,!ee||ee==re?me:de}),ee&&(re=ee,ie=ie.replace($,"$1").replace(z,"0.$1")),ae!=ie))return new fe(ie,re);if(fe.DEBUG)throw Error(d+"Not a"+(ee?" base "+ee:"")+" number: "+ae);ne.s=null}ne.c=ne.e=null}}();function Ie(C,$,z,se){var Y,ne,ae,q,ee,re,ie,de=C.c,me=_;if(de){e:{for(Y=1,q=de[0];q>=10;q/=10,Y++);if(ne=$-Y,ne<0)ne+=p,ae=$,ee=de[re=0],ie=ee/me[Y-ae-1]%10|0;else if(re=i((ne+1)/p),re>=de.length)if(se){for(;de.length<=re;de.push(0));ee=ie=0,Y=1,ne%=p,ae=ne-p+1}else break e;else{for(ee=q=de[re],Y=1;q>=10;q/=10,Y++);ne%=p,ae=ne-p+Y,ie=ae<0?0:ee/me[Y-ae-1]%10|0}if(se=se||$<0||de[re+1]!=null||(ae<0?ee:ee%me[Y-ae-1]),se=z<4?(ie||se)&&(z==0||z==(C.s<0?3:2)):ie>5||ie==5&&(z==4||se||z==6&&(ne>0?ae>0?ee/me[Y-ae]:0:de[re-1])%10&1||z==(C.s<0?8:7)),$<1||!de[0])return de.length=0,se?($-=C.e+1,de[0]=me[(p-$%p)%p],C.e=-$||0):de[0]=C.e=0,C;if(ne==0?(de.length=re,q=1,re--):(de.length=re+1,q=me[p-ne],de[re]=ae>0?u(ee/me[Y-ae]%me[ae])*q:0),se)for(;;)if(re==0){for(ne=1,ae=de[0];ae>=10;ae/=10,ne++);for(ae=de[0]+=q,q=1;ae>=10;ae/=10,q++);ne!=q&&(C.e++,de[0]==y&&(de[0]=1));break}else{if(de[re]+=q,de[re]!=y)break;de[re--]=0,q=1}for(ne=de.length;de[--ne]===0;de.pop());}C.e>le?C.c=C.e=null:C.e<oe&&(C.c=[C.e=0])}return C}function Le(C){var $,z=C.e;return z===null?C.toString():($=x(C.c),$=z<=J||z>=ce?D($,z):G($,z,"0"),C.s<0?"-"+$:$)}return L.absoluteValue=L.abs=function(){var C=new fe(this);return C.s<0&&(C.s=1),C},L.comparedTo=function(C,$){return v(this,new fe(C,$))},L.decimalPlaces=L.dp=function(C,$){var z,se,Y,ne=this;if(C!=null)return O(C,0,S),$==null?$=H:O($,0,8),Ie(new fe(ne),C+ne.e+1,$);if(!(z=ne.c))return null;if(se=((Y=z.length-1)-j(this.e/p))*p,Y=z[Y])for(;Y%10==0;Y/=10,se--);return se<0&&(se=0),se},L.dividedBy=L.div=function(C,$){return U(this,new fe(C,$),V,H)},L.dividedToIntegerBy=L.idiv=function(C,$){return U(this,new fe(C,$),0,1)},L.exponentiatedBy=L.pow=function(C,$){var z,se,Y,ne,ae,q,ee,re,ie,de=this;if(C=new fe(C),C.c&&!C.isInteger())throw Error(d+"Exponent not an integer: "+Le(C));if($!=null&&($=new fe($)),q=C.e>14,!de.c||!de.c[0]||de.c[0]==1&&!de.e&&de.c.length==1||!C.c||!C.c[0])return ie=new fe(Math.pow(+Le(de),q?C.s*(2-N(C)):+Le(C))),$?ie.mod($):ie;if(ee=C.s<0,$){if($.c?!$.c[0]:!$.s)return new fe(NaN);se=!ee&&de.isInteger()&&$.isInteger(),se&&(de=de.mod($))}else{if(C.e>9&&(de.e>0||de.e<-1||(de.e==0?de.c[0]>1||q&&de.c[1]>=24e7:de.c[0]<8e13||q&&de.c[0]<=9999975e7)))return ne=de.s<0&&N(C)?-0:0,de.e>-1&&(ne=1/ne),new fe(ee?1/ne:ne);Ee&&(ne=i(Ee/p+2))}for(q?(z=new fe(.5),ee&&(C.s=1),re=N(C)):(Y=Math.abs(+Le(C)),re=Y%2),ie=new fe(M);;){if(re){if(ie=ie.times(de),!ie.c)break;ne?ie.c.length>ne&&(ie.c.length=ne):se&&(ie=ie.mod($))}if(Y){if(Y=u(Y/2),Y===0)break;re=Y%2}else if(C=C.times(z),Ie(C,C.e+1,1),C.e>14)re=N(C);else{if(Y=+Le(C),Y===0)break;re=Y%2}de=de.times(de),ne?de.c&&de.c.length>ne&&(de.c.length=ne):se&&(de=de.mod($))}return se?ie:(ee&&(ie=M.div(ie)),$?ie.mod($):ne?Ie(ie,Ee,H,ae):ie)},L.integerValue=function(C){var $=new fe(this);return C==null?C=H:O(C,0,8),Ie($,$.e+1,C)},L.isEqualTo=L.eq=function(C,$){return v(this,new fe(C,$))===0},L.isFinite=function(){return!!this.c},L.isGreaterThan=L.gt=function(C,$){return v(this,new fe(C,$))>0},L.isGreaterThanOrEqualTo=L.gte=function(C,$){return($=v(this,new fe(C,$)))===1||$===0},L.isInteger=function(){return!!this.c&&j(this.e/p)>this.c.length-2},L.isLessThan=L.lt=function(C,$){return v(this,new fe(C,$))<0},L.isLessThanOrEqualTo=L.lte=function(C,$){return($=v(this,new fe(C,$)))===-1||$===0},L.isNaN=function(){return!this.s},L.isNegative=function(){return this.s<0},L.isPositive=function(){return this.s>0},L.isZero=function(){return!!this.c&&this.c[0]==0},L.minus=function(C,$){var z,se,Y,ne,ae=this,q=ae.s;if(C=new fe(C,$),$=C.s,!q||!$)return new fe(NaN);if(q!=$)return C.s=-$,ae.plus(C);var ee=ae.e/p,re=C.e/p,ie=ae.c,de=C.c;if(!ee||!re){if(!ie||!de)return ie?(C.s=-$,C):new fe(de?ae:NaN);if(!ie[0]||!de[0])return de[0]?(C.s=-$,C):new fe(ie[0]?ae:H==3?-0:0)}if(ee=j(ee),re=j(re),ie=ie.slice(),q=ee-re){for((ne=q<0)?(q=-q,Y=ie):(re=ee,Y=de),Y.reverse(),$=q;$--;Y.push(0));Y.reverse()}else for(se=(ne=(q=ie.length)<($=de.length))?q:$,q=$=0;$<se;$++)if(ie[$]!=de[$]){ne=ie[$]<de[$];break}if(ne&&(Y=ie,ie=de,de=Y,C.s=-C.s),$=(se=de.length)-(z=ie.length),$>0)for(;$--;ie[z++]=0);for($=y-1;se>q;){if(ie[--se]<de[se]){for(z=se;z&&!ie[--z];ie[z]=$);--ie[z],ie[se]+=y}ie[se]-=de[se]}for(;ie[0]==0;ie.splice(0,1),--re);return ie[0]?De(C,ie,re):(C.s=H==3?-1:1,C.c=[C.e=0],C)},L.modulo=L.mod=function(C,$){var z,se,Y=this;return C=new fe(C,$),!Y.c||!C.s||C.c&&!C.c[0]?new fe(NaN):!C.c||Y.c&&!Y.c[0]?new fe(Y):(be==9?(se=C.s,C.s=1,z=U(Y,C,0,3),C.s=se,z.s*=se):z=U(Y,C,0,be),C=Y.minus(z.times(C)),!C.c[0]&&be==1&&(C.s=Y.s),C)},L.multipliedBy=L.times=function(C,$){var z,se,Y,ne,ae,q,ee,re,ie,de,me,_e,g,h,b,E=this,P=E.c,F=(C=new fe(C,$)).c;if(!P||!F||!P[0]||!F[0])return!E.s||!C.s||P&&!P[0]&&!F||F&&!F[0]&&!P?C.c=C.e=C.s=null:(C.s*=E.s,!P||!F?C.c=C.e=null:(C.c=[0],C.e=0)),C;for(se=j(E.e/p)+j(C.e/p),C.s*=E.s,ee=P.length,de=F.length,ee<de&&(g=P,P=F,F=g,Y=ee,ee=de,de=Y),Y=ee+de,g=[];Y--;g.push(0));for(h=y,b=w,Y=de;--Y>=0;){for(z=0,me=F[Y]%b,_e=F[Y]/b|0,ae=ee,ne=Y+ae;ne>Y;)re=P[--ae]%b,ie=P[ae]/b|0,q=_e*re+ie*me,re=me*re+q%b*b+g[ne]+z,z=(re/h|0)+(q/b|0)+_e*ie,g[ne--]=re%h;g[ne]=z}return z?++se:g.splice(0,1),De(C,g,se)},L.negated=function(){var C=new fe(this);return C.s=-C.s||null,C},L.plus=function(C,$){var z,se=this,Y=se.s;if(C=new fe(C,$),$=C.s,!Y||!$)return new fe(NaN);if(Y!=$)return C.s=-$,se.minus(C);var ne=se.e/p,ae=C.e/p,q=se.c,ee=C.c;if(!ne||!ae){if(!q||!ee)return new fe(Y/0);if(!q[0]||!ee[0])return ee[0]?C:new fe(q[0]?se:Y*0)}if(ne=j(ne),ae=j(ae),q=q.slice(),Y=ne-ae){for(Y>0?(ae=ne,z=ee):(Y=-Y,z=q),z.reverse();Y--;z.push(0));z.reverse()}for(Y=q.length,$=ee.length,Y-$<0&&(z=ee,ee=q,q=z,$=Y),Y=0;$;)Y=(q[--$]=q[$]+ee[$]+Y)/y|0,q[$]=y===q[$]?0:q[$]%y;return Y&&(q=[Y].concat(q),++ae),De(C,q,ae)},L.precision=L.sd=function(C,$){var z,se,Y,ne=this;if(C!=null&&C!==!!C)return O(C,1,S),$==null?$=H:O($,0,8),Ie(new fe(ne),C,$);if(!(z=ne.c))return null;if(Y=z.length-1,se=Y*p+1,Y=z[Y]){for(;Y%10==0;Y/=10,se--);for(Y=z[0];Y>=10;Y/=10,se++);}return C&&ne.e+1>se&&(se=ne.e+1),se},L.shiftedBy=function(C){return O(C,-T,T),this.times("1e"+C)},L.squareRoot=L.sqrt=function(){var C,$,z,se,Y,ne=this,ae=ne.c,q=ne.s,ee=ne.e,re=V+4,ie=new fe("0.5");if(q!==1||!ae||!ae[0])return new fe(!q||q<0&&(!ae||ae[0])?NaN:ae?ne:1/0);if(q=Math.sqrt(+Le(ne)),q==0||q==1/0?($=x(ae),($.length+ee)%2==0&&($+="0"),q=Math.sqrt(+$),ee=j((ee+1)/2)-(ee<0||ee%2),q==1/0?$="5e"+ee:($=q.toExponential(),$=$.slice(0,$.indexOf("e")+1)+ee),z=new fe($)):z=new fe(q+""),z.c[0]){for(ee=z.e,q=ee+re,q<3&&(q=0);;)if(Y=z,z=ie.times(Y.plus(U(ne,Y,re,1))),x(Y.c).slice(0,q)===($=x(z.c)).slice(0,q))if(z.e<ee&&--q,$=$.slice(q-3,q+1),$=="9999"||!se&&$=="4999"){if(!se&&(Ie(Y,Y.e+V+2,0),Y.times(Y).eq(ne))){z=Y;break}re+=4,q+=4,se=1}else{(!+$||!+$.slice(1)&&$.charAt(0)=="5")&&(Ie(z,z.e+V+2,1),C=!z.times(z).eq(ne));break}}return Ie(z,z.e+V+1,H,C)},L.toExponential=function(C,$){return C!=null&&(O(C,0,S),C++),Se(this,C,$,1)},L.toFixed=function(C,$){return C!=null&&(O(C,0,S),C=C+this.e+1),Se(this,C,$)},L.toFormat=function(C,$,z){var se,Y=this;if(z==null)C!=null&&$&&typeof $=="object"?(z=$,$=null):C&&typeof C=="object"?(z=C,C=$=null):z=Ae;else if(typeof z!="object")throw Error(d+"Argument not an object: "+z);if(se=Y.toFixed(C,$),Y.c){var ne,ae=se.split("."),q=+z.groupSize,ee=+z.secondaryGroupSize,re=z.groupSeparator||"",ie=ae[0],de=ae[1],me=Y.s<0,_e=me?ie.slice(1):ie,g=_e.length;if(ee&&(ne=q,q=ee,ee=ne,g-=ne),q>0&&g>0){for(ne=g%q||q,ie=_e.substr(0,ne);ne<g;ne+=q)ie+=re+_e.substr(ne,q);ee>0&&(ie+=re+_e.slice(ne)),me&&(ie="-"+ie)}se=de?ie+(z.decimalSeparator||"")+((ee=+z.fractionGroupSize)?de.replace(new RegExp("\\d{"+ee+"}\\B","g"),"$&"+(z.fractionGroupSeparator||"")):de):ie}return(z.prefix||"")+se+(z.suffix||"")},L.toFraction=function(C){var $,z,se,Y,ne,ae,q,ee,re,ie,de,me,_e=this,g=_e.c;if(C!=null&&(q=new fe(C),!q.isInteger()&&(q.c||q.s!==1)||q.lt(M)))throw Error(d+"Argument "+(q.isInteger()?"out of range: ":"not an integer: ")+Le(q));if(!g)return new fe(_e);for($=new fe(M),re=z=new fe(M),se=ee=new fe(M),me=x(g),ne=$.e=me.length-_e.e-1,$.c[0]=_[(ae=ne%p)<0?p+ae:ae],C=!C||q.comparedTo($)>0?ne>0?$:re:q,ae=le,le=1/0,q=new fe(me),ee.c[0]=0;ie=U(q,$,0,1),Y=z.plus(ie.times(se)),Y.comparedTo(C)!=1;)z=se,se=Y,re=ee.plus(ie.times(Y=re)),ee=Y,$=q.minus(ie.times(Y=$)),q=Y;return Y=U(C.minus(z),se,0,1),ee=ee.plus(Y.times(re)),z=z.plus(Y.times(se)),ee.s=re.s=_e.s,ne=ne*2,de=U(re,se,ne,H).minus(_e).abs().comparedTo(U(ee,z,ne,H).minus(_e).abs())<1?[re,se]:[ee,z],le=ae,de},L.toNumber=function(){return+Le(this)},L.toPrecision=function(C,$){return C!=null&&O(C,1,S),Se(this,C,$,2)},L.toString=function(C){var $,z=this,se=z.s,Y=z.e;return Y===null?se?($="Infinity",se<0&&($="-"+$)):$="NaN":(C==null?$=Y<=J||Y>=ce?D(x(z.c),Y):G(x(z.c),Y,"0"):C===10&&Oe?(z=Ie(new fe(z),V+Y+1,H),$=G(x(z.c),z.e,"0")):(O(C,2,xe.length,"Base"),$=Q(G(x(z.c),Y,"0"),10,C,se,!0)),se<0&&z.c[0]&&($="-"+$)),$},L.valueOf=L.toJSON=function(){return Le(this)},L._isBigNumber=!0,W!=null&&fe.set(W),fe}function j(W){var U=W|0;return W>0||W===U?U:U-1}function x(W){for(var U,Q,Z=1,L=W.length,M=W[0]+"";Z<L;){for(U=W[Z++]+"",Q=p-U.length;Q--;U="0"+U);M+=U}for(L=M.length;M.charCodeAt(--L)===48;);return M.slice(0,L+1||1)}function v(W,U){var Q,Z,L=W.c,M=U.c,V=W.s,H=U.s,J=W.e,ce=U.e;if(!V||!H)return null;if(Q=L&&!L[0],Z=M&&!M[0],Q||Z)return Q?Z?0:-H:V;if(V!=H)return V;if(Q=V<0,Z=J==ce,!L||!M)return Z?0:!L^Q?1:-1;if(!Z)return J>ce^Q?1:-1;for(H=(J=L.length)<(ce=M.length)?J:ce,V=0;V<H;V++)if(L[V]!=M[V])return L[V]>M[V]^Q?1:-1;return J==ce?0:J>ce^Q?1:-1}function O(W,U,Q,Z){if(W<U||W>Q||W!==u(W))throw Error(d+(Z||"Argument")+(typeof W=="number"?W<U||W>Q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(W))}function N(W){var U=W.c.length-1;return j(W.e/p)==U&&W.c[U]%2!=0}function D(W,U){return(W.length>1?W.charAt(0)+"."+W.slice(1):W)+(U<0?"e":"e+")+U}function G(W,U,Q){var Z,L;if(U<0){for(L=Q+".";++U;L+=Q);W=L+W}else if(Z=W.length,++U>Z){for(L=Q,U-=Z;--U;L+=Q);W+=L}else U<Z&&(W=W.slice(0,U)+"."+W.slice(U));return W}l=I(),l.default=l.BigNumber=l,a=function(){return l}.call(e,t,e,n),a!==void 0&&(n.exports=a)})()},"../node_modules/canonicalize/lib/canonicalize.js":n=>{n.exports=function e(t){return t===null||typeof t!="object"||t.toJSON!=null?JSON.stringify(t):Array.isArray(t)?"["+t.reduce((a,c,l)=>{const o=l===0?"":",",i=c===void 0||typeof c=="symbol"?null:c;return a+o+e(i)},"")+"]":"{"+Object.keys(t).sort().reduce((a,c,l)=>{if(t[c]===void 0||typeof t[c]=="symbol")return a;const o=a.length===0?"":",";return a+o+e(c)+":"+e(t[c])},"")+"}"}},"../node_modules/hash.js/lib/hash.js":(n,e,t)=>{var a=e;a.utils=t("../node_modules/hash.js/lib/hash/utils.js"),a.common=t("../node_modules/hash.js/lib/hash/common.js"),a.sha=t("../node_modules/hash.js/lib/hash/sha.js"),a.ripemd=t("../node_modules/hash.js/lib/hash/ripemd.js"),a.hmac=t("../node_modules/hash.js/lib/hash/hmac.js"),a.sha1=a.sha.sha1,a.sha256=a.sha.sha256,a.sha224=a.sha.sha224,a.sha384=a.sha.sha384,a.sha512=a.sha.sha512,a.ripemd160=a.ripemd.ripemd160},"../node_modules/hash.js/lib/hash/common.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/minimalistic-assert/index.js");function l(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=l,l.prototype.update=function(i,u){if(i=a.toArray(i,u),this.pending?this.pending=this.pending.concat(i):this.pending=i,this.pendingTotal+=i.length,this.pending.length>=this._delta8){i=this.pending;var d=i.length%this._delta8;this.pending=i.slice(i.length-d,i.length),this.pending.length===0&&(this.pending=null),i=a.join32(i,0,i.length-d,this.endian);for(var m=0;m<i.length;m+=this._delta32)this._update(i,m,m+this._delta32)}return this},l.prototype.digest=function(i){return this.update(this._pad()),c(this.pending===null),this._digest(i)},l.prototype._pad=function(){var i=this.pendingTotal,u=this._delta8,d=u-(i+this.padLength)%u,m=new Array(d+this.padLength);m[0]=128;for(var y=1;y<d;y++)m[y]=0;if(i<<=3,this.endian==="big"){for(var p=8;p<this.padLength;p++)m[y++]=0;m[y++]=0,m[y++]=0,m[y++]=0,m[y++]=0,m[y++]=i>>>24&255,m[y++]=i>>>16&255,m[y++]=i>>>8&255,m[y++]=i&255}else for(m[y++]=i&255,m[y++]=i>>>8&255,m[y++]=i>>>16&255,m[y++]=i>>>24&255,m[y++]=0,m[y++]=0,m[y++]=0,m[y++]=0,p=8;p<this.padLength;p++)m[y++]=0;return m}},"../node_modules/hash.js/lib/hash/hmac.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/minimalistic-assert/index.js");function l(o,i,u){if(!(this instanceof l))return new l(o,i,u);this.Hash=o,this.blockSize=o.blockSize/8,this.outSize=o.outSize/8,this.inner=null,this.outer=null,this._init(a.toArray(i,u))}n.exports=l,l.prototype._init=function(i){i.length>this.blockSize&&(i=new this.Hash().update(i).digest()),c(i.length<=this.blockSize);for(var u=i.length;u<this.blockSize;u++)i.push(0);for(u=0;u<i.length;u++)i[u]^=54;for(this.inner=new this.Hash().update(i),u=0;u<i.length;u++)i[u]^=106;this.outer=new this.Hash().update(i)},l.prototype.update=function(i,u){return this.inner.update(i,u),this},l.prototype.digest=function(i){return this.outer.update(this.inner.digest()),this.outer.digest(i)}},"../node_modules/hash.js/lib/hash/ripemd.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/hash.js/lib/hash/common.js"),l=a.rotl32,o=a.sum32,i=a.sum32_3,u=a.sum32_4,d=c.BlockHash;function m(){if(!(this instanceof m))return new m;d.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}a.inherits(m,d),e.ripemd160=m,m.blockSize=512,m.outSize=160,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(x,v){for(var O=this.h[0],N=this.h[1],D=this.h[2],G=this.h[3],W=this.h[4],U=O,Q=N,Z=D,L=G,M=W,V=0;V<80;V++){var H=o(l(u(O,y(V,N,D,G),x[_[V]+v],p(V)),S[V]),W);O=W,W=G,G=l(D,10),D=N,N=H,H=o(l(u(U,y(79-V,Q,Z,L),x[w[V]+v],T(V)),I[V]),M),U=M,M=L,L=l(Z,10),Z=Q,Q=H}H=i(this.h[1],D,L),this.h[1]=i(this.h[2],G,M),this.h[2]=i(this.h[3],W,U),this.h[3]=i(this.h[4],O,Q),this.h[4]=i(this.h[0],N,Z),this.h[0]=H},m.prototype._digest=function(x){return x==="hex"?a.toHex32(this.h,"little"):a.split32(this.h,"little")};function y(j,x,v,O){return j<=15?x^v^O:j<=31?x&v|~x&O:j<=47?(x|~v)^O:j<=63?x&O|v&~O:x^(v|~O)}function p(j){return j<=15?0:j<=31?1518500249:j<=47?1859775393:j<=63?2400959708:2840853838}function T(j){return j<=15?1352829926:j<=31?1548603684:j<=47?1836072691:j<=63?2053994217:0}var _=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],w=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],S=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],I=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},"../node_modules/hash.js/lib/hash/sha.js":(n,e,t)=>{e.sha1=t("../node_modules/hash.js/lib/hash/sha/1.js"),e.sha224=t("../node_modules/hash.js/lib/hash/sha/224.js"),e.sha256=t("../node_modules/hash.js/lib/hash/sha/256.js"),e.sha384=t("../node_modules/hash.js/lib/hash/sha/384.js"),e.sha512=t("../node_modules/hash.js/lib/hash/sha/512.js")},"../node_modules/hash.js/lib/hash/sha/1.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/hash.js/lib/hash/common.js"),l=t("../node_modules/hash.js/lib/hash/sha/common.js"),o=a.rotl32,i=a.sum32,u=a.sum32_5,d=l.ft_1,m=c.BlockHash,y=[1518500249,1859775393,2400959708,3395469782];function p(){if(!(this instanceof p))return new p;m.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}a.inherits(p,m),n.exports=p,p.blockSize=512,p.outSize=160,p.hmacStrength=80,p.padLength=64,p.prototype._update=function(_,w){for(var S=this.W,I=0;I<16;I++)S[I]=_[w+I];for(;I<S.length;I++)S[I]=o(S[I-3]^S[I-8]^S[I-14]^S[I-16],1);var j=this.h[0],x=this.h[1],v=this.h[2],O=this.h[3],N=this.h[4];for(I=0;I<S.length;I++){var D=~~(I/20),G=u(o(j,5),d(D,x,v,O),N,S[I],y[D]);N=O,O=v,v=o(x,30),x=j,j=G}this.h[0]=i(this.h[0],j),this.h[1]=i(this.h[1],x),this.h[2]=i(this.h[2],v),this.h[3]=i(this.h[3],O),this.h[4]=i(this.h[4],N)},p.prototype._digest=function(_){return _==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/224.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/hash.js/lib/hash/sha/256.js");function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}a.inherits(l,c),n.exports=l,l.blockSize=512,l.outSize=224,l.hmacStrength=192,l.padLength=64,l.prototype._digest=function(i){return i==="hex"?a.toHex32(this.h.slice(0,7),"big"):a.split32(this.h.slice(0,7),"big")}},"../node_modules/hash.js/lib/hash/sha/256.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/hash.js/lib/hash/common.js"),l=t("../node_modules/hash.js/lib/hash/sha/common.js"),o=t("../node_modules/minimalistic-assert/index.js"),i=a.sum32,u=a.sum32_4,d=a.sum32_5,m=l.ch32,y=l.maj32,p=l.s0_256,T=l.s1_256,_=l.g0_256,w=l.g1_256,S=c.BlockHash,I=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function j(){if(!(this instanceof j))return new j;S.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=I,this.W=new Array(64)}a.inherits(j,S),n.exports=j,j.blockSize=512,j.outSize=256,j.hmacStrength=192,j.padLength=64,j.prototype._update=function(v,O){for(var N=this.W,D=0;D<16;D++)N[D]=v[O+D];for(;D<N.length;D++)N[D]=u(w(N[D-2]),N[D-7],_(N[D-15]),N[D-16]);var G=this.h[0],W=this.h[1],U=this.h[2],Q=this.h[3],Z=this.h[4],L=this.h[5],M=this.h[6],V=this.h[7];for(o(this.k.length===N.length),D=0;D<N.length;D++){var H=d(V,T(Z),m(Z,L,M),this.k[D],N[D]),J=i(p(G),y(G,W,U));V=M,M=L,L=Z,Z=i(Q,H),Q=U,U=W,W=G,G=i(H,J)}this.h[0]=i(this.h[0],G),this.h[1]=i(this.h[1],W),this.h[2]=i(this.h[2],U),this.h[3]=i(this.h[3],Q),this.h[4]=i(this.h[4],Z),this.h[5]=i(this.h[5],L),this.h[6]=i(this.h[6],M),this.h[7]=i(this.h[7],V)},j.prototype._digest=function(v){return v==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")}},"../node_modules/hash.js/lib/hash/sha/384.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/hash.js/lib/hash/sha/512.js");function l(){if(!(this instanceof l))return new l;c.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}a.inherits(l,c),n.exports=l,l.blockSize=1024,l.outSize=384,l.hmacStrength=192,l.padLength=128,l.prototype._digest=function(i){return i==="hex"?a.toHex32(this.h.slice(0,12),"big"):a.split32(this.h.slice(0,12),"big")}},"../node_modules/hash.js/lib/hash/sha/512.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=t("../node_modules/hash.js/lib/hash/common.js"),l=t("../node_modules/minimalistic-assert/index.js"),o=a.rotr64_hi,i=a.rotr64_lo,u=a.shr64_hi,d=a.shr64_lo,m=a.sum64,y=a.sum64_hi,p=a.sum64_lo,T=a.sum64_4_hi,_=a.sum64_4_lo,w=a.sum64_5_hi,S=a.sum64_5_lo,I=c.BlockHash,j=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function x(){if(!(this instanceof x))return new x;I.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=j,this.W=new Array(160)}a.inherits(x,I),n.exports=x,x.blockSize=1024,x.outSize=512,x.hmacStrength=192,x.padLength=128,x.prototype._prepareBlock=function(J,ce){for(var oe=this.W,le=0;le<32;le++)oe[le]=J[ce+le];for(;le<oe.length;le+=2){var ue=M(oe[le-4],oe[le-3]),be=V(oe[le-4],oe[le-3]),Ee=oe[le-14],Ae=oe[le-13],xe=Z(oe[le-30],oe[le-29]),Oe=L(oe[le-30],oe[le-29]),fe=oe[le-32],Se=oe[le-31];oe[le]=T(ue,be,Ee,Ae,xe,Oe,fe,Se),oe[le+1]=_(ue,be,Ee,Ae,xe,Oe,fe,Se)}},x.prototype._update=function(J,ce){this._prepareBlock(J,ce);var oe=this.W,le=this.h[0],ue=this.h[1],be=this.h[2],Ee=this.h[3],Ae=this.h[4],xe=this.h[5],Oe=this.h[6],fe=this.h[7],Se=this.h[8],Ne=this.h[9],De=this.h[10],Ie=this.h[11],Le=this.h[12],C=this.h[13],$=this.h[14],z=this.h[15];l(this.k.length===oe.length);for(var se=0;se<oe.length;se+=2){var Y=$,ne=z,ae=U(Se,Ne),q=Q(Se,Ne),ee=v(Se,Ne,De,Ie,Le),re=O(Se,Ne,De,Ie,Le,C),ie=this.k[se],de=this.k[se+1],me=oe[se],_e=oe[se+1],g=w(Y,ne,ae,q,ee,re,ie,de,me,_e),h=S(Y,ne,ae,q,ee,re,ie,de,me,_e);Y=G(le,ue),ne=W(le,ue),ae=N(le,ue,be,Ee,Ae),q=D(le,ue,be,Ee,Ae,xe);var b=y(Y,ne,ae,q),E=p(Y,ne,ae,q);$=Le,z=C,Le=De,C=Ie,De=Se,Ie=Ne,Se=y(Oe,fe,g,h),Ne=p(fe,fe,g,h),Oe=Ae,fe=xe,Ae=be,xe=Ee,be=le,Ee=ue,le=y(g,h,b,E),ue=p(g,h,b,E)}m(this.h,0,le,ue),m(this.h,2,be,Ee),m(this.h,4,Ae,xe),m(this.h,6,Oe,fe),m(this.h,8,Se,Ne),m(this.h,10,De,Ie),m(this.h,12,Le,C),m(this.h,14,$,z)},x.prototype._digest=function(J){return J==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")};function v(H,J,ce,oe,le){var ue=H&ce^~H&le;return ue<0&&(ue+=4294967296),ue}function O(H,J,ce,oe,le,ue){var be=J&oe^~J&ue;return be<0&&(be+=4294967296),be}function N(H,J,ce,oe,le){var ue=H&ce^H&le^ce&le;return ue<0&&(ue+=4294967296),ue}function D(H,J,ce,oe,le,ue){var be=J&oe^J&ue^oe&ue;return be<0&&(be+=4294967296),be}function G(H,J){var ce=o(H,J,28),oe=o(J,H,2),le=o(J,H,7),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}function W(H,J){var ce=i(H,J,28),oe=i(J,H,2),le=i(J,H,7),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}function U(H,J){var ce=o(H,J,14),oe=o(H,J,18),le=o(J,H,9),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}function Q(H,J){var ce=i(H,J,14),oe=i(H,J,18),le=i(J,H,9),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}function Z(H,J){var ce=o(H,J,1),oe=o(H,J,8),le=u(H,J,7),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}function L(H,J){var ce=i(H,J,1),oe=i(H,J,8),le=d(H,J,7),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}function M(H,J){var ce=o(H,J,19),oe=o(J,H,29),le=u(H,J,6),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}function V(H,J){var ce=i(H,J,19),oe=i(J,H,29),le=d(H,J,6),ue=ce^oe^le;return ue<0&&(ue+=4294967296),ue}},"../node_modules/hash.js/lib/hash/sha/common.js":(n,e,t)=>{var a=t("../node_modules/hash.js/lib/hash/utils.js"),c=a.rotr32;function l(T,_,w,S){if(T===0)return o(_,w,S);if(T===1||T===3)return u(_,w,S);if(T===2)return i(_,w,S)}e.ft_1=l;function o(T,_,w){return T&_^~T&w}e.ch32=o;function i(T,_,w){return T&_^T&w^_&w}e.maj32=i;function u(T,_,w){return T^_^w}e.p32=u;function d(T){return c(T,2)^c(T,13)^c(T,22)}e.s0_256=d;function m(T){return c(T,6)^c(T,11)^c(T,25)}e.s1_256=m;function y(T){return c(T,7)^c(T,18)^T>>>3}e.g0_256=y;function p(T){return c(T,17)^c(T,19)^T>>>10}e.g1_256=p},"../node_modules/hash.js/lib/hash/utils.js":(n,e,t)=>{var a=t("../node_modules/minimalistic-assert/index.js"),c=t("../node_modules/inherits/inherits_browser.js");e.inherits=c;function l(V,H){return(V.charCodeAt(H)&64512)!==55296||H<0||H+1>=V.length?!1:(V.charCodeAt(H+1)&64512)===56320}function o(V,H){if(Array.isArray(V))return V.slice();if(!V)return[];var J=[];if(typeof V=="string")if(H){if(H==="hex")for(V=V.replace(/[^a-z0-9]+/ig,""),V.length%2!==0&&(V="0"+V),oe=0;oe<V.length;oe+=2)J.push(parseInt(V[oe]+V[oe+1],16))}else for(var ce=0,oe=0;oe<V.length;oe++){var le=V.charCodeAt(oe);le<128?J[ce++]=le:le<2048?(J[ce++]=le>>6|192,J[ce++]=le&63|128):l(V,oe)?(le=65536+((le&1023)<<10)+(V.charCodeAt(++oe)&1023),J[ce++]=le>>18|240,J[ce++]=le>>12&63|128,J[ce++]=le>>6&63|128,J[ce++]=le&63|128):(J[ce++]=le>>12|224,J[ce++]=le>>6&63|128,J[ce++]=le&63|128)}else for(oe=0;oe<V.length;oe++)J[oe]=V[oe]|0;return J}e.toArray=o;function i(V){for(var H="",J=0;J<V.length;J++)H+=m(V[J].toString(16));return H}e.toHex=i;function u(V){var H=V>>>24|V>>>8&65280|V<<8&16711680|(V&255)<<24;return H>>>0}e.htonl=u;function d(V,H){for(var J="",ce=0;ce<V.length;ce++){var oe=V[ce];H==="little"&&(oe=u(oe)),J+=y(oe.toString(16))}return J}e.toHex32=d;function m(V){return V.length===1?"0"+V:V}e.zero2=m;function y(V){return V.length===7?"0"+V:V.length===6?"00"+V:V.length===5?"000"+V:V.length===4?"0000"+V:V.length===3?"00000"+V:V.length===2?"000000"+V:V.length===1?"0000000"+V:V}e.zero8=y;function p(V,H,J,ce){var oe=J-H;a(oe%4===0);for(var le=new Array(oe/4),ue=0,be=H;ue<le.length;ue++,be+=4){var Ee;ce==="big"?Ee=V[be]<<24|V[be+1]<<16|V[be+2]<<8|V[be+3]:Ee=V[be+3]<<24|V[be+2]<<16|V[be+1]<<8|V[be],le[ue]=Ee>>>0}return le}e.join32=p;function T(V,H){for(var J=new Array(V.length*4),ce=0,oe=0;ce<V.length;ce++,oe+=4){var le=V[ce];H==="big"?(J[oe]=le>>>24,J[oe+1]=le>>>16&255,J[oe+2]=le>>>8&255,J[oe+3]=le&255):(J[oe+3]=le>>>24,J[oe+2]=le>>>16&255,J[oe+1]=le>>>8&255,J[oe]=le&255)}return J}e.split32=T;function _(V,H){return V>>>H|V<<32-H}e.rotr32=_;function w(V,H){return V<<H|V>>>32-H}e.rotl32=w;function S(V,H){return V+H>>>0}e.sum32=S;function I(V,H,J){return V+H+J>>>0}e.sum32_3=I;function j(V,H,J,ce){return V+H+J+ce>>>0}e.sum32_4=j;function x(V,H,J,ce,oe){return V+H+J+ce+oe>>>0}e.sum32_5=x;function v(V,H,J,ce){var oe=V[H],le=V[H+1],ue=ce+le>>>0,be=(ue<ce?1:0)+J+oe;V[H]=be>>>0,V[H+1]=ue}e.sum64=v;function O(V,H,J,ce){var oe=H+ce>>>0,le=(oe<H?1:0)+V+J;return le>>>0}e.sum64_hi=O;function N(V,H,J,ce){var oe=H+ce;return oe>>>0}e.sum64_lo=N;function D(V,H,J,ce,oe,le,ue,be){var Ee=0,Ae=H;Ae=Ae+ce>>>0,Ee+=Ae<H?1:0,Ae=Ae+le>>>0,Ee+=Ae<le?1:0,Ae=Ae+be>>>0,Ee+=Ae<be?1:0;var xe=V+J+oe+ue+Ee;return xe>>>0}e.sum64_4_hi=D;function G(V,H,J,ce,oe,le,ue,be){var Ee=H+ce+le+be;return Ee>>>0}e.sum64_4_lo=G;function W(V,H,J,ce,oe,le,ue,be,Ee,Ae){var xe=0,Oe=H;Oe=Oe+ce>>>0,xe+=Oe<H?1:0,Oe=Oe+le>>>0,xe+=Oe<le?1:0,Oe=Oe+be>>>0,xe+=Oe<be?1:0,Oe=Oe+Ae>>>0,xe+=Oe<Ae?1:0;var fe=V+J+oe+ue+Ee+xe;return fe>>>0}e.sum64_5_hi=W;function U(V,H,J,ce,oe,le,ue,be,Ee,Ae){var xe=H+ce+le+be+Ae;return xe>>>0}e.sum64_5_lo=U;function Q(V,H,J){var ce=H<<32-J|V>>>J;return ce>>>0}e.rotr64_hi=Q;function Z(V,H,J){var ce=V<<32-J|H>>>J;return ce>>>0}e.rotr64_lo=Z;function L(V,H,J){return V>>>J}e.shr64_hi=L;function M(V,H,J){var ce=V<<32-J|H>>>J;return ce>>>0}e.shr64_lo=M},"../node_modules/inherits/inherits_browser.js":n=>{typeof Object.create=="function"?n.exports=function(t,a){a&&(t.super_=a,t.prototype=Object.create(a.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:n.exports=function(t,a){if(a){t.super_=a;var c=function(){};c.prototype=a.prototype,t.prototype=new c,t.prototype.constructor=t}}},"../node_modules/lru-cache/index.js":(n,e,t)=>{const a=t("../node_modules/yallist/yallist.js"),c=Symbol("max"),l=Symbol("length"),o=Symbol("lengthCalculator"),i=Symbol("allowStale"),u=Symbol("maxAge"),d=Symbol("dispose"),m=Symbol("noDisposeOnSet"),y=Symbol("lruList"),p=Symbol("cache"),T=Symbol("updateAgeOnGet"),_=()=>1;class w{constructor(D){if(typeof D=="number"&&(D={max:D}),D||(D={}),D.max&&(typeof D.max!="number"||D.max<0))throw new TypeError("max must be a non-negative number");this[c]=D.max||1/0;const G=D.length||_;if(this[o]=typeof G!="function"?_:G,this[i]=D.stale||!1,D.maxAge&&typeof D.maxAge!="number")throw new TypeError("maxAge must be a number");this[u]=D.maxAge||0,this[d]=D.dispose,this[m]=D.noDisposeOnSet||!1,this[T]=D.updateAgeOnGet||!1,this.reset()}set max(D){if(typeof D!="number"||D<0)throw new TypeError("max must be a non-negative number");this[c]=D||1/0,j(this)}get max(){return this[c]}set allowStale(D){this[i]=!!D}get allowStale(){return this[i]}set maxAge(D){if(typeof D!="number")throw new TypeError("maxAge must be a non-negative number");this[u]=D,j(this)}get maxAge(){return this[u]}set lengthCalculator(D){typeof D!="function"&&(D=_),D!==this[o]&&(this[o]=D,this[l]=0,this[y].forEach(G=>{G.length=this[o](G.value,G.key),this[l]+=G.length})),j(this)}get lengthCalculator(){return this[o]}get length(){return this[l]}get itemCount(){return this[y].length}rforEach(D,G){G=G||this;for(let W=this[y].tail;W!==null;){const U=W.prev;O(this,D,W,G),W=U}}forEach(D,G){G=G||this;for(let W=this[y].head;W!==null;){const U=W.next;O(this,D,W,G),W=U}}keys(){return this[y].toArray().map(D=>D.key)}values(){return this[y].toArray().map(D=>D.value)}reset(){this[d]&&this[y]&&this[y].length&&this[y].forEach(D=>this[d](D.key,D.value)),this[p]=new Map,this[y]=new a,this[l]=0}dump(){return this[y].map(D=>I(this,D)?!1:{k:D.key,v:D.value,e:D.now+(D.maxAge||0)}).toArray().filter(D=>D)}dumpLru(){return this[y]}set(D,G,W){if(W=W||this[u],W&&typeof W!="number")throw new TypeError("maxAge must be a number");const U=W?Date.now():0,Q=this[o](G,D);if(this[p].has(D)){if(Q>this[c])return x(this,this[p].get(D)),!1;const M=this[p].get(D).value;return this[d]&&(this[m]||this[d](D,M.value)),M.now=U,M.maxAge=W,M.value=G,this[l]+=Q-M.length,M.length=Q,this.get(D),j(this),!0}const Z=new v(D,G,Q,U,W);return Z.length>this[c]?(this[d]&&this[d](D,G),!1):(this[l]+=Z.length,this[y].unshift(Z),this[p].set(D,this[y].head),j(this),!0)}has(D){if(!this[p].has(D))return!1;const G=this[p].get(D).value;return!I(this,G)}get(D){return S(this,D,!0)}peek(D){return S(this,D,!1)}pop(){const D=this[y].tail;return D?(x(this,D),D.value):null}del(D){x(this,this[p].get(D))}load(D){this.reset();const G=Date.now();for(let W=D.length-1;W>=0;W--){const U=D[W],Q=U.e||0;if(Q===0)this.set(U.k,U.v);else{const Z=Q-G;Z>0&&this.set(U.k,U.v,Z)}}}prune(){this[p].forEach((D,G)=>S(this,G,!1))}}const S=(N,D,G)=>{const W=N[p].get(D);if(W){const U=W.value;if(I(N,U)){if(x(N,W),!N[i])return}else G&&(N[T]&&(W.value.now=Date.now()),N[y].unshiftNode(W));return U.value}},I=(N,D)=>{if(!D||!D.maxAge&&!N[u])return!1;const G=Date.now()-D.now;return D.maxAge?G>D.maxAge:N[u]&&G>N[u]},j=N=>{if(N[l]>N[c])for(let D=N[y].tail;N[l]>N[c]&&D!==null;){const G=D.prev;x(N,D),D=G}},x=(N,D)=>{if(D){const G=D.value;N[d]&&N[d](G.key,G.value),N[l]-=G.length,N[p].delete(G.key),N[y].removeNode(D)}};class v{constructor(D,G,W,U,Q){this.key=D,this.value=G,this.length=W,this.now=U,this.maxAge=Q||0}}const O=(N,D,G,W)=>{let U=G.value;I(N,U)&&(x(N,G),N[i]||(U=void 0)),U&&D.call(W,U.value,U.key,N)};n.exports=w},"../node_modules/minimalistic-assert/index.js":n=>{n.exports=e;function e(t,a){if(!t)throw new Error(a||"Assertion failed")}e.equal=function(a,c,l){if(a!=c)throw new Error(l||"Assertion failed: "+a+" != "+c)}},"../node_modules/rdf-data-factory/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/rdf-data-factory/lib/BlankNode.js"),e),c(t("../node_modules/rdf-data-factory/lib/DataFactory.js"),e),c(t("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),e),c(t("../node_modules/rdf-data-factory/lib/Literal.js"),e),c(t("../node_modules/rdf-data-factory/lib/NamedNode.js"),e),c(t("../node_modules/rdf-data-factory/lib/Quad.js"),e),c(t("../node_modules/rdf-data-factory/lib/Variable.js"),e)},"../node_modules/rdf-data-factory/lib/BlankNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BlankNode=void 0;class t{constructor(c){this.termType="BlankNode",this.value=c}equals(c){return!!c&&c.termType==="BlankNode"&&c.value===this.value}}e.BlankNode=t},"../node_modules/rdf-data-factory/lib/DataFactory.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataFactory=void 0;const a=t("../node_modules/rdf-data-factory/lib/BlankNode.js"),c=t("../node_modules/rdf-data-factory/lib/DefaultGraph.js"),l=t("../node_modules/rdf-data-factory/lib/Literal.js"),o=t("../node_modules/rdf-data-factory/lib/NamedNode.js"),i=t("../node_modules/rdf-data-factory/lib/Quad.js"),u=t("../node_modules/rdf-data-factory/lib/Variable.js");let d=0;class m{constructor(p){this.blankNodeCounter=0,p=p||{},this.blankNodePrefix=p.blankNodePrefix||`df_${d++}_`}namedNode(p){return new o.NamedNode(p)}blankNode(p){return new a.BlankNode(p||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(p,T){return new l.Literal(p,T)}variable(p){return new u.Variable(p)}defaultGraph(){return c.DefaultGraph.INSTANCE}quad(p,T,_,w){return new i.Quad(p,T,_,w||this.defaultGraph())}fromTerm(p){switch(p.termType){case"NamedNode":return this.namedNode(p.value);case"BlankNode":return this.blankNode(p.value);case"Literal":return p.language?this.literal(p.value,p.language):p.datatype.equals(l.Literal.XSD_STRING)?this.literal(p.value):this.literal(p.value,this.fromTerm(p.datatype));case"Variable":return this.variable(p.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(p.subject),this.fromTerm(p.predicate),this.fromTerm(p.object),this.fromTerm(p.graph))}}fromQuad(p){return this.fromTerm(p)}resetBlankNodeCounter(){this.blankNodeCounter=0}}e.DataFactory=m},"../node_modules/rdf-data-factory/lib/DefaultGraph.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultGraph=void 0;class t{constructor(){this.termType="DefaultGraph",this.value=""}equals(c){return!!c&&c.termType==="DefaultGraph"}}e.DefaultGraph=t,t.INSTANCE=new t},"../node_modules/rdf-data-factory/lib/Literal.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Literal=void 0;const a=t("../node_modules/rdf-data-factory/lib/NamedNode.js");class c{constructor(o,i){this.termType="Literal",this.value=o,typeof i=="string"?(this.language=i,this.datatype=c.RDF_LANGUAGE_STRING):i?(this.language="",this.datatype=i):(this.language="",this.datatype=c.XSD_STRING)}equals(o){return!!o&&o.termType==="Literal"&&o.value===this.value&&o.language===this.language&&o.datatype.equals(this.datatype)}}e.Literal=c,c.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),c.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string")},"../node_modules/rdf-data-factory/lib/NamedNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedNode=void 0;class t{constructor(c){this.termType="NamedNode",this.value=c}equals(c){return!!c&&c.termType==="NamedNode"&&c.value===this.value}}e.NamedNode=t},"../node_modules/rdf-data-factory/lib/Quad.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Quad=void 0;class t{constructor(c,l,o,i){this.termType="Quad",this.value="",this.subject=c,this.predicate=l,this.object=o,this.graph=i}equals(c){return!!c&&(c.termType==="Quad"||!c.termType)&&this.subject.equals(c.subject)&&this.predicate.equals(c.predicate)&&this.object.equals(c.object)&&this.graph.equals(c.graph)}}e.Quad=t},"../node_modules/rdf-data-factory/lib/Variable.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;class t{constructor(c){this.termType="Variable",this.value=c}equals(c){return!!c&&c.termType==="Variable"&&c.value===this.value}}e.Variable=t},"../node_modules/rdf-string/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.termToString=e.stringToTerm=e.stringQuadToQuad=e.quadToStringQuad=e.getLiteralValue=e.getLiteralType=e.getLiteralLanguage=void 0;const a=t("../node_modules/rdf-string/lib/TermUtil.js");Object.defineProperty(e,"getLiteralLanguage",{enumerable:!0,get:function(){return a.getLiteralLanguage}}),Object.defineProperty(e,"getLiteralType",{enumerable:!0,get:function(){return a.getLiteralType}}),Object.defineProperty(e,"getLiteralValue",{enumerable:!0,get:function(){return a.getLiteralValue}}),Object.defineProperty(e,"quadToStringQuad",{enumerable:!0,get:function(){return a.quadToStringQuad}}),Object.defineProperty(e,"stringQuadToQuad",{enumerable:!0,get:function(){return a.stringQuadToQuad}}),Object.defineProperty(e,"stringToTerm",{enumerable:!0,get:function(){return a.stringToTerm}}),Object.defineProperty(e,"termToString",{enumerable:!0,get:function(){return a.termToString}})},"../node_modules/rdf-string/lib/TermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringQuadToQuad=e.quadToStringQuad=e.stringToTerm=e.getLiteralLanguage=e.getLiteralType=e.getLiteralValue=e.termToString=void 0;const a=t("../node_modules/rdf-data-factory/index.js"),c=new a.DataFactory;function l(p){if(p)switch(p.termType){case"NamedNode":return p.value;case"BlankNode":return"_:"+p.value;case"Literal":const T=p;return'"'+T.value+'"'+(T.datatype&&T.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&T.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+T.datatype.value:"")+(T.language?"@"+T.language:"");case"Quad":return`<<${l(p.subject)} ${l(p.predicate)} ${l(p.object)}${p.graph.termType==="DefaultGraph"?"":" "+l(p.graph)}>>`;case"Variable":return"?"+p.value;case"DefaultGraph":return p.value}}e.termToString=l;function o(p){const T=/^"([^]*)"/.exec(p);if(!T)throw new Error(p+" is not a literal");return T[1]}e.getLiteralValue=o;function i(p){const T=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(p);if(!T)throw new Error(p+" is not a literal");return T[1]||(T[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}e.getLiteralType=i;function u(p){const T=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(p);if(!T)throw new Error(p+" is not a literal");return T[1]?T[1].toLowerCase():""}e.getLiteralLanguage=u;function d(p,T){if(T=T||c,!p||!p.length)return T.defaultGraph();switch(p[0]){case"_":return T.blankNode(p.substr(2));case"?":if(!T.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return T.variable(p.substr(1));case'"':const _=u(p),w=T.namedNode(i(p));return T.literal(o(p),_||w);case"<":default:if(p.startsWith("<<")&&p.endsWith(">>")){const S=p.slice(2,-2).trim();let I=[],j=0,x=0,v=!1;for(let O=0;O<S.length;O++){const N=S[O];if(N==="<"&&j++,N===">"){if(j===0)throw new Error("Found closing tag without opening tag in "+p);j--}if(N==='"'){let D=!1,G=O;for(;G-- >0&&S[G]==="\\";)D=!D;D||(v=!v)}if(N===" "&&!v&&j===0){for(I.push(S.slice(x,O));S[O+1]===" ";)O+=1;x=O+1}}if(j!==0)throw new Error("Found opening tag without closing tag in "+p);if(I.push(S.slice(x,S.length)),I.length!==3&&I.length!==4)throw new Error("Nested quad syntax error "+p);return I=I.map(O=>O.startsWith("<")&&!O.includes(" ")?O.slice(1,-1):O),T.quad(d(I[0]),d(I[1]),d(I[2]),I[3]?d(I[3]):void 0)}return T.namedNode(p)}}e.stringToTerm=d;function m(p){return{subject:l(p.subject),predicate:l(p.predicate),object:l(p.object),graph:l(p.graph)}}e.quadToStringQuad=m;function y(p,T){return T=T||c,T.quad(d(p.subject,T),d(p.predicate,T),d(p.object,T),d(p.graph,T))}e.stringQuadToQuad=y},"../node_modules/rdf-terms/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/rdf-terms/lib/QuadTermUtil.js"),e),c(t("../node_modules/rdf-terms/lib/TermUtil.js"),e)},"../node_modules/rdf-terms/lib/QuadTermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.matchPatternMappings=e.matchPatternComplete=e.matchPattern=e.matchTerm=e.someTerms=e.everyTerms=e.reduceTerms=e.mapTerms=e.filterQuadTermNames=e.filterTerms=e.forEachTerms=e.collectNamedTerms=e.getNamedTerms=e.getTermsNested=e.getTerms=e.TRIPLE_TERM_NAMES=e.QUAD_TERM_NAMES=void 0;const a=t("../node_modules/rdf-data-factory/index.js"),c=new a.DataFactory;e.QUAD_TERM_NAMES=["subject","predicate","object","graph"],e.TRIPLE_TERM_NAMES=["subject","predicate","object"];function l(v,O){return O&&v.graph.termType==="DefaultGraph"?[v.subject,v.predicate,v.object]:[v.subject,v.predicate,v.object,v.graph]}e.getTerms=l;function o(v,O){const N=[];for(const D of l(v,O))D.termType==="Quad"?o(D,O).forEach(G=>N.push(G)):N.push(D);return N}e.getTermsNested=o;function i(v){return[{key:"subject",value:v.subject},{key:"predicate",value:v.predicate},{key:"object",value:v.object},{key:"graph",value:v.graph}]}e.getNamedTerms=i;function u(v,O,N){const D={};return v.forEach(G=>D[G.key]=G.value),O&&(D.subject=D.subject||O("subject"),D.predicate=D.predicate||O("predicate"),D.object=D.object||O("object"),D.graph=D.graph||O("graph")),(N||c).quad(D.subject,D.predicate,D.object,D.graph)}e.collectNamedTerms=u;function d(v,O){O(v.subject,"subject"),O(v.predicate,"predicate"),O(v.object,"object"),O(v.graph,"graph")}e.forEachTerms=d;function m(v,O){const N=[];return O(v.subject,"subject")&&N.push(v.subject),O(v.predicate,"predicate")&&N.push(v.predicate),O(v.object,"object")&&N.push(v.object),O(v.graph,"graph")&&N.push(v.graph),N}e.filterTerms=m;function y(v,O){const N=[];return O(v.subject,"subject")&&N.push("subject"),O(v.predicate,"predicate")&&N.push("predicate"),O(v.object,"object")&&N.push("object"),O(v.graph,"graph")&&N.push("graph"),N}e.filterQuadTermNames=y;function p(v,O,N){return(N||c).quad(O(v.subject,"subject"),O(v.predicate,"predicate"),O(v.object,"object"),O(v.graph,"graph"))}e.mapTerms=p;function T(v,O,N){let D=N;return D=O(D,v.subject,"subject"),D=O(D,v.predicate,"predicate"),D=O(D,v.object,"object"),O(D,v.graph,"graph")}e.reduceTerms=T;function _(v,O){return O(v.subject,"subject")&&O(v.predicate,"predicate")&&O(v.object,"object")&&O(v.graph,"graph")}e.everyTerms=_;function w(v,O){return O(v.subject,"subject")||O(v.predicate,"predicate")||O(v.object,"object")||O(v.graph,"graph")}e.someTerms=w;function S(v,O){return!O||O.termType==="Variable"||O.termType==="Quad"&&v.termType==="Quad"&&j(v,O)||O.equals(v)}e.matchTerm=S;function I(v,O,N,D,G){return S(v.subject,O)&&S(v.predicate,N)&&S(v.object,D)&&S(v.graph,G)}e.matchPattern=I;function j(v,O){return I(v,O.subject,O.predicate,O.object,O.graph)}e.matchPatternComplete=j;function x(v,O,N={}){const D={};function G(W,U){return _(W,(Q,Z)=>{var L,M;const V=U[Z];switch(Q.termType){case"Variable":return N.skipVarMapping&&V.termType==="Variable"||((M=(L=D[Q.value])===null||L===void 0?void 0:L.equals(V))!==null&&M!==void 0?M:(D[Q.value]=V,!0));case"Quad":return V.termType==="Quad"&&G(Q,V);default:return Q.equals(V)}})}return G(O,v)&&(N.returnMappings?D:!0)}e.matchPatternMappings=x},"../node_modules/rdf-terms/lib/TermUtil.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getQuads=e.getDefaultGraphs=e.getVariables=e.getLiterals=e.getBlankNodes=e.getNamedNodes=e.getTermsOfType=e.uniqTerms=e.TERM_TYPES=void 0;const a=t("../node_modules/rdf-string/index.js");e.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function c(p){const T={};return p.filter(_=>{const w=a.termToString(_);return!(w in T)&&(T[w]=!0)})}e.uniqTerms=c;function l(p,T){return p.filter(_=>_.termType===T)}e.getTermsOfType=l;function o(p){return l(p,"NamedNode")}e.getNamedNodes=o;function i(p){return l(p,"BlankNode")}e.getBlankNodes=i;function u(p){return l(p,"Literal")}e.getLiterals=u;function d(p){return l(p,"Variable")}e.getVariables=d;function m(p){return l(p,"DefaultGraph")}e.getDefaultGraphs=m;function y(p){return l(p,"Quad")}e.getQuads=y},"../node_modules/relative-to-absolute-iri/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/relative-to-absolute-iri/lib/Resolve.js"),e)},"../node_modules/relative-to-absolute-iri/lib/Resolve.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeDotSegmentsOfPath=e.removeDotSegments=e.resolve=void 0;function t(o,i){i=i||"";const u=i.indexOf("#");if(u>0&&(i=i.substr(0,u)),!o.length){if(i.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${i}' for value '${o}'`);return i}if(o.startsWith("?")){const w=i.indexOf("?");return w>0&&(i=i.substr(0,w)),i+o}if(o.startsWith("#"))return i+o;if(!i.length){const w=o.indexOf(":");if(w<0)throw new Error(`Found invalid relative IRI '${o}' for a missing baseIRI`);return c(o,w)}const d=o.indexOf(":");if(d>=0)return c(o,d);const m=i.indexOf(":");if(m<0)throw new Error(`Found invalid baseIRI '${i}' for value '${o}'`);const y=i.substr(0,m+1);if(o.indexOf("//")===0)return y+c(o,d);let p;if(i.indexOf("//",m)===m+1){if(p=i.indexOf("/",m+3),p<0)return i.length>m+3?i+"/"+c(o,d):y+c(o,d)}else if(p=i.indexOf("/",m+1),p<0)return y+c(o,d);if(o.indexOf("/")===0)return i.substr(0,p)+a(o);let T=i.substr(p);const _=T.lastIndexOf("/");return _>=0&&_<T.length-1&&(T=T.substr(0,_+1),o[0]==="."&&o[1]!=="."&&o[1]!=="/"&&o[2]&&(o=o.substr(1))),o=T+o,o=a(o),i.substr(0,p)+o}e.resolve=t;function a(o){const i=[];let u=0;for(;u<o.length;)switch(o[u]){case"/":if(o[u+1]===".")if(o[u+2]==="."){if(!l(o[u+3])){i.push([]),u++;break}i.pop(),o[u+3]||i.push([]),u+=3}else{if(!l(o[u+2])){i.push([]),u++;break}o[u+2]||i.push([]),u+=2}else i.push([]),u++;break;case"#":case"?":i.length||i.push([]),i[i.length-1].push(o.substr(u)),u=o.length;break;default:i.length||i.push([]),i[i.length-1].push(o[u]),u++;break}return"/"+i.map(d=>d.join("")).join("/")}e.removeDotSegments=a;function c(o,i){let u=i+1;i>=0?o[i+1]==="/"&&o[i+2]==="/"&&(u=i+3):o[0]==="/"&&o[1]==="/"&&(u=2);const d=o.indexOf("/",u);if(d<0)return o;const m=o.substr(0,d),y=o.substr(d);return m+a(y)}e.removeDotSegmentsOfPath=c;function l(o){return!o||o==="#"||o==="?"||o==="/"}},"../node_modules/spark-md5/spark-md5.js":n=>{(function(e){n.exports=e()})(function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function a(S,I){var j=S[0],x=S[1],v=S[2],O=S[3];j+=(x&v|~x&O)+I[0]-680876936|0,j=(j<<7|j>>>25)+x|0,O+=(j&x|~j&v)+I[1]-389564586|0,O=(O<<12|O>>>20)+j|0,v+=(O&j|~O&x)+I[2]+606105819|0,v=(v<<17|v>>>15)+O|0,x+=(v&O|~v&j)+I[3]-1044525330|0,x=(x<<22|x>>>10)+v|0,j+=(x&v|~x&O)+I[4]-176418897|0,j=(j<<7|j>>>25)+x|0,O+=(j&x|~j&v)+I[5]+1200080426|0,O=(O<<12|O>>>20)+j|0,v+=(O&j|~O&x)+I[6]-1473231341|0,v=(v<<17|v>>>15)+O|0,x+=(v&O|~v&j)+I[7]-45705983|0,x=(x<<22|x>>>10)+v|0,j+=(x&v|~x&O)+I[8]+1770035416|0,j=(j<<7|j>>>25)+x|0,O+=(j&x|~j&v)+I[9]-1958414417|0,O=(O<<12|O>>>20)+j|0,v+=(O&j|~O&x)+I[10]-42063|0,v=(v<<17|v>>>15)+O|0,x+=(v&O|~v&j)+I[11]-1990404162|0,x=(x<<22|x>>>10)+v|0,j+=(x&v|~x&O)+I[12]+1804603682|0,j=(j<<7|j>>>25)+x|0,O+=(j&x|~j&v)+I[13]-40341101|0,O=(O<<12|O>>>20)+j|0,v+=(O&j|~O&x)+I[14]-1502002290|0,v=(v<<17|v>>>15)+O|0,x+=(v&O|~v&j)+I[15]+1236535329|0,x=(x<<22|x>>>10)+v|0,j+=(x&O|v&~O)+I[1]-165796510|0,j=(j<<5|j>>>27)+x|0,O+=(j&v|x&~v)+I[6]-1069501632|0,O=(O<<9|O>>>23)+j|0,v+=(O&x|j&~x)+I[11]+643717713|0,v=(v<<14|v>>>18)+O|0,x+=(v&j|O&~j)+I[0]-373897302|0,x=(x<<20|x>>>12)+v|0,j+=(x&O|v&~O)+I[5]-701558691|0,j=(j<<5|j>>>27)+x|0,O+=(j&v|x&~v)+I[10]+38016083|0,O=(O<<9|O>>>23)+j|0,v+=(O&x|j&~x)+I[15]-660478335|0,v=(v<<14|v>>>18)+O|0,x+=(v&j|O&~j)+I[4]-405537848|0,x=(x<<20|x>>>12)+v|0,j+=(x&O|v&~O)+I[9]+568446438|0,j=(j<<5|j>>>27)+x|0,O+=(j&v|x&~v)+I[14]-1019803690|0,O=(O<<9|O>>>23)+j|0,v+=(O&x|j&~x)+I[3]-187363961|0,v=(v<<14|v>>>18)+O|0,x+=(v&j|O&~j)+I[8]+1163531501|0,x=(x<<20|x>>>12)+v|0,j+=(x&O|v&~O)+I[13]-1444681467|0,j=(j<<5|j>>>27)+x|0,O+=(j&v|x&~v)+I[2]-51403784|0,O=(O<<9|O>>>23)+j|0,v+=(O&x|j&~x)+I[7]+1735328473|0,v=(v<<14|v>>>18)+O|0,x+=(v&j|O&~j)+I[12]-1926607734|0,x=(x<<20|x>>>12)+v|0,j+=(x^v^O)+I[5]-378558|0,j=(j<<4|j>>>28)+x|0,O+=(j^x^v)+I[8]-2022574463|0,O=(O<<11|O>>>21)+j|0,v+=(O^j^x)+I[11]+1839030562|0,v=(v<<16|v>>>16)+O|0,x+=(v^O^j)+I[14]-35309556|0,x=(x<<23|x>>>9)+v|0,j+=(x^v^O)+I[1]-1530992060|0,j=(j<<4|j>>>28)+x|0,O+=(j^x^v)+I[4]+1272893353|0,O=(O<<11|O>>>21)+j|0,v+=(O^j^x)+I[7]-155497632|0,v=(v<<16|v>>>16)+O|0,x+=(v^O^j)+I[10]-1094730640|0,x=(x<<23|x>>>9)+v|0,j+=(x^v^O)+I[13]+681279174|0,j=(j<<4|j>>>28)+x|0,O+=(j^x^v)+I[0]-358537222|0,O=(O<<11|O>>>21)+j|0,v+=(O^j^x)+I[3]-722521979|0,v=(v<<16|v>>>16)+O|0,x+=(v^O^j)+I[6]+76029189|0,x=(x<<23|x>>>9)+v|0,j+=(x^v^O)+I[9]-640364487|0,j=(j<<4|j>>>28)+x|0,O+=(j^x^v)+I[12]-421815835|0,O=(O<<11|O>>>21)+j|0,v+=(O^j^x)+I[15]+530742520|0,v=(v<<16|v>>>16)+O|0,x+=(v^O^j)+I[2]-995338651|0,x=(x<<23|x>>>9)+v|0,j+=(v^(x|~O))+I[0]-198630844|0,j=(j<<6|j>>>26)+x|0,O+=(x^(j|~v))+I[7]+1126891415|0,O=(O<<10|O>>>22)+j|0,v+=(j^(O|~x))+I[14]-1416354905|0,v=(v<<15|v>>>17)+O|0,x+=(O^(v|~j))+I[5]-57434055|0,x=(x<<21|x>>>11)+v|0,j+=(v^(x|~O))+I[12]+1700485571|0,j=(j<<6|j>>>26)+x|0,O+=(x^(j|~v))+I[3]-1894986606|0,O=(O<<10|O>>>22)+j|0,v+=(j^(O|~x))+I[10]-1051523|0,v=(v<<15|v>>>17)+O|0,x+=(O^(v|~j))+I[1]-2054922799|0,x=(x<<21|x>>>11)+v|0,j+=(v^(x|~O))+I[8]+1873313359|0,j=(j<<6|j>>>26)+x|0,O+=(x^(j|~v))+I[15]-30611744|0,O=(O<<10|O>>>22)+j|0,v+=(j^(O|~x))+I[6]-1560198380|0,v=(v<<15|v>>>17)+O|0,x+=(O^(v|~j))+I[13]+1309151649|0,x=(x<<21|x>>>11)+v|0,j+=(v^(x|~O))+I[4]-145523070|0,j=(j<<6|j>>>26)+x|0,O+=(x^(j|~v))+I[11]-1120210379|0,O=(O<<10|O>>>22)+j|0,v+=(j^(O|~x))+I[2]+718787259|0,v=(v<<15|v>>>17)+O|0,x+=(O^(v|~j))+I[9]-343485551|0,x=(x<<21|x>>>11)+v|0,S[0]=j+S[0]|0,S[1]=x+S[1]|0,S[2]=v+S[2]|0,S[3]=O+S[3]|0}function c(S){var I=[],j;for(j=0;j<64;j+=4)I[j>>2]=S.charCodeAt(j)+(S.charCodeAt(j+1)<<8)+(S.charCodeAt(j+2)<<16)+(S.charCodeAt(j+3)<<24);return I}function l(S){var I=[],j;for(j=0;j<64;j+=4)I[j>>2]=S[j]+(S[j+1]<<8)+(S[j+2]<<16)+(S[j+3]<<24);return I}function o(S){var I=S.length,j=[1732584193,-271733879,-1732584194,271733878],x,v,O,N,D,G;for(x=64;x<=I;x+=64)a(j,c(S.substring(x-64,x)));for(S=S.substring(x-64),v=S.length,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0;x<v;x+=1)O[x>>2]|=S.charCodeAt(x)<<(x%4<<3);if(O[x>>2]|=128<<(x%4<<3),x>55)for(a(j,O),x=0;x<16;x+=1)O[x]=0;return N=I*8,N=N.toString(16).match(/(.*?)(.{0,8})$/),D=parseInt(N[2],16),G=parseInt(N[1],16)||0,O[14]=D,O[15]=G,a(j,O),j}function i(S){var I=S.length,j=[1732584193,-271733879,-1732584194,271733878],x,v,O,N,D,G;for(x=64;x<=I;x+=64)a(j,l(S.subarray(x-64,x)));for(S=x-64<I?S.subarray(x-64):new Uint8Array(0),v=S.length,O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=0;x<v;x+=1)O[x>>2]|=S[x]<<(x%4<<3);if(O[x>>2]|=128<<(x%4<<3),x>55)for(a(j,O),x=0;x<16;x+=1)O[x]=0;return N=I*8,N=N.toString(16).match(/(.*?)(.{0,8})$/),D=parseInt(N[2],16),G=parseInt(N[1],16)||0,O[14]=D,O[15]=G,a(j,O),j}function u(S){var I="",j;for(j=0;j<4;j+=1)I+=t[S>>j*8+4&15]+t[S>>j*8&15];return I}function d(S){var I;for(I=0;I<S.length;I+=1)S[I]=u(S[I]);return S.join("")}d(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function S(I,j){return I=I|0||0,I<0?Math.max(I+j,0):Math.min(I,j)}ArrayBuffer.prototype.slice=function(I,j){var x=this.byteLength,v=S(I,x),O=x,N,D,G,W;return j!==e&&(O=S(j,x)),v>O?new ArrayBuffer(0):(N=O-v,D=new ArrayBuffer(N),G=new Uint8Array(D),W=new Uint8Array(this,v,N),G.set(W),D)}}();function m(S){return/[\u0080-\uFFFF]/.test(S)&&(S=unescape(encodeURIComponent(S))),S}function y(S,I){var j=S.length,x=new ArrayBuffer(j),v=new Uint8Array(x),O;for(O=0;O<j;O+=1)v[O]=S.charCodeAt(O);return I?v:x}function p(S){return String.fromCharCode.apply(null,new Uint8Array(S))}function T(S,I,j){var x=new Uint8Array(S.byteLength+I.byteLength);return x.set(new Uint8Array(S)),x.set(new Uint8Array(I),S.byteLength),j?x:x.buffer}function _(S){var I=[],j=S.length,x;for(x=0;x<j-1;x+=2)I.push(parseInt(S.substr(x,2),16));return String.fromCharCode.apply(String,I)}function w(){this.reset()}return w.prototype.append=function(S){return this.appendBinary(m(S)),this},w.prototype.appendBinary=function(S){this._buff+=S,this._length+=S.length;var I=this._buff.length,j;for(j=64;j<=I;j+=64)a(this._hash,c(this._buff.substring(j-64,j)));return this._buff=this._buff.substring(j-64),this},w.prototype.end=function(S){var I=this._buff,j=I.length,x,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],O;for(x=0;x<j;x+=1)v[x>>2]|=I.charCodeAt(x)<<(x%4<<3);return this._finish(v,j),O=d(this._hash),S&&(O=_(O)),this.reset(),O},w.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},w.prototype.setState=function(S){return this._buff=S.buff,this._length=S.length,this._hash=S.hash,this},w.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},w.prototype._finish=function(S,I){var j=I,x,v,O;if(S[j>>2]|=128<<(j%4<<3),j>55)for(a(this._hash,S),j=0;j<16;j+=1)S[j]=0;x=this._length*8,x=x.toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(x[2],16),O=parseInt(x[1],16)||0,S[14]=v,S[15]=O,a(this._hash,S)},w.hash=function(S,I){return w.hashBinary(m(S),I)},w.hashBinary=function(S,I){var j=o(S),x=d(j);return I?_(x):x},w.ArrayBuffer=function(){this.reset()},w.ArrayBuffer.prototype.append=function(S){var I=T(this._buff.buffer,S,!0),j=I.length,x;for(this._length+=S.byteLength,x=64;x<=j;x+=64)a(this._hash,l(I.subarray(x-64,x)));return this._buff=x-64<j?new Uint8Array(I.buffer.slice(x-64)):new Uint8Array(0),this},w.ArrayBuffer.prototype.end=function(S){var I=this._buff,j=I.length,x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v,O;for(v=0;v<j;v+=1)x[v>>2]|=I[v]<<(v%4<<3);return this._finish(x,j),O=d(this._hash),S&&(O=_(O)),this.reset(),O},w.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},w.ArrayBuffer.prototype.getState=function(){var S=w.prototype.getState.call(this);return S.buff=p(S.buff),S},w.ArrayBuffer.prototype.setState=function(S){return S.buff=y(S.buff,!0),w.prototype.setState.call(this,S)},w.ArrayBuffer.prototype.destroy=w.prototype.destroy,w.ArrayBuffer.prototype._finish=w.prototype._finish,w.ArrayBuffer.hash=function(S,I){var j=i(new Uint8Array(S)),x=d(j);return I?_(x):x},w})},"../node_modules/sparqlee/dist/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=e.orderTypes=e.isExpressionError=e.ExpressionError=e.AggregateEvaluator=e.SyncEvaluator=e.AsyncEvaluator=void 0;var a=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js");Object.defineProperty(e,"AsyncEvaluator",{enumerable:!0,get:function(){return a.AsyncEvaluator}});var c=t("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");Object.defineProperty(e,"SyncEvaluator",{enumerable:!0,get:function(){return c.SyncEvaluator}});var l=t("../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js");Object.defineProperty(e,"AggregateEvaluator",{enumerable:!0,get:function(){return l.AggregateEvaluator}});var o=t("../node_modules/sparqlee/dist/lib/util/Errors.js");Object.defineProperty(e,"ExpressionError",{enumerable:!0,get:function(){return o.ExpressionError}}),Object.defineProperty(e,"isExpressionError",{enumerable:!0,get:function(){return o.isExpressionError}});var i=t("../node_modules/sparqlee/dist/lib/util/Ordering.js");Object.defineProperty(e,"orderTypes",{enumerable:!0,get:function(){return i.orderTypes}});var u=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js");Object.defineProperty(e,"AsyncAggregateEvaluator",{enumerable:!0,get:function(){return u.AsyncAggregateEvaluator}})},"../node_modules/sparqlee/dist/lib/aggregators/Average.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Average=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),c=t("../node_modules/sparqlee/dist/lib/functions/index.js"),l=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),o=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),i=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class u extends i.BaseAggregator{constructor(){super(...arguments),this.summer=c.regularFunctions[o.RegularOperator.ADDITION],this.divider=c.regularFunctions[o.RegularOperator.DIVISION]}static emptyValue(){return(0,l.integer)(0).toRDF()}init(m){return{sum:this.termToNumericOrError(m),count:1}}put(m,y){const p=this.termToNumericOrError(y);return{sum:this.summer.apply([m.sum,p],this.sharedContext),count:m.count+1}}result(m){const y=new a.IntegerLiteral(m.count);return this.divider.apply([m.sum,y],this.sharedContext).toRDF()}}e.Average=u},"../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregator=void 0;const a=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),c=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class o{constructor(u,d){this.sharedContext=d,this.distinct=u.distinct,this.separator=u.separator||" ",this.termTransformer=new a.TermTransformer(d.superTypeProvider)}termToNumericOrError(u){if(u.termType!=="Literal")throw new Error(`Term with value ${u.value} has type ${u.termType} and is not a numeric literal`);if(!(0,l.isSubTypeOf)(u.datatype.value,c.TypeAlias.SPARQL_NUMERIC,this.sharedContext.superTypeProvider))throw new Error(`Term datatype ${u.datatype.value} with value ${u.value} has type ${u.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(u)}extractValue(u){if(u.termType!=="Literal")throw new Error(`Term with value ${u.value} has type ${u.termType} and is not a literal`);const d=this.termTransformer.transformLiteral(u);return{type:d.dataType,value:d.typedValue}}static emptyValue(){}}e.BaseAggregator=o},"../node_modules/sparqlee/dist/lib/aggregators/Count.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Count=void 0;const a=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),c=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends c.BaseAggregator{static emptyValue(){return(0,a.integer)(0).toRDF()}init(i){return 1}put(i,u){return i+1}result(i){return(0,a.integer)(i).toRDF()}}e.Count=l},"../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GroupConcat=void 0;const a=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),c=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class l extends c.BaseAggregator{static emptyValue(){return(0,a.string)("").toRDF()}init(i){return i.value}put(i,u){return i+this.separator+u.value}result(i){return(0,a.string)(i).toRDF()}}e.GroupConcat=l},"../node_modules/sparqlee/dist/lib/aggregators/Max.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Max=void 0;const a=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class c extends a.BaseAggregator{init(o){const{value:i}=this.extractValue(o);return{extremeValue:i,term:o}}put(o,i){const u=this.extractValue(i);return u.value>o.extremeValue?{extremeValue:u.value,term:i}:o}result(o){return o.term}}e.Max=c},"../node_modules/sparqlee/dist/lib/aggregators/Min.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Min=void 0;const a=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class c extends a.BaseAggregator{init(o){const{value:i}=this.extractValue(o);return{extremeValue:i,term:o}}put(o,i){const u=this.extractValue(i);return u.value<o.extremeValue?{extremeValue:u.value,term:i}:o}result(o){return o.term}}e.Min=c},"../node_modules/sparqlee/dist/lib/aggregators/Sample.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sample=void 0;const a=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class c extends a.BaseAggregator{init(o){return o}put(o,i){return o}result(o){return o}}e.Sample=c},"../node_modules/sparqlee/dist/lib/aggregators/Sum.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sum=void 0;const a=t("../node_modules/sparqlee/dist/lib/functions/index.js"),c=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),o=t("../node_modules/sparqlee/dist/lib/aggregators/BaseAggregator.js");class i extends o.BaseAggregator{constructor(){super(...arguments),this.summer=a.regularFunctions[l.RegularOperator.ADDITION]}static emptyValue(){return(0,c.integer)(0).toRDF()}init(d){return this.termToNumericOrError(d)}put(d,m){const y=this.termToNumericOrError(m);return this.summer.apply([d,y],this.sharedContext)}result(d){return d.toRDF()}}e.Sum=i},"../node_modules/sparqlee/dist/lib/aggregators/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.aggregators=void 0;const a=t("../node_modules/sparqlee/dist/lib/aggregators/Average.js"),c=t("../node_modules/sparqlee/dist/lib/aggregators/Count.js"),l=t("../node_modules/sparqlee/dist/lib/aggregators/GroupConcat.js"),o=t("../node_modules/sparqlee/dist/lib/aggregators/Max.js"),i=t("../node_modules/sparqlee/dist/lib/aggregators/Min.js"),u=t("../node_modules/sparqlee/dist/lib/aggregators/Sample.js"),d=t("../node_modules/sparqlee/dist/lib/aggregators/Sum.js");e.aggregators={count:c.Count,sum:d.Sum,min:i.Min,max:o.Max,avg:a.Average,group_concat:l.GroupConcat,sample:u.Sample}},"../node_modules/sparqlee/dist/lib/evaluators/AggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AggregateEvaluator=void 0;const a=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js"),c=t("../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js");class l extends a.BaseAggregateEvaluator{constructor(i,u,d){super(i,c.SyncEvaluator.completeContext(u||{}),d),this.evaluator=new c.SyncEvaluator(i.expression,u)}put(i){this.init(i)}__put(i){try{const u=this.evaluator.evaluate(i);this.state=this.aggregator.put(this.state,u)}catch(u){this.safeThrow(u)}}safeThrow(i){if(this.throwError)throw i;this.put=()=>{},this.result=()=>{}}init(i){try{const u=this.evaluator.evaluate(i);this.state=this.aggregator.init(u),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(u){this.safeThrow(u)}}}e.AggregateEvaluator=l},"../node_modules/sparqlee/dist/lib/evaluators/AsyncAggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncAggregateEvaluator=void 0;const a=t("../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js"),c=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js");class l extends c.BaseAggregateEvaluator{constructor(i,u,d){super(i,a.AsyncEvaluator.completeContext(u||{}),d),this.evaluator=new a.AsyncEvaluator(i.expression,u),this.errorOccurred=!1}put(i){return this.init(i)}async __put(i){try{const u=await this.evaluator.evaluate(i);this.state=this.aggregator.put(this.state,u)}catch(u){this.safeThrow(u)}}safeThrow(i){if(this.throwError)throw i;this.put=async()=>{},this.result=()=>{},this.errorOccurred=!0}async init(i){try{const u=await this.evaluator.evaluate(i);if(!u||this.errorOccurred)return;if(this.state){this.state=this.aggregator.put(this.state,u);return}this.state=this.aggregator.init(u),this.state&&(this.put=this.__put.bind(this),this.result=this.__result.bind(this))}catch(u){this.safeThrow(u)}}}e.AsyncAggregateEvaluator=l},"../node_modules/sparqlee/dist/lib/evaluators/AsyncEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncEvaluator=void 0;const a=t("../node_modules/lru-cache/index.js"),c=t("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),l=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js");class o{constructor(u,d={}){this.algExpr=u;const m=d.extensionFunctionCreator||(()=>{}),y=o.completeContext(d),p=new c.AlgebraTransformer(Object.assign({type:"async",creator:m},y));this.expr=p.transformAlgebra(u),this.evaluator=new l.AsyncRecursiveEvaluator(y,p)}static completeContext(u){return{now:u.now||new Date(Date.now()),baseIRI:u.baseIRI||void 0,functionArgumentsCache:u.functionArgumentsCache||{},superTypeProvider:{cache:u.typeCache||new a,discoverer:u.getSuperType||(()=>"term")},extensionFunctionCreator:u.extensionFunctionCreator,exists:u.exists,aggregate:u.aggregate,bnode:u.bnode}}async evaluate(u){return(await this.evaluator.evaluate(this.expr,u)).toRDF()}async evaluateAsEBV(u){return(await this.evaluator.evaluate(this.expr,u)).coerceEBV()}async evaluateAsInternal(u){return await this.evaluator.evaluate(this.expr,u)}}e.AsyncEvaluator=o},"../node_modules/sparqlee/dist/lib/evaluators/SyncEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncEvaluator=void 0;const a=t("../node_modules/lru-cache/index.js"),c=t("../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js"),l=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js");class o{constructor(u,d={}){this.algExpr=u,this.context=d;const m=d.extensionFunctionCreator||(()=>{}),y=o.completeContext(d),p=new c.AlgebraTransformer(Object.assign({type:"sync",creator:m},y));this.expr=p.transformAlgebra(u),this.evaluator=new l.SyncRecursiveEvaluator(y,p)}static completeContext(u){return{now:u.now||new Date(Date.now()),baseIRI:u.baseIRI||void 0,functionArgumentsCache:u.functionArgumentsCache||{},superTypeProvider:{cache:u.typeCache||new a,discoverer:u.getSuperType||(()=>"term")},extensionFunctionCreator:u.extensionFunctionCreator,exists:u.exists,aggregate:u.aggregate,bnode:u.bnode}}evaluate(u){return this.evaluator.evaluate(this.expr,u).toRDF()}evaluateAsEBV(u){return this.evaluator.evaluate(this.expr,u).coerceEBV()}evaluateAsInternal(u){return this.evaluator.evaluate(this.expr,u)}}e.SyncEvaluator=o},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/AsyncRecursiveEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncRecursiveEvaluator=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),c=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),o=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class i extends o.BaseExpressionEvaluator{constructor(d,m){super(m||new c.TermTransformer(d.superTypeProvider)),this.context=d,this.subEvaluators={[a.ExpressionType.Term]:this.term.bind(this),[a.ExpressionType.Variable]:this.variable.bind(this),[a.ExpressionType.Operator]:this.evalOperator.bind(this),[a.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[a.ExpressionType.Named]:this.evalNamed.bind(this),[a.ExpressionType.Existence]:this.evalExistence.bind(this),[a.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[a.ExpressionType.AsyncExtension]:this.evalAsyncExtension.bind(this)}}async evaluate(d,m){const y=this.subEvaluators[d.expressionType];if(!y)throw new l.InvalidExpressionType(d);return y.bind(this)(d,m)}async evalOperator(d,m){const y=d.args.map(T=>this.evaluate(T,m)),p=await Promise.all(y);return d.apply(p)}async evalSpecialOperator(d,m){const y=this.evaluate.bind(this),p={args:d.args,mapping:m,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:y,bnode:this.context.bnode};return d.applyAsync(p)}async _evalAsyncArgs(d,m){const y=d.map(p=>this.evaluate(p,m));return await Promise.all(y)}async evalNamed(d,m){return d.apply(await this._evalAsyncArgs(d.args,m))}async evalAsyncExtension(d,m){return await d.apply(await this._evalAsyncArgs(d.args,m))}async evalExistence(d,m){if(!this.context.exists)throw new l.NoExistenceHook;return new a.BooleanLiteral(await this.context.exists(d.expression,m))}async evalAggregate(d,m){if(!this.context.aggregate)throw new l.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(await this.context.aggregate(d.expression))}}e.AsyncRecursiveEvaluator=i},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseAggregateEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAggregateEvaluator=void 0;const a=t("../node_modules/sparqlee/dist/lib/aggregators/index.js"),c=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class l{constructor(i,u,d){this.throwError=!1,this.expression=i,this.aggregator=new a.aggregators[i.aggregator](i,u),this.throwError=d||!1}static emptyValue(i,u=!1){const d=a.aggregators[i.aggregator].emptyValue();if(d===void 0&&u)throw new c.EmptyAggregateError;return d}result(){return this.aggregator.constructor.emptyValue()}__result(){return this.aggregator.result(this.state)}}e.BaseAggregateEvaluator=l},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseExpressionEvaluator=void 0;const a=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),c=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class l{constructor(i){this.termTransformer=i}term(i,u){return i}variable(i,u){const d=u.get((0,a.expressionToVar)(i));if(!d)throw new c.UnboundVariableError(i.name,u);return this.termTransformer.transformRDFTermUnsafe(d)}}e.BaseExpressionEvaluator=l},"../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/SyncRecursiveEvaluator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncRecursiveEvaluator=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),c=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),l=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),o=t("../node_modules/sparqlee/dist/lib/evaluators/evaluatorHelpers/BaseExpressionEvaluator.js");class i extends o.BaseExpressionEvaluator{constructor(d,m){super(m||new c.TermTransformer(d.superTypeProvider)),this.context=d,this.subEvaluators={[a.ExpressionType.Term]:this.term.bind(this),[a.ExpressionType.Variable]:this.variable.bind(this),[a.ExpressionType.Operator]:this.evalOperator.bind(this),[a.ExpressionType.SpecialOperator]:this.evalSpecialOperator.bind(this),[a.ExpressionType.Named]:this.evalNamed.bind(this),[a.ExpressionType.Existence]:this.evalExistence.bind(this),[a.ExpressionType.Aggregate]:this.evalAggregate.bind(this),[a.ExpressionType.SyncExtension]:this.evalSyncExtension.bind(this)}}evaluate(d,m){const y=this.subEvaluators[d.expressionType];if(!y)throw new l.InvalidExpressionType(d);return y.bind(this)(d,m)}evalOperator(d,m){const y=d.args.map(p=>this.evaluate(p,m));return d.apply(y)}evalSpecialOperator(d,m){const y=this.evaluate.bind(this),p={args:d.args,mapping:m,superTypeProvider:this.context.superTypeProvider,now:this.context.now,baseIRI:this.context.baseIRI,functionArgumentsCache:this.context.functionArgumentsCache,evaluate:y,bnode:this.context.bnode};return d.applySync(p)}evalNamed(d,m){const y=d.args.map(p=>this.evaluate(p,m));return d.apply(y)}evalSyncExtension(d,m){const y=d.args.map(p=>this.evaluate(p,m));return d.apply(y)}evalExistence(d,m){if(!this.context.exists)throw new l.NoExistenceHook;return new a.BooleanLiteral(this.context.exists(d.expression,m))}evalAggregate(d,m){if(!this.context.aggregate)throw new l.NoAggregator;return this.termTransformer.transformRDFTermUnsafe(this.context.aggregate(d.expression))}}e.SyncRecursiveEvaluator=i},"../node_modules/sparqlee/dist/lib/expressions/Aggregate.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Aggregate=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o,i){this.name=o,this.expression=i,this.expressionType=a.ExpressionType.Aggregate}}e.Aggregate=c},"../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsyncExtension=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o,i,u){this.name=o,this.args=i,this.apply=u,this.expressionType=a.ExpressionType.AsyncExtension}}e.AsyncExtension=c},"../node_modules/sparqlee/dist/lib/expressions/Existence.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Existence=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o){this.expression=o,this.expressionType=a.ExpressionType.Existence}}e.Existence=c},"../node_modules/sparqlee/dist/lib/expressions/Expressions.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.asTermType=e.ExpressionType=void 0,function(a){a.Aggregate="aggregate",a.Existence="existence",a.Named="named",a.Operator="operator",a.SpecialOperator="specialOperator",a.Term="term",a.Variable="variable",a.AsyncExtension="asyncExtension",a.SyncExtension="syncExtension"}(e.ExpressionType||(e.ExpressionType={}));function t(a){if(a==="namedNode"||a==="literal"||a==="blankNode")return a}e.asTermType=t},"../node_modules/sparqlee/dist/lib/expressions/Named.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Named=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o,i,u){this.name=o,this.args=i,this.apply=u,this.expressionType=a.ExpressionType.Named}}e.Named=c},"../node_modules/sparqlee/dist/lib/expressions/Operator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Operator=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o,i){this.args=o,this.apply=i,this.expressionType=a.ExpressionType.Operator}}e.Operator=c},"../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialOperator=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o,i,u){this.args=o,this.applyAsync=i,this.applySync=u,this.expressionType=a.ExpressionType.SpecialOperator}}e.SpecialOperator=c},"../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SyncExtension=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o,i,u){this.name=o,this.args=i,this.apply=u,this.expressionType=a.ExpressionType.SyncExtension}}e.SyncExtension=c},"../node_modules/sparqlee/dist/lib/expressions/Term.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNonLexicalLiteral=e.NonLexicalLiteral=e.StringLiteral=e.LangStringLiteral=e.DateTimeLiteral=e.BooleanLiteral=e.DoubleLiteral=e.FloatLiteral=e.DecimalLiteral=e.IntegerLiteral=e.NumericLiteral=e.Literal=e.isLiteralTermExpression=e.BlankNode=e.NamedNode=e.Term=void 0;const a=t("../node_modules/rdf-data-factory/index.js"),c=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),o=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),i=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),u=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),d=new a.DataFactory;class m{constructor(){this.expressionType=u.ExpressionType.Term}str(){throw new o.InvalidArgumentTypes([this],c.RegularOperator.STR)}coerceEBV(){throw new o.EBVCoercionError(this)}}e.Term=m;class y extends m{constructor(Q){super(),this.value=Q,this.termType="namedNode"}toRDF(){return d.namedNode(this.value)}str(){return this.value}}e.NamedNode=y;class p extends m{constructor(Q){super(),this.termType="blankNode",this.value=typeof Q=="string"?d.blankNode(Q):Q}toRDF(){return this.value}}e.BlankNode=p;function T(U){if(U.termType==="literal")return U}e.isLiteralTermExpression=T;class _ extends m{constructor(Q,Z,L,M){super(),this.typedValue=Q,this.dataType=Z,this.strValue=L,this.language=M,this.termType="literal"}toRDF(){return d.literal(this.strValue||this.str(),this.language||d.namedNode(this.dataType))}str(){return this.strValue||this.typedValue.toString()}}e.Literal=_;class w extends _{constructor(Q,Z,L,M){super(Q,Z,L,M),this.typedValue=Q,this.strValue=L,this.language=M}coerceEBV(){return!!this.typedValue}toRDF(){const Q=super.toRDF();return Number.isFinite(this.typedValue)||(Q.value=Q.value.replace("Infinity","INF")),Q}str(){return this.strValue||this.specificFormatter(this.typedValue)}}e.NumericLiteral=w;class S extends w{constructor(Q,Z,L,M){super(Q,Z||l.TypeURL.XSD_INTEGER,L,M),this.typedValue=Q,this.strValue=L,this.language=M}specificFormatter(Q){return Q.toFixed(0)}}e.IntegerLiteral=S;class I extends w{constructor(Q,Z,L,M){super(Q,Z||l.TypeURL.XSD_DECIMAL,L,M),this.typedValue=Q,this.strValue=L,this.language=M}specificFormatter(Q){return Q.toString()}}e.DecimalLiteral=I;class j extends w{constructor(Q,Z,L,M){super(Q,Z||l.TypeURL.XSD_FLOAT,L,M),this.typedValue=Q,this.strValue=L,this.language=M}specificFormatter(Q){return Q.toString()}}e.FloatLiteral=j;class x extends w{constructor(Q,Z,L,M){super(Q,Z||l.TypeURL.XSD_DOUBLE,L,M),this.typedValue=Q,this.strValue=L,this.language=M}specificFormatter(Q){if(!Number.isFinite(Q))return Q>0?"INF":Q<0?"-INF":"NaN";const Z=Q.toExponential(),[L,M]=Z.split("e"),V=M.replace(/\+/u,"");return`${L.includes(".")?L:`${L}.0`}E${V}`}}e.DoubleLiteral=x;class v extends _{constructor(Q,Z,L){super(Q,L||l.TypeURL.XSD_BOOLEAN,Z),this.typedValue=Q,this.strValue=Z}coerceEBV(){return this.typedValue}}e.BooleanLiteral=v;class O extends _{constructor(Q,Z,L){super(Q,L||l.TypeURL.XSD_DATE_TIME,Z),this.typedValue=Q,this.strValue=Z}}e.DateTimeLiteral=O;class N extends _{constructor(Q,Z,L){super(Q,L||l.TypeURL.RDF_LANG_STRING,Q,Z),this.typedValue=Q,this.language=Z}coerceEBV(){return this.str().length>0}}e.LangStringLiteral=N;class D extends _{constructor(Q,Z){super(Q,Z||l.TypeURL.XSD_STRING,Q),this.typedValue=Q}coerceEBV(){return this.str().length>0}}e.StringLiteral=D;class G extends _{constructor(Q,Z,L,M,V){super({toString:()=>"undefined"},l.TypeAlias.SPARQL_NON_LEXICAL,M,V),this.typeURL=Z,this.openWorldType=L}coerceEBV(){if((0,i.isSubTypeOf)(this.typeURL,l.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,i.isSubTypeOf)(this.typeURL,l.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new o.EBVCoercionError(this)}toRDF(){return d.literal(this.str(),this.language||d.namedNode(this.typeURL))}str(){return this.strValue||""}}e.NonLexicalLiteral=G;function W(U){if(U.dataType===l.TypeAlias.SPARQL_NON_LEXICAL)return U}e.isNonLexicalLiteral=W},"../node_modules/sparqlee/dist/lib/expressions/Variable.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Variable=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js");class c{constructor(o){this.expressionType=a.ExpressionType.Variable,this.name=o}}e.Variable=c},"../node_modules/sparqlee/dist/lib/expressions/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i);var d=Object.getOwnPropertyDescriptor(o,i);(!d||("get"in d?!o.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return o[i]}}),Object.defineProperty(l,u,d)}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/sparqlee/dist/lib/expressions/Expressions.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/Variable.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/Term.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/Operator.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/SpecialOperator.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/Named.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/Aggregate.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/Existence.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/AsyncExtension.js"),e),c(t("../node_modules/sparqlee/dist/lib/expressions/SyncExtension.js"),e)},"../node_modules/sparqlee/dist/lib/functions/Core.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SpecialFunction=e.NamedFunction=e.RegularFunction=e.BaseFunction=void 0;const a=t("../node_modules/sparqlee/dist/lib/util/Errors.js");class c{constructor(m,y){this.operator=m,this.apply=(p,T)=>(this.monomorph(p,T.superTypeProvider,T.functionArgumentsCache)||this.handleInvalidTypes(p))(T)(p),this.arity=y.arity,this.overloads=y.overloads}monomorph(m,y,p){return this.overloads.search(m,y,p)}}e.BaseFunction=c;class l extends c{constructor(m,y){super(m,y),this.functionClass="regular"}handleInvalidTypes(m){throw new a.InvalidArgumentTypes(m,this.operator)}}e.RegularFunction=l;class o extends c{constructor(m,y){super(m,y),this.functionClass="named"}handleInvalidTypes(m){throw new a.InvalidArgumentTypes(m,this.operator)}}e.NamedFunction=o;class i{constructor(m,y){this.operator=m,this.functionClass="special",this.arity=y.arity,this.applySync=y.applySync,this.applyAsync=y.applyAsync,this.checkArity=y.checkArity||u(this.arity)}}e.SpecialFunction=i;function u(d){return m=>d===Number.POSITIVE_INFINITY?!0:m.length===d}},"../node_modules/sparqlee/dist/lib/functions/Helpers.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.expressionToVar=e.dateTime=e.langString=e.string=e.double=e.float=e.decimal=e.integer=e.bool=e.Builder=e.declare=void 0;const a=t("../node_modules/rdf-data-factory/index.js"),c=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),o=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),i=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=t("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js"),d=new a.DataFactory;function m(O){return new y(O)}e.declare=m;class y{constructor(N){this.overloadTree=new u.OverloadTree(N),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}set(N,D){return this.overloadTree.addOverload(N,D),this}copy({from:N,to:D}){const G=this.overloadTree.getImplementationExact(N);if(!G)throw new i.UnexpectedError("Tried to copy implementation, but types not found",{from:N,to:D});return this.set(D,G)}onUnary(N,D){return this.set([N],G=>([W])=>D(G)(W))}onUnaryTyped(N,D){return this.set([N],G=>([W])=>D(G)(W.typedValue))}onBinary(N,D){return this.set(N,G=>([W,U])=>D(G)(W,U))}onBinaryTyped(N,D){return this.set(N,G=>([W,U])=>D(G)(W.typedValue,U.typedValue))}onTernaryTyped(N,D){return this.set(N,G=>([W,U,Q])=>D(G)(W.typedValue,U.typedValue,Q.typedValue))}onTernary(N,D){return this.set(N,G=>([W,U,Q])=>D(G)(W,U,Q))}onQuaternaryTyped(N,D){return this.set(N,G=>([W,U,Q,Z])=>D(G)(W.typedValue,U.typedValue,Q.typedValue,Z.typedValue))}onTerm1(N){return this.set(["term"],D=>([G])=>N(D)(G))}onLiteral1(N){return this.set(["literal"],D=>([G])=>N(D)(G))}onBoolean1(N){return this.set([l.TypeURL.XSD_BOOLEAN],D=>([G])=>N(D)(G))}onBoolean1Typed(N){return this.set([l.TypeURL.XSD_BOOLEAN],D=>([G])=>N(D)(G.typedValue))}onString1(N){return this.set([l.TypeURL.XSD_STRING],D=>([G])=>N(D)(G))}onString1Typed(N){return this.set([l.TypeURL.XSD_STRING],D=>([G])=>N(D)(G.typedValue))}onLangString1(N){return this.set([l.TypeURL.RDF_LANG_STRING],D=>([G])=>N(D)(G))}onStringly1(N){return this.set([l.TypeAlias.SPARQL_STRINGLY],D=>([G])=>N(D)(G))}onStringly1Typed(N){return this.set([l.TypeAlias.SPARQL_STRINGLY],D=>([G])=>N(D)(G.typedValue))}onNumeric1(N){return this.set([l.TypeAlias.SPARQL_NUMERIC],D=>([G])=>N(D)(G)).invalidLexicalForm([l.TypeAlias.SPARQL_NON_LEXICAL],1)}onDateTime1(N){return this.set([l.TypeURL.XSD_DATE_TIME],D=>([G])=>N(D)(G)).invalidLexicalForm([l.TypeAlias.SPARQL_NON_LEXICAL],1)}numericConverter(N){const D=G=>W=>N(G)(W.typedValue);return this.onBinary([o.TypeURL.XSD_INTEGER],G=>W=>T(D(G)(W))).onBinary([o.TypeURL.XSD_DECIMAL],G=>W=>_(D(G)(W))).onBinary([o.TypeURL.XSD_FLOAT],G=>W=>w(D(G)(W))).onBinary([o.TypeURL.XSD_DOUBLE],G=>W=>S(D(G)(W))).invalidLexicalForm([l.TypeAlias.SPARQL_NON_LEXICAL],1)}arithmetic(N){const D=G=>(W,U)=>N(G)(W.typedValue,U.typedValue);return this.onBinary([o.TypeURL.XSD_INTEGER,o.TypeURL.XSD_INTEGER],G=>(W,U)=>T(D(G)(W,U))).onBinary([o.TypeURL.XSD_DECIMAL,o.TypeURL.XSD_DECIMAL],G=>(W,U)=>_(D(G)(W,U))).onBinary([o.TypeURL.XSD_FLOAT,o.TypeURL.XSD_FLOAT],G=>(W,U)=>w(D(G)(W,U))).onBinary([o.TypeURL.XSD_DOUBLE,o.TypeURL.XSD_DOUBLE],G=>(W,U)=>S(D(G)(W,U)))}numberTest(N){return this.numeric(D=>([G,W])=>{const U=N(D)(G.typedValue,W.typedValue);return p(U)})}stringTest(N){return this.set([l.TypeURL.XSD_STRING,l.TypeURL.XSD_STRING],D=>([G,W])=>{const U=N(D)(G.typedValue,W.typedValue);return p(U)}).invalidLexicalForm([l.TypeAlias.SPARQL_NON_LEXICAL,l.TypeURL.XSD_STRING],1).invalidLexicalForm([l.TypeURL.XSD_STRING,l.TypeAlias.SPARQL_NON_LEXICAL],2)}booleanTest(N){return this.set([l.TypeURL.XSD_BOOLEAN,l.TypeURL.XSD_BOOLEAN],D=>([G,W])=>{const U=N(D)(G.typedValue,W.typedValue);return p(U)}).invalidLexicalForm([l.TypeAlias.SPARQL_NON_LEXICAL,l.TypeURL.XSD_BOOLEAN],1).invalidLexicalForm([l.TypeURL.XSD_BOOLEAN,l.TypeAlias.SPARQL_NON_LEXICAL],2)}dateTimeTest(N){return this.set([l.TypeURL.XSD_DATE_TIME,l.TypeURL.XSD_DATE_TIME],D=>([G,W])=>{const U=N(D)(G.typedValue,W.typedValue);return p(U)}).invalidLexicalForm([l.TypeAlias.SPARQL_NON_LEXICAL,l.TypeURL.XSD_DATE_TIME],1).invalidLexicalForm([l.TypeURL.XSD_DATE_TIME,l.TypeAlias.SPARQL_NON_LEXICAL],2)}numeric(N){return this.set([l.TypeAlias.SPARQL_NUMERIC,l.TypeAlias.SPARQL_NUMERIC],N).invalidLexicalForm([l.TypeAlias.SPARQL_NUMERIC,l.TypeAlias.SPARQL_NON_LEXICAL],2).invalidLexicalForm([l.TypeAlias.SPARQL_NON_LEXICAL,l.TypeAlias.SPARQL_NUMERIC],1)}invalidLexicalForm(N,D){return this.set(N,()=>G=>{throw new i.InvalidLexicalForm(G[D-1].toRDF())})}}e.Builder=y;function p(O){return new c.BooleanLiteral(O)}e.bool=p;function T(O){return new c.IntegerLiteral(O)}e.integer=T;function _(O){return new c.DecimalLiteral(O)}e.decimal=_;function w(O){return new c.FloatLiteral(O)}e.float=w;function S(O){return new c.DoubleLiteral(O)}e.double=S;function I(O){return new c.StringLiteral(O)}e.string=I;function j(O,N){return new c.LangStringLiteral(O,N)}e.langString=j;function x(O,N){return new c.DateTimeLiteral(O,N)}e.dateTime=x;function v(O){return d.variable(O.name.slice(1))}e.expressionToVar=v},"../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.namedDefinitions=void 0;const a=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),c=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),l=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),i={arity:1,overloads:(0,o.declare)(a.TypeURL.XSD_STRING).onNumeric1(()=>_=>(0,o.string)((0,o.float)(_.typedValue).str())).onBoolean1Typed(()=>_=>(0,o.string)((0,o.bool)(_).str())).onTerm1(()=>_=>(0,o.string)(_.str())).collect()},u={arity:1,overloads:(0,o.declare)(a.TypeURL.XSD_FLOAT).onNumeric1(()=>_=>(0,o.float)(_.typedValue)).onBoolean1Typed(()=>_=>(0,o.float)(_?1:0)).onUnary(a.TypeURL.XSD_STRING,()=>_=>{const w=(0,l.parseXSDFloat)(_.str());if(w===void 0)throw new c.CastError(_,a.TypeURL.XSD_FLOAT);return(0,o.float)(w)}).copy({from:[a.TypeURL.XSD_STRING],to:[a.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},d={arity:1,overloads:(0,o.declare)(a.TypeURL.XSD_DOUBLE).onNumeric1(()=>_=>(0,o.double)(_.typedValue)).onBoolean1Typed(()=>_=>(0,o.double)(_?1:0)).onUnary(a.TypeURL.XSD_STRING,()=>_=>{const w=(0,l.parseXSDFloat)(_.str());if(w===void 0)throw new c.CastError(_,a.TypeURL.XSD_DOUBLE);return(0,o.double)(w)}).copy({from:[a.TypeURL.XSD_STRING],to:[a.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},m={arity:1,overloads:(0,o.declare)(a.TypeURL.XSD_DECIMAL).onNumeric1(()=>_=>{const w=(0,l.parseXSDDecimal)(_.str());if(w===void 0)throw new c.CastError(_,a.TypeURL.XSD_DECIMAL);return(0,o.decimal)(w)}).onString1(()=>_=>{const w=_.str(),S=/^([+-])?(\d+(\.\d+)?)$/u.test(w)?(0,l.parseXSDDecimal)(w):void 0;if(S===void 0)throw new c.CastError(_,a.TypeURL.XSD_DECIMAL);return(0,o.decimal)(S)}).copy({from:[a.TypeURL.XSD_STRING],to:[a.TypeAlias.SPARQL_NON_LEXICAL]}).onBoolean1Typed(()=>_=>(0,o.decimal)(_?1:0)).collect()},y={arity:1,overloads:(0,o.declare)(a.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>_=>(0,o.integer)(_?1:0)).onNumeric1(()=>_=>{const w=(0,l.parseXSDInteger)(_.str());if(w===void 0)throw new c.CastError(_,a.TypeURL.XSD_INTEGER);return(0,o.integer)(w)}).onString1(()=>_=>{const w=_.str(),S=/^\d+$/u.test(w)?(0,l.parseXSDInteger)(w):void 0;if(S===void 0)throw new c.CastError(_,a.TypeURL.XSD_INTEGER);return(0,o.integer)(S)}).copy({from:[a.TypeAlias.SPARQL_NUMERIC],to:[a.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},p={arity:1,overloads:(0,o.declare)(a.TypeURL.XSD_DATE_TIME).onUnary(a.TypeURL.XSD_DATE_TIME,()=>_=>_).onUnary(a.TypeURL.XSD_STRING,()=>_=>{const w=new Date(_.str());if(Number.isNaN(w.getTime()))throw new c.CastError(_,a.TypeURL.XSD_DATE_TIME);return(0,o.dateTime)(w,_.str())}).copy({from:[a.TypeURL.XSD_STRING],to:[a.TypeAlias.SPARQL_NON_LEXICAL]}).collect()},T={arity:1,overloads:(0,o.declare)(a.TypeURL.XSD_BOOLEAN).onNumeric1(()=>_=>(0,o.bool)(_.coerceEBV())).onUnary(a.TypeURL.XSD_BOOLEAN,()=>_=>(0,o.bool)(_.coerceEBV())).onUnary(a.TypeURL.XSD_STRING,()=>_=>{switch(_.str()){case"true":return(0,o.bool)(!0);case"false":return(0,o.bool)(!1);case"1":return(0,o.bool)(!0);case"0":return(0,o.bool)(!1);default:throw new c.CastError(_,a.TypeURL.XSD_BOOLEAN)}}).copy({from:[a.TypeURL.XSD_STRING],to:[a.TypeAlias.SPARQL_NON_LEXICAL]}).collect()};e.namedDefinitions={[a.TypeURL.XSD_STRING]:i,[a.TypeURL.XSD_FLOAT]:u,[a.TypeURL.XSD_DOUBLE]:d,[a.TypeURL.XSD_DECIMAL]:m,[a.TypeURL.XSD_INTEGER]:y,[a.TypeURL.XSD_DATE_TIME]:p,[a.TypeURL.XSD_DATE]:p,[a.TypeURL.XSD_BOOLEAN]:T}},"../node_modules/sparqlee/dist/lib/functions/OverloadTree.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),c=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),l=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js"),o=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js");class i{constructor(d,m){this.identifier=d,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=m||0,this.promotionCount=void 0}getSubtree(d){const m=(0,l.asGeneralType)(d);if(m)return this.generalOverloads[m];for(const[y,p]of this.literalOverLoads)if(d===y)return p}getImplementationExact(d){let m=this;for(const y of d)if(m=m.getSubtree(y),!m)return;return m.implementation}search(d,m,y){let p=y[this.identifier],T=0;for(;T<d.length&&p?.cache;){const S=d[T],I=(0,a.isLiteralTermExpression)(S);p=p.cache[I?I.dataType:S.termType],T++}if(T===d.length&&p?.func)return p.func;const _=[],w=0;if(d.length===0)return this.implementation;for(_.push(...this.getSubTreeWithArg(d[w],m).map(S=>({node:S,index:w+1})));_.length>0;){const{index:S,node:I}=_.pop();if(S===d.length&&I.implementation)return this.addToCache(y,d,I.implementation),I.implementation;_.push(...I.getSubTreeWithArg(d[S],m).map(j=>({node:j,index:S+1})))}}addToCache(d,m,y){function p(_,w){return w in _||(_[w]={}),_[w]}let T=p(d,this.identifier);for(const _ of m){const w=(0,a.isLiteralTermExpression)(_),S=w?w.dataType:_.termType;T.cache=T.cache||{},T=p(T.cache,S)}T.func=y}addOverload(d,m){this._addOverload([...d],m,0)}_addOverload(d,m,y){const[p,...T]=d;if(!p){(this.promotionCount===void 0||y<=this.promotionCount)&&(this.promotionCount=y,this.implementation=m);return}let _=this.getSubtree(p);if(!_){const w=new i(this.identifier,this.depth+1),S=(0,l.asGeneralType)(p);S&&(this.generalOverloads[S]=w);const I=(0,l.asOverrideType)(p);I&&this.literalOverLoads.push([I,w]),_=w}_._addOverload(T,m,y),p===c.TypeURL.XSD_STRING&&this.addPromotedOverload(c.TypeURL.XSD_ANY_URI,m,w=>(0,o.string)(w.str()),T,y),p===c.TypeURL.XSD_DOUBLE&&(this.addPromotedOverload(c.TypeURL.XSD_FLOAT,m,w=>(0,o.double)(w.typedValue),T,y),this.addPromotedOverload(c.TypeURL.XSD_DECIMAL,m,w=>(0,o.double)(w.typedValue),T,y)),p===c.TypeURL.XSD_FLOAT&&this.addPromotedOverload(c.TypeURL.XSD_DECIMAL,m,w=>(0,o.float)(w.typedValue),T,y)}addPromotedOverload(d,m,y,p,T){let _=this.getSubtree(d);if(!_){const w=new i(this.identifier,this.depth+1);this.literalOverLoads.push([d,w]),_=w}_._addOverload(p,w=>S=>m(w)([...S.slice(0,this.depth),y(S[this.depth]),...S.slice(this.depth+1,S.length)]),T+1)}getSubTreeWithArg(d,m){const y=[],p=(0,a.isLiteralTermExpression)(d);if(this.generalOverloads.term&&y.push(this.generalOverloads.term),this.generalOverloads[d.termType]&&y.push(this.generalOverloads[d.termType]),p){const T=(0,l.asKnownLiteralType)(p.dataType);let _;T?_=l.superTypeDictTable[T]:_=(0,l.getSuperTypes)(p.dataType,m);const w=this.literalOverLoads.filter(([S,I])=>S in _).map(([S,I])=>[_[S],I]);w.sort(([S,I],[j,x])=>S-j),y.push(...w.map(([S,I])=>I))}return y}}e.OverloadTree=i},"../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.definitions=void 0;const a=t("../node_modules/bignumber.js/bignumber.js"),c=t("../node_modules/hash.js/lib/hash.js"),l=t("../node_modules/rdf-data-factory/index.js"),o=t("../node_modules/relative-to-absolute-iri/index.js"),i=t("../node_modules/spark-md5/spark-md5.js"),u=t("../packages/uuid/dist/index.js"),d=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),m=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),y=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),p=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),T=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),_=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),w=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),S=t("../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js"),I=new l.DataFactory,j={arity:1,overloads:(0,w.declare)(y.RegularOperator.NOT).onTerm1(()=>te=>(0,w.bool)(!te.coerceEBV())).collect()},x={arity:1,overloads:(0,w.declare)(y.RegularOperator.UPLUS).numericConverter(()=>te=>te).collect()},v={arity:1,overloads:(0,w.declare)(y.RegularOperator.UMINUS).numericConverter(()=>te=>-te).collect()},O={arity:2,overloads:(0,w.declare)(y.RegularOperator.MULTIPLICATION).arithmetic(()=>(te,he)=>new a.BigNumber(te).times(he).toNumber()).collect()},N={arity:2,overloads:(0,w.declare)(y.RegularOperator.DIVISION).arithmetic(()=>(te,he)=>new a.BigNumber(te).div(he).toNumber()).onBinaryTyped([p.TypeURL.XSD_INTEGER,p.TypeURL.XSD_INTEGER],()=>(te,he)=>{if(he===0)throw new T.ExpressionError("Integer division by 0");return(0,w.decimal)(new a.BigNumber(te).div(he).toNumber())}).collect()},D={arity:2,overloads:(0,w.declare)(y.RegularOperator.ADDITION).arithmetic(()=>(te,he)=>new a.BigNumber(te).plus(he).toNumber()).collect()},G={arity:2,overloads:(0,w.declare)(y.RegularOperator.SUBTRACTION).arithmetic(()=>(te,he)=>new a.BigNumber(te).minus(he).toNumber()).collect()},W={arity:2,overloads:(0,w.declare)(y.RegularOperator.EQUAL).numberTest(()=>(te,he)=>te===he).stringTest(()=>(te,he)=>te.localeCompare(he)===0).booleanTest(()=>(te,he)=>te===he).dateTimeTest(()=>(te,he)=>te.getTime()===he.getTime()).set(["term","term"],()=>([te,he])=>(0,w.bool)(U(te,he))).collect()};function U(te,he){const Ue=te.toRDF(),Ve=he.toRDF(),He=Ue.equals(Ve);if(Ue.termType==="Literal"&&Ve.termType==="Literal")throw new T.RDFEqualTypeError([te,he]);return He}const Q={arity:2,overloads:(0,w.declare)(y.RegularOperator.NOT_EQUAL).numberTest(()=>(te,he)=>te!==he).stringTest(()=>(te,he)=>te.localeCompare(he)!==0).booleanTest(()=>(te,he)=>te!==he).dateTimeTest(()=>(te,he)=>te.getTime()!==he.getTime()).set(["term","term"],()=>([te,he])=>(0,w.bool)(!U(te,he))).collect()},Z={arity:2,overloads:(0,w.declare)(y.RegularOperator.LT).numberTest(()=>(te,he)=>te<he).stringTest(()=>(te,he)=>te.localeCompare(he)===-1).booleanTest(()=>(te,he)=>te<he).dateTimeTest(()=>(te,he)=>te.getTime()<he.getTime()).collect()},L={arity:2,overloads:(0,w.declare)(y.RegularOperator.GT).numberTest(()=>(te,he)=>te>he).stringTest(()=>(te,he)=>te.localeCompare(he)===1).booleanTest(()=>(te,he)=>te>he).dateTimeTest(()=>(te,he)=>te.getTime()>he.getTime()).collect()},M={arity:2,overloads:(0,w.declare)(y.RegularOperator.LTE).numberTest(()=>(te,he)=>te<=he).stringTest(()=>(te,he)=>te.localeCompare(he)!==1).booleanTest(()=>(te,he)=>te<=he).dateTimeTest(()=>(te,he)=>te.getTime()<=he.getTime()).collect()},V={arity:2,overloads:(0,w.declare)(y.RegularOperator.GTE).numberTest(()=>(te,he)=>te>=he).stringTest(()=>(te,he)=>te.localeCompare(he)!==-1).booleanTest(()=>(te,he)=>te>=he).dateTimeTest(()=>(te,he)=>te.getTime()>=he.getTime()).collect()},H={arity:1,overloads:(0,w.declare)(y.RegularOperator.IS_IRI).onTerm1(()=>te=>(0,w.bool)(te.termType==="namedNode")).collect()},J={arity:1,overloads:(0,w.declare)(y.RegularOperator.IS_BLANK).onTerm1(()=>te=>(0,w.bool)(te.termType==="blankNode")).collect()},ce={arity:1,overloads:(0,w.declare)(y.RegularOperator.IS_LITERAL).onTerm1(()=>te=>(0,w.bool)(te.termType==="literal")).collect()},oe={arity:1,overloads:(0,w.declare)(y.RegularOperator.IS_NUMERIC).onNumeric1(()=>te=>(0,w.bool)(!0)).onTerm1(()=>te=>(0,w.bool)(!1)).collect()},le={arity:1,overloads:(0,w.declare)(y.RegularOperator.STR).onTerm1(()=>te=>(0,w.string)(te.str())).collect()},ue={arity:1,overloads:(0,w.declare)(y.RegularOperator.LANG).onLiteral1(()=>te=>(0,w.string)(te.language||"")).collect()},be={arity:1,overloads:(0,w.declare)(y.RegularOperator.DATATYPE).onLiteral1(()=>te=>new d.NamedNode(te.dataType)).collect()},Ee={arity:1,overloads:(0,w.declare)(y.RegularOperator.IRI).set(["namedNode"],te=>he=>{const Ue=he[0],Ve=(0,o.resolve)(Ue.str(),te.baseIRI||"");return new d.NamedNode(Ve)}).onString1(te=>he=>{const Ue=(0,o.resolve)(he.str(),te.baseIRI||"");return new d.NamedNode(Ue)}).collect()},Ae={arity:2,overloads:(0,w.declare)(y.RegularOperator.STRDT).set([p.TypeURL.XSD_STRING,"namedNode"],({superTypeProvider:te})=>([he,Ue])=>{const Ve=I.literal(he.typedValue,I.namedNode(Ue.value));return new m.TermTransformer(te).transformLiteral(Ve)}).collect()},xe={arity:2,overloads:(0,w.declare)(y.RegularOperator.STRLANG).onBinaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>(te,he)=>new d.LangStringLiteral(te,he.toLowerCase())).collect()},Oe={arity:0,overloads:(0,w.declare)(y.RegularOperator.UUID).set([],()=>()=>new d.NamedNode(`urn:uuid:${u.v4()}`)).collect()},fe={arity:0,overloads:(0,w.declare)(y.RegularOperator.STRUUID).set([],()=>()=>(0,w.string)(u.v4())).collect()},Se={arity:1,overloads:(0,w.declare)(y.RegularOperator.STRLEN).onStringly1(()=>te=>(0,w.integer)([...te.typedValue].length)).collect()},Ne={arity:[2,3],overloads:(0,w.declare)(y.RegularOperator.SUBSTR).onBinaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_INTEGER],()=>(te,he)=>(0,w.string)([...te].slice(he-1).join(""))).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.XSD_INTEGER],()=>(te,he)=>{const Ue=[...te.typedValue].slice(he.typedValue-1).join("");return(0,w.langString)(Ue,te.language)}).onTernaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_INTEGER,p.TypeURL.XSD_INTEGER],()=>(te,he,Ue)=>(0,w.string)([...te].slice(he-1,Ue+he-1).join(""))).onTernary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.XSD_INTEGER,p.TypeURL.XSD_INTEGER],()=>(te,he,Ue)=>{const Ve=[...te.typedValue].slice(he.typedValue-1,Ue.typedValue+he.typedValue-1).join("");return(0,w.langString)(Ve,te.language)}).collect()},De={arity:1,overloads:(0,w.declare)(y.RegularOperator.UCASE).onString1Typed(()=>te=>(0,w.string)(te.toUpperCase())).onLangString1(()=>te=>(0,w.langString)(te.typedValue.toUpperCase(),te.language)).collect()},Ie={arity:1,overloads:(0,w.declare)(y.RegularOperator.LCASE).onString1Typed(()=>te=>(0,w.string)(te.toLowerCase())).onLangString1(()=>te=>(0,w.langString)(te.typedValue.toLowerCase(),te.language)).collect()},Le={arity:2,overloads:(0,w.declare)(y.RegularOperator.STRSTARTS).onBinaryTyped([p.TypeAlias.SPARQL_STRINGLY,p.TypeURL.XSD_STRING],()=>(te,he)=>(0,w.bool)(te.startsWith(he))).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.RDF_LANG_STRING],()=>(te,he)=>{if(te.language!==he.language)throw new T.IncompatibleLanguageOperation(te,he);return(0,w.bool)(te.typedValue.startsWith(he.typedValue))}).collect()},C={arity:2,overloads:(0,w.declare)(y.RegularOperator.STRENDS).onBinaryTyped([p.TypeAlias.SPARQL_STRINGLY,p.TypeURL.XSD_STRING],()=>(te,he)=>(0,w.bool)(te.endsWith(he))).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.RDF_LANG_STRING],()=>(te,he)=>{if(te.language!==he.language)throw new T.IncompatibleLanguageOperation(te,he);return(0,w.bool)(te.typedValue.endsWith(he.typedValue))}).collect()},$={arity:2,overloads:(0,w.declare)(y.RegularOperator.CONTAINS).onBinaryTyped([p.TypeAlias.SPARQL_STRINGLY,p.TypeURL.XSD_STRING],()=>(te,he)=>(0,w.bool)(te.includes(he))).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.RDF_LANG_STRING],()=>(te,he)=>{if(te.language!==he.language)throw new T.IncompatibleLanguageOperation(te,he);return(0,w.bool)(te.typedValue.includes(he.typedValue))}).collect()},z={arity:2,overloads:(0,w.declare)(y.RegularOperator.STRBEFORE).onBinaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>(te,he)=>(0,w.string)(te.slice(0,Math.max(0,te.indexOf(he))))).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.XSD_STRING],()=>(te,he)=>{const[Ue,Ve]=[te.typedValue,he.typedValue],He=te.typedValue.slice(0,Math.max(0,Ue.indexOf(Ve)));return He||!Ve?(0,w.langString)(He,te.language):(0,w.string)(He)}).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.RDF_LANG_STRING],()=>(te,he)=>{if(te.language!==he.language)throw new T.IncompatibleLanguageOperation(te,he);const[Ue,Ve]=[te.typedValue,he.typedValue],He=te.typedValue.slice(0,Math.max(0,Ue.indexOf(Ve)));return He||!Ve?(0,w.langString)(He,te.language):(0,w.string)(He)}).collect()},se={arity:2,overloads:(0,w.declare)(y.RegularOperator.STRAFTER).onBinaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>(te,he)=>(0,w.string)(te.slice(te.indexOf(he)).slice(he.length))).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.XSD_STRING],()=>(te,he)=>{const[Ue,Ve]=[te.typedValue,he.typedValue],He=Ue.slice(Ue.indexOf(Ve)).slice(Ve.length);return He||!Ve?(0,w.langString)(He,te.language):(0,w.string)(He)}).onBinary([p.TypeURL.RDF_LANG_STRING,p.TypeURL.RDF_LANG_STRING],()=>(te,he)=>{if(te.language!==he.language)throw new T.IncompatibleLanguageOperation(te,he);const[Ue,Ve]=[te.typedValue,he.typedValue],He=Ue.slice(Ue.indexOf(Ve)).slice(Ve.length);return He||!Ve?(0,w.langString)(He,te.language):(0,w.string)(He)}).collect()},Y={arity:1,overloads:(0,w.declare)(y.RegularOperator.ENCODE_FOR_URI).onStringly1Typed(()=>te=>(0,w.string)(encodeURI(te))).collect()},ne={arity:2,overloads:(0,w.declare)(y.RegularOperator.LANG_MATCHES).onBinaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>(te,he)=>(0,w.bool)(S.langMatches(te,he))).collect()},ae=()=>(te,he)=>(0,w.bool)(S.matches(te,he)),q=()=>(te,he,Ue)=>(0,w.bool)(S.matches(te,he,Ue)),ee={arity:[2,3],overloads:(0,w.declare)(y.RegularOperator.REGEX).onBinaryTyped([p.TypeAlias.SPARQL_STRINGLY,p.TypeURL.XSD_STRING],ae).onTernaryTyped([p.TypeAlias.SPARQL_STRINGLY,p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],q).collect()},re={arity:[3,4],overloads:(0,w.declare)(y.RegularOperator.REPLACE).onTernaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>(te,he,Ue)=>(0,w.string)(S.replace(te,he,Ue))).set([p.TypeURL.RDF_LANG_STRING,p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>([te,he,Ue])=>{const Ve=S.replace(te.typedValue,he.typedValue,Ue.typedValue);return(0,w.langString)(Ve,te.language)}).onQuaternaryTyped([p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>(te,he,Ue,Ve)=>(0,w.string)(S.replace(te,he,Ue,Ve))).set([p.TypeURL.RDF_LANG_STRING,p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING,p.TypeURL.XSD_STRING],()=>([te,he,Ue,Ve])=>{const He=S.replace(te.typedValue,he.typedValue,Ue.typedValue,Ve.typedValue);return(0,w.langString)(He,te.language)}).collect()},ie={arity:1,overloads:(0,w.declare)(y.RegularOperator.ABS).numericConverter(()=>te=>Math.abs(te)).collect()},de={arity:1,overloads:(0,w.declare)(y.RegularOperator.ROUND).numericConverter(()=>te=>Math.round(te)).collect()},me={arity:1,overloads:(0,w.declare)(y.RegularOperator.CEIL).numericConverter(()=>te=>Math.ceil(te)).collect()},_e={arity:1,overloads:(0,w.declare)(y.RegularOperator.FLOOR).numericConverter(()=>te=>Math.floor(te)).collect()},g={arity:0,overloads:(0,w.declare)(y.RegularOperator.RAND).set([],()=>()=>(0,w.double)(Math.random())).collect()};function h(te){return _.parseXSDDateTime(te.str())}const b={arity:0,overloads:(0,w.declare)(y.RegularOperator.NOW).set([],te=>()=>new d.DateTimeLiteral(te.now,te.now.toISOString())).collect()},E={arity:1,overloads:(0,w.declare)(y.RegularOperator.YEAR).onDateTime1(()=>te=>(0,w.integer)(Number(h(te).year))).collect()},P={arity:1,overloads:(0,w.declare)(y.RegularOperator.MONTH).onDateTime1(()=>te=>(0,w.integer)(Number(h(te).month))).collect()},F={arity:1,overloads:(0,w.declare)(y.RegularOperator.DAY).onDateTime1(()=>te=>(0,w.integer)(Number(h(te).day))).collect()},X={arity:1,overloads:(0,w.declare)(y.RegularOperator.HOURS).onDateTime1(()=>te=>(0,w.integer)(Number(h(te).hours))).collect()},ge={arity:1,overloads:(0,w.declare)(y.RegularOperator.MINUTES).onDateTime1(()=>te=>(0,w.integer)(Number(h(te).minutes))).collect()},Re={arity:1,overloads:(0,w.declare)(y.RegularOperator.SECONDS).onDateTime1(()=>te=>(0,w.decimal)(Number(h(te).seconds))).collect()},je={arity:1,overloads:(0,w.declare)(y.RegularOperator.TIMEZONE).onDateTime1(()=>te=>{const he=S.formatDayTimeDuration(h(te).timezone);if(!he)throw new T.InvalidTimezoneCall(te.strValue);return new d.Literal(he,p.TypeURL.XSD_DAYTIME_DURATION,he)}).collect()},Pe={arity:1,overloads:(0,w.declare)(y.RegularOperator.TZ).onDateTime1(()=>te=>(0,w.string)(h(te).timezone)).collect()},Te={arity:1,overloads:(0,w.declare)(y.RegularOperator.MD5).onString1Typed(()=>te=>(0,w.string)((0,i.hash)(te))).collect()},Qe={arity:1,overloads:(0,w.declare)(y.RegularOperator.SHA1).onString1Typed(()=>te=>(0,w.string)((0,c.sha1)().update(te).digest("hex"))).collect()},Ge={arity:1,overloads:(0,w.declare)(y.RegularOperator.SHA256).onString1Typed(()=>te=>(0,w.string)((0,c.sha256)().update(te).digest("hex"))).collect()},sr={arity:1,overloads:(0,w.declare)(y.RegularOperator.SHA384).onString1Typed(()=>te=>(0,w.string)((0,c.sha384)().update(te).digest("hex"))).collect()},ut={arity:1,overloads:(0,w.declare)(y.RegularOperator.SHA512).onString1Typed(()=>te=>(0,w.string)((0,c.sha512)().update(te).digest("hex"))).collect()};e.definitions={"!":j,uplus:x,uminus:v,"*":O,"/":N,"+":D,"-":G,"=":W,"!=":Q,"<":Z,">":L,"<=":M,">=":V,isiri:H,isuri:H,isblank:J,isliteral:ce,isnumeric:oe,str:le,lang:ue,datatype:be,iri:Ee,uri:Ee,strdt:Ae,strlang:xe,uuid:Oe,struuid:fe,strlen:Se,substr:Ne,ucase:De,lcase:Ie,strstarts:Le,strends:C,contains:$,strbefore:z,strafter:se,encode_for_uri:Y,langmatches:ne,regex:ee,replace:re,abs:ie,round:de,ceil:me,floor:_e,rand:g,now:b,year:E,month:P,day:F,hours:X,minutes:ge,seconds:Re,timezone:je,tz:Pe,md5:Te,sha1:Qe,sha256:Ge,sha384:sr,sha512:ut}},"../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.specialDefinitions=void 0;const a=t("../packages/uuid/dist/index.js"),c=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),o=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),i=t("../node_modules/sparqlee/dist/lib/functions/Helpers.js"),u=t("../node_modules/sparqlee/dist/lib/functions/index.js"),d={arity:1,async applyAsync({args:U,mapping:Q}){return m({args:U,mapping:Q})},applySync({args:U,mapping:Q}){return m({args:U,mapping:Q})}};function m({args:U,mapping:Q}){const Z=U[0];if(Z.expressionType!==c.ExpressionType.Variable)throw new o.InvalidArgumentTypes(U,l.SpecialOperator.BOUND);const L=Q.has((0,i.expressionToVar)(Z));return(0,i.bool)(L)}const y={arity:3,async applyAsync({args:U,mapping:Q,evaluate:Z}){const M=(await Z(U[0],Q)).coerceEBV();return Z(M?U[1]:U[2],Q)},applySync({args:U,mapping:Q,evaluate:Z}){const M=Z(U[0],Q).coerceEBV();return Z(M?U[1]:U[2],Q)}},p={arity:Number.POSITIVE_INFINITY,async applyAsync({args:U,mapping:Q,evaluate:Z}){const L=[];for(const M of U)try{return await Z(M,Q)}catch(V){L.push(V)}throw new o.CoalesceError(L)},applySync({args:U,mapping:Q,evaluate:Z}){const L=[];for(const M of U)try{return Z(M,Q)}catch(V){L.push(V)}throw new o.CoalesceError(L)}},T={arity:2,async applyAsync({args:U,mapping:Q,evaluate:Z}){const[L,M]=U;try{if((await Z(L,Q)).coerceEBV())return(0,i.bool)(!0);const ce=(await Z(M,Q)).coerceEBV();return(0,i.bool)(ce)}catch(V){if(!(await Z(M,Q)).coerceEBV())throw V;return(0,i.bool)(!0)}},applySync({args:U,mapping:Q,evaluate:Z}){const[L,M]=U;try{if(Z(L,Q).coerceEBV())return(0,i.bool)(!0);const ce=Z(M,Q).coerceEBV();return(0,i.bool)(ce)}catch(V){if(!Z(M,Q).coerceEBV())throw V;return(0,i.bool)(!0)}}},_={arity:2,async applyAsync({args:U,mapping:Q,evaluate:Z}){const[L,M]=U;try{if(!(await Z(L,Q)).coerceEBV())return(0,i.bool)(!1);const ce=(await Z(M,Q)).coerceEBV();return(0,i.bool)(ce)}catch(V){if((await Z(M,Q)).coerceEBV())throw V;return(0,i.bool)(!1)}},applySync({args:U,mapping:Q,evaluate:Z}){const[L,M]=U;try{if(!Z(L,Q).coerceEBV())return(0,i.bool)(!1);const ce=Z(M,Q).coerceEBV();return(0,i.bool)(ce)}catch(V){if(Z(M,Q).coerceEBV())throw V;return(0,i.bool)(!1)}}},w={arity:2,async applyAsync({args:U,mapping:Q,evaluate:Z}){const[L,M]=U.map(J=>Z(J,Q)),[V,H]=await Promise.all([L,M]);return(0,i.bool)(V.toRDF().equals(H.toRDF()))},applySync({args:U,mapping:Q,evaluate:Z}){const[L,M]=U.map(V=>Z(V,Q));return(0,i.bool)(L.toRDF().equals(M.toRDF()))}},S={arity:Number.POSITIVE_INFINITY,checkArity(U){return U.length>0},async applyAsync(U){const{args:Q,mapping:Z,evaluate:L}=U,[M,...V]=Q,H=await L(M,Z);return I(H,Object.assign(Object.assign({},U),{args:V}),[])},applySync(U){const{args:Q,mapping:Z,evaluate:L}=U,[M,...V]=Q,H=L(M,Z);return j(H,Object.assign(Object.assign({},U),{args:V}),[])}};async function I(U,Q,Z){const{args:L,mapping:M,evaluate:V}=Q;if(L.length===0)return Z.every(J=>!J)?(0,i.bool)(!1):Promise.reject(new o.InError(Z));try{const H=L.shift(),J=await V(H,M);return u.regularFunctions[l.RegularOperator.EQUAL].apply([U,J],Q).typedValue?(0,i.bool)(!0):I(U,Q,[...Z,!1])}catch(H){return I(U,Q,[...Z,H])}}function j(U,Q,Z){const{args:L,mapping:M,evaluate:V}=Q;if(L.length===0){if(Z.every(J=>!J))return(0,i.bool)(!1);throw new o.InError(Z)}try{const H=L.shift(),J=V(H,M);return u.regularFunctions[l.RegularOperator.EQUAL].apply([U,J],Q).typedValue?(0,i.bool)(!0):j(U,Q,[...Z,!1])}catch(H){return j(U,Q,[...Z,H])}}const x={arity:Number.POSITIVE_INFINITY,checkArity(U){return U.length>0},async applyAsync(U){const Z=await u.specialFunctions[l.SpecialOperator.IN].applyAsync(U);return(0,i.bool)(!Z.typedValue)},applySync(U){const Z=u.specialFunctions[l.SpecialOperator.IN].applySync(U);return(0,i.bool)(!Z.typedValue)}},v=(0,i.declare)(l.SpecialOperator.CONCAT).onStringly1(()=>U=>U).collect(),O={arity:Number.POSITIVE_INFINITY,async applyAsync(U){const{args:Q,mapping:Z,evaluate:L,functionArgumentsCache:M,superTypeProvider:V}=U,H=Q.map(async ue=>L(ue,Z)).map(async ue=>{const be=v.search([await ue],V,M);if(!be)throw new o.InvalidArgumentTypes(Q,l.SpecialOperator.CONCAT);return be(U)([await ue])}),J=await Promise.all(H),oe=J.map(ue=>ue.typedValue).join(""),le=N(J)?J[0].language:void 0;return le?(0,i.langString)(oe,le):(0,i.string)(oe)},applySync(U){const{args:Q,mapping:Z,evaluate:L,superTypeProvider:M,functionArgumentsCache:V}=U,H=Q.map(le=>L(le,Z)).map(le=>{const ue=v.search([le],M,V);if(!ue)throw new o.InvalidArgumentTypes(Q,l.SpecialOperator.CONCAT);return ue(U)([le])}),ce=H.map(le=>le.typedValue).join(""),oe=N(H)?H[0].language:void 0;return oe?(0,i.langString)(ce,oe):(0,i.string)(ce)}};function N(U){return U.length>0&&U.every(Q=>Q.language===U[0].language)}const D=(0,i.declare)(l.SpecialOperator.BNODE).onString1(()=>U=>U).collect(),G={arity:Number.POSITIVE_INFINITY,checkArity(U){return U.length===0||U.length===1},async applyAsync(U){const{args:Q,mapping:Z,evaluate:L,superTypeProvider:M,functionArgumentsCache:V}=U,H=Q.length===1?await L(Q[0],Z):void 0;let J;if(H){const ce=D.search([H],M,V);if(!ce)throw new o.InvalidArgumentTypes(Q,l.SpecialOperator.BNODE);J=ce(U)([H]).str()}if(U.bnode){const ce=await U.bnode(J);return new c.BlankNode(ce)}return W(J)},applySync(U){const{args:Q,mapping:Z,evaluate:L,superTypeProvider:M,functionArgumentsCache:V}=U,H=Q.length===1?L(Q[0],Z):void 0;let J;if(H){const ce=D.search([H],M,V);if(!ce)throw new o.InvalidArgumentTypes(Q,l.SpecialOperator.BNODE);J=ce(U)([H]).str()}if(U.bnode){const ce=U.bnode(J);return new c.BlankNode(ce)}return W(J)}};function W(U){return new c.BlankNode(U||a.v4())}e.specialDefinitions={bound:d,if:y,coalesce:p,"&&":_,"||":T,sameterm:w,in:S,notin:x,concat:O,bnode:G}},"../node_modules/sparqlee/dist/lib/functions/XPathFunctions.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.formatDayTimeDuration=e.langMatches=e.replace=e.matches=void 0;function t(u,d,m){return new RegExp(d,m).test(u)}e.matches=t;function a(u,d,m,y){let p=new RegExp(d,y);if(!p.global){const T=y||"";p=new RegExp(d,`${T}g`)}return u.replace(p,m)}e.replace=a;function c(u,d){const m=u.split("-"),y=d.split("-");if(!o(y[0],m[0])&&!l(m[0]))return!1;let p=1,T=1;for(;T<y.length;){if(l(y[T])){T++;continue}if(p===m.length)return!1;if(o(y[T],m[p])){p++,T++;continue}if(m[p].length===1)return!1;p++}return!0}e.langMatches=c;function l(u){return u==="*"}function o(u,d){return new RegExp(`/${u}/`,"iu").test(`/${d}/`)}function i(u){if(!u)return;let d="",m=0,y=0;if(u!=="Z"&&(d=u.startsWith("-")?"-":"",m=Number.parseInt(u.slice(1,3),10),y=Number.parseInt(u.slice(4,6),10)),m===0&&y===0)return"PT0S";let p=`${d}PT`;return m>0&&(p+=`${m}H`),y>0&&(p+=`${y}M`),p}e.formatDayTimeDuration=i},"../node_modules/sparqlee/dist/lib/functions/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(m,y,p,T){T===void 0&&(T=p);var _=Object.getOwnPropertyDescriptor(y,p);(!_||("get"in _?!y.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return y[p]}}),Object.defineProperty(m,T,_)}:function(m,y,p,T){T===void 0&&(T=p),m[T]=y[p]}),c=this&&this.__exportStar||function(m,y){for(var p in m)p!=="default"&&!Object.prototype.hasOwnProperty.call(y,p)&&a(y,m,p)};Object.defineProperty(e,"__esModule",{value:!0}),e.OverloadTree=e.namedFunctions=e.specialFunctions=e.regularFunctions=void 0;const l=t("../node_modules/sparqlee/dist/lib/functions/Core.js"),o=t("../node_modules/sparqlee/dist/lib/functions/NamedFunctions.js"),i=t("../node_modules/sparqlee/dist/lib/functions/RegularFunctions.js"),u=t("../node_modules/sparqlee/dist/lib/functions/SpecialFunctions.js");c(t("../node_modules/sparqlee/dist/lib/functions/Core.js"),e),e.regularFunctions=Object.fromEntries(Object.entries(i.definitions).map(([m,y])=>[m,new l.RegularFunction(m,y)])),e.specialFunctions=Object.fromEntries(Object.entries(u.specialDefinitions).map(([m,y])=>[m,new l.SpecialFunction(m,y)])),e.namedFunctions=Object.fromEntries(Object.entries(o.namedDefinitions).map(([m,y])=>[m,new l.NamedFunction(m,y)]));var d=t("../node_modules/sparqlee/dist/lib/functions/OverloadTree.js");Object.defineProperty(e,"OverloadTree",{enumerable:!0,get:function(){return d.OverloadTree}})},"../node_modules/sparqlee/dist/lib/transformers/AlgebraTransformer.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AlgebraTransformer=void 0;const a=t("sparqlalgebrajs"),c=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),l=t("../node_modules/sparqlee/dist/lib/functions/index.js"),o=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),i=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),d=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js");class m extends d.TermTransformer{constructor(p){super(p.superTypeProvider),this.algebraConfig=p,this.creatorConfig={type:p.type,creator:p.creator}}transformAlgebra(p){const T=a.Algebra.expressionTypes;switch(p.expressionType){case T.TERM:return this.transformTerm(p);case T.OPERATOR:return this.transformOperator(p);case T.NAMED:return this.transformNamed(p);case T.EXISTENCE:return m.transformExistence(p);case T.AGGREGATE:return m.transformAggregate(p);case T.WILDCARD:return m.transformWildcard(p)}}static transformWildcard(p){return new c.NamedNode(p.wildcard.value)}transformOperator(p){const T=p.operator.toLowerCase();if(o.SpecialOperators.has(T)){const I=T,j=p.args.map(v=>this.transformAlgebra(v)),x=l.specialFunctions[I];if(!x.checkArity(j))throw new i.InvalidArity(j,I);return new c.SpecialOperator(j,x.applyAsync,x.applySync)}if(!o.Operators.has(T))throw new i.UnknownOperator(p.operator);const _=T,w=p.args.map(I=>this.transformAlgebra(I)),S=l.regularFunctions[_];if(!m.hasCorrectArity(w,S.arity))throw new i.InvalidArity(w,_);return new c.Operator(w,I=>S.apply(I,this.algebraConfig))}wrapSyncFunction(p,T){return _=>{try{const w=p(_.map(S=>S.toRDF()));return this.transformRDFTermUnsafe(w)}catch(w){throw new u.ExtensionFunctionError(T,w)}}}wrapAsyncFunction(p,T){return async _=>{try{const w=await p(_.map(S=>S.toRDF()));return this.transformRDFTermUnsafe(w)}catch(w){throw new u.ExtensionFunctionError(T,w)}}}transformNamed(p){const T=p.name.value,_=p.args.map(w=>this.transformAlgebra(w));if(o.NamedOperators.has(T)){const w=p.name.value,S=l.namedFunctions[w];return new c.Named(p.name,_,I=>S.apply(I,this.algebraConfig))}if(this.creatorConfig.type==="sync"){const w=this.creatorConfig.creator(p.name);if(w){const S=this.wrapSyncFunction(w,p.name.value);return new c.SyncExtension(p.name,_,S)}}else{const w=this.creatorConfig.creator(p.name);if(w){const S=this.wrapAsyncFunction(w,p.name.value);return new c.AsyncExtension(p.name,_,S)}}throw new i.UnknownNamedOperator(p.name.value)}static hasCorrectArity(p,T){return Array.isArray(T)?T.includes(p.length):p.length===T}static transformAggregate(p){const T=p.aggregator;return new c.Aggregate(T,p)}static transformExistence(p){return new c.Existence(p)}}e.AlgebraTransformer=m},"../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TermTransformer=void 0;const a=t("../node_modules/rdf-string/index.js"),c=t("sparqlalgebrajs"),l=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),o=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),i=t("../node_modules/sparqlee/dist/lib/util/Errors.js"),u=t("../node_modules/sparqlee/dist/lib/util/Parsing.js"),d=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");class m{constructor(p){this.superTypeProvider=p}transformRDFTermUnsafe(p){return this.transformTerm({term:p,type:c.Algebra.types.EXPRESSION,expressionType:c.Algebra.expressionTypes.TERM})}transformTerm(p){if(!p.term)throw new i.InvalidExpression(p);switch(p.term.termType){case"Variable":return new l.Variable(a.termToString(p.term));case"Literal":return this.transformLiteral(p.term);case"NamedNode":return new l.NamedNode(p.term.value);case"BlankNode":return new l.BlankNode(p.term.value);default:throw new i.InvalidTermType(p)}}transformLiteral(p){if(!p.datatype||[null,void 0,""].includes(p.datatype.value))return p.language?new l.LangStringLiteral(p.value,p.language):new l.StringLiteral(p.value);const T=p.datatype.value,_=(0,d.getSuperTypeDict)(T,this.superTypeProvider);if(o.TypeURL.XSD_STRING in _)return new l.StringLiteral(p.value,T);if(o.TypeURL.RDF_LANG_STRING in _)return new l.LangStringLiteral(p.value,p.language);if(o.TypeURL.XSD_DATE_TIME in _){const I=new Date(p.value);return Number.isNaN(I.getTime())?new l.NonLexicalLiteral(void 0,T,this.superTypeProvider,p.value):new l.DateTimeLiteral(new Date(p.value),p.value,T)}if(o.TypeURL.XSD_BOOLEAN in _)return p.value!=="true"&&p.value!=="false"&&p.value!=="1"&&p.value!=="0"?new l.NonLexicalLiteral(void 0,T,this.superTypeProvider,p.value):new l.BooleanLiteral(p.value==="true"||p.value==="1",p.value);if(o.TypeURL.XSD_DECIMAL in _){const I=u.parseXSDDecimal(p.value);return I===void 0?new l.NonLexicalLiteral(void 0,T,this.superTypeProvider,p.value):o.TypeURL.XSD_INTEGER in _?new l.IntegerLiteral(I,T,p.value):new l.DecimalLiteral(I,T,p.value)}const w=o.TypeURL.XSD_FLOAT in _,S=o.TypeURL.XSD_DOUBLE in _;if(w||S){const I=u.parseXSDFloat(p.value);return I===void 0?new l.NonLexicalLiteral(void 0,T,this.superTypeProvider,p.value):w?new l.FloatLiteral(I,T,p.value):new l.DoubleLiteral(I,T,p.value)}return new l.Literal(p.value,T,p.value)}}e.TermTransformer=m},"../node_modules/sparqlee/dist/lib/util/Consts.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamedOperators=e.SetFunctions=e.SetFunction=e.Operators=e.SpecialOperators=e.RegularOperators=e.SpecialOperator=e.RegularOperator=e.TypeURL=e.TypeAlias=void 0,function(o){o.SPARQL_NUMERIC="SPARQL_NUMERIC",o.SPARQL_STRINGLY="SPARQL_STRINGLY",o.SPARQL_NON_LEXICAL="SPARQL_NON_LEXICAL"}(e.TypeAlias||(e.TypeAlias={}));var t;(function(o){o.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",o.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",o.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",o.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",o.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",o.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",o.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",o.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",o.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",o.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",o.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",o.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",o.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",o.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",o.XSD_INT="http://www.w3.org/2001/XMLSchema#int",o.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",o.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",o.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",o.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",o.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",o.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",o.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",o.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",o.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",o.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",o.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",o.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",o.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",o.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",o.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",o.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",o.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",o.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",o.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",o.XSD_DAYTIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(t=e.TypeURL||(e.TypeURL={}));var a;(function(o){o.NOT="!",o.UMINUS="uminus",o.UPLUS="uplus",o.EQUAL="=",o.NOT_EQUAL="!=",o.LT="<",o.GT=">",o.LTE="<=",o.GTE=">=",o.MULTIPLICATION="*",o.DIVISION="/",o.ADDITION="+",o.SUBTRACTION="-",o.IS_IRI="isiri",o.IS_URI="isuri",o.IS_BLANK="isblank",o.IS_LITERAL="isliteral",o.IS_NUMERIC="isnumeric",o.STR="str",o.LANG="lang",o.DATATYPE="datatype",o.IRI="iri",o.URI="uri",o.STRDT="strdt",o.STRLANG="strlang",o.UUID="uuid",o.STRUUID="struuid",o.STRLEN="strlen",o.SUBSTR="substr",o.UCASE="ucase",o.LCASE="lcase",o.STRSTARTS="strstarts",o.STRENDS="strends",o.CONTAINS="contains",o.STRBEFORE="strbefore",o.STRAFTER="strafter",o.ENCODE_FOR_URI="encode_for_uri",o.LANG_MATCHES="langmatches",o.REGEX="regex",o.REPLACE="replace",o.ABS="abs",o.ROUND="round",o.CEIL="ceil",o.FLOOR="floor",o.RAND="rand",o.NOW="now",o.YEAR="year",o.MONTH="month",o.DAY="day",o.HOURS="hours",o.MINUTES="minutes",o.SECONDS="seconds",o.TIMEZONE="timezone",o.TZ="tz",o.MD5="md5",o.SHA1="sha1",o.SHA256="sha256",o.SHA384="sha384",o.SHA512="sha512"})(a=e.RegularOperator||(e.RegularOperator={}));var c;(function(o){o.BOUND="bound",o.IF="if",o.COALESCE="coalesce",o.LOGICAL_OR="||",o.LOGICAL_AND="&&",o.SAME_TERM="sameterm",o.IN="in",o.NOT_IN="notin",o.CONCAT="concat",o.BNODE="bnode"})(c=e.SpecialOperator||(e.SpecialOperator={})),e.RegularOperators=new Set(Object.values(a)),e.SpecialOperators=new Set(Object.values(c)),e.Operators=new Set([...e.RegularOperators,...e.SpecialOperators]);var l;(function(o){o.COUNT="count",o.SUM="sum",o.MIN="min",o.MAX="max",o.AVG="avg",o.GROUP_CONCAT="group_concat",o.SAMPLE="sample"})(l=e.SetFunction||(e.SetFunction={})),e.SetFunctions=new Set(Object.values(l)),e.NamedOperators=new Set([t.XSD_STRING,t.XSD_FLOAT,t.XSD_DOUBLE,t.XSD_DECIMAL,t.XSD_INTEGER,t.XSD_DATE_TIME,t.XSD_DATE,t.XSD_BOOLEAN])},"../node_modules/sparqlee/dist/lib/util/Errors.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NoExistenceHook=e.NoAggregator=e.ExtensionFunctionError=e.UnknownNamedOperator=e.UnknownOperator=e.InvalidTermType=e.InvalidExpressionType=e.InvalidExpression=e.InvalidArity=e.UnexpectedError=e.EmptyAggregateError=e.IncompatibleLanguageOperation=e.InvalidTimezoneCall=e.CastError=e.InvalidArgumentTypes=e.InError=e.CoalesceError=e.RDFEqualTypeError=e.EBVCoercionError=e.UnboundVariableError=e.InvalidLexicalForm=e.isExpressionError=e.ExpressionError=void 0;class t extends Error{}e.ExpressionError=t;function a(U){return U instanceof t}e.isExpressionError=a;class c extends t{constructor(Q){super(`Invalid lexical form '${W(Q)}'`),this.arg=Q}}e.InvalidLexicalForm=c;class l extends t{constructor(Q,Z){super(`Unbound variable '${W(Q)}'`),this.variable=Q,this.bindings=Z}}e.UnboundVariableError=l;class o extends t{constructor(Q){super(`Cannot coerce term to EBV '${W(Q)}'`),this.arg=Q}}e.EBVCoercionError=o;class i extends t{constructor(Q){super("Equality test for literals with unsupported datatypes"),this.args=Q}}e.RDFEqualTypeError=i;class u extends t{constructor(Q){super("All COALESCE arguments threw errors"),this.errors=Q}}e.CoalesceError=u;class d extends t{constructor(Q){super(`Some argument to IN errorred and none where equal. ${Q.map(Z=>`(${Z.toString()}) `).join("and ")}`),this.errors=Q}}e.InError=d;class m extends t{constructor(Q,Z){super(`Argument types not valid for operator: '${W(Z)}' with '${W(Q)}`),this.args=Q,this.op=Z}}e.InvalidArgumentTypes=m;class y extends t{constructor(Q,Z){super(`Invalid cast: '${W(Q)}' to '${W(Z)}'`),this.arg=Q}}e.CastError=y;class p extends t{constructor(Q){super(`TIMEZONE call on ${Q} which has no timezone`),this.dateString=Q}}e.InvalidTimezoneCall=p;class T extends t{constructor(Q,Z){super(`Operation on incompatible language literals '${W(Q)}' and '${W(Z)}'`),this.arg1=Q,this.arg2=Z}}e.IncompatibleLanguageOperation=T;class _ extends t{constructor(){super("Empty aggregate expression")}}e.EmptyAggregateError=_;class w extends Error{constructor(Q,Z){super(`Programmer Error '${Q}'`),this.payload=Z}}e.UnexpectedError=w;class S extends Error{constructor(Q,Z){super(`The number of args does not match the arity of the operator '${W(Z)}'.`),this.args=Q,this.op=Z}}e.InvalidArity=S;class I extends Error{constructor(Q){super(`Invalid SPARQL Expression '${W(Q)}'`)}}e.InvalidExpression=I;class j extends Error{constructor(Q){super(`Invalid expression type for SPARQL Expression '${W(Q)}'`),this.expr=Q}}e.InvalidExpressionType=j;class x extends Error{constructor(Q){super(`Invalid term type for term '${W(Q)}'`),this.term=Q}}e.InvalidTermType=x;class v extends Error{constructor(Q){super(`Unknown operator: '${W(Q)}`)}}e.UnknownOperator=v;class O extends Error{constructor(Q){super(`Unknown named operator: '${W(Q)}'`)}}e.UnknownNamedOperator=O;class N extends Error{constructor(Q,Z){Z instanceof Error?super(`Error thrown in ${Q}: ${Z.message}${Z.stack?`
${Z.stack}`:""}`):super(`Error thrown in ${Q}`)}}e.ExtensionFunctionError=N;class D extends Error{constructor(Q){super(`Aggregate expression ${W(Q)} found, but no aggregate hook provided.`)}}e.NoAggregator=D;class G extends Error{constructor(){super("EXISTS found, but no existence hook provided.")}}e.NoExistenceHook=G;function W(U){return JSON.stringify(U)}},"../node_modules/sparqlee/dist/lib/util/Ordering.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.orderTypes=void 0;const a=t("../node_modules/lru-cache/index.js"),c=t("../node_modules/sparqlee/dist/lib/transformers/TermTransformer.js"),l=t("../node_modules/sparqlee/dist/lib/util/Consts.js"),o=t("../node_modules/sparqlee/dist/lib/util/TypeHandling.js");function i(y,p,T,_,w,S){return y===p?0:y===void 0?T?-1:1:p===void 0?T?1:-1:y.equals(p)?0:u(y,p,_,w)===T?-1:1}e.orderTypes=i;function u(y,p,T,_,w){return y.termType!==p.termType?m[y.termType]<m[p.termType]:y.termType==="Literal"?d(y,p,T,_):y.value<p.value}function d(y,p,T,_){const w={discoverer:T||(()=>"term"),cache:_||new a},S=new c.TermTransformer(w),I=S.transformLiteral(y),j=S.transformLiteral(p),x=I.dataType,v=j.dataType,O=(0,o.getSuperTypeDict)(x,w),N=(0,o.getSuperTypeDict)(v,w);return l.TypeURL.XSD_BOOLEAN in O&&l.TypeURL.XSD_BOOLEAN in N||l.TypeURL.XSD_DATE_TIME in O&&l.TypeURL.XSD_DATE_TIME in N||l.TypeAlias.SPARQL_NUMERIC in O&&l.TypeAlias.SPARQL_NUMERIC in N||l.TypeURL.XSD_STRING in O&&l.TypeURL.XSD_STRING in N?I.typedValue<j.typedValue:l.TypeURL.RDF_LANG_STRING in O&&l.TypeURL.RDF_LANG_STRING in N?I.typedValue<j.typedValue||I.typedValue===j.typedValue&&I.language<j.language:x<v||I.dataType===j.dataType&&I.str()<j.str()}const m={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}},"../node_modules/sparqlee/dist/lib/util/Parsing.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.parseXSDDateTime=e.parseXSDInteger=e.parseXSDDecimal=e.parseXSDFloat=void 0;function t(o){const i=Number(o);return Number.isNaN(i)?o==="NaN"?Number.NaN:o==="INF"||o==="+INF"?Number.POSITIVE_INFINITY:o==="-INF"?Number.NEGATIVE_INFINITY:void 0:i}e.parseXSDFloat=t;function a(o){const i=Number(o);return Number.isNaN(i)?void 0:i}e.parseXSDDecimal=a;function c(o){const i=Number.parseInt(o,10);return Number.isNaN(i)?void 0:i}e.parseXSDInteger=c;function l(o){const i=o.indexOf("T"),u=i>=0?o.slice(0,Math.max(0,i)):o,[d,m,y]=u.split("-");let p="00",T="00",_="00",w="";if(i>=0){const S=o.slice(i+1),[I,j]=S.split(/[+Z-]/u);[p,T,_]=I.split(":");const x=/([+Z-].*)/u.exec(S);w=x?x[0]:""}return{year:d,month:m,day:y,hours:p,minutes:T,seconds:_,timezone:w}}e.parseXSDDateTime=l},"../node_modules/sparqlee/dist/lib/util/TypeHandling.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isSubTypeOf=e.getSuperTypeDict=e.isInternalSubType=e.asGeneralType=e.asOverrideType=e.asKnownLiteralType=e.asTypeAlias=e.typeAliasCheck=e.extensionTableInit=e.getSuperTypes=e.superTypeDictTable=e.extensionTableInput=void 0;const a=t("../node_modules/sparqlee/dist/lib/expressions/index.js"),c=t("../node_modules/sparqlee/dist/lib/util/Consts.js");e.extensionTableInput={[c.TypeURL.XSD_DATE_TIME_STAMP]:c.TypeURL.XSD_DATE_TIME,[c.TypeURL.XSD_DAYTIME_DURATION]:c.TypeURL.XSD_DURATION,[c.TypeURL.XSD_YEAR_MONTH_DURATION]:c.TypeURL.XSD_DURATION,[c.TypeURL.RDF_LANG_STRING]:c.TypeAlias.SPARQL_STRINGLY,[c.TypeURL.XSD_STRING]:c.TypeAlias.SPARQL_STRINGLY,[c.TypeURL.XSD_NORMALIZED_STRING]:c.TypeURL.XSD_STRING,[c.TypeURL.XSD_TOKEN]:c.TypeURL.XSD_NORMALIZED_STRING,[c.TypeURL.XSD_LANGUAGE]:c.TypeURL.XSD_TOKEN,[c.TypeURL.XSD_NM_TOKEN]:c.TypeURL.XSD_TOKEN,[c.TypeURL.XSD_NAME]:c.TypeURL.XSD_TOKEN,[c.TypeURL.XSD_NC_NAME]:c.TypeURL.XSD_NAME,[c.TypeURL.XSD_ENTITY]:c.TypeURL.XSD_NC_NAME,[c.TypeURL.XSD_ID]:c.TypeURL.XSD_NC_NAME,[c.TypeURL.XSD_ID_REF]:c.TypeURL.XSD_NC_NAME,[c.TypeURL.XSD_DOUBLE]:c.TypeAlias.SPARQL_NUMERIC,[c.TypeURL.XSD_FLOAT]:c.TypeAlias.SPARQL_NUMERIC,[c.TypeURL.XSD_DECIMAL]:c.TypeAlias.SPARQL_NUMERIC,[c.TypeURL.XSD_INTEGER]:c.TypeURL.XSD_DECIMAL,[c.TypeURL.XSD_NON_POSITIVE_INTEGER]:c.TypeURL.XSD_INTEGER,[c.TypeURL.XSD_NEGATIVE_INTEGER]:c.TypeURL.XSD_NON_POSITIVE_INTEGER,[c.TypeURL.XSD_LONG]:c.TypeURL.XSD_INTEGER,[c.TypeURL.XSD_INT]:c.TypeURL.XSD_LONG,[c.TypeURL.XSD_SHORT]:c.TypeURL.XSD_INT,[c.TypeURL.XSD_BYTE]:c.TypeURL.XSD_SHORT,[c.TypeURL.XSD_NON_NEGATIVE_INTEGER]:c.TypeURL.XSD_INTEGER,[c.TypeURL.XSD_POSITIVE_INTEGER]:c.TypeURL.XSD_NON_NEGATIVE_INTEGER,[c.TypeURL.XSD_UNSIGNED_LONG]:c.TypeURL.XSD_NON_NEGATIVE_INTEGER,[c.TypeURL.XSD_UNSIGNED_INT]:c.TypeURL.XSD_UNSIGNED_LONG,[c.TypeURL.XSD_UNSIGNED_SHORT]:c.TypeURL.XSD_UNSIGNED_INT,[c.TypeURL.XSD_UNSIGNED_BYTE]:c.TypeURL.XSD_UNSIGNED_SHORT,[c.TypeURL.XSD_DATE_TIME]:"term",[c.TypeURL.XSD_BOOLEAN]:"term",[c.TypeURL.XSD_DATE]:"term",[c.TypeURL.XSD_DURATION]:"term",[c.TypeAlias.SPARQL_NUMERIC]:"term",[c.TypeAlias.SPARQL_STRINGLY]:"term",[c.TypeAlias.SPARQL_NON_LEXICAL]:"term",[c.TypeURL.XSD_ANY_URI]:"term"};function l(S,I){const j=I.cache.get(S);if(j)return j;const x=I.discoverer(S);if(x==="term"){const N=Object.create(null);return N.__depth=0,N[S]=0,I.cache.set(S,N),N}let v;const O=m(x);return O?v=Object.assign({},e.superTypeDictTable[O]):v=Object.assign({},l(x,I)),v.__depth++,v[S]=v.__depth,I.cache.set(S,v),v}e.getSuperTypes=l;function o(){const S=Object.create(null);for(const[I,j]of Object.entries(e.extensionTableInput)){const x=I;S[x]||i(x,j,S)}e.superTypeDictTable=S}e.extensionTableInit=o,o();function i(S,I,j){if(I==="term"||I===void 0){const x=Object.create(null);x.__depth=0,x[S]=0,j[S]=x;return}j[I]||i(I,e.extensionTableInput[I],j),j[S]=Object.assign(Object.assign({},j[I]),{[S]:j[I].__depth+1,__depth:j[I].__depth+1})}function u(){e.typeAliasCheck=Object.create(null);for(const S of Object.values(c.TypeAlias))e.typeAliasCheck[S]=!0}u();function d(S){if(S in e.typeAliasCheck)return S}e.asTypeAlias=d;function m(S){if(S in e.superTypeDictTable)return S}e.asKnownLiteralType=m;function y(S){if(m(S)||S==="term")return S}e.asOverrideType=y;function p(S){if(S==="term"||(0,a.asTermType)(S))return S}e.asGeneralType=p;function T(S,I){return S!=="term"&&e.superTypeDictTable[S]&&e.superTypeDictTable[S][I]!==void 0}e.isInternalSubType=T;function _(S,I){const j=m(S);return j?e.superTypeDictTable[j]:l(S,I)}e.getSuperTypeDict=_;function w(S,I,j){return S==="term"?!1:_(S,j)[I]!==void 0}e.isSubTypeOf=w},"../node_modules/stream-to-string/index.js":(n,e,t)=>{var a=t("./require-empty.js");n.exports=function(c,l,o){typeof l=="function"&&(o=l,l=null),o=o||function(){};var i="";return new a(function(u,d){c.on("data",function(m){i+=typeof l=="string"?m.toString(l):m.toString()}),c.on("end",function(){u(i),o(null,i)}),c.on("error",function(m){d(m),o(m)})})}},"../node_modules/typed-immutable-map/dist/HashMap/empty.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=void 0;const c={node:t("../node_modules/typed-immutable-map/dist/nodes/index.js").EMPTY,size:0};function l(){return c}e.empty=l},"../node_modules/typed-immutable-map/dist/HashMap/entries.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.entries=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function c(o){return(0,a.iterator)((0,a.getNode)(o),l)}e.entries=c;function l(o){return[o.key,o.value]}},"../node_modules/typed-immutable-map/dist/HashMap/filter.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.filter=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),o=function(u,d){return(0,c.reduce)(function(m,y,p){return u(y,p)?(0,l.set)(p,y,m):m},(0,a.empty)(),d)};e.filter=o},"../node_modules/typed-immutable-map/dist/HashMap/forEach.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),c=function(o,i){return(0,a.reduce)((u,d,m)=>o(d,m),null,i),i};e.forEach=c},"../node_modules/typed-immutable-map/dist/HashMap/from.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fromObject=e.fromIterable=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/set.js");function l(i){let u=(0,a.empty)();for(const[d,m]of i)u=(0,c.set)(d,m,u);return u}e.fromIterable=l;function o(i){let u=(0,a.empty)();for(let d in i)i.hasOwnProperty(d)&&(u=(0,c.set)(d,i[d],u));return u}e.fromObject=o},"../node_modules/typed-immutable-map/dist/HashMap/get.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.get=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function c(l,o,i){const u=(0,a.findHash)(l);return(0,a.getHash)(void 0,u,l,o,i)}e.get=c},"../node_modules/typed-immutable-map/dist/HashMap/has.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.has=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),c=t("../node_modules/typed-immutable-map/dist/nodes/index.js");function l(o,i,u){const d=(0,a.findHash)(o);return(0,a.getHash)(c.NOTHING,d,o,i,u)!==c.NOTHING}e.has=l},"../node_modules/typed-immutable-map/dist/HashMap/keys.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.keys=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function c(o){return(0,a.iterator)((0,a.getNode)(o),l)}e.keys=c;function l(o){return o.key}},"../node_modules/typed-immutable-map/dist/HashMap/map.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.map=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/reduce.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),o=function(u,d){return(0,c.reduce)(function(m,y,p){return(0,l.set)(p,u(y,p),m)},(0,a.empty)(),d)};e.map=o},"../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.findHash=void 0;const a=t("../node_modules/typed-immutable-map/dist/common/index.js");function c(l){return typeof l=="number"?l:typeof l=="string"?(0,a.stringHash)(l):Math.abs((0,a.stringHash)(JSON.stringify(l)))}e.findHash=c},"../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.fold=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function c(l,o,i){const u=(0,a.getNode)(i);if(u.type===0)return o;if(u.type===1)return l(o,u.value,u.key);const d=[u.children];let m;for(;m=d.shift();)for(let y=0;y<m.length;++y){const p=m[y];p&&p.type!==0&&(p.type===1?o=l(o,p.value,p.key):d.push(p.children))}return o}e.fold=c},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getHash=void 0;const a=t("../node_modules/typed-immutable-map/dist/common/index.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js");function o(i,u,d,m,y=l.defaultKeyEquals){let p=(0,c.getNode)(m),T=0;for(;;)switch(p.type){case 1:return y(d,p.key)?p.value:i;case 2:if(u===p.hash){const _=p.children;for(let w=0;w<_.length;++w){const S=_[w];if(y(d,S.key))return S.value}return i}case 3:{const _=(0,a.hashFragment)(T,u),w=(0,a.toBitmap)(_);if(p.mask&w){const S=(0,a.bitmapToIndex)(p.mask,w);p=p.children[S],T+=a.SIZE;break}return i}case 4:{if(p=p.children[(0,a.hashFragment)(T,u)],p){T+=a.SIZE;break}return i}default:return i}}e.getHash=o},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getNode=void 0;function t(a){return a.node}e.getNode=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSize=void 0;function t(a){return a.size}e.getSize=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getHash.js"),e),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),e),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),e),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js"),e),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),e),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js"),e),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/fold.js"),e),c(t("../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js"),e)},"../node_modules/typed-immutable-map/dist/HashMap/primitives/iterateMap.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.iterator=void 0;function t(u,d){return new a(l(u,d,[]))}e.iterator=t;class a{_iterate;constructor(d){this._iterate=d}next(){if(!this._iterate)return{done:!0,value:null};const{value:d,rest:m}=this._iterate;return this._iterate=c(m),{done:!1,value:d}}[Symbol.iterator](){return this}}const c=u=>u&&o(u[0],u[1],u[2],u[3],u[4]);function l(u,d,m){switch(u.type){case 1:return{value:d(u),rest:m};case 2:case 4:case 3:const y=u.children;return o(y.length,y,0,d,m);default:return c(m)}}function o(u,d,m,y,p){for(;m<u;){const T=d[m++];if(T&&i(T))return l(T,y,[u,d,m,y,p])}return c(p)}function i(u){return u&&u.type!==0}},"../node_modules/typed-immutable-map/dist/HashMap/primitives/keyEquals.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.defaultKeyEquals=void 0;const t=(a,c)=>a===c;e.defaultKeyEquals=t},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setKeyValue.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setKeyValue=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/index.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/findHash.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js"),o=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js"),i=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js"),u=m=>()=>m;function d(m,y,p){const T=(0,c.findHash)(m),_={value:(0,o.getSize)(p)},w=(0,a.modify)((0,l.getNode)(p),0,u(y),T,m,_);return(0,i.setTree)(w,_.value,p)}e.setKeyValue=d},"../node_modules/typed-immutable-map/dist/HashMap/primitives/setTree.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.setTree=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getNode.js");function c(l,o,i){return l===(0,a.getNode)(i)?i:{node:l,size:o}}e.setTree=c},"../node_modules/typed-immutable-map/dist/HashMap/reduce.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.reduce=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.reduce=a.fold},"../node_modules/typed-immutable-map/dist/HashMap/remove.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.remove=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js"),c=t("../node_modules/typed-immutable-map/dist/nodes/constants.js");function l(o,i){return(0,a.setKeyValue)(o,c.NOTHING,i)}e.remove=l},"../node_modules/typed-immutable-map/dist/HashMap/set.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.set=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");e.set=a.setKeyValue},"../node_modules/typed-immutable-map/dist/HashMap/size.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.size=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/getSize.js");function c(l){return(0,a.getSize)(l)}e.size=c},"../node_modules/typed-immutable-map/dist/HashMap/values.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.values=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/primitives/index.js");function c(o){return(0,a.iterator)((0,a.getNode)(o),l)}e.values=c;function l(o){return o.value}},"../node_modules/typed-immutable-map/dist/common/array-operations.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.insert=e.remove=e.replace=void 0;function t(l,o,i){const u=i.length,d=Array(u);for(let m=0;m<u;++m)d[m]=i[m];return d[l]=o,d}e.replace=t;function a(l,o){const i=o.length;if(i===0||l>=i)return o;if(i===1)return[];const u=Array(i-1);let d=0;for(;d<l;++d)u[d]=o[d];for(d=d+1;d<i;++d)u[d-1]=o[d];return u}e.remove=a;function c(l,o,i){const u=i.length,d=Array(u+1);let m=0;for(;m<l;++m)d[m]=i[m];for(d[m++]=o;m<u+1;++m)d[m]=i[m-1];return d}e.insert=c},"../node_modules/typed-immutable-map/dist/common/bitwise-operations.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bitmapToIndex=e.toBitmap=e.hashFragment=e.hammingWeight=void 0;const a=t("../node_modules/typed-immutable-map/dist/common/constants.js");function c(u){return u=u-(u>>1&1431655765),u=(u&858993459)+(u>>2&858993459),(u+(u>>4)&252645135)*16843009>>24}e.hammingWeight=c;function l(u,d){return d>>>u&a.MASK}e.hashFragment=l;function o(u){return 1<<u}e.toBitmap=o;function i(u,d){return c(u&d-1)}e.bitmapToIndex=i},"../node_modules/typed-immutable-map/dist/common/constants.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MIN_ARRAY_NODE=e.MAX_INDEX_NODE=e.MASK=e.BUCKET_SIZE=e.SIZE=void 0,e.SIZE=5,e.BUCKET_SIZE=Math.pow(2,e.SIZE),e.MASK=e.BUCKET_SIZE-1,e.MAX_INDEX_NODE=e.BUCKET_SIZE/2,e.MIN_ARRAY_NODE=e.BUCKET_SIZE/4},"../node_modules/typed-immutable-map/dist/common/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/typed-immutable-map/dist/common/array-operations.js"),e),c(t("../node_modules/typed-immutable-map/dist/common/bitwise-operations.js"),e),c(t("../node_modules/typed-immutable-map/dist/common/constants.js"),e),c(t("../node_modules/typed-immutable-map/dist/common/stringHash.js"),e)},"../node_modules/typed-immutable-map/dist/common/stringHash.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.stringHash=void 0;function t(a){let c=0;for(let l=0;l<a.length;++l)c=(c<<5)-c+a.charCodeAt(l)|0;return c}e.stringHash=t},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyListNode=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),c=t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),l=t("../node_modules/typed-immutable-map/dist/common/index.js"),o=t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js");function i(d,m,y,p,T,_){const{size:w,children:S}=d,I=(0,l.hashFragment)(m,p),j=S[I],x=(0,c.modify)(j||(0,a.empty)(),m+l.SIZE,y,p,T,_);return j===x?d:u(j)&&!u(x)?{type:4,size:w+1,children:(0,l.replace)(I,x,S)}:!u(j)&&u(x)?w-1<=l.MIN_ARRAY_NODE?(0,o.toIndexNode)(w,I,S):{type:4,size:w-1,children:(0,l.replace)(I,(0,a.empty)(),S)}:{type:4,size:w,children:(0,l.replace)(I,x,S)}}e.modifyListNode=i;function u(d){return d&&d.type===0}},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/ArrayNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/ArrayNode/toIndexNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toIndexNode=void 0;function t(a,c,l){const o=new Array(a-1);let i=0,u=0;for(let d=0;d<l.length;++d)if(d!==c){const m=l[d];m&&m.type>0&&(o[i++]=m,u|=1<<d)}return{type:3,mask:u,children:o}}e.toIndexNode=t},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyCollisionNode=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),c=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js");function o(i,u,d,m,y,p){if(m===i.hash){const _=(0,l.newCollisionList)(i.hash,i.children,d,y,p);return _===i.children?i:_.length>1?{type:2,hash:i.hash,children:_}:_[0]}const T=d();return T===a.NOTHING?i:(++p.value,(0,c.combineLeafNodes)(u,i.hash,i,m,{type:1,hash:m,key:y,value:T}))}e.modifyCollisionNode=o},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/CollisionNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/CollisionNode/newCollisionList.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.newCollisionList=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),c=t("../node_modules/typed-immutable-map/dist/common/index.js");function l(o,i,u,d,m){const y=i.length;for(let T=0;T<y;++T){const _=i[T];if(_.key===d){const w=_.value,S=u(w);return S===w?i:S===a.NOTHING?(--m.value,(0,c.remove)(T,i)):(0,c.insert)(T,{type:1,hash:o,key:d,value:S},i)}}const p=u();return p===a.NOTHING?i:(++m.value,(0,c.insert)(y,{type:1,hash:o,key:d,value:p},i))}e.newCollisionList=l},"../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.empty=e.EMPTY=e.modifyEmpty=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/constants.js");function c(o,i,u,d,m,y){const p=u(void 0);return p===a.NOTHING?o:(++y.value,{type:1,hash:d,key:m,value:p})}e.modifyEmpty=c,e.EMPTY={type:0};function l(){return e.EMPTY}e.empty=l},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyIndexedNode=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),c=t("../node_modules/typed-immutable-map/dist/common/index.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),o=t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js");function i(d,m,y,p,T,_){const{mask:w,children:S}=d,I=(0,c.hashFragment)(m,p),j=(0,c.toBitmap)(I),x=(0,c.bitmapToIndex)(w,j),v=!!(w&j),O=v?S[x]:(0,a.empty)(),N=(0,l.modify)(O,m+c.SIZE,y,p,T,_);if(O===N)return d;if(v&&N.type===0){const D=w&~j;return D?S.length<=2&&u(S[x^1])?S[x^1]:{type:3,mask:D,children:(0,c.remove)(x,S)}:(0,a.empty)()}return!v&&N.type!==0?S.length>=c.MAX_INDEX_NODE?(0,o.toArrayNode)(I,N,w,S):{type:3,mask:w|j,children:(0,c.insert)(x,N,S)}:{type:3,mask:w,children:(0,c.replace)(x,N,S)}}e.modifyIndexedNode=i;function u(d){const m=d.type;return m===0||m===1||m===2}},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/IndexedNode.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/IndexedNode/toArrayNode.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toArrayNode=void 0;function t(a,c,l,o){const i=[];let u=l,d=0;for(let m=0;u;++m)u&1&&(i[m]=o[d++]),u>>>=1;return i[a]=c,{type:4,size:d+1,children:i}}e.toArrayNode=t},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modifyLeaf=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),c=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js");function o(i,u,d,m,y,p){if(y===i.key){const _=d(i.value);return _===i.value?i:_===a.NOTHING?(--p.value,(0,c.empty)()):{type:1,hash:m,key:y,value:_}}const T=d();return T===a.NOTHING?i:(++p.value,(0,l.combineLeafNodes)(u,i.hash,i,m,{type:1,hash:m,key:y,value:T}))}e.modifyLeaf=o},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.combineLeafNodes=void 0;const a=t("../node_modules/typed-immutable-map/dist/common/index.js");function c(l,o,i,u,d){if(o===u)return{type:2,hash:o,children:[d,i]};const m=(0,a.hashFragment)(l,o),y=(0,a.hashFragment)(l,u);return{type:3,mask:(0,a.toBitmap)(m)|(0,a.toBitmap)(y),children:m===y?[c(l+a.SIZE,o,i,u,d)]:m<y?[i,d]:[d,i]}}e.combineLeafNodes=c},"../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/LeafNode.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/combineLeafNodes.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/constants.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NOTHING=void 0,e.NOTHING=Object.create(null)},"../node_modules/typed-immutable-map/dist/nodes/index.js":function(n,e,t){var a=this&&this.__createBinding||(Object.create?function(l,o,i,u){u===void 0&&(u=i),Object.defineProperty(l,u,{enumerable:!0,get:function(){return o[i]}})}:function(l,o,i,u){u===void 0&&(u=i),l[u]=o[i]}),c=this&&this.__exportStar||function(l,o){for(var i in l)i!=="default"&&!Object.prototype.hasOwnProperty.call(o,i)&&a(o,l,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(t("../node_modules/typed-immutable-map/dist/nodes/types.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/constants.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),e),c(t("../node_modules/typed-immutable-map/dist/nodes/modify.js"),e)},"../node_modules/typed-immutable-map/dist/nodes/modify.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.modify=void 0;const a=t("../node_modules/typed-immutable-map/dist/nodes/LeafNode/index.js"),c=t("../node_modules/typed-immutable-map/dist/nodes/EmptyNode.js"),l=t("../node_modules/typed-immutable-map/dist/nodes/ArrayNode/index.js"),o=t("../node_modules/typed-immutable-map/dist/nodes/IndexedNode/index.js"),i=t("../node_modules/typed-immutable-map/dist/nodes/CollisionNode/index.js");function u(d,m,y,p,T,_){switch(d.type){case 1:return(0,a.modifyLeaf)(d,m,y,p,T,_);case 0:return(0,c.modifyEmpty)(d,m,y,p,T,_);case 4:return(0,l.modifyListNode)(d,m,y,p,T,_);case 3:return(0,o.modifyIndexedNode)(d,m,y,p,T,_);case 2:return(0,i.modifyCollisionNode)(d,m,y,p,T,_);default:throw new Error("never")}}e.modify=u},"../node_modules/typed-immutable-map/dist/nodes/types.js":(n,e)=>{Object.defineProperty(e,"__esModule",{value:!0})},"../node_modules/uuid-random/index.js":(n,e,t)=>{(function(){var a,c=0,l=[],o;for(o=0;o<256;o++)l[o]=(o+256).toString(16).substr(1);m.BUFFER_SIZE=4096,m.bin=d,m.clearBuffer=function(){a=null,c=0},m.test=function(y){return typeof y=="string"?/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(y):!1};var i;typeof crypto<"u"?i=crypto:typeof window<"u"&&typeof window.msCrypto<"u"&&(i=window.msCrypto),i=i||t("?699d"),n.exports=m,m.randomBytes=function(){if(i){if(i.randomBytes)return i.randomBytes;if(i.getRandomValues)return typeof Uint8Array.prototype.slice!="function"?function(y){var p=new Uint8Array(y);return i.getRandomValues(p),Array.from(p)}:function(y){var p=new Uint8Array(y);return i.getRandomValues(p),p}}return function(y){var p,T=[];for(p=0;p<y;p++)T.push(Math.floor(Math.random()*256));return T}}();function u(y){return(!a||c+y>m.BUFFER_SIZE)&&(c=0,a=m.randomBytes(m.BUFFER_SIZE)),a.slice(c,c+=y)}function d(){var y=u(16);return y[6]=y[6]&15|64,y[8]=y[8]&63|128,y}function m(){var y=d();return l[y[0]]+l[y[1]]+l[y[2]]+l[y[3]]+"-"+l[y[4]]+l[y[5]]+"-"+l[y[6]]+l[y[7]]+"-"+l[y[8]]+l[y[9]]+"-"+l[y[10]]+l[y[11]]+l[y[12]]+l[y[13]]+l[y[14]]+l[y[15]]}})()},"../node_modules/yallist/iterator.js":n=>{n.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}},"../node_modules/yallist/yallist.js":(n,e,t)=>{n.exports=a,a.Node=i,a.create=a;function a(u){var d=this;if(d instanceof a||(d=new a),d.tail=null,d.head=null,d.length=0,u&&typeof u.forEach=="function")u.forEach(function(p){d.push(p)});else if(arguments.length>0)for(var m=0,y=arguments.length;m<y;m++)d.push(arguments[m]);return d}a.prototype.removeNode=function(u){if(u.list!==this)throw new Error("removing node which does not belong to this list");var d=u.next,m=u.prev;return d&&(d.prev=m),m&&(m.next=d),u===this.head&&(this.head=d),u===this.tail&&(this.tail=m),u.list.length--,u.next=null,u.prev=null,u.list=null,d},a.prototype.unshiftNode=function(u){if(u!==this.head){u.list&&u.list.removeNode(u);var d=this.head;u.list=this,u.next=d,d&&(d.prev=u),this.head=u,this.tail||(this.tail=u),this.length++}},a.prototype.pushNode=function(u){if(u!==this.tail){u.list&&u.list.removeNode(u);var d=this.tail;u.list=this,u.prev=d,d&&(d.next=u),this.tail=u,this.head||(this.head=u),this.length++}},a.prototype.push=function(){for(var u=0,d=arguments.length;u<d;u++)l(this,arguments[u]);return this.length},a.prototype.unshift=function(){for(var u=0,d=arguments.length;u<d;u++)o(this,arguments[u]);return this.length},a.prototype.pop=function(){if(this.tail){var u=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,u}},a.prototype.shift=function(){if(this.head){var u=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,u}},a.prototype.forEach=function(u,d){d=d||this;for(var m=this.head,y=0;m!==null;y++)u.call(d,m.value,y,this),m=m.next},a.prototype.forEachReverse=function(u,d){d=d||this;for(var m=this.tail,y=this.length-1;m!==null;y--)u.call(d,m.value,y,this),m=m.prev},a.prototype.get=function(u){for(var d=0,m=this.head;m!==null&&d<u;d++)m=m.next;if(d===u&&m!==null)return m.value},a.prototype.getReverse=function(u){for(var d=0,m=this.tail;m!==null&&d<u;d++)m=m.prev;if(d===u&&m!==null)return m.value},a.prototype.map=function(u,d){d=d||this;for(var m=new a,y=this.head;y!==null;)m.push(u.call(d,y.value,this)),y=y.next;return m},a.prototype.mapReverse=function(u,d){d=d||this;for(var m=new a,y=this.tail;y!==null;)m.push(u.call(d,y.value,this)),y=y.prev;return m},a.prototype.reduce=function(u,d){var m,y=this.head;if(arguments.length>1)m=d;else if(this.head)y=this.head.next,m=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var p=0;y!==null;p++)m=u(m,y.value,p),y=y.next;return m},a.prototype.reduceReverse=function(u,d){var m,y=this.tail;if(arguments.length>1)m=d;else if(this.tail)y=this.tail.prev,m=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var p=this.length-1;y!==null;p--)m=u(m,y.value,p),y=y.prev;return m},a.prototype.toArray=function(){for(var u=new Array(this.length),d=0,m=this.head;m!==null;d++)u[d]=m.value,m=m.next;return u},a.prototype.toArrayReverse=function(){for(var u=new Array(this.length),d=0,m=this.tail;m!==null;d++)u[d]=m.value,m=m.prev;return u},a.prototype.slice=function(u,d){d=d||this.length,d<0&&(d+=this.length),u=u||0,u<0&&(u+=this.length);var m=new a;if(d<u||d<0)return m;u<0&&(u=0),d>this.length&&(d=this.length);for(var y=0,p=this.head;p!==null&&y<u;y++)p=p.next;for(;p!==null&&y<d;y++,p=p.next)m.push(p.value);return m},a.prototype.sliceReverse=function(u,d){d=d||this.length,d<0&&(d+=this.length),u=u||0,u<0&&(u+=this.length);var m=new a;if(d<u||d<0)return m;u<0&&(u=0),d>this.length&&(d=this.length);for(var y=this.length,p=this.tail;p!==null&&y>d;y--)p=p.prev;for(;p!==null&&y>u;y--,p=p.prev)m.push(p.value);return m},a.prototype.splice=function(u,d,...m){u>this.length&&(u=this.length-1),u<0&&(u=this.length+u);for(var y=0,p=this.head;p!==null&&y<u;y++)p=p.next;for(var T=[],y=0;p&&y<d;y++)T.push(p.value),p=this.removeNode(p);p===null&&(p=this.tail),p!==this.head&&p!==this.tail&&(p=p.prev);for(var y=0;y<m.length;y++)p=c(this,p,m[y]);return T},a.prototype.reverse=function(){for(var u=this.head,d=this.tail,m=u;m!==null;m=m.prev){var y=m.prev;m.prev=m.next,m.next=y}return this.head=d,this.tail=u,this};function c(u,d,m){var y=d===u.head?new i(m,null,d,u):new i(m,d,d.next,u);return y.next===null&&(u.tail=y),y.prev===null&&(u.head=y),u.length++,y}function l(u,d){u.tail=new i(d,u.tail,null,u),u.head||(u.head=u.tail),u.length++}function o(u,d){u.head=new i(d,null,u.head,u),u.tail||(u.tail=u.head),u.length++}function i(u,d,m,y){if(!(this instanceof i))return new i(u,d,m,y);this.list=y,this.value=u,d?(d.next=this,this.prev=d):this.prev=null,m?(m.prev=this,this.next=m):this.next=null}try{t("../node_modules/yallist/iterator.js")(a)}catch{}},"../packages/immutable/dist/Map.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/has.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/get.js"),l=t("../node_modules/typed-immutable-map/dist/HashMap/set.js"),o=t("../node_modules/typed-immutable-map/dist/HashMap/forEach.js"),i=t("../node_modules/typed-immutable-map/dist/HashMap/map.js"),u=t("../node_modules/typed-immutable-map/dist/HashMap/filter.js"),d=t("../node_modules/typed-immutable-map/dist/HashMap/remove.js"),m=t("../node_modules/typed-immutable-map/dist/HashMap/entries.js"),y=t("../node_modules/typed-immutable-map/dist/HashMap/values.js"),p=t("../node_modules/typed-immutable-map/dist/HashMap/keys.js"),T=t("../node_modules/typed-immutable-map/dist/HashMap/size.js");class _{hashmap;constructor(S){this.hashmap=S}get size(){return(0,T.size)(this.hashmap)}set(S,I){return new _((0,l.set)(S,I,this.hashmap))}delete(S){return new _((0,d.remove)(S,this.hashmap))}get(S){return(0,c.get)(S,this.hashmap)}has(S){return(0,a.has)(S,this.hashmap)}forEach(S){(0,o.forEach)(S,this.hashmap)}map(S){return new _((0,i.map)(S,this.hashmap))}filter(S){return new _((0,u.filter)(S,this.hashmap))}toJS(){return Object.fromEntries(this)}toJSON(){return this.toJS()}keys(){return(0,p.keys)(this.hashmap)}values(){return(0,y.values)(this.hashmap)}entries(){return(0,m.entries)(this.hashmap)}[Symbol.iterator](){return this.entries()}}e.Map=_},"../packages/immutable/dist/index.js":(n,e,t)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const a=t("../node_modules/typed-immutable-map/dist/HashMap/empty.js"),c=t("../node_modules/typed-immutable-map/dist/HashMap/from.js"),l=t("../packages/immutable/dist/Map.js"),o=u=>Symbol.iterator in u;function i(u){return u?o(u)?new l.Map((0,c.fromIterable)(u)):new l.Map((0,c.fromObject)(u)):new l.Map((0,a.empty)())}e.Map=i},"../packages/uuid/dist/index.js":function(n,e,t){var a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.v4=void 0;const c=a(t("../node_modules/uuid-random/index.js"));e.v4=c.default},asynciterator:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_asynciterator__},sparqlalgebrajs:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqlalgebrajs__},sparqljs:n=>{n.exports=__QUADSTORE_COMUNICA_EXTERNAL_MODULE_sparqljs__},"?699d":()=>{},"./require-empty.js":()=>{},"./src/crypto-polyfill.js":(__unused_webpack_module,__unused_webpack_exports,__quadstore_comunica_require__)=>{const isNode=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,polyfillCrypto=({randomFillSync:n})=>{__quadstore_comunica_require__.g.crypto={},__quadstore_comunica_require__.g.crypto.getRandomValues=e=>(n(e),e)};isNode&&typeof crypto>"u"&&(eval("typeof require === 'function'")?polyfillCrypto(eval("require('crypto');")):eval("import('crypto');").then(polyfillCrypto).catch(n=>{console.error(n),process.exit(1)}))},"./src/engine.js":(n,e,t)=>{const a=new(t("../node_modules/@comunica/logger-void/lib/index.js")).LoggerVoid,c=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^2.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),l=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^2.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),o=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^2.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),i=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^2.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),u=new(t("../node_modules/@comunica/bus-query-operation/lib/index.js")).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^2.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),d=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^2.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),m=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^2.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),y=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),p=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^2.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),T=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^2.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),_=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^2.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),w=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^2.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),S=new(t("../node_modules/@comunica/core/lib/index.js")).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/^2.0.0/components/ActorRdfResolveQuadPattern.jsonld#ActorRdfResolveQuadPattern_default_bus"});new(t("../node_modules/@comunica/actor-context-preprocess-source-to-destination/lib/index.js")).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:l});const I=new(t("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:l});new(t("../node_modules/@comunica/actor-hash-bindings-sha1/lib/index.js")).ActorHashBindingsSha1({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:o});const j=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:o}),x=new(t("../node_modules/@comunica/mediator-combine-pipeline/lib/index.js")).MediatorCombinePipeline({name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:i});new(t("../node_modules/@comunica/actor-optimize-query-operation-join-bgp/lib/index.js")).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:i}),new(t("../node_modules/@comunica/actor-optimize-query-operation-bgp-to-join/lib/index.js")).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:i}),new(t("../node_modules/@comunica/actor-optimize-query-operation-join-connected/lib/index.js")).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:i});const v=new(t("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:u});new(t("../node_modules/@comunica/actor-query-operation-values/lib/index.js")).ActorQueryOperationValues({name:"urn:comunica:default:query-operation/actors#values",bus:u});const O=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:d});new(t("../node_modules/@comunica/actor-query-parse-sparql/lib/index.js")).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:d});const N=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:m}),D=new(t("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:m}),G=new(t("../node_modules/@comunica/mediator-combine-union/lib/index.js")).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:m}),W=new(t("../node_modules/@comunica/mediator-all/lib/index.js")).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:y});new(t("../node_modules/@comunica/actor-rdf-join-entries-sort-cardinality/lib/index.js")).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:p});const U=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:p});new(t("../node_modules/@comunica/actor-rdf-join-selectivity-variable-counting/lib/index.js")).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:T});const Q=new(t("../node_modules/@comunica/mediator-number/lib/index.js")).MediatorNumber({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:T});new(t("../node_modules/@comunica/actor-rdf-update-quads-rdfjs-store/lib/index.js")).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:_});const Z=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:_}),L=new(t("../node_modules/@comunica/mediator-join-coefficients-fixed/lib/index.js")).MediatorJoinCoefficientsFixed({cpuWeight:1,memoryWeight:1,timeWeight:10,ioWeight:100,name:"urn:comunica:default:rdf-join/mediators#main",bus:w}),M=new(t("../node_modules/@comunica/mediator-race/lib/index.js")).MediatorRace({name:"urn:comunica:default:rdf-resolve-quad-pattern/mediators#main",bus:S});new(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-rdfjs-source/lib/index.js")).ActorRdfResolveQuadPatternRdfJsSource({name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#rdfjs-source",bus:S}),new(t("../node_modules/@comunica/actor-query-operation-ask/lib/index.js")).ActorQueryOperationAsk({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#ask",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-bgp-join/lib/index.js")).ActorQueryOperationBgpJoin({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#bgp",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-construct/lib/index.js")).ActorQueryOperationConstruct({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#construct",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-describe-subject/lib/index.js")).ActorQueryOperationDescribeSubject({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#describe",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-distinct-hash/lib/index.js")).ActorQueryOperationDistinctHash({mediatorHashBindings:j,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#distinct",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-extend/lib/index.js")).ActorQueryOperationExtend({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#extend",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-filter-sparqlee/lib/index.js")).ActorQueryOperationFilterSparqlee({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#filter",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-from-quad/lib/index.js")).ActorQueryOperationFromQuad({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#from",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-group/lib/index.js")).ActorQueryOperationGroup({mediatorHashBindings:j,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#group",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-orderby-sparqlee/lib/index.js")).ActorQueryOperationOrderBySparqlee({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#orderby",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-nop/lib/index.js")).ActorQueryOperationNop({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#nop",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-project/lib/index.js")).ActorQueryOperationProject({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#project",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-reduced-hash/lib/index.js")).ActorQueryOperationReducedHash({mediatorHashBindings:j,cacheSize:100,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#reduced",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-service/lib/index.js")).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#service",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-slice/lib/index.js")).ActorQueryOperationSlice({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#slice",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-union/lib/index.js")).ActorQueryOperationUnion({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#union",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-alt/lib/index.js")).ActorQueryOperationPathAlt({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-alt",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-inv/lib/index.js")).ActorQueryOperationPathInv({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-inv",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-link/lib/index.js")).ActorQueryOperationPathLink({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-link",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-zero-or-one/lib/index.js")).ActorQueryOperationPathZeroOrOne({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-add-rewrite/lib/index.js")).ActorQueryOperationAddRewrite({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-add",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-zero-or-more/lib/index.js")).ActorQueryOperationPathZeroOrMore({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-one-or-more/lib/index.js")).ActorQueryOperationPathOneOrMore({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-compositeupdate/lib/index.js")).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-composite",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-nps/lib/index.js")).ActorQueryOperationPathNps({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-nps",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-copy-rewrite/lib/index.js")).ActorQueryOperationCopyRewrite({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-copy",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-move-rewrite/lib/index.js")).ActorQueryOperationMoveRewrite({mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-move",bus:u});const V=new(t("../node_modules/@comunica/actor-init-query/lib/index-browser.js")).ActorInitQuery({mediatorOptimizeQueryOperation:x,mediatorQueryOperation:v,mediatorQueryParse:O,mediatorQueryResultSerialize:N,mediatorQueryResultSerializeMediaTypeCombiner:D,mediatorQueryResultSerializeMediaTypeFormatCombiner:G,mediatorContextPreprocess:I,mediatorHttpInvalidate:W,logger:a,defaultQueryInputFormat:"sparql",allowNoSources:!1,contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelay:"@comunica/bus-http:http-retry-delay",httpRetryOnServerError:"@comunica/bus-http:http-retry-on-server-error",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",localizeBlankNodes:"@comunica/actor-query-operation:localizeBlankNodes",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:init/actors#query",bus:c});new(t("../node_modules/@comunica/actor-rdf-join-inner-none/lib/index.js")).ActorRdfJoinNone({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-inner-single/lib/index.js")).ActorRdfJoinSingle({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-empty/lib/index.js")).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-bind/lib/index.js")).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorJoinEntriesSort:U,mediatorQueryOperation:v,mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-inner-hash/lib/index.js")).ActorRdfJoinHash({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-inner-symmetrichash/lib/index.js")).ActorRdfJoinSymmetricHash({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-inner-nestedloop/lib/index.js")).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-optional-bind/lib/index.js")).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorQueryOperation:v,mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-optional-nestedloop/lib/index.js")).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-minus-hash/lib/index.js")).ActorRdfJoinMinusHash({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:w}),new(t("../node_modules/@comunica/actor-rdf-join-minus-hash-undef/lib/index.js")).ActorRdfJoinMinusHashUndef({mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:w}),new(t("../node_modules/@comunica/actor-query-operation-update-clear/lib/index.js")).ActorQueryOperationClear({mediatorUpdateQuads:Z,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-clear",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-create/lib/index.js")).ActorQueryOperationCreate({mediatorUpdateQuads:Z,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-create",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-deleteinsert/lib/index.js")).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:Z,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-drop/lib/index.js")).ActorQueryOperationDrop({mediatorUpdateQuads:Z,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-drop",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-update-load/lib/index.js")).ActorQueryOperationLoad({mediatorUpdateQuads:Z,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#update-load",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-join/lib/index.js")).ActorQueryOperationJoin({mediatorJoin:L,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#join",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-leftjoin/lib/index.js")).ActorQueryOperationLeftJoin({mediatorJoin:L,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-minus/lib/index.js")).ActorQueryOperationMinus({mediatorJoin:L,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#minus",bus:u}),new(t("../node_modules/@comunica/actor-query-operation-path-seq/lib/index.js")).ActorQueryOperationPathSeq({mediatorJoin:L,mediatorQueryOperation:v,name:"urn:comunica:default:query-operation/actors#path-seq",bus:u}),new(t("../node_modules/@comunica/actor-rdf-join-inner-multi-smallest/lib/index.js")).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:U,mediatorJoin:L,mediatorJoinSelectivity:Q,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:w}),new(t("../node_modules/@comunica/actor-query-operation-quadpattern/lib/index.js")).ActorQueryOperationQuadpattern({mediatorResolveQuadPattern:M,unionDefaultGraph:!1,name:"urn:comunica:default:query-operation/actors#quadpattern",bus:u}),new(t("../node_modules/@comunica/actor-rdf-resolve-quad-pattern-federated/lib/index.js")).ActorRdfResolveQuadPatternFederated({mediatorResolveQuadPattern:M,skipEmptyPatterns:!1,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#federated",bus:S}),n.exports=V},"./src/index.js":(n,e,t)=>{t("./src/crypto-polyfill.js");const{QueryEngineBase:a}=t("../node_modules/@comunica/actor-init-query/lib/index-browser.js"),c=new a(t("./src/engine.js")),l=Object.create(null);class o{constructor(u){this.store=u,this.engine=c}getContext(u){return{...u,source:this.store,destination:this.store}}query(u,d=l){return c.query(u,this.getContext(d))}queryVoid(u,d=l){return c.queryVoid(u,this.getContext(d))}queryBindings(u,d=l){return c.queryBindings(u,this.getContext(d))}queryQuads(u,d=l){return c.queryQuads(u,this.getContext(d))}queryBoolean(u,d=l){return c.queryBoolean(u,this.getContext(d))}}n.exports.D=o,n.exports.H=c},"../node_modules/@comunica/actor-query-operation-reduced-hash/node_modules/lru-cache/index.js":n=>{const e=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,a=typeof AbortController=="function"?AbortController:class{constructor(){this.signal=new o}abort(v=new Error("This operation was aborted")){this.signal.reason=this.signal.reason||v,this.signal.aborted=!0,this.signal.dispatchEvent({type:"abort",target:this.signal})}},c=typeof AbortSignal=="function",l=typeof a.AbortSignal=="function",o=c?AbortSignal:l?a.AbortController:class{constructor(){this.reason=void 0,this.aborted=!1,this._listeners=[]}dispatchEvent(v){v.type==="abort"&&(this.aborted=!0,this.onabort(v),this._listeners.forEach(O=>O(v),this))}onabort(){}addEventListener(v,O){v==="abort"&&this._listeners.push(O)}removeEventListener(v,O){v==="abort"&&(this._listeners=this._listeners.filter(N=>N!==O))}},i=new Set,u=(x,v)=>{const O=`LRU_CACHE_OPTION_${x}`;p(O)&&T(O,`${x} option`,`options.${v}`,j)},d=(x,v)=>{const O=`LRU_CACHE_METHOD_${x}`;if(p(O)){const{prototype:N}=j,{get:D}=Object.getOwnPropertyDescriptor(N,x);T(O,`${x} method`,`cache.${v}()`,D)}},m=(x,v)=>{const O=`LRU_CACHE_PROPERTY_${x}`;if(p(O)){const{prototype:N}=j,{get:D}=Object.getOwnPropertyDescriptor(N,x);T(O,`${x} property`,`cache.${v}`,D)}},y=(...x)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...x):console.error(...x)},p=x=>!i.has(x),T=(x,v,O,N)=>{i.add(x);const D=`The ${v} is deprecated. Please use ${O} instead.`;y(D,"DeprecationWarning",x,N)},_=x=>x&&x===Math.floor(x)&&x>0&&isFinite(x),w=x=>_(x)?x<=Math.pow(2,8)?Uint8Array:x<=Math.pow(2,16)?Uint16Array:x<=Math.pow(2,32)?Uint32Array:x<=Number.MAX_SAFE_INTEGER?S:null:null;class S extends Array{constructor(v){super(v),this.fill(0)}}class I{constructor(v){if(v===0)return[];const O=w(v);this.heap=new O(v),this.length=0}push(v){this.heap[this.length++]=v}pop(){return this.heap[--this.length]}}class j{constructor(v={}){const{max:O=0,ttl:N,ttlResolution:D=1,ttlAutopurge:G,updateAgeOnGet:W,updateAgeOnHas:U,allowStale:Q,dispose:Z,disposeAfter:L,noDisposeOnSet:M,noUpdateTTL:V,maxSize:H=0,maxEntrySize:J=0,sizeCalculation:ce,fetchMethod:oe,fetchContext:le,noDeleteOnFetchRejection:ue,noDeleteOnStaleGet:be,allowStaleOnFetchRejection:Ee,allowStaleOnFetchAbort:Ae,ignoreFetchAbort:xe}=v,{length:Oe,maxAge:fe,stale:Se}=v instanceof j?{}:v;if(O!==0&&!_(O))throw new TypeError("max option must be a nonnegative integer");const Ne=O?w(O):Array;if(!Ne)throw new Error("invalid max value: "+O);if(this.max=O,this.maxSize=H,this.maxEntrySize=J||this.maxSize,this.sizeCalculation=ce||Oe,this.sizeCalculation){if(!this.maxSize&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=oe||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=le,!this.fetchMethod&&le!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(O).fill(null),this.valList=new Array(O).fill(null),this.next=new Ne(O),this.prev=new Ne(O),this.head=0,this.tail=0,this.free=new I(O),this.initialFill=1,this.size=0,typeof Z=="function"&&(this.dispose=Z),typeof L=="function"?(this.disposeAfter=L,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!M,this.noUpdateTTL=!!V,this.noDeleteOnFetchRejection=!!ue,this.allowStaleOnFetchRejection=!!Ee,this.allowStaleOnFetchAbort=!!Ae,this.ignoreFetchAbort=!!xe,this.maxEntrySize!==0){if(this.maxSize!==0&&!_(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");if(!_(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!Q||!!Se,this.noDeleteOnStaleGet=!!be,this.updateAgeOnGet=!!W,this.updateAgeOnHas=!!U,this.ttlResolution=_(D)||D===0?D:1,this.ttlAutopurge=!!G,this.ttl=N||fe||0,this.ttl){if(!_(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){const De="LRU_CACHE_UNBOUNDED";p(De)&&(i.add(De),y("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",De,j))}Se&&u("stale","allowStale"),fe&&u("maxAge","ttl"),Oe&&u("length","sizeCalculation")}getRemainingTTL(v){return this.has(v,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new S(this.max),this.starts=new S(this.max),this.setItemTTL=(N,D,G=e.now())=>{if(this.starts[N]=D!==0?G:0,this.ttls[N]=D,D!==0&&this.ttlAutopurge){const W=setTimeout(()=>{this.isStale(N)&&this.delete(this.keyList[N])},D+1);W.unref&&W.unref()}},this.updateItemAge=N=>{this.starts[N]=this.ttls[N]!==0?e.now():0},this.statusTTL=(N,D)=>{N&&(N.ttl=this.ttls[D],N.start=this.starts[D],N.now=v||O(),N.remainingTTL=N.now+N.ttl-N.start)};let v=0;const O=()=>{const N=e.now();if(this.ttlResolution>0){v=N;const D=setTimeout(()=>v=0,this.ttlResolution);D.unref&&D.unref()}return N};this.getRemainingTTL=N=>{const D=this.keyMap.get(N);return D===void 0?0:this.ttls[D]===0||this.starts[D]===0?1/0:this.starts[D]+this.ttls[D]-(v||O())},this.isStale=N=>this.ttls[N]!==0&&this.starts[N]!==0&&(v||O())-this.starts[N]>this.ttls[N]}updateItemAge(v){}statusTTL(v,O){}setItemTTL(v,O,N){}isStale(v){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new S(this.max),this.removeItemSize=v=>{this.calculatedSize-=this.sizes[v],this.sizes[v]=0},this.requireSize=(v,O,N,D)=>{if(this.isBackgroundFetch(O))return 0;if(!_(N))if(D){if(typeof D!="function")throw new TypeError("sizeCalculation must be a function");if(N=D(O,v),!_(N))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return N},this.addItemSize=(v,O,N)=>{if(this.sizes[v]=O,this.maxSize){const D=this.maxSize-this.sizes[v];for(;this.calculatedSize>D;)this.evict(!0)}this.calculatedSize+=this.sizes[v],N&&(N.entrySize=O,N.totalCalculatedSize=this.calculatedSize)}}removeItemSize(v){}addItemSize(v,O){}requireSize(v,O,N,D){if(N||D)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache")}*indexes({allowStale:v=this.allowStale}={}){if(this.size)for(let O=this.tail;!(!this.isValidIndex(O)||((v||!this.isStale(O))&&(yield O),O===this.head));)O=this.prev[O]}*rindexes({allowStale:v=this.allowStale}={}){if(this.size)for(let O=this.head;!(!this.isValidIndex(O)||((v||!this.isStale(O))&&(yield O),O===this.tail));)O=this.next[O]}isValidIndex(v){return v!==void 0&&this.keyMap.get(this.keyList[v])===v}*entries(){for(const v of this.indexes())this.valList[v]!==void 0&&this.keyList[v]!==void 0&&!this.isBackgroundFetch(this.valList[v])&&(yield[this.keyList[v],this.valList[v]])}*rentries(){for(const v of this.rindexes())this.valList[v]!==void 0&&this.keyList[v]!==void 0&&!this.isBackgroundFetch(this.valList[v])&&(yield[this.keyList[v],this.valList[v]])}*keys(){for(const v of this.indexes())this.keyList[v]!==void 0&&!this.isBackgroundFetch(this.valList[v])&&(yield this.keyList[v])}*rkeys(){for(const v of this.rindexes())this.keyList[v]!==void 0&&!this.isBackgroundFetch(this.valList[v])&&(yield this.keyList[v])}*values(){for(const v of this.indexes())this.valList[v]!==void 0&&!this.isBackgroundFetch(this.valList[v])&&(yield this.valList[v])}*rvalues(){for(const v of this.rindexes())this.valList[v]!==void 0&&!this.isBackgroundFetch(this.valList[v])&&(yield this.valList[v])}[Symbol.iterator](){return this.entries()}find(v,O){for(const N of this.indexes()){const D=this.valList[N],G=this.isBackgroundFetch(D)?D.__staleWhileFetching:D;if(G!==void 0&&v(G,this.keyList[N],this))return this.get(this.keyList[N],O)}}forEach(v,O=this){for(const N of this.indexes()){const D=this.valList[N],G=this.isBackgroundFetch(D)?D.__staleWhileFetching:D;G!==void 0&&v.call(O,G,this.keyList[N],this)}}rforEach(v,O=this){for(const N of this.rindexes()){const D=this.valList[N],G=this.isBackgroundFetch(D)?D.__staleWhileFetching:D;G!==void 0&&v.call(O,G,this.keyList[N],this)}}get prune(){return d("prune","purgeStale"),this.purgeStale}purgeStale(){let v=!1;for(const O of this.rindexes({allowStale:!0}))this.isStale(O)&&(this.delete(this.keyList[O]),v=!0);return v}dump(){const v=[];for(const O of this.indexes({allowStale:!0})){const N=this.keyList[O],D=this.valList[O],G=this.isBackgroundFetch(D)?D.__staleWhileFetching:D;if(G===void 0)continue;const W={value:G};if(this.ttls){W.ttl=this.ttls[O];const U=e.now()-this.starts[O];W.start=Math.floor(Date.now()-U)}this.sizes&&(W.size=this.sizes[O]),v.unshift([N,W])}return v}load(v){this.clear();for(const[O,N]of v){if(N.start){const D=Date.now()-N.start;N.start=e.now()-D}this.set(O,N.value,N)}}dispose(v,O,N){}set(v,O,{ttl:N=this.ttl,start:D,noDisposeOnSet:G=this.noDisposeOnSet,size:W=0,sizeCalculation:U=this.sizeCalculation,noUpdateTTL:Q=this.noUpdateTTL,status:Z}={}){if(W=this.requireSize(v,O,W,U),this.maxEntrySize&&W>this.maxEntrySize)return Z&&(Z.set="miss",Z.maxEntrySizeExceeded=!0),this.delete(v),this;let L=this.size===0?void 0:this.keyMap.get(v);if(L===void 0)L=this.newIndex(),this.keyList[L]=v,this.valList[L]=O,this.keyMap.set(v,L),this.next[this.tail]=L,this.prev[L]=this.tail,this.tail=L,this.size++,this.addItemSize(L,W,Z),Z&&(Z.set="add"),Q=!1;else{this.moveToTail(L);const M=this.valList[L];if(O!==M){if(this.isBackgroundFetch(M)?M.__abortController.abort(new Error("replaced")):G||(this.dispose(M,v,"set"),this.disposeAfter&&this.disposed.push([M,v,"set"])),this.removeItemSize(L),this.valList[L]=O,this.addItemSize(L,W,Z),Z){Z.set="replace";const V=M&&this.isBackgroundFetch(M)?M.__staleWhileFetching:M;V!==void 0&&(Z.oldValue=V)}}else Z&&(Z.set="update")}if(N!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),Q||this.setItemTTL(L,N,D),this.statusTTL(Z,L),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){const v=this.valList[this.head];return this.evict(!0),v}}evict(v){const O=this.head,N=this.keyList[O],D=this.valList[O];return this.isBackgroundFetch(D)?D.__abortController.abort(new Error("evicted")):(this.dispose(D,N,"evict"),this.disposeAfter&&this.disposed.push([D,N,"evict"])),this.removeItemSize(O),v&&(this.keyList[O]=null,this.valList[O]=null,this.free.push(O)),this.head=this.next[O],this.keyMap.delete(N),this.size--,O}has(v,{updateAgeOnHas:O=this.updateAgeOnHas,status:N}={}){const D=this.keyMap.get(v);if(D!==void 0)if(this.isStale(D))N&&(N.has="stale",this.statusTTL(N,D));else return O&&this.updateItemAge(D),N&&(N.has="hit"),this.statusTTL(N,D),!0;else N&&(N.has="miss");return!1}peek(v,{allowStale:O=this.allowStale}={}){const N=this.keyMap.get(v);if(N!==void 0&&(O||!this.isStale(N))){const D=this.valList[N];return this.isBackgroundFetch(D)?D.__staleWhileFetching:D}}backgroundFetch(v,O,N,D){const G=O===void 0?void 0:this.valList[O];if(this.isBackgroundFetch(G))return G;const W=new a;N.signal&&N.signal.addEventListener("abort",()=>W.abort(N.signal.reason));const U={signal:W.signal,options:N,context:D},Q=(H,J=!1)=>{const{aborted:ce}=W.signal,oe=N.ignoreFetchAbort&&H!==void 0;return N.status&&(ce&&!J?(N.status.fetchAborted=!0,N.status.fetchError=W.signal.reason,oe&&(N.status.fetchAbortIgnored=!0)):N.status.fetchResolved=!0),ce&&!oe&&!J?L(W.signal.reason):(this.valList[O]===V&&(H===void 0?V.__staleWhileFetching?this.valList[O]=V.__staleWhileFetching:this.delete(v):(N.status&&(N.status.fetchUpdated=!0),this.set(v,H,U.options))),H)},Z=H=>(N.status&&(N.status.fetchRejected=!0,N.status.fetchError=H),L(H)),L=H=>{const{aborted:J}=W.signal,ce=J&&N.allowStaleOnFetchAbort,oe=ce||N.allowStaleOnFetchRejection,le=oe||N.noDeleteOnFetchRejection;if(this.valList[O]===V&&(!le||V.__staleWhileFetching===void 0?this.delete(v):ce||(this.valList[O]=V.__staleWhileFetching)),oe)return N.status&&V.__staleWhileFetching!==void 0&&(N.status.returnedStale=!0),V.__staleWhileFetching;if(V.__returned===V)throw H},M=(H,J)=>{this.fetchMethod(v,G,U).then(ce=>H(ce),J),W.signal.addEventListener("abort",()=>{(!N.ignoreFetchAbort||N.allowStaleOnFetchAbort)&&(H(),N.allowStaleOnFetchAbort&&(H=ce=>Q(ce,!0)))})};N.status&&(N.status.fetchDispatched=!0);const V=new Promise(M).then(Q,Z);return V.__abortController=W,V.__staleWhileFetching=G,V.__returned=null,O===void 0?(this.set(v,V,{...U.options,status:void 0}),O=this.keyMap.get(v)):this.valList[O]=V,V}isBackgroundFetch(v){return v&&typeof v=="object"&&typeof v.then=="function"&&Object.prototype.hasOwnProperty.call(v,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(v,"__returned")&&(v.__returned===v||v.__returned===null)}async fetch(v,{allowStale:O=this.allowStale,updateAgeOnGet:N=this.updateAgeOnGet,noDeleteOnStaleGet:D=this.noDeleteOnStaleGet,ttl:G=this.ttl,noDisposeOnSet:W=this.noDisposeOnSet,size:U=0,sizeCalculation:Q=this.sizeCalculation,noUpdateTTL:Z=this.noUpdateTTL,noDeleteOnFetchRejection:L=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:M=this.allowStaleOnFetchRejection,ignoreFetchAbort:V=this.ignoreFetchAbort,allowStaleOnFetchAbort:H=this.allowStaleOnFetchAbort,fetchContext:J=this.fetchContext,forceRefresh:ce=!1,status:oe,signal:le}={}){if(!this.fetchMethod)return oe&&(oe.fetch="get"),this.get(v,{allowStale:O,updateAgeOnGet:N,noDeleteOnStaleGet:D,status:oe});const ue={allowStale:O,updateAgeOnGet:N,noDeleteOnStaleGet:D,ttl:G,noDisposeOnSet:W,size:U,sizeCalculation:Q,noUpdateTTL:Z,noDeleteOnFetchRejection:L,allowStaleOnFetchRejection:M,allowStaleOnFetchAbort:H,ignoreFetchAbort:V,status:oe,signal:le};let be=this.keyMap.get(v);if(be===void 0){oe&&(oe.fetch="miss");const Ee=this.backgroundFetch(v,be,ue,J);return Ee.__returned=Ee}else{const Ee=this.valList[be];if(this.isBackgroundFetch(Ee)){const Se=O&&Ee.__staleWhileFetching!==void 0;return oe&&(oe.fetch="inflight",Se&&(oe.returnedStale=!0)),Se?Ee.__staleWhileFetching:Ee.__returned=Ee}const Ae=this.isStale(be);if(!ce&&!Ae)return oe&&(oe.fetch="hit"),this.moveToTail(be),N&&this.updateItemAge(be),this.statusTTL(oe,be),Ee;const xe=this.backgroundFetch(v,be,ue,J),Oe=xe.__staleWhileFetching!==void 0,fe=Oe&&O;return oe&&(oe.fetch=Oe&&Ae?"stale":"refresh",fe&&Ae&&(oe.returnedStale=!0)),fe?xe.__staleWhileFetching:xe.__returned=xe}}get(v,{allowStale:O=this.allowStale,updateAgeOnGet:N=this.updateAgeOnGet,noDeleteOnStaleGet:D=this.noDeleteOnStaleGet,status:G}={}){const W=this.keyMap.get(v);if(W!==void 0){const U=this.valList[W],Q=this.isBackgroundFetch(U);return this.statusTTL(G,W),this.isStale(W)?(G&&(G.get="stale"),Q?(G&&(G.returnedStale=O&&U.__staleWhileFetching!==void 0),O?U.__staleWhileFetching:void 0):(D||this.delete(v),G&&(G.returnedStale=O),O?U:void 0)):(G&&(G.get="hit"),Q?U.__staleWhileFetching:(this.moveToTail(W),N&&this.updateItemAge(W),U))}else G&&(G.get="miss")}connect(v,O){this.prev[O]=v,this.next[v]=O}moveToTail(v){v!==this.tail&&(v===this.head?this.head=this.next[v]:this.connect(this.prev[v],this.next[v]),this.connect(this.tail,v),this.tail=v)}get del(){return d("del","delete"),this.delete}delete(v){let O=!1;if(this.size!==0){const N=this.keyMap.get(v);if(N!==void 0)if(O=!0,this.size===1)this.clear();else{this.removeItemSize(N);const D=this.valList[N];this.isBackgroundFetch(D)?D.__abortController.abort(new Error("deleted")):(this.dispose(D,v,"delete"),this.disposeAfter&&this.disposed.push([D,v,"delete"])),this.keyMap.delete(v),this.keyList[N]=null,this.valList[N]=null,N===this.tail?this.tail=this.prev[N]:N===this.head?this.head=this.next[N]:(this.next[this.prev[N]]=this.next[N],this.prev[this.next[N]]=this.prev[N]),this.size--,this.free.push(N)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return O}clear(){for(const v of this.rindexes({allowStale:!0})){const O=this.valList[v];if(this.isBackgroundFetch(O))O.__abortController.abort(new Error("deleted"));else{const N=this.keyList[v];this.dispose(O,N,"delete"),this.disposeAfter&&this.disposed.push([O,N,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return d("reset","clear"),this.clear}get length(){return m("length","size"),this.size}static get AbortController(){return a}static get AbortSignal(){return o}}n.exports=j}},__quadstore_comunica_module_cache__={};function __quadstore_comunica_require__(n){var e=__quadstore_comunica_module_cache__[n];if(e!==void 0)return e.exports;var t=__quadstore_comunica_module_cache__[n]={exports:{}};return __quadstore_comunica_modules__[n].call(t.exports,t,t.exports,__quadstore_comunica_require__),t.exports}__quadstore_comunica_require__.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();var __quadstore_comunica_exports__=__quadstore_comunica_require__("./src/index.js"),__quadstore_comunica_exports__Engine=__quadstore_comunica_exports__.D;__quadstore_comunica_exports__.H;const proxyMarker=Symbol("Comlink.proxy"),createEndpoint=Symbol("Comlink.endpoint"),releaseProxy=Symbol("Comlink.releaseProxy"),throwMarker=Symbol("Comlink.thrown"),isObject=n=>typeof n=="object"&&n!==null||typeof n=="function",proxyTransferHandler={canHandle:n=>isObject(n)&&n[proxyMarker],serialize(n){const{port1:e,port2:t}=new MessageChannel;return expose(n,e),[t,[t]]},deserialize(n){return n.start(),wrap(n)}},throwTransferHandler={canHandle:n=>isObject(n)&&throwMarker in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},transferHandlers=new Map([["proxy",proxyTransferHandler],["throw",throwTransferHandler]]);function expose(n,e=self){e.addEventListener("message",function t(a){if(!a||!a.data)return;const{id:c,type:l,path:o}=Object.assign({path:[]},a.data),i=(a.data.argumentList||[]).map(fromWireValue);let u;try{const d=o.slice(0,-1).reduce((y,p)=>y[p],n),m=o.reduce((y,p)=>y[p],n);switch(l){case"GET":u=m;break;case"SET":d[o.slice(-1)[0]]=fromWireValue(a.data.value),u=!0;break;case"APPLY":u=m.apply(d,i);break;case"CONSTRUCT":{const y=new m(...i);u=proxy(y)}break;case"ENDPOINT":{const{port1:y,port2:p}=new MessageChannel;expose(n,p),u=transfer(y,[y])}break;case"RELEASE":u=void 0;break;default:return}}catch(d){u={value:d,[throwMarker]:0}}Promise.resolve(u).catch(d=>({value:d,[throwMarker]:0})).then(d=>{const[m,y]=toWireValue(d);e.postMessage(Object.assign(Object.assign({},m),{id:c}),y),l==="RELEASE"&&(e.removeEventListener("message",t),closeEndPoint(e))})}),e.start&&e.start()}function isMessagePort(n){return n.constructor.name==="MessagePort"}function closeEndPoint(n){isMessagePort(n)&&n.close()}function wrap(n,e){return createProxy(n,[],e)}function throwIfProxyReleased(n){if(n)throw new Error("Proxy has been released and is not useable")}function createProxy(n,e=[],t=function(){}){let a=!1;const c=new Proxy(t,{get(l,o){if(throwIfProxyReleased(a),o===releaseProxy)return()=>requestResponseMessage(n,{type:"RELEASE",path:e.map(i=>i.toString())}).then(()=>{closeEndPoint(n),a=!0});if(o==="then"){if(e.length===0)return{then:()=>c};const i=requestResponseMessage(n,{type:"GET",path:e.map(u=>u.toString())}).then(fromWireValue);return i.then.bind(i)}return createProxy(n,[...e,o])},set(l,o,i){throwIfProxyReleased(a);const[u,d]=toWireValue(i);return requestResponseMessage(n,{type:"SET",path:[...e,o].map(m=>m.toString()),value:u},d).then(fromWireValue)},apply(l,o,i){throwIfProxyReleased(a);const u=e[e.length-1];if(u===createEndpoint)return requestResponseMessage(n,{type:"ENDPOINT"}).then(fromWireValue);if(u==="bind")return createProxy(n,e.slice(0,-1));const[d,m]=processArguments(i);return requestResponseMessage(n,{type:"APPLY",path:e.map(y=>y.toString()),argumentList:d},m).then(fromWireValue)},construct(l,o){throwIfProxyReleased(a);const[i,u]=processArguments(o);return requestResponseMessage(n,{type:"CONSTRUCT",path:e.map(d=>d.toString()),argumentList:i},u).then(fromWireValue)}});return c}function myFlat(n){return Array.prototype.concat.apply([],n)}function processArguments(n){const e=n.map(toWireValue);return[e.map(t=>t[0]),myFlat(e.map(t=>t[1]))]}const transferCache=new WeakMap;function transfer(n,e){return transferCache.set(n,e),n}function proxy(n){return Object.assign(n,{[proxyMarker]:!0})}function toWireValue(n){for(const[e,t]of transferHandlers)if(t.canHandle(n)){const[a,c]=t.serialize(n);return[{type:"HANDLER",name:e,value:a},c]}return[{type:"RAW",value:n},transferCache.get(n)||[]]}function fromWireValue(n){switch(n.type){case"HANDLER":return transferHandlers.get(n.name).deserialize(n.value);case"RAW":return n.value}}function requestResponseMessage(n,e,t){return new Promise(a=>{const c=generateUUID();n.addEventListener("message",function l(o){!o.data||!o.data.id||o.data.id!==c||(n.removeEventListener("message",l),a(o.data))}),n.start&&n.start(),n.postMessage(Object.assign({id:c},e),t)})}function generateUUID(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const DEPENDS_ON="http://dat-ecosystem.org#dependson",OWNS="http://dat-ecosystem.org#owns";function fromPairs(n){for(var e=-1,t=n==null?0:n.length,a={};++e<t;){var c=n[e];a[c[0]]=c[1]}return a}const backend=new MemoryLevel_1,df=new rdfDataFactory.DataFactory,store=new Quadstore({backend,dataFactory:df}),engine=new __quadstore_comunica_exports__Engine(store);async function buildGraph(n){const{valueNetworkData:e,projectsData:t,organizationsData:a}=n,c=Object.entries(e).flatMap(([u,{dependents:d,dependencies:m,owner:y}])=>[y&&u&&df.quad(df.namedNode(y),df.literal(OWNS),df.namedNode(u),df.defaultGraph()),...(d||[]).filter(p=>p).map(p=>df.quad(df.namedNode(p),df.namedNode(DEPENDS_ON),df.namedNode(u),df.defaultGraph())),...(m||[]).filter(p=>p).map(p=>df.quad(df.namedNode(u),df.namedNode(DEPENDS_ON),df.namedNode(p),df.defaultGraph()))]).filter(u=>u),l=[...Object.entries(a).flatMap(([u,d])=>Object.entries(d).flatMap(([m,y])=>y&&df.quad(df.namedNode(u),df.namedNode(m),df.literal(y))).filter(m=>m))],o=[...Object.entries(t).flatMap(([u,d])=>Object.entries(d).flatMap(([m,y])=>y&&df.quad(df.namedNode(u),df.namedNode(m),df.literal(y))).filter(m=>m))],i=[...c,...l,...o];await store.open(),await store.multiPut(i),console.log("inserted",i.length,"entries")}const getProps=n=>(e=>fromPairs([e].flat().map(t=>[t,n.get(t)]))).bind(n),doQuery=async(n,e,t,a)=>{await engine.queryBindings(n).then(c=>{e&&c.on("data",l=>e(l,proxy(getProps(l)))),t&&c.on("end",l=>t(l,l&&proxy(l.get.bind(l)))),a&&c.on("error",l=>a(l,l&&proxy(l.get.bind(l))))})};expose({buildGraph,doQuery});
